function module(e,r,t){var s;t.export({URI:function(){return a},equivalentURI:function(){return h}}),t.link("./parameters",{Parameters:function(e){s=e}},0);class a extends s{constructor(e="sip",r,t,s,a,h){if(super(a||{}),this.headers={},!t)throw TypeError('missing or invalid "host" parameter');for(let e in h)h.hasOwnProperty(e)&&this.setHeader(e,h[e]);this.raw={scheme:e,user:r,host:t,port:s},this.normal={scheme:e.toLowerCase(),user:r,host:t.toLowerCase(),port:s}}get scheme(){return this.normal.scheme}set scheme(e){this.raw.scheme=e,this.normal.scheme=e.toLowerCase()}get user(){return this.normal.user}set user(e){this.normal.user=this.raw.user=e}get host(){return this.normal.host}set host(e){this.raw.host=e,this.normal.host=e.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(e){this.normal.port=this.raw.port=e}setHeader(e,r){this.headers[this.headerize(e)]=r instanceof Array?r:[r]}getHeader(e){if(e)return this.headers[this.headerize(e)]}hasHeader(e){return!!e&&!!this.headers.hasOwnProperty(this.headerize(e))}deleteHeader(e){if(e=this.headerize(e),this.headers.hasOwnProperty(e)){let r=this.headers[e];return delete this.headers[e],r}}clearHeaders(){this.headers={}}clone(){return new a(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(e){let r=e.scheme+":";for(let t in e.scheme.toLowerCase().match("^sips?$")||(r+="//"),e.user&&(r+=this.escapeUser(e.user)+"@"),r+=e.host,(e.port||0===e.port)&&(r+=":"+e.port),this.parameters)this.parameters.hasOwnProperty(t)&&(r+=";"+t,null!==this.parameters[t]&&(r+="="+this.parameters[t]));let t=[];for(let e in this.headers)if(this.headers.hasOwnProperty(e))for(let r in this.headers[e])this.headers[e].hasOwnProperty(r)&&t.push(e+"="+this.headers[e][r]);return t.length>0&&(r+="?"+t.join("&")),r}escapeUser(e){let r;try{r=decodeURIComponent(e)}catch(e){throw e}return encodeURIComponent(r).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/")}headerize(e){let r={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},t=e.toLowerCase().replace(/_/g,"-").split("-"),s=t.length,a="";for(let e=0;e<s;e++)0!==e&&(a+="-"),a+=t[e].charAt(0).toUpperCase()+t[e].substring(1);return r[a]&&(a=r[a]),a}}function h(e,r){if(e.scheme!==r.scheme||e.user!==r.user||e.host!==r.host||e.port!==r.port||!function(e,r){let t=Object.keys(e.parameters),s=Object.keys(r.parameters),a=t.filter(e=>s.includes(e));return!!(a.every(t=>e.parameters[t]===r.parameters[t])&&["user","ttl","method","transport"].every(t=>e.hasParam(t)&&r.hasParam(t)||!e.hasParam(t)&&!r.hasParam(t))&&["maddr"].every(t=>e.hasParam(t)&&r.hasParam(t)||!e.hasParam(t)&&!r.hasParam(t)))}(e,r))return!1;let t=Object.keys(e.headers),s=Object.keys(r.headers);if(0!==t.length||0!==s.length){if(t.length!==s.length)return!1;let a=t.filter(e=>s.includes(e));if(a.length!==s.length||!a.every(t=>e.headers[t].length&&r.headers[t].length&&e.headers[t][0]===r.headers[t][0]))return!1}return!0}}
//# sourceMappingURL=/dynamic/node_modules/sip.js/lib/grammar/f6e5811a3d8a090acb3250d27c320965d1a1581a.map
