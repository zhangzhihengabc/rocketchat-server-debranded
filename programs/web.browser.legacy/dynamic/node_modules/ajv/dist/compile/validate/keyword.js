function module(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateKeywordUsage=r.validSchemaType=r.funcKeywordCode=r.macroKeywordCode=void 0;let a=e("../codegen"),o=e("../names"),t=e("../../vocabularies/code"),i=e("../errors");function n(e){let{gen:r,data:o,it:t}=e;r.if(t.parentData,()=>r.assign(o,(0,a._)`${t.parentData}[${t.parentDataProperty}]`))}function l(e,r,o){if(void 0===o)throw Error(`keyword "${r}" failed to compile`);return e.scopeValue("keyword","function"==typeof o?{ref:o}:{ref:o,code:(0,a.stringify)(o)})}r.macroKeywordCode=function(e,r){let{gen:o,keyword:t,schema:i,parentSchema:n,it:s}=e,c=r.macro.call(s.self,i,n,s),d=l(o,t,c);!1!==s.opts.validateSchema&&s.self.validateSchema(c,!0);let f=o.name("valid");e.subschema({schema:c,schemaPath:a.nil,errSchemaPath:`${s.errSchemaPath}/${t}`,topSchemaRef:d,compositeRule:!0},f),e.pass(f,()=>e.error(!0))},r.funcKeywordCode=function(e,r){var s;let{gen:c,keyword:d,schema:f,parentSchema:u,$data:y,it:m}=e;!function({schemaEnv:e},r){if(r.async&&!e.$async)throw Error("async keyword in sync schema")}(m,r);let v=!y&&r.compile?r.compile.call(m.self,f,u,m):r.validate,h=l(c,d,v),p=c.let("valid");function $(i=r.async?(0,a._)`await `:a.nil){let n=m.opts.passContext?o.default.this:o.default.self,l=!("compile"in r&&!y||!1===r.schema);c.assign(p,(0,a._)`${i}${(0,t.callValidateCode)(e,h,n,l)}`,r.modifying)}function w(e){var o;c.if((0,a.not)(null!==(o=r.valid)&&void 0!==o?o:p),e)}e.block$data(p,function(){if(!1===r.errors)$(),r.modifying&&n(e),w(()=>e.error());else{let t=r.async?function(){let e=c.let("ruleErrs",null);return c.try(()=>$((0,a._)`await `),r=>c.assign(p,!1).if((0,a._)`${r} instanceof ${m.ValidationError}`,()=>c.assign(e,(0,a._)`${r}.errors`),()=>c.throw(r))),e}():function(){let e=(0,a._)`${h}.errors`;return c.assign(e,null),$(a.nil),e}();r.modifying&&n(e),w(()=>(function(e,r){let{gen:t}=e;t.if((0,a._)`Array.isArray(${r})`,()=>{t.assign(o.default.vErrors,(0,a._)`${o.default.vErrors} === null ? ${r} : ${o.default.vErrors}.concat(${r})`).assign(o.default.errors,(0,a._)`${o.default.vErrors}.length`),(0,i.extendErrors)(e)},()=>e.error())})(e,t))}}),e.ok(null!==(s=r.valid)&&void 0!==s?s:p)},r.validSchemaType=function(e,r,a=!1){return!r.length||r.some(r=>"array"===r?Array.isArray(e):"object"===r?e&&"object"==typeof e&&!Array.isArray(e):typeof e==r||a&&void 0===e)},r.validateKeywordUsage=function({schema:e,opts:r,self:a,errSchemaPath:o},t,i){if(Array.isArray(t.keyword)?!t.keyword.includes(i):t.keyword!==i)throw Error("ajv implementation error");let n=t.dependencies;if(null==n?void 0:n.some(r=>!Object.prototype.hasOwnProperty.call(e,r)))throw Error(`parent schema must have dependencies of ${i}: ${n.join(",")}`);if(t.validateSchema){let n=t.validateSchema(e[i]);if(!n){let e=`keyword "${i}" value is invalid at path "${o}": `+a.errorsText(t.validateSchema.errors);if("log"===r.validateSchema)a.logger.error(e);else throw Error(e)}}}}
//# sourceMappingURL=/dynamic/node_modules/ajv/dist/compile/validate/e97415c664d63d5ed1844407b08f0ce20e5fe17e.map
