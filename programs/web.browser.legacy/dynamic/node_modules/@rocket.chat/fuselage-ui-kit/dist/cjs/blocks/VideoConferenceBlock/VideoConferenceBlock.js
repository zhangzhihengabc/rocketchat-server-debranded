function module(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});let o=e("react/jsx-runtime"),n=e("@rocket.chat/ui-contexts"),i=e("@rocket.chat/ui-video-conf"),r=e("react"),t=e("../.."),d=e("../../hooks/useSurfaceType"),a=e("./hooks/useVideoConfDataStream");s.default=(0,r.memo)(({block:e})=>{let s=(0,n.useTranslation)(),{callId:c,appId:l="videoconf-core"}=e,C=(0,d.useSurfaceType)(),g=(0,n.useUserId)(),{action:f,viewId:x,rid:u}=(0,r.useContext)(t.UiKitContext);if("message"!==C)throw Error("VideoConferenceBlock cannot be rendered outside message");if(!u)throw Error("VideoConferenceBlock cannot be rendered without rid");let j=(0,a.useVideoConfDataStream)({rid:u,callId:c}),h=e=>{f({blockId:c,appId:l,actionId:"info",value:u,viewId:x},e)};if(j.isLoading||j.isError)return(0,o.jsx)(i.VideoConfMessageSkeleton,{});let{data:V}=j,M=V.createdBy._id===g;return"endedAt"in V?(0,o.jsxs)(i.VideoConfMessage,{children:[(0,o.jsxs)(i.VideoConfMessageRow,{children:[(0,o.jsxs)(i.VideoConfMessageContent,{children:[(0,o.jsx)(i.VideoConfMessageIcon,{}),(0,o.jsx)(i.VideoConfMessageText,{children:s("Call_ended")})]}),(0,o.jsx)(i.VideoConfMessageActions,{children:(0,o.jsx)(i.VideoConfMessageAction,{icon:"info",onClick:h})})]}),(0,o.jsxs)(i.VideoConfMessageFooter,{children:["direct"===V.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.VideoConfMessageButton,{onClick:e=>{f({blockId:u||"",appId:l,actionId:"callBack",value:u||"",viewId:x},e)},children:s(M?"Call_again":"Call_back")}),(0,o.jsx)(i.VideoConfMessageFooterText,{children:s("Call_was_not_answered")})]}),"direct"!==V.type&&(V.users.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.VideoConfMessageUserStack,{users:V.users}),(0,o.jsx)(i.VideoConfMessageFooterText,{children:V.users.length>3?s("__usersCount__member_joined",{usersCount:V.users.length-3}):s("joined")})]}):(0,o.jsx)(i.VideoConfMessageFooterText,{children:s("Call_was_not_answered")}))]})]}):"direct"===V.type&&0===V.status?(0,o.jsxs)(i.VideoConfMessage,{children:[(0,o.jsxs)(i.VideoConfMessageRow,{children:[(0,o.jsxs)(i.VideoConfMessageContent,{children:[(0,o.jsx)(i.VideoConfMessageIcon,{variant:"incoming"}),(0,o.jsx)(i.VideoConfMessageText,{children:s("Calling")})]}),(0,o.jsx)(i.VideoConfMessageActions,{children:(0,o.jsx)(i.VideoConfMessageAction,{icon:"info",onClick:h})})]}),(0,o.jsx)(i.VideoConfMessageFooter,{children:(0,o.jsx)(i.VideoConfMessageFooterText,{children:s("Waiting_for_answer")})})]}):(0,o.jsxs)(i.VideoConfMessage,{children:[(0,o.jsxs)(i.VideoConfMessageRow,{children:[(0,o.jsxs)(i.VideoConfMessageContent,{children:[(0,o.jsx)(i.VideoConfMessageIcon,{variant:"outgoing"}),(0,o.jsx)(i.VideoConfMessageText,{children:s("Call_ongoing")})]}),(0,o.jsx)(i.VideoConfMessageActions,{children:(0,o.jsx)(i.VideoConfMessageAction,{icon:"info",onClick:h})})]}),(0,o.jsxs)(i.VideoConfMessageFooter,{children:[(0,o.jsx)(i.VideoConfMessageButton,{primary:!0,onClick:s=>{f({blockId:e.blockId||"",appId:l,actionId:"join",value:e.blockId||"",viewId:x},s)},children:s("Join")}),!!V.users.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.VideoConfMessageUserStack,{users:V.users}),(0,o.jsx)(i.VideoConfMessageFooterText,{children:V.users.length>3?s("__usersCount__member_joined",{usersCount:V.users.length-3}):s("joined")})]})]})]})})}
//# sourceMappingURL=/dynamic/node_modules/@rocket.chat/fuselage-ui-kit/dist/cjs/blocks/VideoConferenceBlock/535076f421c6699977240ac9b51168c32d8d3125.map
