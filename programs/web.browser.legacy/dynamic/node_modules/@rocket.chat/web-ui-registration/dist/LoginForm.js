function module(e,r,n){n.export({LoginForm:function(){return B}},!0),n.link("react/jsx-runtime",{jsx:function(e){i=e},jsxs:function(e){o=e},Fragment:function(e){t=e}},0),n.link("@rocket.chat/fuselage",{FieldGroup:function(e){a=e},TextInput:function(e){l=e},Field:function(e){s=e},FieldLabel:function(e){c=e},FieldRow:function(e){d=e},FieldError:function(e){u=e},FieldLink:function(e){g=e},PasswordInput:function(e){f=e},ButtonGroup:function(e){m=e},Button:function(e){p=e},Callout:function(e){h=e}},1),n.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){v=e}},2),n.link("@rocket.chat/layout",{Form:function(e){k=e},ActionLink:function(e){w=e}},3),n.link("@rocket.chat/ui-contexts",{useLoginWithPassword:function(e){y=e},useSetting:function(e){F=e}},4),n.link("@tanstack/react-query",{useMutation:function(e){b=e}},5),n.link("react",{useEffect:function(e){L=e},useRef:function(e){x=e},useState:function(e){q=e}},6),n.link("react-hook-form",{useForm:function(e){A=e}},7),n.link("react-i18next",{Trans:function(e){C=e},useTranslation:function(e){E=e}},8),n.link("./EmailConfirmationForm",{default:function(e){P=e}},9),n.link("./LoginServices",{default:function(e){S=e}},10);var i,o,t,a,l,s,c,d,u,g,f,m,p,h,v,k,w,y,F,b,L,x,q,A,C,E,P,S,T=this&&this.__awaiter||function(e,r,n,i){return new(n||(n=Promise))(function(o,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function l(e){try{s(i.throw(e))}catch(e){t(e)}}function s(e){var r;e.done?o(e.value):((r=e.value)instanceof n?r:new n(function(e){e(r)})).then(a,l)}s((i=i.apply(e,r||[])).next())})};let j={"error-user-is-not-activated":{type:"warning",i18n:"registration.page.registration.waitActivationWarning"},"error-app-user-is-not-allowed-to-login":{type:"danger",i18n:"registration.page.login.errors.AppUserNotAllowedToLogin"},"user-not-found":{type:"danger",i18n:"registration.page.login.errors.wrongCredentials"},"error-login-blocked-for-ip":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForIp"},"error-login-blocked-for-user":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForUser"},"error-license-user-limit-reached":{type:"warning",i18n:"registration.page.login.errors.licenseUserLimitReached"},"error-invalid-email":{type:"danger",i18n:"registration.page.login.errors.invalidEmail"}},B=({setLoginRoute:e})=>{var r,n,B;let{register:U,handleSubmit:_,setError:I,clearErrors:$,getValues:O,formState:{errors:R}}=A({mode:"onBlur"}),{t:D}=E(),G=v(),[K,N]=q(void 0),W=F("Accounts_PasswordReset"),H=y(),M=F("Accounts_ShowFormLogin"),z=String(F("Accounts_EmailOrUsernamePlaceholder")),J=String(F("Accounts_PasswordPlaceholder")),Q=b({mutationFn:e=>H(e.username,e.password),onError:e=>{if([e.error,e.errorType].includes("error-invalid-email")&&I("username",{type:"invalid-email",message:D("registration.page.login.errors.invalidEmail")}),"error"in e&&403!==e.error){N(e.error);return}N("user-not-found")}}),V=v(),X=v(),Y=x(null);return(L(()=>{Y.current&&Y.current.focus()},[K]),(null===(r=R.username)||void 0===r?void 0:r.type)==="invalid-email")?i(P,{onBackToLogin:()=>$("username"),email:O("username")}):o(k,{tabIndex:-1,ref:Y,"aria-labelledby":G,"aria-describedby":"welcomeTitle",onSubmit:_(e=>T(void 0,void 0,void 0,function*(){return Q.mutate(e)})),children:[i(k.Header,{children:i(k.Title,{id:G,children:D("registration.component.login")})}),M&&o(t,{children:[o(k.Container,{children:[o(a,{disabled:Q.isLoading,children:[o(s,{children:[i(c,{required:!0,htmlFor:V,children:D("registration.component.form.emailOrUsername")}),i(d,{children:i(l,Object.assign({},U("username",{required:D("registration.component.form.requiredField")}),{placeholder:z||D("registration.component.form.emailPlaceholder"),error:null===(n=R.username)||void 0===n?void 0:n.message,"aria-invalid":R.username||K?"true":"false","aria-describedby":`${V}-error`,id:V}))}),R.username&&i(u,{"aria-live":"assertive",id:`${V}-error`,children:R.username.message})]}),o(s,{children:[i(c,{required:!0,htmlFor:X,children:D("registration.component.form.password")}),i(d,{children:i(f,Object.assign({},U("password",{required:D("registration.component.form.requiredField")}),{placeholder:J,error:null===(B=R.password)||void 0===B?void 0:B.message,"aria-invalid":R.password||K?"true":"false","aria-describedby":`${X}-error`,id:X}))}),R.password&&i(u,{"aria-live":"assertive",id:`${X}-error`,children:R.password.message}),W&&i(d,{justifyContent:"end",children:i(g,{href:"#",onClick:r=>{r.preventDefault(),e("reset-password")},children:i(C,{i18nKey:"registration.page.login.forgot",children:"Forgot your password?"})})})]})]}),K&&i(a,{disabled:Q.isLoading,children:(e=>{let{type:r,i18n:n}=j[e];return i(h,{id:`${V}-error`,"aria-live":"assertive",type:r,children:D(n)})})(K)})]}),o(k.Footer,{children:[i(m,{stretch:!0,children:i(p,{loading:Q.isLoading,type:"submit",primary:!0,children:D("registration.component.login")})}),i("p",{children:o(C,{i18nKey:"registration.page.login.register",children:["New here? ",i(w,{onClick:()=>e("register"),children:"Create an account"})]})})]})]}),i(S,{disabled:Q.isLoading,setError:N})]})};n.exportDefault(B)}
//# sourceMappingURL=/dynamic/node_modules/@rocket.chat/web-ui-registration/dist/a7800b07ffebcd06fc54388873aacb28358f3fab.map
