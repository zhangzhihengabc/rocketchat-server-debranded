)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/livechat/client/startup/notifyUnreadRooms.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomSounds } from '../../../custom-sounds/client';\nimport { Subscriptions, Users } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { getUserPreference } from '../../../utils/client';\n\nlet audio = null;\n\nMeteor.startup(() => {\n\tTracker.autorun(async () => {\n\t\tif (!settings.get('Livechat_continuous_sound_notification_new_livechat_room')) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst subs = await Subscriptions.find({ t: 'l', ls: { $exists: false }, open: true }).count();\n\t\tif (subs === 0) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = await Users.findOne(\n\t\t\t{ _id: Meteor.userId() },\n\t\t\t{\n\t\t\t\tprojection: {\n\t\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\n\t\taudio = CustomSounds.play(newRoomNotification, { loop: true });\n\t});\n});\n",null],"names":["module","link","default","v","_regeneratorRuntime","Meteor","Tracker","CustomSounds","Subscriptions","Users","settings","getUserPreference","audio","startup","autorun","newRoomNotification","async","_context","prev","next","get","pause","abrupt","awrap","find","t","ls","$exists","open","count","sent","findOne","_id","userId","projection","play","loop","stop","Promise"],"mappings":"uBAAwBA,EAAOC,IAAI,CAAC,6BAA6B,CAACC,QAAQ,SAASC,CAAC,EAAEC,EAAoBD,CAAC,CAAC,EAAE,GAAnGH,EAAOC,IAAI,CAAC,gBAAgB,CAACI,OAAO,SAASF,CAAC,EAAEE,EAAOF,CAAC,CAAC,EAAE,GAAeH,EAAOC,IAAI,CAAC,iBAAiB,CAACK,QAAQ,SAASH,CAAC,EAAEG,EAAQH,CAAC,CAAC,EAAE,GAAoBH,EAAOC,IAAI,CAAC,gCAAgC,CAACM,aAAa,SAASJ,CAAC,EAAEI,EAAaJ,CAAC,CAAC,EAAE,GAA2BH,EAAOC,IAAI,CAAC,yBAAyB,CAACO,cAAc,SAASL,CAAC,EAAEK,EAAcL,CAAC,EAAEM,MAAM,SAASN,CAAC,EAAEM,EAAMN,CAAC,CAAC,EAAE,GAAgBH,EAAOC,IAAI,CAAC,2BAA2B,CAACS,SAAS,SAASP,CAAC,EAAEO,EAASP,CAAC,CAAC,EAAE,GAAyBH,EAAOC,IAAI,CAAC,wBAAwB,CAACU,kBAAkB,SAASR,CAAC,EAAEQ,EAAkBR,CAAC,CAAC,EAAE,GAQllB,IARIC,EAAAC,EAAyEC,EAA6EC,EAA2GC,EAAcC,EAA0HC,EAA0FC,EAQneC,EAAQ,KAEZP,EAAOQ,OAAO,CAAC,WACdP,EAAQQ,OAAO,CAAC,WAAA,IAAAC,EAAA,OAAAX,EAAAY,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GACVT,EAASU,GAAG,CAAC,4DAA2D,CAAAH,EAAAE,IAAA,CAAA,EAAA,KAAA,CACrD,OAAvBP,GAASA,EAAMS,KAAK,GAAGJ,EAAAK,MAAA,CAAA,SAAA,MAAA,EAAA,OAAAL,EAAAE,IAAA,CAAA,EAAAf,EAAAmB,KAAA,CAILf,EAAcgB,IAAI,CAAC,CAAEC,EAAG,IAAKC,GAAI,CAAEC,QAAS,CAAA,CAAM,EAAGC,KAAM,CAAA,CAAK,GAAGC,KAAK,GAAE,MAAA,EAAnF,GAAA,AACG,IADHZ,EAAAa,IAAA,CACI,CAAAb,EAAAE,IAAA,CAAA,EAAA,KAAA,CACU,OAAvBP,GAASA,EAAMS,KAAK,GAAGJ,EAAAK,MAAA,CAAA,SAAA,MAAA,EAAA,OAAAL,EAAAE,IAAA,CAAA,GAAAf,EAAAmB,KAAA,CAILd,EAAMsB,OAAO,CAC/B,CAAEC,IAAK3B,EAAO4B,MAAM,EAAG,EACvB,CACCC,WAAY,CACX,2CAA4C,CAC7C,CACD,GACA,MAAA,GAEKnB,EAAsBJ,EATlBM,EAAAa,IAAA,CAS0C,uBAEpDlB,EAAQL,EAAa4B,IAAI,CAACpB,EAAqB,CAAEqB,KAAM,CAAA,CAAK,EAAG,MAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAoB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEjE"}