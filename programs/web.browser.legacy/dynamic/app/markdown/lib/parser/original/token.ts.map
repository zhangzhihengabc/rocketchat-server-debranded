)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/markdown/lib/parser/original/token.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["/*\n * Markdown is a named function that will parse markdown syntax\n * @param {String} msg - The message html\n */\nimport type { IMessage, TokenType, TokenExtra } from '@rocket.chat/core-typings';\nimport { Random } from '@rocket.chat/random';\n\nexport const addAsToken = (message: IMessage, html: string, type: TokenType, extra?: TokenExtra): string => {\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\tconst token = `=!=${Random.id()}=!=`;\n\tmessage.tokens.push({\n\t\ttoken,\n\t\ttype,\n\t\ttext: html,\n\t\t...(extra && { ...extra }),\n\t});\n\n\treturn token;\n};\n\nexport const isToken = (msg: string): boolean => /=!=[.a-z0-9]{17}=!=/gim.test(msg.trim());\n\nexport const validateAllowedTokens = (message: IMessage, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens: string[] = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens?.filter(({ token }) => tokens.includes(token)) || [];\n\treturn tokensFound.length === 0 || tokensFound.every((token) => token.type && desiredTokens.includes(token.type));\n};\n",null],"names":["module","link","default","_objectSpread","export","addAsToken","isToken","validateAllowedTokens","Random","message","html","type","extra","tokens","token","id","push","text","msg","test","trim","desiredTokens","_message$tokens","match","tokensFound","filter","_ref","includes","length","every"],"mappings":"uBAKiBA,EAAMC,IAAA,CAAA,uCAAsB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAA7CH,EAAOI,MAAE,CAAA,CAAMC,WAAQ,WAAA,OAAqBA,CAAC,EAAAC,QAAAA,WAAA,OAAAA,CAAA,EAAAC,sBAAAA,WAAA,OAAAA,CAAA,CAAA,GAAAP,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAQ,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAEtC,IAFPL,EAA6CK,EAEhCH,EAAa,SAACI,CAAiB,CAAEC,CAAY,CAAEC,CAAe,CAAEC,CAAkB,EACzFH,EAAQI,MAAM,EAClBJ,CAAAA,EAAQI,MAAM,CAAG,EAAE,AAAF,EAElB,IAAMC,EAAK,MAASN,EAAOO,EAAE,GAAE,MAQ/B,OAPAN,EAAQI,MAAM,CAACG,IAAI,CAAAb,EAAA,CAClBW,MAAAA,EACAH,KAAAA,EACAM,KAAMP,CAAI,EACNE,GAAKT,EAAA,CAAA,EAASS,KAGZE,CACR,EAEaR,EAAU,SAACY,CAAW,EAAA,MAAc,yBAAyBC,IAAI,CAACD,EAAIE,IAAI,GAAG,EAE7Eb,EAAwB,SAACE,CAAiB,CAAEM,CAAU,CAAEM,CAA0B,EAC9F,IAD2GC,EACrGT,EAAmBE,EAAGQ,KAAK,CAAC,2BAA6B,EAAE,CAC3DC,EAAc,CAAA,AAAc,OAAdF,CAAAA,EAAAb,EAAQI,MAAM,AAANA,GAAMS,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBG,MAAM,CAAC,SAAAC,CAAA,EAAA,IAAGZ,EAAKY,EAALZ,KAAK,CAAA,OAAOD,EAAOc,QAAQ,CAACb,EAAM,EAAA,GAAK,EAAE,CACvF,OAAOU,AAAuB,IAAvBA,EAAYI,MAAM,EAAUJ,EAAYK,KAAK,CAAC,SAACf,CAAK,EAAA,OAAKA,EAAMH,IAAI,EAAIU,EAAcM,QAAQ,CAACb,EAAMH,IAAI,CAAC,EACjH"}