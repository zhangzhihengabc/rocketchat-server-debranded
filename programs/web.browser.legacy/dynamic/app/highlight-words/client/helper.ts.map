)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/highlight-words/client/helper.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { escapeRegExp } from '@rocket.chat/string-helpers';\n\nconst checkHighlightedWordsInUrls = (msg: string, urlRegex: RegExp) => msg.match(urlRegex);\n\nconst removeHighlightedUrls = (msg: string, highlight: string, urlMatches: string[]) => {\n\tconst highlightRegex = new RegExp(highlight, 'gmi');\n\n\treturn urlMatches.reduce((msg, match) => {\n\t\tconst withTemplate = match.replace(highlightRegex, `<mark class=\"highlight-text\">${highlight}</mark>`);\n\t\tconst regexWithTemplate = new RegExp(withTemplate, 'i');\n\t\treturn msg.replace(regexWithTemplate, match);\n\t}, msg);\n};\n\nconst highlightTemplate = '$1<mark class=\"highlight-text\">$2</mark>$3';\n\nexport const getRegexHighlight = (highlight: string) =>\n\tnew RegExp(\n\t\t`(^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(${escapeRegExp(highlight)})($|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(?![^<]*>|[^<>]*<\\\\/)`,\n\t\t'gmi',\n\t);\n\nexport const getRegexHighlightUrl = (highlight: string) =>\n\tnew RegExp(\n\t\t`https?:\\/\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#?&//=]*)(${escapeRegExp(\n\t\t\thighlight,\n\t\t)})\\\\b([-a-zA-Z0-9@:%_\\\\+.~#?&//=]*)`,\n\t\t'gmi',\n\t);\n\nexport const highlightWords = (msg: string, highlights: { highlight: string; regex: RegExp; urlRegex: RegExp }[]) =>\n\thighlights.reduce((msg: string, { highlight, regex, urlRegex }: { highlight: string; regex: RegExp; urlRegex: RegExp }) => {\n\t\tconst urlMatches = checkHighlightedWordsInUrls(msg, urlRegex);\n\t\tif (!urlMatches) {\n\t\t\treturn msg.replace(regex, highlightTemplate);\n\t\t}\n\t\treturn removeHighlightedUrls(msg.replace(regex, highlightTemplate), highlight, urlMatches);\n\t}, msg);\n",null],"names":["module","export","getRegexHighlight","getRegexHighlightUrl","highlightWords","escapeRegExp","removeHighlightedUrls","msg","highlight","urlMatches","highlightRegex","RegExp","reduce","match","regexWithTemplate","replace","highlightTemplate","highlights","_ref","regex","urlRegex"],"mappings":"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,kBAAoB,WAAA,OAAAA,CAA8B,EAAAC,qBAAAA,WAAA,OAAAA,CAAA,EAAAC,eAAAA,WAAA,OAAAA,CAAA,CAAA,GAAAJ,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAK,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAI3D,IAJ2DA,EAIrDC,EAAwB,SAACC,CAAW,CAAEC,CAAiB,CAAEC,CAAoB,EAClF,IAAMC,EAAiB,AAAIC,OAAOH,EAAW,OAE7C,OAAOC,EAAWG,MAAM,CAAC,SAACL,CAAG,CAAEM,CAAK,EAEnC,IAAMC,EAAoB,AAAIH,OADTE,EAAME,OAAO,CAACL,EAAc,gCAAkCF,EAAS,WACzC,KACnD,OAAOD,EAAIQ,OAAO,CAACD,EAAmBD,EACvC,EAAGN,EACJ,EAEMS,EAAoB,6CAEbd,EAAoB,SAACM,CAAiB,EAAA,OAClD,AAAIG,OAAM,yCACgCN,EAAaG,GAAU,8DAChE,MACA,EAEWL,EAAuB,SAACK,CAAiB,EAAA,OACrD,AAAIG,OAAM,kGAC2FN,EACnGG,GACA,qCACD,MACA,EAEWJ,EAAiB,SAACG,CAAW,CAAEU,CAAoE,EAAA,OAC/GA,EAAWL,MAAM,CAAC,SAACL,CAAW,CAAAW,CAAA,EAA4F,IAAxFV,EAASU,EAATV,SAAS,CAAEW,EAAKD,EAALC,KAAK,CAAEC,EAAQF,EAARE,QAAQ,CACrDX,EA9B+DF,AA8BtBA,EA9B0BM,KAAK,CA8B1BO,UACpD,AAAKX,EAGEH,EAAsBC,EAAIQ,OAAO,CAACI,EAAOH,GAAoBR,EAAWC,GAFvEF,EAAIQ,OAAO,CAACI,EAAOH,EAG5B,EAAGT,EAAI"}