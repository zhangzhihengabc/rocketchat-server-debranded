)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/emoji-custom/client/lib/emojiCustom.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { escapeRegExp } from '@rocket.chat/string-helpers';\nimport $ from 'jquery';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { emoji, updateRecent } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { LegacyRoomManager } from '../../../ui-utils/client';\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\nimport { isSetNotNull } from './function-isSet';\n\nexport const getEmojiUrlFromName = function (name, extension) {\n\tif (name == null) {\n\t\treturn;\n\t}\n\n\tconst key = `emoji_random_${name}`;\n\n\tconst random = isSetNotNull(() => Session.keys[key]) ? Session.keys[key] : 0;\n\n\treturn getURL(`/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`);\n};\n\nexport const deleteEmojiCustom = function (emojiData) {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.name}:`);\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t}\n\tif (isSetNotNull(() => emojiData.aliases)) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tupdateRecent('rocket');\n};\n\nexport const updateEmojiCustom = function (emojiData) {\n\tlet key = `emoji_random_${emojiData.name}`;\n\tSession.set(key, Math.round(Math.random() * 1000));\n\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.previousName}:`);\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {};\n\t\t\temoji.list[`:${alias}:`].emojiPackage = 'emojiCustom';\n\t\t\temoji.list[`:${alias}:`].aliasOf = emojiData.name;\n\t\t}\n\t}\n\n\tconst url = getEmojiUrlFromName(emojiData.name, emojiData.extension);\n\n\t// update in admin interface\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`.emojiAdminPreview-image[data-emoji='${emojiData.previousName}']`)\n\t\t\t.css('background-image', `url('${url})'`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}'] span`)\n\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}']`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`)\n\t\t\t.attr('class', `emoji-${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`li[data-emoji='${emojiData.name}'] span`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker and opened rooms\n\tfor (key in LegacyRoomManager.openedRooms) {\n\t\tif (LegacyRoomManager.openedRooms.hasOwnProperty(key)) {\n\t\t\tconst room = LegacyRoomManager.openedRooms[key];\n\t\t\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t\t\t$(room.dom)\n\t\t\t\t\t.find(`span[data-emoji='${emojiData.previousName}']`)\n\t\t\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t\t} else {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateRecent('rocket');\n};\n\nconst customRender = (html) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || emoji.packages.emojiCustom.list.indexOf(shortname) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.hasOwnProperty('aliasOf')) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await sdk.rest.get('/v1/emoji-custom.list');\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = currentEmoji;\n\t\t\t\temoji.list[`:${currentEmoji.name}:`].emojiPackage = 'emojiCustom';\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n",null],"names":["module","link","default","v","_regeneratorRuntime","_createForOfIteratorHelperLoose","export","getEmojiUrlFromName","deleteEmojiCustom","updateEmojiCustom","escapeRegExp","$","Meteor","Session","emoji","updateRecent","CachedCollectionManager","LegacyRoomManager","getURL","sdk","isSetNotNull","name","extension","key","random","keys","encodeURIComponent","emojiData","list","arrayIndex","packages","emojiCustom","emojisByCategory","rocket","indexOf","splice","arrayIndexList","aliases","_step","_iterator","done","alias","value","aliasIndex","set","Math","round","previousExists","previousName","currentAliases","_step2","_iterator2","push","Object","assign","emojiPackage","_step3","_iterator3","aliasOf","url","document","find","css","attr","meteorBabelHelpers","sanitizeForInObject","openedRooms","hasOwnProperty","room","dom","customRender","html","emojisMatchGroup","map","join","_regexpSignature","_regexp","RegExp","replace","shortname","emojiAlias","dataCheck","emojiCategories","i18n","categoryIndex","toneList","render","renderPicker","startup","onLogin","emojis","_iterator4","_step4","currentEmoji","_iterator5","_step5","async","_context","prev","next","awrap","rest","get","_await$sdk$rest$get","sent","update","t0","console","error","stop","Promise"],"mappings":"uBAAwBA,EAAOC,IAAI,CAAC,6BAA6B,CAACC,QAAQ,SAASC,CAAC,EAAEC,EAAoBD,CAAC,CAAC,EAAE,GAAuCH,EAAOC,IAAI,CAAC,wDAAwD,CAACC,QAAQ,SAASC,CAAC,EAAEE,EAAgCF,CAAC,CAAC,EAAE,GAAlRH,EAAOM,MAAM,CAAC,CAACC,oBAAoB,WAAW,OAAOA,CAAmB,EAAEC,kBAAkB,WAAW,OAAOA,CAAiB,EAAEC,kBAAkB,WAAW,OAAOA,CAAiB,CAAC,GAAoBT,EAAOC,IAAI,CAAC,8BAA8B,CAACS,aAAa,SAASP,CAAC,EAAEO,EAAaP,CAAC,CAAC,EAAE,GAASH,EAAOC,IAAI,CAAC,SAAS,CAAC,QAAQ,SAASE,CAAC,EAAEQ,EAAER,CAAC,CAAC,EAAE,GAAcH,EAAOC,IAAI,CAAC,gBAAgB,CAACW,OAAO,SAAST,CAAC,EAAES,EAAOT,CAAC,CAAC,EAAE,GAAeH,EAAOC,IAAI,CAAC,iBAAiB,CAACY,QAAQ,SAASV,CAAC,EAAEU,EAAQV,CAAC,CAAC,EAAE,GAA0BH,EAAOC,IAAI,CAAC,wBAAwB,CAACa,MAAM,SAASX,CAAC,EAAEW,EAAMX,CAAC,EAAEY,aAAa,SAASZ,CAAC,EAAEY,EAAaZ,CAAC,CAAC,EAAE,GAA+BH,EAAOC,IAAI,CAAC,uCAAuC,CAACe,wBAAwB,SAASb,CAAC,EAAEa,EAAwBb,CAAC,CAAC,EAAE,GAAyBH,EAAOC,IAAI,CAAC,2BAA2B,CAACgB,kBAAkB,SAASd,CAAC,EAAEc,EAAkBd,CAAC,CAAC,EAAE,GAAcH,EAAOC,IAAI,CAAC,wBAAwB,CAACiB,OAAO,SAASf,CAAC,EAAEe,EAAOf,CAAC,CAAC,EAAE,GAAWH,EAAOC,IAAI,CAAC,sCAAsC,CAACkB,IAAI,SAAShB,CAAC,EAAEgB,EAAIhB,CAAC,CAAC,EAAE,GAAoBH,EAAOC,IAAI,CAAC,mBAAmB,CAACmB,aAAa,SAASjB,CAAC,EAAEiB,EAAajB,CAAC,CAAC,EAAE,GAYznC,IAZHC,EAAiHC,EAAyEK,EAAyGC,EAAyDC,EAAyEC,EAA6EC,EAAMC,EAA8HC,EAAmJC,EAAqHC,EAAiFC,EAAsFC,EAY5hCb,EAAsB,SAAUc,CAAI,CAAEC,CAAS,EAC3D,GAAID,AAAQ,MAARA,GAIJ,IAAME,EAAG,gBAAmBF,EAEtBG,EAASJ,EAAa,WAAA,OAAMP,EAAQY,IAAI,CAACF,EAAI,GAAIV,EAAQY,IAAI,CAACF,EAAI,CAAG,EAE3E,OAAOL,EAAM,iBAAkBQ,mBAAmBL,GAAK,IAAIC,EAAS,QAAQE,GAC7E,EAEahB,EAAoB,SAAUmB,CAAS,EACnD,OAAOb,EAAMc,IAAI,CAAA,IAAKD,EAAUN,IAAI,CAAA,IAAI,CACxC,IAAMQ,EAAaf,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACC,OAAO,CAACP,EAAUN,IAAI,CACzE,CAAA,KAAfQ,GACHf,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACE,MAAM,CAACN,EAAY,GAEvE,IAAMO,EAAiBtB,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACM,OAAO,CAAA,IAAKP,EAAUN,IAAI,CAAA,KAIjF,GAHuB,KAAnBe,GACHtB,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACO,MAAM,CAACC,EAAgB,GAEpDhB,EAAa,WAAA,OAAMO,EAAUU,OAAO,GACvC,IAAA,IAAqCC,EAArCC,EAAAlC,EAAoBsB,EAAUU,OAAO,EAAA,CAAA,AAAAC,CAAAA,EAAAC,GAAA,EAAAC,IAAA,EAAE,CAAA,IAA5BC,EAAKH,EAAAI,KAAA,AACf,QAAO5B,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAC/B,IAAME,EAAa7B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACM,OAAO,CAAA,IAAKO,EAAK,IACjD,CAAA,KAAfE,GACH7B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACO,MAAM,CAACQ,EAAY,EAErD,CAED5B,EAAa,SACd,EAEaN,EAAoB,SAAUkB,CAAS,EACnD,IAAIJ,EAAG,gBAAmBI,EAAUN,IAAM,CAC1CR,EAAQ+B,GAAG,CAACrB,EAAKsB,KAAKC,KAAK,CAACD,AAAgB,IAAhBA,KAAKrB,MAAM,KAEvC,IAAMuB,EAAiB3B,EAAa,WAAA,OAAMO,EAAUqB,YAAY,GAC1DC,EAAiB7B,EAAa,WAAA,OAAMO,EAAUU,OAAO,GAE3D,GAAIU,GAAkB3B,EAAa,WAAA,OAAMN,EAAMc,IAAI,CAAA,IAAKD,EAAUqB,YAAY,CAAA,IAAI,CAACX,OAAO,GACzF,IAAA,IAAqEa,EAArEC,EAAA9C,EAAoBS,EAAMc,IAAI,CAAA,IAAKD,EAAUqB,YAAY,CAAA,IAAI,CAACX,OAAO,EAAA,CAAA,AAAAa,CAAAA,EAAAC,GAAA,EAAAX,IAAA,EAAE,CAAA,IAA5DC,EAAKS,EAAAR,KAAA,AACf,QAAO5B,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAC/B,IAAME,EAAa7B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACM,OAAO,CAAA,IAAKO,EAAK,IACjD,CAAA,KAAfE,GACH7B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACO,MAAM,CAACQ,EAAY,EAErD,CAGD,GAAII,GAAkBpB,EAAUN,IAAI,GAAKM,EAAUqB,YAAY,CAAE,CAChE,IAAMnB,EAAaf,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACC,OAAO,CAACP,EAAUqB,YAAY,CACjF,CAAA,KAAfnB,GACHf,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACE,MAAM,CAACN,EAAY,GAEvE,IAAMO,EAAiBtB,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACM,OAAO,CAAA,IAAKP,EAAUqB,YAAY,CAAA,IAClE,CAAA,KAAnBZ,GACHtB,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACO,MAAM,CAACC,EAAgB,GAExD,OAAOtB,EAAMc,IAAI,CAAA,IAAKD,EAAUqB,YAAY,CAAA,IAAI,AACjD,CAQA,GALsB,KADAlC,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACC,OAAO,CAAA,GAAIP,EAAUN,IAAI,IAEjGP,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACmB,IAAI,CAAA,GAAIzB,EAAUN,IAAI,EACzEP,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACwB,IAAI,CAAA,IAAKzB,EAAUN,IAAI,CAAA,MAExDP,EAAMc,IAAI,CAAA,IAAKD,EAAUN,IAAI,CAAA,IAAI,CAAGgC,OAAOC,MAAM,CAAC,CAAEC,aAAc,aAAc,EAAGzC,EAAMc,IAAI,CAAA,IAAKD,EAAUN,IAAI,CAAA,IAAI,CAAEM,GAClHsB,EACH,IAAA,IAAqCO,EAArCC,EAAApD,EAAoBsB,EAAUU,OAAO,EAAA,CAAA,AAAAmB,CAAAA,EAAAC,GAAA,EAAAjB,IAAA,EAAE,CAAA,IAA5BC,EAAKe,EAAAd,KAAA,CACf5B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACwB,IAAI,CAAA,IAAKX,EAAK,KAC9C3B,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAAG,CAAC,EAC5B3B,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAACc,YAAY,CAAG,cACxCzC,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAACiB,OAAO,CAAG/B,EAAUN,IAAI,AAClD,CAGD,IAAMsC,EAAMpD,EAAoBoB,EAAUN,IAAI,CAAEM,EAAUL,SAAS,EA2BnE,IAAKC,KAxBDwB,GAAkBpB,EAAUN,IAAI,GAAKM,EAAUqB,YAAY,CAC9DrC,EAAEiD,UACAC,IAAI,CAAA,wCAAyClC,EAAUqB,YAAY,CAAA,MACnEc,GAAG,CAAC,mBAAkB,QAAUH,EAAG,MACnCI,IAAI,CAAC,aAAY,GAAKpC,EAAUN,IAAI,EAEtCV,EAAEiD,UAAUC,IAAI,CAAA,wCAAyClC,EAAUN,IAAI,CAAA,MAAMyC,GAAG,CAAC,mBAAkB,QAAUH,EAAG,MAI7GZ,GAAkBpB,EAAUN,IAAI,GAAKM,EAAUqB,YAAY,EAC9DrC,EAAEiD,UACAC,IAAI,CAAA,kBAAmBlC,EAAUqB,YAAY,CAAA,WAC7Cc,GAAG,CAAC,mBAAkB,QAAUH,EAAG,MACnCI,IAAI,CAAC,aAAY,GAAKpC,EAAUN,IAAI,EACtCV,EAAEiD,UACAC,IAAI,CAAA,kBAAmBlC,EAAUqB,YAAY,CAAA,MAC7Ce,IAAI,CAAC,aAAY,GAAKpC,EAAUN,IAAI,EACpC0C,IAAI,CAAC,QAAO,SAAWpC,EAAUN,IAAI,GAEvCV,EAAEiD,UAAUC,IAAI,CAAA,kBAAmBlC,EAAUN,IAAI,CAAA,WAAWyC,GAAG,CAAC,mBAAkB,QAAUH,EAAG,MAIxFK,mBAAAC,mBAAA,CAAIhD,EAAkBiD,WAAW,EACxC,GAAIjD,EAAkBiD,WAAW,CAACC,cAAc,CAAC5C,GAAM,CACtD,IAAM6C,EAAOnD,EAAkBiD,WAAW,CAAC3C,EAAI,AAC3CwB,CAAAA,GAAkBpB,EAAUN,IAAI,GAAKM,EAAUqB,YAAY,CAC9DrC,EAAEyD,EAAKC,GAAG,EACRR,IAAI,CAAA,oBAAqBlC,EAAUqB,YAAY,CAAA,MAC/Cc,GAAG,CAAC,mBAAkB,QAAUH,EAAG,MACnCI,IAAI,CAAC,aAAY,GAAKpC,EAAUN,IAAI,EAEtCV,EAAEyD,EAAKC,GAAG,EAAER,IAAI,CAAA,oBAAqBlC,EAAUN,IAAI,CAAA,MAAMyC,GAAG,CAAC,mBAAkB,QAAUH,EAAG,KAE9F,CAGD5C,EAAa,SACd,EAEMuD,EAAe,SAACC,CAAI,EACzB,IAAMC,EAAmB1D,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAAC6C,GAAG,CAAC/D,GAAcgE,IAAI,CAAC,KA4BhF,OA3BIF,IAAqB1D,EAAMgB,QAAQ,CAACC,WAAW,CAAC4C,gBAAgB,GACnE7D,EAAMgB,QAAQ,CAACC,WAAW,CAAC4C,gBAAgB,CAAGH,EAC9C1D,EAAMgB,QAAQ,CAACC,WAAW,CAAC6C,OAAO,CAAG,AAAIC,OAAM,iGACqDL,EAAgB,IACnH,OAIFD,EAAOA,EAAKO,OAAO,CAAChE,EAAMgB,QAAQ,CAACC,WAAW,CAAC6C,OAAO,CAAE,SAACG,CAAS,EACjE,GAAI,AAAqB,KAAA,IAAdA,GAA6BA,AAAc,KAAdA,GAAoBjE,AAAuD,KAAvDA,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACM,OAAO,CAAC6C,GACnG,OAAOA,EAGR,IAAIC,EAAaD,EAAUD,OAAO,CAAC,KAAM,IAErCG,EAAYnE,EAAMc,IAAI,CAACmD,EAAU,CAMrC,OALIE,EAAUd,cAAc,CAAC,aAC5Ba,EAAaC,EAAUvB,OAAO,CAC9BuB,EAAYnE,EAAMc,IAAI,CAAA,IAAKoD,EAAU,IAAI,EAG1C,mDAA0DzE,EACzDyE,EACAC,EAAU3D,SAAS,EACnB,mBAAmB0D,EAAU,YAAYD,EAAS,KAAKA,EAAS,SAClE,EAGD,CAEAjE,CAAAA,EAAMgB,QAAQ,CAACC,WAAW,CAAG,CAC5BmD,gBAAiB,CAAC,CAAE3D,IAAK,SAAU4D,KAAM,QAAS,EAAE,CACpDC,cAAe,EACfC,SAAU,CAAC,EACXzD,KAAM,EAAE,CACR+C,iBAAkB,KAClBC,QAAS,KAETU,OAAQhB,EACRiB,aAAcjB,CACf,EAEA1D,EAAO4E,OAAO,CAAC,WAAA,OACdxE,EAAwByE,OAAO,CAAC,WAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAtD,EAAA,OAAArC,EAAA4F,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAA/F,EAAAgG,KAAA,CAIpBjF,EAAIkF,IAAI,CAACC,GAAG,CAAC,yBAAwB,MAAA,EAG/C,IAJmBZ,EAAMa,AACsBN,EAAAO,IAAA,CAD9Cd,MAAM,CAAIe,MAAM,CAGjB3F,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAAG,CAAEC,OAAQ,EAAA,AAAG,EAC3D0D,EAAAtF,EAA2BqF,GAAM,CAAA,AAAAE,CAAAA,EAAAD,GAAA,EAAAnD,IAAA,EAKhC,IALUqD,EAAYD,EAAAlD,KAAA,CACtB5B,EAAMgB,QAAQ,CAACC,WAAW,CAACC,gBAAgB,CAACC,MAAM,CAACmB,IAAI,CAACyC,EAAaxE,IAAI,EACzEP,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACwB,IAAI,CAAA,IAAKyC,EAAaxE,IAAI,CAAA,KAC1DP,EAAMc,IAAI,CAAA,IAAKiE,EAAaxE,IAAI,CAAA,IAAI,CAAGwE,EACvC/E,EAAMc,IAAI,CAAA,IAAKiE,EAAaxE,IAAI,CAAA,IAAI,CAACkC,YAAY,CAAG,cACpDuC,EAAAzF,EAAoBwF,EAAaxD,OAAO,EAAA,CAAA,AAAA0D,CAAAA,EAAAD,GAAA,EAAAtD,IAAA,EAA7BC,EAAKsD,EAAArD,KAAA,CACf5B,EAAMgB,QAAQ,CAACC,WAAW,CAACH,IAAI,CAACwB,IAAI,CAAA,IAAKX,EAAK,KAC9C3B,EAAMc,IAAI,CAAA,IAAKa,EAAK,IAAI,CAAG,CAC1Bc,aAAc,cACdG,QAASmC,EAAaxE,IAAAA,AACvB,CAED4E,CAAAA,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAS,EAAA,CAAAT,EAAA,KAAA,CAAA,GAEDU,QAAQC,KAAK,CAAC,6BAA4BX,EAAAS,EAAA,CAAK,MAAA,GAAA,IAAA,MAAA,OAAAT,EAAAY,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAE/C"}