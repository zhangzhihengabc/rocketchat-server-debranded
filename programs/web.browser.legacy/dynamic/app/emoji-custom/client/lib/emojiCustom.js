function module(e,a,i){i.link("@babel/runtime/regenerator",{default:function(e){o=e}},0),i.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(e){t=e}},1),i.export({getEmojiUrlFromName:function(){return f},deleteEmojiCustom:function(){return k},updateEmojiCustom:function(){return v}}),i.link("@rocket.chat/string-helpers",{escapeRegExp:function(e){n=e}},0),i.link("jquery",{default:function(e){s=e}},1),i.link("meteor/meteor",{Meteor:function(e){m=e}},2),i.link("meteor/session",{Session:function(e){r=e}},3),i.link("../../../emoji/client",{emoji:function(e){u=e},updateRecent:function(e){c=e}},4),i.link("../../../ui-cached-collection/client",{CachedCollectionManager:function(e){l=e}},5),i.link("../../../ui-utils/client",{LegacyRoomManager:function(e){p=e}},6),i.link("../../../utils/client",{getURL:function(e){g=e}},7),i.link("../../../utils/client/lib/SDKClient",{sdk:function(e){d=e}},8),i.link("./function-isSet",{isSetNotNull:function(e){j=e}},9);var o,t,n,s,m,r,u,c,l,p,g,d,j,f=function(e,a){if(null!=e){var i="emoji_random_"+e,o=j(function(){return r.keys[i]})?r.keys[i]:0;return g("/emoji-custom/"+encodeURIComponent(e)+"."+a+"?_dc="+o)}},k=function(e){delete u.list[":"+e.name+":"];var a=u.packages.emojiCustom.emojisByCategory.rocket.indexOf(e.name);-1!==a&&u.packages.emojiCustom.emojisByCategory.rocket.splice(a,1);var i=u.packages.emojiCustom.list.indexOf(":"+e.name+":");if(-1!==i&&u.packages.emojiCustom.list.splice(i,1),j(function(){return e.aliases}))for(var o,n=t(e.aliases);!(o=n()).done;){var s=o.value;delete u.list[":"+s+":"];var m=u.packages.emojiCustom.list.indexOf(":"+s+":");-1!==m&&u.packages.emojiCustom.list.splice(m,1)}c("rocket")},v=function(e){var a="emoji_random_"+e.name;r.set(a,Math.round(1e3*Math.random()));var i=j(function(){return e.previousName}),o=j(function(){return e.aliases});if(i&&j(function(){return u.list[":"+e.previousName+":"].aliases}))for(var n,m=t(u.list[":"+e.previousName+":"].aliases);!(n=m()).done;){var l=n.value;delete u.list[":"+l+":"];var g=u.packages.emojiCustom.list.indexOf(":"+l+":");-1!==g&&u.packages.emojiCustom.list.splice(g,1)}if(i&&e.name!==e.previousName){var d=u.packages.emojiCustom.emojisByCategory.rocket.indexOf(e.previousName);-1!==d&&u.packages.emojiCustom.emojisByCategory.rocket.splice(d,1);var k=u.packages.emojiCustom.list.indexOf(":"+e.previousName+":");-1!==k&&u.packages.emojiCustom.list.splice(k,1),delete u.list[":"+e.previousName+":"]}if(-1===u.packages.emojiCustom.emojisByCategory.rocket.indexOf(""+e.name)&&(u.packages.emojiCustom.emojisByCategory.rocket.push(""+e.name),u.packages.emojiCustom.list.push(":"+e.name+":")),u.list[":"+e.name+":"]=Object.assign({emojiPackage:"emojiCustom"},u.list[":"+e.name+":"],e),o)for(var v,C=t(e.aliases);!(v=C()).done;){var y=v.value;u.packages.emojiCustom.list.push(":"+y+":"),u.list[":"+y+":"]={},u.list[":"+y+":"].emojiPackage="emojiCustom",u.list[":"+y+":"].aliasOf=e.name}var x=f(e.name,e.extension);for(a in i&&e.name!==e.previousName?s(document).find(".emojiAdminPreview-image[data-emoji='"+e.previousName+"']").css("background-image","url('"+x+")'").attr("data-emoji",""+e.name):s(document).find(".emojiAdminPreview-image[data-emoji='"+e.name+"']").css("background-image","url('"+x+"')"),i&&e.name!==e.previousName?(s(document).find("li[data-emoji='"+e.previousName+"'] span").css("background-image","url('"+x+"')").attr("data-emoji",""+e.name),s(document).find("li[data-emoji='"+e.previousName+"']").attr("data-emoji",""+e.name).attr("class","emoji-"+e.name)):s(document).find("li[data-emoji='"+e.name+"'] span").css("background-image","url('"+x+"')"),meteorBabelHelpers.sanitizeForInObject(p.openedRooms))if(p.openedRooms.hasOwnProperty(a)){var b=p.openedRooms[a];i&&e.name!==e.previousName?s(b.dom).find("span[data-emoji='"+e.previousName+"']").css("background-image","url('"+x+"')").attr("data-emoji",""+e.name):s(b.dom).find("span[data-emoji='"+e.name+"']").css("background-image","url('"+x+"')")}c("rocket")},C=function(e){var a=u.packages.emojiCustom.list.map(n).join("|");return a!==u.packages.emojiCustom._regexpSignature&&(u.packages.emojiCustom._regexpSignature=a,u.packages.emojiCustom._regexp=RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+a+")","gi")),e=e.replace(u.packages.emojiCustom._regexp,function(e){if(void 0===e||""===e||-1===u.packages.emojiCustom.list.indexOf(e))return e;var a=e.replace(/:/g,""),i=u.list[e];return i.hasOwnProperty("aliasOf")&&(a=i.aliasOf,i=u.list[":"+a+":"]),'<span class="emoji" style="background-image:url('+f(a,i.extension)+');" data-emoji="'+a+'" title="'+e+'">'+e+"</span>"})};u.packages.emojiCustom={emojiCategories:[{key:"rocket",i18n:"Custom"}],categoryIndex:1,toneList:{},list:[],_regexpSignature:null,_regexp:null,render:C,renderPicker:C},m.startup(function(){return l.onLogin(function(){var e,a,i,n,s,m,r;return o.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,o.awrap(d.rest.get("/v1/emoji-custom.list"));case 3:for(e=c.sent.emojis.update,u.packages.emojiCustom.emojisByCategory={rocket:[]},a=t(e);!(i=a()).done;)for(n=i.value,u.packages.emojiCustom.emojisByCategory.rocket.push(n.name),u.packages.emojiCustom.list.push(":"+n.name+":"),u.list[":"+n.name+":"]=n,u.list[":"+n.name+":"].emojiPackage="emojiCustom",s=t(n.aliases);!(m=s()).done;)r=m.value,u.packages.emojiCustom.list.push(":"+r+":"),u.list[":"+r+":"]={emojiPackage:"emojiCustom",aliasOf:n.name};c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.error("Error getting custom emoji",c.t0);case 12:case"end":return c.stop()}},null,null,[[0,9]],Promise)})})}
//# sourceMappingURL=/dynamic/app/emoji-custom/client/lib/5a70d7e2b5b9f4a9827e474e970968748fcfb9e9.map
