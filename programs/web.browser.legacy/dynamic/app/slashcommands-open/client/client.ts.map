)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/slashcommands-open/client/client.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { RoomType, ISubscription, SlashCommandCallbackParams } from '@rocket.chat/core-typings';\nimport type { Mongo } from 'meteor/mongo';\n\nimport { roomCoordinator } from '../../../client/lib/rooms/roomCoordinator';\nimport { router } from '../../../client/providers/RouterProvider';\nimport { Subscriptions, ChatSubscription } from '../../models/client';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { slashCommands } from '../../utils/lib/slashCommand';\n\nslashCommands.add({\n\tcommand: 'open',\n\tcallback: async function Open({ params }: SlashCommandCallbackParams<'open'>): Promise<void> {\n\t\tconst dict: Record<string, RoomType[]> = {\n\t\t\t'#': ['c', 'p'],\n\t\t\t'@': ['d'],\n\t\t};\n\n\t\tconst room = params.trim().replace(/#|@/, '');\n\t\tconst type = dict[params.trim()[0]] || [];\n\n\t\tconst query: Mongo.Selector<ISubscription> = {\n\t\t\tname: room,\n\t\t\t...(type && { t: { $in: type } }),\n\t\t};\n\n\t\tconst subscription = ChatSubscription.findOne(query);\n\n\t\tif (subscription) {\n\t\t\troomCoordinator.openRouteLink(subscription.t, subscription, router.getSearchParameters());\n\t\t}\n\n\t\tif (type && type.indexOf('d') === -1) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait sdk.call('createDirectMessage', room);\n\t\t\tconst subscription = Subscriptions.findOne(query);\n\t\t\tif (!subscription) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\troomCoordinator.openRouteLink(subscription.t, subscription, router.getSearchParameters());\n\t\t} catch (err: unknown) {\n\t\t\t// noop\n\t\t}\n\t},\n\toptions: {\n\t\tdescription: 'Opens_a_channel_group_or_direct_message',\n\t\tparams: 'room_name',\n\t\tclientOnly: true,\n\t\tpermission: ['view-c-room', 'view-c-room', 'view-d-room', 'view-joined-room', 'create-d'],\n\t},\n});\n",null],"names":["_regeneratorRuntime","_objectSpread","roomCoordinator","router","Subscriptions","ChatSubscription","sdk","slashCommands","module","link","default","v","add","command","callback","_ref","params","dict","room","type","query","subscription","_subscription","async","_context","prev","next","name","trim","replace","t","$in","findOne","openRouteLink","getSearchParameters","indexOf","abrupt","awrap","call","t0","stop","Promise","options","description","clientOnly","permission"],"mappings":"2BAGAA,EAA4EC,EAA5EC,EAA4EC,EAAAC,EAAAC,EAAAC,EAAAC,EAApDC,EAAEC,IAAM,CAAA,6BAAA,CAAAC,QAAAA,SAA4CC,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAnEO,EAAiBC,IAAA,CAAM,4CAA4C,CAAAP,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAL,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAF,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAD,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAM5EA,EAAcK,GAAG,CAAC,CACjBC,QAAS,OACTC,SAAU,SAAmBC,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAtB,EAAAuB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAkB3B,GAlB8BV,EAAMD,EAANC,MAAM,CAC/BC,EAAmC,CACxC,IAAK,CAAC,IAAK,IAAI,CACf,IAAK,CAAC,IAAG,EAMJG,EAAKnB,EAAA,CACV0B,KAJKT,EAAOF,EAAOY,IAAI,GAAGC,OAAO,CAAC,MAAO,GAI/B,EACE,CAAEC,EAAG,CAAEC,IAJdZ,EAAOF,CAAI,CAACD,EAAOY,IAAI,EAAE,CAAC,EAAE,CAAC,EAAI,EAAE,AAIZ,CAAE,GAGzBP,CAAAA,EAAehB,EAAiB2B,OAAO,CAACZ,EAAK,GAGlDlB,EAAgB+B,aAAa,CAACZ,EAAaS,CAAC,CAAET,EAAclB,EAAO+B,mBAAmB,IACtF,CAEGf,CAAAA,GAAQA,AAAsB,KAAtBA,EAAKgB,OAAO,CAAC,IAAU,EAAC,CAAAX,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAY,MAAA,CAAA,SAAA,MAAA,EAAA,OAAAZ,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,GAAA1B,EAAAqC,KAAA,CAI7B/B,EAAIgC,IAAI,CAAC,sBAAuBpB,GAAK,MAAA,GACM,GAA3CG,EAAejB,EAAc4B,OAAO,CAACZ,GAC1B,CAAAI,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAY,MAAA,CAAA,SAAA,MAAA,GAGjBlC,EAAgB+B,aAAa,CAACZ,EAAaS,CAAC,CAAET,EAAclB,EAAO+B,mBAAmB,IAAIV,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAe,EAAA,CAAAf,EAAA,KAAA,CAAA,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAA,EAAAgB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAK5FC,QAAS,CACRC,YAAa,0CACb3B,OAAQ,YACR4B,WAAY,CAAA,EACZC,WAAY,CAAC,cAAe,cAAe,cAAe,mBAAoB,WAAU"}