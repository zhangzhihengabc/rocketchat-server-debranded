function module(t,a,e){var n,i,s,o,r,l,u,g,c,d,m,v;e.link("meteor/meteor",{Meteor:function(t){n=t}},0),e.link("meteor/tracker",{Tracker:function(t){i=t}},1),e.link("../../../../client/lib/rooms/roomCoordinator",{roomCoordinator:function(t){s=t}},2),e.link("../../../../client/lib/utils/messageArgs",{messageArgs:function(t){o=t}},3),e.link("../../../../client/views/room/MessageList/lib/autoTranslate",{hasTranslationLanguageInAttachments:function(t){r=t},hasTranslationLanguageInMessage:function(t){l=t}},4),e.link("../../../authorization/client",{hasAtLeastOnePermission:function(t){u=t}},5),e.link("../../../models/client",{Messages:function(t){g=t}},6),e.link("../../../settings/client",{settings:function(t){c=t}},7),e.link("../../../ui-utils/client/lib/MessageAction",{MessageAction:function(t){d=t}},8),e.link("../../../utils/client/lib/SDKClient",{sdk:function(t){m=t}},9),e.link("./autotranslate",{AutoTranslate:function(t){v=t}},10),n.startup(function(){v.init(),i.autorun(function(){c.get("AutoTranslate_Enabled")&&u(["auto-translate"])?(d.addButton({id:"translate",icon:"language",label:"Translate",context:["message","message-mobile","threads"],type:"interaction",action:function(t,a){var e,n=a.message,i=void 0===n?o(this).msg:n,s=v.getLanguage(i.rid);l(i,s)||r(i.attachments,s)||(v.messageIdsToWait[i._id]=!0,g.update({_id:i._id},{$set:{autoTranslateFetching:!0}}),m.call("autoTranslate.translateMessage",i,s));var u="autoTranslateShowInverse"in i?"$unset":"$set";g.update({_id:i._id},((e={})[u]={autoTranslateShowInverse:!0},e))},condition:function(t){var a=t.message,e=t.subscription,n=t.user,i=t.room;if(!n)return!1;var o=(null==e?void 0:e.autoTranslateLanguage)||v.getLanguage(a.rid)||"",u=s.isLivechatRoom(null==i?void 0:i.t),g=(null==a?void 0:a.u)&&a.u._id!==n._id,c=(null==e?void 0:e.autoTranslate)||u,d=l(a,o)||r(a.attachments,o);return!!(a.autoTranslateShowInverse||g&&c&&!d)},order:90}),d.addButton({id:"view-original",icon:"language",label:"View_original",context:["message","message-mobile","threads"],type:"interaction",action:function(t,a){var e,n=a.message,i=void 0===n?o(this).msg:n,s=v.getLanguage(i.rid);l(i,s)||r(i.attachments,s)||(v.messageIdsToWait[i._id]=!0,g.update({_id:i._id},{$set:{autoTranslateFetching:!0}}),m.call("autoTranslate.translateMessage",i,s));var u="autoTranslateShowInverse"in i?"$unset":"$set";g.update({_id:i._id},((e={})[u]={autoTranslateShowInverse:!0},e))},condition:function(t){var a=t.message,e=t.subscription,n=t.user,i=t.room,o=(null==e?void 0:e.autoTranslateLanguage)||v.getLanguage(a.rid)||"",u=s.isLivechatRoom(null==i?void 0:i.t);if(!n)return!1;var g=(null==a?void 0:a.u)&&a.u._id!==n._id,c=(null==e?void 0:e.autoTranslate)||u,d=l(a,o)||r(a.attachments,o);return!!(!a.autoTranslateShowInverse&&g&&c&&d)},order:90})):d.removeButton("toggle-language")})})}
//# sourceMappingURL=/dynamic/app/autotranslate/client/lib/acb9ab4dbfa94ab78d302e099b6d9851ba438b96.map
