function module(e,t,o){o.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),o.link("@rocket.chat/fuselage",{Box:function(e){n=e},Skeleton:function(e){i=e},Tile:function(e){l=e}},0),o.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){a=e}},1),o.link("@rocket.chat/ui-contexts",{useMethod:function(e){u=e}},2),o.link("react",{default:function(e){s=e},forwardRef:function(e){c=e},useEffect:function(e){d=e},useImperativeHandle:function(e){m=e}},3),o.link("../../../../../../client/views/room/contexts/ChatContext",{useChat:function(e){p=e}},4);var r,n,i,l,a,u,s,c,d,m,p,f=c(function(e,t){var o=e.focused,c=e.items,f=e.rid,v=e.tmid,h=e.select,b=e.suspended,w=a(),E=p(),g=u("executeSlashCommandPreview");m(t,function(){return r({getFilter:function(){var e,t,o=null==E?void 0:null===(e=E.composer)||void 0===e?void 0:e.substring(0,null==E?void 0:null===(t=E.composer)||void 0===t?void 0:t.selection.start);if(!o)throw Error("No value");var r=o.match(/(\/[\w\d\S]+ )([^]*)$/);if(!r)throw Error("No matches");return{cmd:r[1].replace("/","").trim().toLowerCase(),params:r[2],msg:{rid:f,tmid:v}}}},!b&&{select:function(e){var t,o,r,n=null==E?void 0:null===(t=E.composer)||void 0===t?void 0:t.substring(0,null==E?void 0:null===(o=E.composer)||void 0===o?void 0:o.selection.start);if(!n)throw Error("No value");var i=n.match(/(\/[\w\d\S]+ )([^]*)$/);if(!i)throw Error("No matches");g({cmd:i[1].replace("/","").trim().toLowerCase(),params:i[2],msg:{rid:f,tmid:v}},{id:e._id,type:e.type,value:e.value}),null==E||null===(r=E.composer)||void 0===r||r.setText("")}})},[null==E?void 0:E.composer,g,f,v,b]);var x=c.flatMap(function(e){return e.isSuccess?e.data:[]}).sort(function(e,t){return("sort"in e&&e.sort||0)-("sort"in t&&t.sort||0)}),k=c.some(function(e){return e.isLoading&&"idle"!==e.fetchStatus});return(d(function(){if(o){var e=document.getElementById("popup-item-"+o._id);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}},[o]),b)?null:s.createElement(n,{className:"message-popup-position",position:"relative"},s.createElement(l,{className:"message-popup",display:"flex",padding:8,role:"menu",mbe:8,"aria-labelledby":w},s.createElement(n,{role:"listbox",display:"flex",overflow:"auto",fontSize:0,width:0,flexGrow:1,"aria-busy":k},k&&[,,,,,].fill(5).map(function(e,t){return s.createElement(i,{variant:"rect",h:"100px",w:"120px",m:2,key:t})}),!k&&x.map(function(e){return s.createElement(n,{onClick:function(){return h(e)},role:"option",className:["popup-item",e===o&&"selected"].filter(Boolean).join(" "),id:"popup-item-"+e._id,key:e._id,bg:e===o?"selected":void 0,borderColor:e===o?"highlight":"transparent",tabIndex:e===o?0:-1,"aria-selected":e===o,m:2,borderWidth:"default",borderRadius:"x4"},"image"===e.type&&s.createElement("img",{src:e.value,alt:e._id}),"audio"===e.type&&s.createElement("audio",{controls:!0},s.createElement("source",{src:e.value}),"Your browser does not support the audio element."),"video"===e.type&&s.createElement("video",{controls:!0,className:"inline-video"},s.createElement("source",{src:e.value}),"Your browser does not support the video element."),"text"===e.type&&s.createElement("h4",null,e.value),"other"===e.type&&s.createElement("code",null,e.value))}))))});o.exportDefault(f)}
//# sourceMappingURL=/dynamic/app/ui-message/client/popup/components/composerBoxPopupPreview/aa3e727031c0c21131e913b1bbb54bd2142217ac.map
