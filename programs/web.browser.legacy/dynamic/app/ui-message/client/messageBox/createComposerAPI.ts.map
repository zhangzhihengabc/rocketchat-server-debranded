)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/ui-message/client/messageBox/createComposerAPI.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { Meteor } from 'meteor/meteor';\n\nimport type { ComposerAPI } from '../../../../client/lib/chats/ChatAPI';\nimport { withDebouncing } from '../../../../lib/utils/highOrderFunctions';\nimport type { FormattingButton } from './messageBoxFormatting';\nimport { formattingButtons } from './messageBoxFormatting';\n\nexport const createComposerAPI = (input: HTMLTextAreaElement, storageID: string): ComposerAPI => {\n\tconst triggerEvent = (input: HTMLTextAreaElement, evt: string): void => {\n\t\tconst event = new Event(evt, { bubbles: true });\n\t\t// TODO: Remove this hack for react to trigger onChange\n\t\tconst tracker = (input as any)._valueTracker;\n\t\tif (tracker) {\n\t\t\ttracker.setValue(new Date().toString());\n\t\t}\n\t\tinput.dispatchEvent(event);\n\t};\n\n\tconst emitter = new Emitter<{\n\t\tquotedMessagesUpdate: void;\n\t\tediting: void;\n\t\trecording: void;\n\t\trecordingVideo: void;\n\t\tformatting: void;\n\t\tmircophoneDenied: void;\n\t}>();\n\n\tlet _quotedMessages: IMessage[] = [];\n\n\tconst persist = withDebouncing({ wait: 300 })(() => {\n\t\tif (input.value) {\n\t\t\tMeteor._localStorage.setItem(storageID, input.value);\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor._localStorage.removeItem(storageID);\n\t});\n\n\tconst notifyQuotedMessagesUpdate = (): void => {\n\t\temitter.emit('quotedMessagesUpdate');\n\t};\n\n\tinput.addEventListener('input', persist);\n\n\tconst setText = (\n\t\ttext: string,\n\t\t{\n\t\t\tselection,\n\t\t\tskipFocus,\n\t\t}: {\n\t\t\tselection?:\n\t\t\t\t| { readonly start?: number; readonly end?: number }\n\t\t\t\t| ((previous: { readonly start: number; readonly end: number }) => { readonly start?: number; readonly end?: number });\n\t\t\tskipFocus?: boolean;\n\t\t} = {},\n\t): void => {\n\t\t!skipFocus && focus();\n\n\t\tconst { selectionStart, selectionEnd } = input;\n\t\tconst textAreaTxt = input.value;\n\n\t\tif (typeof selection === 'function') {\n\t\t\tselection = selection({ start: selectionStart, end: selectionEnd });\n\t\t}\n\n\t\tif (selection) {\n\t\t\tif (!document.execCommand?.('insertText', false, text)) {\n\t\t\t\tinput.value = textAreaTxt.substring(0, selectionStart) + text + textAreaTxt.substring(selectionStart);\n\t\t\t\t!skipFocus && focus();\n\t\t\t}\n\t\t\tinput.setSelectionRange(selection.start ?? 0, selection.end ?? text.length);\n\t\t}\n\n\t\tif (!selection) {\n\t\t\tinput.value = text;\n\t\t}\n\n\t\ttriggerEvent(input, 'input');\n\t\ttriggerEvent(input, 'change');\n\n\t\t!skipFocus && focus();\n\t};\n\n\tconst insertText = (text: string): void => {\n\t\tsetText(text, {\n\t\t\tselection: ({ start, end }) => ({\n\t\t\t\tstart: start + text.length,\n\t\t\t\tend: end + text.length,\n\t\t\t}),\n\t\t});\n\t};\n\n\tconst clear = (): void => {\n\t\tsetText('');\n\t};\n\n\tconst focus = (): void => {\n\t\tinput.focus();\n\t};\n\n\tconst replyWith = async (text: string): Promise<void> => {\n\t\tif (input) {\n\t\t\tinput.value = text;\n\t\t\tinput.focus();\n\t\t}\n\t};\n\n\tconst quoteMessage = async (message: IMessage): Promise<void> => {\n\t\t_quotedMessages = [..._quotedMessages.filter((_message) => _message._id !== message._id), message];\n\t\tnotifyQuotedMessagesUpdate();\n\t\tinput.focus();\n\t};\n\n\tconst dismissQuotedMessage = async (mid: IMessage['_id']): Promise<void> => {\n\t\t_quotedMessages = _quotedMessages.filter((message) => message._id !== mid);\n\t\tnotifyQuotedMessagesUpdate();\n\t};\n\n\tconst dismissAllQuotedMessages = async (): Promise<void> => {\n\t\t_quotedMessages = [];\n\t\tnotifyQuotedMessagesUpdate();\n\t};\n\n\tconst quotedMessages = {\n\t\tget: () => _quotedMessages,\n\t\tsubscribe: (callback: () => void) => emitter.on('quotedMessagesUpdate', callback),\n\t};\n\n\tconst [editing, setEditing] = (() => {\n\t\tlet editing = false;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tget: () => editing,\n\t\t\t\tsubscribe: (callback: () => void) => emitter.on('editing', callback),\n\t\t\t},\n\t\t\t(value: boolean) => {\n\t\t\t\tediting = value;\n\t\t\t\temitter.emit('editing');\n\t\t\t},\n\t\t];\n\t})();\n\n\tconst [recording, setRecordingMode] = (() => {\n\t\tlet recording = false;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tget: () => recording,\n\t\t\t\tsubscribe: (callback: () => void) => emitter.on('recording', callback),\n\t\t\t},\n\t\t\t(value: boolean) => {\n\t\t\t\trecording = value;\n\t\t\t\temitter.emit('recording');\n\t\t\t},\n\t\t];\n\t})();\n\n\tconst [recordingVideo, setRecordingVideo] = (() => {\n\t\tlet recordingVideo = false;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tget: () => recordingVideo,\n\t\t\t\tsubscribe: (callback: () => void) => emitter.on('recordingVideo', callback),\n\t\t\t},\n\t\t\t(value: boolean) => {\n\t\t\t\trecordingVideo = value;\n\t\t\t\temitter.emit('recordingVideo');\n\t\t\t},\n\t\t];\n\t})();\n\n\tconst [isMicrophoneDenied, setIsMicrophoneDenied] = (() => {\n\t\tlet isMicrophoneDenied = false;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tget: () => isMicrophoneDenied,\n\t\t\t\tsubscribe: (callback: () => void) => emitter.on('mircophoneDenied', callback),\n\t\t\t},\n\t\t\t(value: boolean) => {\n\t\t\t\tisMicrophoneDenied = value;\n\t\t\t\temitter.emit('mircophoneDenied');\n\t\t\t},\n\t\t];\n\t})();\n\n\tconst setEditingMode = (editing: boolean): void => {\n\t\tsetEditing(editing);\n\t};\n\n\tconst [formatters, stopFormatterTracker] = (() => {\n\t\tlet actions: FormattingButton[] = [];\n\n\t\tconst c = Tracker.autorun(() => {\n\t\t\tactions = formattingButtons.filter(({ condition }) => !condition || condition());\n\t\t\temitter.emit('formatting');\n\t\t});\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tget: () => actions,\n\t\t\t\tsubscribe: (callback: () => void) => emitter.on('formatting', callback),\n\t\t\t},\n\t\t\tc,\n\t\t];\n\t})();\n\n\tconst release = (): void => {\n\t\tinput.removeEventListener('input', persist);\n\t\tstopFormatterTracker.stop();\n\t};\n\n\tconst wrapSelection = (pattern: string): void => {\n\t\tconst { selectionEnd = input.value.length, selectionStart = 0 } = input;\n\t\tconst initText = input.value.slice(0, selectionStart);\n\t\tconst selectedText = input.value.slice(selectionStart, selectionEnd);\n\t\tconst finalText = input.value.slice(selectionEnd, input.value.length);\n\n\t\tfocus();\n\n\t\tconst startPattern = pattern.slice(0, pattern.indexOf('{{text}}'));\n\t\tconst startPatternFound = [...startPattern].reverse().every((char, index) => input.value.slice(selectionStart - index - 1, 1) === char);\n\n\t\tif (startPatternFound) {\n\t\t\tconst endPattern = pattern.slice(pattern.indexOf('{{text}}') + '{{text}}'.length);\n\t\t\tconst endPatternFound = [...endPattern].every((char, index) => input.value.slice(selectionEnd + index, 1) === char);\n\n\t\t\tif (endPatternFound) {\n\t\t\t\tinsertText(selectedText);\n\t\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\t\tinput.selectionEnd = selectionEnd + endPattern.length;\n\n\t\t\t\tif (!document.execCommand?.('insertText', false, selectedText)) {\n\t\t\t\t\tinput.value = initText.slice(0, initText.length - startPattern.length) + selectedText + finalText.slice(endPattern.length);\n\t\t\t\t}\n\n\t\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\t\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t\t\t\ttriggerEvent(input, 'input');\n\t\t\t\ttriggerEvent(input, 'change');\n\n\t\t\t\tfocus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!document.execCommand?.('insertText', false, pattern.replace('{{text}}', selectedText))) {\n\t\t\tinput.value = initText + pattern.replace('{{text}}', selectedText) + finalText;\n\t\t}\n\n\t\tinput.selectionStart = selectionStart + pattern.indexOf('{{text}}');\n\t\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t\ttriggerEvent(input, 'input');\n\t\ttriggerEvent(input, 'change');\n\n\t\tfocus();\n\t};\n\n\tconst insertNewLine = (): void => insertText('\\n');\n\n\tsetText(Meteor._localStorage.getItem(storageID) ?? '', {\n\t\tskipFocus: true,\n\t});\n\n\t// Gets the text that is connected to the cursor and replaces it with the given text\n\tconst replaceText = (text: string, selection: { readonly start: number; readonly end: number }): void => {\n\t\tconst { selectionStart, selectionEnd } = input;\n\n\t\t// Selects the text that is connected to the cursor\n\t\tinput.setSelectionRange(selection.start ?? 0, selection.end ?? text.length);\n\t\tconst textAreaTxt = input.value;\n\n\t\tif (!document.execCommand?.('insertText', false, text)) {\n\t\t\tinput.value = textAreaTxt.substring(0, selection.start) + text + textAreaTxt.substring(selection.end);\n\t\t}\n\n\t\tinput.selectionStart = selectionStart + text.length;\n\t\tinput.selectionEnd = selectionStart + text.length;\n\t\tif (selectionStart !== selectionEnd) {\n\t\t\tinput.selectionStart = selectionStart;\n\t\t}\n\n\t\ttriggerEvent(input, 'input');\n\t\ttriggerEvent(input, 'change');\n\n\t\tfocus();\n\t};\n\n\treturn {\n\t\treplaceText,\n\t\tinsertNewLine,\n\t\tblur: () => input.blur(),\n\n\t\tsubstring: (start: number, end?: number) => {\n\t\t\treturn input.value.substring(start, end);\n\t\t},\n\n\t\tgetCursorPosition: () => {\n\t\t\treturn input.selectionStart;\n\t\t},\n\t\tsetCursorToEnd: () => {\n\t\t\tinput.selectionEnd = input.value.length;\n\t\t\tinput.selectionStart = input.selectionEnd;\n\t\t\tfocus();\n\t\t},\n\t\tsetCursorToStart: () => {\n\t\t\tinput.selectionStart = 0;\n\t\t\tinput.selectionEnd = input.selectionStart;\n\t\t\tfocus();\n\t\t},\n\t\trelease,\n\t\twrapSelection,\n\t\tget text(): string {\n\t\t\treturn input.value;\n\t\t},\n\t\tget selection(): { start: number; end: number } {\n\t\t\treturn {\n\t\t\t\tstart: input.selectionStart,\n\t\t\t\tend: input.selectionEnd,\n\t\t\t};\n\t\t},\n\n\t\tediting,\n\t\tsetEditingMode,\n\t\trecording,\n\t\tsetRecordingMode,\n\t\trecordingVideo,\n\t\tsetRecordingVideo,\n\t\tinsertText,\n\t\tsetText,\n\t\tclear,\n\t\tfocus,\n\t\treplyWith,\n\t\tquoteMessage,\n\t\tdismissQuotedMessage,\n\t\tdismissAllQuotedMessages,\n\t\tquotedMessages,\n\t\tformatters,\n\t\tisMicrophoneDenied,\n\t\tsetIsMicrophoneDenied,\n\t};\n};\n",null],"names":["module","link","default","_slicedToArray","_toConsumableArray","_regeneratorRuntime","export","createComposerAPI","Emitter","Meteor","withDebouncing","formattingButtons","input","storageID","_Meteor$_localStorage","triggerEvent","evt","event","Event","bubbles","tracker","_valueTracker","setValue","Date","toString","dispatchEvent","emitter","_quotedMessages","persist","wait","value","_localStorage","setItem","removeItem","notifyQuotedMessagesUpdate","emit","addEventListener","editing","recording","recordingVideo","isMicrophoneDenied","actions","setText","text","_document$execCommand","_document","_selection$start","_selection$end","_ref","arguments","length","undefined","selection","skipFocus","focus","selectionStart","selectionEnd","textAreaTxt","start","end","document","execCommand","call","substring","setSelectionRange","insertText","_ref2","_ref4","get","subscribe","callback","on","setEditing","_ref6","setRecordingMode","_ref8","setRecordingVideo","_ref10","setIsMicrophoneDenied","_ref12","Tracker","autorun","filter","_ref13","condition","formatters","stopFormatterTracker","getItem","replaceText","_selection$start2","_selection$end2","_document$execCommand4","_document4","insertNewLine","blur","getCursorPosition","setCursorToEnd","setCursorToStart","release","removeEventListener","stop","wrapSelection","pattern","_input$selectionEnd","_input$selectionStart","initText","slice","selectedText","finalText","startPattern","indexOf","reverse","every","char","index","_document$execCommand3","_document3","_document$execCommand2","_document2","endPattern","replace","setEditingMode","clear","replyWith","async","_context","prev","next","Promise","quoteMessage","message","_context2","concat","_message","_id","dismissQuotedMessage","mid","_context3","dismissAllQuotedMessages","_context4","quotedMessages"],"mappings":"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"}