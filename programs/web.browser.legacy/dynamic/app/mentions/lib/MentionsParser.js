function module(e,n,t){t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/createClass",{default:function(e){i=e}},1),t.export({MentionsParser:function(){return o}}),t.link("@rocket.chat/string-helpers",{escapeHTML:function(e){a=e}},0);var r,i,a,u=function(e){var n=e.prefix,t=e.className,r=e.mention,i=e.title,a=e.label,u=e.type;return n+'<a class="'+t+'" data-'+(void 0===u?"username":u)+'="'+r+'"'+(i?' title="'+i+'"':"")+">"+a+"</a>"},s=function(e){return e.prefix+'<a class="mention-link mention-link--room" data-channel="'+e.reference+'">#'+e.mention+"</a>"},o=function(){function e(e){var n=this,t=e.pattern,i=e.useRealName,o=e.me,l=e.roomTemplate,m=void 0===l?s:l,p=e.userTemplate,c=void 0===p?u:p;this.replaceUsers=function(e,t,i){var u=t.mentions,s=t.temp;return e.replace(n.userMentionRegex,function(e,t,o){var l=["mention-link"];"all"===o?(l.push("mention-link--all"),l.push("mention-link--group")):"here"===o?(l.push("mention-link--here"),l.push("mention-link--group")):(o===i&&l.push("mention-link--me"),l.push("mention-link--user"));var m=l.join(" ");if("all"===o||"here"===o)return n.userTemplate({prefix:t,className:m,mention:o,label:o,type:"group"});var p=function(e){var n=e.username,t=e.type;return(!t||"user"===t)&&n===o},c=function(e){var n=e.name;return"team"===e.type&&n===o},h=r((u||[]).filter(function(e){return p(e)||c(e)}),1)[0],f=s?o&&a(o):h&&a("team"===h.type||n.useRealName?h.name:h.username);return f?n.userTemplate({prefix:t,className:m,mention:o,label:f,type:(null==h?void 0:h.type)==="team"?"team":"username",title:n.useRealName?o:f}):e})},this.replaceChannels=function(e,t){var r=t.temp,i=t.channels;return e.replace(/&#39;/g,"'").replace(n.channelMentionRegex,function(e,t,a){if(!r&&!(i&&i.find(function(e){return e.dname?e.dname===a:e.name===a})))return e;var u=i&&i.find(function(e){var n=e.name,t=e.dname;return t?t===a:n===a}),s=u?u._id:a;return n.roomTemplate({prefix:t,reference:s,channel:u,mention:a})})},this.pattern=t,this.useRealName=i,this.me=o,this.userTemplate=c,this.roomTemplate=m}var n=e.prototype;return n.getUserMentions=function(e){return(e.match(this.userMentionRegex)||[]).map(function(e){return e.trim()})},n.getChannelMentions=function(e){return(e.match(this.channelMentionRegex)||[]).map(function(e){return e.trim()})},n.parse=function(e){var n=e&&e.html||"";return n.trim()&&(n=this.replaceUsers(n,e,this.me),n=this.replaceChannels(n,e,this.me),e.html=n),e},i(e,[{key:"me",get:function(){return"function"==typeof this._me?this._me():this._me},set:function(e){this._me=e}},{key:"pattern",get:function(){return"function"==typeof this._pattern?this._pattern():this._pattern},set:function(e){this._pattern=e}},{key:"useRealName",get:function(){return"function"==typeof this._useRealName?this._useRealName():this._useRealName},set:function(e){this._useRealName=e}},{key:"userMentionRegex",get:function(){return RegExp("(^|\\s|>)@("+this.pattern+"(@("+this.pattern+"))?(:([0-9a-zA-Z-_.]+))?)","gm")}},{key:"channelMentionRegex",get:function(){return RegExp("(^|\\s|>)#("+this.pattern+"(@("+this.pattern+"))?)","gm")}}]),e}()}
//# sourceMappingURL=/dynamic/app/mentions/lib/f45931274d3282f5030069a8e9b1b461b1eba916.map
