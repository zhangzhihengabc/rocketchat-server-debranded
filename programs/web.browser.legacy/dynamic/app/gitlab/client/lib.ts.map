)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/gitlab/client/lib.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { OauthConfig } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomOAuth } from '../../custom-oauth/client/custom_oauth_client';\nimport { settings } from '../../settings/client';\n\nconst config: OauthConfig = {\n\tserverURL: 'https://gitlab.com',\n\tidentityPath: '/api/v4/user',\n\tscope: 'read_user',\n\tmergeUsers: false,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.gitlab'],\n\t\tforOtherUsers: ['services.gitlab.username'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Gitlab = new CustomOAuth('gitlab', config);\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tlet anyChange = false;\n\t\tif (settings.get('API_Gitlab_URL')) {\n\t\t\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\/*$/, '');\n\t\t\tanyChange = true;\n\t\t}\n\n\t\tif (settings.get('Accounts_OAuth_Gitlab_identity_path')) {\n\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path').trim() || config.identityPath;\n\t\t\tanyChange = true;\n\t\t}\n\n\t\tif (settings.get('Accounts_OAuth_Gitlab_merge_users')) {\n\t\t\tconfig.mergeUsers = true;\n\t\t\tanyChange = true;\n\t\t}\n\n\t\tif (anyChange) {\n\t\t\tGitlab.configure(config);\n\t\t}\n\t});\n});\n",null],"names":["module","link","Meteor","Tracker","CustomOAuth","settings","config","serverURL","identityPath","scope","mergeUsers","addAutopublishFields","forLoggedInUser","forOtherUsers","accessTokenParam","Gitlab","startup","autorun","anyChange","get","trim","replace","configure"],"mappings":"uBACSA,EAAQC,IAAA,CAAM,gBAAgB,CAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAF,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAG,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAI,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAK,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMvC,IANAH,EAAuCC,EAAAC,EAAAC,EAMjCC,EAAsB,CAC3BC,UAAW,qBACXC,aAAc,eACdC,MAAO,YACPC,WAAY,CAAA,EACZC,qBAAsB,CACrBC,gBAAiB,CAAC,kBAAkB,CACpCC,cAAe,CAAC,2BAA0B,EAE3CC,iBAAkB,gBAGbC,EAAS,IAAIX,EAAY,SAAUE,GAEzCJ,EAAOc,OAAO,CAAC,WACdb,EAAQc,OAAO,CAAC,WACf,IAAIC,EAAY,CAAA,EACZb,EAASc,GAAG,CAAC,oBAChBb,EAAOC,SAAS,CAAGF,EAASc,GAAG,CAAC,kBAAkBC,IAAI,GAAGC,OAAO,CAAC,OAAQ,IACzEH,EAAY,CAAA,GAGTb,EAASc,GAAG,CAAC,yCAChBb,EAAOE,YAAY,CAAGH,EAASc,GAAG,CAAC,uCAAuCC,IAAI,IAAMd,EAAOE,YAAY,CACvGU,EAAY,CAAA,GAGTb,EAASc,GAAG,CAAC,uCAChBb,EAAOI,UAAU,CAAG,CAAA,EACpBQ,EAAY,CAAA,GAGTA,GACHH,EAAOO,SAAS,CAAChB,EAEnB,EACD"}