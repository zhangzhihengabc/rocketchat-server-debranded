)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/webrtc/client/actionLink.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\n\nimport { actionLinks } from '../../../client/lib/actionLinks';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { ChatRoom } from '../../models/client';\nimport { Notifications } from '../../notifications/client';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { t } from '../../utils/lib/i18n';\n\nactionLinks.register('joinLivechatWebRTCCall', (message: IMessage) => {\n\tconst room = ChatRoom.findOne({ _id: message.rid });\n\tif (!room) {\n\t\tthrow new Error('Room not found');\n\t}\n\tconst { callStatus, _id } = room;\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\tdispatchToastMessage({ type: 'info', message: t('Call_Already_Ended') });\n\t\treturn;\n\t}\n\twindow.open(`/meet/${_id}`, _id);\n});\n\nactionLinks.register('endLivechatWebRTCCall', async (message: IMessage) => {\n\tconst room = ChatRoom.findOne({ _id: message.rid });\n\tif (!room) {\n\t\tthrow new Error('Room not found');\n\t}\n\tconst { callStatus, _id } = room;\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\tdispatchToastMessage({ type: 'info', message: t('Call_Already_Ended') });\n\t\treturn;\n\t}\n\tawait sdk.rest.put(`/v1/livechat/webrtc.call/${message._id}`, { rid: _id, status: 'ended' });\n\tNotifications.notifyRoom(_id, 'webrtc' as any, 'callStatus', { callStatus: 'ended' });\n});\n",null],"names":["_regeneratorRuntime","actionLinks","dispatchToastMessage","ChatRoom","Notifications","sdk","t","module","link","default","register","message","room","findOne","_id","rid","Error","callStatus","type","window","open","async","_context","prev","next","abrupt","awrap","rest","put","status","notifyRoom","stop","Promise"],"mappings":"2BAEAA,EAAAC,EAA8DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxCC,EAAMC,IAAA,CAAA,6BAAkC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAArDO,EAAaC,IAAA,CAAM,kCAAkC,CAAAP,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAL,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAH,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAF,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,uBAAAA,CAAAD,EAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAO9DL,EAAYS,QAAQ,CAAC,yBAA0B,SAACC,CAAiB,EAChE,IAAMC,EAAOT,EAASU,OAAO,CAAC,CAAEC,IAAKH,EAAQI,GAAAA,AAAG,GAChD,GAAI,CAACH,EACJ,MAAM,AAAII,MAAM,kBAEjB,IAAQC,EAAoBL,EAApBK,UAAU,CAAEH,EAAQF,EAARE,GAAG,CACvB,GAAIG,AAAe,aAAfA,GAA6BA,AAAe,UAAfA,EAAwB,CACxDf,EAAqB,CAAEgB,KAAM,OAAQP,QAASL,EAAE,qBAAqB,GACrE,OAEDa,OAAOC,IAAI,CAAA,SAAUN,EAAOA,EAC7B,GAEAb,EAAYS,QAAQ,CAAC,wBAAyB,SAAOC,CAAiB,EAAA,IAAAC,EAAAK,EAAAH,EAAA,OAAAd,EAAAqB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAClB,GAA7CZ,EAAOT,EAASU,OAAO,CAAC,CAAEC,IAAKH,EAAQI,GAAAA,AAAG,GACvC,CAAAO,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,MACF,AAAIR,MAAM,iBAAiB,MAAA,EAEX,GAAfC,EAAoBL,EAApBK,UAAU,CAAEH,EAAQF,EAARE,GAAG,CAAA,CACnBG,CAAAA,AAAe,aAAfA,GAA6BA,AAAe,UAAfA,CAAe,EAAO,CAAAK,EAAAE,IAAA,CAAA,EAAA,KAAA,CACmB,OAAzEtB,EAAqB,CAAEgB,KAAM,OAAQP,QAASL,EAAE,qBAAqB,GAAIgB,EAAAG,MAAA,CAAA,SAAA,MAAA,EAAA,OAAAH,EAAAE,IAAA,CAAA,EAAAxB,EAAA0B,KAAA,CAGpErB,EAAIsB,IAAI,CAACC,GAAG,CAAA,4BAA6BjB,EAAQG,GAAG,CAAI,CAAEC,IAAKD,EAAKe,OAAQ,OAAO,GAAG,MAAA,EAC5FzB,EAAc0B,UAAU,CAAChB,EAAK,SAAiB,aAAc,CAAEG,WAAY,OAAO,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAK,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA"}