)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/nextcloud/client/lib.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { OauthConfig } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { CustomOAuth } from '../../custom-oauth/client/custom_oauth_client';\nimport { settings } from '../../settings/client';\n\nconst config: OauthConfig = {\n\tserverURL: '',\n\ttokenPath: '/index.php/apps/oauth2/api/v1/token',\n\ttokenSentVia: 'header',\n\tauthorizePath: '/index.php/apps/oauth2/authorize',\n\tidentityPath: '/ocs/v2.php/cloud/user?format=json',\n\tscope: 'openid',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.nextcloud'],\n\t\tforOtherUsers: ['services.nextcloud.name'],\n\t},\n};\n\nconst Nextcloud = new CustomOAuth('nextcloud', config);\n\nconst fillServerURL = _.debounce((): void => {\n\tconst nextcloudURL = settings.get('Accounts_OAuth_Nextcloud_URL');\n\tif (!nextcloudURL) {\n\t\tif (nextcloudURL === undefined) {\n\t\t\treturn fillServerURL();\n\t\t}\n\t\treturn;\n\t}\n\tconfig.serverURL = nextcloudURL.trim().replace(/\\/*$/, '');\n\treturn Nextcloud.configure(config);\n}, 100);\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\treturn fillServerURL();\n\t});\n});\n",null],"names":["module","link","Meteor","Tracker","v","_","CustomOAuth","settings","config","serverURL","tokenPath","tokenSentVia","authorizePath","identityPath","scope","addAutopublishFields","forLoggedInUser","forOtherUsers","Nextcloud","fillServerURL","debounce","nextcloudURL","get","trim","replace","configure","undefined","startup","autorun"],"mappings":"uBACSA,EAAQC,IAAA,CAAM,gBAAgB,CAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAF,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAG,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,aAAAA,CAAA,QAAA,SAAAI,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAO,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOvC,IAPAL,EAAuCC,EAAAE,EAAAC,EAAAC,EAOjCC,EAAsB,CAC3BC,UAAW,GACXC,UAAW,sCACXC,aAAc,SACdC,cAAe,mCACfC,aAAc,qCACdC,MAAO,SACPC,qBAAsB,CACrBC,gBAAiB,CAAC,qBAAqB,CACvCC,cAAe,CAAC,0BAAyB,GAIrCC,EAAY,IAAIZ,EAAY,YAAaE,GAEzCW,EAAgBd,EAAEe,QAAQ,CAAC,WAChC,IAAMC,EAAed,EAASe,GAAG,CAAC,uCAClC,AAAKD,GAMLb,EAAOC,SAAS,CAAGY,EAAaE,IAAI,GAAGC,OAAO,CAAC,OAAQ,IAChDN,EAAUO,SAAS,CAACjB,IAN1B,AAAIa,AAAiBK,KAAAA,IAAjBL,EACIF,IAER,KAAA,CAIF,EAAG,KAEHjB,EAAOyB,OAAO,CAAC,WACdxB,EAAQyB,OAAO,CAAC,WACf,OAAOT,GACR,EACD"}