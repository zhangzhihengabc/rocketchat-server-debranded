function module(t,n,e){e.link("@babel/runtime/regenerator",{default:function(t){r=t}},0),e.link("@babel/runtime/helpers/slicedToArray",{default:function(t){i=t}},1),e.link("@rocket.chat/string-helpers",{escapeHTML:function(t){s=t}},0),e.link("meteor/meteor",{Meteor:function(t){a=t}},1),e.link("photoswipe/dist/photoswipe-ui-default",{default:function(t){o=t}},2),e.link("../../../../../client/lib/utils/createAnchor",{createAnchor:function(t){u=t}},3);var r,i,s,a,o,u,l=function(t){var n="string"==typeof t?parseInt(t,10):void 0;return Number.isFinite(n)?n:void 0},c=function(t){return new Promise(function(n,e){var r=new Image;r.addEventListener("load",function(){n([r.naturalWidth,r.naturalHeight])}),r.addEventListener("error",function(t){e(t.error)}),r.src=t})},p=function(t){var n,e,s,a,o,u,p,d,_,f,w;return r.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(t instanceof HTMLElement){v.next=2;break}return v.abrupt("return",null);case 2:if(n=t.dataset.title||t.title,e=t.dataset.description,!(t instanceof HTMLAnchorElement)){v.next=16;break}if(s=t.dataset.src||t.href,a=l(t.dataset.width),o=l(t.dataset.height),!(void 0===a||void 0===o)){v.next=15;break}return v.next=11,r.awrap(c(s));case 11:a=(u=i(v.sent,2))[0],o=u[1];case 15:return v.abrupt("return",{src:s,w:a,h:o,title:n,description:e});case 16:if(!(t instanceof HTMLImageElement)){v.next=33;break}if(d=t.src,_=t.naturalWidth,f=t.naturalHeight,!t.dataset.src||(p=t.src,d=t.dataset.src,_=l(t.dataset.width),f=l(t.dataset.height),!(void 0===_||void 0===f))){v.next=32;break}return v.next=28,r.awrap(c(d));case 28:_=(w=i(v.sent,2))[0],f=w[1];case 32:return v.abrupt("return",{msrc:p,src:d,w:_,h:f,title:n,description:e});case 33:return v.abrupt("return",null);case 34:case"end":return v.stop()}},null,null,null,Promise)},d=null,_=function(t,n){var s,a,l;return r.async(function(c){for(;;)switch(c.prev=c.next){case 0:return(s=u("photoswipe-root")).innerHTML='<div class="pswp" id="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n	<div class="pswp__bg"></div>\n	<div class="pswp__scroll-wrap">\n		<div class="pswp__container">\n			<div class="pswp__item"></div>\n			<div class="pswp__item"></div>\n			<div class="pswp__item"></div>\n		</div>\n\n		<div class="pswp__ui pswp__ui--hidden">\n			<div class="pswp__top-bar">\n\n				<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n				<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n				<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n\n				<div class="pswp__preloader">\n					<div class="pswp__preloader__icn">\n					<div class="pswp__preloader__cut">\n						<div class="pswp__preloader__donut"></div>\n					</div>\n					</div>\n				</div>\n			</div>\n\n			<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>\n\n			<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>\n\n			<div class="pswp__caption">\n				<div class="pswp__caption__center"></div>\n			</div>\n		</div>\n	</div>\n</div>',c.next=4,r.awrap(Promise.all([e.dynamicImport("photoswipe"),e.dynamicImport("photoswipe/dist/photoswipe.css")]));case 4:if(a=i(c.sent,1)[0].default,d){c.next=14;break}if(l=document.getElementById("pswp")){c.next=11;break}throw Error("Photoswipe container element not found");case 11:(d=new a(l,o,t,n)).listen("destroy",function(){s.innerHTML="",d=null}),d.init();case 14:case"end":return c.stop()}},null,null,null,Promise)},f={bgOpacity:.7,counterEl:!1,index:0,wheelToZoom:!0,padding:{top:20,bottom:40,left:100,right:100},addCaptionHTMLFn:function(t,n){var e,r;return n.children[0].innerHTML="\n			"+s(null!==(e=t.title)&&void 0!==e?e:"")+"<br/>\n			<small>"+s(null!==(r=t.description)&&void 0!==r?r:"")+"</small>\n		",!0}};a.startup(function(){$(document).on("click",".gallery-item",function(t){t.preventDefault(),t.stopPropagation();var n=t.currentTarget,e=Array.from(document.querySelectorAll(".gallery-item")).sort(function(t,e){return t===n?-1:e===n?1:0}).map(function(t){return p(t)}),i=!1;e.reduce(function(t,n){return t.then(function(){return n}).then(function(t){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(d){n.next=7;break}if(!i){n.next=5;break}return n.abrupt("return");case 5:return i=!0,n.abrupt("return",_([t],f));case 7:d.items.push(t),d.invalidateCurrItems(),d.updateSize(!0);case 10:case"end":return n.stop()}},null,null,null,Promise)})},Promise.resolve())})})}
//# sourceMappingURL=/dynamic/app/ui/client/views/app/c21b6677c3e0bf7994a3342b23624d3ca03a16ab.map
