)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/ui/client/lib/ChatMessages.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage, IRoom, IUser } from '@rocket.chat/core-typings';\nimport { isVideoConfMessage } from '@rocket.chat/core-typings';\nimport type { IActionManager } from '@rocket.chat/ui-contexts';\nimport type { UIEvent } from 'react';\n\nimport type { ChatAPI, ComposerAPI, DataAPI, UploadsAPI } from '../../../../client/lib/chats/ChatAPI';\nimport { createDataAPI } from '../../../../client/lib/chats/data';\nimport { processMessageEditing } from '../../../../client/lib/chats/flows/processMessageEditing';\nimport { processSetReaction } from '../../../../client/lib/chats/flows/processSetReaction';\nimport { processSlashCommand } from '../../../../client/lib/chats/flows/processSlashCommand';\nimport { processTooLongMessage } from '../../../../client/lib/chats/flows/processTooLongMessage';\nimport { replyBroadcast } from '../../../../client/lib/chats/flows/replyBroadcast';\nimport { requestMessageDeletion } from '../../../../client/lib/chats/flows/requestMessageDeletion';\nimport { sendMessage } from '../../../../client/lib/chats/flows/sendMessage';\nimport { uploadFiles } from '../../../../client/lib/chats/flows/uploadFiles';\nimport { ReadStateManager } from '../../../../client/lib/chats/readStateManager';\nimport { createUploadsAPI } from '../../../../client/lib/chats/uploads';\nimport {\n\tsetHighlightMessage,\n\tclearHighlightMessage,\n} from '../../../../client/views/room/MessageList/providers/messageHighlightSubscription';\nimport { UserAction } from './UserAction';\n\ntype DeepWritable<T> = T extends (...args: any) => any\n\t? T\n\t: {\n\t\t\t-readonly [P in keyof T]: DeepWritable<T[P]>;\n\t  };\n\nexport class ChatMessages implements ChatAPI {\n\tpublic uid: string | null;\n\n\tpublic composer: ComposerAPI | undefined;\n\n\tpublic setComposerAPI = (composer: ComposerAPI): void => {\n\t\tthis.composer?.release();\n\t\tthis.composer = composer;\n\t};\n\n\tpublic data: DataAPI;\n\n\tpublic readStateManager: ReadStateManager;\n\n\tpublic uploads: UploadsAPI;\n\n\tpublic ActionManager: any;\n\n\tpublic userCard: { open(username: string): (event: UIEvent) => void; close(): void };\n\n\tpublic emojiPicker: {\n\t\topen(el: Element, cb: (emoji: string) => void): void;\n\t\tclose(): void;\n\t};\n\n\tpublic action: {\n\t\tstart(action: 'typing'): Promise<void> | void;\n\t\tstop(action: 'typing' | 'recording' | 'uploading' | 'playing'): Promise<void> | void;\n\t\tperformContinuously(action: 'recording' | 'uploading' | 'playing'): Promise<void> | void;\n\t};\n\n\tprivate currentEditingMID?: string;\n\n\tpublic messageEditing: ChatAPI['messageEditing'] = {\n\t\ttoPreviousMessage: async () => {\n\t\t\tif (!this.composer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.currentEditing) {\n\t\t\t\tlet lastMessage = await this.data.findLastOwnMessage();\n\n\t\t\t\t// Videoconf messages should not be edited\n\t\t\t\tif (lastMessage && isVideoConfMessage(lastMessage)) {\n\t\t\t\t\tlastMessage = await this.data.findPreviousOwnMessage(lastMessage);\n\t\t\t\t}\n\n\t\t\t\tif (lastMessage) {\n\t\t\t\t\tawait this.data.saveDraft(undefined, this.composer.text);\n\t\t\t\t\tawait this.messageEditing.editMessage(lastMessage);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentMessage = await this.data.findMessageByID(this.currentEditing.mid);\n\t\t\tlet previousMessage = currentMessage ? await this.data.findPreviousOwnMessage(currentMessage) : undefined;\n\n\t\t\t// Videoconf messages should not be edited\n\t\t\tif (previousMessage && isVideoConfMessage(previousMessage)) {\n\t\t\t\tpreviousMessage = await this.data.findPreviousOwnMessage(previousMessage);\n\t\t\t}\n\n\t\t\tif (previousMessage) {\n\t\t\t\tawait this.messageEditing.editMessage(previousMessage);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.currentEditing.cancel();\n\t\t},\n\t\ttoNextMessage: async () => {\n\t\t\tif (!this.composer || !this.currentEditing) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentMessage = await this.data.findMessageByID(this.currentEditing.mid);\n\t\t\tlet nextMessage = currentMessage ? await this.data.findNextOwnMessage(currentMessage) : undefined;\n\n\t\t\t// Videoconf messages should not be edited\n\t\t\tif (nextMessage && isVideoConfMessage(nextMessage)) {\n\t\t\t\tnextMessage = await this.data.findNextOwnMessage(nextMessage);\n\t\t\t}\n\n\t\t\tif (nextMessage) {\n\t\t\t\tawait this.messageEditing.editMessage(nextMessage, { cursorAtStart: true });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.currentEditing.cancel();\n\t\t},\n\t\teditMessage: async (message: IMessage, { cursorAtStart = false }: { cursorAtStart?: boolean } = {}) => {\n\t\t\tconst text = (await this.data.getDraft(message._id)) || message.attachments?.[0]?.description || message.msg;\n\n\t\t\tawait this.currentEditing?.stop();\n\n\t\t\tif (!this.composer || !(await this.data.canUpdateMessage(message))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.currentEditingMID = message._id;\n\t\t\tsetHighlightMessage(message._id);\n\t\t\tthis.composer.setEditingMode(true);\n\n\t\t\tthis.composer.setText(text);\n\t\t\tcursorAtStart && this.composer.setCursorToStart();\n\t\t\t!cursorAtStart && this.composer.setCursorToEnd();\n\t\t\tthis.composer.focus();\n\t\t},\n\t};\n\n\tpublic flows: DeepWritable<ChatAPI['flows']>;\n\n\tpublic constructor(\n\t\tprivate params: {\n\t\t\trid: IRoom['_id'];\n\t\t\ttmid?: IMessage['_id'];\n\t\t\tuid: IUser['_id'] | null;\n\t\t\tactionManager: IActionManager;\n\t\t},\n\t) {\n\t\tconst { rid, tmid } = params;\n\t\tthis.uid = params.uid;\n\t\tthis.data = createDataAPI({ rid, tmid });\n\t\tthis.uploads = createUploadsAPI({ rid, tmid });\n\t\tthis.ActionManager = params.actionManager;\n\n\t\tconst unimplemented = () => {\n\t\t\tthrow new Error('Flow is not implemented');\n\t\t};\n\n\t\tthis.readStateManager = new ReadStateManager(rid);\n\n\t\tthis.userCard = {\n\t\t\topen: unimplemented,\n\t\t\tclose: unimplemented,\n\t\t};\n\n\t\tthis.emojiPicker = {\n\t\t\topen: unimplemented,\n\t\t\tclose: unimplemented,\n\t\t};\n\n\t\tthis.action = {\n\t\t\tstart: async (action: 'typing') => {\n\t\t\t\tUserAction.start(params.rid, `user-${action}`, { tmid: params.tmid });\n\t\t\t},\n\t\t\tperformContinuously: async (action: 'recording' | 'uploading' | 'playing') => {\n\t\t\t\tUserAction.performContinuously(params.rid, `user-${action}`, { tmid: params.tmid });\n\t\t\t},\n\t\t\tstop: async (action: 'typing' | 'recording' | 'uploading' | 'playing') => {\n\t\t\t\tUserAction.stop(params.rid, `user-${action}`, { tmid: params.tmid });\n\t\t\t},\n\t\t};\n\n\t\tthis.flows = {\n\t\t\tuploadFiles: uploadFiles.bind(null, this),\n\t\t\tsendMessage: sendMessage.bind(this, this),\n\t\t\tprocessSlashCommand: processSlashCommand.bind(null, this),\n\t\t\tprocessTooLongMessage: processTooLongMessage.bind(null, this),\n\t\t\tprocessMessageEditing: processMessageEditing.bind(null, this),\n\t\t\tprocessSetReaction: processSetReaction.bind(null, this),\n\t\t\trequestMessageDeletion: requestMessageDeletion.bind(this, this),\n\t\t\treplyBroadcast: replyBroadcast.bind(null, this),\n\t\t};\n\t}\n\n\tpublic get currentEditing() {\n\t\tif (!this.composer || !this.currentEditingMID) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tmid: this.currentEditingMID,\n\t\t\treset: async (): Promise<boolean> => {\n\t\t\t\tif (!this.composer || !this.currentEditingMID) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst message = await this.data.findMessageByID(this.currentEditingMID);\n\t\t\t\tif (this.composer.text !== message?.msg) {\n\t\t\t\t\tthis.composer.setText(message?.msg ?? '');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tstop: async (): Promise<void> => {\n\t\t\t\tif (!this.composer || !this.currentEditingMID) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst message = await this.data.findMessageByID(this.currentEditingMID);\n\t\t\t\tconst draft = this.composer.text;\n\n\t\t\t\tif (draft === message?.msg) {\n\t\t\t\t\tawait this.data.discardDraft(this.currentEditingMID);\n\t\t\t\t} else {\n\t\t\t\t\tawait this.data.saveDraft(this.currentEditingMID, (await this.data.getDraft(this.currentEditingMID)) || draft);\n\t\t\t\t}\n\n\t\t\t\tthis.composer.setEditingMode(false);\n\t\t\t\tthis.currentEditingMID = undefined;\n\t\t\t\tclearHighlightMessage();\n\t\t\t},\n\t\t\tcancel: async (): Promise<void> => {\n\t\t\t\tif (!this.currentEditingMID) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tawait this.data.discardDraft(this.currentEditingMID);\n\t\t\t\tawait this.currentEditing?.stop();\n\t\t\t\tthis.composer?.setText((await this.data.getDraft(undefined)) ?? '');\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic async release() {\n\t\tif (this.currentEditing) {\n\t\t\tif (!this.params.tmid) {\n\t\t\t\tawait this.currentEditing.cancel();\n\t\t\t}\n\t\t\tthis.composer?.clear();\n\t\t}\n\t}\n}\n",null],"names":["module","link","default","_regeneratorRuntime","_createClass","export","ChatMessages","isVideoConfMessage","createDataAPI","processMessageEditing","processSetReaction","processSlashCommand","processTooLongMessage","replyBroadcast","requestMessageDeletion","sendMessage","uploadFiles","ReadStateManager","createUploadsAPI","setHighlightMessage","clearHighlightMessage","UserAction","params","_this","uid","composer","setComposerAPI","_this$composer","release","data","readStateManager","uploads","ActionManager","userCard","emojiPicker","action","currentEditingMID","messageEditing","toPreviousMessage","lastMessage","currentMessage","previousMessage","async","_context","prev","next","abrupt","currentEditing","awrap","findLastOwnMessage","sent","findPreviousOwnMessage","saveDraft","undefined","text","editMessage","findMessageByID","mid","t0","cancel","stop","Promise","toNextMessage","nextMessage","_context2","findNextOwnMessage","cursorAtStart","message","_message$attachments","_message$attachments$","_this$currentEditing","_ref$cursorAtStart","_args3","arguments","_context3","_ref","length","getDraft","_id","t1","attachments","description","msg","t2","canUpdateMessage","setEditingMode","setText","setCursorToStart","setCursorToEnd","focus","flows","rid","tmid","actionManager","unimplemented","Error","open","close","start","_context4","performContinuously","_context5","_context6","bind","_proto","prototype","_this$composer2","_context7","clear","key","get","_this2","reset","_message$msg","_context8","draft","_context9","discardDraft","t3","t4","t5","call","_this2$currentEditing","_this2$composer","_await$_this2$data$ge","_context10"],"mappings":"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"}