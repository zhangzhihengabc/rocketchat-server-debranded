function module(e,t,n){n.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},1),n.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){r=e}},2),n.export({USER_ACTIVITIES:function(){return f},UserAction:function(){return h}}),n.link("lodash",{debounce:function(e){u=e}},0),n.link("meteor/meteor",{Meteor:function(e){l=e}},1),n.link("meteor/reactive-dict",{ReactiveDict:function(e){a=e}},2),n.link("../../../notifications/client",{Notifications:function(e){c=e}},3),n.link("../../../settings/client",{settings:function(e){s=e}},4);var i,o,r,u,l,a,c,s,d="user-activity",f={USER_RECORDING:"user-recording",USER_TYPING:"user-typing",USER_UPLOADING:"user-uploading",USER_PLAYING:"user-playing"},m=new Map,g=new Map,v=new Map,p=new Map,w=new Map,R=new a,T=function(e){return e?s.get("UI_Use_Real_Name")?e.name:e.username:void 0},I=u(function(e,t){var n;return i.async(function(i){for(;;)switch(i.prev=i.next){case 0:n=p.get((null==t?void 0:t.tmid)||e)||new Set,c.notifyRoom(e,d,T(l.user()),r(n),t);case 2:case"end":return i.stop()}},null,null,null,Promise)},500),h=new(function(){function e(){}var t=e.prototype;return t.addStream=function(e){if(!w.get(e)){var t=function(t,n,i){t!==T(l.users.findOne(l.userId()||void 0,{fields:{name:1,username:1}}))&&function e(t,n,i,r){t=(null==r?void 0:r.tmid)||t;for(var u=R.get(t)||{},l=0,a=Object.entries(f);l<a.length;l++){var c=o(a[l],2)[1];u[c]=u[c]||new Map;var s=u[c],d=s[n];d&&clearTimeout(d),i.includes(c)?(i.splice(i.indexOf(c),1),s[n]=setTimeout(function(){return e(t,n,i,r)},15e3)):delete s[n]}R.set(t,u)}(e,t,n,i)};w.set(e,t),c.onRoom(e,d,t)}},t.performContinuously=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t+"-"+((null==i?void 0:i.tmid)||e);v.get(o)||(this.start(e,t,i),v.set(o,setInterval(function(){n.start(e,t,i)},5e3)))},t.start=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(null==i?void 0:i.tmid)||e,r=t+"-"+o;if(!g.get(r)){g.set(r,setTimeout(function(){clearTimeout(g.get(r)),g.delete(r)},5e3));var u=p.get(o)||new Set;u.add(t),p.set(o,u),I(e,i),m.get(r)&&(clearTimeout(m.get(r)),m.delete(r)),m.set(r,setTimeout(function(){return n.stop(o,t,i)},15e3)),m.get(r)}},t.stop=function(e,t,n){var i=(null==n?void 0:n.tmid)||e,o=t+"-"+i;m.get(o)&&(clearTimeout(m.get(o)),m.delete(o)),g.get(o)&&(clearTimeout(g.get(o)),g.delete(o)),v.get(o)&&(clearInterval(v.get(o)),v.delete(o));var r=p.get(i)||new Set;r.delete(t),p.set(i,r),I(e,n)},t.cancel=function(e){w.get(e)&&(c.unRoom(e,d),w.delete(e))},t.get=function(e){return R.get(e)},e}())}
//# sourceMappingURL=/dynamic/app/ui/client/lib/90d2bc7823e5aed9539cc917bdab384fc2fdde28.map
