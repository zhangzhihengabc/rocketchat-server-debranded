function module(t,e,n){n.link("@babel/runtime/regenerator",{default:function(t){r=t}},0),n.export({AudioRecorder:function(){return s}}),n.link("../../../../settings/client",{settings:function(t){o=t}},0),n.link("./AudioEncoder",{AudioEncoder:function(t){i=t}},1);var r,o,i,s=function(){function t(){this.audioContext=void 0,this.stream=void 0,this.encoder=void 0}var e=t.prototype;return e.isSupported=function(){var t;return!!(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia)&&!!AudioContext},e.createAudioContext=function(){this.audioContext||(this.audioContext=new AudioContext)},e.destroyAudioContext=function(){this.audioContext&&(this.audioContext.close(),delete this.audioContext)},e.createStream=function(){return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.stream){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,r.awrap(navigator.mediaDevices.getUserMedia({audio:!0}));case 4:this.stream=t.sent;case 5:case"end":return t.stop()}},null,this,null,Promise)},e.destroyStream=function(){this.stream&&(this.stream.getAudioTracks().forEach(function(t){return t.stop()}),delete this.stream)},e.createEncoder=function(){var t,e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.encoder||!this.audioContext||!this.stream)){n.next=2;break}return n.abrupt("return");case 2:e=null===(t=this.audioContext)||void 0===t?void 0:t.createMediaStreamSource(this.stream),this.encoder=new i(e,{bitRate:o.get("Message_Audio_bitRate")||32});case 4:case"end":return n.stop()}},null,this,null,Promise)},e.destroyEncoder=function(){this.encoder&&(this.encoder.close(),delete this.encoder)},e.start=function(t){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.createAudioContext(),e.next=4,r.awrap(this.createStream());case 4:return e.next=6,r.awrap(this.createEncoder());case 6:null==t||t.call(this,!0),e.next=17;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),this.destroyEncoder(),this.destroyStream(),this.destroyAudioContext(),null==t||t.call(this,!1),e.t0;case 17:case"end":return e.stop()}},null,this,[[0,9]],Promise)},e.stop=function(t){var e,n;null===(e=this.encoder)||void 0===e||e.on("encoded",t),null===(n=this.encoder)||void 0===n||n.close(),this.destroyEncoder(),this.destroyStream(),this.destroyAudioContext()},t}()}
//# sourceMappingURL=/dynamic/app/ui/client/lib/recorderjs/ccc7f80cb60b987f92ab044eed47cd9ac26ae875.map
