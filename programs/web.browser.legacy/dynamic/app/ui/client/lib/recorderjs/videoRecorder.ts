function module(e,t,i){i.export({VideoRecorder:function(){return s}}),i.link("meteor/reactive-var",{ReactiveVar:function(e){r=e}},0);var r,s=new(function(){function e(){this.cameraStarted=new r(!1),this.started=!1,this.recording=new r(!1),this.recordingAvailable=new r(!1),this.videoel=void 0,this.chunks=[],this.stream=void 0,this.mediaRecorder=void 0}var t=e.prototype;return t.getSupportedMimeTypes=function(){return window.MediaRecorder.isTypeSupported("video/webm")?"video/webm; codecs=vp8,opus":window.MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":""},t.start=function(e,t){var i,r,s,a=this;this.videoel=e;var o=function(e){a.startUserMedia(e),null==t||t.call(a,!0)},d=function(e){console.error(e),null==t||t.call(a,!1)};if(navigator.mediaDevices){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(o,d);return}var n=null!==(i=null!==(r=null!==(s=navigator.getUserMedia)&&void 0!==s?s:navigator.webkitGetUserMedia)&&void 0!==r?r:navigator.mozGetUserMedia)&&void 0!==i?i:navigator.msGetUserMedia;if(n){n.call(navigator,{audio:!0,video:!0},o,d);return}null==t||t.call(this,!1)},t.record=function(){var e=this;if(this.chunks=[],this.stream)return this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:this.getSupportedMimeTypes()}),this.mediaRecorder.ondataavailable=function(t){if(e.chunks.push(t.data),!e.recordingAvailable.get())return e.recordingAvailable.set(!0)},this.mediaRecorder.start(),this.recording.set(!0)},t.startUserMedia=function(e){if(this.videoel){this.stream=e;try{this.videoel.srcObject=e}catch(i){var t=window.URL||window.webkitURL;this.videoel.src=t.createObjectURL(e)}return this.started=!0,this.cameraStarted.set(!0)}},t.stop=function(e){if(this.started){if(this.stopRecording(),this.stream){for(var t=this.stream.getVideoTracks(),i=0,r=Array.from(t);i<r.length;i++)r[i].stop();for(var s=this.stream.getAudioTracks(),a=0,o=Array.from(s);a<o.length;a++)o[a].stop()}this.videoel&&(this.videoel.pause,this.videoel.src=""),this.started=!1,this.cameraStarted.set(!1),this.recordingAvailable.set(!1),e&&this.chunks&&e(new Blob(this.chunks)),delete this.stream,delete this.videoel}},t.stopRecording=function(){this.started&&this.recording&&this.mediaRecorder&&(this.mediaRecorder.stop(),this.recording.set(!1),delete this.mediaRecorder)},e}())}
//# sourceMappingURL=/dynamic/app/ui/client/lib/recorderjs/d0c97c9013c34502a7e84fc1e7769424a7faf7a0.map
