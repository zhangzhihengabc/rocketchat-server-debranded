)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/webdav/client/actionButton.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport { messageArgs } from '../../../client/lib/utils/messageArgs';\nimport SaveToWebdav from '../../../client/views/room/webdav/SaveToWebdavModal';\nimport { WebdavAccounts } from '../../models/client';\nimport { settings } from '../../settings/client';\nimport { MessageAction } from '../../ui-utils/client';\nimport { getURL } from '../../utils/client';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'webdav-upload',\n\t\ticon: 'upload',\n\t\tlabel: 'Save_To_Webdav',\n\t\tcondition: ({ message, subscription }) => {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (WebdavAccounts.findOne() == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!message.file) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn settings.get('Webdav_Integration_Enabled');\n\t\t},\n\t\taction(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst [attachment] = message.attachments || [];\n\t\t\tconst url = getURL(attachment.title_link as string, { full: true });\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: SaveToWebdav,\n\t\t\t\tprops: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattachment,\n\t\t\t\t\t\turl,\n\t\t\t\t\t},\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n",null],"names":["_slicedToArray","Meteor","imperativeModal","messageArgs","SaveToWebdav","WebdavAccounts","settings","MessageAction","getURL","module","link","default","v","startup","addButton","id","icon","label","condition","_ref","message","subscription","findOne","file","get","action","_","props","_props$message","attachment","_ref3","msg","attachments","url","title_link","full","open","component","data","onClose","close","order","group"],"mappings":"2BAAAA,EAAAC,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtBC,EAAMC,IAAA,CAAA,uCAAgB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAA9BS,EAAQC,IAAA,CAAM,gBAAgB,CAAAT,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAP,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAN,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,sDAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAD,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAUvCP,EAAOY,OAAO,CAAC,WACdN,EAAcO,SAAS,CAAC,CACvBC,GAAI,gBACJC,KAAM,SACNC,MAAO,iBACPC,UAAW,SAAAC,CAAA,EAA8B,IAA3BC,EAAOD,EAAPC,OAAO,QACpB,AAAoB,MADcD,EAAZE,YAAY,EAI9BhB,AAA4B,MAA5BA,EAAeiB,OAAO,MAGrBF,EAAQG,IAAI,EAIVjB,EAASkB,GAAG,CAAC,6BACrB,EACAC,OAAM,SAACC,CAAC,CAAEC,CAAK,EACd,IAAAC,EAA4CD,EAApCP,OAAO,CACRS,EAAUC,AAA6B9B,EAAzBoB,AADNQ,CAAAA,AAAA,KAAA,IAAAA,EAAGzB,EAAY,IAAI,EAAE4B,GAAG,CAAAH,CAAA,EACVI,WAAW,EAAI,EAAE,CAAA,EAA7B,CAAA,EAAA,CACXC,EAAMzB,EAAOqB,EAAWK,UAAoB,CAAE,CAAEC,KAAM,CAAA,CAAI,GAChEjC,EAAgBkC,IAAI,CAAC,CACpBC,UAAWjC,EACXuB,MAAO,CACNW,KAAM,CACLT,WAAAA,EACAI,IAAAA,GAEDM,QAASrC,EAAgBsC,KAAAA,GAG5B,EACAC,MAAO,IACPC,MAAO,QAET"}