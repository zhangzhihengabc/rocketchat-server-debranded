)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/2fa/client/TOTPLDAP.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\nimport '../../../client/startup/ldap';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\nimport { reportError } from '../../../client/lib/2fa/utils';\n\nMeteor.loginWithLDAPAndTOTP = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst ldapPass = args.shift();\n\n\t// Check if last argument is a function. if it is, pop it off and set callback to it\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\t// The last argument before the callback is the totp code\n\tconst code = args.pop();\n\n\t// if args still holds options item, grab it\n\tconst ldapOptions = args.length > 0 ? args.shift() : {};\n\n\t// Set up loginRequest object\n\tconst loginRequest = {\n\t\tldap: true,\n\t\tusername,\n\t\tldapPass,\n\t\tldapOptions,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithLDAP } = Meteor;\n\nMeteor.loginWithLDAP = function (...args) {\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\n\toverrideLoginMethod(loginWithLDAP, args, callback, Meteor.loginWithLDAPAndTOTP, args[0]);\n};\n",null],"names":["module","link","Accounts","v","Meteor","overrideLoginMethod","reportError","loginWithLDAPAndTOTP","_len","arguments","length","args","Array","_key","username","shift","ldapPass","callback","pop","code","ldapOptions","callLoginMethod","methodArguments","totp","login","ldap","userCallback","error","loginWithLDAP","_Meteor","_len2","_key2"],"mappings":"uBAAaA,EAAOC,IAAI,CAAC,uBAAuB,CAACC,SAAS,SAASC,CAAC,EAAED,EAASC,CAAC,CAAC,EAAE,GAAcH,EAAOC,IAAI,CAAC,gBAAgB,CAACG,OAAO,SAASD,CAAC,EAAEC,EAAOD,CAAC,CAAC,EAAE,GAAGH,EAAOC,IAAI,CAAC,gCAAwDD,EAAOC,IAAI,CAAC,8CAA8C,CAACI,oBAAoB,SAASF,CAAC,EAAEE,EAAoBF,CAAC,CAAC,EAAE,GAAmBH,EAAOC,IAAI,CAAC,gCAAgC,CAACK,YAAY,SAASH,CAAC,EAAEG,EAAYH,CAAC,CAAC,EAAE,GAO9bC,EAAOG,oBAAoB,CAAG,WAAmB,IAAA,IAAAC,EAAAC,UAAAC,MAAA,CAANC,EAAI,AAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,CAAI,CAAAE,EAAA,CAAAJ,SAAA,CAAAI,EAAA,CAE9C,IAAMC,EAAWH,EAAKI,KAAK,GACrBC,EAAWL,EAAKI,KAAK,GAGrBE,EAAW,AAAiC,YAAjC,OAAON,CAAI,CAACA,EAAKD,MAAM,CAAG,EAAE,CAAkBC,EAAKO,GAAG,GAAK,KAEtEC,EAAOR,EAAKO,GAAG,GAGfE,EAAcT,EAAKD,MAAM,CAAG,EAAIC,EAAKI,KAAK,GAAK,CAAC,EAUtDb,EAASmB,eAAe,CAAC,CACxBC,gBAAiB,CAChB,CACCC,KAAM,CACLC,MAXiB,CACpBC,KAAM,CAAA,EACNX,SAAAA,EACAE,SAAAA,EACAI,YAAAA,CACD,EAOID,KAAAA,CACD,CACD,EACA,CACDO,aAAY,SAACC,CAAK,EACbA,EACHrB,EAAYqB,EAAOV,GAEnBA,GAAYA,GAEd,CACD,EACD,EAEA,IA/CIf,EAAsFE,EAAqHC,EAA8IC,EA+CrVsB,EAAaC,AAAKzB,EAAlBwB,aAAa,AAErBxB,CAAAA,EAAOwB,aAAa,CAAG,WAAmB,IAAA,IAAAE,EAAArB,UAAAC,MAAA,CAANC,EAAI,AAAAC,MAAAkB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJpB,CAAI,CAAAoB,EAAA,CAAAtB,SAAA,CAAAsB,EAAA,CACvC,IAAMd,EAAW,AAAiC,YAAjC,OAAON,CAAI,CAACA,EAAKD,MAAM,CAAG,EAAE,CAAkBC,EAAKO,GAAG,GAAK,KAE5Eb,EAAoBuB,EAAejB,EAAMM,EAAUb,EAAOG,oBAAoB,CAAEI,CAAI,CAAC,EAAE,CACxF"}