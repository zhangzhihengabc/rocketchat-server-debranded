)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/startup/actionButtons/permalinkStar.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { MessageAction } from '../../../app/ui-utils/client';\nimport { t } from '../../../app/utils/lib/i18n';\nimport { getPermaLink } from '../../lib/getPermaLink';\nimport { dispatchToastMessage } from '../../lib/toast';\nimport { messageArgs } from '../../lib/utils/messageArgs';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'permalink-star',\n\t\ticon: 'permalink',\n\t\tlabel: 'Copy_link',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['starred', 'threads', 'videoconf-threads'],\n\t\tasync action(_, props) {\n\t\t\ttry {\n\t\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t\t} catch (e) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t}\n\t\t},\n\t\tcondition({ message, subscription, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(message.starred?.find((star) => star._id === user?._id));\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n});\n",null],"names":["_regeneratorRuntime","Meteor","MessageAction","t","getPermaLink","dispatchToastMessage","messageArgs","module","default","link","startup","addButton","id","icon","label","context","action","_","props","_props$message","message","permalink","async","_context","prev","next","msg","awrap","_id","sent","navigator","clipboard","writeText","type","t0","stop","Promise","condition","_ref","_message$starred","subscription","user","Boolean","starred","find","star","order","group"],"mappings":"2BAAAA,EAAAC,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhBC,EAAAA,IAAAA,CAAAA,6BAAgB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAA9BO,EAAQE,IAAA,CAAM,gBAAgB,CAAAR,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAL,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAJ,EAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAH,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAF,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAD,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAQvCL,EAAOS,OAAO,CAAC,WACdR,EAAcS,SAAS,CAAC,CACvBC,GAAI,iBACJC,KAAM,YACNC,MAAO,YAEPC,QAAS,CAAC,UAAW,UAAW,oBAAoB,CAC9CC,OAAM,SAACC,CAAC,CAAEC,CAAK,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAArB,EAAAsB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAEoB,OAFpBF,EAAAC,IAAA,CAAA,EAEXJ,EAAOD,AAAA,KAAA,IAFIA,CAAAA,EAEyBD,EAApCE,OAAO,AAAPA,EAAUd,EAAY,IAAI,EAAEoB,GAAG,CAAAP,EAAAI,EAAAE,IAAA,CAAA,EAAAzB,EAAA2B,KAAA,CACfvB,EAAagB,EAAQQ,GAAG,EAAC,MAAA,EAA3CP,EAASE,EAAAM,IAAA,CACfC,UAAUC,SAAS,CAACC,SAAS,CAACX,GAC9BhB,EAAqB,CAAE4B,KAAM,UAAWb,QAASjB,EAAE,SAAS,GAAIoB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAW,EAAA,CAAAX,EAAA,KAAA,CAAA,GAEhElB,EAAqB,CAAE4B,KAAM,QAASb,QAAOG,EAAAW,EAAA,AAAG,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAX,EAAAY,IAAA,EAAA,CAAA,EAAA,KAAA,IAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAGtDC,UAAS,SAAAC,CAAA,EAAgC,IAAAC,EAA7BnB,EAAOkB,EAAPlB,OAAO,CAAEoB,EAAYF,EAAZE,YAAY,CAAEC,EAAIH,EAAJG,IAAI,QACtC,AAAoB,MAAhBD,GAIGE,CAAAA,CAAO,CAAA,AAAgB,OAAhBH,CAAAA,EAACnB,EAAQuB,OAAO,AAAPA,GAAOJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBK,IAAI,CAAC,SAACC,CAAI,EAAA,OAAKA,EAAKjB,GAAG,GAAKa,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMb,GAAG,AAAHA,CAAG,EAAA,CACtE,EACAkB,MAAO,GACPC,MAAO,QAET"}