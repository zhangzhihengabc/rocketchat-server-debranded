)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/startup/oauth.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { OAuth } from 'meteor/oauth';\n\n// OAuth._retrieveCredentialSecret is a meteor method modified to also check the global localStorage\n// This was necessary because of the \"Forget User Session on Window Close\" setting.\n// The setting changes Meteor._localStorage to use the browser's session storage instead, but that doesn't happen on the Oauth's popup code.\n\nMeteor.startup(() => {\n\tconst meteorOAuthRetrieveCredentialSecret = OAuth._retrieveCredentialSecret;\n\tOAuth._retrieveCredentialSecret = (credentialToken: string): string | null => {\n\t\tlet secret = meteorOAuthRetrieveCredentialSecret.call(OAuth, credentialToken);\n\t\tif (!secret) {\n\t\t\tconst localStorageKey = `${OAuth._storageTokenPrefix}${credentialToken}`;\n\t\t\tsecret = localStorage.getItem(localStorageKey);\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t}\n\n\t\treturn secret;\n\t};\n});\n",null],"names":["Meteor","OAuth","module","link","startup","meteorOAuthRetrieveCredentialSecret","_retrieveCredentialSecret","credentialToken","secret","call","localStorageKey","_storageTokenPrefix","localStorage","getItem","removeItem"],"mappings":"2BAAAA,EAAuCC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAH,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,eAAAA,CAAAD,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOvCD,EAAOI,OAAO,CAAC,WACd,IAAMC,EAAsCJ,EAAMK,yBAAyB,AAC3EL,CAAAA,EAAMK,yBAAyB,CAAG,SAACC,CAAuB,EACzD,IAAIC,EAASH,EAAoCI,IAAI,CAACR,EAAOM,GAC7D,GAAI,CAACC,EAAQ,CACZ,IAAME,EAAe,GAAMT,EAAMU,mBAAmB,CAAGJ,EACvDC,EAASI,aAAaC,OAAO,CAACH,GAC9BE,aAAaE,UAAU,CAACJ,GAGzB,OAAOF,CACR,CACD"}