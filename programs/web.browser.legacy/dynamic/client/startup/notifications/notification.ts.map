)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/startup/notifications/notification.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomSounds } from '../../../app/custom-sounds/client/lib/CustomSounds';\nimport { Users } from '../../../app/models/client';\nimport { getUserPreference } from '../../../app/utils/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst uid = Meteor.userId();\n\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = Users.findOne(uid, {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t\t'settings.preferences.notificationsSoundVolume': 1,\n\t\t\t},\n\t\t});\n\t\tconst newRoomNotification = getUserPreference<string>(user, 'newRoomNotification');\n\t\tconst audioVolume = getUserPreference(user, 'notificationsSoundVolume', 100);\n\n\t\tif (!newRoomNotification) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((Session.get('newRoomSound') || []).length > 0) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (newRoomNotification !== 'none') {\n\t\t\t\t\tCustomSounds.play(newRoomNotification, {\n\t\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tCustomSounds.pause(newRoomNotification);\n\t\t}\n\t});\n});\n",null],"names":["Meteor","Session","Tracker","CustomSounds","Users","getUserPreference","module","link","startup","autorun","uid","userId","user","findOne","fields","newRoomNotification","audioVolume","get","length","setTimeout","play","volume","Number","toPrecision","pause"],"mappings":"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAP,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAL,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAJ,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,qDAAAA,CAAAH,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAF,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAD,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAQvCL,EAAOQ,OAAO,CAAC,WACdN,EAAQO,OAAO,CAAC,WACf,IAAMC,EAAMV,EAAOW,MAAM,GAEzB,GAAKD,GAIL,IAAME,EAAOR,EAAMS,OAAO,CAACH,EAAK,CAC/BI,OAAQ,CACP,2CAA4C,EAC5C,gDAAiD,KAG7CC,EAAsBV,EAA0BO,EAAM,uBACtDI,EAAcX,EAAkBO,EAAM,2BAA4B,KAEnEG,IAID,AAACd,CAAAA,EAAQgB,GAAG,CAAC,iBAAmB,EAAE,AAAF,EAAIC,MAAM,CAAG,EAChDC,WAAW,WACkB,SAAxBJ,GACHZ,EAAaiB,IAAI,CAACL,EAAqB,CACtCM,OAAQC,OAAO,AAACN,CAAAA,EAAc,GAAA,EAAKO,WAAW,CAAC,KAGlD,EAAG,GAEHpB,EAAaqB,KAAK,CAACT,IAErB,EACD"}