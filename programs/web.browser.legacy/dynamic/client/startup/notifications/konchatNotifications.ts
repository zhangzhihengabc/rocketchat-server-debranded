function module(n,e,t){t.link("@babel/runtime/regenerator",{default:function(n){o=n}},0),t.link("meteor/meteor",{Meteor:function(n){i=n}},0),t.link("meteor/tracker",{Tracker:function(n){a=n}},1),t.link("react",{lazy:function(n){r=n}},2),t.link("../../../app/models/client",{CachedChatSubscription:function(n){u=n}},3),t.link("../../../app/notifications/client",{Notifications:function(n){c=n}},4),t.link("../../../app/settings/client",{settings:function(n){s=n}},5),t.link("../../../app/ui/client/lib/KonchatNotification",{KonchatNotification:function(n){l=n}},6),t.link("../../../app/utils/client",{getUserPreference:function(n){d=n}},7),t.link("../../lib/RoomManager",{RoomManager:function(n){f=n}},8),t.link("../../lib/imperativeModal",{imperativeModal:function(n){p=n}},9),t.link("../../lib/utils/fireGlobalEvent",{fireGlobalEvent:function(n){m=n}},10),t.link("../../lib/utils/isLayoutEmbedded",{isLayoutEmbedded:function(n){k=n}},11),t.link("../../providers/RouterProvider",{router:function(n){b=n}},12);var o,i,a,r,u,c,s,l,d,f,p,m,k,b,v=r(function(){return t.dynamicImport("../../views/outlookCalendar/OutlookCalendarEventModal")}),g=function(n){var e;return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!(e=i.user())||"busy"===e.status)){t.next=3;break}return t.abrupt("return");case 3:b.getRouteParameters().name&&b.getRouteParameters().name===n.name||n.ls||!0!==n.alert||l.newRoom(n.rid);case 4:case"end":return t.stop()}},null,null,null,Promise)};i.startup(function(){var n=function(n){var e,t;return o.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!(e=i.user())||"busy"===e.status)){o.next=3;break}return o.abrupt("return");case 3:t=d(i.userId(),"desktopNotificationRequireInteraction"),new Notification(n.title,{body:n.text,tag:n.payload._id,silent:!0,requireInteraction:t}).onclick=function(){this.close(),window.focus(),p.open({component:v,props:{id:n.payload._id,onClose:p.close,onCancel:p.close}})};case 6:case"end":return o.stop()}},null,null,null,Promise)};a.autorun(function(){if(!i.userId()||!s.get("Outlook_Calendar_Enabled"))return c.unUser("calendar");c.onUser("calendar",n)}),a.autorun(function(){i.userId()&&(c.onUser("notification",function(n){var e,t,o,a,r=["channel","group","direct"].includes(b.getRouteName())?f.opened:void 0,u=document.hasFocus(),c=r===n.payload.rid;m("notification",{notification:n,fromOpenedRoom:c,hasFocus:u}),k()?!u&&c&&l.showDesktop(n):u&&c||l.showDesktop(n),e=n.payload.rid,t=document.hasFocus(),o=f.opened===e,a=d(i.userId(),"muteFocusedConversations"),k()?!t&&o&&l.newMessage(e):t&&o&&a||l.newMessage(e)}),u.on("changed",function(n){g(n)}),c.onUser("subscriptions-changed",function(n,e){"removed"!==n&&g(e)}))})})}
//# sourceMappingURL=/dynamic/client/startup/notifications/49ad74612bf10f19262ed628cf079bbe0073b990.map
