function module(n,i,e){var t,o,r,u,c;e.link("@babel/runtime/helpers/objectSpread2",{default:function(n){t=n}},0),e.link("meteor/meteor",{Meteor:function(n){o=n}},0),e.link("../../app/models/client",{ChatMessage:function(n){r=n}},1),e.link("../../app/notifications/client",{Notifications:function(n){u=n}},2),e.link("../../app/ui-cached-collection/client",{CachedCollectionManager:function(n){c=n}},3),o.startup(function(){Tracker.autorun(function(){o.userId()&&u.onUser("message",function(n){return n.u=n.u||{username:"rocket.cat"},n.private=!0,r.upsert({_id:n._id},n)})}),c.onLogin(function(){u.onUser("subscriptions-changed",function(n,i){r.update(t({rid:i.rid},"ignored"in i&&i.ignored?{"u._id":{$nin:i.ignored}}:{ignored:{$exists:!0}}),{$unset:{ignored:!0}},{multi:!0}),"ignored"in i&&i.ignored&&r.update({rid:i.rid,t:{$ne:"command"},"u._id":{$in:i.ignored}},{$set:{ignored:!0}},{multi:!0})})})})}
//# sourceMappingURL=/dynamic/client/startup/0a5b37526a4fb20e99c113925c45f850507d76b8.map
