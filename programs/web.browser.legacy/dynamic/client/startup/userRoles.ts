function module(e,t,i){var n,o,r,u,l,a,d,s;i.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(e){n=e}},0),i.link("meteor/meteor",{Meteor:function(e){o=e}},0),i.link("meteor/tracker",{Tracker:function(e){r=e}},1),i.link("../../app/models/client",{UserRoles:function(e){u=e},ChatMessage:function(e){l=e}},2),i.link("../../app/notifications/client",{Notifications:function(e){a=e}},3),i.link("../../app/utils/client/lib/SDKClient",{sdk:function(e){d=e}},4),i.link("../lib/toast",{dispatchToastMessage:function(e){s=e}},5),o.startup(function(){r.autorun(function(){o.userId()&&(d.call("getUserRoles").then(function(e){for(var t,i=n(e);!(t=i()).done;){var o=t.value;u.upsert({_id:o._id},o)}}).catch(function(e){s({type:"error",message:e})}),a.onLogged("roles-change",function(e){if("added"===e.type){if(!e.scope){if(!e.u)return;u.upsert({_id:e.u._id},{$addToSet:{roles:e._id},$set:{username:e.u.username}}),l.update({"u._id":e.u._id},{$addToSet:{roles:e._id}},{multi:!0})}return}if("removed"===e.type){if(!e.scope){if(!e.u)return;u.update({_id:e.u._id},{$pull:{roles:e._id}}),l.update({"u._id":e.u._id},{$pull:{roles:e._id}},{multi:!0})}return}"changed"===e.type&&l.update({roles:e._id},{$inc:{rerender:1}},{multi:!0})}))})})}
//# sourceMappingURL=/dynamic/client/startup/f58f3e4fce368cae540e4993ca358e23353f9872.map
