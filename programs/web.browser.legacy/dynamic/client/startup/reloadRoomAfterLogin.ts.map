)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/startup/reloadRoomAfterLogin.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { LegacyRoomManager } from '../../app/ui-utils/client';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { router } from '../providers/RouterProvider';\n\nMeteor.startup(() => {\n\t// Reload rooms after login\n\tlet currentUsername: string | undefined = undefined;\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (currentUsername === undefined && (user ? user.username : undefined)) {\n\t\t\tcurrentUsername = user?.username;\n\t\t\tLegacyRoomManager.closeAllRooms();\n\t\t\t// Reload only if the current route is a channel route\n\t\t\tconst routeName = router.getRouteName();\n\t\t\tif (!routeName) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst roomType = roomCoordinator.getRouteNameIdentifier(routeName);\n\t\t\tif (roomType) {\n\t\t\t\trouter; // TODO: fix this\n\t\t\t\t// router.navigate(0);\n\t\t\t}\n\t\t}\n\t});\n});\n",null],"names":["Meteor","Tracker","LegacyRoomManager","roomCoordinator","router","module","link","startup","currentUsername","undefined","autorun","user","username","closeAllRooms","routeName","getRouteName","getRouteNameIdentifier"],"mappings":"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAN,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAJ,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAH,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAF,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAD,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOvCJ,EAAOO,OAAO,CAAC,WAEd,IAAIC,EAAsCC,KAAAA,EAC1CR,EAAQS,OAAO,CAAC,WACf,IAAMC,EAAOX,EAAOW,IAAI,GACxB,GAAIH,AAAoBC,KAAAA,IAApBD,GAAkCG,CAAAA,EAAOA,EAAKC,QAAQ,CAAGH,KAAAA,CAAAA,EAAY,CACxED,EAAkBG,MAAAA,EAAI,KAAA,EAAJA,EAAMC,QAAQ,CAChCV,EAAkBW,aAAa,GAE/B,IAAMC,EAAYV,EAAOW,YAAY,GACrC,GAAI,CAACD,EACJ,OAEgBX,EAAgBa,sBAAsB,CAACF,GAM1D,EACD"}