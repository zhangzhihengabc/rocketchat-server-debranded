)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/minimongo/lookups.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isEmptyArray } from './comparisons';\n\nconst isNullDocument = (doc: unknown): doc is undefined | null => doc === undefined || doc === null;\n\nconst isRecordDocument = (doc: unknown): doc is Record<string, unknown> =>\n\tdoc !== undefined && doc !== null && (typeof doc === 'object' || typeof doc === 'function');\n\nconst isIndexedByNumber = <T>(value: unknown, isIndexedByNumber: boolean): value is T[] => Array.isArray(value) || isIndexedByNumber;\n\nexport const createLookupFunction = <T>(key: string): ((doc: T) => unknown[]) => {\n\tconst [first, rest] = key.split(/\\.(.+)/);\n\n\tif (!rest) {\n\t\treturn <T>(doc: T): unknown[] => {\n\t\t\tif (isNullDocument(doc) || !isRecordDocument(doc)) {\n\t\t\t\treturn [undefined];\n\t\t\t}\n\n\t\t\treturn [doc[first]];\n\t\t};\n\t}\n\n\tconst lookupRest = createLookupFunction(rest);\n\tconst nextIsNumeric = /^\\d+(\\.|$)/.test(rest);\n\n\treturn <T>(doc: T): unknown[] => {\n\t\tif (isNullDocument(doc) || !isRecordDocument(doc)) {\n\t\t\treturn [undefined];\n\t\t}\n\n\t\tconst firstLevel = doc[first];\n\n\t\tif (isEmptyArray(firstLevel)) {\n\t\t\treturn [undefined];\n\t\t}\n\n\t\tconst docs = isIndexedByNumber(firstLevel, nextIsNumeric) ? firstLevel : [firstLevel as T];\n\t\treturn Array.prototype.concat.apply([], docs.map(lookupRest));\n\t};\n};\n",null],"names":["module","link","default","_slicedToArray","_typeof","export","createLookupFunction","isEmptyArray","isNullDocument","doc","isRecordDocument","key","_key$split2","split","first","rest","undefined","lookupRest","nextIsNumeric","test","firstLevel","docs","isIndexedByNumber","Array","isArray","prototype","concat","apply","map"],"mappings":"uBAASA,EAAcC,IAAM,CAAA,uCAAgB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAA7CJ,EAAOK,MAAE,CAAA,CAAAC,qBAAoB,WAAgB,OAAAA,CAAA,CAAA,GAAAN,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAO,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAE7C,IAFAJ,EAA6CC,EAAAG,EAEvCC,EAAiB,SAACC,CAAY,EAAA,OAA8BA,MAAAA,CAAiC,EAE7FC,EAAmB,SAACD,CAAY,EAAA,OACrCA,MAAAA,GAAsCL,CAAAA,AAAe,WAAfA,EAAOK,IAAoB,AAAe,YAAf,OAAOA,CAAQ,CAAW,EAI/EH,EAAuB,SAAIK,CAAW,EAClD,IAAyCC,EAAAT,EAAnBQ,EAAIE,KAAK,CAAC,UAAS,GAAlCC,EAAKF,CAAA,CAAA,EAAA,CAAEG,EAAIH,CAAA,CAAA,EAAA,CAElB,GAAI,CAACG,EACJ,OAAO,SAAIN,CAAM,SAChB,AAAID,EAAeC,IAAQ,CAACC,EAAiBD,GACrC,CAACO,KAAAA,EAAU,CAGZ,CAACP,CAAG,CAACK,EAAM,CAAC,AACpB,EAGD,IAAMG,EAAaX,EAAqBS,GAClCG,EAAgB,aAAaC,IAAI,CAACJ,GAExC,OAAO,SAAIN,CAAM,EAChB,GAAID,EAAeC,IAAQ,CAACC,EAAiBD,GAC5C,MAAO,CAACO,KAAAA,EAAU,CAGnB,IAAMI,EAAaX,CAAG,CAACK,EAAM,CAE7B,GAAIP,EAAaa,GAChB,MAAO,CAACJ,KAAAA,EAAU,CAGnB,IAAMK,EAAOC,AA7B4EC,MAAMC,OAAO,CA6BvEJ,IAAYF,EAAiBE,EAAa,CAACA,EAAgB,CAC1F,OAAOG,MAAME,SAAS,CAACC,MAAM,CAACC,KAAK,CAAC,EAAE,CAAEN,EAAKO,GAAG,CAACX,GAClD,CACD"}