)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/actionLinks.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\n\nimport { fireGlobalEvent } from './utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from './utils/isLayoutEmbedded';\n\n// Action Links namespace creation.\nexport const actionLinks = {\n\tactions: new Map<string, (message: IMessage, params: string) => void>(),\n\tregister(name: string, fn: (message: IMessage, params: string) => void): void {\n\t\tactionLinks.actions.set(name, fn);\n\t},\n\trun(actionMethodId: string, message: IMessage): void {\n\t\tconst embedded = isLayoutEmbedded();\n\n\t\tif (embedded) {\n\t\t\tfireGlobalEvent('click-action-link', {\n\t\t\t\tactionlink: actionMethodId,\n\t\t\t\tvalue: message._id,\n\t\t\t\tmessage,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionLink = message.actionLinks?.find((action) => action.method_id === actionMethodId);\n\n\t\tif (!actionLink) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\n\t\t}\n\n\t\tif (!actionLinks.actions.has(actionLink.method_id)) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\n\t\t}\n\n\t\tconst fn = actionLinks.actions.get(actionLink.method_id);\n\t\tfn?.(message, actionLink.params);\n\t},\n};\n",null],"names":["module","export","actionLinks","Meteor","fireGlobalEvent","isLayoutEmbedded","actions","Map","register","name","fn","set","run","actionMethodId","message","actionlink","value","_id","_message$actionLinks","actionLink","find","action","method_id","has","Error","get","params"],"mappings":"uBACAA,EAAOC,MAAE,CAAA,CAAMC,YAAQ,WAAe,OAACA,CAAA,CAAA,GAAAF,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAG,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAI,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAK,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMhC,IANgCF,EAAAC,EAAAC,EAM1BH,EAAc,CAC1BI,QAAS,IAAIC,IACbC,SAAQ,SAACC,CAAY,CAAEC,CAA+C,EACrER,EAAYI,OAAO,CAACK,GAAG,CAACF,EAAMC,EAC/B,EACAE,IAAG,SAACC,CAAsB,CAAEC,CAAiB,EAG5C,GAFiBT,IAEH,CACbD,EAAgB,oBAAqB,CACpCW,WAAYF,EACZG,MAAOF,EAAQG,GAAG,CAClBH,QAAAA,IAED,OAGD,IAZ4CI,EAYtCC,EAAU,AAAsB,OAAtBD,CAAAA,EAAGJ,EAAQZ,WAAW,AAAXA,GAAWgB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBE,IAAI,CAAC,SAACC,CAAM,EAAA,OAAKA,EAAOC,SAAS,GAAKT,CAAc,GAE5F,GAAI,CAACM,GAID,CAACjB,EAAYI,OAAO,CAACiB,GAAG,CAACJ,EAAWG,SAAS,EAHhD,MAAM,IAAInB,EAAOqB,KAAK,CAAC,2BAA4B,uBAOpD,IAAMd,EAAKR,EAAYI,OAAO,CAACmB,GAAG,CAACN,EAAWG,SAAS,CACvDZ,OAAAA,GAAAA,EAAKI,EAASK,EAAWO,MAAM,CAChC"}