)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/utils/getAvatarAsPng.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\n\nimport { getUserAvatarURL } from '../../../app/utils/client/getUserAvatarURL';\n\nexport const getAvatarAsPng = (username: IUser['username'], cb: (dataURL: string) => void): (() => void) => {\n\tconst image = new Image();\n\n\tconst onLoad = (): void => {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tconst context = canvas.getContext('2d');\n\n\t\tif (!context) {\n\t\t\tthrow new Error('failed to get canvas context');\n\t\t}\n\n\t\tcontext.drawImage(image, 0, 0);\n\t\ttry {\n\t\t\treturn cb(canvas.toDataURL('image/png'));\n\t\t} catch (e) {\n\t\t\treturn cb('');\n\t\t}\n\t};\n\n\tconst onError = (): void => cb('');\n\n\timage.onload = onLoad;\n\timage.onerror = onError;\n\timage.src = getUserAvatarURL(username || '') as string;\n\n\treturn onError;\n};\n",null],"names":["module","export","getAvatarAsPng","getUserAvatarURL","username","cb","image","Image","onError","onload","canvas","document","createElement","width","height","context","getContext","Error","drawImage","toDataURL","e","onerror","src"],"mappings":"uBAEAA,EAAOC,MAAE,CAAA,CAAAC,eAAkB,WAAM,OAAAA,CAAA,CAAA,GAA6CF,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAG,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAEvE,IAF0BA,EAEpBD,EAAiB,SAACE,CAA2B,CAAEC,CAA6B,EACxF,IAAMC,EAAQ,IAAIC,MAoBZC,EAAU,WAAA,OAAYH,EAAG,GAAG,EAMlC,OAJAC,EAAMG,MAAM,CApBG,WACd,IAAMC,EAASC,SAASC,aAAa,CAAC,SACtCF,CAAAA,EAAOG,KAAK,CAAGP,EAAMO,KAAK,CAC1BH,EAAOI,MAAM,CAAGR,EAAMQ,MAAM,CAC5B,IAAMC,EAAUL,EAAOM,UAAU,CAAC,MAElC,GAAI,CAACD,EACJ,MAAM,AAAIE,MAAM,gCAGjBF,EAAQG,SAAS,CAACZ,EAAO,EAAG,GAC5B,GAAI,CACH,OAAOD,EAAGK,EAAOS,SAAS,CAAC,cAC1B,MAAOC,EAAG,CACX,OAAOf,EAAG,IAEZ,EAKAC,EAAMe,OAAO,CAAGb,EAChBF,EAAMgB,GAAG,CAAGnB,EAAiBC,GAAY,IAElCI,CACR"}