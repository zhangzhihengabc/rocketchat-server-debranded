function module(e,t,i){i.link("@babel/runtime/regenerator",{default:function(e){n=e}},0),i.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(e){r=e}},1),i.link("@babel/runtime/helpers/createClass",{default:function(e){s=e}},2),i.link("@babel/runtime/helpers/assertThisInitialized",{default:function(e){a=e}},3),i.link("@babel/runtime/helpers/inheritsLoose",{default:function(e){u=e}},4),i.link("@babel/runtime/helpers/classPrivateFieldLooseBase",{default:function(e){o=e}},5),i.link("@babel/runtime/helpers/classPrivateFieldLooseKey",{default:function(e){l=e}},6),i.export({RecordList:function(){return y}}),i.link("@rocket.chat/emitter",{Emitter:function(e){h=e}},0),i.link("../asyncState",{AsyncStatePhase:function(e){c=e}},1);var n,r,s,a,u,o,l,h,c,d=l("hasChanges"),f=l("index"),p=l("phase"),m=l("items"),v=l("itemCount"),b=l("pedingMutation"),y=function(e){function t(){for(var t,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return Object.defineProperty(a(t=e.call.apply(e,[this].concat(n))||this),d,{writable:!0,value:!1}),Object.defineProperty(a(t),f,{writable:!0,value:new Map}),Object.defineProperty(a(t),p,{writable:!0,value:c.LOADING}),Object.defineProperty(a(t),m,{writable:!0,value:void 0}),Object.defineProperty(a(t),v,{writable:!0,value:void 0}),Object.defineProperty(a(t),b,{writable:!0,value:Promise.resolve()}),t}u(t,e);var i=t.prototype;return i.filter=function(e){return!0},i.compare=function(e,t){var i,n,r="string"==typeof e._updatedAt?new Date(e._updatedAt):e._updatedAt,s="string"==typeof t._updatedAt?new Date(t._updatedAt):t._updatedAt;return(null!==(i=null==s?void 0:s.getTime())&&void 0!==i?i:-1)-(null!==(n=null==r?void 0:r.getTime())&&void 0!==n?n:-1)},i.insert=function(e){o(this,f)[f].set(e._id,e),this.emit(e._id+"/inserted",e),"number"==typeof o(this,v)[v]&&o(this,v)[v]++,o(this,d)[d]=!0},i.update=function(e){o(this,f)[f].set(e._id,e),this.emit(e._id+"/updated",e),o(this,d)[d]=!0},i.delete=function(e){o(this,f)[f].delete(e),this.emit(e+"/deleted"),"number"==typeof o(this,v)[v]&&o(this,v)[v]--,o(this,d)[d]=!0},i.push=function(e){var t=o(this,f)[f].has(e._id),i=this.filter(e);if(t&&!i){this.delete(e._id);return}if(t&&i){this.update(e);return}!t&&i&&this.insert(e)},i.mutate=function(e){var t;return n.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o(this,p)[p]===c.RESOLVED&&(o(this,p)[p]=c.UPDATING,this.emit("mutating")),o(this,b)[b]=o(this,b)[b].then(e),i.next=5,n.awrap(o(this,b)[b]);case 5:i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),this.emit("errored",i.t0);case 10:return i.prev=10,t=o(this,d)[d],o(this,p)[p]=c.RESOLVED,t&&(o(this,m)[m]=void 0,o(this,d)[d]=!1),this.emit("mutated",t),i.finish(10);case 16:case"end":return i.stop()}},null,this,[[0,7,10,16]],Promise)},i.batchHandle=function(e){var t=this;return this.mutate(function(){var i,s,a,u;return n.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,n.awrap(e());case 2:if((i=l.sent).items)for(s=r(i.items);!(a=s()).done;)u=a.value,t.push(u);i.itemCount&&(o(t,v)[v]=i.itemCount,o(t,d)[d]=!0);case 5:case"end":return l.stop()}},null,null,null,Promise)})},i.prune=function(e){var t=this;return this.mutate(function(){for(var i,n=r(o(t,f)[f].values());!(i=n()).done;){var s=i.value;e(s)&&t.delete(s._id)}})},i.handle=function(e){var t=this;return this.mutate(function(){t.push(e)})},i.remove=function(e){var t=this;return this.mutate(function(){o(t,f)[f].has(e)&&t.delete(e)})},i.clear=function(){var e=this;return this.mutate(function(){0!==o(e,f)[f].size&&(o(e,f)[f].clear(),o(e,m)[m]=void 0,o(e,v)[v]=void 0,o(e,d)[d]=!0,e.emit("cleared"))})},s(t,[{key:"phase",get:function(){return o(this,p)[p]}},{key:"items",get:function(){return o(this,m)[m]||(o(this,m)[m]=Array.from(o(this,f)[f].values()).sort(this.compare)),o(this,m)[m]}},{key:"itemCount",get:function(){var e;return null!==(e=o(this,v)[v])&&void 0!==e?e:o(this,f)[f].size}}]),t}(h)}
//# sourceMappingURL=/dynamic/client/lib/lists/056f84b0749335c22b343f43b2cf20afa8c8e4a4.map
