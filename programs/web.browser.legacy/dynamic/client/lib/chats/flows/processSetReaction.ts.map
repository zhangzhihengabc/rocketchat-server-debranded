)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/chats/flows/processSetReaction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\n\nimport { emoji } from '../../../../app/emoji/client';\nimport { callWithErrorHandling } from '../../utils/callWithErrorHandling';\nimport type { ChatAPI } from '../ChatAPI';\n\nexport const processSetReaction = async (chat: ChatAPI, { msg }: Pick<IMessage, 'msg'>): Promise<boolean> => {\n\tconst match = msg.trim().match(/^\\+(:.*?:)$/m);\n\tif (!match) {\n\t\treturn false;\n\t}\n\n\tconst [, reaction] = match;\n\tif (!emoji.list[reaction]) {\n\t\treturn false;\n\t}\n\n\tconst lastMessage = await chat.data.findLastMessage();\n\n\tif (!lastMessage) {\n\t\treturn false;\n\t}\n\n\tawait callWithErrorHandling('setReaction', reaction, lastMessage._id);\n\treturn true;\n};\n",null],"names":["module","default","_regeneratorRuntime","_slicedToArray","export","processSetReaction","emoji","callWithErrorHandling","chat","_ref","match","reaction","lastMessage","async","_context","prev","next","msg","trim","abrupt","_match","list","awrap","data","findLastMessage","sent","_id","stop","Promise"],"mappings":"uBAEsBA,EAAAA,IAAAA,CAAAA,6BAA+B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAF,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAArDH,EAAOI,MAAE,CAAK,CAAAC,mBAAQ,WAAA,OAA8BA,CAAC,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAM,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAO,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAI9C,IAJPL,EAAqDC,EAAAG,EAAAC,EAIxCF,EAAqB,SAAOG,CAAa,CAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAV,EAAAW,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACP,GAAxCN,EAAQO,AAD8CR,EAAHQ,GAAG,CAC1CC,IAAI,GAAGR,KAAK,CAAC,gBACrB,CAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAK,MAAA,CAAA,SACF,CAAA,EAAK,MAAA,EAGI,GAARR,EAAQS,AAHJjB,EAGQO,EAAK,EAAT,CAAA,EAAA,CACZJ,EAAMe,IAAI,CAACV,EAAS,CAAA,CAAAG,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAK,MAAA,CAAA,SACjB,CAAA,EAAK,MAAA,EAAA,OAAAL,EAAAE,IAAA,CAAA,EAAAd,EAAAoB,KAAA,CAGad,EAAKe,IAAI,CAACC,eAAe,GAAE,MAAA,EAApC,GAAXZ,EAAWE,EAAAW,IAAA,CAED,CAAAX,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAK,MAAA,CAAA,SACR,CAAA,EAAK,MAAA,GAAA,OAAAL,EAAAE,IAAA,CAAA,GAAAd,EAAAoB,KAAA,CAGPf,EAAsB,cAAeI,EAAUC,EAAYc,GAAG,EAAC,MAAA,GAAA,OAAAZ,EAAAK,MAAA,CAAA,SAC9D,CAAA,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAL,EAAAa,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA"}