)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/chats/flows/processMessageEditing.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\nimport { dispatchToastMessage } from '../../toast';\nimport type { ChatAPI } from '../ChatAPI';\n\nexport const processMessageEditing = async (\n\tchat: ChatAPI,\n\tmessage: Pick<IMessage, '_id' | 't'> & Partial<Omit<IMessage, '_id' | 't'>>,\n\tpreviewUrls?: string[],\n): Promise<boolean> => {\n\tif (!chat.currentEditing) {\n\t\treturn false;\n\t}\n\n\tif (MessageTypes.isSystemMessage(message)) {\n\t\treturn false;\n\t}\n\n\tif (!message.msg && !message.attachments?.length) {\n\t\treturn false;\n\t}\n\n\ttry {\n\t\tawait chat.data.updateMessage({ ...message, _id: chat.currentEditing.mid }, previewUrls);\n\t} catch (error) {\n\t\tdispatchToastMessage({ type: 'error', message: error });\n\t}\n\n\tchat.currentEditing.stop();\n\n\treturn true;\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","export","processMessageEditing","MessageTypes","dispatchToastMessage","chat","message","previewUrls","_message$attachments","async","_context","prev","next","currentEditing","abrupt","isSystemMessage","msg","attachments","length","awrap","data","updateMessage","_id","mid","t0","type","stop","Promise"],"mappings":"uBAEuBA,EAAMC,IAAA,CAAA,6BAAkC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAA/DJ,EAAOK,MAAE,CAAA,CAAAC,sBAAoB,WAAA,OAAAA,CAAkC,CAAA,GAAAN,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAO,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,cAAAA,CAAAQ,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAIxD,IAJPL,EAA+DC,EAAAG,EAAAC,EAIlDF,EAAwB,SACpCG,CAAa,CACbC,CAA2E,CAC3EC,CAAsB,EAAA,IAAAC,EAAA,OAAAT,EAAAU,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GAEjBP,EAAKQ,cAAc,CAAA,CAAAH,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SAChB,CAAA,EAAK,MAAA,EAAA,GAAA,CAGTX,EAAaY,eAAe,CAACT,GAAQ,CAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SACjC,CAAA,EAAK,MAAA,EAAA,GAAA,CAGT,CAAA,CAACR,EAAQU,GAAG,EAAI,CAAA,CAAA,AAAoB,OAApBR,CAAAA,EAACF,EAAQW,WAAW,AAAXA,GAAWT,AAAA,KAAA,IAAAA,GAAnBA,EAAqBU,MAAM,AAANA,CAAM,EAAA,CAAAR,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SACxC,CAAA,EAAK,MAAA,EAAA,OAAAJ,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAb,EAAAoB,KAAA,CAINd,EAAKe,IAAI,CAACC,aAAa,CAAArB,EAAAA,EAAA,CAAA,EAAMM,GAAO,CAAA,EAAA,CAAEgB,IAAKjB,EAAKQ,cAAc,CAACU,GAAAA,AAAG,GAAIhB,GAAY,MAAA,EAAAG,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAc,EAAA,CAAAd,EAAA,KAAA,CAAA,GAExFN,EAAqB,CAAEqB,KAAM,QAASnB,QAAOI,EAAAc,EAAA,AAAO,EAAI,MAAA,GAG9B,OAA3BnB,EAAKQ,cAAc,CAACa,IAAI,GAAGhB,EAAAI,MAAA,CAAA,SAEpB,CAAA,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAJ,EAAAgB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA"}