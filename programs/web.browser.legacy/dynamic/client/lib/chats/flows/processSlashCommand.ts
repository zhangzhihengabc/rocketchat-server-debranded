function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},1),t.export({processSlashCommand:function(){return f}}),t.link("@rocket.chat/random",{Random:function(e){s=e}},0),t.link("@rocket.chat/string-helpers",{escapeHTML:function(e){i=e}},1),t.link("../../../../app/authorization/client",{hasAtLeastOnePermission:function(e){c=e}},2),t.link("../../../../app/settings/client",{settings:function(e){o=e}},3),t.link("../../../../app/utils/client",{slashCommands:function(e){u=e}},4),t.link("../../../../app/utils/client/lib/SDKClient",{sdk:function(e){m=e}},5),t.link("../../../../app/utils/lib/i18n",{t:function(e){l=e}},6);var a,r,s,i,c,o,u,m,l,p=function(e){var n=e.match(/^\/([^\s]+)(.*)/);if(n){var t=r(n,3),a=t[1],s=t[2],i=u.commands[a];return i?{command:i,params:s}:{command:a,params:s}}},d=function(e,n){return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return console.error(n),t.next=3,a.awrap(e.data.pushEphemeralMessage({_id:s.id(),ts:new Date,msg:n,u:{_id:"rocket.cat",username:"rocket.cat",name:"Rocket.Cat"},private:!0,_updatedAt:new Date}));case 3:case"end":return t.stop()}},null,null,null,Promise)},f=function(e,n){var t,r,s,u,f,g,h,k,_,b,x,w;return a.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(t=p(n.msg)){v.next=3;break}return v.abrupt("return",!1);case 3:if(r=t.command,s=t.params,"string"!=typeof r){v.next=10;break}if(o.get("Message_AllowUnrecognizedSlashCommand")){v.next=9;break}return v.next=8,a.awrap(d(e,l("No_such_command",{command:i(r)})));case 8:case 14:return v.abrupt("return",!0);case 9:return v.abrupt("return",!1);case 10:if(u=r.permission,f=r.clientOnly,g=r.callback,h=r.result,k=r.appId,_=r.command,!(u&&!c(u,n.rid))){v.next=15;break}return v.next=14,a.awrap(d(e,l("You_do_not_have_permission_to_execute_this_command",{command:i(_)})));case 15:if(!(f&&e.uid)){v.next=18;break}return null==g||g({command:_,message:n,params:s,userId:e.uid}),v.abrupt("return",!0);case 18:return v.next=20,a.awrap(m.rest.post("/v1/statistics.telemetry",{params:[{eventName:"slashCommandsStats",timestamp:Date.now(),command:_}]}));case 20:return b=e.ActionManager.generateTriggerId(k),x={cmd:_,params:s,msg:n,userId:e.uid},v.prev=22,k&&e.ActionManager.notifyBusy(),v.next=26,a.awrap(m.call("slashCommand",{cmd:_,params:s,msg:n,triggerId:b}));case 26:w=v.sent,null==h||h(void 0,w,x),v.next=35;break;case 30:return v.prev=30,v.t0=v.catch(22),v.next=34,a.awrap(d(e,l("Something_went_wrong_while_executing_command",{command:_})));case 34:null==h||h(v.t0,void 0,x);case 35:return k&&e.ActionManager.notifyIdle(),v.abrupt("return",!0);case 37:case"end":return v.stop()}},null,null,[[22,30]],Promise)}}
//# sourceMappingURL=/dynamic/client/lib/chats/flows/59c75708358563fee73d7979adb236b19bfedea3.map
