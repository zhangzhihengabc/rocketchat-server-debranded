function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){o=e}},0),t.export({processTooLongMessage:function(){return u}}),t.link("../../../../app/settings/client",{settings:function(e){r=e}},0),t.link("../../../../app/utils/lib/i18n",{t:function(e){a=e}},1),t.link("../../../components/GenericModal",{default:function(e){s=e}},2),t.link("../../imperativeModal",{imperativeModal:function(e){i=e}},3),t.link("../../toast",{dispatchToastMessage:function(e){l=e}},4);var o,r,a,s,i,l,u=function(e,n){var t,u,c,p,d;return o.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=n.msg,u=r.get("Message_MaxAllowedSize"),!(t.length<=u)){f.next=4;break}return f.abrupt("return",!1);case 4:if(c=r.get("FileUpload_Enabled"),p=r.get("Message_AllowConvertLongMessagesToAttachment"),!(e.currentEditing||!c||!p)){f.next=10;break}return l({type:"error",message:Error(a("Message_too_long"))}),null===(d=e.composer)||void 0===d||d.setText(t),f.abrupt("return",!0);case 10:return f.next=12,o.awrap(new Promise(function(n){var r=function r(){var r,a,s,l,u,c;return o.async(function p(p){for(;;)switch(p.prev=p.next){case 0:return s="text/plain",l=new Blob([t],{type:s}),u=(null!==(r=null===(a=Meteor.user())||void 0===a?void 0:a.username)&&void 0!==r?r:"anonymous")+" - "+new Date+".txt",c=new File([l],u,{type:s,lastModified:Date.now()}),i.close(),p.next=7,o.awrap(e.flows.uploadFiles([c]));case 7:n();case 8:case"end":return p.stop()}},null,null,null,Promise)},l=function(){var o;null===(o=e.composer)||void 0===o||o.setText(t),i.close(),n()};i.open({component:s,props:{title:a("Message_too_long"),children:a("Send_it_as_attachment_instead_question"),onConfirm:r,onClose:l,onCancel:l,variant:"warning"}})}));case 12:return f.abrupt("return",!0);case 13:case"end":return f.stop()}},null,null,null,Promise)}}
//# sourceMappingURL=/dynamic/client/lib/chats/flows/614eb73da623b03b659d12fa9472b997b7cbc222.map
