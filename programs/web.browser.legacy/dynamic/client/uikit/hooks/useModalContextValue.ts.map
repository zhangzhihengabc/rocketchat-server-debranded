)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/uikit/hooks/useModalContextValue.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UiKit } from '@rocket.chat/core-typings';\nimport { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport type { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\nimport type { Dispatch } from 'react';\nimport { useMemo, type ContextType } from 'react';\n\nimport { useUiKitActionManager } from './useUiKitActionManager';\n\ntype UseModalContextValueParams = {\n\tview: UiKit.ModalView;\n\tvalues: {\n\t\t[actionId: string]: {\n\t\t\tvalue: unknown;\n\t\t\tblockId?: string | undefined;\n\t\t};\n\t};\n\tupdateValues: Dispatch<{\n\t\tactionId: string;\n\t\tpayload: {\n\t\t\tvalue: unknown;\n\t\t\tblockId?: string;\n\t\t};\n\t}>;\n};\n\ntype UseModalContextValueReturn = ContextType<typeof UiKitContext>;\n\nexport const useModalContextValue = ({ view, values, updateValues }: UseModalContextValueParams): UseModalContextValueReturn => {\n\tconst actionManager = useUiKitActionManager();\n\n\tconst emitInteraction = useMemo(() => actionManager.emitInteraction.bind(actionManager), [actionManager]);\n\tconst debouncedEmitInteraction = useDebouncedCallback(emitInteraction, 700);\n\n\treturn {\n\t\taction: async ({ actionId, viewId, appId, dispatchActionConfig, blockId, value }) => {\n\t\t\tif (!appId || !viewId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst emit = dispatchActionConfig?.includes('on_character_entered') ? debouncedEmitInteraction : emitInteraction;\n\n\t\t\tawait emit(appId, {\n\t\t\t\ttype: 'blockAction',\n\t\t\t\tactionId,\n\t\t\t\tcontainer: {\n\t\t\t\t\ttype: 'view',\n\t\t\t\t\tid: viewId,\n\t\t\t\t},\n\t\t\t\tpayload: {\n\t\t\t\t\tblockId,\n\t\t\t\t\tvalue,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tupdateState: ({ actionId, value, /* ,appId, */ blockId = 'default' }) => {\n\t\t\tupdateValues({\n\t\t\t\tactionId,\n\t\t\t\tpayload: {\n\t\t\t\t\tblockId,\n\t\t\t\t\tvalue,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t...view,\n\t\tvalues,\n\t\tviewId: view.id,\n\t};\n};\n",null],"names":["module","link","default","v","_regeneratorRuntime","_objectSpread","export","useModalContextValue","useDebouncedCallback","useMemo","useUiKitActionManager","_ref","view","values","updateValues","actionManager","emitInteraction","bind","debouncedEmitInteraction","action","_ref2","actionId","viewId","appId","dispatchActionConfig","blockId","value","emit","async","_context","prev","next","abrupt","includes","awrap","type","container","id","payload","stop","Promise","updateState","_ref3","_ref3$blockId"],"mappings":"uBACSA,EAAsBC,IAAAA,CAAAA,6BAAM,CAA6BC,QAAC,SAAAC,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAG,EAAAA,CAAA,CAAA,EAAA,GAAnEL,EAAOM,MAAE,CAAA,CAAAC,qBAAsB,WAAM,OAAAA,CAA8B,CAAA,GAAAP,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAQ,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,QAAAA,CAAAS,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAU,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GA0B5D,IA1BPN,EAAmEC,EAAAG,EAAAC,EAAAC,EA0BtDH,EAAuB,SAAAI,CAAA,EAA2F,IAAxFC,EAAID,EAAJC,IAAI,CAAEC,EAAMF,EAANE,MAAM,CAAEC,EAAYH,EAAZG,YAAY,CAC1DC,EAAgBL,IAEhBM,EAAkBP,EAAQ,WAAA,OAAMM,EAAcC,eAAe,CAACC,IAAI,CAACF,EAAc,EAAE,CAACA,EAAc,EAClGG,EAA2BV,EAAqBQ,EAAiB,KAEvE,OAAAX,EAAAA,EAAA,CACCc,OAAQ,SAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAvB,EAAAwB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAsE,GAA7DV,EAAQD,EAARC,QAAQ,CAAEC,EAAMF,EAANE,MAAM,CAAEC,EAAKH,EAALG,KAAK,CAAEC,EAAoBJ,EAApBI,oBAAoB,CAAEC,EAAOL,EAAPK,OAAO,CAAEC,EAAKN,EAALM,KAAK,CAAA,CACzE,CAAA,CAACH,GAAS,CAACD,CAAAA,EAAM,CAAAO,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAG,MAAA,CAAA,SAAA,MAAA,EAI2F,OAA1GL,EAAOH,MAAAA,GAAAA,EAAsBS,QAAQ,CAAC,wBAA0Bf,EAA2BF,EAAea,EAAAE,IAAA,CAAA,EAAA3B,EAAA8B,KAAA,CAE1GP,EAAKJ,EAAO,CACjBY,KAAM,cACNd,SAAAA,EACAe,UAAW,CACVD,KAAM,OACNE,GAAIf,GAELgB,QAAS,CACRb,QAAAA,EACAC,MAAAA,KAEA,MAAA,EAAA,IAAA,MAAA,OAAAG,EAAAU,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEHC,YAAa,SAAAC,CAAA,EAA2D,IAAxDrB,EAAQqB,EAARrB,QAAQ,CAAEK,EAAKgB,EAALhB,KAAK,CAAAiB,EAAAD,EAAgBjB,OAAO,CACrDX,EAAa,CACZO,SAAAA,EACAiB,QAAS,CACRb,QAJmDkB,AAAA,KAAA,IAAAA,EAAG,UAASA,EAK/DjB,MAAAA,IAGH,CAAC,EACEd,GAAI,CAAA,EAAA,CACPC,OAAAA,EACAS,OAAQV,EAAKyB,EAAAA,AAAE,EAEjB"}