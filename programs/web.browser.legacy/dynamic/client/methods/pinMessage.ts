function module(e,n,i){var r,o,s,t;i.link("meteor/meteor",{Meteor:function(e){r=e}},0),i.link("../../app/models/client",{ChatMessage:function(e){o=e},ChatSubscription:function(e){s=e}},1),i.link("../../app/settings/client",{settings:function(e){t=e}},2),r.methods({pinMessage:function(e){if(!r.userId())throw new r.Error("error-not-authorized","Not authorized",{method:"pinMessage"});if(!t.get("Message_AllowPinning"))throw new r.Error("pinning-not-allowed","Pinning messages is not allowed",{method:"pinMessage"});if(!s.findOne({rid:e.rid}))throw new r.Error("error-pinning-message","Pinning messages is not allowed",{method:"pinMessage"});if("string"!=typeof e._id)throw new r.Error("error-pinning-message","Invalid message",{method:"pinMessage"});o.update({_id:e._id,rid:e.rid},{$set:{pinned:!0}});var n=o.findOne({_id:e._id});if(!n)throw new r.Error("error-pinning-message","Error pinning message",{method:"pinMessage"});return n}})}
//# sourceMappingURL=/dynamic/client/methods/ddcae1e92de51522ebba5b25273191ba7adfb8e7.map
