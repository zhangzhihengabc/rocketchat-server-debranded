)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useEndpointUpload.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UploadResult } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useUpload } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\nexport const useEndpointUpload = (\n\tendpoint: Parameters<typeof useUpload>[0],\n\tsuccessMessage: string,\n): ((formData: FormData) => Promise<{ success: boolean }>) => {\n\tconst sendData = useUpload(endpoint);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (formData: FormData) => {\n\t\t\ttry {\n\t\t\t\tconst data = sendData(formData);\n\n\t\t\t\tconst promise = data instanceof Promise ? data : data.promise;\n\n\t\t\t\tconst result = await (promise as unknown as Promise<UploadResult>);\n\n\t\t\t\tif (!result.success) {\n\t\t\t\t\tthrow new Error(String(result.status));\n\t\t\t\t}\n\n\t\t\t\tsuccessMessage && dispatchToastMessage({ type: 'success', message: successMessage });\n\n\t\t\t\treturn result as any;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treturn { success: false };\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, successMessage],\n\t);\n};\n",null],"names":["module","default","v","_regeneratorRuntime","export","useEndpointUpload","useToastMessageDispatch","useUpload","useCallback","endpoint","successMessage","sendData","dispatchToastMessage","formData","data","promise","result","async","_context","prev","next","Promise","awrap","sent","success","Error","String","status","type","message","abrupt","t0","stop"],"mappings":"uBACSA,EAAAA,IAAyB,CAAA,6BAAiB,CAAAC,QAAAA,SAA2BC,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAA9EH,EAAOI,MAAE,CAAA,CAAAC,kBAAuB,WAAW,OAAQA,CAAA,CAAA,GAA2BL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,QAAAA,CAAAQ,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAGvE,IAHPL,EAAmDG,EAA2BC,EAAAC,EAGjEH,EAAoB,SAChCI,CAAyC,CACzCC,CAAsB,EAEtB,IAAMC,EAAWJ,EAAUE,GACrBG,EAAuBN,IAE7B,OAAOE,EACN,SAAOK,CAAkB,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAb,EAAAc,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAIsC,OAJtCF,EAAAC,IAAA,CAAA,EAIjBJ,EAAUD,AAFVA,CAAAA,EAAOH,EAASE,EAAQ,YAEEQ,QAAUP,EAAOA,EAAKC,OAAO,CAAAG,EAAAE,IAAA,CAAA,EAAAjB,EAAAmB,KAAA,CAEvCP,EAA4C,MAAA,EAAtD,GAEPC,AAFCA,CAAAA,EAAME,EAAAK,IAAA,EAEAC,OAAO,CAAA,CAAAN,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,MACZ,AAAIK,MAAMC,OAAOV,EAAOW,MAAM,EAAE,MAAA,EAG8C,OAArFjB,GAAkBE,EAAqB,CAAEgB,KAAM,UAAWC,QAASnB,CAAc,GAAIQ,EAAAY,MAAA,CAAA,SAE9Ed,EAAa,MAAA,GAEoC,OAFpCE,EAAAC,IAAA,CAAA,GAAAD,EAAAa,EAAA,CAAAb,EAAA,KAAA,CAAA,GAEpBN,EAAqB,CAAEgB,KAAM,QAASC,QAAOX,EAAAa,EAAA,AAAO,GAAIb,EAAAY,MAAA,CAAA,SACjD,CAAEN,QAAS,CAAA,CAAK,EAAE,MAAA,GAAA,IAAA,MAAA,OAAAN,EAAAc,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAX,QAAA,EAG3B,CAACT,EAAsBD,EAAUD,EAAe,CAElD"}