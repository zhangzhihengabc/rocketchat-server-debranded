)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useEndpointAction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Method, OperationParams, PathPattern, UrlParams } from '@rocket.chat/rest-typings';\nimport type { EndpointFunction } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\ntype UseEndpointActionOptions<TPathPattern extends PathPattern> = (undefined extends UrlParams<TPathPattern>\n\t? {\n\t\t\tkeys?: UrlParams<TPathPattern>;\n\t  }\n\t: {\n\t\t\tkeys: UrlParams<TPathPattern>;\n\t  }) & {\n\tsuccessMessage?: string;\n};\nexport function useEndpointAction<TMethod extends Method, TPathPattern extends PathPattern>(\n\tmethod: TMethod,\n\tpathPattern: TPathPattern,\n\toptions: UseEndpointActionOptions<TPathPattern> = { keys: {} as UrlParams<TPathPattern> },\n): EndpointFunction<TMethod, TPathPattern> {\n\tconst sendData = useEndpoint(method, pathPattern, options.keys as UrlParams<TPathPattern>);\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (params: OperationParams<TMethod, TPathPattern> | undefined) => {\n\t\t\ttry {\n\t\t\t\tconst data = await sendData(params as OperationParams<TMethod, TPathPattern>);\n\n\t\t\t\tif (options.successMessage) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: options.successMessage });\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, options.successMessage],\n\t);\n}\n",null],"names":["_regeneratorRuntime","useToastMessageDispatch","useEndpoint","useCallback","useEndpointAction","method","pathPattern","options","keys","sendData","dispatchToastMessage","params","data","async","_context","prev","next","awrap","sent","successMessage","type","message","abrupt","t0","stop","Promise","module","default","v","export"],"mappings":"2BAEAA,EAAqDC,EAA2BC,EAAAC,EAY1E,SAAUC,EACfC,CAAe,CACfC,CAAyB,EACgE,IAAzFC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,CAAAA,SAAAA,CAAAA,EAAAA,CAAkD,CAAEC,KAAM,CAAA,CAA6B,EAEjFC,EAAWP,EAAYG,EAAQC,EAAaC,EAAQC,IAA+B,EAEnFE,EAAuBT,IAE7B,OAAOE,EACN,SAAOQ,CAA0D,EAAA,IAAAC,EAAA,OAAAZ,EAAAa,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAhB,EAAAiB,KAAA,CAE5CR,EAASE,GAAiD,MAAA,EAI5E,OAJKC,EAAIE,EAAAI,IAAA,CAENX,EAAQY,cAAc,EACzBT,EAAqB,CAAEU,KAAM,UAAWC,QAASd,EAAQY,cAAAA,AAAc,GACvEL,EAAAQ,MAAA,CAAA,SAEMV,EAAI,MAAA,EAE6C,MAF7CE,EAAAC,IAAA,CAAA,EAAAD,EAAAS,EAAA,CAAAT,EAAA,KAAA,CAAA,GAEXJ,EAAqB,CAAEU,KAAM,QAASC,QAAOP,EAAAS,EAAA,AAAO,GAAIT,EAAAS,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAT,EAAAU,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAI1D,CAACf,EAAsBD,EAAUF,EAAQY,cAAc,CAAC,CAE1D,CAtCSO,EAAAA,IAAyB,CAAA,6BAAmB,CAAAC,QAAAA,SAA2BC,CAAAA,EAAA5B,EAAAA,CAAA,CAAA,EAAA,GAAhF0B,EAAOG,MAAE,CAAA,CAAAzB,kBAAuB,WAAE,OAAaA,CAAM,CAAA,GAA2BsB,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAzB,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAwB,EAAAA,IAAAA,CAAAA,QAAAA,CAAAvB,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}