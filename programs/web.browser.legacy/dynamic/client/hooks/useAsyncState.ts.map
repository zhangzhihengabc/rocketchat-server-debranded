)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useAsyncState.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\n\ntype AsyncStateObject<T> = AsyncState<T> & {\n\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\n\treject: (error: Error) => void;\n\treset: () => void;\n\tupdate: () => void;\n};\n\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\n\tconst [state, setState] = useSafely(\n\t\tuseState<AsyncState<T>>(() => {\n\t\t\tif (typeof initialValue === 'undefined') {\n\t\t\t\treturn asyncState.loading<T>();\n\t\t\t}\n\n\t\t\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\n\t\t}),\n\t);\n\n\tconst resolve = useCallback(\n\t\t(value: T | ((prev: T | undefined) => T)) => {\n\t\t\tsetState((state) => {\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\n\t\t\t\t}\n\n\t\t\t\treturn asyncState.resolve(state, value);\n\t\t\t});\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst reject = useCallback(\n\t\t(error: Error) => {\n\t\t\tsetState((state) => asyncState.reject(state, error));\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst update = useCallback(() => {\n\t\tsetState((state) => asyncState.update(state));\n\t}, [setState]);\n\n\tconst reset = useCallback(() => {\n\t\tsetState((state) => asyncState.reload(state));\n\t}, [setState]);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...state,\n\t\t\tresolve,\n\t\t\treject,\n\t\t\treset,\n\t\t\tupdate,\n\t\t}),\n\t\t[state, resolve, reject, reset, update],\n\t);\n};\n\nexport { AsyncStatePhase, AsyncState };\n",null],"names":["module","link","default","_objectSpread","_slicedToArray","export","useAsyncState","AsyncStatePhase","AsyncState","useSafely","useCallback","useMemo","useState","asyncState","initialValue","_useSafely2","loading","resolved","state","setState","resolve","value","reject","error","update","reset","reload"],"mappings":"uBAAkBA,EAAEC,IAAM,CAAA,uCAA8B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAxDJ,EAAOK,MAAE,CAAA,CAAAC,cAAiB,WAAA,OAAAA,CAA8B,EAAAC,gBAAAA,WAAA,OAAAA,CAAA,EAAAC,WAAAA,WAAA,OAAAA,CAAA,CAAA,GAAAR,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAS,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,QAAAA,CAAAU,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,oBAAAA,CAAAO,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAK,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAYjD,IAZPV,EAAwDC,EAAAK,EAAAC,EAAAC,EAAAC,EAAAL,EAAAC,EAAAK,EAY3CP,EAAgB,SAAIQ,CAA4B,EAC5D,IAQCC,EAAAX,EARyBK,EACzBG,EAAwB,kBACvB,AAAI,AAAwB,KAAA,IAAjBE,EACHD,EAAWG,OAAO,GAGnBH,EAAWI,QAAQ,CAAI,AAAwB,YAAxB,OAAOH,EAA+BA,IAA6BA,EAClG,IACA,GARMI,EAAKH,CAAA,CAAA,EAAA,CAAEI,EAAQJ,CAAA,CAAA,EAAA,CAUhBK,EAAUV,EACf,SAACW,CAAuC,EACvCF,EAAS,SAACD,CAAK,QACd,AAAI,AAAiB,YAAjB,OAAOG,EACHR,EAAWO,OAAO,CAACF,EAAQG,EAAqCH,EAAMG,KAAK,GAG5ER,EAAWO,OAAO,CAACF,EAAOG,EAClC,EACD,EACA,CAACF,EAAS,EAGLG,EAASZ,EACd,SAACa,CAAY,EACZJ,EAAS,SAACD,CAAK,EAAA,OAAKL,EAAWS,MAAM,CAACJ,EAAOK,EAAM,EACpD,EACA,CAACJ,EAAS,EAGLK,EAASd,EAAY,WAC1BS,EAAS,SAACD,CAAK,EAAA,OAAKL,EAAWW,MAAM,CAACN,EAAM,EAC7C,EAAG,CAACC,EAAS,EAEPM,EAAQf,EAAY,WACzBS,EAAS,SAACD,CAAK,EAAA,OAAKL,EAAWa,MAAM,CAACR,EAAM,EAC7C,EAAG,CAACC,EAAS,EAEb,OAAOR,EACN,WAAA,OAAAR,EAAAA,EAAA,CAAA,EACIe,GAAK,CAAA,EAAA,CACRE,QAAAA,EACAE,OAAAA,EACAG,MAAAA,EACAD,OAAAA,CAAM,EAAA,EAEP,CAACN,EAAOE,EAASE,EAAQG,EAAOD,EAAO,CAEzC"}