)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useDecryptedMessage.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport { useState, useEffect } from 'react';\n\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\n\nexport const useDecryptedMessage = (message: IMessage): string => {\n\tconst t = useTranslation();\n\tconst [decryptedMessage, setDecryptedMessage] = useSafely(useState(t('E2E_message_encrypted_placeholder')));\n\n\tuseEffect(() => {\n\t\tif (!isE2EEMessage(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\te2e.decryptMessage(message).then((decryptedMsg) => {\n\t\t\tif (decryptedMsg.msg) {\n\t\t\t\tsetDecryptedMessage(decryptedMsg.msg);\n\t\t\t}\n\t\t});\n\t}, [message, t, setDecryptedMessage]);\n\n\treturn isE2EEMessage(message) ? decryptedMessage : message.msg;\n};\n",null],"names":["module","link","default","_slicedToArray","export","useDecryptedMessage","isE2EEMessage","useSafely","useTranslation","useState","useEffect","e2e","message","t","_useSafely2","decryptedMessage","setDecryptedMessage","decryptMessage","then","decryptedMsg","msg"],"mappings":"uBACSA,EAAeC,IAAM,CAAA,uCAA4B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAA1DH,EAAOI,MAAE,CAAA,CAAAC,oBAAqB,WAAA,OAAAA,CAA4B,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAM,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAO,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAQ,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,QAAAA,CAAAS,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAW,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOnD,IAPPR,EAA0DG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO7CN,EAAsB,SAACO,CAAiB,EACpD,IAAMC,EAAIL,IACiGM,EAAAX,EAA3DI,EAAUE,EAASI,EAAE,uCAAsC,GAApGE,EAAgBD,CAAA,CAAA,EAAA,CAAEE,EAAmBF,CAAA,CAAA,EAAA,CAc5C,OAZAJ,EAAU,WACJJ,EAAcM,IAInBD,EAAIM,cAAc,CAACL,GAASM,IAAI,CAAC,SAACC,CAAY,EACzCA,EAAaC,GAAG,EACnBJ,EAAoBG,EAAaC,GAAG,CAEtC,EACD,EAAG,CAACR,EAASC,EAAGG,EAAoB,EAE7BV,EAAcM,GAAWG,EAAmBH,EAAQQ,GAAG,AAC/D"}