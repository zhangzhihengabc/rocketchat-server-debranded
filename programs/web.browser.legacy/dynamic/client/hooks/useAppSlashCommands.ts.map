)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useAppSlashCommands.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSingleStream, useUserId } from '@rocket.chat/ui-contexts';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { slashCommands } from '../../app/utils/lib/slashCommand';\n\nexport const useAppSlashCommands = () => {\n\tconst queryClient = useQueryClient();\n\n\tconst apps = useSingleStream('apps');\n\tconst uid = useUserId();\n\n\tconst invalidate = useDebouncedCallback(\n\t\t() => {\n\t\t\tqueryClient.invalidateQueries(['apps', 'slashCommands']);\n\t\t},\n\t\t100,\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\t\treturn apps('apps', ([key, [command]]) => {\n\t\t\tif (['command/added', 'command/updated', 'command/disabled', 'command/removed'].includes(key)) {\n\t\t\t\tif (typeof command === 'string') {\n\t\t\t\t\tdelete slashCommands.commands[command];\n\t\t\t\t}\n\t\t\t\tinvalidate();\n\t\t\t}\n\t\t});\n\t}, [apps, uid, invalidate]);\n\n\tconst getSlashCommands = useEndpoint('GET', '/v1/commands.list');\n\n\tuseQuery(['apps', 'slashCommands'], () => getSlashCommands(), {\n\t\tenabled: !!uid,\n\t\tonSuccess(data) {\n\t\t\tdata.commands.forEach((command) => slashCommands.add(command));\n\t\t},\n\t});\n};\n",null],"names":["module","default","_slicedToArray","export","useAppSlashCommands","useDebouncedCallback","useEndpoint","useSingleStream","useUserId","useQuery","useQueryClient","useEffect","slashCommands","queryClient","apps","uid","invalidate","invalidateQueries","_ref","_ref2","key","command","_ref2$","includes","commands","getSlashCommands","enabled","onSuccess","data","forEach","add"],"mappings":"uBAASA,EAAAA,IAAoB,CAAE,uCAAoC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAnEF,EAAOG,MAAE,CAAA,CAAAC,oBAAsB,WAAM,OAAAA,CAA8B,CAAA,GAAAJ,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAK,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAS,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAAW,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAX,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAY,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAO5D,IAPPV,EAAmEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAOtDR,EAAsB,WAClC,IAAMS,EAAcH,IAEdI,EAAOP,EAAgB,QACvBQ,EAAMP,IAENQ,EAAaX,EAClB,WACCQ,EAAYI,iBAAiB,CAAC,CAAC,OAAQ,gBAAgB,CACxD,EACA,IACA,EAAE,EAGHN,EAAU,WACT,GAAKI,EAGL,OAAOD,EAAK,OAAQ,SAAAI,CAAA,EAAqB,IAAAC,EAAAjB,EAAAgB,EAAA,GAAnBE,EAAGD,CAAA,CAAA,EAAA,CAAGE,EAAOC,AAAVpB,EAAAiB,CAAA,CAAA,EAAA,CAAA,EAAU,CAAA,EAAA,CAC9B,CAAC,gBAAiB,kBAAmB,mBAAoB,kBAAkB,CAACI,QAAQ,CAACH,KACjE,UAAnB,OAAOC,GACV,OAAOT,EAAcY,QAAQ,CAACH,EAAQ,CAEvCL,IAEF,EACD,EAAG,CAACF,EAAMC,EAAKC,EAAW,EAE1B,IAAMS,EAAmBnB,EAAY,MAAO,qBAE5CG,EAAS,CAAC,OAAQ,gBAAgB,CAAE,WAAA,OAAMgB,GAAkB,EAAE,CAC7DC,QAAS,CAAC,CAACX,EACXY,UAAS,SAACC,CAAI,EACbA,EAAKJ,QAAQ,CAACK,OAAO,CAAC,SAACR,CAAO,EAAA,OAAKT,EAAckB,GAAG,CAACT,EAAQ,EAC9D,GAEF"}