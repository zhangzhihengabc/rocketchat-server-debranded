)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/roomActions/useThreadRoomAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { HeaderToolboxAction, HeaderToolboxActionBadge } from '@rocket.chat/ui-client';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolboxAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolboxActionBadge variant={variant}>{unread}</HeaderToolboxActionBadge>}\n\t\t\t\t</HeaderToolboxAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n",null],"names":["module","export","useThreadRoomAction","HeaderToolboxAction","HeaderToolboxActionBadge","useSetting","v","React","lazy","useMemo","useTranslation","useRoomSubscription","Threads","dynamicImport","_subscription$tunread","_subscription$tunread2","_subscription$tunread3","_subscription$tunread4","_subscription$tunread5","_subscription$tunread6","enabled","subscription","tunread","length","tunreadUser","tunreadGroup","unread","variant","t","_useTranslation","id","groups","full","title","icon","tabComponent","order","renderToolboxItem","_ref","className","index","tab","toolbox","action","disabled","tooltip","createElement","key","pressed"],"mappings":"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"}