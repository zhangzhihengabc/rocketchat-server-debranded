)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useAppActionButtons.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUIActionButton, UIActionButtonContext } from '@rocket.chat/apps-engine/definition/ui';\nimport { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSingleStream, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useEffect, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { UiKitTriggerTimeoutError } from '../../app/ui-message/client/UiKitTriggerTimeoutError';\nimport type { MessageActionConfig, MessageActionContext } from '../../app/ui-utils/client/lib/MessageAction';\nimport type { MessageBoxAction } from '../../app/ui-utils/client/lib/messageBox';\nimport { Utilities } from '../../ee/lib/misc/Utilities';\nimport type { GenericMenuItemProps } from '../components/GenericMenu/GenericMenuItem';\nimport { useUiKitActionManager } from '../uikit/hooks/useUiKitActionManager';\nimport { useApplyButtonFilters, useApplyButtonAuthFilter } from './useApplyButtonFilters';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nexport const useAppActionButtons = <TContext extends `${UIActionButtonContext}`>(context?: TContext) => {\n\tconst queryClient = useQueryClient();\n\n\tconst apps = useSingleStream('apps');\n\tconst uid = useUserId();\n\n\tconst getActionButtons = useEndpoint('GET', '/apps/actionButtons');\n\n\tconst result = useQuery(['apps', 'actionButtons'], () => getActionButtons(), {\n\t\t...(context && {\n\t\t\tselect: (data) =>\n\t\t\t\tdata.filter(\n\t\t\t\t\t(\n\t\t\t\t\t\tbutton,\n\t\t\t\t\t): button is IUIActionButton & {\n\t\t\t\t\t\tcontext: UIActionButtonContext extends infer X ? (X extends TContext ? X : never) : never;\n\t\t\t\t\t} => button.context === context,\n\t\t\t\t),\n\t\t}),\n\t\tstaleTime: Infinity,\n\t});\n\n\tconst invalidate = useDebouncedCallback(\n\t\t() => {\n\t\t\tqueryClient.invalidateQueries(['apps', 'actionButtons']);\n\t\t},\n\t\t100,\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn apps('apps', ([key]) => {\n\t\t\tif (['actions/changed'].includes(key)) {\n\t\t\t\tinvalidate();\n\t\t\t}\n\t\t});\n\t}, [uid, apps, invalidate]);\n\n\treturn result;\n};\n\nexport const useMessageboxAppsActionButtons = () => {\n\tconst result = useAppActionButtons('messageBoxAction');\n\tconst actionManager = useUiKitActionManager();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { t } = useTranslation();\n\n\tconst applyButtonFilters = useApplyButtonFilters();\n\n\tconst data = useMemo(\n\t\t() =>\n\t\t\tresult.data\n\t\t\t\t?.filter((action) => {\n\t\t\t\t\treturn applyButtonFilters(action);\n\t\t\t\t})\n\t\t\t\t.map((action) => {\n\t\t\t\t\tconst item: MessageBoxAction = {\n\t\t\t\t\t\tid: getIdForActionButton(action),\n\t\t\t\t\t\tlabel: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\n\t\t\t\t\t\taction: (params) => {\n\t\t\t\t\t\t\tvoid actionManager\n\t\t\t\t\t\t\t\t.emitInteraction(action.appId, {\n\t\t\t\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\t\t\t\trid: params.rid,\n\t\t\t\t\t\t\t\t\ttmid: params.tmid,\n\t\t\t\t\t\t\t\t\tactionId: action.actionId,\n\t\t\t\t\t\t\t\t\tpayload: { context: action.context, message: params.chat.composer?.text ?? '' },\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(async (reason) => {\n\t\t\t\t\t\t\t\t\tif (reason instanceof UiKitTriggerTimeoutError) {\n\t\t\t\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn reason;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\treturn item;\n\t\t\t\t}),\n\t\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, t],\n\t);\n\treturn {\n\t\t...result,\n\t\tdata,\n\t} as UseQueryResult<MessageBoxAction[]>;\n};\n\nexport const useUserDropdownAppsActionButtons = () => {\n\tconst result = useAppActionButtons('userDropdownAction');\n\tconst actionManager = useUiKitActionManager();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { t } = useTranslation();\n\n\tconst applyButtonFilters = useApplyButtonAuthFilter();\n\n\tconst data = useMemo(\n\t\t() =>\n\t\t\tresult.data\n\t\t\t\t?.filter((action) => {\n\t\t\t\t\treturn applyButtonFilters(action);\n\t\t\t\t})\n\t\t\t\t.map((action) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: `${action.appId}_${action.actionId}`,\n\t\t\t\t\t\t// icon: action.icon as GenericMenuItemProps['icon'],\n\t\t\t\t\t\tcontent: action.labelI18n,\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tvoid actionManager\n\t\t\t\t\t\t\t\t.emitInteraction(action.appId, {\n\t\t\t\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\t\t\t\tactionId: action.actionId,\n\t\t\t\t\t\t\t\t\tpayload: { context: action.context },\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(async (reason) => {\n\t\t\t\t\t\t\t\t\tif (reason instanceof UiKitTriggerTimeoutError) {\n\t\t\t\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn reason;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, t],\n\t);\n\treturn {\n\t\t...result,\n\t\tdata,\n\t} as UseQueryResult<GenericMenuItemProps[]>;\n};\n\nexport const useMessageActionAppsActionButtons = (context?: MessageActionContext) => {\n\tconst result = useAppActionButtons('messageAction');\n\tconst actionManager = useUiKitActionManager();\n\tconst applyButtonFilters = useApplyButtonFilters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { t } = useTranslation();\n\tconst data = useMemo(\n\t\t() =>\n\t\t\tresult.data\n\t\t\t\t?.filter((action) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tcontext &&\n\t\t\t\t\t\t!(action.when?.messageActionContext || ['message', 'message-mobile', 'threads', 'starred']).includes(context as any)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn applyButtonFilters(action);\n\t\t\t\t})\n\t\t\t\t.map((action) => {\n\t\t\t\t\tconst item: MessageActionConfig = {\n\t\t\t\t\t\ticon: undefined as any,\n\t\t\t\t\t\tid: getIdForActionButton(action),\n\t\t\t\t\t\tlabel: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\n\t\t\t\t\t\torder: 7,\n\t\t\t\t\t\ttype: 'apps',\n\t\t\t\t\t\tvariant: action.variant,\n\t\t\t\t\t\taction: (_, params) => {\n\t\t\t\t\t\t\tvoid actionManager\n\t\t\t\t\t\t\t\t.emitInteraction(action.appId, {\n\t\t\t\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\t\t\t\trid: params.message.rid,\n\t\t\t\t\t\t\t\t\ttmid: params.message.tmid,\n\t\t\t\t\t\t\t\t\tmid: params.message._id,\n\t\t\t\t\t\t\t\t\tactionId: action.actionId,\n\t\t\t\t\t\t\t\t\tpayload: { context: action.context },\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(async (reason) => {\n\t\t\t\t\t\t\t\t\tif (reason instanceof UiKitTriggerTimeoutError) {\n\t\t\t\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn reason;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\treturn item;\n\t\t\t\t}),\n\t\t[actionManager, applyButtonFilters, context, dispatchToastMessage, result.data, t],\n\t);\n\treturn {\n\t\t...result,\n\t\tdata,\n\t} as UseQueryResult<MessageActionConfig[]>;\n};\n",null],"names":["module","link","default","v","_regeneratorRuntime","_slicedToArray","_objectSpread","export","useAppActionButtons","useMessageboxAppsActionButtons","useUserDropdownAppsActionButtons","useMessageActionAppsActionButtons","useDebouncedCallback","useEndpoint","useSingleStream","useToastMessageDispatch","useUserId","useQuery","useQueryClient","useEffect","useMemo","useTranslation","UiKitTriggerTimeoutError","Utilities","useUiKitActionManager","useApplyButtonFilters","useApplyButtonAuthFilter","getIdForActionButton","_ref","appId","actionId","context","queryClient","apps","uid","getActionButtons","result","select","data","filter","button","staleTime","Infinity","invalidate","invalidateQueries","_ref2","includes","_ref3","actionManager","dispatchToastMessage","t","_useTranslation","applyButtonFilters","_result$data","action","map","id","label","getI18nKeyForApp","labelI18n","params","_params$chat$composer","_params$chat$composer2","emitInteraction","type","rid","tmid","payload","message","chat","composer","text","catch","reason","async","_context","prev","next","abrupt","stop","Promise","_useTranslation2","_result$data2","content","onClick","_context2","_useTranslation3","_result$data3","_action$when","when","messageActionContext","icon","undefined","order","variant","_","mid","_id","_context3"],"mappings":"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"}