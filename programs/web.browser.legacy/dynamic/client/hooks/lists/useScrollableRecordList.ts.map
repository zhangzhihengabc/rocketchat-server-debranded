)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/lists/useScrollableRecordList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useCallback, useEffect } from 'react';\n\nimport { AsyncStatePhase } from '../../lib/asyncState';\nimport type { RecordList, RecordListBatchChanges } from '../../lib/lists/RecordList';\n\nconst INITIAL_ITEM_COUNT = 25;\n\nexport const useScrollableRecordList = <T extends { _id: string; _updatedAt?: Date }>(\n\trecordList: RecordList<T>,\n\tfetchBatchChanges: (start: number, end: number) => Promise<RecordListBatchChanges<T>>,\n\tinitialItemCount: number = INITIAL_ITEM_COUNT,\n): {\n\tloadMoreItems: (start: number) => void;\n\tinitialItemCount: number;\n} => {\n\tconst loadMoreItems = useCallback(\n\t\t(start: number) => {\n\t\t\tif (recordList.phase === AsyncStatePhase.LOADING || start + 1 < recordList.itemCount) {\n\t\t\t\trecordList.batchHandle(() => fetchBatchChanges(start, initialItemCount));\n\t\t\t}\n\t\t},\n\t\t[recordList, fetchBatchChanges, initialItemCount],\n\t);\n\n\tuseEffect(() => {\n\t\tloadMoreItems(0);\n\t}, [loadMoreItems]);\n\n\treturn { loadMoreItems, initialItemCount };\n};\n",null],"names":["module","export","useScrollableRecordList","useCallback","useEffect","AsyncStatePhase","recordList","fetchBatchChanges","initialItemCount","loadMoreItems","start","phase","LOADING","itemCount","batchHandle"],"mappings":"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,wBAA8B,WAAQ,OAAAA,CAAA,CAAA,GAAAF,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,uBAAAA,CAAAK,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOxC,IAPwCF,EAAAC,EAAAC,EAOlCH,EAA0B,SACtCI,CAAyB,CACzBC,CAAqF,EAKlF,IAJHC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,CAAAA,SAAAA,CAAAA,EAAAA,CAL0B,GAUpBC,EAAgBN,EACrB,SAACO,CAAa,EACTJ,CAAAA,EAAWK,KAAK,GAAKN,EAAgBO,OAAO,EAAIF,EAAQ,EAAIJ,EAAWO,SAAS,AAATA,GAC1EP,EAAWQ,WAAW,CAAC,WAAA,OAAMP,EAAkBG,EAAOF,EAAiB,EAEzE,EACA,CAACF,EAAYC,EAAmBC,EAAiB,EAOlD,OAJAJ,EAAU,WACTK,EAAc,EACf,EAAG,CAACA,EAAc,EAEX,CAAEA,cAAAA,EAAeD,iBAAAA,CAAgB,CACzC"}