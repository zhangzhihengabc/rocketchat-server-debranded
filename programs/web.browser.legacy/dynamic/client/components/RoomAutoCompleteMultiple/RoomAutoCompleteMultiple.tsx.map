)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/RoomAutoCompleteMultiple/RoomAutoCompleteMultiple.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Chip, Box, Skeleton } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport RoomAvatar from '../avatar/RoomAvatar';\n\nconst generateQuery = (\n\tterm = '',\n): {\n\tselector: string;\n} => ({ selector: JSON.stringify({ name: term }) });\n\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\n\treadOnly?: boolean;\n};\n\nconst RoomAutoCompleteMultiple = ({ value, onChange, ...props }: RoomAutoCompleteProps): ReactElement => {\n\tconst [filter, setFilter] = useState('');\n\tconst filterDebounced = useDebouncedValue(filter, 300);\n\tconst autocomplete = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate');\n\n\tconst result = useQuery(['rooms.autocomplete.channelAndPrivate', filterDebounced], () => autocomplete(generateQuery(filterDebounced)), {\n\t\tkeepPreviousData: true,\n\t});\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\tresult.isSuccess\n\t\t\t\t? result.data.items.map(({ fname, name, _id, avatarETag, t }) => ({\n\t\t\t\t\t\tvalue: _id,\n\t\t\t\t\t\tlabel: { name: fname || name, avatarETag, type: t },\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t[result.data?.items, result.isSuccess],\n\t);\n\n\tif (result.isLoading) {\n\t\treturn <Skeleton />;\n\t}\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\tmultiple\n\t\t\trenderSelected={({ selected: { value, label }, onRemove, ...props }): ReactElement => (\n\t\t\t\t<Chip {...props} key={value} value={value} onClick={onRemove}>\n\t\t\t\t\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />\n\t\t\t\t\t<Box is='span' margin='none' mis={4}>\n\t\t\t\t\t\t{label?.name}\n\t\t\t\t\t</Box>\n\t\t\t\t</Chip>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }): ReactElement => (\n\t\t\t\t<Option\n\t\t\t\t\tkey={value}\n\t\t\t\t\t{...props}\n\t\t\t\t\tlabel={label.name}\n\t\t\t\t\tavatar={<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoCompleteMultiple);\n",null],"names":["_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","AutoComplete","Option","Chip","Box","Skeleton","useDebouncedValue","useEndpoint","useQuery","React","memo","useMemo","useState","RoomAvatar","module","default","v","generateQuery","term","arguments","length","undefined","selector","JSON","stringify","name","exportDefault","_ref","_result$data","value","onChange","props","_excluded","_useState2","filter","setFilter","filterDebounced","autocomplete","result","keepPreviousData","options","isSuccess","data","items","map","_ref2","fname","_id","label","avatarETag","type","t","isLoading","createElement","multiple","renderSelected","_ref3","_ref3$selected","selected","onRemove","_excluded2","key","onClick","size","room","is","margin","mis","renderItem","_ref4","_excluded3","avatar"],"mappings":"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"}