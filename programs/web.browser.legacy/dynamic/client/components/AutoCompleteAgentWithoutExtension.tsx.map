)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/AutoCompleteAgentWithoutExtension.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatAgent } from '@rocket.chat/core-typings';\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport type { FC } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\n\ntype AutoCompleteAgentProps = {\n\tonChange: (value: string) => void;\n\thaveAll?: boolean;\n\tvalue?: string;\n\tcurrentExtension?: string;\n};\n\nconst AutoCompleteAgentWithoutExtension: FC<AutoCompleteAgentProps> = (props) => {\n\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\n\t\tuseMemo(\n\t\t\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\n\t\t\t[currentExtension, debouncedAgentsFilter, haveAll],\n\t\t),\n\t);\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\tconst sortedByName = agentsItems\n\t\t.sort((a, b) => {\n\t\t\tif (value === 'all') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (a?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (b?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t})\n\t\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\n\t\t\t...agent,\n\t\t\tlabel: agent?.username || '',\n\t\t\tvalue: agent?.username || '',\n\t\t}));\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter as string | undefined}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={\n\t\t\t\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgentWithoutExtension);\n",null],"names":["_objectSpread","_slicedToArray","PaginatedSelectFiltered","useDebouncedValue","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useAvailableAgentsList","module","default","link","v","exportDefault","props","value","currentExtension","_props$onChange","onChange","_props$haveAll","haveAll","_useState2","agentsFilter","setAgentsFilter","debouncedAgentsFilter","_useAvailableAgentsLi","text","includeExtension","AgentsList","itemsList","loadMoreAgents","loadMoreItems","_useRecordList","agentsPhase","phase","agentsItems","items","agentsTotal","itemCount","sortedByName","sort","a","b","_a$username","_b$username","username","localeCompare","map","agent","label","createElement","flexShrink","filter","setFilter","options","endReached","LOADING","start","Math","min"],"mappings":"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"}