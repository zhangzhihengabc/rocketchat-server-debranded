)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/header/hooks/useMessageRoles.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport { useCallback } from 'react';\n\nimport { RoomRoles, UserRoles, Roles } from '../../../../../app/models/client';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\nexport const useMessageRoles = (userId: IUser['_id'] | undefined, roomId: IRoom['_id'], shouldLoadRoles: boolean): Array<string> =>\n\tuseReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tif (!shouldLoadRoles || !userId) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst userRoles = UserRoles.findOne(userId);\n\t\t\tconst roomRoles = RoomRoles.findOne({\n\t\t\t\t'u._id': userId,\n\t\t\t\t'rid': roomId,\n\t\t\t});\n\n\t\t\tconst roles = [...(userRoles?.roles || []), ...(roomRoles?.roles || [])];\n\n\t\t\tconst result = Roles.find(\n\t\t\t\t{\n\t\t\t\t\t_id: {\n\t\t\t\t\t\t$in: roles,\n\t\t\t\t\t},\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\t$exists: true,\n\t\t\t\t\t\t$ne: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tdescription: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).fetch();\n\t\t\treturn result.map(({ description }) => description);\n\t\t}, [userId, roomId, shouldLoadRoles]),\n\t);\n",null],"names":["module","link","default","_toConsumableArray","export","useMessageRoles","useCallback","RoomRoles","UserRoles","Roles","useReactiveValue","userId","roomId","shouldLoadRoles","userRoles","findOne","roomRoles","roles","concat","result","find","_id","$in","description","$exists","$ne","fields","fetch","map","_ref"],"mappings":"uBACsBA,EAAMC,IAAA,CAAO,2CAAC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAApCH,EAAOI,MAAE,CAAA,CAAAC,gBAAmB,WAAQ,OAAAA,CAAA,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,QAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAO,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAU,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAK7B,IALPP,EAAoCG,EAAAC,EAAAC,EAAAC,EAAAC,EAKvBL,EAAkB,SAACM,CAAgC,CAAEC,CAAoB,CAAEC,CAAwB,EAAA,OAC/GH,EACCJ,EAAY,WACX,GAAI,CAACO,GAAmB,CAACF,EACxB,MAAO,EAAE,CAGV,IAAMG,EAAYN,EAAUO,OAAO,CAACJ,GAC9BK,EAAYT,EAAUQ,OAAO,CAAC,CACnC,QAASJ,EACT,IAAOC,IAGFK,EAAK,EAAA,CAAAC,MAAA,CAAAf,EAAQ,AAAAW,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWG,KAAK,AAALA,GAAS,EAAE,EAAAd,EAAO,AAAAa,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWC,KAAK,AAALA,GAAS,EAAE,GAkBtE,OAAOE,AAhBQV,EAAMW,IAAI,CACxB,CACCC,IAAK,CACJC,IAAKL,GAENM,YAAa,CACZC,QAAS,CAAA,EACTC,IAAK,KAGP,CACCC,OAAQ,CACPH,YAAa,KAGdI,KAAK,GACOC,GAAG,CAAC,SAAAC,CAAA,EAAc,OAAAA,EAAXN,WAAW,AAAkB,EACnD,EAAG,CAACZ,EAAQC,EAAQC,EAAgB,EACpC"}