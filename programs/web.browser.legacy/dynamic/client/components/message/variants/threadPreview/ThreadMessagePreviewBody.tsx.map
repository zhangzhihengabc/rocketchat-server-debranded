)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/variants/threadPreview/ThreadMessagePreviewBody.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isQuoteAttachment, isE2EEMessage } from '@rocket.chat/core-typings';\nimport { PreviewMarkup } from '@rocket.chat/gazzodown';\nimport type { Root } from '@rocket.chat/message-parser';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\n\nimport GazzodownText from '../../../GazzodownText';\n\ntype ThreadMessagePreviewBodyProps = {\n\tmessage: IMessage;\n};\n\nconst ThreadMessagePreviewBody = ({ message }: ThreadMessagePreviewBodyProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst getMessage = () => {\n\t\tconst mdTokens: Root | undefined = message.md && [...message.md];\n\t\tif (\n\t\t\tmessage.attachments &&\n\t\t\tArray.isArray(message.attachments) &&\n\t\t\tmessage.attachments.length > 0 &&\n\t\t\tisQuoteAttachment(message.attachments[0])\n\t\t) {\n\t\t\tmdTokens?.shift();\n\t\t}\n\t\tif (message.attachments && message.msg === '') {\n\t\t\treturn <>{t('Message_with_attachment')}</>;\n\t\t}\n\t\tif (!isEncryptedMessage || message.e2e === 'done') {\n\t\t\treturn mdTokens ? (\n\t\t\t\t<GazzodownText>\n\t\t\t\t\t<PreviewMarkup tokens={mdTokens} />\n\t\t\t\t</GazzodownText>\n\t\t\t) : (\n\t\t\t\t<>{message.msg}</>\n\t\t\t);\n\t\t}\n\t\tif (isEncryptedMessage && message.e2e === 'pending') {\n\t\t\treturn <>{t('E2E_message_encrypted_placeholder')}</>;\n\t\t}\n\t\treturn <>{message.msg}</>;\n\t};\n\n\treturn getMessage();\n};\n\nexport default memo(ThreadMessagePreviewBody);\n",null],"names":["_toConsumableArray","isQuoteAttachment","isE2EEMessage","PreviewMarkup","useTranslation","React","memo","GazzodownText","module","link","default","v","exportDefault","_ref","mdTokens","message","t","isEncryptedMessage","md","attachments","Array","isArray","length","shift","msg","createElement","Fragment","e2e","tokens"],"mappings":"uBAcA,IAbAA,EAAAC,EAASC,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAApEC,EAAmBC,IAAA,CAAA,2CAAiD,CAAAC,QAAAA,SAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAjDQ,EAAeC,IAAAA,CAAAA,4BAAiC,CAACR,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAL,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAJ,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAN,EAAAA,CAAA,EAAAC,KAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,yBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA7EC,EAAOI,aAAE,CAgDMN,EAnCkB,SAAAO,CAAA,EAA6D,IAKtFC,EAL4BC,EAAOF,EAAPE,OAAO,CACpCC,EAAIZ,IACJa,EAAqBf,EAAca,GA8BzC,OA3BOD,EAA6BC,EAAQG,EAAE,EAAAlB,EAAQe,EAAQG,EAAE,EAS/D,CAPCH,EAAQI,WAAW,EACnBC,MAAMC,OAAO,CAACN,EAAQI,WAAW,GACjCJ,EAAQI,WAAW,CAACG,MAAM,CAAG,GAC7BrB,EAAkBc,EAAQI,WAAW,CAAC,EAAE,GAExCL,CAAAA,MAAAA,GAAAA,EAAUS,KAAK,EAAA,EAEZR,EAAQI,WAAW,EAAIJ,AAAgB,KAAhBA,EAAQS,GAAG,EAC9BnB,EAAAoB,aAAA,CAAApB,EAAAqB,QAAA,CAAA,KAAGV,EAAE,4BAET,AAACC,GAAsBF,AAAgB,SAAhBA,EAAQY,GAAG,CASlCV,GAAsBF,AAAgB,YAAhBA,EAAQY,GAAG,CAC7BtB,EAAAoB,aAAA,CAAApB,EAAAqB,QAAA,CAAA,KAAGV,EAAE,sCAENX,EAAAoB,aAAA,CAAApB,EAAAqB,QAAA,CAAA,KAAGX,EAAQS,GAAG,EAXbV,EACNT,EAAAoB,aAAA,CAAClB,EAAa,KACbF,EAAAoB,aAAA,CAACtB,EAAa,CAACyB,OAAQd,CAAS,IAGjCT,EAAAoB,aAAA,CAAApB,EAAAqB,QAAA,CAAA,KAAGX,EAAQS,GAAG,CAUlB"}