)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/variants/thread/ThreadMessageContent.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetting, useUserId, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\n\nimport { useUserData } from '../../../../hooks/useUserData';\nimport type { UserPresence } from '../../../../lib/presence';\nimport MessageContentBody from '../../MessageContentBody';\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\nimport Attachments from '../../content/Attachments';\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\nimport Location from '../../content/Location';\nimport MessageActions from '../../content/MessageActions';\nimport Reactions from '../../content/Reactions';\nimport UrlPreviews from '../../content/UrlPreviews';\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\n\ntype ThreadMessageContentProps = {\n\tmessage: IThreadMessage | IThreadMainMessage;\n};\n\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\n\tconst encrypted = isE2EEMessage(message);\n\tconst { enabled: oembedEnabled } = useOembedLayout();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst broadcast = subscription?.broadcast ?? false;\n\tconst uid = useUserId();\n\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n\n\tconst t = useTranslation();\n\n\tconst normalizedMessage = useNormalizedMessage(message);\n\n\treturn (\n\t\t<>\n\t\t\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\n\t\t\t\t<>\n\t\t\t\t\t{(!encrypted || normalizedMessage.e2e === 'done') && (\n\t\t\t\t\t\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\n\t\t\t\t\t)}\n\t\t\t\t\t{encrypted && normalizedMessage.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.blocks && (\n\t\t\t\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\n\t\t\t)}\n\n\t\t\t{normalizedMessage.attachments && <Attachments attachments={normalizedMessage.attachments} />}\n\n\t\t\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\n\n\t\t\t{normalizedMessage.actionLinks?.length && (\n\t\t\t\t<MessageActions\n\t\t\t\t\tmessage={normalizedMessage}\n\t\t\t\t\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t...action,\n\t\t\t\t\t}))}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\n\n\t\t\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\n\n\t\t\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\n\t\t\t\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\n\t\t\t)}\n\n\t\t\t{readReceiptEnabled && <ReadReceiptIndicator unread={normalizedMessage.unread} />}\n\t\t</>\n\t);\n};\n\nexport default memo(ThreadMessageContent);\n",null],"names":["_objectWithoutProperties","_objectSpread","isE2EEMessage","useSetting","useUserId","useTranslation","React","memo","useUserData","MessageContentBody","ReadReceiptIndicator","Attachments","BroadcastMetrics","Location","MessageActions","Reactions","UrlPreviews","useNormalizedMessage","useOembedLayout","useSubscriptionFromMessageQuery","UiKitMessageBlock","module","link","default","v","exportDefault","_ref","_useSubscriptionFromM","_subscription$broadca","_normalizedMessage$bl","_normalizedMessage$md","_normalizedMessage$ur","_normalizedMessage$ac","message","encrypted","oembedEnabled","_useOembedLayout","enabled","subscription","data","undefined","broadcast","uid","messageUser","u","roles","_id","readReceiptEnabled","t","normalizedMessage","createElement","Fragment","blocks","length","md","e2e","mentions","channels","rid","mid","attachments","urls","actionLinks","actions","map","_ref2","methodId","method_id","i18nLabel","_excluded","reactions","Object","keys","location","username","unread"],"mappings":"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"}