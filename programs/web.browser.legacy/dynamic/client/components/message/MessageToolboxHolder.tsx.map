)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/MessageToolboxHolder.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { MessageToolboxWrapper } from '@rocket.chat/fuselage';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { Suspense, lazy, memo, useRef, useState } from 'react';\n\nimport type { MessageActionContext } from '../../../app/ui-utils/client/lib/MessageAction';\nimport { useChat } from '../../views/room/contexts/ChatContext';\nimport { useIsVisible } from '../../views/room/hooks/useIsVisible';\n\ntype MessageToolboxHolderProps = {\n\tmessage: IMessage;\n\tcontext?: MessageActionContext;\n};\n\nconst MessageToolbox = lazy(() => import('./toolbox/MessageToolbox'));\n\nconst MessageToolboxHolder = ({ message, context }: MessageToolboxHolderProps): ReactElement => {\n\tconst ref = useRef(null);\n\n\tconst [isVisible] = useIsVisible(ref);\n\tconst [kebabOpen, setKebabOpen] = useState(false);\n\n\tconst showToolbox = isVisible || kebabOpen;\n\n\tconst chat = useChat();\n\n\tconst depsQueryResult = useQuery(['toolbox', message._id, context], async () => {\n\t\tconst room = await chat?.data.findRoom();\n\t\tconst subscription = await chat?.data.findSubscription();\n\t\treturn {\n\t\t\troom,\n\t\t\tsubscription,\n\t\t};\n\t});\n\n\treturn (\n\t\t<MessageToolboxWrapper ref={ref} visible={kebabOpen}>\n\t\t\t{showToolbox && depsQueryResult.isSuccess && depsQueryResult.data.room && (\n\t\t\t\t<Suspense fallback={null}>\n\t\t\t\t\t<MessageToolbox\n\t\t\t\t\t\tonChangeMenuVisibility={setKebabOpen}\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tmessageContext={context}\n\t\t\t\t\t\troom={depsQueryResult.data.room}\n\t\t\t\t\t\tsubscription={depsQueryResult.data.subscription}\n\t\t\t\t\t/>\n\t\t\t\t</Suspense>\n\t\t\t)}\n\t\t</MessageToolboxWrapper>\n\t);\n};\n\nexport default memo(MessageToolboxHolder);\n",null],"names":["module","link","default","_regeneratorRuntime","_slicedToArray","MessageToolboxWrapper","useQuery","v","React","Suspense","lazy","memo","useRef","useState","useChat","useIsVisible","MessageToolbox","dynamicImport","exportDefault","_ref","message","context","ref","isVisible","_useIsVisible2","_useState2","kebabOpen","setKebabOpen","showToolbox","chat","depsQueryResult","_id","room","subscription","async","_context","prev","next","awrap","data","findRoom","sent","findSubscription","abrupt","stop","Promise","createElement","visible","isSuccess","fallback","onChangeMenuVisibility","messageContext"],"mappings":"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"}