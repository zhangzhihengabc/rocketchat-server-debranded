)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/UserAutoComplete/UserAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Box, Chip, Options } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport UserAvatar from '../avatar/UserAvatar';\n\nconst query = (\n\tterm = '',\n\tconditions = {},\n): {\n\tselector: string;\n} => ({ selector: JSON.stringify({ term, conditions }) });\n\ntype UserAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\n\tconditions?: { [key: string]: unknown };\n};\n\nconst UserAutoComplete = ({ value, onChange, ...props }: UserAutoCompleteProps): ReactElement => {\n\tconst { conditions = {} } = props;\n\tconst [filter, setFilter] = useState('');\n\tconst debouncedFilter = useDebouncedValue(filter, 1000);\n\tconst usersAutoCompleteEndpoint = useEndpoint('GET', '/v1/users.autocomplete');\n\n\tconst { data } = useQuery(['usersAutoComplete', debouncedFilter, conditions], async () =>\n\t\tusersAutoCompleteEndpoint(query(debouncedFilter, conditions)),\n\t);\n\n\tconst options = useMemo(() => data?.items.map((user) => ({ value: user.username, label: user.name || user.username })) || [], [data]);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\tdata-qa-id='UserAutoComplete'\n\t\t\trenderSelected={({ selected: { value, label } }): ReactElement | null => (\n\t\t\t\t<Chip height='x20' value={value} mie={4}>\n\t\t\t\t\t<UserAvatar size='x20' username={value} />\n\t\t\t\t\t<Box verticalAlign='middle' is='span' margin='none' mi={4}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Box>\n\t\t\t\t</Chip>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }): ReactElement => (\n\t\t\t\t<Option key={value} label={label} avatar={<UserAvatar size={Options.AvatarSize} username={value} />} {...props} />\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(UserAutoComplete);\n",null],"names":["_regeneratorRuntime","_extends","_slicedToArray","_objectWithoutProperties","AutoComplete","Option","Box","Chip","Options","useDebouncedValue","useEndpoint","useQuery","React","memo","useMemo","useState","UserAvatar","module","link","default","v","query","term","arguments","length","undefined","conditions","selector","JSON","stringify","exportDefault","_ref","value","onChange","props","_excluded","_props$conditions","_useState2","filter","setFilter","debouncedFilter","usersAutoCompleteEndpoint","data","_useQuery","async","_context","prev","next","abrupt","stop","Promise","options","items","map","user","username","label","name","createElement","renderSelected","_ref2","_ref2$selected","selected","height","mie","size","verticalAlign","is","margin","mi","renderItem","_ref3","_excluded2","key","avatar","AvatarSize"],"mappings":"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"}