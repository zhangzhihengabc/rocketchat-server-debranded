)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/AutoCompleteDepartmentMultiple.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { PaginatedMultiSelectFiltered } from '@rocket.chat/fuselage';\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../hooks/useAsyncState';\nimport { useDepartmentsList } from './Omnichannel/hooks/useDepartmentsList';\n\ntype AutoCompleteDepartmentMultipleProps = {\n\tvalue?: PaginatedMultiSelectOption[];\n\tonChange: (value: PaginatedMultiSelectOption[]) => void;\n\tonlyMyDepartments?: boolean;\n\tshowArchived?: boolean;\n\tenabled?: boolean;\n} & Omit<ComponentProps<typeof PaginatedMultiSelectFiltered>, 'options'>;\n\nconst AutoCompleteDepartmentMultiple = ({\n\tvalue = [],\n\tonlyMyDepartments = false,\n\tshowArchived = false,\n\tenabled = false,\n\tonChange = () => undefined,\n}: AutoCompleteDepartmentMultipleProps) => {\n\tconst t = useTranslation();\n\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\n\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\n\t\tuseMemo(\n\t\t\t() => ({ filter: debouncedDepartmentsFilter, onlyMyDepartments, ...(showArchived && { showArchived: true }), enabled }),\n\t\t\t[debouncedDepartmentsFilter, enabled, onlyMyDepartments, showArchived],\n\t\t),\n\t);\n\n\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst departmentOptions = useMemo(() => {\n\t\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value)) || [];\n\t\treturn [...departmentsItems, ...pending];\n\t}, [departmentsItems, value]);\n\n\treturn (\n\t\t<PaginatedMultiSelectFiltered\n\t\t\twithTitle\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={departmentsFilter}\n\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\toptions={departmentOptions}\n\t\t\twidth='100%'\n\t\t\tflexShrink={0}\n\t\t\tflexGrow={0}\n\t\t\tplaceholder={t('Select_an_option')}\n\t\t\tendReached={\n\t\t\t\tdepartmentsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t? () => undefined\n\t\t\t\t\t: (start?: number) => {\n\t\t\t\t\t\t\tif (start === undefined) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn loadMoreDepartments(start, Math.min(50, departmentsTotal));\n\t\t\t\t\t  }\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteDepartmentMultiple);\n",null],"names":["_toConsumableArray","_objectSpread","_slicedToArray","PaginatedMultiSelectFiltered","useDebouncedValue","useTranslation","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useDepartmentsList","module","default","link","v","exportDefault","_ref","_ref$value","value","_ref$onlyMyDepartment","onlyMyDepartments","_ref$showArchived","showArchived","_ref$enabled","enabled","_ref$onChange","onChange","t","_useState2","departmentsFilter","setDepartmentsFilter","debouncedDepartmentsFilter","_useDepartmentsList","filter","departmentsList","itemsList","loadMoreDepartments","loadMoreItems","_useRecordList","departmentsPhase","phase","departmentsItems","items","departmentsTotal","itemCount","departmentOptions","pending","_ref2","find","dep","concat","createElement","withTitle","setFilter","options","width","flexShrink","flexGrow","placeholder","endReached","LOADING","start","undefined","Math","min"],"mappings":"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"}