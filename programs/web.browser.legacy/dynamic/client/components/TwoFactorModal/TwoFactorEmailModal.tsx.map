)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/TwoFactorModal/TwoFactorEmailModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, FieldGroup, TextInput, Field, FieldLabel, FieldRow, FieldError } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ChangeEvent, SyntheticEvent } from 'react';\nimport React, { useState } from 'react';\n\nimport GenericModal from '../GenericModal';\nimport type { OnConfirm } from './TwoFactorModal';\nimport { Method } from './TwoFactorModal';\n\ntype TwoFactorEmailModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n\temailOrUsername: string;\n\tinvalidAttempt?: boolean;\n};\n\nconst TwoFactorEmailModal = ({ onConfirm, onClose, emailOrUsername, invalidAttempt }: TwoFactorEmailModalProps): ReactElement => {\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst sendEmailCode = useEndpoint('POST', '/v1/users.2fa.sendEmailCode');\n\n\tconst onClickResendCode = async (): Promise<void> => {\n\t\ttry {\n\t\t\tawait sendEmailCode({ emailOrUsername });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Email_sent') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-email-send-failed', { message: error }),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onConfirmEmailCode = (e: SyntheticEvent): void => {\n\t\te.preventDefault();\n\t\tonConfirm(code, Method.EMAIL);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\tconst id = useUniqueId();\n\n\treturn (\n\t\t<GenericModal\n\t\t\twrapperFunction={(props) => <Box is='form' onSubmit={onConfirmEmailCode} {...props} />}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Two-factor_authentication_email')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon='info'\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<FieldGroup>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel alignSelf='stretch' htmlFor={id}>\n\t\t\t\t\t\t{t('Verify_your_email_with_the_code_we_sent')}\n\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput id={id} ref={ref} value={code} onChange={onChange} placeholder={t('Enter_authentication_code')} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{invalidAttempt && <FieldError>{t('Invalid_password')}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t\t<Box display='flex' justifyContent='end' is='a' onClick={onClickResendCode}>\n\t\t\t\t{t('Cloud_resend_email')}\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorEmailModal;\n",null],"names":["_regeneratorRuntime","_extends","_slicedToArray","Box","FieldGroup","TextInput","Field","FieldLabel","FieldRow","FieldError","useAutoFocus","useUniqueId","useToastMessageDispatch","useEndpoint","useTranslation","React","useState","GenericModal","Method","module","link","default","v","exportDefault","_ref","onConfirm","onClose","emailOrUsername","invalidAttempt","dispatchToastMessage","t","_useState2","code","setCode","ref","sendEmailCode","onConfirmEmailCode","e","preventDefault","EMAIL","id","createElement","wrapperFunction","props","is","onSubmit","onCancel","confirmText","title","variant","icon","confirmDisabled","alignSelf","htmlFor","value","onChange","_ref2","currentTarget","placeholder","display","justifyContent","onClick","async","_context","prev","next","awrap","type","message","t0","stop","Promise"],"mappings":"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"}