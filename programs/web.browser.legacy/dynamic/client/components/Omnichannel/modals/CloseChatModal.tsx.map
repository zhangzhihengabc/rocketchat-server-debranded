)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/Omnichannel/modals/CloseChatModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextInput,\n\tModal,\n\tBox,\n\tCheckBox,\n\tDivider,\n\tEmailInput,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n} from '@rocket.chat/fuselage';\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../../ee/client/hooks/useHasLicenseModule';\nimport { dispatchToastMessage } from '../../../lib/toast';\nimport GenericModal from '../../GenericModal';\nimport Tags from '../Tags';\n\nconst CloseChatModal = ({\n\tdepartment,\n\tvisitorEmail,\n\tonCancel,\n\tonConfirm,\n}: {\n\tdepartment?: ILivechatDepartment | null;\n\tvisitorEmail?: string;\n\tonCancel: () => void;\n\tonConfirm: (\n\t\tcomment?: string,\n\t\ttags?: string[],\n\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\trequestData?: { email: string; subject: string },\n\t) => Promise<void>;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst {\n\t\tformState: { errors },\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetError,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t} = useForm();\n\n\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\n\tconst [tagRequired, setTagRequired] = useState(false);\n\n\tconst tags = watch('tags');\n\tconst comment = watch('comment');\n\tconst transcriptEmail = watch('transcriptEmail');\n\tconst subject = watch('subject');\n\n\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\n\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n\n\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail;\n\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n\n\tconst handleTags = (value: string[]): void => {\n\t\tsetValue('tags', value);\n\t};\n\n\tconst onSubmit = useCallback(\n\t\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\n\t\t\tconst preferences = {\n\t\t\t\tomnichannelTranscriptPDF: !!transcriptPDF,\n\t\t\t\tomnichannelTranscriptEmail: !!transcriptEmail,\n\t\t\t};\n\t\t\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\n\n\t\t\tif (!comment?.trim() && commentRequired) {\n\t\t\t\tsetError('comment', { type: 'custom', message: t('The_field_is_required', t('Comment')) });\n\t\t\t}\n\n\t\t\tif (transcriptEmail && !subject) {\n\t\t\t\tsetError('subject', { type: 'custom', message: t('The_field_is_required', t('Subject')) });\n\t\t\t}\n\n\t\t\tif (!tags?.length && tagRequired) {\n\t\t\t\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\n\t\t\t}\n\n\t\t\tif (!errors.comment || errors.tags) {\n\t\t\t\tonConfirm(comment, tags, preferences, requestData);\n\t\t\t}\n\t\t},\n\t\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm],\n\t);\n\n\tconst cannotSubmit = useMemo(() => {\n\t\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\n\t\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\n\t\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n\n\t\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n\n\tuseEffect(() => {\n\t\tif (department?.requestTagBeforeClosingChat) {\n\t\t\tsetTagRequired(true);\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tif (commentRequired) {\n\t\t\tsetFocus('comment');\n\t\t}\n\t}, [commentRequired, setFocus]);\n\n\tuseEffect(() => {\n\t\tif (tagRequired) {\n\t\t\tregister('tags');\n\t\t}\n\t}, [register, tagRequired]);\n\n\tuseEffect(() => {\n\t\tif (transcriptEmail) {\n\t\t\tif (!visitorEmail) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetValue('subject', subject || t('Transcript_of_your_livechat_conversation'));\n\t\t}\n\t}, [transcriptEmail, setValue, visitorEmail, subject, t]);\n\n\treturn commentRequired || tagRequired || canSendTranscript ? (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='baloon-close-top-right' />\n\t\t\t\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<Box color='annotation'>{t('Close_room_description')}</Box>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t{...register('comment')}\n\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\terrors.comment &&\n\t\t\t\t\t\t\t\t\tt('error-the-field-is-required', {\n\t\t\t\t\t\t\t\t\t\tfield: t('Comment'),\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tplaceholder={t('Please_add_a_comment')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.comment?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\n\t\t\t\t\t\t<FieldError>{errors.tags?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t{canSendTranscript && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t{canSendTranscriptPDF && (\n\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\n\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-pdf' color='default' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t\t{t('Omnichannel_transcript_pdf')}\n\t\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{canSendTranscriptEmail && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\n\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-email' color='default' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('Omnichannel_transcript_email')}\n\t\t\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t{transcriptEmail && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={14}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('subject', { required: true })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='active'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.subject &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tt('error-the-field-is-required', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfield: t('Subject'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Field marginBlockStart={16}>\n\t\t\t\t\t\t\t\t<FieldLabel color='annotation' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t{canSendTranscriptPDF && canSendTranscriptEmail\n\t\t\t\t\t\t\t\t\t\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\n\t\t\t\t\t\t\t\t\t\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\n\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button type='submit' disabled={cannotSubmit} primary>\n\t\t\t\t\t\t{t('Confirm')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t) : (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\n\t\t\tonConfirm={(): Promise<void> => onConfirm()}\n\t\t\tonCancel={onCancel}\n\t\t\tonClose={onCancel}\n\t\t\tconfirmText={t('Confirm')}\n\t\t></GenericModal>\n\t);\n};\n\nexport default CloseChatModal;\n",null],"names":["_extends","_slicedToArray","Field","FieldGroup","Button","TextInput","Modal","Box","CheckBox","Divider","EmailInput","FieldLabel","FieldRow","FieldError","usePermission","useSetting","useTranslation","useUserPreference","React","useCallback","useState","useEffect","useMemo","useForm","useHasLicenseModule","dispatchToastMessage","GenericModal","Tags","module","link","default","v","exportDefault","_ref","_useUserPreference","_useUserPreference2","_errors$comment","_errors$tags","_errors$subject","department","visitorEmail","onCancel","onConfirm","t","_useForm","errors","formState","handleSubmit","register","setError","setFocus","setValue","watch","commentRequired","_useState2","tagRequired","setTagRequired","tags","comment","transcriptEmail","subject","userTranscriptEmail","userTranscriptPDF","hasLicense","transcriptPDFPermission","canSendTranscriptEmail","transcriptEmailPermission","canSendTranscriptPDF","canSendTranscript","onSubmit","_ref2","transcriptPDF","requestData","email","undefined","trim","type","message","length","omnichannelTranscriptPDF","omnichannelTranscriptEmail","cannotSubmit","cannotSendTag","cannotSendComment","cannotSendTranscriptEmail","Boolean","requestTagBeforeClosingChat","createElement","wrapperFunction","props","is","Header","Icon","name","Title","Close","onClick","Content","fontScale","color","required","error","field","flexGrow","placeholder","handler","value","_id","Fragment","marginBlockStart","id","htmlFor","disabled","className","Footer","FooterControllers","primary","variant","title","onClose","confirmText"],"mappings":"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"}