)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/Omnichannel/Tags.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { TextInput, Chip, Button, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent, ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\n\nimport { CurrentChatTags } from '../../views/omnichannel/additionalForms';\nimport { FormSkeleton } from './Skeleton';\nimport { useLivechatTags } from './hooks/useLivechatTags';\n\ntype TagsProps = {\n\ttags?: string[];\n\thandler: (value: string[]) => void;\n\terror?: string;\n\ttagRequired?: boolean;\n\tdepartment?: string;\n};\n\nconst Tags = ({ tags = [], handler, error, tagRequired, department }: TagsProps): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst { data: tagsResult, isInitialLoading } = useLivechatTags({\n\t\tdepartment,\n\t\tviewAll: !department,\n\t});\n\n\tconst customTags = useMemo(() => {\n\t\treturn tags.filter((tag) => !tagsResult?.tags.find((rtag) => rtag.name === tag));\n\t}, [tags, tagsResult?.tags]);\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [tagValue, handleTagValue] = useState('');\n\n\tconst paginatedTagValue = useMemo(() => tags.map((tag) => ({ label: tag, value: tag })), [tags]);\n\n\tconst removeTag = (tagToRemove: string): void => {\n\t\tif (!tags) return;\n\n\t\thandler(tags.filter((tag) => tag !== tagToRemove));\n\t};\n\n\tconst handleTagTextSubmit = useMutableCallback(() => {\n\t\tif (!tags) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!tagValue || tagValue.trim() === '') {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Enter_a_tag') });\n\t\t\thandleTagValue('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (tags.includes(tagValue)) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Tag_already_exists') });\n\t\t\treturn;\n\t\t}\n\t\thandler([...tags, tagValue]);\n\t\thandleTagValue('');\n\t});\n\n\tif (isInitialLoading) {\n\t\treturn <FormSkeleton />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<FieldLabel required={tagRequired} mb={4}>\n\t\t\t\t{t('Tags')}\n\t\t\t</FieldLabel>\n\n\t\t\t{tagsResult?.tags && tagsResult?.tags.length ? (\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<CurrentChatTags\n\t\t\t\t\t\tvalue={paginatedTagValue}\n\t\t\t\t\t\thandler={(tags: { label: string; value: string }[]): void => {\n\t\t\t\t\t\t\thandler(tags.map((tag) => tag.label));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdepartment={department}\n\t\t\t\t\t\tviewAll={!department}\n\t\t\t\t\t/>\n\t\t\t\t</FieldRow>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\tvalue={tagValue}\n\t\t\t\t\t\t\tonChange={({ currentTarget }: ChangeEvent<HTMLInputElement>): void => handleTagValue(currentTarget.value)}\n\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\tplaceholder={t('Enter_a_tag')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button disabled={!tagValue} mis={8} title={t('Add')} onClick={handleTagTextSubmit}>\n\t\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{customTags.length > 0 && (\n\t\t\t\t<FieldRow justifyContent='flex-start'>\n\t\t\t\t\t{customTags?.map((tag, i) => (\n\t\t\t\t\t\t<Chip key={i} onClick={(): void => removeTag(tag)} mie={8}>\n\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t</Chip>\n\t\t\t\t\t))}\n\t\t\t\t</FieldRow>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Tags;\n",null],"names":["_toConsumableArray","_slicedToArray","TextInput","Chip","Button","FieldLabel","FieldRow","useMutableCallback","useToastMessageDispatch","useTranslation","React","useMemo","useState","CurrentChatTags","FormSkeleton","useLivechatTags","module","link","default","v","exportDefault","_ref","_ref$tags","tags","handler","error","tagRequired","department","t","_useLivechatTags","viewAll","tagsResult","data","isInitialLoading","customTags","filter","tag","find","rtag","name","dispatchToastMessage","_useState2","tagValue","handleTagValue","paginatedTagValue","map","label","value","removeTag","tagToRemove","handleTagTextSubmit","trim","type","message","includes","concat","createElement","Fragment","required","mb","length","onChange","_ref2","currentTarget","flexGrow","placeholder","disabled","mis","title","onClick","justifyContent","i","key","mie"],"mappings":"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"}