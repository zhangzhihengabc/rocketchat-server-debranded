)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/RoomIcon/OmnichannelRoomIcon/lib/OmnichannelRoomIcon.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Emitter } from '@rocket.chat/emitter';\nimport DOMPurify from 'dompurify';\n\nimport { sdk } from '../../../../../app/utils/client/lib/SDKClient';\n\nconst OmnichannelRoomIcon = new (class extends Emitter {\n\ticons = new Map<string, string>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tpublic get(appId: string, icon: string): string | undefined {\n\t\tif (!appId || !icon) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.icons.has(`${appId}-${icon}`)) {\n\t\t\treturn `${appId}-${icon}`;\n\t\t}\n\t\t// TODO: update the apps icons to send JSON instead of a string. This will allow us to use APIClient.get()\n\n\t\tsdk.rest\n\t\t\t.send(`/apps/public/${appId}/get-sidebar-icon?icon=${icon}`, 'GET')\n\t\t\t.then((response: any) => {\n\t\t\t\tresponse.text().then((text: any) => {\n\t\t\t\t\tthis.icons.set(\n\t\t\t\t\t\t`${appId}-${icon}`,\n\t\t\t\t\t\tDOMPurify.sanitize(text, {\n\t\t\t\t\t\t\tFORBID_ATTR: ['id'],\n\t\t\t\t\t\t\tNAMESPACE: 'http://www.w3.org/2000/svg',\n\t\t\t\t\t\t\tUSE_PROFILES: { svg: true, svgFilters: true },\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.replace(`<svg`, `<symbol id=\"${appId}-${icon}\"`)\n\t\t\t\t\t\t\t.replace(`</svg>`, '</symbol>'),\n\t\t\t\t\t);\n\t\t\t\t\tthis.emit('change');\n\t\t\t\t\tthis.emit(`${appId}-${icon}`);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error: any) => {\n\t\t\t\tconsole.error('error from get-sidebar-icon', error);\n\t\t\t});\n\t}\n})();\n\nexport default OmnichannelRoomIcon;\n",null],"names":["module","link","default","_inheritsLoose","Emitter","v","DOMPurify","sdk","OmnichannelRoomIcon","_Emitter","_class2","_this","call","icons","Map","_proto","prototype","get","appId","icon","_this2","has","rest","send","then","response","text","set","sanitize","FORBID_ATTR","NAMESPACE","USE_PROFILES","svg","svgFilters","replace","emit","catch","error","console","exportDefault"],"mappings":"uBAAkBA,EAAMC,IAAA,CAAA,uCAAuB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAtCH,EAASC,IAAA,CAAM,uBAAuB,CAAAG,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,YAAAA,CAAA,QAAA,SAAAK,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAO,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAK/C,IALAJ,EAAAC,EAA+CE,EAAAC,EAKzCC,EAAsB,GAAA,CAAA,SAAAC,CAAA,EAG3B,SAAAC,IAAA,IAAAC,EAFiC,MAGxBA,AAARA,CAAAA,EAAAF,EAAAG,IAAA,CAAA,IAAA,GAAO,IAAA,EAHRC,KAAK,CAAG,IAAIC,IAAqBH,CAIjC,CAiCC,OAtC0BR,EAAAO,EAAAD,GAK1BM,AAAAL,EAAAM,SAAA,CAEMC,GAAG,CAAH,SAAIC,CAAa,CAAEC,CAAY,EAAA,IAAAC,EAAA,IAAA,CACrC,GAAI,AAACF,GAAUC,GAIf,GAAI,IAAI,CAACN,KAAK,CAACQ,GAAG,CAAIH,EAAK,IAAIC,GAC9B,OAAUD,EAAK,IAAIC,EAIpBZ,EAAIe,IAAI,CACNC,IAAI,CAAA,gBAAiBL,EAAK,0BAA0BC,EAAQ,OAC5DK,IAAI,CAAC,SAACC,CAAa,EACnBA,EAASC,IAAI,GAAGF,IAAI,CAAC,SAACE,CAAS,EAC9BN,EAAKP,KAAK,CAACc,GAAG,CACVT,EAAK,IAAIC,EACZb,EAAUsB,QAAQ,CAACF,EAAM,CACxBG,YAAa,CAAC,KAAK,CACnBC,UAAW,6BACXC,aAAc,CAAEC,IAAK,CAAA,EAAMC,WAAY,CAAA,CAAI,IAE1CC,OAAO,CAAA,OAAA,eAAwBhB,EAAK,IAAIC,EAAI,KAC5Ce,OAAO,CAAA,SAAW,cAErBd,EAAKe,IAAI,CAAC,UACVf,EAAKe,IAAI,CAAIjB,EAAK,IAAIC,EACvB,EACD,GACCiB,KAAK,CAAC,SAACC,CAAU,EACjBC,QAAQD,KAAK,CAAC,8BAA+BA,EAC9C,GACF,EAAC3B,CAAA,EAtC6CN,EAAO,EALtDJ,EAAOuC,aAAW,CA8CH/B"}