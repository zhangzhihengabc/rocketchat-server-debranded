)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/UserStatusMenu.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { UserStatus as UserStatusType } from '@rocket.chat/core-typings';\nimport { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ComponentProps } from 'react';\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\n\nimport { UserStatus } from './UserStatus';\n\ntype UserStatusMenuProps = {\n\tmargin: ComponentProps<typeof Box>['margin'];\n\tonChange: (type: UserStatusType) => void;\n\tinitialStatus?: UserStatusType;\n\toptionWidth?: ComponentProps<typeof Box>['width'];\n\tplacement?: ComponentProps<typeof PositionAnimated>['placement'];\n};\n\nconst UserStatusMenu = ({\n\tmargin,\n\tonChange,\n\tinitialStatus = UserStatusType.OFFLINE,\n\toptionWidth = undefined,\n\tplacement = 'bottom-end',\n}: UserStatusMenuProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [status, setStatus] = useState(initialStatus);\n\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption') as boolean;\n\n\tconst options = useMemo(() => {\n\t\tconst renderOption = (status: UserStatusType, label: string): ReactElement => (\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t<Box marginInlineEnd={8}>\n\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t</Box>\n\t\t\t\t{label}\n\t\t\t</Box>\n\t\t);\n\n\t\tconst statuses: Array<[value: UserStatusType, label: ReactElement]> = [\n\t\t\t[UserStatusType.ONLINE, renderOption(UserStatusType.ONLINE, t('Online'))],\n\t\t\t[UserStatusType.AWAY, renderOption(UserStatusType.AWAY, t('Away'))],\n\t\t\t[UserStatusType.BUSY, renderOption(UserStatusType.BUSY, t('Busy'))],\n\t\t];\n\n\t\tif (allowInvisibleStatus) {\n\t\t\tstatuses.push([UserStatusType.OFFLINE, renderOption(UserStatusType.OFFLINE, t('Offline'))]);\n\t\t}\n\n\t\treturn statuses;\n\t}, [t, allowInvisibleStatus]);\n\n\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\n\t\tsetStatus(selected);\n\t\treset();\n\t\thide();\n\t});\n\n\tconst ref = useRef<HTMLButtonElement>(null);\n\tconst onClick = useCallback(() => {\n\t\tif (!ref?.current) {\n\t\t\treturn;\n\t\t}\n\t\tref.current.focus();\n\t\tshow();\n\t\tref.current.classList.add('focus-visible');\n\t}, [show]);\n\n\tconst handleSelection = useCallback(\n\t\t([selected]) => {\n\t\t\tsetStatus(selected);\n\t\t\treset();\n\t\t\thide();\n\t\t},\n\t\t[hide, reset],\n\t);\n\n\tuseEffect(() => onChange(status), [status, onChange]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tref={ref}\n\t\t\t\tsmall\n\t\t\t\tsquare\n\t\t\t\tsecondary\n\t\t\t\tonClick={onClick}\n\t\t\t\tonBlur={hide}\n\t\t\t\tonKeyUp={handleKeyUp}\n\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\tmargin={margin}\n\t\t\t\taria-label={t('User_status_menu')}\n\t\t\t>\n\t\t\t\t<UserStatus status={status} />\n\t\t\t</Button>\n\t\t\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\n\t\t\t\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\n\t\t\t</PositionAnimated>\n\t\t</>\n\t);\n};\n\nexport default UserStatusMenu;\n",null],"names":["_slicedToArray","UserStatusType","Button","PositionAnimated","Options","useCursor","Box","useSetting","useTranslation","React","useRef","useCallback","useState","useMemo","useEffect","UserStatus","module","link","default","v","exportDefault","_ref","margin","onChange","_ref$initialStatus","initialStatus","OFFLINE","_ref$optionWidth","optionWidth","_ref$placement","placement","t","_useState2","status","setStatus","allowInvisibleStatus","options","renderOption","label","createElement","display","flexDirection","alignItems","marginInlineEnd","statuses","ONLINE","AWAY","BUSY","push","_useCursor","_ref2","_ref3","selected","_ref4","hide","_ref5","reset","_useCursor2","cursor","handleKeyDown","handleKeyUp","_useCursor2$","visible","show","ref","onClick","current","focus","classList","add","handleSelection","_ref6","_ref7","Fragment","small","square","secondary","onBlur","onKeyUp","onKeyDown","width","anchor","undefined","onSelect"],"mappings":"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"}