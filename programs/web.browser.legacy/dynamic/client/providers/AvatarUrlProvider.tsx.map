)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/AvatarUrlProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AvatarUrlContext, useSetting } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { getURL } from '../../app/utils/client/getURL';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\n\nconst AvatarUrlProvider: FC = ({ children }) => {\n\tconst cdnAvatarUrl = String(useSetting('CDN_PREFIX') || '');\n\tconst externalProviderUrl = String(useSetting('Accounts_AvatarExternalProviderUrl') || '');\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tgetUserPathAvatar: ((): ((uid: string, etag?: string) => string) => {\n\t\t\t\tif (externalProviderUrl) {\n\t\t\t\t\treturn (uid: string): string => externalProviderUrl.trim().replace(/\\/+$/, '').replace('{username}', uid);\n\t\t\t\t}\n\t\t\t\tif (cdnAvatarUrl) {\n\t\t\t\t\treturn (uid: string, etag?: string): string => `${cdnAvatarUrl}/avatar/${uid}${etag ? `?etag=${etag}` : ''}`;\n\t\t\t\t}\n\t\t\t\treturn (uid: string, etag?: string): string => getURL(`/avatar/${uid}${etag ? `?etag=${etag}` : ''}`);\n\t\t\t})(),\n\t\t\tgetRoomPathAvatar: ({ type, ...room }: any): string =>\n\t\t\t\troomCoordinator.getRoomDirectives(type || room.t).getAvatarPath({ username: room._id, ...room }) || '',\n\t\t}),\n\t\t[externalProviderUrl, cdnAvatarUrl],\n\t);\n\n\treturn <AvatarUrlContext.Provider children={children} value={contextValue} />;\n};\n\nexport default AvatarUrlProvider;\n",null],"names":["_objectSpread","_objectWithoutProperties","AvatarUrlContext","useSetting","React","useMemo","getURL","roomCoordinator","module","link","default","v","exportDefault","_ref","children","cdnAvatarUrl","String","externalProviderUrl","contextValue","getUserPathAvatar","uid","trim","replace","etag","getRoomPathAvatar","_ref2","type","room","_excluded","getRoomDirectives","t","getAvatarPath","username","_id","createElement","Provider","value"],"mappings":"2BAAAA,EAAwEC,EAAxEC,EAASC,EAA+DC,EAAAC,EAAAC,EAAAC,aAA/DC,EAAgBC,IAAE,CAAA,uCAAkB,CAAAC,QAA2B,SAAAC,CAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAA7CO,EAAYC,IAAAA,CAAAA,2BAAgC,CAACP,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAP,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAF,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAD,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAxEC,EAAOI,aAAE,CAOqB,SAAAC,CAAA,EAAiB,IAAdC,EAAQD,EAARC,QAAQ,CAClCC,EAAeC,OAAOb,EAAW,eAAiB,IAClDc,EAAsBD,OAAOb,EAAW,uCAAyC,IACjFe,EAAeb,EACpB,WAAA,MAAO,CACNc,kBACC,AAAIF,EACI,SAACG,CAAW,EAAA,OAAaH,EAAoBI,IAAI,GAAGC,OAAO,CAAC,OAAQ,IAAIA,OAAO,CAAC,aAAcF,EAAI,EAEtGL,EACI,SAACK,CAAW,CAAEG,CAAa,EAAA,OAAgBR,EAAY,WAAWK,EAAMG,CAAAA,EAAI,SAAYA,EAAS,EAAA,CAAE,EAEpG,SAACH,CAAW,CAAEG,CAAa,EAAA,OAAajB,EAAM,WAAYc,EAAMG,CAAAA,EAAI,SAAYA,EAAS,EAAA,EAAK,EAEtGC,kBAAmB,SAAAC,CAAA,EAAA,IAAGC,EAAID,EAAJC,IAAI,CAAKC,EAAI1B,EAAAwB,EAAAG,GAAA,OAClCrB,EAAgBsB,iBAAiB,CAACH,GAAQC,EAAKG,CAAC,EAAEC,aAAa,CAAA/B,EAAA,CAAGgC,SAAUL,EAAKM,GAAAA,AAAG,EAAKN,KAAW,EAAE,EACvG,EACD,CAACV,EAAqBF,EAAa,EAGpC,OAAOX,EAAA8B,aAAA,CAAChC,EAAiBiC,QAAQ,CAAA,CAACrB,SAAUA,EAAUsB,MAAOlB,CAAa,EAC3E"}