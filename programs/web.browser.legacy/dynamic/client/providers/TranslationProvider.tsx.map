)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/TranslationProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport languages from '@rocket.chat/i18n/dist/languages';\nimport en from '@rocket.chat/i18n/src/locales/en.i18n.json';\nimport { normalizeLanguage } from '@rocket.chat/tools';\nimport type { TranslationKey, TranslationContextValue } from '@rocket.chat/ui-contexts';\nimport { useMethod, useSetting, TranslationContext } from '@rocket.chat/ui-contexts';\nimport type i18next from 'i18next';\nimport I18NextHttpBackend from 'i18next-http-backend';\nimport sprintf from 'i18next-sprintf-postprocessor';\nimport moment from 'moment';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useEffect, useMemo } from 'react';\nimport { I18nextProvider, initReactI18next, useTranslation } from 'react-i18next';\n\nimport { CachedCollectionManager } from '../../app/ui-cached-collection/client';\nimport { getURL } from '../../app/utils/client';\nimport { i18n, addSprinfToI18n } from '../../app/utils/lib/i18n';\nimport { AppClientOrchestratorInstance } from '../../ee/client/apps/orchestrator';\nimport { applyCustomTranslations } from '../lib/utils/applyCustomTranslations';\nimport { isRTLScriptLanguage } from '../lib/utils/isRTLScriptLanguage';\n\ni18n.use(I18NextHttpBackend).use(initReactI18next).use(sprintf);\n\ntype TranslationNamespace = Extract<TranslationKey, `${string}.${string}`> extends `${infer T}.${string}`\n\t? T extends Lowercase<T>\n\t\t? T\n\t\t: never\n\t: never;\n\nconst namespacesDefault = ['core', 'onboarding', 'registration', 'cloud'] as TranslationNamespace[];\n\nconst parseToJSON = (customTranslations: string): Record<string, Record<string, string>> | false => {\n\ttry {\n\t\treturn JSON.parse(customTranslations);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nconst localeCache = new Map<string, Promise<string>>();\n\nconst useI18next = (lng: string): typeof i18next => {\n\tconst customTranslations = useSetting('Custom_Translations');\n\n\tconst parsedCustomTranslations = useMemo(() => {\n\t\tif (!customTranslations || typeof customTranslations !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\treturn parseToJSON(customTranslations);\n\t}, [customTranslations]);\n\n\tconst extractKeys = useMutableCallback(\n\t\t(source: Record<string, string>, lngs?: string | string[], namespaces: string | string[] = []): { [key: string]: any } => {\n\t\t\tconst result: { [key: string]: any } = {};\n\n\t\t\tfor (const [key, value] of Object.entries(source)) {\n\t\t\t\tconst [prefix] = key.split('.');\n\n\t\t\t\tif (prefix && Array.isArray(namespaces) ? namespaces.includes(prefix) : prefix === namespaces) {\n\t\t\t\t\tresult[key.slice(prefix.length + 1)] = value;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(namespaces) ? namespaces.includes('core') : namespaces === 'core') {\n\t\t\t\t\tresult[key] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lngs && parsedCustomTranslations) {\n\t\t\t\tfor (const language of Array.isArray(lngs) ? lngs : [lngs]) {\n\t\t\t\t\tif (!parsedCustomTranslations[language]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const [key, value] of Object.entries(parsedCustomTranslations[language])) {\n\t\t\t\t\t\tconst prefix = (Array.isArray(namespaces) ? namespaces : [namespaces]).find((namespace) => key.startsWith(`${namespace}.`));\n\n\t\t\t\t\t\tif (prefix) {\n\t\t\t\t\t\t\tresult[key.slice(prefix.length + 1)] = value;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Array.isArray(namespaces) ? namespaces.includes('core') : namespaces === 'core') {\n\t\t\t\t\t\t\tresult[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t);\n\n\tif (!i18n.isInitialized) {\n\t\ti18n.init({\n\t\t\tlng,\n\t\t\tfallbackLng: 'en',\n\t\t\tns: namespacesDefault,\n\t\t\tnsSeparator: '.',\n\t\t\tresources: {\n\t\t\t\ten: extractKeys(en),\n\t\t\t},\n\t\t\tpartialBundledLanguages: true,\n\t\t\tdefaultNS: 'core',\n\t\t\tbackend: {\n\t\t\t\tloadPath: 'i18n/{{lng}}.json',\n\t\t\t\tparse: (data: string, lngs?: string | string[], namespaces: string | string[] = []) =>\n\t\t\t\t\textractKeys(JSON.parse(data), lngs, namespaces),\n\t\t\t\trequest: (_options, url, _payload, callback) => {\n\t\t\t\t\tconst params = url.split('/');\n\n\t\t\t\t\tconst lng = params[params.length - 1];\n\n\t\t\t\t\tlet promise = localeCache.get(lng);\n\n\t\t\t\t\tif (!promise) {\n\t\t\t\t\t\tpromise = fetch(getURL(url)).then((res) => res.text());\n\t\t\t\t\t\tlocaleCache.set(lng, promise);\n\t\t\t\t\t}\n\n\t\t\t\t\tpromise.then(\n\t\t\t\t\t\t(res) => callback(null, { data: res, status: 200 }),\n\t\t\t\t\t\t() => callback(null, { data: '', status: 500 }),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t\treact: {\n\t\t\t\tuseSuspense: true,\n\t\t\t\tbindI18n: 'languageChanged loaded',\n\t\t\t\tbindI18nStore: 'added removed',\n\t\t\t},\n\t\t\tinterpolation: {\n\t\t\t\tescapeValue: false,\n\t\t\t},\n\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tif (i18n.language !== lng) {\n\t\t\ti18n.changeLanguage(lng);\n\t\t}\n\t}, [lng]);\n\n\tuseEffect(() => {\n\t\tif (!parsedCustomTranslations) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [ln, translations] of Object.entries(parsedCustomTranslations)) {\n\t\t\tif (!translations) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst namespaces = Object.entries(translations).reduce((acc, [key, value]): Record<string, Record<string, string>> => {\n\t\t\t\tconst namespace = key.split('.')[0];\n\n\t\t\t\tif (namespacesDefault.includes(namespace as unknown as TranslationNamespace)) {\n\t\t\t\t\tacc[namespace] = acc[namespace] ?? {};\n\t\t\t\t\tacc[namespace][key] = value;\n\t\t\t\t\tacc[namespace][key.slice(namespace.length + 1)] = value;\n\t\t\t\t\treturn acc;\n\t\t\t\t}\n\t\t\t\tacc.project = acc.project ?? {};\n\t\t\t\tacc.project[key] = value;\n\t\t\t\treturn acc;\n\t\t\t}, {} as Record<string, Record<string, string>>);\n\n\t\t\tfor (const [namespace, translations] of Object.entries(namespaces)) {\n\t\t\t\ti18n.addResourceBundle(ln, namespace, translations);\n\t\t\t}\n\t\t}\n\t}, [parsedCustomTranslations]);\n\n\treturn i18n;\n};\n\ntype TranslationProviderProps = {\n\tchildren: ReactNode;\n};\n\nconst useAutoLanguage = () => {\n\tconst serverLanguage = useSetting<string>('Language');\n\tconst browserLanguage = normalizeLanguage(window.navigator.userLanguage ?? window.navigator.language);\n\tconst defaultUserLanguage = browserLanguage || serverLanguage || 'en';\n\n\t// if the language is supported, if not remove the region\n\tconst suggestedLanguage = languages.includes(defaultUserLanguage) ? defaultUserLanguage : defaultUserLanguage.split('-').shift() ?? 'en';\n\n\t// usually that value is set based on the user's config language\n\tconst [language] = useLocalStorage('userLanguage', suggestedLanguage);\n\n\tdocument.documentElement.classList[isRTLScriptLanguage(language) ? 'add' : 'remove']('rtl');\n\tdocument.documentElement.setAttribute('dir', isRTLScriptLanguage(language) ? 'rtl' : 'ltr');\n\tdocument.documentElement.lang = language;\n\n\t// if user has no language set, we should set it to the default language\n\treturn language || suggestedLanguage;\n};\n\nconst getLanguageName = (code: string, lng: string): string => {\n\ttry {\n\t\tconst lang = new Intl.DisplayNames([lng], { type: 'language' });\n\t\treturn lang.of(code) ?? code;\n\t} catch (e) {\n\t\treturn code;\n\t}\n};\n\nconst TranslationProvider = ({ children }: TranslationProviderProps): ReactElement => {\n\tconst loadLocale = useMethod('loadLocale');\n\n\tconst language = useAutoLanguage();\n\tconst i18nextInstance = useI18next(language);\n\tconst availableLanguages = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\ten: 'Default',\n\t\t\t\tname: i18nextInstance.t('Default'),\n\t\t\t\togName: i18nextInstance.t('Default'),\n\t\t\t\tkey: '',\n\t\t\t},\n\t\t\t...[...new Set([...i18nextInstance.languages, ...languages])].map((key) => ({\n\t\t\t\ten: key,\n\t\t\t\tname: getLanguageName(key, language),\n\t\t\t\togName: getLanguageName(key, key),\n\t\t\t\tkey,\n\t\t\t})),\n\t\t],\n\t\t[language, i18nextInstance],\n\t);\n\n\tuseEffect(() => {\n\t\tif (moment.locales().includes(language.toLowerCase())) {\n\t\t\tmoment.locale(language);\n\t\t\treturn;\n\t\t}\n\n\t\tconst locale = !availableLanguages.find((lng) => lng.key === language) ? language.split('-').shift() : language;\n\n\t\tloadLocale(locale ?? language)\n\t\t\t.then((localeSrc) => {\n\t\t\t\tlocaleSrc && Function(localeSrc).call({ moment });\n\t\t\t\tmoment.locale(language);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tmoment.locale('en');\n\t\t\t\tconsole.error('Error loading moment locale:', error);\n\t\t\t});\n\t}, [language, loadLocale, availableLanguages]);\n\n\tuseEffect(() => {\n\t\tconst cb = () => {\n\t\t\tAppClientOrchestratorInstance.getAppClientManager().initialize();\n\t\t\tAppClientOrchestratorInstance.load();\n\t\t};\n\t\tCachedCollectionManager.onLogin(cb);\n\t\treturn () => CachedCollectionManager.off('login', cb);\n\t}, []);\n\n\treturn (\n\t\t<I18nextProvider i18n={i18nextInstance}>\n\t\t\t<TranslationProviderInner children={children} availableLanguages={availableLanguages} />\n\t\t</I18nextProvider>\n\t);\n};\n\n/**\n * I was forced to create this component to keep the api useTranslation from rocketchat\n * rocketchat useTranslation invalidates the provider content, triggering all the places that use it\n * i18next triggers a re-render inside useTranslation, since now we are using 100% of the i18next\n * the only way to invalidate after changing the language in a safe way is using the useTranslation from i8next\n * and invalidating the provider content\n */\n// eslint-disable-next-line react/no-multi-comp\nconst TranslationProviderInner = ({\n\tchildren,\n\tavailableLanguages,\n}: {\n\tchildren: ReactNode;\n\tavailableLanguages: {\n\t\ten: string;\n\t\tname: string;\n\t\togName: string;\n\t\tkey: string;\n\t}[];\n}): ReactElement => {\n\tconst { t, i18n } = useTranslation();\n\n\tconst value: TranslationContextValue = useMemo(\n\t\t() => ({\n\t\t\tlanguage: i18n.language,\n\t\t\tlanguages: availableLanguages,\n\t\t\tloadLanguage: async (language: string): Promise<void> => {\n\t\t\t\ti18n.changeLanguage(language).then(() => applyCustomTranslations());\n\t\t\t},\n\t\t\ttranslate: Object.assign(addSprinfToI18n(t), {\n\t\t\t\thas: ((key, options) => key && i18n.exists(key, options)) as TranslationContextValue['translate']['has'],\n\t\t\t}),\n\t\t}),\n\t\t[availableLanguages, i18n, t],\n\t);\n\n\treturn <TranslationContext.Provider children={children} value={value} />;\n};\n\nexport default TranslationProvider;\n",null],"names":["module","link","default","v","_regeneratorRuntime","_toConsumableArray","_createForOfIteratorHelperLoose","_slicedToArray","useLocalStorage","useMutableCallback","languages","en","normalizeLanguage","useMethod","useSetting","TranslationContext","I18NextHttpBackend","sprintf","moment","React","useEffect","useMemo","I18nextProvider","initReactI18next","useTranslation","CachedCollectionManager","getURL","i18n","addSprinfToI18n","AppClientOrchestratorInstance","applyCustomTranslations","isRTLScriptLanguage","use","namespacesDefault","parseToJSON","customTranslations","JSON","parse","e","localeCache","Map","useI18next","lng","parsedCustomTranslations","extractKeys","source","lngs","namespaces","result","_i","_Object$entries","Object","entries","length","_ref2","key","value","prefix","_key$split2","split","Array","isArray","includes","slice","_step","_iterator","done","language","_loop","find","namespace","startsWith","_i2","_Object$entries2","_ref4","_ret","_key","isInitialized","init","fallbackLng","ns","nsSeparator","resources","partialBundledLanguages","defaultNS","backend","loadPath","data","request","_options","url","_payload","callback","params","promise","get","fetch","then","res","text","set","status","react","useSuspense","bindI18n","bindI18nStore","interpolation","escapeValue","changeLanguage","_i3","_Object$entries3","_ref6","ln","translations","reduce","acc","_ref7","_acc$project","_acc$namespace","_ref8","project","_i4","_Object$entries4","_ref10","addResourceBundle","useAutoLanguage","_window$navigator$use","_defaultUserLanguage$","serverLanguage","defaultUserLanguage","browserLanguage","window","navigator","userLanguage","suggestedLanguage","shift","_useLocalStorage2","document","documentElement","classList","setAttribute","lang","getLanguageName","code","_lang$of","Intl","DisplayNames","type","of","TranslationProviderInner","_ref12","children","availableLanguages","_useTranslation","t","loadLanguage","async","_context","prev","next","stop","Promise","translate","assign","has","options","exists","createElement","Provider","exportDefault","_ref11","loadLocale","i18nextInstance","name","ogName","concat","Set","map","locales","toLowerCase","locale","localeSrc","Function","call","catch","error","console","cb","getAppClientManager","initialize","load","onLogin","off"],"mappings":"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"}