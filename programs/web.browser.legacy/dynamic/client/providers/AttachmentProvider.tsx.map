)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/AttachmentProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { usePrefersReducedData } from '@rocket.chat/fuselage-hooks';\nimport type { AttachmentContextValue } from '@rocket.chat/ui-contexts';\nimport { AttachmentContext, useLayout, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { getURL } from '../../app/utils/client';\n\nconst AttachmentProvider: FC<{\n\twidth?: number;\n\theight?: number;\n}> = ({ children, width = 360, height = 360 }) => {\n\tconst { isMobile } = useLayout();\n\tconst reducedData = usePrefersReducedData();\n\tconst collapsedByDefault = !!useUserPreference<boolean>('collapseMediaByDefault');\n\tconst autoLoadEmbedMedias = !!useUserPreference<boolean>('autoImageLoad');\n\tconst saveMobileBandwidth = !!useUserPreference<boolean>('saveMobileBandwidth');\n\n\tconst contextValue: AttachmentContextValue = useMemo(\n\t\t() => ({\n\t\t\tgetURL: (url: string): string => getURL(url, { full: true }),\n\t\t\tcollapsedByDefault,\n\t\t\tautoLoadEmbedMedias: !reducedData && autoLoadEmbedMedias && (!saveMobileBandwidth || !isMobile),\n\t\t\tdimensions: {\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t},\n\t\t}),\n\t\t[collapsedByDefault, reducedData, autoLoadEmbedMedias, saveMobileBandwidth, isMobile, width, height],\n\t);\n\n\treturn <AttachmentContext.Provider children={children} value={contextValue} />;\n};\n\nexport default AttachmentProvider;\n",null],"names":["usePrefersReducedData","AttachmentContext","useLayout","useUserPreference","React","useMemo","getURL","module","link","v","exportDefault","_ref","children","_ref$width","width","_ref$height","height","isMobile","_useLayout","reducedData","collapsedByDefault","autoLoadEmbedMedias","saveMobileBandwidth","contextValue","url","full","dimensions","createElement","Provider","value"],"mappings":"uBAQA,IARAA,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3DC,EAAuBC,IAAA,CAAM,8BAA8B,CAAAR,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAD,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAApEC,EAAOG,aAAE,CAWJ,SAAAC,CAAA,EAA4C,IAAzCC,EAAQD,EAARC,QAAQ,CAAAC,EAAAF,EAAEG,KAAK,CAALA,EAAKD,AAAA,KAAA,IAAAA,EAAG,IAAGA,EAAAE,EAAAJ,EAAEK,MAAM,CAANA,EAAMD,AAAA,KAAA,IAAAA,EAAG,IAAGA,EAClCE,EAAQC,AAAKhB,IAAbe,QAAQ,CACVE,EAAcnB,IACdoB,EAAqB,CAAC,CAACjB,EAA2B,0BAClDkB,EAAsB,CAAC,CAAClB,EAA2B,iBACnDmB,EAAsB,CAAC,CAACnB,EAA2B,uBAEnDoB,EAAuClB,EAC5C,WAAA,MAAO,CACNC,OAAQ,SAACkB,CAAW,EAAA,OAAalB,EAAOkB,EAAK,CAAEC,KAAM,CAAA,CAAI,EAAG,EAC5DL,mBAAAA,EACAC,oBAAqB,CAACF,GAAeE,GAAwB,CAAA,CAACC,GAAuB,CAACL,CAAAA,EACtFS,WAAY,CACXZ,MAAAA,EACAE,OAAAA,GAED,EACD,CAACI,EAAoBD,EAAaE,EAAqBC,EAAqBL,EAAUH,EAAOE,EAAO,EAGrG,OAAOZ,EAAAuB,aAAA,CAAC1B,EAAkB2B,QAAQ,CAAA,CAAChB,SAAUA,EAAUiB,MAAON,CAAa,EAC5E"}