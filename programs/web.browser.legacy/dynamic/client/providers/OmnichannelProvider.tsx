function module(e,i,n){n.link("@babel/runtime/regenerator",{default:function(e){t=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},3),n.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){u=e}},0),n.link("@rocket.chat/ui-contexts",{useUser:function(e){l=e},useSetting:function(e){c=e},usePermission:function(e){s=e},useMethod:function(e){f=e},useEndpoint:function(e){v=e},useStream:function(e){d=e}},1),n.link("@tanstack/react-query",{useQuery:function(e){h=e},useQueryClient:function(e){m=e}},2),n.link("react",{default:function(e){p=e},useState:function(e){b=e},useEffect:function(e){g=e},useMemo:function(e){k=e},useCallback:function(e){L=e},memo:function(e){_=e},useRef:function(e){y=e}},3),n.link("../../app/livechat/client/collections/LivechatInquiry",{LivechatInquiry:function(e){C=e}},4),n.link("../../app/livechat/client/lib/stream/queueManager",{initializeLivechatInquiryStream:function(e){A=e}},5),n.link("../../app/livechat/lib/inquiries",{getOmniChatSortQuery:function(e){S=e}},6),n.link("../../app/notifications/client",{Notifications:function(e){q=e}},7),n.link("../../app/ui/client/lib/KonchatNotification",{KonchatNotification:function(e){w=e}},8),n.link("../../ee/client/hooks/useHasLicenseModule",{useHasLicenseModule:function(e){O=e}},9),n.link("../../lib/ClientLogger",{ClientLogger:function(e){E=e}},10),n.link("../contexts/OmnichannelContext",{OmnichannelContext:function(e){x=e}},11),n.link("../hooks/useReactiveValue",{useReactiveValue:function(e){M=e}},12),n.link("../hooks/useShouldPreventAction",{useShouldPreventAction:function(e){P=e}},13);var t,a,o,r,u,l,c,s,f,v,d,h,m,p,b,g,k,L,_,y,C,A,S,q,w,O,E,x,M,P,Q={inquiries:{enabled:!1},enabled:!1,isEnterprise:!1,agentAvailable:!1,showOmnichannelQueueLink:!1,isOverMacLimit:!1,livechatPriorities:{enabled:!1,data:[],isLoading:!1,isError:!1}};n.exportDefault(_(function(e){var i,n=e.children,_=c("Livechat_enabled"),R=c("Livechat_Routing_Method"),I=c("Livechat_show_queue_list_link"),N=null!==(i=c("Livechat_guest_pool_max_number_incoming_livechats_displayed"))&&void 0!==i?i:0,T=c("Omnichannel_sorting_mechanism"),D=y(new E("OmnichannelProvider")),H=s("view-l-room"),K=s("view-livechat-queue"),U=l(),V=(null==U?void 0:U.statusLivechat)==="available",j=f("livechat:getRoutingConfig"),z=r(u(b(void 0)),2),G=z[0],J=z[1],W=r(b(new Set),2),B=W[0],F=W[1],X=H&&_,Y=c("WebRTC_Servers"),Z=!0===O("livechat-enterprise"),$=v("GET","/v1/livechat/priorities"),ee=d("notify-logged"),ei=m(),en=Z&&X,et=X&&!!U&&!!G,ea=h(["/v1/livechat/priorities"],function(){return $({sort:JSON.stringify({sortItem:1})})},{staleTime:1/0,enabled:en}),eo=ea.data,er=(eo=void 0===eo?{}:eo).priorities,eu=void 0===er?[]:er,el=ea.isInitialLoading,ec=ea.isError,es=P("monthlyActiveContacts");g(function(){if(en)return ee("omnichannel.priority-changed",function(){ei.invalidateQueries(["/v1/livechat/priorities"])})},[en,ei,ee]),g(function(){X&&(!R&&R||t.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.awrap(j());case 3:J(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),D.current.error("update() error in routeConfig "+e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]],Promise))},[X,j,Y,R,J,!0]);var ef=et&&K&&!!G&&G.showQueue&&!G.autoAssignAgent&&V;g(function(){if(ef)return A(null==U?void 0:U._id),q.onUser("departmentAgentData",function(){A(null==U?void 0:U._id)}).stop},[ef,null==U?void 0:U._id]);var ev=M(L(function(){if(ef)return C.find({status:"queued"},{sort:S(T),limit:N}).fetch()},[ef,N,T]));null==ev||ev.map(function(e){var i=e.rid;if(!B.has(i))return F(function(e){return new Set([].concat(o(e),[i]))}),w.newRoom(i)});var ed=k(function(){if(!et)return Q;var e={enabled:en,data:eu,isLoading:el,isError:ec};return ef?a(a({},Q),{},{enabled:!0,isEnterprise:Z,agentAvailable:V,voipCallAvailable:!0,routeConfig:G,inquiries:ev?{enabled:!0,queue:ev}:{enabled:!1},showOmnichannelQueueLink:I&&!!V,livechatPriorities:e,isOverMacLimit:es}):a(a({},Q),{},{enabled:!0,isEnterprise:Z,agentAvailable:V,voipCallAvailable:!0,routeConfig:G,livechatPriorities:e,isOverMacLimit:es})},[et,en,eu,el,ec,ef,Z,V,!0,G,ev,I,es]);return p.createElement(x.Provider,{children:n,value:ed})}))}
//# sourceMappingURL=/dynamic/client/providers/c796e9ad7a70862e31a5d86efa8f84457af5e7d9.map
