)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/ModalProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ModalContext } from '@rocket.chat/ui-contexts';\nimport type { ReactNode } from 'react';\nimport React, { useState, useMemo, memo, Suspense, createElement, useEffect } from 'react';\n\nimport { imperativeModal } from '../lib/imperativeModal';\n\nconst mapCurrentModal = (descriptor: typeof imperativeModal.current): ReactNode => {\n\tif (descriptor === null) {\n\t\treturn null;\n\t}\n\n\tif ('component' in descriptor) {\n\t\treturn (\n\t\t\t<Suspense fallback={<div />}>\n\t\t\t\t{createElement(descriptor.component, {\n\t\t\t\t\tkey: Math.random(),\n\t\t\t\t\t...descriptor.props,\n\t\t\t\t})}\n\t\t\t</Suspense>\n\t\t);\n\t}\n};\n\ntype ModalProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst ModalProvider = ({ children }: ModalProviderProps) => {\n\tconst [currentModal, setCurrentModal] = useState<ReactNode>(() => mapCurrentModal(imperativeModal.current));\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tmodal: {\n\t\t\t\tsetModal: setCurrentModal,\n\t\t\t},\n\t\t\tcurrentModal,\n\t\t}),\n\t\t[currentModal],\n\t);\n\n\tuseEffect(\n\t\t() =>\n\t\t\timperativeModal.on('update', (descriptor) => {\n\t\t\t\tsetCurrentModal(mapCurrentModal(descriptor));\n\t\t\t}),\n\t\t[],\n\t);\n\n\treturn <ModalContext.Provider value={contextValue} children={children} />;\n};\n\nexport default memo<typeof ModalProvider>(ModalProvider);\n",null],"names":["module","link","default","_slicedToArray","_objectSpread","ModalContext","v","React","useState","useMemo","memo","Suspense","createElement","useEffect","imperativeModal","mapCurrentModal","descriptor","fallback","component","key","Math","random","props","exportDefault","_ref","children","_useState2","current","currentModal","setCurrentModal","contextValue","modal","setModal","on","Provider","value"],"mappings":"uBAASA,EAAcC,IAAM,CAAA,uCAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAA/CJ,EAAcC,IAAA,CAAM,2BAA2B,CAAAI,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAM,CAAA,EAAAC,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAb,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAc,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMxD,IANAX,EAAwDC,EAAxDC,EAAwDE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAMlDC,EAAkB,SAACC,CAA0C,SAClE,AAAIA,AAAe,OAAfA,EACI,KAGJ,cAAeA,EAEjBT,EAAAK,aAAA,CAACD,EAAQ,CAACM,SAAUV,EAAAK,aAAA,CAAA,MAAA,KAAQ,EAC1BA,EAAcI,EAAWE,SAAS,CAAAd,EAAA,CAClCe,IAAKC,KAAKC,MAAM,EAAE,EACfL,EAAWM,KAAK,UAKxB,EArBAtB,EAAOuB,aAAE,CAmDMb,EAxBO,SAAAc,CAAA,EAAqC,IAAlCC,EAAQD,EAARC,QAAQ,CAC2EC,EAAAvB,EAAnEK,EAAoB,WAAA,OAAMO,EAAgBD,EAAgBa,OAAO,CAAC,GAAC,GAApGC,EAAYF,CAAA,CAAA,EAAA,CAAEG,EAAeH,CAAA,CAAA,EAAA,CAE9BI,EAAerB,EACpB,WAAA,MAAO,CACNsB,MAAO,CACNC,SAAUH,GAEXD,aAAAA,EACA,EACD,CAACA,EAAa,EAWf,OARAf,EACC,WAAA,OACCC,EAAgBmB,EAAE,CAAC,SAAU,SAACjB,CAAU,EACvCa,EAAgBd,EAAgBC,GACjC,EAAE,EACH,EAAE,EAGIT,EAAAK,aAAA,CAACP,EAAa6B,QAAQ,CAAA,CAACC,MAAOL,EAAcL,SAAUA,CAAS,EACvE"}