function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){s=e}},3),t.link("@rocket.chat/fuselage-hooks",{useDebouncedCallback:function(e){u=e}},0),t.link("@rocket.chat/ui-contexts",{usePermission:function(e){l=e},useSingleStream:function(e){p=e}},1),t.link("@tanstack/react-query",{useQuery:function(e){o=e},useQueryClient:function(e){c=e}},2),t.link("react",{default:function(e){d=e},useEffect:function(e){f=e}},3),t.link("../../ee/client/apps/orchestrator",{AppClientOrchestratorInstance:function(e){v=e}},4),t.link("../contexts/AppsContext",{AppsContext:function(e){k=e}},5),t.link("../hooks/useIsEnterprise",{useIsEnterprise:function(e){m=e}},6),t.link("../hooks/useLicense",{useInvalidateLicense:function(e){h=e}},7),t.link("../lib/asyncState",{AsyncStatePhase:function(e){b=e}},8),t.link("../views/marketplace/hooks/useAppsCountQuery",{useInvalidateAppsCountQueryCallback:function(e){A=e}},9);var a,r,i,s,u,l,p,o,c,d,f,v,k,m,h,b,A,E=function(e){return e.sort(function(e,n){return e.name.toLowerCase()>n.name.toLowerCase()?1:-1})};t.exportDefault(function(e){var n,t,y,C=e.children,x=l("manage-apps"),S=c(),g=m().data,I=!!(null!=g&&g.isEnterprise),Q=A(),w=h(),P=p("apps"),D=u(function(){S.invalidateQueries(["marketplace","apps-instance"]),Q()},100,[]);f(function(){return P("apps",function(e){var n=s(e,1)[0];["app/added","app/removed","app/updated","app/statusUpdate","app/settingUpdated"].includes(n)&&D(),["app/added","app/removed"].includes(n)&&!I&&w()})},[D,w,I,P]);var L=o(["marketplace","apps-marketplace",x],function(){var e=v.getAppsFromMarketplace(x);return S.invalidateQueries(["marketplace","apps-stored"]),e},{staleTime:1/0,keepPreviousData:!0,onSettled:function(){return S.invalidateQueries(["marketplace","apps-stored"])}}),V=o(["marketplace","apps-instance",x],function(){var e;return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(v.getInstalledApps().then(function(e){return e.map(function(e){return i(i({},e),{},{installed:!0})})}));case 2:return e=n.sent,n.abrupt("return",e);case 4:case"end":return n.stop()}},null,null,null,Promise)},{staleTime:1/0,onSettled:function(){return S.invalidateQueries(["marketplace","apps-stored"])}}),F=o(["marketplace","apps-stored",V.data,L.data],function(){if(!L.isFetched&&!V.isFetched)throw Error("Apps not loaded");var e=[],n=[],t=[],a=r(V.data||[]);return E(L.data||[]).forEach(function(t){var r=a.findIndex(function(e){return e.id===t.id}),u=s(r>-1?a.splice(r,1):[],1)[0],l=i(i(i({},t),u&&{private:u.private,installed:!0,status:u.status,version:u.version,licenseValidation:u.licenseValidation,migrated:u.migrated}),{},{bundledIn:t.bundledIn,marketplaceVersion:t.version});u&&n.push(l),e.push(l)}),E(a).forEach(function(e){e.private&&t.push(e)}),[e,n,t]},{enabled:L.isFetched&&V.isFetched,keepPreviousData:!0});return d.createElement(k.Provider,{children:C,value:{installedApps:{phase:b.RESOLVED,value:{apps:(null===(n=F.data)||void 0===n?void 0:n[1])||[]}},marketplaceApps:{phase:b.RESOLVED,value:{apps:(null===(t=F.data)||void 0===t?void 0:t[0])||[]}},privateApps:{phase:b.RESOLVED,value:{apps:(null===(y=F.data)||void 0===y?void 0:y[2])||[]}},reload:function(){return a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.awrap(Promise.all([S.invalidateQueries(["marketplace"])]));case 2:case"end":return e.stop()}},null,null,null,Promise)}}})})}
//# sourceMappingURL=/dynamic/client/providers/11ab5a46ff8a379a851af008282ec47a2f862f36.map
