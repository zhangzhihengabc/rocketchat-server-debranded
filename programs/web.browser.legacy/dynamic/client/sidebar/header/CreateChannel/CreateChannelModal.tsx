function module(e,t,n){var a,r,l,i,c,o,s,d,u,m,f,h,p,E,_,b,y,v,x,g,C,k,F,w,D,I,T,M,O,P,q;n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},1),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},2),n.link("@rocket.chat/fuselage",{Box:function(e){i=e},Modal:function(e){c=e},Button:function(e){o=e},TextInput:function(e){s=e},Icon:function(e){d=e},Field:function(e){u=e},ToggleSwitch:function(e){m=e},FieldGroup:function(e){f=e},FieldLabel:function(e){h=e},FieldRow:function(e){p=e},FieldError:function(e){E=e},FieldHint:function(e){_=e},FieldDescription:function(e){b=e}},0),n.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){y=e}},1),n.link("@rocket.chat/ui-contexts",{useSetting:function(e){v=e},useTranslation:function(e){x=e},useEndpoint:function(e){g=e},usePermission:function(e){C=e},useToastMessageDispatch:function(e){k=e},usePermissionWithScopedRoles:function(e){F=e}},2),n.link("react",{default:function(e){w=e},useEffect:function(e){D=e},useMemo:function(e){I=e}},3),n.link("react-hook-form",{useForm:function(e){T=e},Controller:function(e){M=e}},4),n.link("../../../../ee/client/hooks/useHasLicenseModule",{useHasLicenseModule:function(e){O=e}},5),n.link("../../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated",{default:function(e){P=e}},6),n.link("../../../lib/utils/goToRoomById",{goToRoomById:function(e){q=e}},7),n.exportDefault(function(e){var t,n=e.teamId,S=void 0===n?"":n,R=e.onClose,B=x(),j=F("set-readonly",["owner"]),A=v("E2E_Enable"),U=v("UTF8_Channel_Names_Validation"),H=v("UI_Allow_room_names_with_special_chars"),L=v("Federation_Matrix_enabled")||!1,N=v("E2E_Enabled_Default_PrivateRooms"),V=C("create-c"),z=C("create-p"),G=I(function(){return RegExp("^"+U+"$")},[U]),W=O("federation"),$="loading"!==W&&W&&L,J=g("GET","/v1/rooms.nameExists"),K=g("POST","/v1/channels.create"),Q=g("POST","/v1/groups.create"),X=k(),Y=I(function(){return!V&&z?"p":!!V&&!z&&"c"},[V,z]),Z=T({mode:"onBlur",defaultValues:{members:[],name:"",topic:"",isPrivate:!Y||"p"===Y,readOnly:!1,encrypted:null!=N&&N,broadcast:!1,federated:!1}}),ee=Z.register,et=Z.formState.errors,en=Z.handleSubmit,ea=Z.control,er=Z.setValue,el=(0,Z.watch)(),ei=el.isPrivate,ec=el.broadcast,eo=el.readOnly,es=el.federated;D(function(){ei||er("encrypted",!1),ec&&er("encrypted",!1),es&&(er("encrypted",!1),er("broadcast",!1),er("readOnly",!1)),er("readOnly",ec)},[es,er,ec,ei]);var ed=function(e){var t,n,a,i,c,o,s;return l.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.name,n=e.members,a=e.readOnly,i=e.topic,s={name:t,members:n,readOnly:a,extraData:r(r({topic:i,broadcast:e.broadcast,encrypted:e.encrypted},(c=e.federated)&&{federated:c}),S&&{teamId:S})},d.prev=2,!ei){d.next=10;break}return d.next=6,l.awrap(Q(s));case 6:o=d.sent,S||q(o.group._id),d.next=14;break;case 10:return d.next=12,l.awrap(K(s));case 12:o=d.sent,S||q(o.channel._id);case 14:X({type:"success",message:B("Room_has_been_created")}),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(2),X({type:"error",message:d.t0});case 20:return d.prev=20,R(),d.finish(20);case 23:case"end":return d.stop()}},null,null,[[2,17,20,23]],Promise)},eu=I(function(){return!ei||ec||!A||!!N},[A,N,ec,ei]),em=y(),ef=y(),eh=y(),ep=y(),eE=y(),e_=y(),eb=y(),ey=y(),ev=y();return w.createElement(c,{"data-qa":"create-channel-modal","aria-labelledby":em+"-title",wrapperFunction:function(e){return w.createElement(i,a({is:"form",id:em,onSubmit:en(ed)},e))}},w.createElement(c.Header,null,w.createElement(c.Title,{id:em+"-title"},B("Create_channel")),w.createElement(c.Close,{tabIndex:-1,title:B("Close"),onClick:R})),w.createElement(c.Content,{mbe:2},w.createElement(f,null,w.createElement(u,null,w.createElement(h,{required:!0,htmlFor:ef},B("Channel_name")),w.createElement(p,null,w.createElement(s,a({id:ef,"data-qa-type":"channel-name-input"},ee("name",{required:B("error-the-field-is-required",{field:B("Name")}),validate:function(e){var t;return l.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(!(!H&&!G.test(e))){t.next=4;break}return t.abrupt("return",B("error-invalid-name"));case 4:return t.next=6,l.awrap(J({roomName:e}));case 6:if(!t.sent.exists){t.next=10;break}return t.abrupt("return",B("Channel_already_exist",e));case 10:case"end":return t.stop()}},null,null,null,Promise)}}),{error:null===(t=et.name)||void 0===t?void 0:t.message,addon:w.createElement(d,{name:ei?"hashtag-lock":"hashtag",size:"x20"}),"aria-invalid":et.name?"true":"false","aria-describedby":ef+"-error","aria-required":"true"}))),et.name&&w.createElement(E,{"aria-live":"assertive",id:ef+"-error"},et.name.message)),w.createElement(u,null,w.createElement(h,{htmlFor:eh},B("Topic")),w.createElement(p,null,w.createElement(s,a({id:eh,"aria-describedby":eh+"-hint"},ee("topic"),{"data-qa-type":"channel-topic-input"}))),w.createElement(_,{id:eh+"-hint"},B("Channel_what_is_this_channel_about"))),w.createElement(u,null,w.createElement(i,{display:"flex",justifyContent:"space-between",alignItems:"start"},w.createElement(i,{display:"flex",flexDirection:"column",width:"full"},w.createElement(h,{htmlFor:ep},B("Private")),w.createElement(_,{id:ep+"-hint"},ei?B("Only_invited_users_can_acess_this_channel"):B("Everyone_can_access_this_channel"))),w.createElement(M,{control:ea,name:"isPrivate",render:function(e){var t=e.field,n=t.onChange,a=t.value,r=t.ref;return w.createElement(m,{id:ep,"aria-describedby":ep+"-hint",ref:r,checked:a,disabled:!!Y,onChange:n})}}))),w.createElement(u,null,w.createElement(i,{display:"flex",justifyContent:"space-between",alignItems:"start"},w.createElement(i,{display:"flex",flexDirection:"column",width:"full"},w.createElement(h,{htmlFor:eE},B("Federation_Matrix_Federated")),w.createElement(_,{id:eE+"-hint"},B("loading"!==W&&W?L?"Federation_Matrix_Federated_Description":"Federation_Matrix_Federated_Description_disabled":"error-this-is-a-premium-feature"))),w.createElement(M,{control:ea,name:"federated",render:function(e){var t=e.field,n=t.onChange,a=t.value,r=t.ref;return w.createElement(m,{"aria-describedby":eE+"-hint",id:eE,ref:r,checked:a,disabled:!$,onChange:n})}}))),w.createElement(u,null,w.createElement(i,{display:"flex",justifyContent:"space-between",alignItems:"start"},w.createElement(i,{display:"flex",flexDirection:"column",width:"full"},w.createElement(h,{htmlFor:e_},B("Read_only")),w.createElement(_,{id:e_+"-hint"},eo?B("Only_authorized_users_can_write_new_messages"):B("All_users_in_the_channel_can_write_new_messages"))),w.createElement(M,{control:ea,name:"readOnly",render:function(e){var t=e.field,n=t.onChange,a=t.value,r=t.ref;return w.createElement(m,{id:e_,"aria-describedby":e_+"-hint",ref:r,checked:a,disabled:!j||ec||es,onChange:n})}}))),w.createElement(u,null,w.createElement(i,{display:"flex",justifyContent:"space-between",alignItems:"start"},w.createElement(i,{display:"flex",flexDirection:"column",width:"full"},w.createElement(h,{htmlFor:eb},B("Encrypted")),w.createElement(b,{id:eb+"-hint"},ei?B("Encrypted_channel_Description"):B("Encrypted_not_available"))),w.createElement(M,{control:ea,name:"encrypted",render:function(e){var t=e.field,n=t.onChange,a=t.value,r=t.ref;return w.createElement(m,{id:eb,ref:r,checked:a,disabled:eu||es,onChange:n,"aria-describedby":eb+"-hint","aria-labelledby":"Encrypted_channel_Label"})}}))),w.createElement(u,null,w.createElement(i,{display:"flex",justifyContent:"space-between",alignItems:"start"},w.createElement(i,{display:"flex",flexDirection:"column",width:"full"},w.createElement(h,{htmlFor:ey},B("Broadcast")),w.createElement(_,{id:ey+"-hint"},B("Broadcast_channel_Description"))),w.createElement(M,{control:ea,name:"broadcast",render:function(e){var t=e.field,n=t.onChange,a=t.value,r=t.ref;return w.createElement(m,{"aria-describedby":ey+"-hint",id:ey,ref:r,checked:a,disabled:!!es,onChange:n})}}))),w.createElement(u,null,w.createElement(h,{htmlFor:ev},B("Add_members")),w.createElement(M,{control:ea,name:"members",render:function(e){var t=e.field,n=t.onChange,a=t.value;return w.createElement(P,{id:ev,value:a,onChange:n})}})))),w.createElement(c.Footer,null,w.createElement(c.FooterControllers,null,w.createElement(o,{onClick:R},B("Cancel")),w.createElement(o,{type:"submit",primary:!0,"data-qa-type":"create-channel-confirm-button"},B("Create")))))})}
//# sourceMappingURL=/dynamic/client/sidebar/header/CreateChannel/01b39c9516cf3879361bf2c1762a086928a361f4.map
