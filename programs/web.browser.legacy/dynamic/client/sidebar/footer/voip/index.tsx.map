)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/footer/voip/index.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { VoIpCallerInfo } from '@rocket.chat/core-typings';\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useVoipFooterMenu } from '../../../../ee/client/hooks/useVoipFooterMenu';\nimport {\n\tuseCallActions,\n\tuseCallCreateRoom,\n\tuseCallerInfo,\n\tuseCallOpenRoom,\n\tuseIsVoipEnterprise,\n\tuseOpenedRoomInfo,\n\tuseQueueCounter,\n\tuseQueueName,\n} from '../../../contexts/CallContext';\nimport SidebarFooterDefault from '../SidebarFooterDefault';\nimport { VoipFooter as VoipFooterComponent } from './VoipFooter';\n\nexport const VoipFooter = (): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst callerInfo = useCallerInfo();\n\tconst callActions = useCallActions();\n\tconst dispatchEvent = useEndpoint('POST', '/v1/voip/events');\n\n\tconst createRoom = useCallCreateRoom();\n\tconst openRoom = useCallOpenRoom();\n\tconst queueCounter = useQueueCounter();\n\tconst queueName = useQueueName();\n\tconst openedRoomInfo = useOpenedRoomInfo();\n\tconst options = useVoipFooterMenu();\n\n\tconst [muted, setMuted] = useState(false);\n\tconst [paused, setPaused] = useState(false);\n\tconst isEnterprise = useIsVoipEnterprise();\n\n\tconst toggleMic = useCallback(\n\t\t(state: boolean) => {\n\t\t\tstate ? callActions.mute() : callActions.unmute();\n\t\t\tsetMuted(state);\n\t\t},\n\t\t[callActions],\n\t);\n\n\tconst togglePause = useCallback(\n\t\t(state: boolean) => {\n\t\t\tstate ? callActions.pause() : callActions.resume();\n\t\t\tsetMuted(false);\n\t\t\tsetPaused(state);\n\t\t},\n\t\t[callActions],\n\t);\n\n\tconst getSubtitle = (state: VoIpCallerInfo['state']): string => {\n\t\tconst subtitles: Record<string, string> = {\n\t\t\tIN_CALL: t('In_progress'),\n\t\t\tOFFER_RECEIVED: t('Ringing'),\n\t\t\tOFFER_SENT: t('Calling'),\n\t\t\tON_HOLD: t('On_Hold'),\n\t\t};\n\n\t\treturn subtitles[state] || '';\n\t};\n\n\tconst getCallsInQueueText = useMemo((): string => {\n\t\tif (queueCounter === 0) {\n\t\t\treturn t('Calls_in_queue_empty');\n\t\t}\n\n\t\tif (queueCounter === 1) {\n\t\t\treturn t('Calls_in_queue', { calls: queueCounter });\n\t\t}\n\n\t\treturn t('Calls_in_queue_plural', { calls: queueCounter });\n\t}, [queueCounter, t]);\n\n\tif (!('caller' in callerInfo)) {\n\t\treturn <SidebarFooterDefault />;\n\t}\n\n\treturn (\n\t\t<VoipFooterComponent\n\t\t\tcaller={callerInfo.caller}\n\t\t\tcallerState={callerInfo.state}\n\t\t\tcallActions={callActions}\n\t\t\ttitle={queueName || t('Phone_call')}\n\t\t\tsubtitle={getSubtitle(callerInfo.state)}\n\t\t\tmuted={muted}\n\t\t\tpaused={paused}\n\t\t\ttoggleMic={toggleMic}\n\t\t\ttogglePause={togglePause}\n\t\t\tcreateRoom={createRoom}\n\t\t\topenRoom={openRoom}\n\t\t\tcallsInQueue={getCallsInQueueText}\n\t\t\tdispatchEvent={dispatchEvent}\n\t\t\topenedRoomInfo={openedRoomInfo}\n\t\t\tisEnterprise={isEnterprise}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n",null],"names":["module","link","default","_slicedToArray","export","VoipFooter","useEndpoint","useTranslation","v","React","useCallback","useMemo","useState","useVoipFooterMenu","useCallActions","useCallCreateRoom","useCallerInfo","useCallOpenRoom","useIsVoipEnterprise","useOpenedRoomInfo","useQueueCounter","useQueueName","SidebarFooterDefault","VoipFooterComponent","state","t","callerInfo","callActions","dispatchEvent","createRoom","openRoom","queueCounter","queueName","openedRoomInfo","options","_useState2","muted","setMuted","_useState4","paused","setPaused","isEnterprise","toggleMic","mute","unmute","togglePause","pause","resume","getCallsInQueueText","calls","createElement","caller","callerState","title","subtitle","subtitles","IN_CALL","OFFER_RECEIVED","OFFER_SENT","ON_HOLD","callsInQueue"],"mappings":"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"}