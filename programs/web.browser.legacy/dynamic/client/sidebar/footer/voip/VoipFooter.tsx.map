)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/footer/voip/VoipFooter.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IVoipRoom, ICallerInfo, VoIpCallerInfo } from '@rocket.chat/core-typings';\nimport { VoipClientEvents } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, Button, ButtonGroup, SidebarFooter, Menu, IconButton } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, MouseEvent, ReactNode } from 'react';\nimport React from 'react';\n\nimport type { VoipFooterMenuOptions } from '../../../../ee/client/hooks/useVoipFooterMenu';\nimport type { CallActionsType } from '../../../contexts/CallContext';\nimport { useOmnichannelContactLabel } from './hooks/useOmnichannelContactLabel';\n\ntype VoipFooterPropsType = {\n\tcaller: ICallerInfo;\n\tcallerState: VoIpCallerInfo['state'];\n\tcallActions: CallActionsType;\n\ttitle: string;\n\tsubtitle: string;\n\tmuted: boolean;\n\tpaused: boolean;\n\ttoggleMic: (state: boolean) => void;\n\ttogglePause: (state: boolean) => void;\n\tcallsInQueue: string;\n\tcreateRoom: (caller: ICallerInfo, callDirection?: IVoipRoom['direction']) => Promise<IVoipRoom['_id']>;\n\topenRoom: (rid: IVoipRoom['_id']) => void;\n\tdispatchEvent: (params: { event: VoipClientEvents; rid: string; comment?: string }) => void;\n\topenedRoomInfo: { v: { token?: string | undefined }; rid: string };\n\tisEnterprise: boolean;\n\tchildren?: ReactNode;\n\toptions: VoipFooterMenuOptions;\n};\n\nexport const VoipFooter = ({\n\tcaller,\n\tcallerState,\n\tcallActions,\n\ttitle,\n\tsubtitle,\n\tmuted,\n\tpaused,\n\ttoggleMic,\n\ttogglePause,\n\tcreateRoom,\n\topenRoom,\n\tcallsInQueue,\n\tdispatchEvent,\n\topenedRoomInfo,\n\tisEnterprise = false,\n\tchildren,\n\toptions,\n}: VoipFooterPropsType): ReactElement => {\n\tconst contactLabel = useOmnichannelContactLabel(caller);\n\tconst t = useTranslation();\n\n\tconst cssClickable =\n\t\tcallerState === 'IN_CALL' || callerState === 'ON_HOLD'\n\t\t\t? css`\n\t\t\t\t\tcursor: pointer;\n\t\t\t  `\n\t\t\t: '';\n\n\tconst handleHold = (e: MouseEvent<HTMLButtonElement>): void => {\n\t\te.stopPropagation();\n\t\tconst eventName = paused ? 'VOIP-CALL-UNHOLD' : 'VOIP-CALL-ON-HOLD';\n\t\tdispatchEvent({ event: VoipClientEvents[eventName], rid: openedRoomInfo.rid });\n\t\ttogglePause(!paused);\n\t};\n\n\tconst holdTitle = ((): string => {\n\t\tif (!isEnterprise) {\n\t\t\treturn t('Hold_Premium_only');\n\t\t}\n\t\treturn paused ? t('Resume') : t('Hold');\n\t})();\n\n\treturn (\n\t\t<SidebarFooter elevated>\n\t\t\t<Box\n\t\t\t\tclassName={cssClickable}\n\t\t\t\tonClick={(): void => {\n\t\t\t\t\tif (callerState === 'IN_CALL' || callerState === 'ON_HOLD') {\n\t\t\t\t\t\topenRoom(openedRoomInfo.rid);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Box display='flex' justifyContent='center' fontScale='c1' color='font-default' mbe='14px'>\n\t\t\t\t\t{callsInQueue}\n\t\t\t\t</Box>\n\t\t\t\t<Box display='flex' flexDirection='row' h='24px' mi='16px' mbs='12px' mbe='8px' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t<Box color='font-default' fontScale='c2' withTruncatedText>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Box>\n\t\t\t\t\t{(callerState === 'IN_CALL' || callerState === 'ON_HOLD') && (\n\t\t\t\t\t\t<ButtonGroup onClick={(e): void => e.stopPropagation()}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tdisabled={paused}\n\t\t\t\t\t\t\t\ticon={muted ? 'mic-off' : 'mic'}\n\t\t\t\t\t\t\t\tcolor={muted ? 'disabled' : 'hint'}\n\t\t\t\t\t\t\t\tdata-tooltip={muted ? t('Turn_on_microphone') : t('Turn_off_microphone')}\n\t\t\t\t\t\t\t\tonClick={(e): void => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\ttoggleMic(!muted);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tdata-tooltip={holdTitle}\n\t\t\t\t\t\t\t\tdisabled={!isEnterprise}\n\t\t\t\t\t\t\t\ticon={paused ? 'pause' : 'pause-unfilled'}\n\t\t\t\t\t\t\t\tcolor={paused ? 'disabled' : 'hint'}\n\t\t\t\t\t\t\t\tonClick={handleHold}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{options && <Menu color='disabled' data-tooltip={t('More_options')} options={options} />}\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t\t<Box display='flex' flexDirection='row' mi='16px' mbe='12px' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Box color='font-default' fontScale='p2' withTruncatedText>\n\t\t\t\t\t\t\t{contactLabel || t('Anonymous')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box color='font-default' fontScale='c1' withTruncatedText>\n\t\t\t\t\t\t\t{subtitle}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t{(callerState === 'IN_CALL' || callerState === 'ON_HOLD' || callerState === 'OFFER_SENT') && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\ticon='phone-off'\n\t\t\t\t\t\t\t\tdisabled={paused}\n\t\t\t\t\t\t\t\taria-label={t('End_call')}\n\t\t\t\t\t\t\t\tdata-tooltip={t('End_Call')}\n\t\t\t\t\t\t\t\tonClick={(e): unknown => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tmuted && toggleMic(false);\n\t\t\t\t\t\t\t\t\tpaused && togglePause(false);\n\t\t\t\t\t\t\t\t\treturn callActions.end();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{callerState === 'OFFER_RECEIVED' && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ticon='phone-off'\n\t\t\t\t\t\t\t\tdata-tooltip={t('Decline')}\n\t\t\t\t\t\t\t\taria-label={t('Decline')}\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\tonClick={callActions.reject}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{callerState === 'OFFER_RECEIVED' && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t\t\ticon='phone'\n\t\t\t\t\t\t\t\tdata-tooltip={t('Accept')}\n\t\t\t\t\t\t\t\tonClick={async (): Promise<void> => {\n\t\t\t\t\t\t\t\t\tcallActions.pickUp();\n\t\t\t\t\t\t\t\t\tconst rid = await createRoom(caller);\n\t\t\t\t\t\t\t\t\tdispatchEvent({ event: VoipClientEvents['VOIP-CALL-STARTED'], rid });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{children}\n\t\t</SidebarFooter>\n\t);\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_taggedTemplateLiteralLoose","export","VoipFooter","VoipClientEvents","css","Box","Button","ButtonGroup","SidebarFooter","Menu","IconButton","useTranslation","v","React","useOmnichannelContactLabel","_ref","caller","callerState","callActions","title","subtitle","muted","paused","toggleMic","togglePause","createRoom","openRoom","callsInQueue","dispatchEvent","openedRoomInfo","_ref$isEnterprise","isEnterprise","children","options","contactLabel","t","cssClickable","_templateObject","holdTitle","createElement","elevated","className","onClick","rid","display","justifyContent","fontScale","color","mbe","flexDirection","h","mi","mbs","alignItems","withTruncatedText","e","stopPropagation","small","disabled","icon","event","square","danger","end","reject","success","async","_context","prev","next","pickUp","awrap","sent","stop","Promise"],"mappings":"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"}