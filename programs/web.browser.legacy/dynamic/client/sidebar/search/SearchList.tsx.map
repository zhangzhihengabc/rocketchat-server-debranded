)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/search/SearchList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Sidebar, TextInput, Box, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject, SetStateAction, Dispatch, FormEventHandler, Ref, MouseEventHandler } from 'react';\nimport React, { forwardRef, useState, useMemo, useEffect, useRef } from 'react';\nimport type { VirtuosoHandle } from 'react-virtuoso';\nimport { Virtuoso } from 'react-virtuoso';\nimport tinykeys from 'tinykeys';\n\nimport { getConfig } from '../../lib/utils/getConfig';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\nimport ScrollerWithCustomProps from './ScrollerWithCustomProps';\n\nconst mobileCheck = function () {\n\tlet check = false;\n\t(function (a: string) {\n\t\tif (\n\t\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n\t\t\t\ta,\n\t\t\t) ||\n\t\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n\t\t\t\ta.substr(0, 4),\n\t\t\t)\n\t\t)\n\t\t\tcheck = true;\n\t})(navigator.userAgent || navigator.vendor || window.opera || '');\n\treturn check;\n};\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Window {\n\t\topera?: string;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Navigator {\n\t\tuserAgentData?: {\n\t\t\tmobile: boolean;\n\t\t};\n\t}\n}\n\nconst shortcut = ((): string => {\n\tif (navigator.userAgentData?.mobile || mobileCheck()) {\n\t\treturn '';\n\t}\n\tif (window.navigator.platform.toLowerCase().includes('mac')) {\n\t\treturn '(\\u2318+K)';\n\t}\n\treturn '(\\u2303+K)';\n})();\n\nconst LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\n\nconst options = {\n\tsort: {\n\t\tlm: -1,\n\t\tname: 1,\n\t},\n\tlimit: LIMIT,\n} as const;\n\nconst useSearchItems = (filterText: string): UseQueryResult<(ISubscription & IRoom)[] | undefined, Error> => {\n\tconst [, mention, name] = useMemo(() => filterText.match(/(@|#)?(.*)/i) || [], [filterText]);\n\tconst query = useMemo(() => {\n\t\tconst filterRegex = new RegExp(escapeRegExp(name), 'i');\n\n\t\treturn {\n\t\t\t$or: [{ name: filterRegex }, { fname: filterRegex }],\n\t\t\t...(mention && {\n\t\t\t\tt: mention === '@' ? 'd' : { $ne: 'd' },\n\t\t\t}),\n\t\t};\n\t}, [name, mention]);\n\n\tconst localRooms = useUserSubscriptions(query, options);\n\n\tconst usernamesFromClient = [...localRooms?.map(({ t, name }) => (t === 'd' ? name : null))].filter(Boolean) as string[];\n\n\tconst searchForChannels = mention === '#';\n\tconst searchForDMs = mention === '@';\n\n\tconst type = useMemo(() => {\n\t\tif (searchForChannels) {\n\t\t\treturn { users: false, rooms: true, includeFederatedRooms: true };\n\t\t}\n\t\tif (searchForDMs) {\n\t\t\treturn { users: true, rooms: false };\n\t\t}\n\t\treturn { users: true, rooms: true, includeFederatedRooms: true };\n\t}, [searchForChannels, searchForDMs]);\n\n\tconst getSpotlight = useMethod('spotlight');\n\n\treturn useQuery(\n\t\t['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(({ _id }) => _id)],\n\t\tasync () => {\n\t\t\tif (localRooms.length === LIMIT) {\n\t\t\t\treturn localRooms;\n\t\t\t}\n\n\t\t\tconst spotlight = await getSpotlight(name, usernamesFromClient, type);\n\n\t\t\tconst filterUsersUnique = ({ _id }: { _id: string }, index: number, arr: { _id: string }[]): boolean =>\n\t\t\t\tindex === arr.findIndex((user) => _id === user._id);\n\n\t\t\tconst roomFilter = (room: { t: string; uids?: string[]; _id: string; name?: string }): boolean =>\n\t\t\t\t!localRooms.find(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\t(room.t === 'd' && room.uids && room.uids.length > 1 && room.uids?.includes(item._id)) ||\n\t\t\t\t\t\t[item.rid, item._id].includes(room._id),\n\t\t\t\t);\n\t\t\tconst usersFilter = (user: { _id: string }): boolean =>\n\t\t\t\t!localRooms.find((room) => room.t === 'd' && room.uids && room.uids?.length === 2 && room.uids.includes(user._id));\n\n\t\t\tconst userMap = (user: {\n\t\t\t\t_id: string;\n\t\t\t\tname: string;\n\t\t\t\tusername: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t}): {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tfname: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t} => ({\n\t\t\t\t_id: user._id,\n\t\t\t\tt: 'd',\n\t\t\t\tname: user.username,\n\t\t\t\tfname: user.name,\n\t\t\t\tavatarETag: user.avatarETag,\n\t\t\t});\n\n\t\t\ttype resultsFromServerType = {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tteamMain?: boolean;\n\t\t\t\tfname?: string;\n\t\t\t\tavatarETag?: string | undefined;\n\t\t\t\tuids?: string[] | undefined;\n\t\t\t}[];\n\n\t\t\tconst resultsFromServer: resultsFromServerType = [];\n\t\t\tresultsFromServer.push(...spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap));\n\t\t\tresultsFromServer.push(...spotlight.rooms.filter(roomFilter));\n\n\t\t\tconst exact = resultsFromServer?.filter((item) => [item.name, item.fname].includes(name));\n\t\t\treturn Array.from(new Set([...exact, ...localRooms, ...resultsFromServer]));\n\t\t},\n\t\t{\n\t\t\tstaleTime: 60_000,\n\t\t\tkeepPreviousData: true,\n\t\t\tplaceholderData: localRooms,\n\t\t},\n\t);\n};\n\nconst useInput = (initial: string): { value: string; onChange: FormEventHandler; setValue: Dispatch<SetStateAction<string>> } => {\n\tconst [value, setValue] = useState(initial);\n\tconst onChange = useMutableCallback((e) => {\n\t\tsetValue(e.currentTarget.value);\n\t});\n\treturn { value, onChange, setValue };\n};\n\nconst toggleSelectionState = (next: HTMLElement, current: HTMLElement | undefined, input: HTMLElement | undefined): void => {\n\tinput?.setAttribute('aria-activedescendant', next.id);\n\tnext.setAttribute('aria-selected', 'true');\n\tnext.classList.add('rcx-sidebar-item--selected');\n\tif (current) {\n\t\tcurrent.removeAttribute('aria-selected');\n\t\tcurrent.classList.remove('rcx-sidebar-item--selected');\n\t}\n};\n\n/**\n * @type import('react').ForwardRefExoticComponent<{ onClose: unknown } & import('react').RefAttributes<HTMLElement>>\n */\n\ntype SearchListProps = {\n\tonClose: () => void;\n};\n\nconst SearchList = forwardRef(function SearchList({ onClose }: SearchListProps, ref): ReactElement {\n\tconst listId = useUniqueId();\n\tconst t = useTranslation();\n\tconst { setValue: setFilterValue, ...filter } = useInput('');\n\n\tconst cursorRef = useRef<HTMLInputElement>(null);\n\tconst autofocus: Ref<HTMLInputElement> = useMergedRefs(useAutoFocus<HTMLInputElement>(), cursorRef);\n\n\tconst listRef = useRef<VirtuosoHandle>(null);\n\tconst boxRef = useRef<HTMLDivElement>(null);\n\n\tconst selectedElement: MutableRefObject<HTMLElement | null | undefined> = useRef(null);\n\tconst itemIndexRef = useRef(0);\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\n\tconst extended = sidebarViewMode === 'extended';\n\n\tconst filterText = useDebouncedValue(filter.value, 100);\n\n\tconst placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n\n\tconst { data: items = [], isLoading } = useSearchItems(filterText);\n\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\titems,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tavatarTemplate,\n\t\t\tuseRealName,\n\t\t\textended,\n\t\t\tsidebarViewMode,\n\t\t}),\n\t\t[avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tconst changeSelection = useMutableCallback((dir) => {\n\t\tlet nextSelectedElement = null;\n\n\t\tif (dir === 'up') {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.previousSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t} else {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.nextSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t}\n\n\t\tif (nextSelectedElement) {\n\t\t\ttoggleSelectionState(nextSelectedElement, selectedElement.current || undefined, cursorRef?.current || undefined);\n\t\t\treturn nextSelectedElement;\n\t\t}\n\t\treturn selectedElement.current;\n\t});\n\n\tconst resetCursor = useMutableCallback(() => {\n\t\titemIndexRef.current = 0;\n\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\n\t\tselectedElement.current = boxRef.current?.querySelector('a.rcx-sidebar-item');\n\n\t\tif (selectedElement.current) {\n\t\t\ttoggleSelectionState(selectedElement.current, undefined, cursorRef?.current || undefined);\n\t\t}\n\t});\n\n\tusePreventDefault(boxRef);\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t});\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t}, [filterText, resetCursor]);\n\n\tuseEffect(() => {\n\t\tif (!cursorRef?.current) {\n\t\t\treturn;\n\t\t}\n\t\treturn tinykeys(cursorRef?.current, {\n\t\t\tEscape: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetFilterValue((value) => {\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}\n\t\t\t\t\tresetCursor();\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t},\n\t\t\tTab: onClose,\n\t\t\tArrowUp: () => {\n\t\t\t\tconst currentElement = changeSelection('up');\n\t\t\t\titemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tArrowDown: () => {\n\t\t\t\tconst currentElement = changeSelection('down');\n\t\t\t\titemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tEnter: () => {\n\t\t\t\tif (selectedElement.current) {\n\t\t\t\t\tselectedElement.current.click();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n\n\tconst handleClick: MouseEventHandler<HTMLElement> = (e): void => {\n\t\tif (e.target instanceof Element && [e.target.tagName, e.target.parentElement?.tagName].includes('BUTTON')) {\n\t\t\treturn;\n\t\t}\n\t\treturn onClose();\n\t};\n\n\treturn (\n\t\t<Box\n\t\t\tposition='absolute'\n\t\t\trcx-sidebar\n\t\t\th='full'\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tzIndex={99}\n\t\t\tw='full'\n\t\t\tclassName={css`\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t`}\n\t\t\tref={ref}\n\t\t\trole='search'\n\t\t>\n\t\t\t<Sidebar.TopBar.Section {...({ flexShrink: 0 } as any)} is='form'>\n\t\t\t\t<TextInput\n\t\t\t\t\taria-owns={listId}\n\t\t\t\t\tdata-qa='sidebar-search-input'\n\t\t\t\t\tref={autofocus}\n\t\t\t\t\t{...filter}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\trole='searchbox'\n\t\t\t\t\taddon={<Icon name='cross' size='x20' onClick={onClose} />}\n\t\t\t\t/>\n\t\t\t</Sidebar.TopBar.Section>\n\t\t\t<Box\n\t\t\t\tref={boxRef}\n\t\t\t\trole='listbox'\n\t\t\t\tid={listId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tflexShrink={1}\n\t\t\t\th='full'\n\t\t\t\tw='full'\n\t\t\t\tdata-qa='sidebar-search-result'\n\t\t\t\taria-live='polite'\n\t\t\t\taria-atomic='true'\n\t\t\t\taria-busy={isLoading}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<Virtuoso\n\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\ttotalCount={items.length}\n\t\t\t\t\tdata={items}\n\t\t\t\t\tcomponents={{ Scroller: ScrollerWithCustomProps }}\n\t\t\t\t\tcomputeItemKey={(_, room) => room._id}\n\t\t\t\t\titemContent={(_, data): ReactElement => <Row data={itemData} item={data} />}\n\t\t\t\t\tref={listRef}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n});\n\nexport default SearchList;\n",null],"names":["a","check","_navigator$userAgentD","_extends","_taggedTemplateLiteralLoose","_objectWithoutProperties","_regeneratorRuntime","_toConsumableArray","_objectSpread","_slicedToArray","css","Sidebar","TextInput","Box","Icon","useMutableCallback","useDebouncedValue","useAutoFocus","useUniqueId","useMergedRefs","escapeRegExp","useUserPreference","useUserSubscriptions","useSetting","useTranslation","useMethod","useQuery","React","forwardRef","useState","useMemo","useEffect","useRef","Virtuoso","tinykeys","getConfig","useAvatarTemplate","usePreventDefault","useTemplateByViewMode","Row","ScrollerWithCustomProps","module","link","default","v","shortcut","navigator","userAgentData","mobile","userAgent","vendor","window","opera","test","substr","platform","toLowerCase","includes","LIMIT","parseInt","String","options","sort","lm","name","limit","useSearchItems","filterText","_useMemo2","match","mention","localRooms","filterRegex","RegExp","$or","fname","t","$ne","usernamesFromClient","map","_ref","filter","Boolean","searchForChannels","searchForDMs","type","users","rooms","includeFederatedRooms","getSpotlight","_ref2","_id","spotlight","filterUsersUnique","roomFilter","usersFilter","userMap","resultsFromServer","exact","async","_context","prev","next","length","abrupt","awrap","sent","_ref3","index","arr","findIndex","user","room","find","item","_room$uids","uids","rid","_room$uids2","username","avatarETag","push","apply","Array","from","Set","concat","stop","Promise","staleTime","keepPreviousData","placeholderData","useInput","initial","_useState2","value","setValue","onChange","e","currentTarget","toggleSelectionState","current","input","setAttribute","id","classList","add","removeAttribute","remove","SearchList","_ref4","ref","onClose","listId","_useInput","setFilterValue","_excluded","cursorRef","autofocus","listRef","boxRef","selectedElement","itemIndexRef","sidebarViewMode","useRealName","sideBarItemTemplate","avatarTemplate","extended","placeholder","join","_useSearchItems","_useSearchItems$data","data","items","isLoading","itemData","SideBarItemTemplate","changeSelection","dir","nextSelectedElement","_selectedElement$curr","_selectedElement$curr2","potentialElement","parentElement","previousSibling","querySelector","_selectedElement$curr3","_selectedElement$curr4","nextSibling","undefined","resetCursor","_listRef$current","_boxRef$current","scrollToIndex","Escape","event","preventDefault","Tab","ArrowUp","_listRef$current2","currentElement","Math","max","ArrowDown","_listRef$current3","min","Enter","click","createElement","position","h","display","flexDirection","zIndex","w","className","_templateObject","role","TopBar","Section","flexShrink","is","addon","size","onClick","tabIndex","_e$target$parentEleme","target","Element","tagName","style","height","width","totalCount","components","Scroller","computeItemKey","_","itemContent","exportDefault"],"mappings":"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"}