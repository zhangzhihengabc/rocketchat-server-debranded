)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/directory/tabs/channels/ChannelsTable/ChannelsTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { Pagination, States, StatesIcon, StatesTitle, StatesActions, StatesAction } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useRoute, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\n\nimport FilterByText from '../../../../../components/FilterByText';\nimport GenericNoResults from '../../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableBody,\n\tGenericTableLoadingTable,\n} from '../../../../../components/GenericTable';\nimport { usePagination } from '../../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../../components/GenericTable/hooks/useSort';\nimport { useDirectoryQuery } from '../../../hooks/useDirectoryQuery';\nimport ChannelsTableRow from './ChannelsTableRow';\n\nconst ChannelsTable = () => {\n\tconst t = useTranslation();\n\tconst mediaQuery = useMediaQuery('(min-width: 768px)');\n\n\tconst [text, setText] = useState('');\n\tconst debouncedText = useDebouncedValue(text, 500);\n\n\tconst channelRoute = useRoute('channel');\n\tconst groupsRoute = useRoute('group');\n\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'usersCount' | 'lastMessage' | 'createdAt'>('name');\n\n\tconst headers = useMemo(\n\t\t() =>\n\t\t\t[\n\t\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t\t{t('Name')}\n\t\t\t\t</GenericTableHeaderCell>,\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='usersCount'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === 'usersCount'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='usersCount'\n\t\t\t\t\tw='100px'\n\t\t\t\t>\n\t\t\t\t\t{t('Users')}\n\t\t\t\t</GenericTableHeaderCell>,\n\t\t\t\tmediaQuery && (\n\t\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\t\tkey='createdAt'\n\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\tactive={sortBy === 'createdAt'}\n\t\t\t\t\t\tonClick={setSort}\n\t\t\t\t\t\tsort='createdAt'\n\t\t\t\t\t\tw='150px'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Created_at')}\n\t\t\t\t\t</GenericTableHeaderCell>\n\t\t\t\t),\n\t\t\t\tmediaQuery && (\n\t\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\t\tkey='lastMessage'\n\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\tactive={sortBy === 'lastMessage'}\n\t\t\t\t\t\tonClick={setSort}\n\t\t\t\t\t\tsort='lastMessage'\n\t\t\t\t\t\tw='150px'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Last_Message')}\n\t\t\t\t\t</GenericTableHeaderCell>\n\t\t\t\t),\n\t\t\t\tmediaQuery && (\n\t\t\t\t\t<GenericTableHeaderCell key='belongsTo' w='150px'>\n\t\t\t\t\t\t{t('Belongs_To')}\n\t\t\t\t\t</GenericTableHeaderCell>\n\t\t\t\t),\n\t\t\t].filter(Boolean),\n\t\t[setSort, sortBy, t, sortDirection, mediaQuery],\n\t);\n\n\tconst getDirectoryData = useEndpoint('GET', '/v1/directory');\n\tconst query = useDirectoryQuery({ text: debouncedText, current, itemsPerPage }, [sortBy, sortDirection], 'channels');\n\tconst { data, isFetched, isLoading, isError, refetch } = useQuery(['getDirectoryData', query], () => getDirectoryData(query));\n\n\tconst onClick = useMemo(\n\t\t() => (name: IRoom['name'], type: IRoom['t']) => (e: React.KeyboardEvent | React.MouseEvent) => {\n\t\t\tif (name && (e.type === 'click' || (e as React.KeyboardEvent).key === 'Enter')) {\n\t\t\t\ttype === 'c' ? channelRoute.push({ name }) : groupsRoute.push({ name });\n\t\t\t}\n\t\t},\n\t\t[channelRoute, groupsRoute],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<FilterByText autoFocus placeholder={t('Search_Channels')} onChange={({ text }): void => setText(text)} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={5} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{data?.result && data.result.length > 0 && isFetched && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data.result.map((room) => (\n\t\t\t\t\t\t\t\t<ChannelsTableRow key={room._id} room={room as unknown as IRoom} onClick={onClick} mediaQuery={mediaQuery} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isFetched && data?.result.length === 0 && <GenericNoResults />}\n\t\t\t{isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ChannelsTable;\n",null],"names":["_extends","_objectWithoutProperties","_slicedToArray","Pagination","States","StatesIcon","StatesTitle","StatesActions","StatesAction","useDebouncedValue","useMediaQuery","useRoute","useTranslation","useEndpoint","useQuery","React","useMemo","useState","FilterByText","GenericNoResults","GenericTable","GenericTableHeader","GenericTableHeaderCell","GenericTableBody","GenericTableLoadingTable","usePagination","useSort","useDirectoryQuery","ChannelsTableRow","module","link","default","v","exportDefault","t","mediaQuery","_useState2","text","setText","debouncedText","channelRoute","groupsRoute","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","_useSort","sortBy","sortDirection","setSort","headers","createElement","key","direction","active","onClick","sort","w","filter","Boolean","getDirectoryData","query","_useQuery","data","isFetched","isLoading","isError","refetch","name","type","e","push","Fragment","autoFocus","placeholder","onChange","_ref","headerCells","result","length","map","room","_id","divider","count","total","variation"],"mappings":"2BACAA,EAAyFC,EAAwBC,EAAjHC,EAASC,EAAYC,EAAQC,EAAYC,EAAaC,EAA2DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,8DAAxGC,EAAUC,IAAE,CAAA,iCAAiC,CAAAC,QAAa,SAAEC,CAAAA,EAAAhC,EAAcgC,CAAM,CAAA,EAAA,GAAwBH,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA9B,EAAAA,CAAA,CAAA,EAAA,GAAA4B,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA7B,EAAAA,CAAA,CAAA,EAAA,GAA5C2B,EAAAA,IAAc,CAAA,wBAAM,CAAA1B,WAAwB,SAAA6B,CAAA,EAAA7B,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAqB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAApB,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAmB,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAlB,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAf,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAjB,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,yCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAd,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,6CAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,yCAAAA,CAAAT,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,yBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,6DAAAA,CAAAJ,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,uDAAAA,CAAAH,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAF,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAE,EAAAA,IAAAA,CAAAA,qBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,IAAjHC,EAAOI,aAAY,CAoBG,WACrB,IAAMC,EAAItB,IACJuB,EAAazB,EAAc,sBAEG0B,EAAAlC,EAAZe,EAAS,IAAG,GAA7BoB,EAAID,CAAA,CAAA,EAAA,CAAEE,EAAOF,CAAA,CAAA,EAAA,CACdG,EAAgB9B,EAAkB4B,EAAM,KAExCG,EAAe7B,EAAS,WACxB8B,EAAc9B,EAAS,SAE7B+B,EAAoHjB,IAA5GkB,EAAOD,EAAPC,OAAO,CAAEC,EAAYF,EAAZE,YAAY,CAAmBC,EAAiBH,EAAlCI,eAAe,CAAiCC,EAAYL,EAAxBM,UAAU,CAAmBC,EAAehD,EAAAyC,EAAAQ,GAC/GC,EAA2CzB,EAA6D,QAAhG0B,EAAMD,EAANC,MAAM,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAOH,EAAPG,OAAO,CAEhCC,EAAUvC,EACf,WAAA,MACC,CACCD,EAAAyC,aAAA,CAAClC,EAAsB,CAACmC,IAAI,OAAOC,UAAWL,EAAeM,OAAQP,AAAW,SAAXA,EAAmBQ,QAASN,EAASO,KAAK,MAAM,EACnH3B,EAAE,SAEJnB,EAAAyC,aAAA,CAAClC,EAAsB,CACtBmC,IAAI,aACJC,UAAWL,EACXM,OAAQP,AAAW,eAAXA,EACRQ,QAASN,EACTO,KAAK,aACLC,EAAE,OAAO,EAER5B,EAAE,UAEJC,GACCpB,EAAAyC,aAAA,CAAClC,EAAsB,CACtBmC,IAAI,YACJC,UAAWL,EACXM,OAAQP,AAAW,cAAXA,EACRQ,QAASN,EACTO,KAAK,YACLC,EAAE,OAAO,EAER5B,EAAE,eAGLC,GACCpB,EAAAyC,aAAA,CAAClC,EAAsB,CACtBmC,IAAI,cACJC,UAAWL,EACXM,OAAQP,AAAW,gBAAXA,EACRQ,QAASN,EACTO,KAAK,cACLC,EAAE,OAAO,EAER5B,EAAE,iBAGLC,GACCpB,EAAAyC,aAAA,CAAClC,EAAsB,CAACmC,IAAI,YAAYK,EAAE,OAAO,EAC/C5B,EAAE,eAGL,CAAC6B,MAAM,CAACC,QAAQ,EAClB,CAACV,EAASF,EAAQlB,EAAGmB,EAAelB,EAAW,EAG1C8B,EAAmBpD,EAAY,MAAO,iBACtCqD,EAAQvC,EAAkB,CAAEU,KAAME,EAAeI,QAAAA,EAASC,aAAAA,CAAY,EAAI,CAACQ,EAAQC,EAAc,CAAE,YACzGc,EAAyDrD,EAAS,CAAC,mBAAoBoD,EAAM,CAAE,WAAA,OAAMD,EAAiBC,EAAM,GAApHE,EAAID,EAAJC,IAAI,CAAEC,EAASF,EAATE,SAAS,CAAEC,GAASH,EAATG,SAAS,CAAEC,GAAOJ,EAAPI,OAAO,CAAEC,GAAOL,EAAPK,OAAO,CAE9CZ,GAAU5C,EACf,WAAA,OAAM,SAACyD,CAAmB,CAAEC,CAAgB,EAAA,OAAK,SAACC,CAAyC,EACtFF,GAASE,CAAAA,AAAW,UAAXA,EAAED,IAAI,EAAiBC,AAAkC,UAAlCA,EAA0BlB,GAAG,AAAK,GACrEiB,CAAAA,AAAS,MAATA,EAAelC,EAAaoC,IAAI,CAAC,CAAEH,KAAAA,CAAI,GAAMhC,EAAYmC,IAAI,CAAC,CAAEH,KAAAA,CAAI,EAAE,CAExE,CAAC,CAAA,EACD,CAACjC,EAAcC,EAAY,EAG5B,OACC1B,EAAAyC,aAAA,CAAAzC,EAAA8D,QAAA,CAAA,KACC9D,EAAAyC,aAAA,CAACtC,EAAY,CAAC4D,UAAS,CAAA,EAACC,YAAa7C,EAAE,mBAAoB8C,SAAU,SAAAC,CAAA,EAAO,OAAa3C,EAAb2C,EAAJ5C,IAAI,CAA0B,CAAC,GACtGiC,IACAvD,EAAAyC,aAAA,CAACpC,EAAY,KACZL,EAAAyC,aAAA,CAACnC,EAAkB,KAAEkC,GACrBxC,EAAAyC,aAAA,CAACjC,EAAgB,KAChBR,EAAAyC,aAAA,CAAChC,EAAwB,CAAC0D,YAAa,CAAE,KAI3C,AAAAd,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMe,MAAM,AAANA,GAAUf,EAAKe,MAAM,CAACC,MAAM,CAAG,GAAKf,GAC1CtD,EAAAyC,aAAA,CAAAzC,EAAA8D,QAAA,CAAA,KACC9D,EAAAyC,aAAA,CAACpC,EAAY,KACZL,EAAAyC,aAAA,CAACnC,EAAkB,KAAEkC,GACrBxC,EAAAyC,aAAA,CAACjC,EAAgB,KACf6C,EAAKe,MAAM,CAACE,GAAG,CAAC,SAACC,CAAI,EAAA,OACrBvE,EAAAyC,aAAA,CAAC5B,EAAgB,CAAC6B,IAAK6B,EAAKC,GAAI,CAACD,KAAMA,EAA0B1B,QAASA,GAASzB,WAAYA,CAAW,EAAG,KAIhHpB,EAAAyC,aAAA,CAACrD,EAAUH,EAAA,CACVwF,QAAO,CAAA,EACP7C,QAASA,EACTC,aAAcA,EACd6C,MAAO,AAAArB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMsB,KAAK,AAALA,GAAS,EACtB7C,kBAAmBA,EACnBE,aAAcA,CAAa,EACvBE,KAINoB,GAAa,AAAAD,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMe,MAAM,CAACC,MAAM,AAANA,IAAW,GAAKrE,EAAAyC,aAAA,CAACrC,EAAgB,MAC3DoD,IACAxD,EAAAyC,aAAA,CAACpD,EAAM,KACNW,EAAAyC,aAAA,CAACnD,EAAU,CAACoE,KAAK,UAAUkB,UAAU,QAAQ,GAC7C5E,EAAAyC,aAAA,CAAClD,EAAW,KAAE4B,EAAE,yBAChBnB,EAAAyC,aAAA,CAACjD,EAAa,KACbQ,EAAAyC,aAAA,CAAChD,EAAY,CAACoD,QAAS,WAAA,OAAMY,IAAS,CAAC,EAAEtC,EAAE,kBAMjD"}