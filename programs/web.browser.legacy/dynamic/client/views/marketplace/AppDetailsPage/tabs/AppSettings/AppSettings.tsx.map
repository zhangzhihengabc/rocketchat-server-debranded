)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSettings.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISetting } from '@rocket.chat/apps-engine/definition/settings';\nimport type { SettingValue } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC, MutableRefObject } from 'react';\nimport React, { useMemo, useEffect } from 'react';\n\nimport type { ISettings } from '../../../../../../ee/client/apps/@types/IOrchestrator';\nimport { useForm } from '../../../../../hooks/useForm';\nimport AppSettingsAssembler from './AppSettingsAssembler';\n\ntype AppSettingsProps = {\n\tsettings: ISettings;\n\tsetHasUnsavedChanges: (hasUnsavedChanges: boolean) => void;\n\tsettingsRef: MutableRefObject<Record<string, ISetting['value']>>;\n};\n\nconst AppSettings: FC<AppSettingsProps> = ({ settings, setHasUnsavedChanges, settingsRef }) => {\n\tconst t = useTranslation();\n\n\tconst stringifiedSettings = JSON.stringify(settings);\n\n\tconst reducedSettings = useMemo(() => {\n\t\tconst settings: AppSettingsProps['settings'] = JSON.parse(stringifiedSettings);\n\t\treturn Object.values(settings).reduce((ret, { id, value, packageValue }) => ({ ...ret, [id]: value ?? packageValue }), {});\n\t}, [stringifiedSettings]);\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(reducedSettings) as {\n\t\tvalues: Record<string, SettingValue>;\n\t\thandlers: Record<string, (eventOrValue: SettingValue) => void>;\n\t\thasUnsavedChanges: boolean;\n\t};\n\tconst stringifiedValues = JSON.stringify(values);\n\n\tuseEffect(() => {\n\t\tconst values = JSON.parse(stringifiedValues);\n\t\tsetHasUnsavedChanges(hasUnsavedChanges);\n\t\tsettingsRef.current = values;\n\t}, [hasUnsavedChanges, stringifiedValues, setHasUnsavedChanges, settingsRef]);\n\n\treturn (\n\t\t<>\n\t\t\t<Box display='flex' flexDirection='column' maxWidth='x640' w='full' marginInline='auto'>\n\t\t\t\t<Box fontScale='h4' mb={12}>\n\t\t\t\t\t{t('Settings')}\n\t\t\t\t</Box>\n\t\t\t\t<AppSettingsAssembler settings={settings} values={values} handlers={handlers} />\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default AppSettings;\n",null],"names":["_objectSpread","Box","useTranslation","React","useMemo","useEffect","useForm","AppSettingsAssembler","module","link","default","v","exportDefault","_ref","settings","setHasUnsavedChanges","settingsRef","t","stringifiedSettings","JSON","stringify","_useForm","Object","values","parse","reduce","ret","_ref2","_objectSpread2","id","value","packageValue","handlers","hasUnsavedChanges","stringifiedValues","current","createElement","Fragment","display","flexDirection","maxWidth","w","marginInline","fontScale","mb"],"mappings":"uBAiBA,IAfAA,EAAAC,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAMC,IAAA,CAAA,uCAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAArCQ,EAAOC,IAAA,CAAM,wBAAwB,CAAAR,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAF,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,yBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA5CC,EAAOI,aAAa,CAesB,SAAAC,CAAA,EAAoD,IAAjDC,EAAQD,EAARC,QAAQ,CAAEC,EAAoBF,EAApBE,oBAAoB,CAAEC,EAAWH,EAAXG,WAAW,CACjFC,EAAIf,IAEJgB,EAAsBC,KAAKC,SAAS,CAACN,GAO3CO,EAAgDf,EALxBF,EAAQ,WAE/B,OAAOkB,OAAOC,MAAM,CAD2BJ,KAAKK,KAAK,CAACN,IAC3BO,MAAM,CAAC,SAACC,CAAG,CAAAC,CAAA,EAAA,IAAAC,EAAIC,EAAEF,EAAFE,EAAE,CAAEC,EAAKH,EAALG,KAAK,CAAEC,EAAYJ,EAAZI,YAAY,CAAA,OAAA/B,EAAAA,EAAA,CAAA,EAAa0B,GAAG,CAAA,EAAAE,CAAAA,CAAAA,EAAA,CAAA,CAAA,CAAA,CAAGC,EAAE,CAAGC,MAAAA,EAAAA,EAASC,EAAYH,CAAA,EAAA,EAAK,CAAA,EACxH,EAAG,CAACV,EAAoB,GAEhBK,EAAMF,EAANE,MAAM,CAAES,EAAQX,EAARW,QAAQ,CAAEC,EAAiBZ,EAAjBY,iBAAiB,CAKrCC,EAAoBf,KAAKC,SAAS,CAACG,GAQzC,OANAlB,EAAU,WACT,IAAMkB,EAASJ,KAAKK,KAAK,CAACU,GAC1BnB,EAAqBkB,GACrBjB,EAAYmB,OAAO,CAAGZ,CACvB,EAAG,CAACU,EAAmBC,EAAmBnB,EAAsBC,EAAY,EAG3Eb,EAAAiC,aAAA,CAAAjC,EAAAkC,QAAA,CAAA,KACClC,EAAAiC,aAAA,CAACnC,EAAG,CAACqC,QAAQ,OAAOC,cAAc,SAASC,SAAS,OAAOC,EAAE,OAAOC,aAAa,MAAM,EACtFvC,EAAAiC,aAAA,CAACnC,EAAG,CAAC0C,UAAU,KAAKC,GAAI,EAAG,EACzB3B,EAAE,aAEJd,EAAAiC,aAAA,CAAC7B,EAAoB,CAACO,SAAUA,EAAUS,OAAQA,EAAQS,SAAUA,CAAS,IAIjF"}