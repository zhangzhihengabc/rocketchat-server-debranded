)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\nimport type { ISettingBase, SettingValue } from '@rocket.chat/core-typings';\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\n\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport MemoizedSetting from '../../../../admin/settings/MemoizedSetting';\n\ntype AppTranslationFunction = {\n\t(key: string, ...replaces: unknown[]): string;\n\thas: (key: string | undefined) => boolean;\n};\n\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\n\tconst t = useTranslation();\n\n\tconst tApp = useCallback(\n\t\t(key: string, ...args: unknown[]) => {\n\t\t\tif (!key) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\n\n\t\t\tif (t.has(appKey)) {\n\t\t\t\treturn t(appKey, ...args);\n\t\t\t}\n\t\t\tif (t.has(key)) {\n\t\t\t\treturn t(key, ...args);\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t[t, appId],\n\t);\n\n\treturn Object.assign(tApp, {\n\t\thas: useCallback(\n\t\t\t(key: string | undefined) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n\t\t\t},\n\t\t\t[t, appId],\n\t\t),\n\t});\n};\n\ntype AppSettingProps = {\n\tappSetting: {\n\t\tid: string;\n\t\ttype: ISettingBase['type'];\n\t\ti18nLabel: string;\n\t\ti18nDescription?: string;\n\t\tvalues?: ISettingSelectValue[];\n\t\trequired: boolean;\n\t};\n\tonChange: (value: SettingValue) => void;\n\tvalue: SettingValue;\n};\nconst AppSetting = ({ appSetting, onChange, value, ...props }: AppSettingProps): ReactElement => {\n\tconst appId = useRouteParameter('id');\n\tconst tApp = useAppTranslation(appId || '');\n\n\tconst { id, type, i18nLabel, i18nDescription, values, required } = appSetting;\n\n\tconst label = (i18nLabel && tApp(i18nLabel)) + (required ? ' *' : '') || id || tApp(id);\n\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\n\n\tlet translatedValues;\n\tif (values?.length) {\n\t\ttranslatedValues = values.map((selectFieldEntry) => {\n\t\t\tconst { key, i18nLabel } = selectFieldEntry;\n\n\t\t\tif (!i18nLabel) {\n\t\t\t\treturn selectFieldEntry;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey,\n\t\t\t\ti18nLabel: tApp(i18nLabel),\n\t\t\t};\n\t\t});\n\t}\n\n\treturn (\n\t\t<MemoizedSetting\n\t\t\ttype={type}\n\t\t\tlabel={label}\n\t\t\thint={hint}\n\t\t\tvalue={value}\n\t\t\tonChangeValue={onChange}\n\t\t\t_id={id}\n\t\t\t{...(translatedValues && { values: translatedValues })}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nexport default AppSetting;\n",null],"names":["_extends","_objectWithoutProperties","useRouteParameter","useTranslation","React","useMemo","useCallback","Utilities","MarkdownText","MemoizedSetting","module","default","v","link","useAppTranslation","appId","t","Object","assign","key","appKey","getI18nKeyForApp","_len","arguments","length","args","Array","_key","has","apply","concat","exportDefault","_ref","translatedValues","appSetting","onChange","value","props","_excluded","tApp","id","type","i18nLabel","i18nDescription","values","required","label","hint","createElement","content","map","selectFieldEntry","onChangeValue","_id"],"mappings":"2BAEAA,EAA6EC,EAA7EC,EAASC,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,sCAApEC,EAAAA,IAAAA,CAAAA,iCAAyC,CAAAC,QAAAA,SAA0BC,CAAC,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAjDS,EAAgBG,IAAAA,CAAAA,2BAAgC,CAACX,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAR,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAH,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yCAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,6CAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAa7E,IAAMK,EAAoB,SAACC,CAAa,EACvC,IAAMC,EAAIb,IAoBV,OAAOc,OAAOC,MAAM,CAlBPZ,EACZ,SAACa,CAAW,EACX,GAAI,CAACA,EACJ,MAAO,GAE8C,IAAA,IAAhDC,EAASb,EAAUc,gBAAgB,CAACF,EAAKJ,GAAOO,EAAAC,UAAAC,MAAA,CAJtCC,EAAe,AAAAC,MAAAJ,EAAA,EAAAA,EAAA,EAAA,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAfF,CAAe,CAAAE,EAAA,EAAA,CAAAJ,SAAA,CAAAI,EAAA,QAM/B,AAAIX,EAAEY,GAAG,CAACR,GACFJ,EAACa,KAAA,CAAA,KAAA,EAAA,CAACT,EAAM,CAAAU,MAAA,CAAKL,IAEjBT,EAAEY,GAAG,CAACT,GACFH,EAACa,KAAA,CAAA,KAAA,EAAA,CAACV,EAAG,CAAAW,MAAA,CAAKL,IAEXN,CACR,EACA,CAACH,EAAGD,EAAM,EAGgB,CAC1Ba,IAAKtB,EACJ,SAACa,CAAuB,QACvB,EAAKA,GAIEH,CAAAA,EAAEY,GAAG,CAACrB,EAAUc,gBAAgB,CAACF,EAAKJ,KAAWC,EAAEY,GAAG,CAACT,EAAG,CAClE,EACA,CAACH,EAAGD,EAAM,GAGb,EA9CAL,EAAOqB,aAAE,CA4DU,SAAAC,CAAA,EAA6E,IAS3FC,EATiBC,EAAUF,EAAVE,UAAU,CAAEC,EAAQH,EAARG,QAAQ,CAAEC,EAAKJ,EAALI,KAAK,CAAKC,EAAKpC,EAAA+B,EAAAM,GAEpDC,EAAOzB,EAAkBC,AADjBb,EAAkB,OACQ,IAEhCsC,EAA2DN,EAA3DM,EAAE,CAAEC,EAAuDP,EAAvDO,IAAI,CAAEC,EAAiDR,EAAjDQ,SAAS,CAAEC,EAAsCT,EAAtCS,eAAe,CAAEC,EAAqBV,EAArBU,MAAM,CAAEC,EAAaX,EAAbW,QAAQ,CAExDC,EAAQ,AAACJ,CAAAA,GAAaH,EAAKG,EAAS,EAAMG,CAAAA,EAAW,KAAO,EAAA,GAAOL,GAAMD,EAAKC,GAC9EO,EAAO1C,EAAQ,WAAA,OAAMsC,GAAmBvC,EAAA4C,aAAA,CAACxC,EAAY,CAACyC,QAASV,EAAKI,EAAiB,EAAG,EAAE,CAACA,EAAiBJ,EAAK,EAkBvH,aAfIK,GAAAA,EAAQpB,MAAM,EACjBS,CAAAA,EAAmBW,EAAOM,GAAG,CAAC,SAACC,CAAgB,EAC9C,IAAQhC,EAAmBgC,EAAnBhC,GAAG,CAAEuB,EAAcS,EAAdT,SAAS,QAEtB,AAAKA,EAIE,CACNvB,IAAAA,EACAuB,UAAWH,EAAKG,IALTS,CAOT,EAAC,EAID/C,EAAA4C,aAAA,CAACvC,EAAeT,EAAA,CACfyC,KAAMA,EACNK,MAAOA,EACPC,KAAMA,EACNX,MAAOA,EACPgB,cAAejB,EACfkB,IAAKb,CAAG,EACHP,GAAoB,CAAEW,OAAQX,CAAgB,EAC/CI,GAGP"}