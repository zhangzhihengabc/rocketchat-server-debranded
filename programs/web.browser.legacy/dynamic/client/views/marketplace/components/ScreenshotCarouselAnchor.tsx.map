)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/components/ScreenshotCarouselAnchor.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { AppScreenshot } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, Icon } from '@rocket.chat/fuselage';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport ScreenshotCarousel from './ScreenshotCarousel';\n\ntype ScreenshotCarouselAnchorProps = {\n\tscreenshots: AppScreenshot[];\n};\n\ntype voidFunction = () => void;\n\nconst ScreenshotCarouselAnchor = ({ screenshots }: ScreenshotCarouselAnchorProps): ReactElement => {\n\tconst [viewCarousel, setViewCarousel] = useState(false);\n\n\tconst [currentSlideIndex, setCurrentSlideIndex] = useState(0);\n\n\tconst [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n\n\tconst { length } = screenshots;\n\n\tconst isFirstSlide = currentSlideIndex === 0;\n\tconst isLastSlide = currentSlideIndex === length - 1;\n\n\tconst isCarouselVisible = viewCarousel && screenshots?.length;\n\n\tconst handleNextSlide = (): void => {\n\t\tsetCurrentSlideIndex(currentSlideIndex + 1);\n\t};\n\n\tconst handlePrevSlide = (): void => {\n\t\tsetCurrentSlideIndex(currentSlideIndex - 1);\n\t};\n\n\tconst handleKeyboardKey = useCallback(\n\t\t(onKeyDownEvent: KeyboardEvent): void => {\n\t\t\tconst keysObject: Record<string, voidFunction> = {\n\t\t\t\tArrowLeft: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== 0 ? prevSlideIndex - 1 : 0)),\n\t\t\t\tArrowRight: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== length - 1 ? prevSlideIndex + 1 : length - 1)),\n\t\t\t\tEscape: () => setViewCarousel(false),\n\t\t\t};\n\n\t\t\tkeysObject[onKeyDownEvent.key]();\n\t\t},\n\t\t[length],\n\t);\n\n\tuseEffect(() => {\n\t\tconst intervalId = setInterval(() => {\n\t\t\tsetCurrentPreviewIndex((prevIndex) => {\n\t\t\t\tif (prevIndex === length - 1) return 0;\n\n\t\t\t\treturn prevIndex + 1;\n\t\t\t});\n\t\t}, 5000);\n\n\t\tdocument.addEventListener('keydown', handleKeyboardKey);\n\n\t\treturn (): void => {\n\t\t\tclearInterval(intervalId);\n\t\t\tdocument.removeEventListener('keydown', handleKeyboardKey);\n\t\t};\n\t}, [handleKeyboardKey, length]);\n\n\tconst carouselPortal = createPortal(\n\t\t<ScreenshotCarousel\n\t\t\tAppScreenshots={screenshots}\n\t\t\tsetViewCarousel={setViewCarousel}\n\t\t\thandleNextSlide={handleNextSlide}\n\t\t\thandlePrevSlide={handlePrevSlide}\n\t\t\tisFirstSlide={isFirstSlide}\n\t\t\tisLastSlide={isLastSlide}\n\t\t\tcurrentSlideIndex={currentSlideIndex}\n\t\t/>,\n\t\tdocument.body,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Box\n\t\t\t\tonClick={(): void => setViewCarousel(true)}\n\t\t\t\tdisplay='flex'\n\t\t\t\tflexDirection='column'\n\t\t\t\tmaxWidth='x640'\n\t\t\t\twidth='100%'\n\t\t\t\tstyle={{\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t}}\n\t\t\t\ttabIndex={0}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tis='img'\n\t\t\t\t\tsrc={screenshots[currentPreviewIndex]?.accessUrl}\n\t\t\t\t\talt='App preview image'\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\ttransition: filter 0.2s ease;\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\tfilter: brightness(90%);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t/>\n\n\t\t\t\t<Box display='flex' flexDirection='row' bg='tint' pi={16} pb={10} alignItems='center'>\n\t\t\t\t\t<Icon name='image' size='x24' mie={8} />{' '}\n\t\t\t\t\t<Box is='span' fontScale='p2m' color='default'>\n\t\t\t\t\t\t{currentPreviewIndex + 1} of {screenshots.length}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{isCarouselVisible && carouselPortal}\n\t\t</>\n\t);\n};\n\nexport default ScreenshotCarouselAnchor;\n",null],"names":["_taggedTemplateLiteralLoose","_slicedToArray","css","Box","Icon","React","useCallback","useEffect","useState","createPortal","ScreenshotCarousel","module","default","link","v","exportDefault","_ref","_screenshots$currentP","screenshots","_useState2","viewCarousel","setViewCarousel","_useState4","currentSlideIndex","setCurrentSlideIndex","_useState6","currentPreviewIndex","setCurrentPreviewIndex","length","isFirstSlide","isLastSlide","isCarouselVisible","handleKeyboardKey","onKeyDownEvent","keysObject","ArrowLeft","prevSlideIndex","ArrowRight","Escape","key","intervalId","setInterval","prevIndex","document","addEventListener","clearInterval","removeEventListener","carouselPortal","createElement","AppScreenshots","handleNextSlide","handlePrevSlide","body","Fragment","onClick","display","flexDirection","maxWidth","width","style","cursor","tabIndex","is","src","accessUrl","alt","className","_templateObject","bg","pi","pb","alignItems","name","size","mie","fontScale","color"],"mappings":"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"}