)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppsRoute.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useRouteParameter, useRoute, usePermission } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useEffect } from 'react';\n\nimport PageSkeleton from '../../components/PageSkeleton';\nimport AppsProvider from '../../providers/AppsProvider';\nimport NotAuthorizedPage from '../notAuthorized/NotAuthorizedPage';\nimport AppDetailsPage from './AppDetailsPage';\nimport AppInstallPage from './AppInstallPage';\nimport AppsPage from './AppsPage';\nimport BannerEnterpriseTrialEnded from './components/BannerEnterpriseTrialEnded';\n\nconst AppsRoute = (): ReactElement => {\n\tconst [isLoading, setLoading] = useState(true);\n\tconst marketplaceRoute = useRoute('marketplace');\n\n\tconst context = useRouteParameter('context') || 'explore';\n\tconst id = useRouteParameter('id');\n\tconst page = useRouteParameter('page');\n\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst canAccessMarketplace = usePermission('access-marketplace');\n\n\tif (!page) marketplaceRoute.push({ context, page: 'list' });\n\n\tuseEffect(() => {\n\t\tlet mounted = true;\n\n\t\tconst initialize = async (): Promise<void> => {\n\t\t\tif (!mounted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t};\n\n\t\tinitialize();\n\n\t\treturn (): void => {\n\t\t\tmounted = false;\n\t\t};\n\t}, [marketplaceRoute, context]);\n\n\tif (\n\t\t(context === 'explore' || context === 'installed' || context === 'private' || context === 'premium') &&\n\t\t!canAccessMarketplace &&\n\t\t!isAdminUser\n\t) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\tif ((context === 'requested' || page === 'install') && !isAdminUser) return <NotAuthorizedPage />;\n\n\tif (isLoading) {\n\t\treturn <PageSkeleton />;\n\t}\n\n\treturn (\n\t\t<AppsProvider>\n\t\t\t<BannerEnterpriseTrialEnded />\n\t\t\t{(page === 'list' && <AppsPage />) ||\n\t\t\t\t(id && page === 'info' && <AppDetailsPage id={id} />) ||\n\t\t\t\t(page === 'install' && <AppInstallPage />)}\n\t\t</AppsProvider>\n\t);\n};\n\nexport default AppsRoute;\n",null],"names":["_regeneratorRuntime","_slicedToArray","useRouteParameter","useRoute","usePermission","React","useState","useEffect","PageSkeleton","AppsProvider","NotAuthorizedPage","AppDetailsPage","AppInstallPage","AppsPage","BannerEnterpriseTrialEnded","module","link","default","v","exportDefault","_useState2","isLoading","setLoading","marketplaceRoute","context","id","page","isAdminUser","canAccessMarketplace","push","mounted","async","_context","prev","next","abrupt","stop","Promise","createElement"],"mappings":"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"}