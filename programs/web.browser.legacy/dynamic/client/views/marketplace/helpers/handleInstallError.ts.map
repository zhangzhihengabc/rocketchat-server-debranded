)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/helpers/handleInstallError.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { t } from '../../../../app/utils/lib/i18n';\nimport { dispatchToastMessage } from '../../../lib/toast';\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ninterface ApiError {\n\txhr: {\n\t\tresponseJSON: {\n\t\t\terror: string;\n\t\t\tstatus: string;\n\t\t\tmessages: string[];\n\t\t\tpayload?: any;\n\t\t};\n\t};\n}\n\nexport function handleInstallError(apiError: ApiError | Error): void {\n\tif (apiError instanceof Error) {\n\t\tdispatchToastMessage({ type: 'error', message: apiError.message });\n\t\treturn;\n\t}\n\n\tif (!apiError.xhr?.responseJSON) {\n\t\treturn;\n\t}\n\n\tconst { status, messages, error, payload = null } = apiError.xhr.responseJSON;\n\n\tlet message: string;\n\n\tswitch (status) {\n\t\tcase 'storage_error':\n\t\t\tmessage = messages.join('');\n\t\t\tbreak;\n\t\tcase 'app_user_error':\n\t\t\tmessage = messages.join('');\n\t\t\tif (payload?.username) {\n\t\t\t\tmessage = t('Apps_User_Already_Exists', { username: payload.username });\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (error) {\n\t\t\t\tmessage = error;\n\t\t\t} else {\n\t\t\t\tmessage = t('There_has_been_an_error_installing_the_app');\n\t\t\t}\n\t}\n\n\tdispatchToastMessage({ type: 'error', message });\n}\n",null],"names":["t","dispatchToastMessage","handleInstallError","apiError","Error","type","message","_apiError$xhr","xhr","responseJSON","_apiError$xhr$respons","status","messages","error","_apiError$xhr$respons2","payload","join","username","module","export"],"mappings":"2BAAmDA,EAAAC,EAe7C,SAAUC,EAAmBC,CAA0B,EAC5D,GAAIA,aAAoBC,MAAO,CAC9BH,EAAqB,CAAEI,KAAM,QAASC,QAASH,EAASG,OAAAA,AAAO,GAC/D,OAGD,GAAI,AAAa,OAAbC,CAAAA,EAACJ,EAASK,GAAG,AAAHA,GAAGD,AAAA,KAAA,IAAAA,GAAZA,EAAcE,YAAY,EAI/B,IAV4DF,EAYxDD,EAFJI,EAAoDP,EAASK,GAAG,CAACC,YAAY,CAArEE,EAAMD,EAANC,MAAM,CAAEC,EAAQF,EAARE,QAAQ,CAAEC,EAAKH,EAALG,KAAK,CAAAC,EAAAJ,EAAEK,OAAO,CAAPA,EAAOD,AAAA,KAAA,IAAAA,EAAG,KAAIA,EAI/C,OAAQH,GACP,IAAK,gBACJL,EAAUM,EAASI,IAAI,CAAC,IACxB,KACD,KAAK,iBACJV,EAAUM,EAASI,IAAI,CAAC,UACpBD,GAAAA,EAASE,QAAQ,EACpBX,CAAAA,EAAUN,EAAE,2BAA4B,CAAEiB,SAAUF,EAAQE,QAAAA,AAAQ,EAAE,EAEvE,KACD,SAEEX,EADGO,GAGOb,EAAE,6CACZ,CAGHC,EAAqB,CAAEI,KAAM,QAASC,QAAAA,CAAO,GAC9C,CAhDAY,EAAOC,MAAK,CAAA,CAAAjB,mBAAM,WAAA,OAAiCA,CAAA,CAAA,GAAAgB,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAlB,EAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAkB,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAjB,qBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}