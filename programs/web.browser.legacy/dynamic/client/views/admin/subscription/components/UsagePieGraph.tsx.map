)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/subscription/components/UsagePieGraph.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { DatumId } from '@nivo/pie';\nimport { Pie } from '@nivo/pie';\nimport { Box, Palette } from '@rocket.chat/fuselage';\nimport type { ReactElement, CSSProperties, ReactNode } from 'react';\nimport React, { useMemo, useCallback, memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useLocalePercentage } from '../../../../hooks/useLocalePercentage';\n\ntype GraphColorsReturn = { [key: string]: string };\n\nconst graphColors = (color: CSSProperties['color']): GraphColorsReturn => ({\n\tused: color || Palette.statusColor['status-font-on-success'].toString(),\n\tfree: Palette.stroke['stroke-extra-light'].toString(),\n});\n\nexport type UsagePieGraphProps = {\n\tused: number;\n\ttotal: number;\n\tlabel?: ReactNode;\n\tcolor?: string;\n\tsize?: number;\n};\n\ntype GraphData = Array<{\n\tid: string;\n\tlabel: string;\n\tvalue: number;\n}>;\n\nconst UsagePieGraph = ({ used = 0, total = 0, label, color, size = 140 }: UsagePieGraphProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst parsedData = useMemo(\n\t\t(): GraphData => [\n\t\t\t{\n\t\t\t\tid: 'used',\n\t\t\t\tlabel: 'used',\n\t\t\t\tvalue: used,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'free',\n\t\t\t\tlabel: 'free',\n\t\t\t\tvalue: total - used,\n\t\t\t},\n\t\t],\n\t\t[total, used],\n\t);\n\n\tconst getColor = useCallback(\n\t\t(datum: { id: DatumId } | undefined) => {\n\t\t\tif (!datum || typeof datum.id !== 'string') {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn graphColors(color)[datum.id];\n\t\t},\n\t\t[color],\n\t);\n\n\tconst unlimited = total === 0;\n\n\tconst localePercentage = useLocalePercentage(total, used, 0);\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' alignItems='center'>\n\t\t\t<Box size={`x${size}`}>\n\t\t\t\t<Box position='relative'>\n\t\t\t\t\t<Pie\n\t\t\t\t\t\tdata={parsedData}\n\t\t\t\t\t\tmargin={{ top: 10, right: 10, bottom: 10, left: 10 }}\n\t\t\t\t\t\tinnerRadius={0.8}\n\t\t\t\t\t\tcolors={getColor}\n\t\t\t\t\t\twidth={size}\n\t\t\t\t\t\theight={size}\n\t\t\t\t\t\tenableArcLabels={false}\n\t\t\t\t\t\tenableArcLinkLabels={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tdisplay='flex'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tfontScale='p2m'\n\t\t\t\t\t\tstyle={{ left: 0, right: 0, top: 0, bottom: 0 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{unlimited ? 'âˆž' : localePercentage}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Box is='span' fontScale='p2' color='font-secondary-info'>\n\t\t\t\t{unlimited &&\n\t\t\t\t\tt('used_limit_infinite', {\n\t\t\t\t\t\tused,\n\t\t\t\t\t})}\n\t\t\t\t{!unlimited &&\n\t\t\t\t\tt('used_limit', {\n\t\t\t\t\t\tused,\n\t\t\t\t\t\tlimit: total,\n\t\t\t\t\t})}\n\t\t\t</Box>\n\t\t\t{label && (\n\t\t\t\t<Box is='span' mbs={4} color='font-secondary-info'>\n\t\t\t\t\t{label}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default memo(UsagePieGraph);\n",null],"names":["Pie","Box","Palette","React","useMemo","useCallback","memo","useTranslation","useLocalePercentage","module","link","v","exportDefault","_ref","_ref$used","used","_ref$total","total","label","color","_ref$size","size","t","_useTranslation","parsedData","id","value","getColor","datum","graphColors","statusColor","toString","free","stroke","unlimited","localePercentage","createElement","display","flexDirection","alignItems","position","data","margin","top","right","bottom","left","innerRadius","colors","width","height","enableArcLabels","enableArcLinkLabels","justifyContent","fontScale","style","is","limit","mbs"],"mappings":"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"}