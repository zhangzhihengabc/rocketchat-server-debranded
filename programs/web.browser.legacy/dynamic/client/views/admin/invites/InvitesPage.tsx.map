)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/invites/InvitesPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { States, StatesIcon, StatesTitle, StatesActions, StatesAction } from '@rocket.chat/fuselage';\nimport { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../components/GenericTable';\nimport Page from '../../../components/Page';\nimport InviteRow from './InviteRow';\n\nconst InvitesPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst getInvites = useEndpoint('GET', '/v1/listInvites');\n\n\tconst { data, isLoading, refetch, isSuccess, isError } = useQuery(\n\t\t['invites'],\n\t\tasync () => {\n\t\t\tconst invites = await getInvites();\n\t\t\treturn invites;\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tconst onRemove = (removeInvite: () => Promise<boolean>): void => {\n\t\tconst confirmRemove = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait removeInvite();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Invite_removed') });\n\t\t\t\trefetch();\n\t\t\t} catch (error) {\n\t\t\t\tif (typeof error === 'string' || error instanceof Error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tsetModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Are_you_sure')}\n\t\t\t\tchildren={t('Are_you_sure_you_want_to_delete_this_record')}\n\t\t\t\tvariant='danger'\n\t\t\t\tconfirmText={t('Yes')}\n\t\t\t\tcancelText={t('No')}\n\t\t\t\tonClose={(): void => setModal()}\n\t\t\t\tonCancel={(): void => setModal()}\n\t\t\t\tonConfirm={confirmRemove}\n\t\t\t/>,\n\t\t);\n\t};\n\n\tconst notSmall = useMediaQuery('(min-width: 768px)');\n\n\tconst headers = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<GenericTableHeaderCell w={notSmall ? '20%' : '80%'}>{t('Token')}</GenericTableHeaderCell>\n\t\t\t\t{notSmall && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<GenericTableHeaderCell w='35%'>{t('Created_at')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='20%'>{t('Expiration')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='10%'>{t('Uses')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='10%'>{t('Uses_left')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</>\n\t\t),\n\t\t[notSmall, t],\n\t);\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Invites')} />\n\t\t\t<Page.Content>\n\t\t\t\t<>\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={4} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data && data.length > 0 && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t{isLoading && <GenericTableLoadingTable headerCells={notSmall ? 4 : 1} />}\n\t\t\t\t\t\t\t\t{data.map((invite) => (\n\t\t\t\t\t\t\t\t\t<InviteRow key={invite._id} {...invite} onRemove={onRemove} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data && data.length === 0 && <GenericNoResults />}\n\t\t\t\t\t{isError && (\n\t\t\t\t\t\t<States>\n\t\t\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t\t</States>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t</Page.Content>\n\t\t</Page>\n\t);\n};\n\nexport default InvitesPage;\n",null],"names":["_extends","_regeneratorRuntime","States","StatesIcon","StatesTitle","StatesActions","StatesAction","useMediaQuery","useSetModal","useToastMessageDispatch","useTranslation","useEndpoint","useQuery","React","useMemo","GenericModal","GenericNoResults","GenericTable","GenericTableBody","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","Page","InviteRow","module","link","default","v","exportDefault","t","dispatchToastMessage","setModal","getInvites","_useQuery","invites","async","_context","prev","next","awrap","sent","abrupt","stop","Promise","onError","error","type","message","data","isLoading","refetch","isSuccess","isError","onRemove","removeInvite","createElement","title","children","variant","confirmText","cancelText","onClose","onCancel","onConfirm","_context2","t0","Error","finish","notSmall","headers","Fragment","w","Header","Content","headerCells","length","map","invite","key","_id","name","variation","onClick"],"mappings":"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"}