)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useConfirmOwnerChanges.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React from 'react';\n\nimport ConfirmOwnerChangeWarningModal from '../../../../components/ConfirmOwnerChangeModal';\n\nexport const useConfirmOwnerChanges = (): ((\n\taction: (confirm?: boolean) => Promise<void>,\n\tmodalProps: Pick<ComponentProps<typeof ConfirmOwnerChangeWarningModal>, 'contentTitle' | 'confirmText'>,\n\tonChange: () => void,\n) => Promise<void>) => {\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn async (action, modalProps, onChange): Promise<void> => {\n\t\ttry {\n\t\t\treturn await action();\n\t\t} catch (error: any) {\n\t\t\tif (error.errorType === 'user-last-owner') {\n\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.details;\n\n\t\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\t\tawait action(true);\n\t\t\t\t\tsetModal();\n\t\t\t\t\tonChange();\n\t\t\t\t};\n\n\t\t\t\treturn setModal(\n\t\t\t\t\t<ConfirmOwnerChangeWarningModal\n\t\t\t\t\t\t{...modalProps}\n\t\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\t\tonCancel={(): void => setModal()}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t}\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n};\n",null],"names":["module","link","default","_extends","v","_regeneratorRuntime","export","useConfirmOwnerChanges","useSetModal","useToastMessageDispatch","React","ConfirmOwnerChangeWarningModal","setModal","dispatchToastMessage","action","modalProps","onChange","_error$details","shouldChangeOwner","shouldBeRemoved","handleConfirm","async","_context2","prev","next","awrap","abrupt","sent","t0","errorType","details","_callee","_callee$","_context","stop","Promise","createElement","onConfirm","onCancel","type","message"],"mappings":"uBAASA,EAAWC,IAAE,CAAA,iCAA+B,CAAAC,QAAAA,SAAAA,CAAAA,EAA0BC,EAACC,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAG,EAAAA,CAAA,CAAA,EAAA,GAAhFL,EAAOM,MAAE,CAAA,CAAAC,uBAAa,WAAyB,OAAMA,CAAA,CAA0B,GAACP,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAQ,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAI,CAAA,EAAAM,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,iDAAAA,CAAA,QAAA,SAAAI,CAAA,EAAAO,EAAAA,CAAA,CAAA,EAAA,GAMzE,IANPR,EAAgFE,EAAAG,EAAAC,EAAAC,EAAAC,EAMnEJ,EAAyB,WAKrC,IAAMK,EAAWJ,IACXK,EAAuBJ,IAE7B,OAAO,SAAOK,CAAM,CAAEC,CAAU,CAAEC,CAAQ,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAf,EAAAgB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAnB,EAAAoB,KAAA,CAE3BX,IAAQ,MAAA,EAAA,OAAAQ,EAAAI,MAAA,CAAA,SAAAJ,EAAAK,IAAA,CAAA,MAAA,EAAA,GAAAL,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAAA,AAEG,oBAApBA,EAAAM,EAAA,CAAMC,SAAS,CAAsB,CAAAP,EAAAE,IAAA,CAAA,GAAA,KAAA,CAOvC,OANON,EAAiBD,AADeA,CAAAA,EACOK,EAAAM,EAAA,CAAME,OAAO,AAAPA,EAA7CZ,iBAAiB,CAAEC,EAAeF,EAAfE,eAAe,CAEpCC,EAAgB,SAAAW,IAAA,OAAA1B,EAAAgB,KAAA,CAAA,SAAAW,EAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAV,IAAA,CAAAU,EAAAT,IAAA,EAAA,KAAA,EAAA,OAAAS,EAAAT,IAAA,CAAA,EAAAnB,EAAAoB,KAAA,CACfX,EAAO,CAAA,GAAK,MAAA,EAClBF,IACAI,GAAW,MAAA,EAAA,IAAA,MAAA,OAAAiB,EAAAC,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EACXb,EAAAI,MAAA,CAAA,SAEMd,EACNF,EAAA0B,aAAA,CAACzB,EAA8BR,EAAA,CAAA,EAC1BY,EAAU,CACdG,kBAAmBA,EACnBC,gBAAiBA,EACjBkB,UAAWjB,EACXkB,SAAU,WAAA,OAAY1B,GAAU,CAAC,KAElC,MAAA,GAEFC,EAAqB,CAAE0B,KAAM,QAASC,QAAOlB,EAAAM,EAAA,AAAO,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAN,EAAAY,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,CAG3D"}