)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useResetE2EEKeyAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useSetModal, usePermission, useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport GenericModal from '../../../../components/GenericModal';\nimport type { Action } from '../../../hooks/useActionSpread';\n\nexport const useResetE2EEKeyAction = (userId: IUser['_id']): Action | undefined => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst canResetE2EEKey = usePermission('edit-other-user-e2ee');\n\tconst resetE2EEKeyRequest = useEndpoint('POST', '/v1/users.resetE2EKey');\n\n\tconst resetE2EEKey = useCallback(async () => {\n\t\ttry {\n\t\t\tawait resetE2EEKeyRequest({ userId });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Users_key_has_been_reset') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tsetModal();\n\t\t}\n\t}, [resetE2EEKeyRequest, setModal, t, userId, dispatchToastMessage]);\n\n\tconst confirmResetE2EEKey = useCallback(() => {\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={resetE2EEKey} onCancel={(): void => setModal()} confirmText={t('Reset')}>\n\t\t\t\t{t('E2E_Reset_Other_Key_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t}, [resetE2EEKey, t, setModal]);\n\n\treturn canResetE2EEKey\n\t\t? {\n\t\t\t\ticon: 'key',\n\t\t\t\tlabel: t('Reset_E2E_Key'),\n\t\t\t\taction: confirmResetE2EEKey,\n\t\t  }\n\t\t: undefined;\n};\n",null],"names":["module","default","_regeneratorRuntime","v","export","useResetE2EEKeyAction","useSetModal","usePermission","useEndpoint","useTranslation","useToastMessageDispatch","React","useCallback","GenericModal","userId","t","setModal","dispatchToastMessage","canResetE2EEKey","resetE2EEKeyRequest","resetE2EEKey","async","_context","prev","next","awrap","type","message","t0","finish","stop","Promise","confirmResetE2EEKey","createElement","variant","onConfirm","onCancel","confirmText","icon","label","action","undefined"],"mappings":"uBACsBA,EAAAA,IAAa,CAAA,6BAA6B,CAAEC,QAAAA,SAAAA,CAAAA,EAAAC,EAA+BC,CAAA,CAAA,EAAA,GAAjGH,EAAOI,MAAE,CAAA,CAAAC,sBAA4B,WAAW,OAAEA,CAAgB,CAAA,GAA0DL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAQ,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,sCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAU,EAAAA,CAAA,CAAA,EAAA,GAMrH,IANPX,EAAkEI,EAAyBC,EAAMC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAM/GR,EAAwB,SAACS,CAAoB,EACzD,IAAMC,EAAIN,IACJO,EAAWV,IACXW,EAAuBP,IACvBQ,EAAkBX,EAAc,wBAChCY,EAAsBX,EAAY,OAAQ,yBAE1CY,EAAeR,EAAY,WAAA,OAAAV,EAAAmB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAtB,EAAAuB,KAAA,CAEzBN,EAAoB,CAAEL,OAAAA,CAAM,GAAG,MAAA,EACrCG,EAAqB,CAAES,KAAM,UAAWC,QAASZ,EAAE,2BAA2B,GAAIO,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAElFL,EAAqB,CAAES,KAAM,QAASC,QAAOL,EAAAM,EAAA,AAAO,EAAI,MAAA,EAE7C,OAF6CN,EAAAC,IAAA,CAAA,EAExDP,IAAWM,EAAAO,MAAA,CAAA,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAEV,CAACZ,EAAqBH,EAAUD,EAAGD,EAAQG,EAAqB,EAE7De,EAAsBpB,EAAY,WACvCI,EACCL,EAAAsB,aAAA,CAACpB,EAAY,CAACqB,QAAQ,SAASC,UAAWf,EAAcgB,SAAU,WAAA,OAAYpB,GAAU,EAAEqB,YAAatB,EAAE,QAAS,EAChHA,EAAE,gCAGN,EAAG,CAACK,EAAcL,EAAGC,EAAS,EAE9B,OAAOE,EACJ,CACAoB,KAAM,MACNC,MAAOxB,EAAE,iBACTyB,OAAQR,GAERS,KAAAA,CACJ"}