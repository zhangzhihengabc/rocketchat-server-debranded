)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useChangeUserStatusAction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport type { Action } from '../../../hooks/useActionSpread';\nimport { useConfirmOwnerChanges } from './useConfirmOwnerChanges';\n\nexport const useChangeUserStatusAction = (userId: IUser['_id'], isActive: boolean, onChange: () => void): Action | undefined => {\n\tconst t = useTranslation();\n\tconst confirmOwnerChanges = useConfirmOwnerChanges();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst changeActiveStatusRequest = useEndpoint('POST', '/v1/users.setActiveStatus');\n\tconst canEditOtherUserActiveStatus = usePermission('edit-other-user-active-status');\n\tconst changeActiveStatusMessage = isActive ? 'User_has_been_deactivated' : 'User_has_been_activated';\n\n\tconst activeStatusQuery = useMemo(\n\t\t() => ({\n\t\t\tuserId,\n\t\t\tactiveStatus: !isActive,\n\t\t\tconfirmRelinquish: false,\n\t\t}),\n\t\t[userId, isActive],\n\t);\n\n\tconst changeActiveStatus = (): Promise<void> =>\n\t\tconfirmOwnerChanges(\n\t\t\tasync (confirm = false) => {\n\t\t\t\tif (confirm) {\n\t\t\t\t\tactiveStatusQuery.confirmRelinquish = confirm;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tawait changeActiveStatusRequest(activeStatusQuery);\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t(changeActiveStatusMessage) });\n\t\t\t\t\tonChange();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tconfirmText: t('Yes_deactivate_it'),\n\t\t\t},\n\t\t\tonChange,\n\t\t);\n\n\treturn canEditOtherUserActiveStatus\n\t\t? {\n\t\t\t\ticon: 'user',\n\t\t\t\tlabel: isActive ? t('Deactivate') : t('Activate'),\n\t\t\t\taction: changeActiveStatus,\n\t\t  }\n\t\t: undefined;\n};\n",null],"names":["module","default","v","_regeneratorRuntime","export","useChangeUserStatusAction","useToastMessageDispatch","useTranslation","useEndpoint","usePermission","useMemo","useConfirmOwnerChanges","userId","isActive","onChange","t","confirmOwnerChanges","dispatchToastMessage","changeActiveStatusRequest","canEditOtherUserActiveStatus","changeActiveStatusMessage","activeStatusQuery","activeStatus","confirmRelinquish","icon","label","action","confirm","_args","arguments","async","_context","prev","next","length","undefined","awrap","type","message","t0","stop","Promise","confirmText"],"mappings":"uBACSA,EAAAA,IAAyB,CAAA,6BAA6B,CAAAC,QAAAA,SAAeC,CAAM,EAAAC,EAAAA,CAAA,CAAA,EAA0B,GAA9GH,EAAOI,MAAE,CAAA,CAAAC,0BAAyB,WAAgB,OAAAA,CAAkC,CAAA,GAA2BL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,QAAAA,CAAAU,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAW,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMxG,IANPR,EAAoFG,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAMlGN,EAA4B,SAACO,CAAoB,CAAEC,CAAiB,CAAEC,CAAoB,EACtG,IAAMC,EAAIR,IACJS,EAAsBL,IACtBM,EAAuBX,IACvBY,EAA4BV,EAAY,OAAQ,6BAChDW,EAA+BV,EAAc,iCAC7CW,EAA4BP,EAAW,4BAA8B,0BAErEQ,EAAoBX,EACzB,WAAA,MAAO,CACNE,OAAAA,EACAU,aAAc,CAACT,EACfU,kBAAmB,CAAA,EACnB,EACD,CAACX,EAAQC,EAAS,EAwBnB,OAAOM,EACJ,CACAK,KAAM,OACNC,MAAOZ,EAAWE,EAAE,cAAgBA,EAAE,YACtCW,OAzBwB,WAAA,OAC1BV,EACC,WAAA,IAAAW,EAAAC,EAAAC,UAAA,OAAA1B,EAAA2B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAGE,MAHKN,CAAAA,EAAOC,EAAAM,MAAA,CAAA,GAAAN,AAAAO,KAAAA,IAAAP,CAAA,CAAA,EAAA,EAAAA,CAAA,CAAA,EAAA,AAAG,GAEfP,CAAAA,EAAkBE,iBAAiB,CAAGI,CAAAA,EACtCI,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAA9B,EAAAiC,KAAA,CAGMlB,EAA0BG,GAAkB,MAAA,EAClDJ,EAAqB,CAAEoB,KAAM,UAAWC,QAASvB,EAAEK,EAA0B,GAC7EN,IAAWiB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAA,MAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAQ,EAAA,CAAAR,EAAA,KAAA,CAAA,GAAAA,EAAAQ,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAR,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAKb,CACCC,YAAa3B,EAAE,sBAEhBD,EACA,GAQCqB,KAAAA,CACJ"}