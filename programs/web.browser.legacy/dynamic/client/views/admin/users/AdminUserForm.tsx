function module(e,n,t){var r,l,a,i,o,u,s,c,d,m,f,v,E,h,g,p,_,b,x,w,k,y,C,S,T,F,P,G,R,q,U,I,M,A,D,j,L,N,z,B,H,O,V,W,X,Q=["userData","onReload"],J=["avatar"];t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){l=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},2),t.link("@rocket.chat/fuselage",{Field:function(e){i=e},FieldLabel:function(e){o=e},FieldRow:function(e){u=e},FieldError:function(e){s=e},FieldHint:function(e){c=e},TextInput:function(e){d=e},TextAreaInput:function(e){m=e},PasswordInput:function(e){f=e},MultiSelectFiltered:function(e){v=e},Box:function(e){E=e},ToggleSwitch:function(e){h=e},Icon:function(e){g=e},Divider:function(e){p=e},FieldGroup:function(e){_=e},ContextualbarFooter:function(e){b=e},ButtonGroup:function(e){x=e},Button:function(e){w=e},Callout:function(e){k=e}},0),t.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){y=e},useMutableCallback:function(e){C=e}},1),t.link("@rocket.chat/ui-client",{CustomFieldsForm:function(e){S=e}},2),t.link("@rocket.chat/ui-contexts",{useAccountsCustomFields:function(e){T=e},useSetting:function(e){F=e},useEndpoint:function(e){P=e},useRouter:function(e){G=e},useToastMessageDispatch:function(e){R=e},useTranslation:function(e){q=e}},3),t.link("@tanstack/react-query",{useQuery:function(e){U=e},useMutation:function(e){I=e}},4),t.link("react",{default:function(e){M=e},useCallback:function(e){A=e}},5),t.link("react-hook-form",{Controller:function(e){D=e},useForm:function(e){j=e}},6),t.link("../../../../lib/emailValidator",{validateEmail:function(e){L=e}},7),t.link("../../../../lib/utils/parseCSV",{parseCSV:function(e){N=e}},8),t.link("../../../components/Contextualbar",{ContextualbarScrollableContent:function(e){z=e}},9),t.link("../../../components/avatar/UserAvatarEditor",{default:function(e){B=e}},10),t.link("../../../hooks/useEndpointAction",{useEndpointAction:function(e){H=e}},11),t.link("../../../hooks/useUpdateAvatar",{useUpdateAvatar:function(e){O=e}},12),t.link("../../../lib/constants",{USER_STATUS_TEXT_MAX_LENGTH:function(e){V=e},BIO_TEXT_MAX_LENGTH:function(e){W=e}},13),t.link("./hooks/useSmtpQuery",{useSmtpQuery:function(e){X=e}},14);var K=function(e){var n,t,r,l,a,i,o,u,s,c=e.data,d=e.defaultUserRoles,m=e.isSmtpEnabled;return{roles:null!==(n=null==c?void 0:c.roles)&&void 0!==n?n:d,name:null!==(t=null==c?void 0:c.name)&&void 0!==t?t:"",password:"",username:null!==(r=null==c?void 0:c.username)&&void 0!==r?r:"",bio:null!==(l=null==c?void 0:c.bio)&&void 0!==l?l:"",nickname:null!==(a=null==c?void 0:c.nickname)&&void 0!==a?a:"",email:(null==c?void 0:null===(i=c.emails)||void 0===i?void 0:i.length)&&c.emails[0].address||"",verified:(null==c?void 0:null===(o=c.emails)||void 0===o?void 0:o.length)&&c.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:(null==c?void 0:c.requirePasswordChange)||!1,customFields:null!==(u=null==c?void 0:c.customFields)&&void 0!==u?u:{},statusText:null!==(s=null==c?void 0:c.statusText)&&void 0!==s?s:"",joinDefaultChannels:!0,sendWelcomeEmail:m,avatar:""}};t.exportDefault(function(e){var n=e.userData,t=e.onReload,Y=a(e,Q),Z=q(),$=G(),ee=R(),en=T(),et=N(F("Accounts_Registration_Users_Default_Roles")||""),er=X().data,el=null==er?void 0:er.isSMTPConfigured,ea=H("POST","/v1/statistics.telemetry"),ei=P("POST","/v1/users.update"),eo=P("POST","/v1/users.create"),eu=P("GET","/v1/roles.list"),es=U(["roles"],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eu());case 1:case"end":return e.stop()}},null,null,null,Promise)}),ec=es.data,ed=es.error,em=(null==ec?void 0:ec.roles.map(function(e){var n=e._id,t=e.name;return[n,e.description||t]}))||[],ef=A(function(e){return $.navigate("/admin/users/info/"+e)},[$]),ev=j({defaultValues:K({data:n,defaultUserRoles:et,isSmtpEnabled:el}),mode:"onBlur"}),eE=ev.control,eh=ev.watch,eg=ev.handleSubmit,ep=ev.reset,e_=ev.formState,eb=e_.errors,ex=e_.isDirty,ew=eh(),ek=ew.avatar,ey=ew.username,eC=ew.setRandomPassword,eS=O(ek,(null==n?void 0:n._id)||""),eT=I({mutationFn:ei,onSuccess:function(e){var n;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.user._id,ee({type:"success",message:Z("User_updated_successfully")}),l.next=4,r.awrap(eS());case 4:$.navigate("/admin/users/info/"+n),t();case 6:case"end":return l.stop()}},null,null,null,Promise)},onError:function(e){ee({type:"error",message:e})}}),eF=I({mutationFn:eo,onSuccess:function(e){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return ee({type:"success",message:Z("User_created_successfully!")}),n.next=3,r.awrap(ea({params:[{eventName:"updateCounter",settingsId:"Manual_Entry_User_Count"}]}));case 3:ef(e.user._id),t();case 5:case"end":return n.stop()}},null,null,null,Promise)},onError:function(e){ee({type:"error",message:e})}}),eP=C(function(e){var t,l;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.avatar,l=a(e,J),!(null!=n&&n._id)){r.next=3;break}return r.abrupt("return",eT.mutateAsync({userId:null==n?void 0:n._id,data:l}));case 3:return r.abrupt("return",eF.mutateAsync(l));case 4:case"end":return r.stop()}},null,null,null,Promise)}),eG=y(),eR=y(),eq=y(),eU=y(),eI=y(),eM=y(),eA=y(),eD=y(),ej=y(),eL=y(),eN=y(),ez=y(),eB=y();return M.createElement(M.Fragment,null,M.createElement(z,Y,M.createElement(_,null,(null==n?void 0:n._id)&&M.createElement(i,null,M.createElement(D,{name:"avatar",control:eE,render:function(e){var t=e.field.onChange;return M.createElement(B,{currentUsername:null==n?void 0:n.username,username:ey,etag:null==n?void 0:n.avatarETag,setAvatarObj:t})}})),M.createElement(i,null,M.createElement(o,{htmlFor:eG},Z("Name")),M.createElement(u,null,M.createElement(D,{control:eE,name:"name",rules:{required:Z("The_field_is_required",Z("Name"))},render:function(e){var n,t=e.field;return M.createElement(d,l({},t,{id:eG,"aria-invalid":eb.name?"true":"false","aria-describedby":eG+"-error",error:null===(n=eb.name)||void 0===n?void 0:n.message,flexGrow:1}))}})),(null==eb?void 0:eb.name)&&M.createElement(s,{"aria-live":"assertive",id:eG+"-error"},eb.name.message)),M.createElement(i,null,M.createElement(o,{htmlFor:eR},Z("Username")),M.createElement(u,null,M.createElement(D,{control:eE,name:"username",rules:{required:Z("The_field_is_required",Z("Username"))},render:function(e){var n,t=e.field;return M.createElement(d,l({},t,{id:eR,"aria-invalid":eb.username?"true":"false","aria-describedby":eR+"-error",error:null===(n=eb.username)||void 0===n?void 0:n.message,flexGrow:1,addon:M.createElement(g,{name:"at",size:"x20"})}))}})),(null==eb?void 0:eb.username)&&M.createElement(s,{"aria-live":"assertive",id:eR+"-error"},eb.username.message)),M.createElement(i,null,M.createElement(o,{htmlFor:eq},Z("Email")),M.createElement(u,null,M.createElement(D,{control:eE,name:"email",rules:{required:Z("The_field_is_required",Z("Email")),validate:function(e){return L(e)?void 0:Z("error-invalid-email-address")}},render:function(e){var n,t=e.field;return M.createElement(d,l({},t,{id:eq,"aria-invalid":eb.email?"true":"false","aria-describedby":eq+"-error",error:null===(n=eb.email)||void 0===n?void 0:n.message,flexGrow:1,addon:M.createElement(g,{name:"mail",size:"x20"})}))}})),(null==eb?void 0:eb.email)&&M.createElement(s,{"aria-live":"assertive",id:eq+"-error"},eb.email.message)),M.createElement(i,null,M.createElement(E,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},M.createElement(o,{htmlFor:eU},Z("Verified")),M.createElement(u,null,M.createElement(D,{control:eE,name:"verified",render:function(e){var n=e.field,t=n.onChange,r=n.value;return M.createElement(h,{id:eU,checked:r,onChange:t})}})))),M.createElement(i,null,M.createElement(o,{htmlFor:eI},Z("StatusMessage")),M.createElement(u,null,M.createElement(D,{control:eE,name:"statusText",rules:{maxLength:{value:V,message:Z("Max_length_is",V)}},render:function(e){var n,t=e.field;return M.createElement(d,l({},t,{id:eI,error:null==eb?void 0:null===(n=eb.statusText)||void 0===n?void 0:n.message,"aria-invalid":eb.statusText?"true":"false","aria-describedby":eI+"-error",flexGrow:1,addon:M.createElement(g,{name:"edit",size:"x20"})}))}})),(null==eb?void 0:eb.statusText)&&M.createElement(s,{"aria-live":"assertive",id:eI+"-error"},eb.statusText.message)),M.createElement(i,null,M.createElement(o,{htmlFor:eM},Z("Bio")),M.createElement(u,null,M.createElement(D,{control:eE,name:"bio",rules:{maxLength:{value:W,message:Z("Max_length_is",W)}},render:function(e){var n,t=e.field;return M.createElement(m,l({},t,{id:eM,rows:3,error:null==eb?void 0:null===(n=eb.bio)||void 0===n?void 0:n.message,"aria-invalid":eb.bio?"true":"false","aria-describedby":eM+"-error",flexGrow:1,addon:M.createElement(g,{name:"edit",size:"x20",alignSelf:"center"})}))}})),(null==eb?void 0:eb.bio)&&M.createElement(s,{"aria-live":"assertive",id:eM+"-error"},eb.bio.message)),M.createElement(i,null,M.createElement(o,{htmlFor:eA},Z("Nickname")),M.createElement(u,null,M.createElement(D,{control:eE,name:"nickname",render:function(e){var n=e.field;return M.createElement(d,l({},n,{id:eA,flexGrow:1,addon:M.createElement(g,{name:"edit",size:"x20",alignSelf:"center"})}))}})))),M.createElement(_,null,!eC&&M.createElement(i,null,M.createElement(o,{htmlFor:eD},Z("Password")),M.createElement(u,null,M.createElement(D,{control:eE,name:"password",rules:{required:!(null!=n&&n._id)&&Z("The_field_is_required",Z("Password"))},render:function(e){var n,t=e.field;return M.createElement(f,l({},t,{id:eD,"aria-invalid":eb.password?"true":"false","aria-describedby":eD+"-error",error:null===(n=eb.password)||void 0===n?void 0:n.message,flexGrow:1,addon:M.createElement(g,{name:"key",size:"x20"})}))}})),(null==eb?void 0:eb.password)&&M.createElement(s,{"aria-live":"assertive",id:eD+"-error"},eb.password.message)),M.createElement(i,null,M.createElement(E,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},M.createElement(o,{htmlFor:ej},Z("Require_password_change")),M.createElement(u,null,M.createElement(D,{control:eE,name:"requirePasswordChange",render:function(e){var n=e.field,t=n.ref,r=n.onChange,l=n.value;return M.createElement(h,{ref:t,id:ej,disabled:eC,checked:eC||l,onChange:r})}})))),M.createElement(i,null,M.createElement(E,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},M.createElement(o,{htmlFor:eL},Z("Set_random_password_and_send_by_email")),M.createElement(u,null,M.createElement(D,{control:eE,name:"setRandomPassword",render:function(e){var n=e.field,t=n.ref,r=n.onChange,l=n.value;return M.createElement(h,{ref:t,id:eL,"aria-describedby":eL+"-hint",checked:l,onChange:r,disabled:!el})}}))),!el&&M.createElement(c,{id:eL+"-hint",dangerouslySetInnerHTML:{__html:Z("Send_Email_SMTP_Warning",{url:"admin/settings/Email"})}})),M.createElement(i,null,M.createElement(o,{htmlFor:eN},Z("Roles")),M.createElement(u,null,ed&&M.createElement(k,null,ed),!ed&&M.createElement(D,{control:eE,name:"roles",rules:{required:Z("The_field_is_required",Z("Roles"))},render:function(e){var n=e.field,t=n.onChange,r=n.value;return M.createElement(v,{id:eN,value:r,onChange:t,flexGrow:1,placeholder:Z("Select_an_option"),options:em})}})),(null==eb?void 0:eb.roles)&&M.createElement(s,null,eb.roles.message)),M.createElement(i,null,M.createElement(E,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},M.createElement(o,{htmlFor:ez},Z("Join_default_channels")),M.createElement(u,null,M.createElement(D,{control:eE,name:"joinDefaultChannels",render:function(e){var n=e.field,t=n.ref,r=n.onChange,l=n.value;return M.createElement(h,{id:ez,ref:t,onChange:r,checked:l})}})))),M.createElement(i,null,M.createElement(E,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},M.createElement(o,{htmlFor:eB},Z("Send_welcome_email")),M.createElement(u,null,M.createElement(D,{control:eE,name:"sendWelcomeEmail",render:function(e){var n=e.field,t=n.onChange,r=n.value;return M.createElement(h,{id:eB,"aria-describedby":eB+"-hint",onChange:t,checked:r,disabled:!el})}}))),!el&&M.createElement(c,{id:eB+"-hint",dangerouslySetInnerHTML:{__html:Z("Send_Email_SMTP_Warning",{url:"admin/settings/Email"})}})),!!en.length&&M.createElement(M.Fragment,null,M.createElement(p,null),M.createElement(E,{fontScale:"h4"},Z("Custom_Fields")),M.createElement(S,{formName:"customFields",formControl:eE,metadata:en})))),M.createElement(b,null,M.createElement(x,{stretch:!0},M.createElement(w,{type:"reset",disabled:!ex,onClick:function(){return ep(K({data:n,defaultUserRoles:et,isSmtpEnabled:el}))}},Z("Reset")),M.createElement(w,{primary:!0,disabled:!ex,onClick:eg(eP)},Z("Save")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/users/b8d2c0f5d855571402484d28f09db6ef9b5e16cd.map
