)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/emailInbox/EmailInboxTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useRoute, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport SendTestButton from './SendTestButton';\n\nconst EmailInboxTable = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst router = useRoute('admin-email-inboxes');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'email' | 'active'>('name');\n\n\tconst onClick = useCallback(\n\t\t(_id) => (): void => {\n\t\t\trouter.push({\n\t\t\t\tcontext: 'edit',\n\t\t\t\t_id,\n\t\t\t});\n\t\t},\n\t\t[router],\n\t);\n\n\tconst endpoint = useEndpoint('GET', '/v1/email-inbox.list');\n\n\tconst query = {\n\t\tsort: JSON.stringify({ [sortBy]: sortDirection === 'asc' ? 1 : -1 }),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tconst result = useQuery(['email-list', query], () => endpoint(query));\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort}>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='email' direction={sortDirection} active={sortBy === 'email'} onClick={setSort}>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='active' direction={sortDirection} active={sortBy === 'active'} onClick={setSort}>\n\t\t\t\t{t('Active')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='action'>{t('Action')}</GenericTableHeaderCell>,\n\t\t],\n\t\t[setSort, sortBy, sortDirection, t],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{result.isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{result.isSuccess && result.data.emailInboxes.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{result.data.emailInboxes.map((emailInbox) => (\n\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\tkey={emailInbox._id}\n\t\t\t\t\t\t\t\t\tonKeyDown={onClick(emailInbox._id)}\n\t\t\t\t\t\t\t\t\tonClick={onClick(emailInbox._id)}\n\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\twidth='full'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.name}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.email}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.active ? t('Yes') : t('No')}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<SendTestButton id={emailInbox._id} />\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={result.data.count}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{result.isSuccess && result.data.emailInboxes.length === 0 && <GenericNoResults />}\n\t\t\t{result.isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => result.refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default EmailInboxTable;\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","Pagination","States","StatesAction","StatesActions","StatesIcon","StatesTitle","useRoute","useTranslation","useEndpoint","useQuery","React","useMemo","useCallback","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","SendTestButton","module","link","default","v","exportDefault","_JSON$stringify","t","router","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","_useSort","sortBy","sortDirection","setSort","onClick","_id","push","context","endpoint","query","sort","JSON","stringify","count","offset","result","headers","createElement","key","direction","active","Fragment","isLoading","headerCells","isSuccess","data","emailInboxes","length","map","emailInbox","onKeyDown","tabIndex","role","action","width","withTruncatedText","name","email","id","divider","isError","variation","refetch"],"mappings":"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"}