function module(e,n,r){var t,l,a,i,o,u,m,s,c,d,p,v,f,E,_,g,h,b,w,S,x,P,k,C,I,q,y,U,M,R,T,D,F;r.link("@babel/runtime/helpers/extends",{default:function(e){t=e}},0),r.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},1),r.link("@babel/runtime/regenerator",{default:function(e){a=e}},2),r.link("@rocket.chat/fuselage",{Accordion:function(e){i=e},Button:function(e){o=e},ButtonGroup:function(e){u=e},TextInput:function(e){m=e},TextAreaInput:function(e){s=e},Field:function(e){c=e},ToggleSwitch:function(e){d=e},FieldGroup:function(e){p=e},Box:function(e){v=e},Margins:function(e){f=e},NumberInput:function(e){E=e},PasswordInput:function(e){_=e},FieldLabel:function(e){g=e},FieldRow:function(e){h=e},FieldError:function(e){b=e},FieldHint:function(e){w=e}},0),r.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){S=e}},1),r.link("@rocket.chat/ui-contexts",{useSetModal:function(e){x=e},useToastMessageDispatch:function(e){P=e},useRoute:function(e){k=e},useEndpoint:function(e){C=e},useTranslation:function(e){I=e}},2),r.link("react",{default:function(e){q=e},useCallback:function(e){y=e}},3),r.link("react-hook-form",{useForm:function(e){U=e},Controller:function(e){M=e}},4),r.link("../../../../lib/emailValidator",{validateEmail:function(e){R=e}},5),r.link("../../../components/AutoCompleteDepartment",{default:function(e){T=e}},6),r.link("../../../components/GenericModal",{default:function(e){D=e}},7),r.link("../../../components/Page",{default:function(e){F=e}},8),r.exportDefault(function(e){var n,r,A,L,j,G,O,V,B,N,W,H,Y,z,J,K,Q,X,Z,$,ee,en,er,et,el,ea,ei,eo,eu,em=e.inboxData,es=I(),ec=P(),ed=x(),ep=k("admin-email-inboxes"),ev=y(function(){return ep.push({})},[ep]),ef=C("POST","/v1/email-inbox"),eE=C("DELETE","/v1/email-inbox/:_id",{_id:null!==(n=null==em?void 0:em._id)&&void 0!==n?n:""}),e_=C("GET","/v1/email-inbox.search"),eg=U({defaultValues:{active:null===(r=null==em?void 0:em.active)||void 0===r||r,name:null==em?void 0:em.name,email:null==em?void 0:em.email,description:null==em?void 0:em.description,senderInfo:null==em?void 0:em.senderInfo,department:(null==em?void 0:em.department)||"",smtpServer:null==em?void 0:em.smtp.server,smtpPort:null!==(A=null==em?void 0:em.smtp.port)&&void 0!==A?A:587,smtpUsername:null==em?void 0:em.smtp.username,smtpPassword:null==em?void 0:em.smtp.password,smtpSecure:null!==(L=null==em?void 0:em.smtp.secure)&&void 0!==L&&L,imapServer:null==em?void 0:em.imap.server,imapPort:null!==(j=null==em?void 0:em.imap.port)&&void 0!==j?j:993,imapUsername:null==em?void 0:em.imap.username,imapPassword:null==em?void 0:em.imap.password,imapSecure:null!==(G=null==em?void 0:em.imap.secure)&&void 0!==G&&G,imapRetries:null!==(O=null==em?void 0:em.imap.maxRetries)&&void 0!==O?O:10}}),eh=eg.register,eb=eg.control,ew=eg.handleSubmit,eS=eg.formState,ex=eS.errors,eP=eS.isDirty,ek=S(function(){ed(q.createElement(D,{variant:"danger",onConfirm:function(){return a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.awrap(eE());case 3:ec({type:"success",message:es("Email_Inbox_has_been_removed")}),ev(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ec({type:"error",message:e.t0});case 10:return e.prev=10,ed(null),e.finish(10);case 13:case"end":return e.stop()}},null,null,[[0,7,10,13]],Promise)},onCancel:function(){return ed(null)},confirmText:es("Delete")},es("You_will_not_be_able_to_recover_email_inbox")))}),eC=S(function(e){var n,r,t,i,o,u,m,s,c,d,p,v,f,E,_,g,h,b,w,S;return a.async(function(x){for(;;)switch(x.prev=x.next){case 0:return n=e.active,r=e.name,t=e.email,i=e.description,o=e.senderInfo,u=e.department,m=e.smtpServer,s=e.smtpPort,c=e.smtpUsername,d=e.smtpPassword,p=e.smtpSecure,v=e.imapServer,f=e.imapPort,E=e.imapUsername,_=e.imapPassword,g=e.imapSecure,h=e.imapRetries,b={server:m,port:parseInt(s),username:c,password:d,secure:p},w={server:v,port:parseInt(f),username:E,password:_,secure:g,maxRetries:parseInt(h)},S=l(l(l({},(null==em?void 0:em._id)&&{_id:null==em?void 0:em._id}),{},{active:n,name:r,email:t,description:i,senderInfo:o},u&&{department:"string"==typeof u?u:u.value}),{},{smtp:b,imap:w}),x.prev=4,x.next=7,a.awrap(ef(S));case 7:ec({type:"success",message:es("Email_Inbox_has_been_added")}),ev(),x.next=14;break;case 11:x.prev=11,x.t0=x.catch(4),ec({type:"error",message:x.t0});case 14:case"end":return x.stop()}},null,null,[[4,11]],Promise)}),eI=S(function(e){var n;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(R(e)){r.next=4;break}return r.abrupt("return",es("Validate_email_address"));case 4:return r.next=6,a.awrap(e_({email:e}));case 6:if(!(!(n=r.sent.emailInbox)||null!=em&&em._id&&n._id===(null==em?void 0:em._id))){r.next=10;break}return r.abrupt("return");case 10:return r.abrupt("return",es("Email_already_exists"));case 11:case"end":return r.stop()}},null,null,null,Promise)});return q.createElement(F.ScrollableContentWithShadow,null,q.createElement(v,{maxWidth:"x600",w:"full",alignSelf:"center"},q.createElement(i,null,q.createElement(i.Item,{defaultExpanded:!0,title:es("Inbox_Info")},q.createElement(p,null,q.createElement(c,null,q.createElement(g,{display:"flex",justifyContent:"space-between",w:"full"},es("Active"),q.createElement(M,{control:eb,name:"active",render:function(e){var n=e.field,r=n.onChange,t=n.value,l=n.ref;return q.createElement(d,{ref:l,checked:t,onChange:r})}}))),q.createElement(c,null,q.createElement(g,null,es("Name"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("name",{required:es("error-the-field-is-required",{field:es("Name")})}),{error:null===(V=ex.name)||void 0===V?void 0:V.message}))),ex.name&&q.createElement(b,null,null===(B=ex.name)||void 0===B?void 0:B.message)),q.createElement(c,null,q.createElement(g,null,es("Email"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("email",{required:es("error-the-field-is-required",{field:es("Email")}),validate:function(e){return eI(e)}}),{error:null===(N=ex.email)||void 0===N?void 0:N.message}))),ex.email&&q.createElement(b,null,null===(W=ex.email)||void 0===W?void 0:W.message)),q.createElement(c,null,q.createElement(g,null,es("Description")),q.createElement(h,null,q.createElement(s,t({},eh("description"),{rows:4})))),q.createElement(c,null,q.createElement(g,null,es("Sender_Info")),q.createElement(h,null,q.createElement(m,t({},eh("senderInfo"),{placeholder:es("Optional")}))),q.createElement(w,null,es("Will_Appear_In_From"))),q.createElement(c,null,q.createElement(g,null,es("Department")),q.createElement(h,null,q.createElement(M,{control:eb,name:"department",render:function(e){var n=e.field,r=n.onChange,t=n.value;return q.createElement(T,{value:t,onChange:r})}})),q.createElement(w,null,es("Only_Members_Selected_Department_Can_View_Channel"))))),q.createElement(i.Item,{defaultExpanded:!(null!=em&&em._id),title:es("Configure_Outgoing_Mail_SMTP")},q.createElement(p,null,q.createElement(c,null,q.createElement(g,null,es("Server"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("smtpServer",{required:es("error-the-field-is-required",{field:es("Server")})}),{error:null===(H=ex.smtpServer)||void 0===H?void 0:H.message}))),ex.smtpServer&&q.createElement(b,null,null===(Y=ex.smtpServer)||void 0===Y?void 0:Y.message)),q.createElement(c,null,q.createElement(g,null,es("Port"),"*"),q.createElement(h,null,q.createElement(E,t({},eh("smtpPort",{required:es("error-the-field-is-required",{field:es("Port")})}),{error:null===(z=ex.smtpPort)||void 0===z?void 0:z.message}))),ex.smtpPort&&q.createElement(b,null,null===(J=ex.smtpPort)||void 0===J?void 0:J.message)),q.createElement(c,null,q.createElement(g,null,es("Username"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("smtpUsername",{required:es("error-the-field-is-required",{field:es("Username")})}),{error:null===(K=ex.smtpUsername)||void 0===K?void 0:K.message}))),ex.smtpUsername&&q.createElement(b,null,null===(Q=ex.smtpUsername)||void 0===Q?void 0:Q.message)),q.createElement(c,null,q.createElement(g,null,es("Password"),"*"),q.createElement(h,null,q.createElement(_,t({},eh("smtpPassword",{required:es("error-the-field-is-required",{field:es("Password")})}),{error:null===(X=ex.smtpPassword)||void 0===X?void 0:X.message}))),ex.smtpPassword&&q.createElement(b,null,null===(Z=ex.smtpPassword)||void 0===Z?void 0:Z.message)),q.createElement(c,null,q.createElement(g,{display:"flex",justifyContent:"space-between",w:"full"},es("Connect_SSL_TLS"),q.createElement(M,{control:eb,name:"smtpSecure",render:function(e){var n=e.field,r=n.onChange,t=n.value,l=n.ref;return q.createElement(d,{ref:l,checked:t,onChange:r})}}))))),q.createElement(i.Item,{defaultExpanded:!(null!=em&&em._id),title:es("Configure_Incoming_Mail_IMAP")},q.createElement(p,null,q.createElement(c,null,q.createElement(g,null,es("Server"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("imapServer",{required:es("error-the-field-is-required",{field:es("Server")})}),{error:null===($=ex.imapServer)||void 0===$?void 0:$.message}))),ex.imapServer&&q.createElement(b,null,null===(ee=ex.imapServer)||void 0===ee?void 0:ee.message)),q.createElement(c,null,q.createElement(g,null,es("Port"),"*"),q.createElement(h,null,q.createElement(E,t({},eh("imapPort",{required:es("error-the-field-is-required",{field:es("Port")})}),{error:null===(en=ex.imapPort)||void 0===en?void 0:en.message}))),ex.imapPort&&q.createElement(b,null,null===(er=ex.imapPort)||void 0===er?void 0:er.message)),q.createElement(c,null,q.createElement(g,null,es("Username"),"*"),q.createElement(h,null,q.createElement(m,t({},eh("imapUsername",{required:es("error-the-field-is-required",{field:es("Username")})}),{error:null===(et=ex.imapUsername)||void 0===et?void 0:et.message}))),ex.imapUsername&&q.createElement(b,null,null===(el=ex.imapUsername)||void 0===el?void 0:el.message)),q.createElement(c,null,q.createElement(g,null,es("Password"),"*"),q.createElement(h,null,q.createElement(_,t({},eh("imapPassword",{required:es("error-the-field-is-required",{field:es("Password")})}),{error:null===(ea=ex.imapPassword)||void 0===ea?void 0:ea.message}))),ex.imapPassword&&q.createElement(b,null,null===(ei=ex.imapPassword)||void 0===ei?void 0:ei.message)),q.createElement(c,null,q.createElement(g,null,es("Max_Retry"),"*"),q.createElement(h,null,q.createElement(E,t({},eh("imapRetries",{required:es("error-the-field-is-required",{field:es("Max_Retry")})}),{error:null===(eo=ex.imapRetries)||void 0===eo?void 0:eo.message}))),ex.imapRetries&&q.createElement(b,null,null===(eu=ex.imapRetries)||void 0===eu?void 0:eu.message)),q.createElement(c,null,q.createElement(g,{display:"flex",justifyContent:"space-between",w:"full"},es("Connect_SSL_TLS"),q.createElement(M,{control:eb,name:"imapSecure",render:function(e){var n=e.field,r=n.onChange,t=n.value,l=n.ref;return q.createElement(d,{ref:l,checked:t,onChange:r})}}))))),q.createElement(c,null,q.createElement(h,null,q.createElement(u,{stretch:!0,w:"full"},q.createElement(o,{onClick:ev},es("Cancel")),q.createElement(o,{disabled:!eP,primary:!0,onClick:ew(eC)},es("Save")))),q.createElement(h,null,q.createElement(f,{blockStart:16},q.createElement(u,{stretch:!0,w:"full"},(null==em?void 0:em._id)&&q.createElement(o,{danger:!0,onClick:ek},es("Delete")))))))))})}
//# sourceMappingURL=/dynamic/client/views/admin/emailInbox/5b13c94f91137410a209212e6091fcae090c0978.map
