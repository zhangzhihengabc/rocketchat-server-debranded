)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/CustomUserStatusTable/CustomUserStatusTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject } from 'react';\nimport React, { useState, useMemo, useEffect } from 'react';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResult from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableBody,\n\tGenericTableLoadingTable,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport CustomUserStatusRow from './CustomUserStatusRow';\n\ntype CustomUserStatusProps = {\n\treload: MutableRefObject<() => void>;\n\tonClick: (id: string) => void;\n};\n\n// TODO: Missing error state\nconst CustomUserStatus = ({ reload, onClick }: CustomUserStatusProps): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst [text, setText] = useState('');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'statusType'>('name');\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tquery: JSON.stringify({ name: { $regex: escapeRegExp(text), $options: 'i' } }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[text, itemsPerPage, current, sortBy, sortDirection],\n\t\t),\n\t\t500,\n\t);\n\n\tconst getCustomUserStatus = useEndpoint('GET', '/v1/custom-user-status.list');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { data, isLoading, refetch, isFetched } = useQuery(\n\t\t['custom-user-statuses', query],\n\t\tasync () => {\n\t\t\tconst { statuses } = await getCustomUserStatus(query);\n\t\t\treturn statuses;\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tuseEffect(() => {\n\t\treload.current = refetch;\n\t}, [reload, refetch]);\n\n\tif (!data) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<FilterByText onChange={({ text }): void => setText(text)} />\n\t\t\t{data.length === 0 && <GenericNoResult />}\n\t\t\t{data && data.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t\t\t</GenericTableHeaderCell>\n\t\t\t\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\t\t\t\tkey='presence'\n\t\t\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\t\t\tactive={sortBy === 'statusType'}\n\t\t\t\t\t\t\t\tonClick={setSort}\n\t\t\t\t\t\t\t\tsort='statusType'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('Presence')}\n\t\t\t\t\t\t\t</GenericTableHeaderCell>\n\t\t\t\t\t\t</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{isLoading && <GenericTableLoadingTable headerCells={2} />}\n\t\t\t\t\t\t\t{data?.map((status) => (\n\t\t\t\t\t\t\t\t<CustomUserStatusRow key={status._id} status={status} onClick={onClick} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t{isFetched && (\n\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\t\tcount={data.length}\n\t\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CustomUserStatus;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","_slicedToArray","Pagination","useDebouncedValue","escapeRegExp","useEndpoint","useToastMessageDispatch","useTranslation","useQuery","React","useState","useMemo","useEffect","FilterByText","GenericNoResult","GenericTable","GenericTableHeader","GenericTableHeaderCell","GenericTableBody","GenericTableLoadingTable","usePagination","useSort","CustomUserStatusRow","module","link","default","v","exportDefault","_ref","reload","onClick","t","_useState2","text","setText","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","_useSort","sortBy","sortDirection","setSort","query","JSON","stringify","name","$regex","$options","sort","count","offset","getCustomUserStatus","dispatchToastMessage","_useQuery","statuses","async","_context","prev","next","awrap","_await$getCustomUserS","sent","abrupt","stop","Promise","onError","error","type","message","data","isLoading","refetch","isFetched","createElement","Fragment","onChange","_ref2","length","key","direction","active","headerCells","map","status","_id"],"mappings":"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"}