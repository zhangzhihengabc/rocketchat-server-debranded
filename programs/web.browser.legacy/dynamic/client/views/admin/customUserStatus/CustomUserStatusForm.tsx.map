)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/CustomUserStatusForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUserStatus } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { FieldGroup, Button, ButtonGroup, TextInput, Field, FieldLabel, FieldRow, FieldError, Select } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useRoute, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../components/Contextualbar';\nimport GenericModal from '../../../components/GenericModal';\n\ntype CustomUserStatusFormProps = {\n\tonClose: () => void;\n\tonReload: () => void;\n\tstatus?: IUserStatus;\n};\n\nconst CustomUserStatusForm = ({ onClose, onReload, status }: CustomUserStatusFormProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { _id, name, statusType } = status || {};\n\tconst setModal = useSetModal();\n\tconst route = useRoute('user-status');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst formId = useUniqueId();\n\n\tconst {\n\t\tregister,\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { isDirty, errors },\n\t} = useForm({\n\t\tdefaultValues: { name: status?.name ?? '', statusType: status?.statusType ?? '' },\n\t});\n\n\tconst saveStatus = useEndpoint('POST', _id ? '/v1/custom-user-status.update' : '/v1/custom-user-status.create');\n\tconst deleteStatus = useEndpoint('POST', '/v1/custom-user-status.delete');\n\n\tconst handleSave = useCallback(\n\t\tasync (data) => {\n\t\t\ttry {\n\t\t\t\tawait saveStatus({ _id, name, statusType, ...data });\n\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: t('Custom_User_Status_Updated_Successfully'),\n\t\t\t\t});\n\n\t\t\t\tonReload();\n\t\t\t\troute.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[saveStatus, _id, name, statusType, route, dispatchToastMessage, t, onReload],\n\t);\n\n\tconst handleDeleteStatus = useCallback(() => {\n\t\tconst handleCancel = (): void => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tconst handleDelete = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait deleteStatus({ customUserStatusId: _id || '' });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_User_Status_Has_Been_Deleted') });\n\t\t\t\tonReload();\n\t\t\t\troute.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(() => (\n\t\t\t<GenericModal variant='danger' onConfirm={handleDelete} onCancel={handleCancel} onClose={handleCancel} confirmText={t('Delete')}>\n\t\t\t\t{t('Custom_User_Status_Delete_Warning')}\n\t\t\t</GenericModal>\n\t\t));\n\t}, [_id, route, deleteStatus, dispatchToastMessage, onReload, setModal, t]);\n\n\tconst presenceOptions: SelectOption[] = [\n\t\t['online', t('Online')],\n\t\t['busy', t('Busy')],\n\t\t['away', t('Away')],\n\t\t['offline', t('Offline')],\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FieldGroup id={formId} is='form' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Name')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput {...register('name', { required: true })} placeholder={t('Name')} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{errors?.name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Presence')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='statusType'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\t\t\t\trender={({ field }): ReactElement => <Select {...field} placeholder={t('Presence')} options={presenceOptions} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{errors?.statusType && <FieldError>{t('error-the-field-is-required', { field: t('Presence') })}</FieldError>}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit' disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{_id && (\n\t\t\t\t\t<ButtonGroup mbs={8} stretch>\n\t\t\t\t\t\t<Button icon='trash' danger onClick={handleDeleteStatus}>\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default CustomUserStatusForm;\n",null],"names":["_regeneratorRuntime","_extends","_objectSpread","FieldGroup","Button","ButtonGroup","TextInput","Field","FieldLabel","FieldRow","FieldError","Select","useUniqueId","useSetModal","useRoute","useToastMessageDispatch","useTranslation","useEndpoint","React","useCallback","useForm","Controller","ContextualbarScrollableContent","ContextualbarFooter","GenericModal","module","link","default","v","exportDefault","_ref","_status$name","_status$statusType","onClose","onReload","status","t","_ref2","_id","name","statusType","setModal","route","dispatchToastMessage","formId","_useForm","defaultValues","register","control","handleSubmit","_useForm$formState","formState","isDirty","errors","saveStatus","deleteStatus","handleSave","data","async","_context","prev","next","awrap","type","message","push","t0","stop","Promise","handleDeleteStatus","handleCancel","handleDelete","_context2","customUserStatusId","finish","createElement","variant","onConfirm","onCancel","confirmText","presenceOptions","Fragment","id","is","onSubmit","required","placeholder","field","rules","render","_ref3","options","stretch","onClick","form","primary","disabled","mbs","icon","danger"],"mappings":"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"}