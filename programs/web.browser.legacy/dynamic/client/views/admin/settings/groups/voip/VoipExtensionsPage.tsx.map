)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/groups/voip/VoipExtensionsPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Chip, Button, Pagination } from '@rocket.chat/fuselage';\nimport { useSetModal, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport GenericNoResults from '../../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeaderCell,\n\tGenericTableRow,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableBody,\n\tGenericTableLoadingRow,\n} from '../../../../../components/GenericTable';\nimport { usePagination } from '../../../../../components/GenericTable/hooks/usePagination';\nimport Page from '../../../../../components/Page';\nimport UserAvatar from '../../../../../components/avatar/UserAvatar';\nimport AssignAgentButton from './AssignAgentButton';\nimport AssignAgentModal from './AssignAgentModal';\nimport RemoveAgentButton from './RemoveAgentButton';\n\nconst VoipExtensionsPage = () => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t...(current && { offset: current }),\n\t\t}),\n\t\t[itemsPerPage, current],\n\t);\n\n\tconst getExtensions = useEndpoint('GET', '/v1/omnichannel/extensions');\n\tconst { data, isSuccess, isLoading, refetch } = useQuery(['omnichannel-extensions', query], async () => getExtensions(query));\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='extension-number' w='x156'>\n\t\t\t\t{t('Extension_Number')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='agent-name' w='x160'>\n\t\t\t\t{t('Agent_Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='extension-status' w='x120'>\n\t\t\t\t{t('Extension_Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='queues' w='x120'>\n\t\t\t\t{t('Queues')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='remove-add' w='x60' />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<Page.Content>\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center' justifyContent='space-between' mb={14}>\n\t\t\t\t<Box fontScale='p2' color='hint'>\n\t\t\t\t\t{data?.total} {t('Extensions')}\n\t\t\t\t</Box>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button primary onClick={(): void => setModal(<AssignAgentModal closeModal={(): void => setModal()} reload={refetch} />)}>\n\t\t\t\t\t\t{t('Associate_Agent')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.extensions.length === 0 && <GenericNoResults />}\n\t\t\t{isSuccess && data?.extensions.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.extensions.map(({ extension, username, name, state, queues }) => (\n\t\t\t\t\t\t\t\t<GenericTableRow key={extension} tabIndex={0}>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{extension}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t{username ? (\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={username} />\n\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' mi={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignSelf='center'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' color='default'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name || username}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\tt('Free')\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{state}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText maxHeight='x36'>\n\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' alignItems='center' title={queues?.join(', ')}>\n\t\t\t\t\t\t\t\t\t\t\t{queues?.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(queue: string, index: number) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex <= 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Chip mie={4} key={queue} value={queue}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{queue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Chip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{queues && queues?.length > 2 && `+${(queues.length - 2).toString()}`}\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t{username ? (\n\t\t\t\t\t\t\t\t\t\t<RemoveAgentButton username={username} reload={refetch} />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<AssignAgentButton extension={extension} reload={refetch} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Page.Content>\n\t);\n};\n\nexport default VoipExtensionsPage;\n",null],"names":["_regeneratorRuntime","_extends","_objectSpread","_objectWithoutProperties","Box","Chip","Button","Pagination","useSetModal","useTranslation","useEndpoint","useQuery","React","useMemo","GenericNoResults","GenericTable","GenericTableHeaderCell","GenericTableRow","GenericTableCell","GenericTableHeader","GenericTableBody","GenericTableLoadingRow","usePagination","Page","UserAvatar","AssignAgentButton","AssignAgentModal","RemoveAgentButton","module","link","default","v","exportDefault","t","setModal","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","query","count","offset","getExtensions","_useQuery","async","_context","prev","next","abrupt","stop","Promise","data","isSuccess","isLoading","refetch","headers","createElement","Fragment","key","w","Content","display","flexDirection","alignItems","justifyContent","mb","fontScale","color","total","primary","onClick","closeModal","reload","cols","extensions","length","map","_ref","extension","username","name","state","queues","tabIndex","withTruncatedText","size","mi","alignSelf","maxHeight","title","join","queue","index","mie","value","toString","divider"],"mappings":"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"}