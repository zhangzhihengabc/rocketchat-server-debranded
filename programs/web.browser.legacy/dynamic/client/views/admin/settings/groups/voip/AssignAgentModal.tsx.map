)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/groups/voip/AssignAgentModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, Modal, Select, Field, FieldGroup, FieldLabel, FieldRow, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useState, useMemo } from 'react';\n\nimport AutoCompleteAgentWithoutExtension from '../../../../../components/AutoCompleteAgentWithoutExtension';\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\n\ntype AssignAgentModalParams = {\n\tcloseModal: () => void;\n\treload: () => void;\n\texistingExtension?: string;\n};\n\nconst AssignAgentModal: FC<AssignAgentModalParams> = ({ existingExtension, closeModal, reload }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst [agent, setAgent] = useState('');\n\tconst [extension, setExtension] = useState(existingExtension || '');\n\tconst query = useMemo(() => ({ type: 'available' as const, userId: agent }), [agent]);\n\n\tconst assignAgent = useEndpoint('POST', '/v1/omnichannel/agent/extension');\n\n\tconst handleAssignment = useMutableCallback(async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tawait assignAgent({ username: agent, extension });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t\treload();\n\t\tcloseModal();\n\t});\n\tconst handleAgentChange = useMutableCallback((e) => setAgent(e));\n\n\tconst { value: availableExtensions, phase: state } = useEndpointData('/v1/omnichannel/extension', { params: query });\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleAssignment} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Associate_Agent_to_Extension')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={closeModal} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Agent_Without_Extensions')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<AutoCompleteAgentWithoutExtension value={agent} onChange={handleAgentChange} currentExtension={extension} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Free_Extension_Numbers')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tdisabled={state === AsyncStatePhase.LOADING || agent === ''}\n\t\t\t\t\t\t\t\toptions={availableExtensions?.extensions?.map((extension) => [extension, extension]) || []}\n\t\t\t\t\t\t\t\tvalue={extension}\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tonChange={(value) => setExtension(String(value))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={closeModal}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!agent || !extension} type='submit'>\n\t\t\t\t\t\t{t('Associate')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default AssignAgentModal;\n",null],"names":["_regeneratorRuntime","_extends","_slicedToArray","Button","Modal","Select","Field","FieldGroup","FieldLabel","FieldRow","Box","useMutableCallback","useToastMessageDispatch","useEndpoint","useTranslation","React","useState","useMemo","AutoCompleteAgentWithoutExtension","AsyncStatePhase","useEndpointData","module","link","default","v","exportDefault","_ref","_availableExtensions$","existingExtension","closeModal","reload","t","dispatchToastMessage","_useState2","agent","setAgent","_useState4","extension","setExtension","query","type","userId","assignAgent","handleAssignment","e","async","_context","prev","next","preventDefault","awrap","username","t0","message","stop","Promise","handleAgentChange","_useEndpointData","params","availableExtensions","value","state","phase","createElement","wrapperFunction","props","is","onSubmit","Header","Title","Close","onClick","Content","onChange","currentExtension","disabled","LOADING","options","extensions","map","placeholder","String","Footer","FooterControllers","primary"],"mappings":"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"}