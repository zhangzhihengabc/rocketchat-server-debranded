)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/Section.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isSetting, isSettingColor } from '@rocket.chat/core-typings';\nimport { Accordion, Box, Button, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useEditableSettings, useEditableSettingsDispatch } from '../EditableSettingsContext';\nimport SectionSkeleton from './SectionSkeleton';\nimport Setting from './Setting';\n\ntype SectionProps = {\n\tgroupId: string;\n\thasReset?: boolean;\n\tsectionName: string;\n\ttabName?: string;\n\tsolo: boolean;\n\thelp?: ReactNode;\n\tchildren?: ReactNode;\n};\n\nfunction Section({ groupId, hasReset = true, sectionName, tabName = '', solo, help, children }: SectionProps): ReactElement {\n\tconst editableSettings = useEditableSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgroup: groupId,\n\t\t\t\tsection: sectionName,\n\t\t\t\ttab: tabName,\n\t\t\t}),\n\t\t\t[groupId, sectionName, tabName],\n\t\t),\n\t);\n\n\tconst changed = useMemo(() => editableSettings.some(({ changed }) => changed), [editableSettings]);\n\n\tconst canReset = useMemo(\n\t\t() => editableSettings.some(({ value, packageValue }) => JSON.stringify(value) !== JSON.stringify(packageValue)),\n\t\t[editableSettings],\n\t);\n\n\tconst dispatch = useEditableSettingsDispatch();\n\n\tconst reset = useMutableCallback(() => {\n\t\tdispatch(\n\t\t\teditableSettings\n\t\t\t\t.filter(({ disabled }) => !disabled)\n\t\t\t\t.map((setting) => {\n\t\t\t\t\tif (isSettingColor(setting)) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\t\tvalue: setting.packageValue,\n\t\t\t\t\t\t\teditor: setting.packageEditor,\n\t\t\t\t\t\t\tchanged:\n\t\t\t\t\t\t\t\tJSON.stringify(setting.value) !== JSON.stringify(setting.packageValue) ||\n\t\t\t\t\t\t\t\tJSON.stringify(setting.editor) !== JSON.stringify(setting.packageEditor),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\tvalue: setting.packageValue,\n\t\t\t\t\t\tchanged: JSON.stringify(setting.value) !== JSON.stringify(setting.packageValue),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t);\n\t});\n\n\tconst t = useTranslation();\n\n\tconst handleResetSectionClick = (): void => {\n\t\treset();\n\t};\n\n\treturn (\n\t\t<Accordion.Item\n\t\t\tdata-qa-section={sectionName}\n\t\t\tnoncollapsible={solo || !sectionName}\n\t\t\ttitle={sectionName && t(sectionName as TranslationKey)}\n\t\t>\n\t\t\t{help && (\n\t\t\t\t<Box is='p' color='hint' fontScale='p2'>\n\t\t\t\t\t{help}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t<FieldGroup>\n\t\t\t\t{editableSettings.map(\n\t\t\t\t\t(setting) => isSetting(setting) && <Setting key={setting._id} settingId={setting._id} sectionChanged={changed} />,\n\t\t\t\t)}\n\n\t\t\t\t{children}\n\t\t\t</FieldGroup>\n\t\t\t{hasReset && canReset && (\n\t\t\t\t<Button\n\t\t\t\t\tchildren={t('Reset_section_settings')}\n\t\t\t\t\tsecondary\n\t\t\t\t\tdanger\n\t\t\t\t\tmarginBlockStart={16}\n\t\t\t\t\tdata-section={sectionName}\n\t\t\t\t\tonClick={handleResetSectionClick}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Accordion.Item>\n\t);\n}\n\nexport default Object.assign(Section, {\n\tSkeleton: SectionSkeleton,\n});\n",null],"names":["isSetting","isSettingColor","Accordion","Box","Button","FieldGroup","useMutableCallback","useTranslation","React","useMemo","useEditableSettings","useEditableSettingsDispatch","SectionSkeleton","Setting","module","link","v","exportDefault","Object","assign","_ref","groupId","_ref$hasReset","hasReset","sectionName","_ref$tabName","tabName","solo","help","children","editableSettings","group","section","tab","changed","some","_ref2","canReset","_ref3","value","packageValue","JSON","stringify","dispatch","reset","filter","_ref4","disabled","map","setting","_id","editor","packageEditor","t","createElement","Item","noncollapsible","title","is","color","fontScale","key","settingId","sectionChanged","secondary","danger","marginBlockStart","onClick","Skeleton"],"mappings":"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"}