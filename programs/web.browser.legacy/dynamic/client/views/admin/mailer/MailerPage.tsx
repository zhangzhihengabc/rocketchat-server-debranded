function module(e,r,t){t.link("@babel/runtime/helpers/extends",{default:function(e){n=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){i=e}},1),t.link("@rocket.chat/fuselage",{TextInput:function(e){l=e},TextAreaInput:function(e){a=e},Field:function(e){u=e},FieldGroup:function(e){o=e},FieldLabel:function(e){c=e},FieldRow:function(e){m=e},FieldError:function(e){s=e},FieldHint:function(e){d=e},CheckBox:function(e){f=e},Button:function(e){E=e},ButtonGroup:function(e){y=e},Box:function(e){b=e}},0),t.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){v=e}},1),t.link("@rocket.chat/ui-contexts",{useEndpoint:function(e){h=e},useToastMessageDispatch:function(e){g=e},useTranslation:function(e){_=e}},2),t.link("@tanstack/react-query",{useMutation:function(e){k=e}},3),t.link("react",{default:function(e){p=e}},4),t.link("react-hook-form",{Controller:function(e){q=e},useForm:function(e){F=e}},5),t.link("../../../../lib/emailValidator",{validateEmail:function(e){S=e}},6),t.link("../../../../lib/utils/isJSON",{isJSON:function(e){x=e}},7),t.link("../../../components/Page",{default:function(e){B=e}},8);var n,i,l,a,u,o,c,m,s,d,f,E,y,b,v,h,g,_,k,p,q,F,S,x,B,j={fromEmail:"",query:"",dryRun:!1,subject:"",emailBody:""};t.exportDefault(function(){var e,r,t,C,T=_(),D=g(),I=F({defaultValues:j,mode:"onBlur"}),w=I.register,M=I.formState,O=M.errors,R=M.isDirty,H=I.handleSubmit,J=I.reset,N=I.control,P=k({mutationFn:h("POST","/v1/mailer"),onSuccess:function(){D({type:"success",message:T("The_emails_are_being_sent")})},onError:function(e){D({type:"error",message:e})}}),Q=v(),A=v(),G=v(),L=v(),V=v(),W=v();return p.createElement(B,null,p.createElement(B.Header,{title:T("Mailer")}),p.createElement(B.ScrollableContentWithShadow,{alignSelf:"center",w:"100%",display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(b,{id:Q,is:"form",autoComplete:"off",maxWidth:"x600",onSubmit:H(function(e){var r,t,n,l,a;return i.async(function(i){for(;;)switch(i.prev=i.next){case 0:r=e.fromEmail,t=e.subject,n=e.emailBody,l=e.dryRun,a=e.query,P.mutateAsync({from:r,subject:t,body:n,dryrun:l,query:a});case 2:case"end":return i.stop()}},null,null,null,Promise)})},p.createElement(o,null,p.createElement(u,null,p.createElement(c,{required:!0,htmlFor:A},T("From")),p.createElement(m,null,p.createElement(l,n({id:A,placeholder:T("Type_your_email")},w("fromEmail",{validate:function(e){return!!S(e)||T("Invalid_email")}}),{error:null===(e=O.fromEmail)||void 0===e?void 0:e.message,"aria-required":"true","aria-invalid":O.fromEmail?"true":"false","aria-describedby":A+"-error"}))),O.fromEmail&&p.createElement(s,{"aria-live":"assertive",id:A+"-error"},O.fromEmail.message)),p.createElement(u,null,p.createElement(m,null,p.createElement(q,{control:N,name:"dryRun",render:function(e){var r=e.field,t=r.ref,n=r.value,i=r.onChange;return p.createElement(f,{"aria-describedby":L+"-hint",ref:t,id:L,checked:n,onChange:i})}}),p.createElement(c,{htmlFor:L},T("Dry_run"))),p.createElement(d,{id:L+"-hint"},T("Dry_run_description"))),p.createElement(u,null,p.createElement(c,{htmlFor:G},T("Query")),p.createElement(m,null,p.createElement(l,n({id:G},w("query",{validate:function(e){return!e||""===e||!!x(e)||T("Query_is_not_valid_JSON")}}),{error:null===(r=O.query)||void 0===r?void 0:r.message,"aria-describedby":G+"-error "+G+"-hint","aria-invalid":O.query?"true":"false"}))),O.query&&p.createElement(s,{id:G+"-error","aria-live":"assertive"},O.query.message),p.createElement(d,{id:G+"-hint"},T("Query_description"))),p.createElement(u,null,p.createElement(c,{required:!0,htmlFor:V},T("Subject")),p.createElement(m,null,p.createElement(l,n({id:V},w("subject",{required:T("error-the-field-is-required",{field:T("Subject")})}),{"aria-describedby":V+"-error",error:null===(t=O.subject)||void 0===t?void 0:t.message,"aria-required":"true","aria-invalid":O.subject?"true":"false"}))),O.subject&&p.createElement(s,{"aria-live":"assertive",id:V+"-error"},O.subject.message)),p.createElement(u,null,p.createElement(c,{required:!0,htmlFor:W},T("Email_body")),p.createElement(m,null,p.createElement(a,n({id:W},w("emailBody",{required:T("error-the-field-is-required",{field:T("Email_body")}),validate:function(e){return(null==e?void 0:e.indexOf("[unsubscribe]"))!==-1||T("error-missing-unsubscribe-link")}}),{rows:10,"aria-describedby":W+"-error "+W+"-hint",error:null===(C=O.emailBody)||void 0===C?void 0:C.message,"aria-required":"true","aria-invalid":O.emailBody?"true":"false"}))),O.emailBody&&p.createElement(s,{"aria-live":"assertive",id:W+"-error"},O.emailBody.message),p.createElement(d,{id:W+"-hint",dangerouslySetInnerHTML:{__html:T("Mailer_body_tags")}}))))),p.createElement(B.Footer,{isDirty:R},p.createElement(y,null,p.createElement(E,{onClick:function(){return J(j)}},T("Cancel")),p.createElement(E,{form:Q,primary:!0,type:"submit"},T("Send_email")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/mailer/8292a9e2a0100cc4e70fc6c6b995d2c2e32fc8ae.map
