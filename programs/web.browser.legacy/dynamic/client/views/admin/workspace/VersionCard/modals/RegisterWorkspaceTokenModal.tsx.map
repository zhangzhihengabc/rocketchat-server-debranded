)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/VersionCard/modals/RegisterWorkspaceTokenModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button, ButtonGroup, Field, FieldLabel, FieldRow, FieldError, Modal, TextInput } from '@rocket.chat/fuselage';\nimport { useMethod, useSetModal, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent } from 'react';\nimport React, { useState } from 'react';\nimport { Trans } from 'react-i18next';\n\nimport WorkspaceRegistrationModal from './RegisterWorkspaceModal';\n\ntype RegisterWorkspaceTokenModalProps = {\n\tonClose: () => void;\n\tonStatusChange?: () => void;\n};\n\nconst RegisterWorkspaceTokenModal = ({ onClose, onStatusChange, ...props }: RegisterWorkspaceTokenModalProps) => {\n\tconst setModal = useSetModal();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst connectWorkspace = useMethod('cloud:connectWorkspace');\n\n\tconst [token, setToken] = useState('');\n\tconst [processing, setProcessing] = useState(false);\n\tconst [error, setError] = useState(false);\n\n\tconst handleBackAction = (): void => {\n\t\tconst handleModalClose = (): void => setModal(null);\n\t\tsetModal(<WorkspaceRegistrationModal onClose={handleModalClose} />);\n\t};\n\n\tconst handleTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\n\t\tsetToken(event.target.value);\n\t};\n\n\tconst isToken = token.length > 0;\n\n\tconst handleConnectButtonClick = async (): Promise<void> => {\n\t\tsetProcessing(true);\n\t\tsetError(false);\n\n\t\ttry {\n\t\t\tconst isConnected = await connectWorkspace(token);\n\n\t\t\tif (!isConnected) {\n\t\t\t\tthrow Error(t('RegisterWorkspace_Connection_Error'));\n\t\t\t}\n\n\t\t\tsetModal(null);\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Connected') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\tsetError(true);\n\t\t} finally {\n\t\t\tawait (onStatusChange && onStatusChange());\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.HeaderText>\n\t\t\t\t\t<Modal.Title>{t('RegisterWorkspace_Token_Title')}</Modal.Title>\n\t\t\t\t</Modal.HeaderText>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<Box is='p'>\n\t\t\t\t\t<Trans i18nKey='RegisterWorkspace_Token_Step_One'>\n\t\t\t\t\t\t1. Go to:{' '}\n\t\t\t\t\t\t<Box is='span' fontWeight={600}>\n\t\t\t\t\t\t\tcloud.rocket.chat {'>'} Workspaces\n\t\t\t\t\t\t</Box>{' '}\n\t\t\t\t\t\tand click{' '}\n\t\t\t\t\t\t<Box is='span' fontWeight={600}>\n\t\t\t\t\t\t\t\"Register self-managed\"\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Box>\n\t\t\t\t<Box is='p' fontSize='p2'>{`2. ${t('RegisterWorkspace_Token_Step_Two')}`}</Box>\n\t\t\t\t<Field pbs={10}>\n\t\t\t\t\t<FieldLabel>{t('Registration_Token')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput onChange={handleTokenChange} value={token} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{error && <FieldError>{t('Token_Not_Recognized')}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={handleBackAction}>{t('Back')}</Button>\n\t\t\t\t\t<Button primary disabled={!isToken} loading={processing} onClick={handleConnectButtonClick}>\n\t\t\t\t\t\t{t('Next')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default RegisterWorkspaceTokenModal;\n",null],"names":["_regeneratorRuntime","_slicedToArray","_objectWithoutProperties","Box","Button","ButtonGroup","Field","FieldLabel","FieldRow","FieldError","Modal","useMethod","useSetModal","useToastMessageDispatch","useTranslation","React","useState","Trans","WorkspaceRegistrationModal","module","default","v","link","TextInput","exportDefault","_ref","onClose","onStatusChange","props","_excluded","setModal","t","dispatchToastMessage","connectWorkspace","_useState2","token","setToken","_useState4","processing","setProcessing","_useState6","error","setError","isToken","length","createElement","Header","HeaderText","Title","Close","onClick","Content","is","i18nKey","fontWeight","fontSize","pbs","onChange","event","target","value","Footer","align","primary","disabled","loading","async","_context","prev","next","awrap","sent","Error","type","message","t0","finish","stop","Promise"],"mappings":"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"}