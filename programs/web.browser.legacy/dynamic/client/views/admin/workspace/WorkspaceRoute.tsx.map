)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/WorkspaceRoute.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Callout, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo, useState } from 'react';\n\nimport Page from '../../../components/Page';\nimport PageSkeleton from '../../../components/PageSkeleton';\nimport { useWorkspaceInfo } from '../../../hooks/useWorkspaceInfo';\nimport { downloadJsonAs } from '../../../lib/download';\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\nimport WorkspacePage from './WorkspacePage';\n\nconst WorkspaceRoute = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst canViewStatistics = usePermission('view-statistics');\n\n\tconst [refreshStatistics, setRefreshStatistics] = useState(false);\n\tconst [serverInfoQuery, instancesQuery, statisticsQuery] = useWorkspaceInfo({ refreshStatistics });\n\n\tif (!canViewStatistics) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\tif (serverInfoQuery.isLoading || instancesQuery.isLoading || statisticsQuery.isLoading) {\n\t\treturn <PageSkeleton />;\n\t}\n\n\tconst handleClickRefreshButton = async () => {\n\t\tsetRefreshStatistics(true);\n\t\tstatisticsQuery.refetch();\n\t};\n\n\tif (serverInfoQuery.isError || instancesQuery.isError || statisticsQuery.isError) {\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Page.Header title={t('Workspace')}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button icon='reload' primary type='button' onClick={handleClickRefreshButton} loading={statisticsQuery.isLoading}>\n\t\t\t\t\t\t\t{t('Refresh')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Page.Header>\n\t\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t\t<Callout type='danger'>{t('Error_loading_pages')}</Callout>\n\t\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t</Page>\n\t\t);\n\t}\n\n\tconst handleClickDownloadInfo = (): void => {\n\t\tdownloadJsonAs(statisticsQuery.data, 'statistics');\n\t};\n\n\treturn (\n\t\t<WorkspacePage\n\t\t\tcanViewStatistics={canViewStatistics}\n\t\t\tserverInfo={serverInfoQuery.data}\n\t\t\tstatistics={statisticsQuery.data}\n\t\t\tstatisticsIsLoading={statisticsQuery.isLoading}\n\t\t\tinstances={instancesQuery.data}\n\t\t\tonClickRefreshButton={handleClickRefreshButton}\n\t\t\tonClickDownloadInfo={handleClickDownloadInfo}\n\t\t/>\n\t);\n};\n\nexport default memo(WorkspaceRoute);\n",null],"names":["_regeneratorRuntime","_slicedToArray","Callout","ButtonGroup","Button","usePermission","useTranslation","React","memo","useState","Page","PageSkeleton","useWorkspaceInfo","downloadJsonAs","NotAuthorizedPage","WorkspacePage","module","link","default","v","exportDefault","t","canViewStatistics","_useState2","refreshStatistics","setRefreshStatistics","_useWorkspaceInfo2","serverInfoQuery","instancesQuery","statisticsQuery","createElement","isLoading","handleClickRefreshButton","async","_context","prev","next","refetch","stop","Promise","isError","Header","title","icon","primary","type","onClick","loading","ScrollableContentWithShadow","serverInfo","data","statistics","statisticsIsLoading","instances","onClickRefreshButton","onClickDownloadInfo"],"mappings":"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"}