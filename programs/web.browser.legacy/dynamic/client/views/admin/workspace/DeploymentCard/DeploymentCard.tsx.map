)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/DeploymentCard/DeploymentCard.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWorkspaceInfo, IStats } from '@rocket.chat/core-typings';\nimport { ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { IInstance } from '@rocket.chat/rest-typings';\nimport { Card, CardBody, CardCol, CardColSection, CardColTitle, CardFooter } from '@rocket.chat/ui-client';\nimport { useSetModal, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\n\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport InstancesModal from './components/InstancesModal';\n\ntype DeploymentCardProps = {\n\tserverInfo: IWorkspaceInfo;\n\tinstances: IInstance[];\n\tstatistics: IStats;\n};\n\nconst DeploymentCard = ({ serverInfo: { info }, statistics, instances }: DeploymentCardProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst setModal = useSetModal();\n\n\tconst { commit = {}, marketplaceApiVersion: appsEngineVersion } = info || {};\n\n\tconst handleInstancesModal = useMutableCallback(() => {\n\t\tsetModal(<InstancesModal instances={instances} onClose={(): void => setModal()} />);\n\t});\n\n\treturn (\n\t\t<Card data-qa-id='deployment-card'>\n\t\t\t<CardBody>\n\t\t\t\t<CardCol>\n\t\t\t\t\t<CardColTitle>{t('Deployment')}</CardColTitle>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Version')}</CardColTitle>\n\t\t\t\t\t\t{statistics.version}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Deployment_ID')}</CardColTitle>\n\t\t\t\t\t\t{statistics.uniqueId}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t{appsEngineVersion && (\n\t\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t\t<CardColTitle>{t('Apps_Engine_Version')}</CardColTitle>\n\t\t\t\t\t\t\t{appsEngineVersion}\n\t\t\t\t\t\t</CardColSection>\n\t\t\t\t\t)}\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Node_version')}</CardColTitle>\n\t\t\t\t\t\t{statistics.process.nodeVersion}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('DB_Migration')}</CardColTitle>\n\t\t\t\t\t\t{`${statistics.migration.version} (${formatDateAndTime(statistics.migration.lockedAt)})`}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('MongoDB')}</CardColTitle>\n\t\t\t\t\t\t{`${statistics.mongoVersion} / ${statistics.mongoStorageEngine} ${\n\t\t\t\t\t\t\t!statistics.msEnabled ? `(oplog ${statistics.oplogEnabled ? t('Enabled') : t('Disabled')})` : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Commit_details')}</CardColTitle>\n\t\t\t\t\t\t{t('github_HEAD')}: ({commit.hash ? commit.hash.slice(0, 9) : ''}) <br />\n\t\t\t\t\t\t{t('Branch')}: {commit.branch} <br />\n\t\t\t\t\t\t{commit.subject}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('PID')}</CardColTitle>\n\t\t\t\t\t\t{statistics.process.pid}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t</CardCol>\n\t\t\t</CardBody>\n\n\t\t\t{!!instances.length && (\n\t\t\t\t<CardFooter>\n\t\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t\t<Button small onClick={handleInstancesModal}>\n\t\t\t\t\t\t\t{t('Instances')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</CardFooter>\n\t\t\t)}\n\t\t</Card>\n\t);\n};\n\nexport default memo(DeploymentCard);\n",null],"names":["ButtonGroup","Button","useMutableCallback","Card","CardBody","CardCol","CardColSection","CardColTitle","CardFooter","useSetModal","useTranslation","React","memo","useFormatDateAndTime","InstancesModal","module","link","v","exportDefault","_ref","info","serverInfo","statistics","instances","t","formatDateAndTime","setModal","_ref2","_ref2$commit","commit","appsEngineVersion","marketplaceApiVersion","handleInstancesModal","createElement","onClose","version","uniqueId","process","nodeVersion","migration","lockedAt","mongoVersion","mongoStorageEngine","msEnabled","oplogEnabled","hash","slice","branch","subject","pid","length","align","small","onClick"],"mappings":"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"}