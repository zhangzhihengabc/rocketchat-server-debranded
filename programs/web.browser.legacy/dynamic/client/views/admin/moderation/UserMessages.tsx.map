)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/UserMessages.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Callout, Message, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useRouter, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React from 'react';\n\nimport { ContextualbarHeader, ContextualbarTitle, ContextualbarClose, ContextualbarFooter } from '../../../components/Contextualbar';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport MessageContextFooter from './MessageContextFooter';\nimport ContextMessage from './helpers/ContextMessage';\n\n// TODO: Missing Error State\nconst UserMessages = ({ userId, onRedirect }: { userId: string; onRedirect: (mid: string) => void }): JSX.Element => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst moderationRoute = useRouter();\n\tconst getUserMessages = useEndpoint('GET', '/v1/moderation.user.reportedMessages');\n\n\tconst {\n\t\tdata: report,\n\t\trefetch: reloadUserMessages,\n\t\tisLoading: isLoadingUserMessages,\n\t\tisSuccess: isSuccessUserMessages,\n\t\tisError,\n\t} = useQuery(\n\t\t['moderation.userMessages', { userId }],\n\t\tasync () => {\n\t\t\tconst messages = await getUserMessages({ userId });\n\t\t\treturn messages;\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tconst handleChange = useMutableCallback(() => {\n\t\treloadUserMessages();\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Moderation_Message_context_header')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => moderationRoute.navigate('/admin/moderation', { replace: true })} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<Box display='flex' flexDirection='column' width='full' height='full' overflowY='auto' overflowX='hidden'>\n\t\t\t\t{isLoadingUserMessages && <Message>{t('Loading')}</Message>}\n\n\t\t\t\t{isSuccessUserMessages && (\n\t\t\t\t\t<Box padding={16}>\n\t\t\t\t\t\t{report.messages.length > 0 && (\n\t\t\t\t\t\t\t<Callout title={t('Moderation_Duplicate_messages')} type='warning' icon='warning'>\n\t\t\t\t\t\t\t\t{t('Moderation_Duplicate_messages_warning')}\n\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!report.user && (\n\t\t\t\t\t\t\t<Callout mbs={8} type='warning' icon='warning'>\n\t\t\t\t\t\t\t\t{t('Moderation_User_deleted_warning')}\n\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{isSuccessUserMessages &&\n\t\t\t\t\treport.messages.length > 0 &&\n\t\t\t\t\treport.messages.map((message) => (\n\t\t\t\t\t\t<Box key={message._id}>\n\t\t\t\t\t\t\t<ContextMessage\n\t\t\t\t\t\t\t\tmessage={message.message}\n\t\t\t\t\t\t\t\troom={message.room}\n\t\t\t\t\t\t\t\tonRedirect={onRedirect}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tdeleted={!report.user}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t))}\n\t\t\t\t{isSuccessUserMessages && report.messages.length === 0 && <GenericNoResults />}\n\t\t\t\t{isError && (\n\t\t\t\t\t<Box display='flex' flexDirection='column' alignItems='center' pb={20} color='default'>\n\t\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction onClick={handleChange}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t\t<ContextualbarFooter display='flex'>\n\t\t\t\t{isSuccessUserMessages && report.messages.length > 0 && <MessageContextFooter userId={userId} deleted={!report.user} />}\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default UserMessages;\n",null],"names":["_regeneratorRuntime","Box","Callout","Message","StatesAction","StatesActions","StatesIcon","StatesTitle","useMutableCallback","useEndpoint","useRouter","useToastMessageDispatch","useTranslation","useQuery","React","ContextualbarHeader","ContextualbarTitle","ContextualbarClose","ContextualbarFooter","GenericNoResults","MessageContextFooter","ContextMessage","module","link","default","v","exportDefault","_ref","userId","onRedirect","t","dispatchToastMessage","moderationRoute","getUserMessages","_useQuery","messages","async","_context","prev","next","awrap","sent","abrupt","stop","Promise","onError","error","type","message","report","data","reloadUserMessages","refetch","isLoadingUserMessages","isLoading","isSuccessUserMessages","isSuccess","isError","handleChange","createElement","Fragment","onClick","navigate","replace","display","flexDirection","width","height","overflowY","overflowX","padding","length","title","icon","user","mbs","map","key","_id","room","onChange","deleted","alignItems","pb","color","name","variation"],"mappings":"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"}