)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/helpers/DateRangePicker.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, InputBox, Menu, Margins, Option } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Moment } from 'moment';\nimport moment from 'moment';\nimport type { ComponentProps } from 'react';\nimport React, { useState, useMemo, useEffect } from 'react';\n\ntype DateRangePickerProps = Omit<ComponentProps<typeof Box>, 'onChange'> & {\n\tonChange(range: { start: string; end: string }): void;\n};\n\nconst formatToDateInput = (date: Moment) => date.locale('en').format('YYYY-MM-DD');\n\nconst todayDate = formatToDateInput(moment());\n\nconst getMonthRange = (monthsToSubtractFromToday: number) => ({\n\tstart: formatToDateInput(moment().subtract(monthsToSubtractFromToday, 'month').date(1)),\n\tend: formatToDateInput(monthsToSubtractFromToday === 0 ? moment() : moment().subtract(monthsToSubtractFromToday).date(0)),\n});\n\nconst getWeekRange = (daysToSubtractFromStart: number, daysToSubtractFromEnd: number) => ({\n\tstart: formatToDateInput(moment().subtract(daysToSubtractFromStart, 'day')),\n\tend: formatToDateInput(moment().subtract(daysToSubtractFromEnd, 'day')),\n});\n\nconst DateRangePicker = ({ onChange = () => undefined, ...props }: DateRangePickerProps) => {\n\tconst t = useTranslation();\n\tconst [range, setRange] = useState({ start: '', end: '' });\n\n\tconst { start, end } = range;\n\n\tconst handleStart = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tstart: currentTarget.value,\n\t\t\tend: range.end,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleEnd = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tend: currentTarget.value,\n\t\t\tstart: range.start,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleRange = useMutableCallback((range) => {\n\t\tsetRange(range);\n\t\tonChange(range);\n\t});\n\n\tuseEffect(() => {\n\t\thandleRange({\n\t\t\tstart: formatToDateInput(moment().subtract(1, 'month')),\n\t\t\tend: todayDate,\n\t\t});\n\t}, [handleRange]);\n\n\tconst options = useMemo(\n\t\t() => ({\n\t\t\ttoday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Today'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(0, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tyesterday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Yesterday'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(1, 1));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(7, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tpreviousWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(14, 7));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tlastMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(1));\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t\t[handleRange, t],\n\t);\n\n\treturn (\n\t\t<Box marginInline={-4} {...props}>\n\t\t\t<Margins inline={4}>\n\t\t\t\t<InputBox type='date' value={start} max={todayDate} flexGrow={1} height={20} onChange={handleStart} />\n\t\t\t\t<InputBox type='date' min={start} value={end} max={todayDate} flexGrow={1} height={20} onChange={handleEnd} />\n\t\t\t\t<Menu\n\t\t\t\t\toptions={options}\n\t\t\t\t\trenderItem={(props: ComponentProps<typeof Option>) => <Option icon='history' {...props} />}\n\t\t\t\t\talignSelf='center'\n\t\t\t\t/>\n\t\t\t</Margins>\n\t\t</Box>\n\t);\n};\n\nexport default DateRangePicker;\n",null],"names":["_extends","_slicedToArray","_objectWithoutProperties","Box","InputBox","Menu","Margins","Option","useMutableCallback","useTranslation","moment","React","useState","useMemo","useEffect","module","link","default","v","formatToDateInput","date","locale","format","todayDate","getMonthRange","monthsToSubtractFromToday","start","subtract","end","getWeekRange","daysToSubtractFromStart","daysToSubtractFromEnd","exportDefault","_ref","_ref$onChange","onChange","props","_excluded","t","_useState2","range","setRange","handleStart","_ref2","rangeObj","currentTarget","value","handleEnd","_ref3","handleRange","options","today","icon","label","action","yesterday","thisWeek","previousWeek","thisMonth","lastMonth","createElement","marginInline","inline","type","max","flexGrow","height","min","renderItem","alignSelf"],"mappings":"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"}