)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/helpers/ContextMessage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage, MessageReport } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport { Message, MessageName, MessageToolboxItem, MessageToolboxWrapper, MessageUsername } from '@rocket.chat/fuselage';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport MessageReportInfo from '../MessageReportInfo';\nimport useDeleteMessage from '../hooks/useDeleteMessage';\nimport { useDismissMessageAction } from '../hooks/useDismissMessageAction';\nimport ReportReasonCollapsible from './ReportReasonCollapsible';\n\nconst ContextMessage = ({\n\tmessage,\n\troom,\n\tdeleted,\n\tonRedirect,\n\tonChange,\n}: {\n\tmessage: any;\n\troom: MessageReport['room'];\n\tdeleted: boolean;\n\tonRedirect: (id: IMessage['_id']) => void;\n\tonChange: () => void;\n}): JSX.Element => {\n\tconst t = useTranslation();\n\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n\tconst dismissMsgReport = useDismissMessageAction(message._id);\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst formatTime = useFormatTime();\n\tconst formatDate = useFormatDate();\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst name = message.u.name || '';\n\tconst username = message.u.username || '';\n\n\tconst displayName = useUserDisplayName({ name, username });\n\n\treturn (\n\t\t<>\n\t\t\t<Message.Divider>{formatDate(message._updatedAt)}</Message.Divider>\n\t\t\t<Message>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t<UserAvatar username={message.u.username} />\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<MessageName>{displayName}</MessageName>\n\t\t\t\t\t\t<>{useRealName && <MessageUsername>&nbsp;{`@${message.u.username}`}</MessageUsername>}</>\n\t\t\t\t\t\t<Message.Timestamp title={formatDateAndTime(message._updatedAt)}>\n\t\t\t\t\t\t\t{formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts)}\n\t\t\t\t\t\t\t{message._updatedAt !== message.ts && ` (${t('edited')})`}\n\t\t\t\t\t\t</Message.Timestamp>\n\t\t\t\t\t\t<Message.Role>{room.name || room.fname || 'DM'}</Message.Role>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body>\n\t\t\t\t\t\t{!message.blocks?.length && !!message.md?.length ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{(!isEncryptedMessage || message.e2e === 'done') && (\n\t\t\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tmessage.msg\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t\t{message.attachments && <Attachments attachments={message.attachments} />}\n\t\t\t\t\t</Message.Body>\n\t\t\t\t\t<ReportReasonCollapsible>\n\t\t\t\t\t\t<MessageReportInfo msgId={message._id} />\n\t\t\t\t\t</ReportReasonCollapsible>\n\t\t\t\t</Message.Container>\n\t\t\t\t<MessageToolboxWrapper>\n\t\t\t\t\t<Message.Toolbox>\n\t\t\t\t\t\t<MessageToolboxItem\n\t\t\t\t\t\t\ticon='checkmark-circled'\n\t\t\t\t\t\t\ttitle={t('Moderation_Dismiss_reports')}\n\t\t\t\t\t\t\tonClick={() => dismissMsgReport.action()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MessageToolboxItem icon='arrow-forward' title={t('Moderation_Go_to_message')} onClick={() => onRedirect(message._id)} />\n\t\t\t\t\t\t<MessageToolboxItem disabled={deleted} icon='trash' title={t('Moderation_Delete_message')} onClick={() => deleteMessage()} />\n\t\t\t\t\t</Message.Toolbox>\n\t\t\t\t</MessageToolboxWrapper>\n\t\t\t</Message>\n\t\t</>\n\t);\n};\n\nexport default ContextMessage;\n",null],"names":["isE2EEMessage","Message","MessageName","MessageToolboxItem","MessageToolboxWrapper","MessageUsername","useSetting","useTranslation","React","UserAvatar","MessageContentBody","Attachments","UiKitMessageBlock","useFormatDate","useFormatDateAndTime","useFormatTime","useUserDisplayName","MessageReportInfo","useDeleteMessage","useDismissMessageAction","ReportReasonCollapsible","module","link","v","exportDefault","_ref","_message$blocks","_message$md","message","room","deleted","onRedirect","onChange","t","isEncryptedMessage","deleteMessage","_id","rid","dismissMsgReport","formatDateAndTime","formatTime","formatDate","useRealName","Boolean","displayName","name","u","username","createElement","Fragment","Divider","_updatedAt","LeftContainer","Container","Header","Timestamp","title","ts","Role","fname","Body","blocks","length","md","e2e","mentions","channels","msg","mid","attachments","msgId","Toolbox","icon","onClick","action","disabled"],"mappings":"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"}