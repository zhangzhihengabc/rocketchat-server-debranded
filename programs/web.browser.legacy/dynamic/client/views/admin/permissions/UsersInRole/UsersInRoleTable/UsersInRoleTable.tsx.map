)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/permissions/UsersInRole/UsersInRoleTable/UsersInRoleTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRole, IRoom, IUserInRole } from '@rocket.chat/core-typings';\nimport { Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport GenericModal from '../../../../../components/GenericModal';\nimport GenericNoResults from '../../../../../components/GenericNoResults';\nimport { GenericTable, GenericTableHeader, GenericTableHeaderCell, GenericTableBody } from '../../../../../components/GenericTable';\nimport type { usePagination } from '../../../../../components/GenericTable/hooks/usePagination';\nimport UsersInRoleTableRow from './UsersInRoleTableRow';\n\ntype UsersInRoleTableProps = {\n\tusers: IUserInRole[];\n\treload: () => void;\n\troleName: IRole['name'];\n\troleId: IRole['_id'];\n\tdescription: IRole['description'];\n\ttotal: number;\n\trid?: IRoom['_id'];\n\tpaginationData: ReturnType<typeof usePagination>;\n};\n\n// TODO: Missing error state\nconst UsersInRoleTable = ({\n\tusers,\n\treload,\n\troleName,\n\troleId,\n\tdescription,\n\ttotal,\n\trid,\n\tpaginationData,\n}: UsersInRoleTableProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst removeUser = useEndpoint('POST', '/v1/roles.removeUserFromRole');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = paginationData;\n\n\tconst closeModal = (): void => setModal();\n\n\tconst handleRemove = useMutableCallback((username) => {\n\t\tconst remove = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait removeUser({ roleId, username, scope: rid });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_removed') });\n\t\t\t} catch (error: unknown) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t\treload();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={remove} onClose={closeModal} onCancel={closeModal} confirmText={t('Delete')}>\n\t\t\t\t{t('The_user_s_will_be_removed_from_role_s', username, description || roleName)}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{users.length === 0 && <GenericNoResults />}\n\t\t\t{users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableHeaderCell>{t('Name')}</GenericTableHeaderCell>\n\t\t\t\t\t\t\t<GenericTableHeaderCell>{t('Email')}</GenericTableHeaderCell>\n\t\t\t\t\t\t\t<GenericTableHeaderCell w='x80'></GenericTableHeaderCell>\n\t\t\t\t\t\t</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t<UsersInRoleTableRow onRemove={handleRemove} key={user?._id} user={user} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={total}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default UsersInRoleTable;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","Pagination","useMutableCallback","useSetModal","useToastMessageDispatch","useEndpoint","useTranslation","React","GenericModal","GenericNoResults","GenericTable","GenericTableHeader","GenericTableHeaderCell","GenericTableBody","UsersInRoleTableRow","module","link","default","v","exportDefault","_ref","users","reload","roleName","roleId","description","total","rid","paginationData","t","setModal","dispatchToastMessage","removeUser","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","closeModal","handleRemove","username","createElement","variant","onConfirm","async","_context","prev","next","awrap","scope","type","message","t0","finish","stop","Promise","onClose","onCancel","confirmText","Fragment","length","w","map","user","onRemove","key","_id","divider","count"],"mappings":"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"}