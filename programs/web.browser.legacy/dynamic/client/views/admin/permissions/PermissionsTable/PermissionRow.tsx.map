)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/permissions/PermissionsTable/PermissionRow.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRole, IPermission } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, memo } from 'react';\n\nimport { CONSTANTS } from '../../../../../app/authorization/lib';\nimport { GenericTableRow, GenericTableCell } from '../../../../components/GenericTable';\nimport { useChangeRole } from '../hooks/useChangeRole';\nimport RoleCell from './RoleCell';\n\nconst getName = (t: ReturnType<typeof useTranslation>, permission: IPermission): string => {\n\tif (permission.level === CONSTANTS.SETTINGS_LEVEL) {\n\t\tlet path = '';\n\t\tif (permission.group) {\n\t\t\tpath = `${t(permission.group as TranslationKey)} > `;\n\t\t}\n\t\tif (permission.section) {\n\t\t\tpath = `${path}${t(permission.section as TranslationKey)} > `;\n\t\t}\n\t\treturn `${path}${t(permission.settingId as TranslationKey)}`;\n\t}\n\n\treturn t(permission._id as TranslationKey);\n};\n\ntype PermissionRowProps = {\n\tpermission: IPermission;\n\troleList: IRole[];\n\tonGrant: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\n\tonRemove: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\n};\n\nconst PermissionRow = ({ permission, roleList, onGrant, onRemove }: PermissionRowProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { _id, roles } = permission;\n\tconst [hovered, setHovered] = useState(false);\n\tconst changeRole = useChangeRole({ onGrant, onRemove, permissionId: _id });\n\n\tconst onMouseEnter = useMutableCallback(() => setHovered(true));\n\tconst onMouseLeave = useMutableCallback(() => setHovered(false));\n\n\treturn (\n\t\t<GenericTableRow key={_id} role='link' action tabIndex={0} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n\t\t\t<GenericTableCell maxWidth='x300' withTruncatedText title={t(`${_id}_description` as TranslationKey)}>\n\t\t\t\t{getName(t, permission)}\n\t\t\t</GenericTableCell>\n\t\t\t{roleList.map(({ _id, name, description }) => (\n\t\t\t\t<RoleCell\n\t\t\t\t\tkey={_id}\n\t\t\t\t\t_id={_id}\n\t\t\t\t\tname={name}\n\t\t\t\t\tdescription={description}\n\t\t\t\t\tgrantedRoles={roles}\n\t\t\t\t\tonChange={changeRole}\n\t\t\t\t\tlineHovered={hovered}\n\t\t\t\t\tpermissionId={_id}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</GenericTableRow>\n\t);\n};\n\nexport default memo(PermissionRow);\n",null],"names":["module","default","_slicedToArray","link","useMutableCallback","useTranslation","v","React","useState","memo","CONSTANTS","GenericTableRow","GenericTableCell","useChangeRole","RoleCell","getName","t","permission","level","SETTINGS_LEVEL","path","group","section","settingId","_id","exportDefault","_ref","roleList","onGrant","onRemove","roles","_useState2","hovered","setHovered","changeRole","permissionId","onMouseEnter","onMouseLeave","createElement","key","role","action","tabIndex","maxWidth","withTruncatedText","title","map","_ref2","name","description","grantedRoles","onChange","lineHovered"],"mappings":"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"}