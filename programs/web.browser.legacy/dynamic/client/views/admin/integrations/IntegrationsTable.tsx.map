)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/integrations/IntegrationsTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination, States, StatesActions, StatesAction, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useEndpoint, useRoute, useTranslation, useLayout } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo, useCallback, useState } from 'react';\n\nimport FilterByText from '../../../components/FilterByText';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport IntegrationRow from './IntegrationRow';\n\nconst IntegrationsTable = ({ type }: { type?: string }) => {\n\tconst t = useTranslation();\n\tconst { isMobile } = useLayout();\n\n\tconst [text, setText] = useState('');\n\tconst router = useRoute('admin-integrations');\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'channel' | '_createdBy' | '_createdAt' | 'username'>('name');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tquery: JSON.stringify({ name: { $regex: escapeRegExp(text), $options: 'i' }, type }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[text, itemsPerPage, current, sortBy, sortDirection, type],\n\t\t),\n\t\t500,\n\t);\n\n\tconst getIntegrations = useEndpoint('GET', '/v1/integrations.list');\n\tconst { data, isLoading, isSuccess, isError, refetch } = useQuery(['integrations', query], async () => getIntegrations(query));\n\n\tconst onClick = useCallback(\n\t\t(_id, type) => () =>\n\t\t\trouter.push({\n\t\t\t\tcontext: 'edit',\n\t\t\t\ttype: type === 'webhook-incoming' ? 'incoming' : 'outgoing',\n\t\t\t\tid: _id,\n\t\t\t}),\n\t\t[router],\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='name'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'name'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='name'\n\t\t\t\t{...(!isMobile && { w: 'x280' })}\n\t\t\t>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='channel' direction={sortDirection} active={sortBy === 'channel'} onClick={setSort} sort='channel'>\n\t\t\t\t{t('Post_to')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='_createdBy'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === '_createdBy'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='_createdBy'\n\t\t\t>\n\t\t\t\t{t('Created_by')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{!isMobile && (\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='_createdAt'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === '_createdAt'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='_createdAt'\n\t\t\t\t>\n\t\t\t\t\t{t('Created_at')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Post_as')}\n\t\t\t</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<FilterByText placeholder={t('Search_Integrations')} onChange={({ text }): void => setText(text)} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={!isMobile ? 5 : 4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.integrations.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{isSuccess &&\n\t\t\t\t\t\t\t\tdata?.integrations.map((integration) => (\n\t\t\t\t\t\t\t\t\t<IntegrationRow key={integration._id} integration={integration} isMobile={isMobile} onClick={onClick} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.integrations.length === 0 && <GenericNoResults />}\n\t\t\t{isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default IntegrationsTable;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","_slicedToArray","Pagination","States","StatesActions","StatesAction","StatesIcon","StatesTitle","useDebouncedValue","escapeRegExp","useEndpoint","useRoute","useTranslation","useLayout","useQuery","React","useMemo","useCallback","useState","FilterByText","GenericNoResults","GenericTable","GenericTableBody","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","usePagination","useSort","IntegrationRow","module","link","default","v","exportDefault","_ref","type","t","isMobile","_useLayout","_useState2","text","setText","router","_useSort","sortBy","sortDirection","setSort","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","query","JSON","stringify","name","$regex","$options","sort","count","offset","getIntegrations","_useQuery","async","_context","prev","next","abrupt","stop","Promise","data","isLoading","isSuccess","isError","refetch","onClick","_id","push","context","id","headers","createElement","Fragment","key","direction","active","w","placeholder","onChange","_ref2","headerCells","integrations","length","map","integration","divider","total","variation"],"mappings":"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"}