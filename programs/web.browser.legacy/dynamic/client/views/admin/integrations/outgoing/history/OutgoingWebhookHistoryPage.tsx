function module(e,t,n){var i,r,o,a,u,c,s,l,f,d,m,g,p,y,h,k,b,P,v,E,C,x,H,T;n.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){o=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},3),n.link("@rocket.chat/fuselage",{Button:function(e){u=e},ButtonGroup:function(e){c=e},Pagination:function(e){s=e}},0),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch:function(e){l=e},useRouteParameter:function(e){f=e},useMethod:function(e){d=e},useTranslation:function(e){m=e},useEndpoint:function(e){g=e},useRouter:function(e){p=e}},1),n.link("@tanstack/react-query",{useQuery:function(e){y=e},useQueryClient:function(e){h=e}},2),n.link("react",{default:function(e){k=e},useMemo:function(e){b=e},useState:function(e){P=e},useEffect:function(e){v=e}},3),n.link("../../../../../../app/utils/client/lib/SDKClient",{sdk:function(e){E=e}},4),n.link("../../../../../components/GenericTable/hooks/usePagination",{usePagination:function(e){C=e}},5),n.link("../../../../../components/Page",{default:function(e){x=e}},6),n.link("../../../../../components/ScrollableContentWrapper",{default:function(e){H=e}},7),n.link("./HistoryContent",{default:function(e){T=e}},8),n.exportDefault(function(e){var t=l(),n=m(),_=p(),D=C(),I=D.itemsPerPage,L=D.setItemsPerPage,S=D.current,w=D.setCurrent,Q=D.itemsPerPageLabel,R=D.showingResultsLabel,B=a(P(!1),2),G=B[0],M=B[1],j=a(P(0),2),O=j[0],W=j[1],q=d("clearIntegrationHistory"),A=f("id"),K=b(function(){return{id:A,count:I,offset:S}},[A,I,S]),z=g("GET","/v1/integrations.history"),F=b(function(){return["integrations/history",A,I,S]},[A,I,S]),J=h(),N=y(F,function(){var e;return i.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=z(K),M(!0),t.abrupt("return",e);case 3:case"end":return t.stop()}},null,null,null,Promise)},{cacheTime:99999,staleTime:99999}),U=N.data,V=N.isLoading,X=N.refetch;return v(function(){if(G)return E.stream("integrationHistory",[A],function(e){if("inserted"===e.type&&(W(function(e){return e+1}),J.setQueryData(F,function(t){if(t&&e.data)return o(o({},t),{},{history:[e.data].concat(t.history),total:t.total+1})})),"updated"===e.type){J.setQueryData(F,function(t){if(t){var n=t.history.findIndex(function(e){return e._id===A});if(-1!==n)return Object.assign(t.history[n],e.diff),o({},t)}});return}"removed"===e.type&&X()}).stop},[A,G,J,F,X]),k.createElement(x,r({flexDirection:"column"},e),k.createElement(x.Header,{title:n("Integration_Outgoing_WebHook_History")},k.createElement(c,null,k.createElement(u,{icon:"back",onClick:function(){return _.navigate("/admin/integrations/edit/outgoing/"+A)}},n("Back")),k.createElement(u,{icon:"trash",danger:!0,onClick:function(){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(q(A));case 3:t({type:"success",message:n("Integration_History_Cleared")}),X(),M(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"error",message:e.t0});case 11:case"end":return e.stop()}},null,null,[[0,8]],Promise)},disabled:0===O},n("clear_history")))),k.createElement(x.Content,null,k.createElement(H,null,k.createElement(T,{key:"historyContent",data:(null==U?void 0:U.history)||[],isLoading:V})),k.createElement(s,{current:S,itemsPerPage:I,itemsPerPageLabel:Q,showingResultsLabel:R,count:(null==U?void 0:U.total)||0,onSetItemsPerPage:L,onSetCurrent:w})))})}
//# sourceMappingURL=/dynamic/client/views/admin/integrations/outgoing/history/62ea8b8778d8fe46ba357dcec6810a4cf47266e3.map
