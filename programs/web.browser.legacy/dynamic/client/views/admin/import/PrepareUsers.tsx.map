)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/import/PrepareUsers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { CheckBox, Table, Tag, Pagination, TableHead, TableRow, TableCell, TableBody } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC, Dispatch, SetStateAction, ChangeEvent } from 'react';\nimport React, { useState, useCallback } from 'react';\n\ntype UserDescriptor = {\n\tuser_id: string;\n\tusername: string;\n\temail: string;\n\tis_deleted: boolean;\n\tdo_import: boolean;\n};\n\ntype PrepareUsersProps = {\n\tusersCount: number;\n\tusers: UserDescriptor[];\n\tsetUsers: Dispatch<SetStateAction<UserDescriptor[]>>;\n};\n\nconst PrepareUsers: FC<PrepareUsersProps> = ({ usersCount, users, setUsers }) => {\n\tconst t = useTranslation();\n\tconst [current, setCurrent] = useState(0);\n\tconst [itemsPerPage, setItemsPerPage] = useState<25 | 50 | 100>(25);\n\tconst showingResultsLabel = useCallback(\n\t\t({ count, current, itemsPerPage }) => t('Showing_results_of', current + 1, Math.min(current + itemsPerPage, count), count),\n\t\t[t],\n\t);\n\tconst itemsPerPageLabel = useCallback(() => t('Items_per_page:'), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Table>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell width='x36'>\n\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\tchecked={usersCount > 0}\n\t\t\t\t\t\t\t\tindeterminate={usersCount > 0 && usersCount !== users.length}\n\t\t\t\t\t\t\t\tonChange={(): void => {\n\t\t\t\t\t\t\t\t\tsetUsers((users) => {\n\t\t\t\t\t\t\t\t\t\tconst hasCheckedDeletedUsers = users.some(({ is_deleted, do_import }) => is_deleted && do_import);\n\t\t\t\t\t\t\t\t\t\tconst isChecking = usersCount === 0;\n\n\t\t\t\t\t\t\t\t\t\tif (isChecking) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: true }));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (hasCheckedDeletedUsers) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => (user.is_deleted ? { ...user, do_import: false } : user));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: false }));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t<TableCell is='th'>{t('Username')}</TableCell>\n\t\t\t\t\t\t<TableCell is='th'>{t('Email')}</TableCell>\n\t\t\t\t\t\t<TableCell is='th'></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{users.slice(current, current + itemsPerPage).map((user) => (\n\t\t\t\t\t\t<TableRow key={user.user_id}>\n\t\t\t\t\t\t\t<TableCell width='x36'>\n\t\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\t\tchecked={user.do_import}\n\t\t\t\t\t\t\t\t\tonChange={(event: ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\t\t\t\t\t\tconst { checked } = event.currentTarget;\n\t\t\t\t\t\t\t\t\t\tsetUsers((users) => users.map((_user) => (_user === user ? { ..._user, do_import: checked } : _user)));\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>{user.username}</TableCell>\n\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n\t\t\t\t\t\t\t<TableCell align='end'>{user.is_deleted && <Tag variant='danger'>{t('Deleted')}</Tag>}</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t))}\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n\t\t\t<Pagination\n\t\t\t\tcurrent={current}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\tcount={users.length || 0}\n\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\titemsPerPageLabel={itemsPerPageLabel}\n\t\t\t\tshowingResultsLabel={showingResultsLabel}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default PrepareUsers;\n",null],"names":["_objectSpread","_slicedToArray","CheckBox","Table","Tag","TableHead","TableRow","TableCell","TableBody","useTranslation","React","useState","useCallback","module","link","default","v","Pagination","exportDefault","_ref","usersCount","users","setUsers","t","_useState2","current","setCurrent","_useState4","itemsPerPage","setItemsPerPage","showingResultsLabel","_ref2","count","Math","min","itemsPerPageLabel","createElement","Fragment","width","checked","indeterminate","length","onChange","hasCheckedDeletedUsers","some","_ref3","is_deleted","do_import","map","user","is","slice","key","user_id","event","currentTarget","_user","username","email","align","variant","onSetItemsPerPage","onSetCurrent"],"mappings":"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"}