)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customEmoji/CustomEmoji.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Pagination, States, StatesActions, StatesAction, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FC, MutableRefObject } from 'react';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport FilterByText from '../../../components/FilterByText';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\n\ntype CustomEmojiProps = {\n\treload: MutableRefObject<() => void>;\n\tonClick: (emoji: string) => () => void;\n};\n\nconst CustomEmoji: FC<CustomEmojiProps> = ({ onClick, reload }) => {\n\tconst t = useTranslation();\n\n\tconst [text, setText] = useState('');\n\tconst { sortBy, sortDirection, setSort } = useSort<'name'>('name');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tquery: JSON.stringify({ name: { $regex: escapeRegExp(text), $options: 'i' } }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[text, itemsPerPage, current, sortBy, sortDirection],\n\t\t),\n\t\t500,\n\t);\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name' w='x200'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='aliases' w='x200'>\n\t\t\t\t{t('Aliases')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t],\n\t\t[setSort, sortDirection, sortBy, t],\n\t);\n\n\tconst getEmojiList = useEndpoint('GET', '/v1/emoji-custom.all');\n\tconst { data, refetch, isSuccess, isLoading, isError } = useQuery(['getEmojiList', query], () => getEmojiList(query));\n\n\tuseEffect(() => {\n\t\treload.current = refetch;\n\t}, [reload, refetch]);\n\n\treturn (\n\t\t<>\n\t\t\t<FilterByText onChange={({ text }): void => setText(text)} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={2} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.emojis.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{isSuccess &&\n\t\t\t\t\t\t\t\tdata?.emojis.map((emojis) => (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\tkey={emojis._id}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={onClick(emojis._id)}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick(emojis._id)}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tqa-emoji-id={emojis._id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell color='default'>\n\t\t\t\t\t\t\t\t\t\t\t<Box withTruncatedText>{emojis.name}</Box>\n\t\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell color='default'>\n\t\t\t\t\t\t\t\t\t\t\t<Box withTruncatedText>{emojis.aliases}</Box>\n\t\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.emojis.length === 0 && <GenericNoResults />}\n\t\t\t{isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CustomEmoji;\n",null],"names":["_extends","_objectWithoutProperties","_slicedToArray","Box","Pagination","States","StatesActions","StatesAction","StatesIcon","StatesTitle","useDebouncedValue","escapeRegExp","useTranslation","useEndpoint","useQuery","React","useEffect","useMemo","useState","FilterByText","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","module","link","default","v","exportDefault","_ref","onClick","reload","t","_useState2","text","setText","_useSort","sortBy","sortDirection","setSort","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","query","JSON","stringify","name","$regex","$options","sort","count","offset","headers","createElement","key","direction","active","w","getEmojiList","_useQuery","data","refetch","isSuccess","isLoading","isError","Fragment","onChange","_ref2","headerCells","emojis","length","map","_id","onKeyDown","tabIndex","role","action","color","withTruncatedText","aliases","divider","total","variation"],"mappings":"2BAAAA,EAA8FC,EAAwBC,EAAtHC,EAAOC,EAAOC,EAAYC,EAAQC,EAAeC,EAAcC,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,8DAA1GC,EAAEC,IAAU,CAAA,iCAAyB,CAAAC,QAAc,SAAYC,CAAAA,EAAAjC,EAAaiC,CAAA,CAAA,EAAA,GAA8BH,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA/B,EAAAA,CAAA,CAAA,EAAA,GAAA6B,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA9B,EAAAA,CAAA,CAAA,EAAA,GAA3C4B,EAAAA,IAAW,CAAE,wBAAM,CAAA3B,IAAuB,SAAC8B,CAAAA,EAAA9B,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAqB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAApB,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAoB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAnB,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAmB,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAlB,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAiB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAhB,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgB,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAlB,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,mCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAd,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,uCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAT,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,yBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,uDAAAA,CAAAF,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAD,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAtHC,EAAOI,aAAO,CA2B4B,SAAAC,CAAA,EAAwB,IAArBC,EAAOD,EAAPC,OAAO,CAAEC,EAAMF,EAANE,MAAM,CACrDC,EAAI1B,IAE0B2B,EAAArC,EAAZgB,EAAS,IAAG,GAA7BsB,EAAID,CAAA,CAAA,EAAA,CAAEE,EAAOF,CAAA,CAAA,EAAA,CACpBG,EAA2Cb,EAAgB,QAAnDc,EAAMD,EAANC,MAAM,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAOH,EAAPG,OAAO,CACtCC,EAAoHlB,IAA5GmB,EAAOD,EAAPC,OAAO,CAAEC,EAAYF,EAAZE,YAAY,CAAmBC,EAAiBH,EAAlCI,eAAe,CAAiCC,EAAYL,EAAxBM,UAAU,CAAmBC,EAAepD,EAAA6C,EAAAQ,GAEzGC,EAAQ7C,EACbO,EACC,WAAA,MAAO,CACNsC,MAAOC,KAAKC,SAAS,CAAC,CAAEC,KAAM,CAAEC,OAAQhD,EAAa6B,GAAOoB,SAAU,GAAG,CAAE,GAC3EC,KAAI,MAAQlB,EAAM,MAAMC,CAAAA,AAAkB,QAAlBA,EAA0B,EAAI,EAAC,EAAC,KACxDkB,MAAOd,EACPe,OAAQhB,EACR,EACD,CAACP,EAAMQ,EAAcD,EAASJ,EAAQC,EAAc,EAErD,KAGKoB,EAAU/C,EACf,WAAA,MAAM,CACLF,EAAAkD,aAAA,CAACxC,EAAsB,CAACyC,IAAI,OAAOC,UAAWvB,EAAewB,OAAQzB,AAAW,SAAXA,EAAmBP,QAASS,EAASgB,KAAK,OAAOQ,EAAE,MAAM,EAC5H/B,EAAE,SAEJvB,EAAAkD,aAAA,CAACxC,EAAsB,CAACyC,IAAI,UAAUG,EAAE,MAAM,EAC5C/B,EAAE,YAEJ,EACD,CAACO,EAASD,EAAeD,EAAQL,EAAE,EAG9BgC,EAAezD,EAAY,MAAO,wBACxC0D,EAAyDzD,EAAS,CAAC,eAAgByC,EAAM,CAAE,WAAA,OAAMe,EAAaf,EAAM,GAA5GiB,EAAID,EAAJC,IAAI,CAAEC,EAAOF,EAAPE,OAAO,CAAEC,GAASH,EAATG,SAAS,CAAEC,GAASJ,EAATI,SAAS,CAAEC,GAAOL,EAAPK,OAAO,CAMpD,OAJA5D,EAAU,WACTqB,EAAOU,OAAO,CAAG0B,CAClB,EAAG,CAACpC,EAAQoC,EAAQ,EAGnB1D,EAAAkD,aAAA,CAAAlD,EAAA8D,QAAA,CAAA,KACC9D,EAAAkD,aAAA,CAAC9C,EAAY,CAAC2D,SAAU,SAAAC,CAAA,EAAO,OAAatC,EAAbsC,EAAJvC,IAAI,CAA0B,CAAC,GACzDmC,IACA5D,EAAAkD,aAAA,CAAC5C,EAAY,KACZN,EAAAkD,aAAA,CAACzC,EAAkB,KAAEwC,GACrBjD,EAAAkD,aAAA,CAAC3C,EAAgB,KAChBP,EAAAkD,aAAA,CAACvC,EAAwB,CAACsD,YAAa,CAAE,KAI3CN,IAAaF,GAAQA,EAAKS,MAAM,CAACC,MAAM,CAAG,GAC1CnE,EAAAkD,aAAA,CAAAlD,EAAA8D,QAAA,CAAA,KACC9D,EAAAkD,aAAA,CAAC5C,EAAY,KACZN,EAAAkD,aAAA,CAACzC,EAAkB,KAAEwC,GACrBjD,EAAAkD,aAAA,CAAC3C,EAAgB,KACfoD,IACAF,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMS,MAAM,CAACE,GAAG,CAAC,SAACF,CAAM,EAAA,OACvBlE,EAAAkD,aAAA,CAACtC,EAAe,CACfuC,IAAKe,EAAOG,GAAI,CAChBC,UAAWjD,EAAQ6C,EAAOG,GAAG,EAC7BhD,QAASA,EAAQ6C,EAAOG,GAAG,EAC3BE,SAAU,EACVC,KAAK,OACLC,OAAM,CAAA,EACN,cAAaP,EAAOG,GAAAA,AAAI,EAExBrE,EAAAkD,aAAA,CAAC1C,EAAgB,CAACkE,MAAM,SAAS,EAChC1E,EAAAkD,aAAA,CAAC9D,EAAG,CAACuF,kBAAiB,CAAA,CAAA,EAAET,EAAOvB,IAAI,GAEpC3C,EAAAkD,aAAA,CAAC1C,EAAgB,CAACkE,MAAM,SAAS,EAChC1E,EAAAkD,aAAA,CAAC9D,EAAG,CAACuF,kBAAiB,CAAA,CAAA,EAAET,EAAOU,OAAO,GAEtB,EAClB,IAGJ5E,EAAAkD,aAAA,CAAC7D,EAAUJ,EAAA,CACV4F,QAAO,CAAA,EACP7C,QAASA,EACTC,aAAcA,EACdc,MAAO,AAAAU,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMqB,KAAK,AAALA,GAAS,EACtB5C,kBAAmBA,EACnBE,aAAcA,CAAa,EACvBE,KAINqB,IAAaF,GAAQA,AAAuB,IAAvBA,EAAKS,MAAM,CAACC,MAAM,EAAUnE,EAAAkD,aAAA,CAAC7C,EAAgB,MAClEwD,IACA7D,EAAAkD,aAAA,CAAC5D,EAAM,KACNU,EAAAkD,aAAA,CAACzD,EAAU,CAACkD,KAAK,UAAUoC,UAAU,QAAQ,GAC7C/E,EAAAkD,aAAA,CAACxD,EAAW,KAAE6B,EAAE,yBAChBvB,EAAAkD,aAAA,CAAC3D,EAAa,KACbS,EAAAkD,aAAA,CAAC1D,EAAY,CAAC6B,QAAS,WAAA,OAAMqC,GAAS,CAAC,EAAEnC,EAAE,kBAMjD"}