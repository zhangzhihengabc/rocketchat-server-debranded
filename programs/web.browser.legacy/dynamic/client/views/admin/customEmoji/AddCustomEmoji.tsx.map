)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customEmoji/AddCustomEmoji.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button, ButtonGroup, Margins, TextInput, Field, FieldLabel, FieldRow, FieldError, Icon } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ChangeEvent } from 'react';\nimport React, { useCallback, useState } from 'react';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../components/Contextualbar';\nimport { useEndpointUpload } from '../../../hooks/useEndpointUpload';\nimport { useFileInput } from '../../../hooks/useFileInput';\n\ntype AddCustomEmojiProps = {\n\tclose: () => void;\n\tonChange: () => void;\n};\n\nconst AddCustomEmoji = ({ close, onChange, ...props }: AddCustomEmojiProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [name, setName] = useState('');\n\tconst [aliases, setAliases] = useState('');\n\tconst [emojiFile, setEmojiFile] = useState<Blob>();\n\tconst [newEmojiPreview, setNewEmojiPreview] = useState('');\n\tconst [errors, setErrors] = useState({ name: false, emoji: false, aliases: false });\n\n\tconst setEmojiPreview = useCallback(\n\t\tasync (file) => {\n\t\t\tsetEmojiFile(file);\n\t\t\tsetNewEmojiPreview(URL.createObjectURL(file));\n\t\t\tsetErrors((prevState) => ({ ...prevState, emoji: false }));\n\t\t},\n\t\t[setEmojiFile],\n\t);\n\n\tconst saveAction = useEndpointUpload('/v1/emoji-custom.create', t('Custom_Emoji_Added_Successfully'));\n\n\tconst handleSave = useCallback(async () => {\n\t\tif (!name) {\n\t\t\treturn setErrors((prevState) => ({ ...prevState, name: true }));\n\t\t}\n\n\t\tif (name === aliases) {\n\t\t\treturn setErrors((prevState) => ({ ...prevState, aliases: true }));\n\t\t}\n\n\t\tif (!emojiFile) {\n\t\t\treturn setErrors((prevState) => ({ ...prevState, emoji: true }));\n\t\t}\n\n\t\tconst formData = new FormData();\n\t\tformData.append('emoji', emojiFile);\n\t\tformData.append('name', name);\n\t\tformData.append('aliases', aliases);\n\t\tconst result = (await saveAction(formData)) as { success: boolean };\n\n\t\tif (result.success) {\n\t\t\tonChange();\n\t\t\tclose();\n\t\t}\n\t}, [emojiFile, name, aliases, saveAction, onChange, close]);\n\n\tconst [clickUpload] = useFileInput(setEmojiPreview, 'emoji');\n\n\tconst handleChangeName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tif (e.currentTarget.value !== '') {\n\t\t\tsetErrors((prevState) => ({ ...prevState, name: false }));\n\t\t}\n\n\t\treturn setName(e.currentTarget.value);\n\t};\n\n\tconst handleChangeAliases = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tif (e.currentTarget.value !== name) {\n\t\t\tsetErrors((prevState) => ({ ...prevState, aliases: false }));\n\t\t}\n\n\t\treturn setAliases(e.currentTarget.value);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent {...props}>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Name')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={name} onChange={handleChangeName} placeholder={t('Name')} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{errors.name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Aliases')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={aliases} onChange={handleChangeAliases} placeholder={t('Aliases')} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{errors.aliases && <FieldError>{t('Custom_Emoji_Error_Same_Name_And_Alias')}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel alignSelf='stretch' display='flex' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t\t{t('Custom_Emoji')}\n\t\t\t\t\t\t{/* FIXME: replace to IconButton */}\n\t\t\t\t\t\t<Button square onClick={clickUpload}>\n\t\t\t\t\t\t\t<Icon name='upload' size='x20' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t{errors.emoji && <FieldError>{t('error-the-field-is-required', { field: t('Custom_Emoji') })}</FieldError>}\n\t\t\t\t\t{newEmojiPreview && (\n\t\t\t\t\t\t<Box display='flex' flexDirection='row' mi='neg-x4' justifyContent='center'>\n\t\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t\t<Box is='img' style={{ objectFit: 'contain' }} w='x120' h='x120' src={newEmojiPreview} />\n\t\t\t\t\t\t\t</Margins>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t</Field>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default AddCustomEmoji;\n",null],"names":["_regeneratorRuntime","_objectSpread","_slicedToArray","_objectWithoutProperties","Box","Button","ButtonGroup","Margins","TextInput","Field","FieldLabel","FieldRow","Icon","useTranslation","React","useCallback","useState","ContextualbarScrollableContent","ContextualbarFooter","useEndpointUpload","useFileInput","module","default","v","link","FieldError","exportDefault","_ref","close","onChange","props","_excluded","t","_useState2","name","setName","_useState4","aliases","setAliases","_useState6","emojiFile","setEmojiFile","_useState8","newEmojiPreview","setNewEmojiPreview","_useState10","emoji","errors","setErrors","setEmojiPreview","file","async","_context","prev","next","URL","createObjectURL","prevState","stop","Promise","saveAction","handleSave","formData","_context2","abrupt","FormData","append","awrap","result","sent","success","clickUpload","_useFileInput2","createElement","Fragment","value","e","currentTarget","placeholder","field","alignSelf","display","justifyContent","alignItems","square","onClick","size","flexDirection","mi","inline","is","style","objectFit","w","h","src","stretch","primary"],"mappings":"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"}