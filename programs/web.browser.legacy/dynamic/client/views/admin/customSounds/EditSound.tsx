function module(e,n,t){var r,o,a,u,l,c,i,s,f,d,m,p,h,b,v,g,k,x,C,E,y,S,_,F,w,D,M,B,T=["close","onChange","data"];t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){u=e}},3),t.link("@rocket.chat/fuselage",{Box:function(e){l=e},Button:function(e){c=e},ButtonGroup:function(e){i=e},Margins:function(e){s=e},TextInput:function(e){f=e},Field:function(e){d=e},FieldLabel:function(e){m=e},FieldRow:function(e){p=e},IconButton:function(e){h=e}},0),t.link("@rocket.chat/ui-contexts",{useSetModal:function(e){b=e},useToastMessageDispatch:function(e){v=e},useMethod:function(e){g=e},useTranslation:function(e){k=e}},1),t.link("react",{default:function(e){x=e},useCallback:function(e){C=e},useState:function(e){E=e},useMemo:function(e){y=e},useEffect:function(e){S=e}},2),t.link("../../../components/Contextualbar",{ContextualbarScrollableContent:function(e){_=e},ContextualbarFooter:function(e){F=e}},3),t.link("../../../components/GenericModal",{default:function(e){w=e}},4),t.link("../../../hooks/useFileInput",{useFileInput:function(e){D=e}},5),t.link("./lib",{validate:function(e){M=e},createSoundData:function(e){B=e}},6),t.exportDefault(function(e){var n=e.close,t=e.onChange,I=e.data,P=u(e,T),N=k(),j=v(),A=b(),G=I||{},R=G._id,U=G.name,W=y(function(){return I||{}},[I]),q=a(E(function(){var e;return null!==(e=null==I?void 0:I.name)&&void 0!==e?e:""}),2),H=q[0],L=q[1],O=a(E(function(){return I}),2),z=O[0],J=O[1];S(function(){L(U||""),J(W||"")},[U,W,R]);var K=g("deleteCustomSound"),Q=g("uploadCustomSound"),V=g("insertOrUpdateSound"),X=C(function(e){J(e)},[]),Y=y(function(){return U!==H||W!==z},[H,U,W,z]),Z=C(function(e){var n,t,a,u;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(0!==(t=M(n=B(e,H,{previousName:U,previousSound:W,_id:R,extension:e.extension}),e)).length){l.next=16;break}return l.prev=3,l.next=6,r.awrap(V(n));case 6:a=l.sent,l.next=13;break;case 9:return l.prev=9,l.t0=l.catch(3),j({type:"error",message:l.t0}),l.abrupt("return");case 13:n._id=a,n.random=Math.round(1e3*Math.random()),e&&e!==W&&(j({type:"success",message:N("Uploading_file")}),(u=new FileReader).readAsBinaryString(e),u.onloadend=function(){try{return Q(u.result,e.type,o(o({},n),{},{_id:a})),j({type:"success",message:N("File_uploaded")})}catch(e){j({type:"error",message:e})}});case 16:t.forEach(function(e){return j({type:"error",message:N("error-the-field-is-required",{field:N(e)})})});case 17:case"end":return l.stop()}},null,null,[[3,9]],Promise)},[R,j,V,H,U,W,N,Q]),$=C(function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:Z(z),t();case 2:case"end":return e.stop()}},null,null,null,Promise)},[Z,z,t]),ee=C(function(){var e=function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(K(R));case 3:j({type:"success",message:N("Custom_Sound_Has_Been_Deleted")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j({type:"error",message:e.t0});case 9:return e.prev=9,A(null),null==n||n(),t(),e.finish(9);case 14:case"end":return e.stop()}},null,null,[[0,6,9,14]],Promise)},o=function(){return A(null)};A(function(){return x.createElement(w,{variant:"danger",onConfirm:e,onCancel:o,onClose:o,confirmText:N("Delete")},N("Custom_Sound_Delete_Warning"))})},[R,n,K,j,t,A,N]),en=a(D(X,"audio/mp3"),1)[0];return x.createElement(x.Fragment,null,x.createElement(_,P,x.createElement(d,null,x.createElement(m,null,N("Name")),x.createElement(p,null,x.createElement(f,{value:H,onChange:function(e){return L(e.currentTarget.value)},placeholder:N("Name")}))),x.createElement(d,null,x.createElement(m,{alignSelf:"stretch"},N("Sound_File_mp3")),x.createElement(l,{display:"flex",flexDirection:"row",mbs:"none"},x.createElement(s,{inline:4},x.createElement(h,{icon:"upload",secondary:!0,onClick:en}),(null==z?void 0:z.name)||"none")))),x.createElement(F,null,x.createElement(i,{stretch:!0},x.createElement(c,{onClick:n},N("Cancel")),x.createElement(c,{primary:!0,onClick:$,disabled:!Y},N("Save"))),x.createElement(i,{mbs:8,stretch:!0},x.createElement(c,{icon:"trash",danger:!0,onClick:ee},N("Delete")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/customSounds/68584b8618304091897e5858f29f9d55654c9591.map
