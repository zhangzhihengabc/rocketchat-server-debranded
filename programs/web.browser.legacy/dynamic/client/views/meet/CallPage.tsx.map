)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/meet/CallPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { FC } from 'react';\nimport React, { useEffect, useState } from 'react';\n\nimport { Notifications } from '../../../app/notifications/client';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport UserAvatar from '../../components/avatar/UserAvatar';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId: any;\n\tvisitorToken: any;\n\tvisitorId: any;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage: FC<CallPageProps> = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}) => {\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tNotifications.onVisitor(WEB_RTC_EVENTS.WEB_RTC, visitorId, (type: any, data: any) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t});\n\n\t\t\tNotifications.onRoom(roomId, 'webrtc' as any, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'deviceType', {\n\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t});\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'deviceType', {\n\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'callStatus', { callStatus: 'inProgress' });\n\t\t} else if (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'getDeviceType');\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tNotifications.onRoom(roomId, 'webrtc' as any, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetIsAgentActive(true);\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'cameraStatus', { isCameraOn: !isCameraOn });\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={localAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t\t<ButtonGroup\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t></video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={remoteAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={!callInIframe ? 'x124' : avatarSize}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={agentName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize={isLocalMobileDevice ? 'x32' : 'x48'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={visitorName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize='x124'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n",null],"names":["_objectSpread","_slicedToArray","Box","Flex","ButtonGroup","Button","Icon","useTranslation","moment","React","useEffect","useState","Notifications","WebRTC","WEB_RTC_EVENTS","UserAvatar","OngoingCallDuration","module","link","default","v","exportDefault","_ref","roomId","visitorToken","visitorId","status","setStatus","isLayoutEmbedded","visitorName","agentName","callStartTime","_useState2","isAgentActive","setIsAgentActive","_useState4","isMicOn","setIsMicOn","_useState6","isCameraOn","setIsCameraOn","_useState8","isRemoteMobileDevice","setIsRemoteMobileDevice","_useState10","callInIframe","setCallInIframe","_useState12","isRemoteCameraOn","setIsRemoteCameraOn","_useState14","isLocalMobileDevice","setIsLocalMobileDevice","iconSize","buttonSize","t","webrtcInstance","getInstanceByRoomId","isMobileDevice","window","innerWidth","innerHeight","media","audio","video","width","ideal","height","onVisitor","WEB_RTC","type","data","room","onUserStream","onRoom","callStatus","stop","notifyRoom","startCall","toggleButton","control","toggleAudio","toggleVideo","closeWindow","_parent","parent","handleIframeClose","close","showCallPage","localAvatar","remoteAvatar","createElement","Container","direction","justifyContent","minHeight","alignItems","backgroundColor","overflow","position","zIndex","style","top","right","className","id","autoPlay","playsInline","muted","transform","display","margin","username","size","bottom","square","title","onClick","Number","name","parseInt","borderColor","_parent2","expandCall","color","danger","flexDirection","fontSize","textAlign","counter","duration","Date","diff","asSeconds","marginTop","Fragment"],"mappings":"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"}