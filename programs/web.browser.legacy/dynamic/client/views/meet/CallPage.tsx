function module(e,t,n){var i,a,o,l,r,c,s,m,u,d,f,g,p,y,v,h,E;n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){o=e},Flex:function(e){l=e},ButtonGroup:function(e){r=e},Button:function(e){c=e},Icon:function(e){s=e}},0),n.link("@rocket.chat/ui-contexts",{useTranslation:function(e){m=e}},1),n.link("moment",{default:function(e){u=e}},2),n.link("react",{default:function(e){d=e},useEffect:function(e){f=e},useState:function(e){g=e}},3),n.link("../../../app/notifications/client",{Notifications:function(e){p=e}},4),n.link("../../../app/webrtc/client",{WebRTC:function(e){y=e}},5),n.link("../../../app/webrtc/lib/constants",{WEB_RTC_EVENTS:function(e){v=e}},6),n.link("../../components/avatar/UserAvatar",{default:function(e){h=e}},7),n.link("./OngoingCallDuration",{default:function(e){E=e}},8),n.link("./styles.css"),n.exportDefault(function(e){var t=e.roomId,n=e.visitorToken,b=e.visitorId,k=e.status,w=e.setStatus,x=e.isLayoutEmbedded,C=e.visitorName,I=e.agentName,S=e.callStartTime,z=a(g(!1),2),_=z[0],T=z[1],R=a(g(!1),2),N=R[0],D=R[1],B=a(g(!1),2),O=B[0],j=B[1],V=a(g(!1),2),P=V[0],H=V[1],q=a(g(!1),2),A=q[0],M=q[1],W=a(g(!1),2),U=W[0],F=W[1],X=a(g(!1),2),G=X[0],L=X[1],J="x21",K="x40";x&&(J="x19",K="x35");var Q=m();f(function(){if(n){var e=y.getInstanceByRoomId(t,b),i=function(){return x&&M(!0),window.innerWidth<=450&&window.innerHeight>=629&&window.innerHeight<=900&&(L(!0),e.media={audio:!0,video:{width:{ideal:440},height:{ideal:580}}},!0)};p.onVisitor(v.WEB_RTC,b,function(t,n){null!=n.room&&e.onUserStream(t,n)}),p.onRoom(t,"webrtc",function(n,a){"callStatus"===n&&"ended"===a.callStatus?(e.stop(),w(a.callStatus)):"getDeviceType"===n?p.notifyRoom(t,"webrtc","deviceType",{isMobileDevice:i()}):"cameraStatus"===n&&F(a.isCameraOn)}),p.notifyRoom(t,"webrtc","deviceType",{isMobileDevice:i()}),p.notifyRoom(t,"webrtc","callStatus",{callStatus:"inProgress"})}else if(!_){var a=y.getInstanceByRoomId(t);"inProgress"===k&&(p.notifyRoom(t,"webrtc","getDeviceType"),a.startCall({audio:!0,video:{width:{ideal:1920},height:{ideal:1080}}})),p.onRoom(t,"webrtc",function(e,t){if("callStatus"===e){switch(t.callStatus){case"ended":a.stop();break;case"inProgress":a.startCall({audio:!0,video:{width:{ideal:1920},height:{ideal:1080}}})}w(t.callStatus)}else"deviceType"===e&&t.isMobileDevice?H(!0):"cameraStatus"===e&&F(t.isCameraOn)}),T(!0)}},[_,k,w,b,t,n,x]);var Y=function(e){if("mic"===e)return y.getInstanceByRoomId(t,n).toggleAudio(),D(!N);y.getInstanceByRoomId(t,n).toggleVideo(),j(!O),p.notifyRoom(t,"webrtc","cameraStatus",{isCameraOn:!O})},Z=function(){if(x){var e;return null===(e=parent)||void 0===e?void 0:e.handleIframeClose()}return window.close()},$=function(e,t){return d.createElement(l.Container,{direction:"column",justifyContent:"center"},d.createElement(o,{width:"full",minHeight:"sh",alignItems:"center",backgroundColor:"dark",overflow:"hidden",position:"relative"},d.createElement(o,{position:"absolute",zIndex:1,style:{top:"5%",right:"2%"},className:"Self_Video",alignItems:"center",backgroundColor:"dark"},d.createElement("video",{id:"localVideo",autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",transform:"scaleX(-1)",display:O?"block":"none"}}),d.createElement(h,{style:{display:O?"none":"block",margin:"auto"},username:e,className:"rcx-message__avatar",size:G||A?"x32":"x48"})),d.createElement(r,{position:"absolute",zIndex:1,style:{bottom:"5%"}},d.createElement(c,{id:"mic",square:!0,title:N?Q("Mute_microphone"):Q("Unmute_microphone"),onClick:function(){return Y("mic")},className:N?"On":"Off",size:Number(K)},N?d.createElement(s,{name:"mic",size:J}):d.createElement(s,{name:"mic-off",size:J})),d.createElement(c,{id:"camera",square:!0,title:O?Q("Turn_off_video"):Q("Turn_on_video"),onClick:function(){return Y("camera")},className:O?"On":"Off",size:parseInt(K)},O?d.createElement(s,{name:"video",size:J}):d.createElement(s,{name:"video-off",size:J})),x&&d.createElement(c,{square:!0,backgroundColor:"dark",borderColor:"stroke-extra-dark","data-title":Q("Expand_view"),onClick:function(){var e;return null===(e=parent)||void 0===e?void 0:e.expandCall()},size:parseInt(K)},d.createElement(s,{name:"arrow-expand",size:J,color:"white"})),d.createElement(c,{square:!0,danger:!0,title:Q("End_call"),onClick:Z,size:parseInt(K)},d.createElement(s,{name:"phone-off",size:J,color:"white"}))),d.createElement("video",{id:"remoteVideo",autoPlay:!0,playsInline:!0,style:{width:P?"45%":"100%",transform:"scaleX(-1)",display:U?"block":"none"}}),d.createElement(o,{position:"absolute",zIndex:1,display:U?"none":"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",style:{top:P||G?"10%":"30%"}},d.createElement(h,{style:{display:"block",margin:"auto"},username:t,className:"rcx-message__avatar",size:A?"x48":"x124"}),d.createElement(o,{color:"white",fontSize:A?12:18,textAlign:"center",margin:3},d.createElement(E,{counter:u.duration(u(new Date).diff(u(S))).asSeconds()})),d.createElement(o,{style:i({color:"white",fontSize:A?12:22,margin:A?5:9},A&&{marginTop:0})},t))))};return d.createElement(d.Fragment,null,"ringing"===k&&d.createElement(l.Container,{direction:"column",justifyContent:"center"},d.createElement(o,{width:"full",minHeight:"sh",alignItems:"center",backgroundColor:"dark",overflow:"hidden",position:"relative"},d.createElement(o,{position:"absolute",zIndex:1,style:{top:"5%",right:"2%"},className:"Self_Video",backgroundColor:"dark",alignItems:"center"},d.createElement(h,{style:{display:"block",margin:"auto"},username:I,className:"rcx-message__avatar",size:G?"x32":"x48"})),d.createElement(o,{position:"absolute",zIndex:1,style:{top:"20%",display:"flex",justifyContent:"center",flexDirection:"column"},alignItems:"center"},d.createElement(h,{style:{display:"block",margin:"auto"},username:C,className:"rcx-message__avatar",size:"x124"}),d.createElement(o,{color:"white",fontSize:16,margin:15},"Calling..."),d.createElement(o,{style:{color:"white",fontSize:G?15:22}},C)))),"declined"===k&&d.createElement(o,{minHeight:"90%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"s1"},Q("Call_declined")),"inProgress"===k&&d.createElement(l.Container,{direction:"column",justifyContent:"center"},n?$(C,I):$(I,C)))})}
//# sourceMappingURL=/dynamic/client/views/meet/368667f92da3a9101d31d12ef2d3c1bbaa98440e.map
