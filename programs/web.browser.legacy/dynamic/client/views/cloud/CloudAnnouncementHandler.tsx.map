)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/cloud/CloudAnnouncementHandler.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IBanner, UiKit } from '@rocket.chat/core-typings';\nimport { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\n\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\n\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\tconst appNs = `app-cloud-announcements-core`;\n\t\tif (!dictionary) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [language, translations] of Object.entries(dictionary)) {\n\t\t\ti18n.addResources(language, appNs, translations);\n\t\t}\n\t}, [i18n, dictionary]);\n\n\tconst actionManager = useUiKitActionManager();\n\n\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\n\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\n\n\tuseEffect(() => {\n\t\tswitch (surface) {\n\t\t\tcase 'modal': {\n\t\t\t\t// TODO fixme\n\t\t\t\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\n\n\t\t\t\tactionManager.openView('modal', modalView);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(modalView.id);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'banner': {\n\t\t\t\tconst bannerView = viewRef.current as UiKit.BannerView;\n\n\t\t\t\tactionManager.openView('banner', { ...bannerView });\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(bannerView.viewId);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(surface);\n\t\t}\n\t}, [actionManager, surface]);\n\n\treturn null;\n};\n\nexport default CloudAnnouncementHandler;\n",null],"names":["_objectSpread","_slicedToArray","useEffect","useRef","useTranslation","exhaustiveCheck","useUiKitActionManager","module","link","default","exportDefault","_ref","_ref$dictionary","dictionary","surface","view","i18n","_useTranslation","_i","_Object$entries","Object","entries","length","_ref3","language","translations","addResources","actionManager","viewRef","appId","current","modalView","openView","disposeView","id","bannerView","viewId"],"mappings":"uBASA,IARAA,EAA0CC,EAA1CC,EAASC,EAAiCC,EAAAC,EAAAC,EAAxBC,EAAEC,IAAQ,CAAA,uCAAc,CAAAC,QAAAA,SAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAtBM,EAAQC,IAAAA,CAAAA,QAAa,CAACN,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAH,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAF,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAD,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA1CC,EAAOG,aAAa,CAQa,SAAAC,CAAA,EAAsE,IAAAC,EAAAD,EAAnEE,UAAU,CAAVA,EAAUD,AAAA,KAAA,IAAAA,EAAG,CAAA,EAAEA,EAAEE,EAAOH,EAAPG,OAAO,CAAEC,EAAIJ,EAAJI,IAAI,CACzDC,EAAIC,AAAKb,IAATY,IAAI,CAEZd,EAAU,WAET,GAAKW,EAIL,IAAA,IAAAK,EAAA,EAAAC,EAAuCC,OAAOC,OAAO,CAACR,GAAWK,EAAAC,EAAAG,MAAA,CAAAJ,IAAE,CAAA,IAAAK,EAAAtB,EAAAkB,CAAA,CAAAD,EAAA,CAAA,GAAvDM,EAAQD,CAAA,CAAA,EAAA,CAAEE,EAAYF,CAAA,CAAA,EAAA,CACjCP,EAAKU,YAAY,CAACF,EANR,+BAMyBC,GAErC,EAAG,CAACT,EAAMH,EAAW,EAErB,IAAMc,EAAgBrB,IAEhBsB,EAAUzB,EAAMH,EAAAA,EAAA,CAAA,EAAMe,GAAI,CAAA,EAAA,CAAEc,MAAOd,EAAKc,KAAK,EAAI,0BAA0B,IA+BjF,OA9BAD,EAAQE,OAAO,CAAA9B,EAAAA,EAAA,CAAA,EAAQe,GAAI,CAAA,EAAA,CAAEc,MAAOd,EAAKc,KAAK,EAAI,0BAA0B,GAE5E3B,EAAU,WACT,OAAQY,GACP,IAAK,QAEJ,IAAMiB,EAAYH,EAAQE,OAAqC,CAI/D,OAFAH,EAAcK,QAAQ,CAAC,QAASD,GAEzB,WACNJ,EAAcM,WAAW,CAACF,EAAUG,EAAE,CACvC,CAGD,KAAK,SACJ,IAAMC,EAAaP,EAAQE,OAA2B,CAItD,OAFAH,EAAcK,QAAQ,CAAC,SAAQhC,EAAA,CAAA,EAAOmC,IAE/B,WACNR,EAAcM,WAAW,CAACE,EAAWC,MAAM,CAC5C,CAGD,SACC/B,EAAgBS,EAAS,CAE5B,EAAG,CAACa,EAAeb,EAAQ,EAEpB,IACR"}