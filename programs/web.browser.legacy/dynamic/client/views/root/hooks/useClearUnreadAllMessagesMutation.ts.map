)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/hooks/useClearUnreadAllMessagesMutation.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { UseMutationOptions } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { ChatSubscription } from '../../../../app/models/client';\n\nexport const useClearUnreadAllMessagesMutation = (options?: Omit<UseMutationOptions<void, unknown, void, unknown>, 'mutationFn'>) => {\n\tconst readSubscription = useEndpoint('POST', '/v1/subscriptions.read');\n\n\treturn useMutation(async () => {\n\t\tconst promises = ChatSubscription.find(\n\t\t\t{\n\t\t\t\topen: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tunread: 1,\n\t\t\t\t\talert: 1,\n\t\t\t\t\trid: 1,\n\t\t\t\t\tt: 1,\n\t\t\t\t\tname: 1,\n\t\t\t\t\tls: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t).map((subscription) => {\n\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\treturn readSubscription({ rid: subscription.rid, readThreads: true });\n\t\t\t}\n\n\t\t\treturn Promise.resolve();\n\t\t});\n\n\t\tawait Promise.all(promises);\n\t}, options);\n};\n",null],"names":["module","link","default","_regeneratorRuntime","export","useClearUnreadAllMessagesMutation","useEndpoint","useMutation","ChatSubscription","options","readSubscription","promises","async","_context","prev","next","find","open","fields","unread","alert","rid","t","name","ls","map","subscription","readThreads","Promise","resolve","awrap","all","stop"],"mappings":"uBAAsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,kCAAmB,WAA2B,OAAAA,CAAA,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAO,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAQ,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMhD,IANPL,EAAuDG,EAAAC,EAAAC,EAM1CH,EAAoC,SAACI,CAA8E,EAC/H,IAAMC,EAAmBJ,EAAY,OAAQ,0BAE7C,OAAOC,EAAY,WAAA,IAAAI,EAAA,OAAAR,EAAAS,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAqBhB,OApBIJ,EAAWH,EAAiBQ,IAAI,CACrC,CACCC,KAAM,CAAA,GAEP,CACCC,OAAQ,CACPC,OAAQ,EACRC,MAAO,EACPC,IAAK,EACLC,EAAG,EACHC,KAAM,EACNC,GAAI,KAGLC,GAAG,CAAC,SAACC,CAAY,SAClB,AAAIA,EAAaN,KAAK,EAAIM,EAAaP,MAAM,CAAG,EACxCT,EAAiB,CAAEW,IAAKK,EAAaL,GAAG,CAAEM,YAAa,CAAA,CAAI,GAG5DC,QAAQC,OAAO,EACvB,GAAEhB,EAAAE,IAAA,CAAA,EAAAZ,EAAA2B,KAAA,CAEIF,QAAQG,GAAG,CAACpB,GAAS,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAmB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAJ,QAAA,EACzBnB,EACJ"}