)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/hooks/useEscapeKeyStroke.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSession, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useEffect, useRef } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport { imperativeModal } from '../../../lib/imperativeModal';\nimport { useClearUnreadAllMessagesMutation } from './useClearUnreadAllMessagesMutation';\n\nexport const useEscapeKeyStroke = () => {\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst t = useTranslation();\n\n\tconst clearUnreadAllMessagesMutation = useClearUnreadAllMessagesMutation({\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonMutate: () => {\n\t\t\timperativeModal.close();\n\t\t},\n\t});\n\n\tconst { current: unread } = useRef(useSession('unread'));\n\n\tuseEffect(() => {\n\t\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\t\tif (\n\t\t\t\tevent.code !== 'Escape' ||\n\t\t\t\t!(event.shiftKey === true || event.ctrlKey === true) ||\n\t\t\t\tunread === undefined ||\n\t\t\t\tunread === null ||\n\t\t\t\tunread === ''\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: GenericModal,\n\t\t\t\tprops: {\n\t\t\t\t\tchildren: t('Are_you_sure_you_want_to_clear_all_unread_messages'),\n\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\ttitle: t('Clear_all_unreads_question'),\n\t\t\t\t\tconfirmText: t('Yes_clear_all'),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\tonCancel: imperativeModal.close,\n\t\t\t\t\tonConfirm: clearUnreadAllMessagesMutation.mutate,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\tdocument.body.addEventListener('keydown', handleKeyDown);\n\n\t\treturn () => {\n\t\t\tdocument.body.removeEventListener('keydown', handleKeyDown);\n\t\t};\n\t}, [clearUnreadAllMessagesMutation.mutate, dispatchToastMessage, t, unread]);\n};\n",null],"names":["module","export","useEscapeKeyStroke","useSession","useToastMessageDispatch","useTranslation","useEffect","useRef","v","GenericModal","imperativeModal","useClearUnreadAllMessagesMutation","dispatchToastMessage","t","clearUnreadAllMessagesMutation","onError","error","type","message","onMutate","close","unread","_useRef","current","handleKeyDown","event","code","shiftKey","ctrlKey","preventDefault","stopPropagation","open","component","props","children","variant","title","confirmText","onClose","onCancel","onConfirm","mutate","document","body","addEventListener","removeEventListener"],"mappings":"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,mBAAY,WAAuB,OAAEA,CAAsB,CAAA,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAG,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,QAAAA,CAAAM,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,mCAAAA,CAAA,QAAA,SAAAQ,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAU,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAW,kCAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOxF,IAP6DR,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAE,EAAAC,EAAAC,EAOlFT,EAAqB,WACjC,IAAMU,EAAuBR,IACvBS,EAAIR,IAEJS,EAAiCH,EAAkC,CACxEI,QAAS,SAACC,CAAK,EACdJ,EAAqB,CAAEK,KAAM,QAASC,QAASF,CAAK,EACrD,EACAG,SAAU,WACTT,EAAgBU,KAAK,EACtB,IAGgBC,EAAMC,AAAKf,EAAOJ,EAAW,WAAtCoB,OAAO,CAEfjB,EAAU,WACT,IAAMkB,EAAgB,SAACC,CAAoB,EAE1B,WAAfA,EAAMC,IAAI,EACRD,CAAAA,AAAmB,CAAA,IAAnBA,EAAME,QAAQ,EAAaF,AAAkB,CAAA,IAAlBA,EAAMG,OAAO,AAAK,GAE/CP,MADAA,GAEAA,AAAW,KAAXA,IAKDI,EAAMI,cAAc,GACpBJ,EAAMK,eAAe,GAErBpB,EAAgBqB,IAAI,CAAC,CACpBC,UAAWvB,EACXwB,MAAO,CACNC,SAAUrB,EAAE,sDACZsB,QAAS,UACTC,MAAOvB,EAAE,8BACTwB,YAAaxB,EAAE,iBACfyB,QAAS5B,EAAgBU,KAAK,CAC9BmB,SAAU7B,EAAgBU,KAAK,CAC/BoB,UAAW1B,EAA+B2B,MAAAA,IAG7C,EAIA,OAFAC,SAASC,IAAI,CAACC,gBAAgB,CAAC,UAAWpB,GAEnC,WACNkB,SAASC,IAAI,CAACE,mBAAmB,CAAC,UAAWrB,EAC9C,CACD,EAAG,CAACV,EAA+B2B,MAAM,CAAE7B,EAAsBC,EAAGQ,EAAO,CAC5E"}