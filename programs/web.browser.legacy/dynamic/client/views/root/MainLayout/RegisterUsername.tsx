function module(e,n,t){var r,u,a,o,l,i,s,c,m,f,d,b,g,p,k,E,h,y,v,F,_,x,U,L,T,C,S,w,q,M,P,B,G,I=["username"];t.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){u=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},2),t.link("@babel/runtime/regenerator",{default:function(e){o=e}},3),t.link("@rocket.chat/fuselage",{TextInput:function(e){l=e},ButtonGroup:function(e){i=e},Button:function(e){s=e},FieldGroup:function(e){c=e},Field:function(e){m=e},FieldLabel:function(e){f=e},FieldRow:function(e){d=e},FieldError:function(e){b=e},Box:function(e){g=e}},0),t.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){p=e}},1),t.link("@rocket.chat/layout",{VerticalWizardLayout:function(e){k=e},Form:function(e){E=e}},2),t.link("@rocket.chat/ui-client",{CustomFieldsForm:function(e){h=e}},3),t.link("@rocket.chat/ui-contexts",{useSetting:function(e){y=e},useTranslation:function(e){v=e},useLogout:function(e){F=e},useEndpoint:function(e){_=e},useUserId:function(e){x=e},useToastMessageDispatch:function(e){U=e},useAssetWithDarkModePath:function(e){L=e},useMethod:function(e){T=e},useAccountsCustomFields:function(e){C=e}},4),t.link("@tanstack/react-query",{useQuery:function(e){S=e},useMutation:function(e){w=e}},5),t.link("react",{default:function(e){q=e},useEffect:function(e){M=e}},6),t.link("react-hook-form",{useForm:function(e){P=e}},7),t.link("../../../components/MarkdownText",{default:function(e){B=e}},8),t.link("../../../lib/queryClient",{queryClient:function(e){G=e}},9),t.exportDefault(function(){var e=v(),n=x(),t=F(),D=p(),H=y("Layout_Login_Hide_Logo"),V=L("logo"),W=L("background"),j=U(),A=C();if(!n)throw Error("Invalid user");var Q=T("setUsername"),z=T("saveCustomFields"),N=_("GET","/v1/users.getUsernameSuggestion"),R=S(["suggestion"],function(){return o.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N());case 1:case"end":return e.stop()}},null,null,null,Promise)}),J=R.data,K=R.isLoading,O=P({mode:"onBlur"}),X=O.register,Y=O.handleSubmit,Z=O.setValue,$=O.getValues,ee=O.setError,en=O.control,et=O.formState.errors;M(function(){null!=J&&J.result&&""===$("username")&&Z("username",J.result)});var er=w({mutationFn:function(e){var n,t;return o.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.username,t=a(e,I),r.abrupt("return",Promise.all([Q(n),z(u({},t))]));case 2:case"end":return r.stop()}},null,null,null,Promise)},onSuccess:function(){j({type:"success",message:e("Username_has_been_updated")}),G.invalidateQueries(["users.info"])},onError:function(n,t){var r=t.username;return[n.error,n.errorType].includes("error-blocked-username")?ee("username",{type:"error-blocked-username",message:e("error-blocked-username",{field:r})}):[n.errorType].includes("error-field-unavailable")?ee("username",{type:"error-field-unavailable",message:e("error-field-unavailable",{field:r})}):[n.errorType].includes("")?ee("username",{type:"username-invalid",message:e("Username_invalid")}):void j({type:"error",message:n})}});return q.createElement(k,{background:W,logo:!H&&V?q.createElement(g,{is:"img",maxHeight:"x40",mi:"neg-x8",src:V,alt:"Logo"}):q.createElement(q.Fragment,null)},q.createElement(E,{"aria-labelledby":D,onSubmit:Y(function(e){return er.mutate(e)})},q.createElement(E.Header,null,q.createElement(E.Title,{id:D},e("Username_title")),q.createElement(E.Subtitle,null,e("Username_description"))),q.createElement(E.Container,null,!K&&q.createElement(c,null,q.createElement(m,null,q.createElement(f,{id:"username-label"},e("Username")),q.createElement(d,null,q.createElement(l,r({"aria-labelledby":"username-label"},X("username",{required:e("Username_cant_be_empty")})))),et.username&&q.createElement(b,null,q.createElement(B,{content:et.username.message})))),K&&e("Loading_suggestion"),q.createElement(h,{formName:"customFields",formControl:en,metadata:A})),q.createElement(E.Footer,null,q.createElement(i,{stretch:!0,vertical:!0,flexGrow:1},q.createElement(s,{disabled:K,type:"submit",primary:!0},e("Use_this_username")),q.createElement(s,{onClick:t},e("Logout"))))))})}
//# sourceMappingURL=/dynamic/client/views/root/MainLayout/7e6e63d2108b31108e3edb8e3df8b7879e21eaa4.map
