)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/MainLayout/UsernameCheck.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useUserId, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useCallback } from 'react';\n\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\nimport PasswordChangeCheck from './PasswordChangeCheck';\nimport RegisterUsername from './RegisterUsername';\n\nconst UsernameCheck = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst userId = useUserId();\n\tconst { data: userData, isLoading } = useUserInfoQuery({ userId: userId || '' });\n\n\tconst allowAnonymousRead = useSetting<boolean>('Accounts_AllowAnonymousRead') ?? false;\n\n\tconst shouldRegisterUsername = useReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tconst hasUserInCollection = !!userData?.user;\n\t\t\tconst hasUsername = !!userData?.user?.username;\n\n\t\t\tif (!userId) {\n\t\t\t\treturn !allowAnonymousRead;\n\t\t\t}\n\n\t\t\tif (!hasUserInCollection) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !hasUsername;\n\t\t}, [userData?.user, userId, allowAnonymousRead]),\n\t);\n\n\tif (!isLoading && shouldRegisterUsername) {\n\t\treturn <RegisterUsername />;\n\t}\n\n\treturn <PasswordChangeCheck>{children}</PasswordChangeCheck>;\n};\n\nexport default UsernameCheck;\n",null],"names":["useUserId","useSetting","React","useCallback","useReactiveValue","useUserInfoQuery","PasswordChangeCheck","RegisterUsername","module","link","v","exportDefault","_ref","_useSetting","children","userId","_useUserInfoQuery","userData","data","isLoading","allowAnonymousRead","shouldRegisterUsername","_userData$user","hasUserInCollection","user","hasUsername","username","createElement"],"mappings":"uBASA,IATAA,EAASC,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAAA,CAAAA,2BAAgC,CAACT,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAR,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAJ,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAH,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qBAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAjEC,EAAOG,aAAa,CASE,SAAAC,CAAA,EAAwD,IAAAC,EAArDC,EAAQF,EAARE,QAAQ,CAC1BC,EAASf,IACfgB,EAAsCX,EAAiB,CAAEU,OAAQA,GAAU,EAAE,GAA/DE,EAAQD,EAAdE,IAAI,CAAYC,EAASH,EAATG,SAAS,CAE3BC,EAAkB,AAAqD,OAArDP,CAAAA,EAAGZ,EAAoB,8BAA6B,GAACY,AAAA,KAAA,IAAAA,GAAAA,EAEvEQ,EAAyBjB,EAC9BD,EAAY,WACX,IADgBmB,EACVC,EAAsB,CAAC,CAACN,CAAAA,MAAAA,GAAAA,EAAUO,IAAI,AAAJA,EAClCC,EAAc,CAAC,CAACR,CAAAA,MAAAA,GAAQ,AAAM,OAANK,CAAAA,EAARL,EAAUO,IAAI,AAAJA,GAAIF,AAAA,KAAA,IAAAA,GAAdA,EAAgBI,QAAQ,AAARA,SAEtC,AAAKX,GAIAQ,GAIE,CAACE,EAPA,CAACL,CAQV,EAAG,CAACH,MAAAA,EAAQ,KAAA,EAARA,EAAUO,IAAI,CAAET,EAAQK,EAAmB,SAGhD,AAAI,CAACD,GAAaE,EACVnB,EAAAyB,aAAA,CAACpB,EAAgB,MAGlBL,EAAAyB,aAAA,CAACrB,EAAmB,KAAEQ,EAC9B"}