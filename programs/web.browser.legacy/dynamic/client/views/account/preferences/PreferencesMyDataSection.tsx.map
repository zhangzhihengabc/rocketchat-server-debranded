)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/preferences/PreferencesMyDataSection.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Accordion, Field, FieldGroup, FieldRow, ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useSetModal, useToastMessageDispatch, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport MyDataModal from './MyDataModal';\n\nconst PreferencesMyDataSection = () => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst requestDataDownload = useMethod('requestDataDownload');\n\n\tconst downloadData = useCallback(\n\t\tasync (fullExport) => {\n\t\t\ttry {\n\t\t\t\tconst result = await requestDataDownload({ fullExport });\n\t\t\t\tif (result.requested) {\n\t\t\t\t\tconst text = t('UserDataDownload_Requested_Text', {\n\t\t\t\t\t\tpending_operations: result.pendingOperationsBeforeMyRequest,\n\t\t\t\t\t});\n\t\t\t\t\tsetModal(\n\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.exportOperation) {\n\t\t\t\t\tif (result.exportOperation.status === 'completed') {\n\t\t\t\t\t\tconst text = result.url\n\t\t\t\t\t\t\t? t('UserDataDownload_CompletedRequestExistedWithLink_Text', {\n\t\t\t\t\t\t\t\t\tdownload_link: result.url,\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: t('UserDataDownload_CompletedRequestExisted_Text');\n\n\t\t\t\t\t\tsetModal(\n\t\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst text = t('UserDataDownload_RequestExisted_Text', {\n\t\t\t\t\t\tpending_operations: result.pendingOperationsBeforeMyRequest,\n\t\t\t\t\t});\n\t\t\t\t\tsetModal(\n\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetModal(<MyDataModal title={t('UserDataDownload_Requested')} onCancel={() => setModal(null)} />);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, requestDataDownload, setModal, t],\n\t);\n\n\tconst handleClickDownload = useCallback(() => downloadData(false), [downloadData]);\n\tconst handleClickExport = useCallback(() => downloadData(true), [downloadData]);\n\n\treturn (\n\t\t<Accordion.Item title={t('My Data')}>\n\t\t\t<FieldGroup>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<ButtonGroup stretch flexGrow={1}>\n\t\t\t\t\t\t\t<Button icon='download' onClick={handleClickDownload}>\n\t\t\t\t\t\t\t\t{t('Download_My_Data')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button icon='download' onClick={handleClickExport}>\n\t\t\t\t\t\t\t\t{t('Export_My_Data')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t</Accordion.Item>\n\t);\n};\n\nexport default PreferencesMyDataSection;\n",null],"names":["_regeneratorRuntime","Accordion","Field","FieldGroup","FieldRow","ButtonGroup","Button","Box","useSetModal","useToastMessageDispatch","useMethod","useTranslation","React","useCallback","MyDataModal","module","link","default","v","exportDefault","t","setModal","dispatchToastMessage","requestDataDownload","downloadData","fullExport","result","text","_text","_text2","async","_context","prev","next","awrap","sent","requested","pending_operations","pendingOperationsBeforeMyRequest","createElement","title","dangerouslySetInnerHTML","__html","onCancel","abrupt","exportOperation","status","url","download_link","t0","type","message","stop","Promise","handleClickDownload","handleClickExport","Item","stretch","flexGrow","icon","onClick"],"mappings":"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"}