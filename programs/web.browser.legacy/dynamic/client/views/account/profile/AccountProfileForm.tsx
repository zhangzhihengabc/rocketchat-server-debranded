function module(e,n,t){var r,a,i,l,s,u,o,c,m,d,f,v,E,b,h,g,x,p,k,_,T,y,C,w,S,F,U,A,q,M,N,P,D,G,R;t.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),t.link("@babel/runtime/regenerator",{default:function(e){i=e}},2),t.link("@rocket.chat/fuselage",{Field:function(e){l=e},FieldGroup:function(e){s=e},FieldLabel:function(e){u=e},FieldRow:function(e){o=e},FieldError:function(e){c=e},FieldHint:function(e){m=e},TextInput:function(e){d=e},TextAreaInput:function(e){f=e},Box:function(e){v=e},Icon:function(e){E=e},Button:function(e){b=e}},0),t.link("@rocket.chat/fuselage-hooks",{useUniqueId:function(e){h=e}},1),t.link("@rocket.chat/ui-client",{CustomFieldsForm:function(e){g=e}},2),t.link("@rocket.chat/ui-contexts",{useAccountsCustomFields:function(e){x=e},useToastMessageDispatch:function(e){p=e},useTranslation:function(e){k=e},useEndpoint:function(e){_=e},useUser:function(e){T=e},useMethod:function(e){y=e}},3),t.link("@tanstack/react-query",{useMutation:function(e){C=e}},4),t.link("react",{default:function(e){w=e},useCallback:function(e){S=e}},5),t.link("react-hook-form",{Controller:function(e){F=e},useFormContext:function(e){U=e}},6),t.link("../../../../lib/emailValidator",{validateEmail:function(e){A=e}},7),t.link("../../../../lib/getUserEmailAddress",{getUserEmailAddress:function(e){q=e}},8),t.link("../../../components/UserStatusMenu",{default:function(e){M=e}},9),t.link("../../../components/avatar/UserAvatarEditor",{default:function(e){N=e}},10),t.link("../../../hooks/useUpdateAvatar",{useUpdateAvatar:function(e){P=e}},11),t.link("../../../lib/constants",{USER_STATUS_TEXT_MAX_LENGTH:function(e){D=e},BIO_TEXT_MAX_LENGTH:function(e){G=e}},12),t.link("./useAccountProfileSettings",{useAccountProfileSettings:function(e){R=e}},13),t.exportDefault(function(e){var n,t,I,L,j=k(),z=T(),B=p(),X=_("GET","/v1/users.checkUsernameAvailability"),H=_("POST","/v1/users.sendConfirmationEmail"),O=x(),V=R(),J=V.allowRealNameChange,K=V.allowUserStatusMessageChange,Q=V.allowEmailChange,W=V.allowUserAvatarChange,Y=V.canChangeUsername,Z=V.requireName,$=V.namesRegex,ee=U(),en=ee.control,et=ee.watch,er=ee.handleSubmit,ea=ee.reset,ei=ee.formState.errors,el=et(),es=el.email,eu=el.avatar,eo=el.username,ec=z?q(z):"",em=(null==z?void 0:z.username)||"",ed=null!==(n=null==z?void 0:null===(t=z.emails)||void 0===t?void 0:null===(I=t[0])||void 0===I?void 0:I.verified)&&void 0!==n&&n,ef=C({mutationFn:H,onSuccess:function(){return B({type:"success",message:j("Verification_email_sent")})},onError:function(e){return B({type:"error",message:e})}}),ev=S(function(){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(es!==ec)){e.next=2;break}return e.abrupt("return");case 2:ef.mutateAsync({email:es});case 3:case"end":return e.stop()}},null,null,null,Promise)},[es,ec,ef]),eE=y("saveUserProfile"),eb=P(eu,(null==z?void 0:z._id)||""),eh=h(),eg=h(),ex=h(),ep=h(),ek=h(),e_=h();return w.createElement(v,r({},e,{is:"form",autoComplete:"off",onSubmit:er(function(e){var n,t,r,l,s,u,o,c;return i.async(function(m){for(;;)switch(m.prev=m.next){case 0:return n=e.email,t=e.name,r=e.username,l=e.statusType,s=e.statusText,u=e.nickname,o=e.bio,c=e.customFields,m.prev=1,m.next=4,i.awrap(eE(a(a({realname:t},z?q(z)!==n&&{email:n}:{}),{},{username:r,statusText:s,statusType:l,nickname:u,bio:o}),c));case 4:return m.next=6,i.awrap(eb());case 6:B({type:"success",message:j("Profile_saved_successfully")}),m.next=12;break;case 9:m.prev=9,m.t0=m.catch(1),B({type:"error",message:m.t0});case 12:return m.prev=12,ea({email:n,name:t,username:r,statusType:l,statusText:s,nickname:u,bio:o,customFields:c}),m.finish(12);case 15:case"end":return m.stop()}},null,null,[[1,9,12,15]],Promise)})}),w.createElement(s,null,w.createElement(l,null,w.createElement(F,{control:en,name:"avatar",render:function(e){var n=e.field.onChange;return w.createElement(N,{etag:null==z?void 0:z.avatarETag,currentUsername:null==z?void 0:z.username,username:eo,setAvatarObj:n,disabled:!W})}})),w.createElement(v,{display:"flex",flexDirection:"row",justifyContent:"space-between"},w.createElement(l,{mie:8,flexShrink:1},w.createElement(u,{required:!0,htmlFor:eh},j("Name")),w.createElement(o,null,w.createElement(F,{control:en,name:"name",rules:{validate:function(e){return!Z||""!==e||j("error-the-field-is-required",{field:j("Name")})}},render:function(e){var n,t=e.field;return w.createElement(d,r({},t,{id:eh,error:null===(n=ei.name)||void 0===n?void 0:n.message,disabled:!J,"aria-required":"true","aria-invalid":ei.username?"true":"false","aria-describedby":eh+"-error "+eh+"-hint"}))}})),ei.name&&w.createElement(c,{"aria-live":"assertive",id:eh+"-error"},ei.name.message),!J&&w.createElement(m,{id:eh+"-hint"},j("RealName_Change_Disabled"))),w.createElement(l,{mis:8,flexShrink:1},w.createElement(u,{required:!0,htmlFor:eg},j("Username")),w.createElement(o,null,w.createElement(F,{control:en,name:"username",rules:{required:j("error-the-field-is-required",{field:j("Username")}),validate:function(e){var n;return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(e!==em){n.next=4;break}return n.abrupt("return");case 4:if($.test(e)){n.next=6;break}return n.abrupt("return",j("error-invalid-username"));case 6:return n.next=8,i.awrap(X({username:e}));case 8:if(n.sent.result){n.next=12;break}return n.abrupt("return",j("Username_already_exist"));case 12:case"end":return n.stop()}},null,null,null,Promise)}},render:function(e){var n,t=e.field;return w.createElement(d,r({},t,{id:eg,disabled:!Y,error:null===(n=ei.username)||void 0===n?void 0:n.message,addon:w.createElement(E,{name:"at",size:"x20"}),"aria-required":"true","aria-invalid":ei.username?"true":"false","aria-describedby":eg+"-error "+eg+"-hint"}))}})),(null==ei?void 0:ei.username)&&w.createElement(c,{"aria-live":"assertive",id:eg+"-error"},ei.username.message),!Y&&w.createElement(m,{id:eg+"-hint"},j("Username_Change_Disabled")))),w.createElement(l,null,w.createElement(u,{htmlFor:ep},j("StatusMessage")),w.createElement(o,null,w.createElement(F,{control:en,name:"statusText",rules:{maxLength:{value:D,message:j("Max_length_is",D)}},render:function(e){var n,t=e.field;return w.createElement(d,r({},t,{id:ep,error:null==ei?void 0:null===(n=ei.statusText)||void 0===n?void 0:n.message,disabled:!K,flexGrow:1,placeholder:j("StatusMessage_Placeholder"),"aria-invalid":ei.statusText?"true":"false","aria-describedby":ep+"-error "+ep+"-hint",addon:w.createElement(F,{control:en,name:"statusType",render:function(e){var n=e.field,t=n.value,r=n.onChange;return w.createElement(M,{margin:"neg-x2",onChange:r,initialStatus:t})}})}))}})),(null==ei?void 0:ei.statusText)&&w.createElement(c,{"aria-live":"assertive",id:ep+"-error"},null==ei?void 0:ei.statusText.message),!K&&w.createElement(m,{id:ep+"-hint"},j("StatusMessage_Change_Disabled"))),w.createElement(l,null,w.createElement(u,{htmlFor:ex},j("Nickname")),w.createElement(o,null,w.createElement(F,{control:en,name:"nickname",render:function(e){var n=e.field;return w.createElement(d,r({},n,{id:ex,flexGrow:1,addon:w.createElement(E,{name:"edit",size:"x20",alignSelf:"center"})}))}}))),w.createElement(l,null,w.createElement(u,{htmlFor:ek},j("Bio")),w.createElement(o,null,w.createElement(F,{control:en,name:"bio",rules:{maxLength:{value:G,message:j("Max_length_is",G)}},render:function(e){var n,t=e.field;return w.createElement(f,r({},t,{id:ek,error:null===(n=ei.bio)||void 0===n?void 0:n.message,rows:3,flexGrow:1,addon:w.createElement(E,{name:"edit",size:"x20",alignSelf:"center"}),"aria-invalid":ei.statusText?"true":"false","aria-describedby":ek+"-error"}))}})),(null==ei?void 0:ei.bio)&&w.createElement(c,{"aria-live":"assertive",id:ek+"-error"},ei.bio.message)),w.createElement(l,null,w.createElement(u,{required:!0,htmlFor:e_},j("Email")),w.createElement(o,{display:"flex",flexDirection:"row",justifyContent:"space-between"},w.createElement(F,{control:en,name:"email",rules:{validate:{validateEmail:function(e){return A(e)?void 0:j("error-invalid-email-address")}}},render:function(e){var n,t=e.field;return w.createElement(d,r({},t,{id:e_,flexGrow:1,error:null===(n=ei.email)||void 0===n?void 0:n.message,addon:w.createElement(E,{name:ed?"circle-check":"mail",size:"x20"}),disabled:!Q,"aria-required":"true","aria-invalid":ei.email?"true":"false","aria-describedby":e_+"-error "+e_+"-hint"}))}}),!ed&&w.createElement(b,{disabled:es!==ec,onClick:ev,mis:24},j("Resend_verification_email"))),ei.email&&w.createElement(c,{"aria-live":"assertive",id:e_+"-error"},null==ei?void 0:null===(L=ei.email)||void 0===L?void 0:L.message),!Q&&w.createElement(m,{id:e_+"-hint"},j("Email_Change_Disabled"))),O&&w.createElement(g,{formName:"customFields",formControl:en,metadata:O})))})}
//# sourceMappingURL=/dynamic/client/views/account/profile/b516bacc61d052c9c7f7d937e055bff7dc3f93f5.map
