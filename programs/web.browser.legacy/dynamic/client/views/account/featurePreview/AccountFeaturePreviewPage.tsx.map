)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/featurePreview/AccountFeaturePreviewPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport {\n\tButtonGroup,\n\tButton,\n\tBox,\n\tToggleSwitch,\n\tStates,\n\tStatesIcon,\n\tStatesTitle,\n\tAccordion,\n\tField,\n\tFieldGroup,\n\tFieldLabel,\n\tFieldRow,\n\tFieldHint,\n} from '@rocket.chat/fuselage';\nimport type { FeaturePreviewProps } from '@rocket.chat/ui-client';\nimport { useFeaturePreviewList } from '@rocket.chat/ui-client';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent } from 'react';\nimport React, { useEffect, Fragment } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport Page from '../../../components/Page';\n\nconst AccountFeaturePreviewPage = () => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { features, unseenFeatures } = useFeaturePreviewList();\n\n\tconst setUserPreferences = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tuseEffect(() => {\n\t\tif (unseenFeatures) {\n\t\t\tconst featuresPreview = features.map((feature) => ({\n\t\t\t\tname: feature.name,\n\t\t\t\tvalue: feature.value,\n\t\t\t}));\n\n\t\t\tvoid setUserPreferences({ data: { featuresPreview } });\n\t\t}\n\t}, [setUserPreferences, features, unseenFeatures]);\n\n\tconst {\n\t\twatch,\n\t\tformState: { isDirty },\n\t\tsetValue,\n\t\thandleSubmit,\n\t\treset,\n\t} = useForm({\n\t\tdefaultValues: { featuresPreview: features },\n\t});\n\n\tconst { featuresPreview } = watch();\n\n\tconst handleSave = async () => {\n\t\ttry {\n\t\t\tawait setUserPreferences({ data: { featuresPreview } });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\treset({ featuresPreview });\n\t\t}\n\t};\n\n\tconst handleFeatures = (e: ChangeEvent<HTMLInputElement>) => {\n\t\tconst updated = featuresPreview.map((item) => (item.name === e.target.name ? { ...item, value: e.target.checked } : item));\n\t\tsetValue('featuresPreview', updated, { shouldDirty: true });\n\t};\n\n\tconst grouppedFeaturesPreview = Object.entries(\n\t\tfeaturesPreview.reduce((result, currentValue) => {\n\t\t\t(result[currentValue.group] = result[currentValue.group] || []).push(currentValue);\n\t\t\treturn result;\n\t\t}, {} as Record<FeaturePreviewProps['group'], FeaturePreviewProps[]>),\n\t);\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Feature_preview')} />\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t{featuresPreview.length === 0 && (\n\t\t\t\t\t\t<States>\n\t\t\t\t\t\t\t<StatesIcon name='magnifier' />\n\t\t\t\t\t\t\t<StatesTitle>{t('No_feature_to_preview')}</StatesTitle>\n\t\t\t\t\t\t</States>\n\t\t\t\t\t)}\n\t\t\t\t\t{featuresPreview.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tclassName={css`\n\t\t\t\t\t\t\t\t\twhite-space: break-spaces;\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\tpbe={24}\n\t\t\t\t\t\t\t\tfontScale='p1'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('Feature_preview_page_description')}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t\t\t{grouppedFeaturesPreview?.map(([group, features], index) => (\n\t\t\t\t\t\t\t\t\t<Accordion.Item defaultExpanded={index === 0} key={group} title={t(group as TranslationKey)}>\n\t\t\t\t\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t\t\t\t\t{features.map((feature) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Fragment key={feature.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='spaceBetween' flexGrow={1}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor={feature.name}>{t(feature.i18n)}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleSwitch id={feature.name} checked={feature.value} name={feature.name} onChange={handleFeatures} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{feature.description && <FieldHint mbs={12}>{t(feature.description)}</FieldHint>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{feature.imageUrl && <Box is='img' width='100%' height='auto' mbs={16} src={feature.imageUrl} alt='' />}\n\t\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t<Page.Footer isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={() => reset({ featuresPreview: features })}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!isDirty} onClick={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Footer>\n\t\t</Page>\n\t);\n};\n\nexport default AccountFeaturePreviewPage;\n",null],"names":["_slicedToArray","_taggedTemplateLiteralLoose","_objectSpread","_regeneratorRuntime","css","ButtonGroup","Button","Box","ToggleSwitch","States","StatesIcon","StatesTitle","Accordion","Field","FieldGroup","FieldLabel","FieldRow","FieldHint","useFeaturePreviewList","useToastMessageDispatch","useTranslation","useEndpoint","React","useEffect","Fragment","useForm","Page","module","link","default","v","exportDefault","t","dispatchToastMessage","_useFeaturePreviewLis","features","unseenFeatures","setUserPreferences","data","featuresPreview","map","feature","name","value","_useForm","defaultValues","watch","isDirty","formState","setValue","handleSubmit","reset","_watch","handleFeatures","e","item","target","checked","shouldDirty","grouppedFeaturesPreview","Object","entries","reduce","result","currentValue","group","push","createElement","Header","title","ScrollableContentWithShadow","maxWidth","w","alignSelf","length","className","_templateObject","pbe","fontScale","_ref","index","_ref2","Item","defaultExpanded","key","display","flexDirection","justifyContent","flexGrow","htmlFor","i18n","id","onChange","description","mbs","imageUrl","is","width","height","src","alt","Footer","onClick","primary","disabled","async","_context","prev","next","awrap","type","message","t0","finish","stop","Promise"],"mappings":"uBA0BA,MA1BAA,EAA6CC,EAAAC,EAAAC,EAA7CC,EAA6CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA/BC,EAAMC,IAAA,CAAA,uCAAyB,CAAAC,QAAAA,SAAAA,CAAAA,EAAA7B,EAAAA,CAAA,CAAA,EAAA,GAAA2B,EAAAA,IAAAA,CAAAA,oDAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA5B,EAAAA,CAAA,CAAA,EAAA,GAAA0B,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA3B,EAAAA,CAAA,CAAA,EAAA,GAAAyB,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAA1B,EAAAA,CAAA,CAAA,EAAA,GAAtCwB,EAAOC,IAAA,CAAM,yBAAyB,CAAAxB,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAuB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAtB,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAT,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAF,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,2BAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA7CC,EAAOI,aAAa,CA0Bc,WACjC,IAAMC,EAAIZ,IACJa,EAAuBd,IAC7Be,EAAqChB,IAA7BiB,EAAQD,EAARC,QAAQ,CAAEC,EAAcF,EAAdE,cAAc,CAE1BC,EAAqBhB,EAAY,OAAQ,4BAE/CE,EAAU,WACLa,GAMEC,EAAmB,CAAEC,KAAM,CAAEC,gBALVJ,EAASK,GAAG,CAAC,SAACC,CAAO,EAAA,MAAM,CAClDC,KAAMD,EAAQC,IAAI,CAClBC,MAAOF,EAAQE,KAAAA,CACf,EAEgD,CAAE,EAErD,EAAG,CAACN,EAAoBF,EAAUC,EAAe,EAEjD,IAAAQ,EAMInB,EAAQ,CACXoB,cAAe,CAAEN,gBAAiBJ,CAAQ,IAN1CW,EAAKF,EAALE,KAAK,CACQC,EAAOH,EAApBI,SAAS,CAAID,OAAO,CACpBE,EAAQL,EAARK,QAAQ,CACRC,EAAYN,EAAZM,YAAY,CACZC,EAAKP,EAALO,KAAK,CAKEZ,EAAea,AAAKN,IAApBP,eAAe,CAajBc,EAAiB,SAACC,CAAgC,EAEvDL,EAAS,kBADOV,EAAgBC,GAAG,CAAC,SAACe,CAAI,EAAA,OAAMA,EAAKb,IAAI,GAAKY,EAAEE,MAAM,CAACd,IAAI,CAAAxC,EAAAA,EAAA,CAAA,EAAQqD,GAAI,CAAA,EAAA,CAAEZ,MAAOW,EAAEE,MAAM,CAACC,OAAAA,AAAO,GAAKF,CAAI,GACnF,CAAEG,YAAa,CAAA,CAAI,EACzD,EAEMC,EAA0BC,OAAOC,OAAO,CAC7CtB,EAAgBuB,MAAM,CAAC,SAACC,CAAM,CAAEC,CAAY,EAE3C,MADA,AAACD,CAAAA,CAAM,CAACC,EAAaC,KAAK,CAAC,CAAGF,CAAM,CAACC,EAAaC,KAAK,CAAC,EAAI,EAAE,AAAF,EAAIC,IAAI,CAACF,GAC9DD,CACR,EAAG,CAAA,IAGJ,OACCzC,EAAA6C,aAAA,CAACzC,EAAI,KACJJ,EAAA6C,aAAA,CAACzC,EAAK0C,MAAM,CAAA,CAACC,MAAOrC,EAAE,kBAAmB,GACzCV,EAAA6C,aAAA,CAACzC,EAAK4C,2BAA2B,CAAA,KAChChD,EAAA6C,aAAA,CAAC5D,EAAG,CAACgE,SAAS,OAAOC,EAAE,OAAOC,UAAU,QAAQ,EAC9ClC,AAA2B,IAA3BA,EAAgBmC,MAAM,EACtBpD,EAAA6C,aAAA,CAAC1D,EAAM,KACNa,EAAA6C,aAAA,CAACzD,EAAU,CAACgC,KAAK,WAAW,GAC5BpB,EAAA6C,aAAA,CAACxD,EAAW,KAAEqB,EAAE,2BAGjBO,EAAgBmC,MAAM,CAAG,GACzBpD,EAAA6C,aAAA,CAAA7C,EAAAE,QAAA,CAAA,KACCF,EAAA6C,aAAA,CAAC5D,EAAG,CACHoE,UAAWvE,EAAGwE,GAAAA,CAAAA,EAAA3E,EAAA,CAAA,kDAAA,CAAA,GAGd4E,IAAK,GACLC,UAAU,IAAI,EAEb9C,EAAE,qCAEJV,EAAA6C,aAAA,CAACvD,EAAS,KACR+C,MAAAA,EAAuB,KAAA,EAAvBA,EAAyBnB,GAAG,CAAC,SAAAuC,CAAA,CAAoBC,CAAK,EAAA,IAAAC,EAAAjF,EAAA+E,EAAA,GAAvBd,EAAKgB,CAAA,CAAA,EAAA,CAAE9C,EAAQ8C,CAAA,CAAA,EAAA,CAAA,OAC9C3D,EAAA6C,aAAA,CAACvD,EAAUsE,IAAI,CAAA,CAACC,gBAAiBH,AAAU,IAAVA,EAAaI,IAAKnB,EAAOI,MAAOrC,EAAEiC,EAAyB,EAC3F3C,EAAA6C,aAAA,CAACrD,EAAU,KACTqB,EAASK,GAAG,CAAC,SAACC,CAAO,EAAA,OACrBnB,EAAA6C,aAAA,CAAC3C,EAAQ,CAAC4D,IAAK3C,EAAQC,IAAAA,AAAK,EAC3BpB,EAAA6C,aAAA,CAACtD,EAAK,KACLS,EAAA6C,aAAA,CAAC5D,EAAG,CAAC8E,QAAQ,OAAOC,cAAc,MAAMC,eAAe,eAAeC,SAAU,CAAE,EACjFlE,EAAA6C,aAAA,CAACpD,EAAU,CAAC0E,QAAShD,EAAQC,IAAAA,AAAK,EAAEV,EAAES,EAAQiD,IAAI,GAClDpE,EAAA6C,aAAA,CAACnD,EAAQ,KACRM,EAAA6C,aAAA,CAAC3D,EAAY,CAACmF,GAAIlD,EAAQC,IAAK,CAACe,QAAShB,EAAQE,KAAM,CAACD,KAAMD,EAAQC,IAAK,CAACkD,SAAUvC,CAAe,KAGtGZ,EAAQoD,WAAW,EAAIvE,EAAA6C,aAAA,CAAClD,EAAS,CAAC6E,IAAK,EAAG,EAAE9D,EAAES,EAAQoD,WAAW,IAElEpD,EAAQsD,QAAQ,EAAIzE,EAAA6C,aAAA,CAAC5D,EAAG,CAACyF,GAAG,MAAMC,MAAM,OAAOC,OAAO,OAAOJ,IAAK,GAAIK,IAAK1D,EAAQsD,QAAS,CAACK,IAAI,EAAE,GAC1F,IAGG,OAOvB9E,EAAA6C,aAAA,CAACzC,EAAK2E,MAAM,CAAA,CAACtD,QAASA,CAAQ,EAC7BzB,EAAA6C,aAAA,CAAC9D,EAAW,KACXiB,EAAA6C,aAAA,CAAC7D,EAAM,CAACgG,QAAS,WAAA,OAAMnD,EAAM,CAAEZ,gBAAiBJ,CAAQ,EAAG,CAAC,EAAEH,EAAE,WAChEV,EAAA6C,aAAA,CAAC7D,EAAM,CAACiG,QAAO,CAAA,EAACC,SAAU,CAACzD,EAASuD,QAASpD,EA1E9B,WAAA,OAAA/C,EAAAsG,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAzG,EAAA0G,KAAA,CAEXxE,EAAmB,CAAEC,KAAM,CAAEC,gBAAAA,CAAe,CAAE,GAAG,MAAA,EACvDN,EAAqB,CAAE6E,KAAM,UAAWC,QAAS/E,EAAE,oBAAoB,GAAI0E,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAE3EzE,EAAqB,CAAE6E,KAAM,QAASC,QAAOL,EAAAM,EAAA,AAAO,EAAI,MAAA,EAE7B,OAF6BN,EAAAC,IAAA,CAAA,EAExDxD,EAAM,CAAEZ,gBAAAA,CAAe,GAAImE,EAAAO,MAAA,CAAA,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAmE6C,EACpEnF,EAAE,mBAMT"}