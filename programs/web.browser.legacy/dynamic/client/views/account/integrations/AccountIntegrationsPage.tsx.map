)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/integrations/AccountIntegrationsPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWebdavAccountIntegration } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { SelectLegacy, Box, Button, Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { WebdavAccounts } from '../../../../app/models/client';\nimport Page from '../../../components/Page';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { getWebdavServerName } from '../../../lib/getWebdavServerName';\n\nconst getWebdavAccounts = (): IWebdavAccountIntegration[] => WebdavAccounts.find().fetch();\n\nconst AccountIntegrationsPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst { handleSubmit, control } = useForm();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst accounts = useReactiveValue(getWebdavAccounts);\n\tconst removeWebdavAccount = useEndpoint('POST', '/v1/webdav.removeWebdavAccount');\n\n\tconst options: SelectOption[] = useMemo(() => accounts?.map(({ _id, ...current }) => [_id, getWebdavServerName(current)]), [accounts]);\n\n\tconst handleClickRemove = useMutableCallback(({ accountSelected }) => {\n\t\ttry {\n\t\t\tremoveWebdavAccount({ accountId: accountSelected });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Webdav_account_removed') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as Error });\n\t\t}\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Integrations')} />\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('WebDAV_Accounts')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='accountSelected'\n\t\t\t\t\t\t\t\trender={({ field: { onChange, value, name, ref } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<SelectLegacy\n\t\t\t\t\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button danger onClick={handleSubmit(handleClickRemove)}>\n\t\t\t\t\t\t\t\t{t('Remove')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default AccountIntegrationsPage;\n",null],"names":["_objectWithoutProperties","SelectLegacy","Box","Button","Field","FieldLabel","FieldRow","useMutableCallback","useEndpoint","useToastMessageDispatch","useTranslation","React","useMemo","useForm","Controller","WebdavAccounts","Page","useReactiveValue","getWebdavServerName","module","link","default","v","getWebdavAccounts","find","fetch","exportDefault","t","_useForm","handleSubmit","control","dispatchToastMessage","accounts","removeWebdavAccount","options","map","_ref","_id","_excluded","handleClickRemove","_ref2","accountSelected","accountId","type","message","error","createElement","Header","title","ScrollableContentWithShadow","maxWidth","w","alignSelf","name","render","_ref3","_ref3$field","field","onChange","value","ref","placeholder","danger","onClick"],"mappings":"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"}