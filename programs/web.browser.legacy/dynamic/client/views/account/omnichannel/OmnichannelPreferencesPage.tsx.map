)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/omnichannel/OmnichannelPreferencesPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ButtonGroup, Button, Box, Accordion } from '@rocket.chat/fuselage';\nimport { useToastMessageDispatch, useTranslation, useEndpoint, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\nimport { useForm, FormProvider } from 'react-hook-form';\n\nimport Page from '../../../components/Page';\nimport PreferencesConversationTranscript from './PreferencesConversationTranscript';\nimport { PreferencesGeneral } from './PreferencesGeneral';\n\ntype FormData = {\n\tomnichannelTranscriptPDF: boolean;\n\tomnichannelTranscriptEmail: boolean;\n};\n\nconst OmnichannelPreferencesPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst omnichannelTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst omnichannelTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst omnichannelHideConversationAfterClosing = useUserPreference<boolean>('omnichannelHideConversationAfterClosing') ?? true;\n\n\tconst methods = useForm({\n\t\tdefaultValues: { omnichannelTranscriptPDF, omnichannelTranscriptEmail, omnichannelHideConversationAfterClosing },\n\t});\n\n\tconst {\n\t\thandleSubmit,\n\t\tformState: { isDirty },\n\t\treset,\n\t} = methods;\n\n\tconst saveFn = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tconst handleSave = async (data: FormData) => {\n\t\ttry {\n\t\t\tawait saveFn({ data });\n\t\t\treset(data);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Omnichannel')} />\n\t\t\t<Page.ScrollableContentWithShadow is='form' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t\t\t<PreferencesGeneral />\n\t\t\t\t\t\t\t<PreferencesConversationTranscript />\n\t\t\t\t\t\t</FormProvider>\n\t\t\t\t\t</Accordion>\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t<Page.Footer isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={() => reset({ omnichannelTranscriptPDF, omnichannelTranscriptEmail })}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!isDirty} onClick={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Footer>\n\t\t</Page>\n\t);\n};\n\nexport default OmnichannelPreferencesPage;\n",null],"names":["_regeneratorRuntime","ButtonGroup","Button","Box","Accordion","useToastMessageDispatch","useTranslation","useEndpoint","useUserPreference","React","useForm","FormProvider","Page","PreferencesConversationTranscript","PreferencesGeneral","module","link","default","v","exportDefault","_useUserPreference","_useUserPreference2","_useUserPreference3","t","dispatchToastMessage","omnichannelTranscriptPDF","omnichannelTranscriptEmail","methods","defaultValues","omnichannelHideConversationAfterClosing","handleSubmit","isDirty","formState","reset","saveFn","handleSave","data","async","_context","prev","next","awrap","type","message","t0","stop","Promise","createElement","Header","title","ScrollableContentWithShadow","is","onSubmit","maxWidth","w","alignSelf","Footer","onClick","primary","disabled"],"mappings":"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"}