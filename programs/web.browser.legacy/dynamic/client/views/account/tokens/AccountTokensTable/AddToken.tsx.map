)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/tokens/AccountTokensTable/AddToken.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, FieldLabel, FieldRow, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useUserId, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport GenericModal from '../../../../components/GenericModal';\n\nconst AddToken = ({ reload, ...props }: { reload: () => void }): ReactElement => {\n\tconst t = useTranslation();\n\tconst userId = useUserId();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\tconst setModal = useSetModal();\n\n\tconst initialValues = useMemo(() => ({ name: '', bypassTwoFactor: false }), []);\n\n\tconst {\n\t\tregister,\n\t\tresetField,\n\t\thandleSubmit,\n\t\tformState: { isDirty, isSubmitted, submitCount },\n\t} = useForm({ defaultValues: initialValues });\n\n\tconst handleAddToken = useCallback(\n\t\tasync ({ name: tokenName, bypassTwoFactor }: typeof initialValues) => {\n\t\t\ttry {\n\t\t\t\tconst token = await createTokenFn({ tokenName, bypassTwoFactor });\n\n\t\t\t\tsetModal(\n\t\t\t\t\t<GenericModal title={t('API_Personal_Access_Token_Generated')} onConfirm={() => setModal(null)} onClose={() => setModal(null)}>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</GenericModal>,\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[createTokenFn, dispatchToastMessage, setModal, t, userId],\n\t);\n\n\tuseEffect(() => {\n\t\tresetField('name');\n\t\treload();\n\t}, [isSubmitted, submitCount, reload, resetField]);\n\n\treturn (\n\t\t<FieldGroup is='form' onSubmit={handleSubmit(handleAddToken)} marginBlock={8} {...props}>\n\t\t\t<Field>\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<Margins inlineEnd={4}>\n\t\t\t\t\t\t<TextInput data-qa='PersonalTokenField' {...register('name')} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={!isDirty} type='submit'>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FieldRow>\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} {...register('bypassTwoFactor')} />\n\t\t\t\t\t<FieldLabel htmlFor={bypassTwoFactorCheckboxId}>{t('Ignore_Two_Factor_Authentication')}</FieldLabel>\n\t\t\t\t</FieldRow>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","FieldLabel","FieldRow","Margins","CheckBox","useUniqueId","useSetModal","useToastMessageDispatch","useUserId","useMethod","useTranslation","React","useCallback","useMemo","useEffect","useForm","GenericModal","module","link","default","v","exportDefault","_ref","reload","props","_excluded","t","userId","createTokenFn","dispatchToastMessage","bypassTwoFactorCheckboxId","setModal","_useForm","defaultValues","name","bypassTwoFactor","register","resetField","handleSubmit","_useForm$formState","formState","isDirty","isSubmitted","submitCount","handleAddToken","_ref2","tokenName","token","async","_context","prev","next","awrap","sent","createElement","title","onConfirm","onClose","dangerouslySetInnerHTML","__html","t0","type","message","stop","Promise","is","onSubmit","marginBlock","inlineEnd","placeholder","primary","disabled","id","htmlFor"],"mappings":"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"}