function module(e,t,n){var r,a,c,o,l,u,s,i,f,d,m,p,k,h,_,v,x,b,E,g,y,w;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){c=e}},2),n.link("@rocket.chat/fuselage",{Box:function(e){o=e},Button:function(e){l=e},TextInput:function(e){u=e},Margins:function(e){s=e}},0),n.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){i=e}},1),n.link("@rocket.chat/ui-contexts",{useSetModal:function(e){f=e},useToastMessageDispatch:function(e){d=e},useUser:function(e){m=e},useMethod:function(e){p=e},useTranslation:function(e){k=e}},2),n.link("react",{default:function(e){h=e},useState:function(e){_=e},useCallback:function(e){v=e},useEffect:function(e){x=e}},3),n.link("react-hook-form",{useForm:function(e){b=e}},4),n.link("yaqrcode",{default:function(e){E=e}},5),n.link("../../../components/TextCopy",{default:function(e){g=e}},6),n.link("../../../components/TwoFactorModal/TwoFactorTotpModal",{default:function(e){y=e}},7),n.link("./BackupCodesModal",{default:function(e){w=e}},8),n.exportDefault(function(e){var t,n,C=k(),T=d(),S=m(),M=f(),F=p("2fa:enable"),P=p("2fa:disable"),D=p("2fa:validateTempToken"),I=p("2fa:checkCodesRemaining"),B=p("2fa:regenerateCodes"),R=c(i(_(!1)),2),z=R[0],Q=R[1],V=c(i(_()),2),q=V[0],A=V[1],U=c(i(_()),2),Y=U[0],j=U[1],G=c(i(_(0)),2),H=G[0],J=G[1],K=b({defaultValues:{authCode:""}}),L=K.register,N=K.handleSubmit,O=null==S?void 0:null===(t=S.services)||void 0===t?void 0:null===(n=t.totp)||void 0===n?void 0:n.enabled,W=v(function(){return M(null)},[M]);x(function(){r.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,r.awrap(I());case 4:J(e.sent.remaining);case 6:case"end":return e.stop()}},null,null,null,Promise)},[I,J,O]);var X=v(function(){var e;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(F());case 3:j((e=t.sent).secret),A(E(e.url,{size:200})),Q(!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),T({type:"error",message:t.t0});case 12:case"end":return t.stop()}},null,null,[[0,9]],Promise)},[T,F,A,Q,j]),Z=v(function(){var e;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=function e(e){return r.async(function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(P(e));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",T({type:"error",message:C("Invalid_two_factor_code")}));case 6:T({type:"success",message:C("Two-factor_authentication_disabled")}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),T({type:"error",message:t.t0});case 12:W();case 13:case"end":return t.stop()}},null,null,[[0,9]],Promise)},M(h.createElement(y,{onConfirm:e,onClose:W}));case 2:case"end":return t.stop()}},null,null,null,Promise)},[W,P,T,M,C]),$=v(function(e){var t,n;return r.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.authCode,a.prev=1,a.next=4,r.awrap(D(t));case 4:if(n=a.sent){a.next=7;break}return a.abrupt("return",T({type:"error",message:C("Invalid_two_factor_code")}));case 7:M(h.createElement(w,{codes:n.codes,onClose:W})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),T({type:"error",message:a.t0});case 13:case"end":return a.stop()}},null,null,[[1,10]],Promise)},[W,T,M,C,D]),ee=v(function(){M(h.createElement(y,{onConfirm:function(e){var t;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.awrap(B(e));case 3:if(t=n.sent){n.next=6;break}return n.abrupt("return",T({type:"error",message:C("Invalid_two_factor_code")}));case 6:M(h.createElement(w,{codes:t.codes,onClose:W})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),T({type:"error",message:n.t0});case 12:case"end":return n.stop()}},null,null,[[0,9]],Promise)},onClose:W}))},[W,T,B,M,C]);return h.createElement(o,a({display:"flex",flexDirection:"column",alignItems:"flex-start"},e),h.createElement(s,{blockEnd:8},h.createElement(o,{fontScale:"h4"},C("Two-factor_authentication")),!O&&!z&&h.createElement(h.Fragment,null,h.createElement(o,null,C("Two-factor_authentication_is_currently_disabled")),h.createElement(l,{primary:!0,onClick:X},C("Enable_two-factor_authentication"))),!O&&z&&h.createElement(h.Fragment,null,h.createElement(o,null,C("Scan_QR_code")),h.createElement(o,null,C("Scan_QR_code_alternative_s")),h.createElement(g,{text:Y||""}),h.createElement(o,{is:"img",size:"x200",src:q,"aria-hidden":"true"}),h.createElement(o,{display:"flex",flexDirection:"row",w:"full"},h.createElement(u,a({placeholder:C("Enter_authentication_code")},L("authCode"))),h.createElement(l,{primary:!0,onClick:N($)},C("Verify")))),O&&h.createElement(h.Fragment,null,h.createElement(l,{danger:!0,onClick:Z},C("Disable_two-factor_authentication")),h.createElement(o,{fontScale:"p2m",mbs:8},C("Backup_codes")),h.createElement(o,null,C("You_have_n_codes_remaining",{number:H})),h.createElement(l,{onClick:ee},C("Regenerate_codes")))))})}
//# sourceMappingURL=/dynamic/client/views/account/security/67e2872717cae0b8d3fff32621d015d8e7dfa60d.map
