)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/home/cards/CustomContentCard.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button, Icon, Tag } from '@rocket.chat/fuselage';\nimport { Card, CardFooter, CardFooterWrapper } from '@rocket.chat/ui-client';\nimport { useRole, useSettingSetValue, useSetting, useToastMessageDispatch, useTranslation, useRoute } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport CustomHomepageContent from '../CustomHomePageContent';\n\nconst CustomContentCard = (): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { data } = useIsEnterprise();\n\tconst isAdmin = useRole('admin');\n\tconst customContentBody = String(useSetting('Layout_Home_Body'));\n\tconst isCustomContentBodyEmpty = customContentBody === '';\n\tconst isCustomContentVisible = Boolean(useSetting('Layout_Home_Custom_Block_Visible'));\n\tconst isCustomContentOnly = Boolean(useSetting('Layout_Custom_Body_Only'));\n\n\tconst settingsRoute = useRoute('admin-settings');\n\n\tconst setCustomContentVisible = useSettingSetValue('Layout_Home_Custom_Block_Visible');\n\tconst setCustomContentOnly = useSettingSetValue('Layout_Custom_Body_Only');\n\n\tconst handleChangeCustomContentVisibility = async () => {\n\t\ttry {\n\t\t\tawait setCustomContentVisible(!isCustomContentVisible);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleOnlyShowCustomContent = async () => {\n\t\ttry {\n\t\t\tawait setCustomContentOnly(!isCustomContentOnly);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst isEnterprise = data?.isEnterprise;\n\tconst willNotShowCustomContent = isCustomContentBodyEmpty || !isCustomContentVisible;\n\n\tconst userVisibilityTooltipText = isCustomContentVisible ? t('Now_Its_Visible_For_Everyone') : t('Now_Its_Visible_Only_For_Admins');\n\n\tlet customContentOnlyTooltipText = t('It_Will_Hide_All_Other_Content_Blocks_In_The_Homepage');\n\tif (willNotShowCustomContent) {\n\t\tcustomContentOnlyTooltipText = t('Action_Available_After_Custom_Content_Added_And_Visible');\n\t} else if (isCustomContentOnly) {\n\t\tcustomContentOnlyTooltipText = t('It_Will_Show_All_Other_Content_Blocks_In_The_Homepage');\n\t}\n\n\tif (isAdmin) {\n\t\treturn (\n\t\t\t<Card data-qa-id='homepage-custom-card'>\n\t\t\t\t<Box display='flex' mbe={12}>\n\t\t\t\t\t<Tag role='status' aria-label={willNotShowCustomContent ? t('Not_Visible_To_Workspace') : t('Visible_To_Workspace')}>\n\t\t\t\t\t\t<Icon mie={4} name={willNotShowCustomContent ? 'eye-off' : 'eye'} size='x12' />\n\t\t\t\t\t\t{willNotShowCustomContent ? t('Not_Visible_To_Workspace') : t('Visible_To_Workspace')}\n\t\t\t\t\t</Tag>\n\t\t\t\t</Box>\n\t\t\t\t<Box mb={8} role='status' aria-label={isCustomContentBodyEmpty ? t('Homepage_Custom_Content_Default_Message') : customContentBody}>\n\t\t\t\t\t{isCustomContentBodyEmpty ? t('Homepage_Custom_Content_Default_Message') : <CustomHomepageContent />}\n\t\t\t\t</Box>\n\t\t\t\t<CardFooterWrapper>\n\t\t\t\t\t<CardFooter>\n\t\t\t\t\t\t<Button onClick={() => settingsRoute.push({ group: 'Layout' })} title={t('Layout_Home_Page_Content')}>\n\t\t\t\t\t\t\t{t('Customize_Content')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={willNotShowCustomContent ? 'eye' : 'eye-off'}\n\t\t\t\t\t\t\tdisabled={isCustomContentBodyEmpty || (isCustomContentVisible && isCustomContentOnly)}\n\t\t\t\t\t\t\ttitle={isCustomContentBodyEmpty ? t('Action_Available_After_Custom_Content_Added') : userVisibilityTooltipText}\n\t\t\t\t\t\t\tonClick={handleChangeCustomContentVisibility}\n\t\t\t\t\t\t\trole='button'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{willNotShowCustomContent ? t('Show_To_Workspace') : t('Hide_On_Workspace')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon='lightning'\n\t\t\t\t\t\t\tdisabled={willNotShowCustomContent || !isEnterprise}\n\t\t\t\t\t\t\ttitle={!isEnterprise ? t('Premium_only') : customContentOnlyTooltipText}\n\t\t\t\t\t\t\tonClick={handleOnlyShowCustomContent}\n\t\t\t\t\t\t\trole='button'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!isCustomContentOnly ? t('Show_Only_This_Content') : t('Show_default_content')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</CardFooter>\n\t\t\t\t</CardFooterWrapper>\n\t\t\t</Card>\n\t\t);\n\t}\n\n\tif (!willNotShowCustomContent && !isCustomContentOnly) {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<Box mb={8}>\n\t\t\t\t\t<CustomHomepageContent role='status' aria-label={customContentBody} />\n\t\t\t\t</Box>\n\t\t\t</Card>\n\t\t);\n\t}\n\treturn <CustomHomepageContent role='status' aria-label={customContentBody} />;\n};\n\nexport default CustomContentCard;\n",null],"names":["_regeneratorRuntime","Box","Button","Icon","Tag","Card","CardFooter","CardFooterWrapper","useRole","useSettingSetValue","useSetting","useToastMessageDispatch","useTranslation","useRoute","React","useIsEnterprise","CustomHomepageContent","module","link","default","v","exportDefault","t","dispatchToastMessage","data","_useIsEnterprise","isAdmin","customContentBody","String","isCustomContentBodyEmpty","isCustomContentVisible","Boolean","isCustomContentOnly","settingsRoute","setCustomContentVisible","setCustomContentOnly","isEnterprise","willNotShowCustomContent","userVisibilityTooltipText","customContentOnlyTooltipText","createElement","display","mbe","role","mie","name","size","mb","onClick","push","group","title","icon","disabled","async","_context","prev","next","awrap","t0","type","message","stop","Promise","_context2"],"mappings":"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"}