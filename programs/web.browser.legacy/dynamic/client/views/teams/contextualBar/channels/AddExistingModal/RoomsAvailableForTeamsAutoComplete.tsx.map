)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/AddExistingModal/RoomsAvailableForTeamsAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Box, Option, Options, Chip } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport RoomAvatar from '../../../../../components/avatar/RoomAvatar';\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\n\ntype RoomsAvailableForTeamsAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst RoomsAvailableForTeamsAutoComplete = ({ value, onChange, ...props }: RoomsAvailableForTeamsAutoCompleteProps) => {\n\tconst [filter, setFilter] = useState('');\n\tconst debouncedFilter = useDebouncedValue(filter, 1000);\n\n\tconst roomsAvailableForTeamsAutoCompleteEndpoint = useEndpoint('GET', '/v1/rooms.autocomplete.availableForTeams');\n\n\tconst { data } = useQuery(\n\t\t['roomsAvailableForTeamsAutoComplete', debouncedFilter],\n\t\tasync () => roomsAvailableForTeamsAutoCompleteEndpoint({ name: debouncedFilter }),\n\t\t{ keepPreviousData: true },\n\t);\n\n\tconst options = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn data.items.map((room) => ({\n\t\t\tvalue: room._id,\n\t\t\tlabel: {\n\t\t\t\tname: roomCoordinator.getRoomName(room.t, { _id: room._id, name: room.name, fname: room.fname, prid: room.prid }),\n\t\t\t\ttype: room.t,\n\t\t\t\tavatarETag: room.avatarETag,\n\t\t\t},\n\t\t}));\n\t}, [data]);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tmultiple\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { value, label }, onRemove }) => (\n\t\t\t\t<Chip key={value} height='x20' value={value} onClick={onRemove} mb={2} mie={4}>\n\t\t\t\t\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />\n\t\t\t\t\t<Box is='span' margin='none' mis={4}>\n\t\t\t\t\t\t{label.name}\n\t\t\t\t\t</Box>\n\t\t\t\t</Chip>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option\n\t\t\t\t\tkey={value}\n\t\t\t\t\t{...props}\n\t\t\t\t\tlabel={label.name}\n\t\t\t\t\tavatar={<RoomAvatar room={{ _id: value, type: label.type, avatarETag: label.avatarETag }} size={Options.AvatarSize} />}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomsAvailableForTeamsAutoComplete);\n",null],"names":["_regeneratorRuntime","_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","AutoComplete","Box","Option","Options","Chip","useDebouncedValue","useEndpoint","useQuery","React","memo","useMemo","useState","RoomAvatar","roomCoordinator","module","link","default","v","exportDefault","_ref","value","onChange","props","_excluded","_useState2","filter","setFilter","debouncedFilter","roomsAvailableForTeamsAutoCompleteEndpoint","data","_useQuery","async","_context","prev","next","abrupt","name","stop","Promise","keepPreviousData","options","items","map","room","_id","label","getRoomName","t","fname","prid","type","avatarETag","createElement","multiple","renderSelected","_ref2","_ref2$selected","selected","onRemove","key","height","onClick","mb","mie","size","is","margin","mis","renderItem","_ref3","_excluded2","avatar","AvatarSize"],"mappings":"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"}