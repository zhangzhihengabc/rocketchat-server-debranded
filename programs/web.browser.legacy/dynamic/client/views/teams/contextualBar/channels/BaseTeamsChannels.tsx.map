)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/BaseTeamsChannels.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Box, Icon, TextInput, Margins, Select, Throbber, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useAutoFocus, useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent, Dispatch, SetStateAction, SyntheticEvent } from 'react';\nimport React, { useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarIcon,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n\tContextualbarFooter,\n\tContextualbarEmptyContent,\n} from '../../../../components/Contextualbar';\nimport InfiniteListAnchor from '../../../../components/InfiniteListAnchor';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport Row from './Row';\n\ntype BaseTeamsChannelsProps = {\n\tloading: boolean;\n\tchannels: IRoom[];\n\ttext: string;\n\ttype: 'all' | 'autoJoin';\n\tsetType: Dispatch<SetStateAction<'all' | 'autoJoin'>>;\n\tsetText: (e: ChangeEvent<HTMLInputElement>) => void;\n\tonClickClose: () => void;\n\tonClickAddExisting: false | ((e: SyntheticEvent) => void);\n\tonClickCreateNew: false | ((e: SyntheticEvent) => void);\n\ttotal: number;\n\tloadMoreItems: (start: number, end: number) => void;\n\tonClickView: (room: IRoom) => void;\n\treload: () => void;\n};\n\nconst BaseTeamsChannels = ({\n\tloading,\n\tchannels = [],\n\ttext,\n\ttype,\n\tsetText,\n\tsetType,\n\tonClickClose,\n\tonClickAddExisting,\n\tonClickCreateNew,\n\ttotal,\n\tloadMoreItems,\n\tonClickView,\n\treload,\n}: BaseTeamsChannelsProps) => {\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\n\tconst options: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['all', t('All')],\n\t\t\t['autoJoin', t('Team_Auto-join')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst lm = useMutableCallback((start) => !loading && loadMoreItems(start, Math.min(50, total - start)));\n\n\tconst loadMoreChannels = useDebouncedCallback(\n\t\t() => {\n\t\t\tif (channels.length >= total) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlm(channels.length);\n\t\t},\n\t\t300,\n\t\t[lm, channels],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='hash' />\n\t\t\t\t<ContextualbarTitle>{t('Team_Channels')}</ContextualbarTitle>\n\t\t\t\t{onClickClose && <ContextualbarClose onClick={onClickClose} />}\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent p={12}>\n\t\t\t\t<Box display='flex' flexDirection='row' p={12} flexShrink={0}>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\tonChange={setText}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box w='x144'>\n\t\t\t\t\t\t\t\t<Select onChange={(val) => setType(val as 'all' | 'autoJoin')} value={type} options={options} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!loading && channels.length === 0 && <ContextualbarEmptyContent title={t('No_channels_in_team')} />}\n\n\t\t\t\t{!loading && channels.length > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Box pi={18} pb={12}>\n\t\t\t\t\t\t\t<Box is='span' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t('Showing')}: {channels.length}\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<Box is='span' color='hint' fontScale='p2' mis={8}>\n\t\t\t\t\t\t\t\t{t('Total')}: {total}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box w='full' h='full' overflow='hidden' flexShrink={1}>\n\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\t\tdata={channels}\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper, Footer: () => <InfiniteListAnchor loadMore={loadMoreChannels} /> }}\n\t\t\t\t\t\t\t\titemContent={(index, data) => <Row onClickView={onClickView} room={data} reload={reload} key={index} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</ContextualbarContent>\n\n\t\t\t{(onClickAddExisting || onClickCreateNew) && (\n\t\t\t\t<ContextualbarFooter>\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t{onClickAddExisting && (\n\t\t\t\t\t\t\t<Button onClick={onClickAddExisting} width='50%'>\n\t\t\t\t\t\t\t\t{t('Team_Add_existing')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{onClickCreateNew && (\n\t\t\t\t\t\t\t<Button onClick={onClickCreateNew} width='50%'>\n\t\t\t\t\t\t\t\t{t('Create_new')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</ContextualbarFooter>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default BaseTeamsChannels;\n",null],"names":["Box","Icon","TextInput","Margins","Select","Throbber","ButtonGroup","Button","useMutableCallback","useAutoFocus","useDebouncedCallback","useTranslation","React","useMemo","Virtuoso","ContextualbarHeader","ContextualbarIcon","ContextualbarTitle","ContextualbarClose","ContextualbarContent","ContextualbarFooter","ContextualbarEmptyContent","InfiniteListAnchor","ScrollableContentWrapper","Row","module","link","v","exportDefault","_ref","loading","_ref$channels","channels","text","type","setText","setType","onClickClose","onClickAddExisting","onClickCreateNew","total","loadMoreItems","onClickView","reload","t","inputRef","options","lm","start","Math","min","loadMoreChannels","length","createElement","Fragment","name","onClick","p","display","flexDirection","flexShrink","flexGrow","mi","inline","placeholder","value","ref","onChange","addon","size","w","val","pi","pb","title","is","color","fontScale","mis","h","overflow","totalCount","data","components","Scroller","Footer","loadMore","itemContent","index","room","key","stretch","width"],"mappings":"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"}