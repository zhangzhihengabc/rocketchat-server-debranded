)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/TeamsChannels.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useMutableCallback, useLocalStorage, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, usePermission } from '@rocket.chat/ui-contexts';\nimport type { FC, SyntheticEvent } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannel';\nimport { useRoom } from '../../../room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\nimport RoomInfo from '../../../room/contextualBar/Info';\nimport AddExistingModal from './AddExistingModal';\nimport BaseTeamsChannels from './BaseTeamsChannels';\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\n\nconst useReactModal = (Component: FC<any>, teamId: string, reload: () => void) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e: SyntheticEvent) => {\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t\treload();\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} teamId={teamId} />);\n\t});\n};\n\nconst TeamsChannels = () => {\n\tconst room = useRoom();\n\tconst { teamId } = room;\n\n\tif (!teamId) {\n\t\tthrow new Error('Invalid teamId');\n\t}\n\n\tconst [state, setState] = useState<{ tab?: string; rid?: string }>({});\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst [type, setType] = useLocalStorage<'all' | 'autoJoin'>('channels-list-type', 'all');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\n\t\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst canAddExistingTeam = usePermission('add-team-channel', room._id);\n\tconst addExisting = useReactModal(AddExistingModal, teamId, reload);\n\tconst createNew = useReactModal(CreateChannelWithData, teamId, reload);\n\n\tconst goToRoom = useCallback((room) => roomCoordinator.openRouteLink(room.t, room), []);\n\tconst handleBack = useCallback(() => setState({}), [setState]);\n\tconst viewRoom = useMutableCallback((room: IRoom) => {\n\t\tgoToRoom(room);\n\t});\n\n\tif (state?.tab === 'RoomInfo' && state?.rid) {\n\t\treturn <RoomInfo onClickBack={handleBack} onEnterRoom={goToRoom} resetState={() => setState({})} />;\n\t}\n\n\treturn (\n\t\t<BaseTeamsChannels\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tchannels={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={closeTab}\n\t\t\tonClickAddExisting={canAddExistingTeam && addExisting}\n\t\t\tonClickCreateNew={canAddExistingTeam && createNew}\n\t\t\tonClickView={viewRoom}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default TeamsChannels;\n",null],"names":["module","default","_slicedToArray","v","link","useMutableCallback","useLocalStorage","useDebouncedValue","useSetModal","usePermission","React","useCallback","useMemo","useState","useRecordList","AsyncStatePhase","roomCoordinator","CreateChannelWithData","useRoom","useRoomToolbox","RoomInfo","AddExistingModal","BaseTeamsChannels","useTeamsChannelList","useReactModal","Component","teamId","reload","setModal","e","preventDefault","handleClose","createElement","onClose","exportDefault","room","Error","_useState2","state","setState","closeTab","_useRoomToolbox","_useLocalStorage2","type","setType","_useState4","text","setText","debouncedText","_useTeamsChannelList","teamsChannelList","loadMoreItems","_useRecordList","phase","items","total","itemCount","handleTextChange","event","currentTarget","value","canAddExistingTeam","_id","addExisting","createNew","goToRoom","openRouteLink","t","handleBack","viewRoom","tab","rid","onClickBack","onEnterRoom","resetState","loading","LOADING","channels","onClickClose","onClickAddExisting","onClickCreateNew","onClickView"],"mappings":"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"}