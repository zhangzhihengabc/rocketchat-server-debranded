)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { usePermission } from '@rocket.chat/ui-contexts';\nimport React, { useState, useCallback } from 'react';\n\nimport RemoveUsersFirstStep from './RemoveUsersFirstStep';\nimport RemoveUsersSecondStep from './RemoveUsersSecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_DELETE: 'CONFIRM_DELETE',\n};\n\nconst BaseRemoveUsersModal = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_DELETE : STEPS.LIST_ROOMS,\n\tusername,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_DELETE));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst canViewUserRooms = usePermission('view-all-team-channels');\n\n\tconst eligibleRooms = rooms.filter(({ isLastOwner }) => !isLastOwner);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE || !canViewUserRooms) {\n\t\treturn (\n\t\t\t<RemoveUsersSecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms?.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t\tusername={username}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RemoveUsersFirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tparams={{}}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\t// onChangeParams={(...args) => console.log(args)}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms.length}\n\t\t/>\n\t);\n};\n\nexport default BaseRemoveUsersModal;\n",null],"names":["module","link","default","v","_objectSpread","_slicedToArray","useMutableCallback","usePermission","React","useState","useCallback","RemoveUsersFirstStep","RemoveUsersSecondStep","STEPS","LIST_ROOMS","CONFIRM_DELETE","exportDefault","_ref","onClose","onCancel","onConfirm","rooms","_ref$currentStep","currentStep","length","username","_useState2","step","setStep","_useState4","selectedRooms","setSelectedRooms","onContinue","onReturn","canViewUserRooms","eligibleRooms","filter","_ref2","isLastOwner","onChangeRoomSelection","room","_objectSpread2","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","createElement","params","eligibleRoomsLength","deletedRooms"],"mappings":"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"}