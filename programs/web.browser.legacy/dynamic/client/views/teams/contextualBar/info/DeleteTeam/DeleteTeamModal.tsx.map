)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/DeleteTeam/DeleteTeamModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState } from 'react';\n\nimport DeleteTeamChannels from './DeleteTeamChannels';\nimport DeleteTeamConfirmation from './DeleteTeamConfirmation';\n\nconst STEPS = { LIST_ROOMS: 'LIST_ROOMS', CONFIRM_DELETE: 'CONFIRM_DELETE' };\n\ntype DeleteTeamModalProps = {\n\tonCancel: () => void;\n\tonConfirm: (roomsToDelete: IRoom['_id'][]) => void;\n\trooms: Serialized<IRoom>[];\n};\n\nconst DeleteTeamModal = ({ onCancel, onConfirm, rooms }: DeleteTeamModalProps) => {\n\tconst hasRooms = rooms && rooms.length > 0;\n\n\tconst [step, setStep] = useState(hasRooms ? STEPS.LIST_ROOMS : STEPS.CONFIRM_DELETE);\n\tconst [deletedRooms, setDeletedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\tconst [keptRooms, setKeptRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\n\tconst onChangeRoomSelection = useMutableCallback((room) => {\n\t\tif (deletedRooms[room._id]) {\n\t\t\tsetDeletedRooms((deletedRooms) => {\n\t\t\t\tdelete deletedRooms[room._id];\n\t\t\t\treturn { ...deletedRooms };\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetDeletedRooms((deletedRooms) => ({ ...deletedRooms, [room._id]: room }));\n\t});\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(deletedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setDeletedRooms(Object.fromEntries(rooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetDeletedRooms({});\n\t});\n\n\tconst onSelectRooms = useMutableCallback(() => {\n\t\tconst keptRooms = Object.fromEntries(rooms.filter((room) => !deletedRooms[room._id]).map((room) => [room._id, room]));\n\t\tsetKeptRooms(keptRooms);\n\t\tsetStep(STEPS.CONFIRM_DELETE);\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE) {\n\t\treturn (\n\t\t\t<DeleteTeamConfirmation\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonReturn={hasRooms ? () => setStep(STEPS.LIST_ROOMS) : undefined}\n\t\t\t\tonCancel={onCancel}\n\t\t\t\tdeletedRooms={deletedRooms}\n\t\t\t\tkeptRooms={keptRooms}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<DeleteTeamChannels\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\tselectedRooms={deletedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonConfirm={onSelectRooms}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default DeleteTeamModal;\n",null],"names":["module","default","_objectSpread","_slicedToArray","link","useMutableCallback","v","React","useState","DeleteTeamChannels","DeleteTeamConfirmation","STEPS","LIST_ROOMS","CONFIRM_DELETE","exportDefault","_ref","onCancel","onConfirm","rooms","hasRooms","length","_useState2","step","setStep","_useState4","deletedRooms","setDeletedRooms","_useState6","keptRooms","setKeptRooms","onChangeRoomSelection","room","_id","_objectSpread2","onToggleAllRooms","Object","values","filter","Boolean","fromEntries","map","onSelectRooms","createElement","onReturn","undefined","selectedRooms"],"mappings":"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"}