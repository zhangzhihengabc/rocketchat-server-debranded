)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/LeaveTeam/LeaveTeamModal/LeaveTeamModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback, useMemo } from 'react';\n\nimport LeaveTeamModalChannels from './LeaveTeamModalChannels';\nimport LeaveTeamModalConfirmation from './LeaveTeamModalConfirmation';\n\nconst LEAVE_TEAM_STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\n} as const;\n\ntype LeaveTeamModalProps = {\n\trooms: (Serialized<IRoom> & { isLastOwner?: boolean })[];\n\tonCancel: () => void;\n\tonConfirm: () => void;\n};\n\nconst LeaveTeamModal = ({ rooms, onCancel, onConfirm }: LeaveTeamModalProps): ReactElement => {\n\tconst memoizedRooms = useMemo(() => rooms, [rooms]);\n\tconst [step, setStep] = useState(memoizedRooms.length === 0 ? LEAVE_TEAM_STEPS.CONFIRM_LEAVE : LEAVE_TEAM_STEPS.LIST_ROOMS);\n\n\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } }>({});\n\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\n\n\tconst handleContinue = useCallback(() => setStep(LEAVE_TEAM_STEPS.CONFIRM_LEAVE), []);\n\tconst handleReturn = useCallback(() => setStep(LEAVE_TEAM_STEPS.LIST_ROOMS), []);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\t\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\n\t\t\t}\n\n\t\t\treturn {};\n\t\t});\n\t});\n\n\tif (step === LEAVE_TEAM_STEPS.CONFIRM_LEAVE) {\n\t\treturn (\n\t\t\t<LeaveTeamModalConfirmation\n\t\t\t\tselectedRooms={selectedRooms}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onCancel}\n\t\t\t\tonCancel={rooms.length > 0 ? handleReturn : undefined}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<LeaveTeamModalChannels\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonConfirm={handleContinue}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default LeaveTeamModal;\n",null],"names":["module","default","_objectSpread","_slicedToArray","link","useMutableCallback","v","React","useState","useCallback","useMemo","LeaveTeamModalChannels","LeaveTeamModalConfirmation","LEAVE_TEAM_STEPS","LIST_ROOMS","CONFIRM_LEAVE","exportDefault","_ref","rooms","onCancel","onConfirm","_useState2","memoizedRooms","length","step","setStep","_useState4","selectedRooms","setSelectedRooms","lastOwnerRooms","filter","_ref2","isLastOwner","handleContinue","handleReturn","onChangeRoomSelection","room","_objectSpread2","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","_ref3","map","createElement","onClose","undefined","eligibleRoomsLength"],"mappings":"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"}