)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { FC } from 'react';\nimport React, { useState, useCallback } from 'react';\n\nimport FirstStep from './ModalSteps/FirstStep';\nimport SecondStep from './ModalSteps/SecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_CONVERT: 'CONFIRM_CONVERT',\n};\n\ntype BaseConvertToChannelModalProps = {\n\tonClose: () => void;\n\tonCancel: () => void;\n\tonConfirm: () => Serialized<IRoom>[];\n\tcurrentStep?: string;\n\trooms?: (Serialized<IRoom> & { isLastOwner?: boolean })[];\n};\n\nconst BaseConvertToChannelModal: FC<BaseConvertToChannelModalProps> = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_CONVERT : STEPS.LIST_ROOMS,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_CONVERT));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst eligibleRooms = rooms;\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0 && eligibleRooms) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_CONVERT) {\n\t\treturn (\n\t\t\t<SecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms && rooms.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<FirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms?.length}\n\t\t/>\n\t);\n};\n\nexport default BaseConvertToChannelModal;\n",null],"names":["module","default","_objectSpread","_slicedToArray","link","useMutableCallback","v","React","useState","useCallback","FirstStep","SecondStep","STEPS","LIST_ROOMS","CONFIRM_CONVERT","exportDefault","_ref","onClose","onCancel","onConfirm","rooms","_ref$currentStep","currentStep","_useState2","length","step","setStep","_useState4","selectedRooms","setSelectedRooms","onContinue","onReturn","onChangeRoomSelection","room","_objectSpread2","_id","onToggleAllRooms","Object","values","filter","Boolean","fromEntries","eligibleRooms","map","createElement","deletedRooms","eligibleRoomsLength"],"mappings":"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"}