)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/banners/hooks/useUserBanners.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation, useUser } from '@rocket.chat/ui-contexts';\nimport { useEffect } from 'react';\n\nimport * as banners from '../../../lib/banners';\nimport { useDismissUserBannerMutation } from './useDismissUserBannerMutation';\n\nexport const useUserBanners = () => {\n\tconst user = useUser();\n\n\tconst t = useTranslation();\n\tconst { mutate: dismissUserBanner } = useDismissUserBannerMutation();\n\n\tuseEffect(() => {\n\t\tif (!user?.banners || Object.keys(user.banners).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstBanner = Object.values(user.banners)\n\t\t\t.filter((b) => b.read !== true)\n\t\t\t.sort((a, b) => b.priority - a.priority)[0];\n\n\t\tif (!firstBanner) {\n\t\t\treturn;\n\t\t}\n\n\t\tbanners.open({\n\t\t\tid: firstBanner.id,\n\t\t\ttitle: t.has(firstBanner.title) ? t(firstBanner.title) : firstBanner.title,\n\t\t\ttext: t.has(firstBanner.text) ? t(firstBanner.text, firstBanner.textArguments) : firstBanner.text,\n\t\t\tmodifiers: firstBanner.modifiers,\n\t\t\taction() {\n\t\t\t\tif (firstBanner.link) {\n\t\t\t\t\twindow.open(firstBanner.link, '_system');\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClose() {\n\t\t\t\tdismissUserBanner({ id: firstBanner.id });\n\t\t\t},\n\t\t});\n\t}, [dismissUserBanner, t, user?.banners]);\n};\n",null],"names":["module","export","useUserBanners","useTranslation","useUser","useEffect","v","banners","useDismissUserBannerMutation","user","t","dismissUserBanner","_useDismissUserBanner","mutate","Object","keys","length","firstBanner","values","filter","b","read","sort","a","priority","open","id","title","has","text","textArguments","modifiers","action","link","window","onClose"],"mappings":"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,eAAgB,WAAe,OAAAA,CAAA,CAAA,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAG,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,QAAAA,CAAAK,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,uBAAAA,CAAA,IAAA,SAAAM,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAQ,6BAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAM5D,IAN4DL,EAAAA,EAAAE,EAAAE,EAAAC,EAMtDN,EAAiB,WAC7B,IAAMO,EAAOL,IAEPM,EAAIP,IACMQ,EAAiBC,AAAKJ,IAA9BK,MAAM,CAEdR,EAAU,WACT,GAAI,MAACI,GAAAA,EAAMF,OAAO,EAAIO,AAAqC,IAArCA,OAAOC,IAAI,CAACN,EAAKF,OAAO,EAAES,MAAM,EAItD,IAAMC,EAAcH,OAAOI,MAAM,CAACT,EAAKF,OAAO,EAC5CY,MAAM,CAAC,SAACC,CAAC,EAAA,MAAKA,AAAW,CAAA,IAAXA,EAAEC,IAAI,AAAS,GAC7BC,IAAI,CAAC,SAACC,CAAC,CAAEH,CAAC,EAAA,OAAKA,EAAEI,QAAQ,CAAGD,EAAEC,QAAQ,EAAC,CAAC,EAAE,CAEvCP,GAILV,EAAQkB,IAAI,CAAC,CACZC,GAAIT,EAAYS,EAAE,CAClBC,MAAOjB,EAAEkB,GAAG,CAACX,EAAYU,KAAK,EAAIjB,EAAEO,EAAYU,KAAK,EAAIV,EAAYU,KAAK,CAC1EE,KAAMnB,EAAEkB,GAAG,CAACX,EAAYY,IAAI,EAAInB,EAAEO,EAAYY,IAAI,CAAEZ,EAAYa,aAAa,EAAIb,EAAYY,IAAI,CACjGE,UAAWd,EAAYc,SAAS,CAChCC,OAAM,WACDf,EAAYgB,IAAI,EACnBC,OAAOT,IAAI,CAACR,EAAYgB,IAAI,CAAE,UAEhC,EACAE,QAAO,WACNxB,EAAkB,CAAEe,GAAIT,EAAYS,EAAAA,AAAE,EACvC,IAEF,EAAG,CAACf,EAAmBD,EAAGD,MAAAA,EAAI,KAAA,EAAJA,EAAMF,OAAO,CAAC,CACzC"}