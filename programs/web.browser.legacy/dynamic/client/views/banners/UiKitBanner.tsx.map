)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/banners/UiKitBanner.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UiKit } from '@rocket.chat/core-typings';\nimport { Banner, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UiKitContext, bannerParser, UiKitBanner as UiKitBannerSurfaceRender, UiKitComponent } from '@rocket.chat/fuselage-ui-kit';\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport MarkdownText from '../../components/MarkdownText';\nimport { useBannerContextValue } from '../../uikit/hooks/useBannerContextValue';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../uikit/hooks/useUiKitView';\n\n// TODO: move this to fuselage-ui-kit itself\nbannerParser.mrkdwn = ({ text }): ReactElement => <MarkdownText variant='inline' content={text} />;\n\ntype UiKitBannerProps = {\n\tkey: UiKit.BannerView['viewId']; // force re-mount when viewId changes\n\tinitialView: UiKit.BannerView;\n};\n\nconst UiKitBanner = ({ initialView }: UiKitBannerProps) => {\n\tconst { view, values, state } = useUiKitView(initialView);\n\tconst actionManager = useUiKitActionManager();\n\tconst contextValue = useBannerContextValue({ view, values });\n\n\tconst icon = useMemo(() => {\n\t\tif (view.icon) {\n\t\t\treturn <Icon name={view.icon} size='x20' />;\n\t\t}\n\n\t\treturn null;\n\t}, [view.icon]);\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst handleClose = useMutableCallback(() => {\n\t\tvoid actionManager\n\t\t\t.emitInteraction(view.appId, {\n\t\t\t\ttype: 'viewClosed',\n\t\t\t\tpayload: {\n\t\t\t\t\tviewId: view.viewId,\n\t\t\t\t\tview: {\n\t\t\t\t\t\t...view,\n\t\t\t\t\t\tid: view.viewId,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t},\n\t\t\t\t\tisCleared: true,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treturn Promise.reject(error);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tactionManager.disposeView(view.viewId);\n\t\t\t});\n\t});\n\n\treturn (\n\t\t<Banner icon={icon} inline={view.inline} title={view.title} variant={view.variant} closeable onClose={handleClose}>\n\t\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t\t<UiKitComponent render={UiKitBannerSurfaceRender} blocks={view.blocks} />\n\t\t\t</UiKitContext.Provider>\n\t\t</Banner>\n\t);\n};\n\nexport default UiKitBanner;\n",null],"names":["_objectSpread","Banner","Icon","useMutableCallback","UiKitContext","bannerParser","UiKitBannerSurfaceRender","UiKitComponent","useToastMessageDispatch","React","useMemo","MarkdownText","useBannerContextValue","useUiKitActionManager","useUiKitView","module","link","default","UiKitBanner","v","mrkdwn","_ref","text","createElement","variant","content","exportDefault","_ref2","_useUiKitView","initialView","view","values","state","actionManager","contextValue","icon","name","size","dispatchToastMessage","handleClose","emitInteraction","appId","type","payload","viewId","id","isCleared","catch","error","message","Promise","reject","finally","disposeView","inline","title","closeable","onClose","Provider","value","render","blocks"],"mappings":"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"}