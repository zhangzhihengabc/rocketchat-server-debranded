)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/mailer/MailerUnsubscriptionPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { HeroLayout } from '@rocket.chat/layout';\nimport { useToastMessageDispatch, useRouteParameter, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useEffect } from 'react';\n\nimport type { AsyncState } from '../../hooks/useAsyncState';\nimport { AsyncStatePhase, useAsyncState } from '../../hooks/useAsyncState';\n\nconst useMailerUnsubscriptionState = (): AsyncState<boolean> => {\n\tconst { resolve, reject, ...unsubscribedState } = useAsyncState<boolean>();\n\n\tconst unsubscribe = useEndpoint('POST', '/v1/mailer.unsubscribe');\n\tconst _id = useRouteParameter('_id');\n\tconst createdAt = useRouteParameter('createdAt');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tuseEffect(() => {\n\t\tconst doUnsubscribe = async (_id: string, createdAt: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait unsubscribe({ _id, createdAt });\n\t\t\t\tresolve(true);\n\t\t\t} catch (error: unknown) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treject(error instanceof Error ? error : new Error(String(error)));\n\t\t\t}\n\t\t};\n\n\t\tif (!_id || !createdAt) {\n\t\t\treturn;\n\t\t}\n\n\t\tdoUnsubscribe(_id, createdAt);\n\t}, [resolve, reject, unsubscribe, _id, createdAt, dispatchToastMessage]);\n\n\treturn unsubscribedState;\n};\n\nconst MailerUnsubscriptionPage: FC = () => {\n\tconst { phase, error } = useMailerUnsubscriptionState();\n\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<HeroLayout>\n\t\t\t<Box color='default' marginInline='auto' marginBlock={16} maxWidth={800}>\n\t\t\t\t{(phase === AsyncStatePhase.LOADING && <Throbber disabled />) ||\n\t\t\t\t\t(phase === AsyncStatePhase.REJECTED && <Callout type='danger' title={error?.message} />) ||\n\t\t\t\t\t(phase === AsyncStatePhase.RESOLVED && <Callout type='success' title={t('You_have_successfully_unsubscribed')} />)}\n\t\t\t</Box>\n\t\t</HeroLayout>\n\t);\n};\n\nexport default MailerUnsubscriptionPage;\n",null],"names":["_regeneratorRuntime","_objectWithoutProperties","Box","Callout","Throbber","HeroLayout","useToastMessageDispatch","useRouteParameter","useEndpoint","useTranslation","React","useEffect","AsyncStatePhase","useAsyncState","module","link","default","v","useMailerUnsubscriptionState","_useAsyncState","resolve","reject","unsubscribedState","_excluded","unsubscribe","_id","createdAt","dispatchToastMessage","async","_context","prev","next","awrap","t0","type","message","Error","String","stop","Promise","exportDefault","_useMailerUnsubscript","phase","error","t","createElement","color","marginInline","marginBlock","maxWidth","LOADING","disabled","REJECTED","title","RESOLVED"],"mappings":"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"}