)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/composer/EmojiPicker/EmojiPickerDesktopDropdown.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Tile } from '@rocket.chat/fuselage';\nimport { useMergedRefs, usePosition } from '@rocket.chat/fuselage-hooks';\nimport type { ReactNode, Ref, RefObject } from 'react';\nimport React, { useMemo, useRef, forwardRef } from 'react';\n\nconst getDropdownContainer = (descendant: HTMLElement | null) => {\n\tfor (let element = descendant ?? document.body; element !== document.body; element = element.parentElement ?? document.body) {\n\t\tif (\n\t\t\tgetComputedStyle(element).transform !== 'none' ||\n\t\t\tgetComputedStyle(element).position === 'fixed' ||\n\t\t\tgetComputedStyle(element).willChange === 'transform'\n\t\t) {\n\t\t\treturn element;\n\t\t}\n\t}\n\n\treturn document.body;\n};\n\nconst useDropdownPosition = (reference: RefObject<HTMLElement>, target: RefObject<HTMLElement>) => {\n\tconst innerContainer = getDropdownContainer(reference.current);\n\tconst boundingRect = innerContainer.getBoundingClientRect();\n\n\tconst viewHeight = document.body.getBoundingClientRect().height;\n\tconst refTop = reference.current?.getBoundingClientRect().top ?? 0;\n\tconst targetHeight = target.current?.getBoundingClientRect().height || 0;\n\n\tconst placement = useMemo(() => {\n\t\tif (boundingRect.top === 0) {\n\t\t\treturn 'top-start';\n\t\t}\n\t\tif (refTop >= viewHeight / 2) {\n\t\t\treturn 'top-end';\n\t\t}\n\t\treturn 'bottom-end';\n\t}, [targetHeight, refTop]);\n\n\tconst maxHeight = useMemo(() => (placement === 'bottom-end' ? '482px' : `${refTop - 12}px`), [placement, refTop]);\n\n\tconst { style } = usePosition(reference, target, {\n\t\tplacement,\n\t\tcontainer: innerContainer,\n\t});\n\n\treturn useMemo(() => {\n\t\treturn { ...style, maxHeight };\n\t}, [style]);\n};\n\ntype EmojiPickerDesktopDropdownProps = {\n\tchildren: ReactNode;\n\treference: RefObject<HTMLElement>;\n};\n\nconst EmojiPickerDesktopDropdown = forwardRef(function ToolboxDropdownDesktop(\n\t{ reference, children }: EmojiPickerDesktopDropdownProps,\n\tref: Ref<HTMLElement>,\n) {\n\tconst targetRef = useRef<HTMLElement>(null);\n\tconst mergedRef = useMergedRefs(ref, targetRef);\n\n\tconst style = useDropdownPosition(reference, targetRef);\n\n\treturn (\n\t\t<Tile style={style} ref={mergedRef} elevation='2' pi='0' pb='0' display='flex' flexDirection='column' overflow='auto'>\n\t\t\t<Box flexShrink={1} pb={12}>\n\t\t\t\t{children}\n\t\t\t</Box>\n\t\t</Tile>\n\t);\n});\n\nexport default EmojiPickerDesktopDropdown;\n",null],"names":["module","link","default","_objectSpread","Box","Tile","useMergedRefs","usePosition","v","React","useMemo","useRef","forwardRef","getDropdownContainer","descendant","_element$parentElemen","element","document","body","parentElement","getComputedStyle","transform","position","willChange","useDropdownPosition","reference","target","_reference$current$ge","_reference$current","_target$current","innerContainer","current","boundingRect","getBoundingClientRect","viewHeight","height","refTop","top","placement","maxHeight","style","_usePosition","container","EmojiPickerDesktopDropdown","_ref","ref","children","targetRef","mergedRef","createElement","elevation","pi","pb","display","flexDirection","overflow","flexShrink","exportDefault"],"mappings":"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"}