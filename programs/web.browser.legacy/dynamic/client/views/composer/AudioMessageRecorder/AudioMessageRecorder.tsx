function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},1),t.link("@rocket.chat/fuselage",{Box:function(e){a=e},Throbber:function(e){c=e}},0),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){s=e}},1),t.link("@rocket.chat/ui-composer",{MessageComposerAction:function(e){l=e}},2),t.link("@rocket.chat/ui-contexts",{useTranslation:function(e){u=e}},3),t.link("react",{default:function(e){i=e},useEffect:function(e){m=e},useMemo:function(e){d=e},useState:function(e){f=e}},4),t.link("../../../../app/ui/client/lib/recorderjs/AudioRecorder",{AudioRecorder:function(e){p=e}},5),t.link("../../room/contexts/ChatContext",{useChat:function(e){g=e}},6);var r,o,a,c,s,l,u,i,m,d,f,p,g,x=new p;t.exportDefault(function(e){var n,t=e.rid,p=e.chatContext,b=e.isMicrophoneDenied,_=u(),h=o(f("recording"),2),k=h[0],v=h[1],w=o(f("00:00"),2),C=w[0],E=w[1],y=o(f(null),2),M=y[0],N=y[1],P=o(f(null),2),A=P[0],S=P[1],T=s(function(){var e,n;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return M&&clearInterval(M),N(null),S(null),E("00:00"),null==I||I.action.stop("recording"),null==I||null===(e=I.composer)||void 0===e||e.setRecordingMode(!1),t.next=8,r.awrap(new Promise(function(e){return x.stop(e)}));case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}},null,null,null,Promise)}),D=s(function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:if("recording"!==k){e.next=3;break}return e.next=3,r.awrap(T());case 3:case"end":return e.stop()}},null,null,null,Promise)}),R=s(function(){var e,n;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(A&&A!==t)){o.next=2;break}return o.abrupt("return");case 2:return o.prev=2,o.next=5,r.awrap(x.start());case 5:null==I||I.action.performContinuously("recording"),e=new Date,N(setInterval(function(){var n=(new Date().getTime()-e.getTime())/1e3,t=Math.floor(n/60),r=Math.floor(n%60);E(String(t).padStart(2,"0")+":"+String(r).padStart(2,"0"))},1e3)),S(t),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(2),console.log(o.t0),null==I||null===(n=I.composer)||void 0===n||n.setRecordingMode(!1);case 15:case"end":return o.stop()}},null,null,[[2,11]],Promise)}),F=s(function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.awrap(T());case 2:case"end":return e.stop()}},null,null,null,Promise)}),I=null!==(n=g())&&void 0!==n?n:p,j=s(function(){var e,n,t;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return v("loading"),o.next=3,r.awrap(T());case 3:return e=o.sent,n=_("Audio_record")+".mp3",t=new File([e],n,{type:"audio/mpeg"}),o.next=8,r.awrap(null==I?void 0:I.flows.uploadFiles([t]));case 8:case"end":return o.stop()}},null,null,null,Promise)});m(function(){return R(),function(){D()}},[D,R]);var z=d(function(){return A&&A!==t?"rc-message-box__audio-message--busy":k&&"rc-message-box__audio-message--"+k},[A,t,k]);return b?null:i.createElement(a,{position:"absolute",pi:4,pb:12,className:"rc-message-box__audio-message "+z},"recording"===k&&i.createElement(i.Fragment,null,i.createElement(l,{icon:"circle-cross",className:"rc-message-box__icon rc-message-box__audio-message-cancel",onClick:F}),i.createElement(a,{className:"rc-message-box__audio-message-timer",color:"default"},i.createElement("span",{className:"rc-message-box__audio-message-timer-dot"}),i.createElement("span",{className:"rc-message-box__audio-message-timer-text"},C)),i.createElement(l,{icon:"circle-check",className:"rc-message-box__icon rc-message-box__audio-message-done",onClick:j})),"loading"===k&&i.createElement("div",{className:"rc-message-box__icon"},i.createElement(c,{inheritColor:!0,size:"x12"})))})}
//# sourceMappingURL=/dynamic/client/views/composer/AudioMessageRecorder/298ed46ab32ca0a94f5a2d8fb8012f4f7c7687e5.map
