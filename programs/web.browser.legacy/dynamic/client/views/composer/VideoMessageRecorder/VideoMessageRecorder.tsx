function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){o=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/taggedTemplateLiteralLoose",{default:function(e){l=e}},2),t.link("@rocket.chat/css-in-js",{css:function(e){c=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){a=e},ButtonGroup:function(e){u=e},Button:function(e){s=e},Icon:function(e){d=e},PositionAnimated:function(e){f=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){p=e}},2),t.link("@rocket.chat/ui-contexts",{useTranslation:function(e){m=e},useToastMessageDispatch:function(e){v=e}},3),t.link("react",{default:function(e){g=e},useRef:function(e){h=e},useEffect:function(e){b=e},useState:function(e){k=e}},4),t.link("../../../../app/ui/client/lib/UserAction",{UserAction:function(e){E=e},USER_ACTIVITIES:function(e){w=e}},5),t.link("../../../../app/ui/client/lib/recorderjs/videoRecorder",{VideoRecorder:function(e){y=e}},6),t.link("../../room/contexts/ChatContext",{useChat:function(e){x=e}},7);var i,o,r,l,c,a,u,s,d,f,p,m,v,g,h,b,k,E,w,y,x,R=c(i||(i=l(["\n	transform: scaleX(-1);\n	filter: FlipH;\n\n	@media (max-width: 500px) {\n		& > video {\n			width: 100%;\n			height: 100%;\n		}\n	}\n"])));t.exportDefault(function(e){var n,t=e.rid,i=e.tmid,l=e.chatContext,c=e.reference,C=m(),S=h(null),T=v(),I=r(k(),2),_=I[0],M=I[1],D=r(k("idle"),2),P=D[0],A=D[1],U=r(k(null),2),V=U[0],B=U[1],j=!(y.cameraStarted.get()&&"recording"!==P),F=null!==(n=x())&&void 0!==n?n:l,G=function(e,n){return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:V&&clearInterval(V),B(null),y.stopRecording(),E.stop(e,w.USER_RECORDING,{tmid:n}),A("idle");case 5:case"end":return t.stop()}},null,null,null,Promise)},N=p(function(){var e;y.stop(),null==F||null===(e=F.composer)||void 0===e||e.setRecordingVideo(!1),M(void 0),G(t,i)});return b(function(){var e;return y.getSupportedMimeTypes()?(y.start(null!==(e=S.current)&&void 0!==e?e:void 0,function(e){return e?void 0:N()}),function(){y.stop()}):T({type:"error",message:C("Browser_does_not_support_recording_video")})},[T,N,C]),g.createElement(f,{visible:"visible",anchor:c,placement:"top-end"},g.createElement(a,{bg:"light",padding:4,borderRadius:4,elevation:"2"},g.createElement(a,{className:R,overflow:"hidden",height:240,borderRadius:4},g.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,ref:S,width:320,height:240})),g.createElement(a,{mbs:4,display:"flex",justifyContent:"space-between"},g.createElement(s,{small:!0,onClick:function(){var e;return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:"recording"===P?G(t,i):(y.record(),A("recording"),E.performContinuously(t,w.USER_RECORDING,{tmid:i}),M("00:00"),e=new Date,B(setInterval(function(){var n=(new Date().getTime()-e.getTime())/1e3,t=Math.floor(n/60),i=Math.floor(n%60);M(String(t).padStart(2,"0")+":"+String(i).padStart(2,"0"))},1e3)));case 1:case"end":return n.stop()}},null,null,null,Promise)}},g.createElement(a,{is:"span",display:"flex",alignItems:"center"},g.createElement(d,{size:"x16",mie:_?4:void 0,name:"recording"===P?"stop-unfilled":"rec"}),_&&g.createElement("span",null,_))),g.createElement(u,null,g.createElement(s,{small:!0,onClick:N},C("Cancel")),g.createElement(s,{primary:!0,small:!0,disabled:j,onClick:function(){var e;return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:e=function e(e){var n,t,i;return o.async(function r(r){for(;;)switch(r.prev=r.next){case 0:return t=C("Video_record")+"."+(y.getSupportedMimeTypes().match(/video\/webm/)?"webm":"mp4"),i=new File([e],t,{type:y.getSupportedMimeTypes().split(";")[0]}),r.next=4,o.awrap(null==F?void 0:F.flows.uploadFiles([i]));case 4:null==F||null===(n=F.composer)||void 0===n||n.setRecordingVideo(!1);case 5:case"end":return r.stop()}},null,null,null,Promise)},y.stop(e),M(void 0),G(t,i);case 4:case"end":return n.stop()}},null,null,null,Promise)}},C("Send"))))))})}
//# sourceMappingURL=/dynamic/client/views/composer/VideoMessageRecorder/aecb1a8421e46541548512bbcda39591afc4556f.map
