)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/businessHours/NewBusinessHoursPage.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useRoute, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useState } from 'react';\n\nimport Page from '../../../components/Page';\nimport { DAYS_OF_WEEK } from './BusinessHoursForm';\nimport BusinessHoursFormContainer from './BusinessHoursFormContainer';\nimport { mapBusinessHoursForm } from './mapBusinessHoursForm';\n\nconst closedDays = ['Saturday', 'Sunday'];\nconst createDefaultBusinessHours = () => ({\n\tname: '',\n\tworkHours: DAYS_OF_WEEK.map((day) => ({\n\t\tday,\n\t\tstart: {\n\t\t\ttime: '00:00',\n\t\t},\n\t\tfinish: {\n\t\t\ttime: '00:00',\n\t\t},\n\t\topen: !closedDays.includes(day),\n\t})),\n\tdepartments: [],\n\ttimezoneName: 'America/Sao_Paulo',\n\tdepartmentsToApplyBusinessHour: '',\n});\n\nconst defaultBusinessHour = createDefaultBusinessHours();\n\nconst NewBusinessHoursPage = () => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [hasChanges, setHasChanges] = useState(false);\n\n\tconst saveData = useRef({ form: {} });\n\n\tconst save = useMethod('livechat:saveBusinessHour');\n\tconst router = useRoute('omnichannel-businessHours');\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst {\n\t\t\tcurrent: { form, multiple: { departments, ...multiple } = {}, timezone: { name: timezoneName } = {} },\n\t\t} = saveData;\n\n\t\tif (multiple.name === '') {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\n\t\tconst mappedForm = mapBusinessHoursForm(form, defaultBusinessHour);\n\n\t\tconst departmentsToApplyBusinessHour = departments?.map((dep) => dep.value).join(',') || '';\n\n\t\ttry {\n\t\t\tconst payload = {\n\t\t\t\t...defaultBusinessHour,\n\t\t\t\t...multiple,\n\t\t\t\t...(departmentsToApplyBusinessHour && { departmentsToApplyBusinessHour }),\n\t\t\t\ttimezoneName,\n\t\t\t\tworkHours: mappedForm,\n\t\t\t\ttype: 'custom',\n\t\t\t};\n\n\t\t\tawait save(payload);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\trouter.push({});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst handleReturn = useMutableCallback(() => {\n\t\trouter.push({});\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Business_Hours')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={handleReturn}>{t('Back')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasChanges}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<BusinessHoursFormContainer data={defaultBusinessHour} saveRef={saveData} onChange={setHasChanges} />\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default NewBusinessHoursPage;\n",null],"names":["_regeneratorRuntime","_objectSpread","_objectWithoutProperties","_slicedToArray","Button","ButtonGroup","useMutableCallback","useToastMessageDispatch","useRoute","useMethod","useTranslation","React","useRef","useState","Page","DAYS_OF_WEEK","BusinessHoursFormContainer","mapBusinessHoursForm","module","link","default","v","closedDays","defaultBusinessHour","name","workHours","map","day","start","time","finish","open","includes","departments","timezoneName","departmentsToApplyBusinessHour","exportDefault","t","dispatchToastMessage","_useState2","hasChanges","setHasChanges","saveData","form","save","router","handleSave","_saveData$current","_saveData$current$mul","multiple","_saveData$current$tim","mappedForm","payload","async","_context","prev","next","current","_excluded","timezone","abrupt","type","message","field","dep","value","join","awrap","push","t0","stop","Promise","handleReturn","createElement","Header","title","onClick","primary","disabled","ScrollableContentWithShadow","data","saveRef","onChange"],"mappings":"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"}