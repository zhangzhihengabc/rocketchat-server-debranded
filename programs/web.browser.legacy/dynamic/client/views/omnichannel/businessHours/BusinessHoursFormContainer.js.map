)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/businessHours/BusinessHoursFormContainer.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { FieldGroup, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useState } from 'react';\n\nimport { businessHourManager } from '../../../../app/livechat/client/views/app/business-hours/BusinessHours';\nimport { useForm } from '../../../hooks/useForm';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { BusinessHoursMultipleContainer } from '../additionalForms';\nimport BusinessHourForm from './BusinessHoursForm';\nimport BusinessHoursTimeZone from './BusinessHoursTimeZone';\n\nconst useChangeHandler = (name, ref) =>\n\tuseMutableCallback((val) => {\n\t\tref.current[name] = { ...ref.current[name], ...val };\n\t});\n\nconst getInitalData = ({ workHours }) => ({\n\tdaysOpen: workHours.filter(({ open }) => !!open).map(({ day }) => day),\n\tdaysTime: workHours.reduce((acc, { day, start: { time: start }, finish: { time: finish } }) => {\n\t\tacc = { ...acc, [day]: { start, finish } };\n\t\treturn acc;\n\t}, {}),\n});\n\nconst BusinessHoursFormContainer = ({ data, saveRef, onChange = () => {} }) => {\n\tconst [hasChangesMultiple, setHasChangesMultiple] = useState(false);\n\tconst [hasChangesTimeZone, setHasChangesTimeZone] = useState(false);\n\n\tconst showMultipleBHForm = useReactiveValue(useMutableCallback(() => businessHourManager.showCustomTemplate(data)));\n\n\tconst onChangeTimezone = useChangeHandler('timezone', saveRef);\n\tconst onChangeMultipleBHForm = useChangeHandler('multiple', saveRef);\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitalData(data));\n\n\tsaveRef.current.form = values;\n\n\tuseEffect(() => {\n\t\tonChange(hasUnsavedChanges || (showMultipleBHForm && hasChangesMultiple) || hasChangesTimeZone);\n\t});\n\n\treturn (\n\t\t<Box maxWidth='600px' w='full' alignSelf='center'>\n\t\t\t<FieldGroup>\n\t\t\t\t{showMultipleBHForm && (\n\t\t\t\t\t<BusinessHoursMultipleContainer onChange={onChangeMultipleBHForm} data={data} hasChangesAndIsValid={setHasChangesMultiple} />\n\t\t\t\t)}\n\t\t\t\t<BusinessHoursTimeZone\n\t\t\t\t\tonChange={onChangeTimezone}\n\t\t\t\t\tdata={data?.timezone?.name ?? data?.timezoneName}\n\t\t\t\t\thasChanges={setHasChangesTimeZone}\n\t\t\t\t/>\n\t\t\t\t<BusinessHourForm values={values} handlers={handlers} />\n\t\t\t</FieldGroup>\n\t\t</Box>\n\t);\n};\n\nexport default BusinessHoursFormContainer;\n",null],"names":["module","link","default","v","_slicedToArray","_objectSpread","FieldGroup","Box","useMutableCallback","React","useEffect","useState","businessHourManager","useForm","useReactiveValue","BusinessHoursMultipleContainer","BusinessHourForm","BusinessHoursTimeZone","useChangeHandler","name","ref","val","current","getInitalData","_ref","workHours","daysOpen","filter","_ref2","open","map","_ref3","day","daysTime","reduce","acc","_ref4","_objectSpread2","start","time","finish","exportDefault","_ref5","_data$timezone$name","_data$timezone","data","saveRef","_ref5$onChange","onChange","_useState2","hasChangesMultiple","setHasChangesMultiple","_useState4","hasChangesTimeZone","setHasChangesTimeZone","showMultipleBHForm","showCustomTemplate","onChangeTimezone","onChangeMultipleBHForm","_useForm","values","handlers","hasUnsavedChanges","form","createElement","maxWidth","w","alignSelf","hasChangesAndIsValid","timezone","timezoneName","hasChanges"],"mappings":"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"}