)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/analytics/Overview.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Skeleton } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useEffect, useState, useMemo } from 'react';\n\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\n\nconst initialData: { title?: string; value: string | number }[] = Array.from({ length: 3 }).map(() => ({ title: undefined, value: '' }));\n\nconst conversationsInitialData = [initialData, initialData];\nconst productivityInitialData = [initialData];\n\nconst Overview = ({ type, dateRange, departmentId }: { type: string; dateRange: { start: string; end: string }; departmentId: string }) => {\n\tconst t = useTranslation();\n\n\tconst { start, end } = dateRange;\n\n\tconst params = useMemo(\n\t\t() => ({\n\t\t\tname: type,\n\t\t\tfrom: start,\n\t\t\tto: end,\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId, end, start, type],\n\t);\n\n\tconst loadData = useEndpoint('GET', '/v1/livechat/analytics/overview');\n\n\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\n\n\tuseEffect(() => {\n\t\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\n\t}, [type]);\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tif (!start || !end) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst value = await loadData(params);\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (value.length > 3) {\n\t\t\t\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\n\t\t\t}\n\n\t\t\tsetDisplayData([value]);\n\t\t}\n\t\tfetchData();\n\t}, [start, end, loadData, params]);\n\n\treturn (\n\t\t<Box pb={28} flexDirection='column'>\n\t\t\t{displayData.map((items = [], i) => (\n\t\t\t\t<CounterRow key={i} border='0' pb='none'>\n\t\t\t\t\t{items.map(({ title, value }, i) => (\n\t\t\t\t\t\t<CounterItem\n\t\t\t\t\t\t\tflexShrink={1}\n\t\t\t\t\t\t\tpb={8}\n\t\t\t\t\t\t\tflexBasis='100%'\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\ttitle={title ? t(title as TranslationKey) : <Skeleton width='x60' />}\n\t\t\t\t\t\t\tcount={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CounterRow>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Overview;\n",null],"names":["module","link","default","_regeneratorRuntime","_slicedToArray","_objectSpread","Box","Skeleton","useEndpoint","useTranslation","v","React","useEffect","useState","useMemo","CounterItem","CounterRow","initialData","Array","from","length","map","title","undefined","value","conversationsInitialData","productivityInitialData","exportDefault","_ref","type","dateRange","departmentId","t","start","end","params","name","to","loadData","_useState2","displayData","setDisplayData","async","_context","prev","next","abrupt","awrap","sent","slice","stop","Promise","createElement","pb","flexDirection","items","arguments","i","key","border","_ref2","flexShrink","flexBasis","width","count"],"mappings":"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"}