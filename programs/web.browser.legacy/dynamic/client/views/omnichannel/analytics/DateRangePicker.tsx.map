)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/analytics/DateRangePicker.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, InputBox, Menu, Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Moment } from 'moment';\nimport moment from 'moment';\nimport type { ComponentProps } from 'react';\nimport React, { useState, useMemo, useEffect } from 'react';\n\nmoment.locale('en');\n\ntype DateRangePickerProps = Omit<ComponentProps<typeof Box>, 'onChange'> & {\n\tonChange(range: { start: string; end: string }): void;\n};\n\nconst formatToDateInput = (date: Moment) => date.format('YYYY-MM-DD');\n\nconst todayDate = formatToDateInput(moment());\n\nconst getMonthRange = (monthsToSubtractFromToday: number) => ({\n\tstart: formatToDateInput(moment().subtract(monthsToSubtractFromToday, 'month').date(1)),\n\tend: formatToDateInput(monthsToSubtractFromToday === 0 ? moment() : moment().subtract(monthsToSubtractFromToday).date(0)),\n});\n\nconst getWeekRange = (daysToSubtractFromStart: number, daysToSubtractFromEnd: number) => ({\n\tstart: formatToDateInput(moment().subtract(daysToSubtractFromStart, 'day')),\n\tend: formatToDateInput(moment().subtract(daysToSubtractFromEnd, 'day')),\n});\n\nconst DateRangePicker = ({ onChange = () => undefined, ...props }: DateRangePickerProps) => {\n\tconst t = useTranslation();\n\tconst [range, setRange] = useState({ start: '', end: '' });\n\n\tconst { start, end } = range;\n\n\tconst handleStart = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tstart: currentTarget.value,\n\t\t\tend: range.end,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleEnd = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tend: currentTarget.value,\n\t\t\tstart: range.start,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleRange = useMutableCallback((range) => {\n\t\tsetRange(range);\n\t\tonChange(range);\n\t});\n\n\tuseEffect(() => {\n\t\thandleRange({\n\t\t\tstart: todayDate,\n\t\t\tend: todayDate,\n\t\t});\n\t}, [handleRange]);\n\n\tconst options = useMemo(\n\t\t() => ({\n\t\t\ttoday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Today'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(0, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tyesterday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Yesterday'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(1, 1));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(7, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tpreviousWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(14, 7));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tlastMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(1));\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t\t[handleRange, t],\n\t);\n\n\treturn (\n\t\t<Box {...props}>\n\t\t\t<Box mi='neg-x4' height='full' display='flex' flexDirection='row'>\n\t\t\t\t<Field mi={4} flexShrink={1} flexGrow={1}>\n\t\t\t\t\t<FieldLabel>{t('Start')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<Box height='x40' display='flex' width='full'>\n\t\t\t\t\t\t\t<InputBox type='date' onChange={handleStart} max={todayDate} value={start} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field mi={4} flexShrink={1} flexGrow={1}>\n\t\t\t\t\t<FieldLabel>{t('End')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<Box height='x40' display='flex' width='full'>\n\t\t\t\t\t\t\t<InputBox type='date' onChange={handleEnd} min={start} max={todayDate} value={end} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Menu mis={8} options={options} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default DateRangePicker;\n",null],"names":["_slicedToArray","_objectWithoutProperties","Box","InputBox","Menu","Field","FieldLabel","FieldRow","useMutableCallback","useTranslation","moment","React","useState","useMemo","useEffect","module","link","default","v","locale","formatToDateInput","date","format","todayDate","getMonthRange","monthsToSubtractFromToday","start","subtract","end","getWeekRange","daysToSubtractFromStart","daysToSubtractFromEnd","exportDefault","_ref","_ref$onChange","onChange","props","_excluded","t","_useState2","range","setRange","handleStart","_ref2","rangeObj","currentTarget","value","handleEnd","_ref3","handleRange","options","today","icon","label","action","yesterday","thisWeek","previousWeek","thisMonth","lastMonth","createElement","mi","height","display","flexDirection","flexShrink","flexGrow","width","type","max","min","mis"],"mappings":"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"}