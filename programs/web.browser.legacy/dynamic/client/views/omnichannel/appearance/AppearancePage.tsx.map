)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/appearance/AppearancePage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISetting, Serialized } from '@rocket.chat/core-typings';\nimport { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React from 'react';\n\nimport Page from '../../../components/Page';\nimport { useForm } from '../../../hooks/useForm';\nimport AppearanceForm from './AppearanceForm';\n\ntype LivechatAppearanceSettings = {\n\tLivechat_title: string;\n\tLivechat_title_color: string;\n\tLivechat_show_agent_info: boolean;\n\tLivechat_show_agent_email: boolean;\n\tLivechat_display_offline_form: boolean;\n\tLivechat_offline_form_unavailable: string;\n\tLivechat_offline_message: string;\n\tLivechat_offline_title: string;\n\tLivechat_offline_title_color: string;\n\tLivechat_offline_email: string;\n\tLivechat_offline_success_message: string;\n\tLivechat_registration_form: boolean;\n\tLivechat_name_field_registration_form: boolean;\n\tLivechat_email_field_registration_form: boolean;\n\tLivechat_registration_form_message: string;\n\tLivechat_conversation_finished_message: string;\n\tLivechat_conversation_finished_text: string;\n\tLivechat_enable_message_character_limit: boolean;\n\tLivechat_message_character_limit: number;\n};\n\ntype AppearanceSettings = Partial<LivechatAppearanceSettings>;\n\nconst reduceAppearance = (settings: Serialized<ISetting>[]): AppearanceSettings =>\n\tsettings.reduce<Partial<LivechatAppearanceSettings>>((acc, { _id, value }) => {\n\t\tacc = { ...acc, [_id]: value };\n\t\treturn acc;\n\t}, {});\n\ntype AppearancePageProps = {\n\tsettings: Serialized<ISetting>[];\n};\n\nconst AppearancePage: FC<AppearancePageProps> = ({ settings }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst save = useEndpoint('POST', '/v1/livechat/appearance');\n\n\tconst { values, handlers, commit, reset, hasUnsavedChanges } = useForm(reduceAppearance(settings));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst mappedAppearance = Object.entries(values).map(([_id, value]) => ({ _id, value })) as {\n\t\t\t_id: string;\n\t\t\tvalue: string | boolean | number;\n\t\t}[];\n\n\t\ttry {\n\t\t\tawait save(mappedAppearance);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t\tcommit();\n\t\t} catch (error: unknown) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Appearance')}></Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<AppearanceForm values={values} handlers={handlers} />\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t<Page.Footer isDirty={hasUnsavedChanges}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={() => reset()}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasUnsavedChanges}>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Footer>\n\t\t</Page>\n\t);\n};\n\nexport default AppearancePage;\n",null],"names":["_regeneratorRuntime","_slicedToArray","_objectSpread","ButtonGroup","Button","Box","useMutableCallback","useToastMessageDispatch","useEndpoint","useTranslation","React","Page","useForm","AppearanceForm","module","link","default","v","exportDefault","_ref2","settings","t","dispatchToastMessage","save","_useForm","reduce","acc","_ref","_objectSpread2","_id","value","values","handlers","commit","reset","hasUnsavedChanges","handleSave","mappedAppearance","async","_context","prev","next","Object","entries","map","_ref3","_ref4","awrap","type","message","t0","stop","Promise","createElement","Header","title","ScrollableContentWithShadow","maxWidth","w","alignSelf","Footer","isDirty","onClick","primary","disabled"],"mappings":"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"}