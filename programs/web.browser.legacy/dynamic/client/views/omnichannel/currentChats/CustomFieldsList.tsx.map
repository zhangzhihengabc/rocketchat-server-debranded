)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/currentChats/CustomFieldsList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatCustomField } from '@rocket.chat/core-typings';\nimport { Field, FieldLabel, FieldRow, TextInput, Select } from '@rocket.chat/fuselage';\nimport { useTranslation, useRoute } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, Dispatch, SetStateAction } from 'react';\nimport React, { useEffect } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { Contextualbar, ContextualbarScrollableContent, ContextualbarHeader, ContextualbarClose } from '../../../components/Contextualbar';\n\ntype CustomFieldsListProps = {\n\tsetCustomFields: Dispatch<SetStateAction<{ [key: string]: string } | undefined>>;\n\tallCustomFields: ILivechatCustomField[];\n};\n\nconst CustomFieldsList = ({ setCustomFields, allCustomFields }: CustomFieldsListProps): ReactElement => {\n\tconst { register, watch, control } = useForm({ mode: 'onChange' });\n\n\t// TODO: When we refactor the other CurrentChat's fields to use react-hook-form, we need to change this to use the form controller\n\n\tuseEffect(() => {\n\t\tconst subscription = watch((value) => setCustomFields(value));\n\t\treturn (): void => subscription.unsubscribe();\n\t}, [setCustomFields, watch]);\n\n\tconst t = useTranslation();\n\tconst currentChatsRoute = useRoute('omnichannel-current-chats');\n\n\treturn (\n\t\t<Contextualbar>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t{t('Filter_by_Custom_Fields')}\n\t\t\t\t<ContextualbarClose onClick={(): void => currentChatsRoute.push({ context: '' })} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent is='form'>\n\t\t\t\t{/* TODO: REMOVE FILTER ONCE THE ENDPOINT SUPPORTS A SCOPE PARAMETER */}\n\t\t\t\t{allCustomFields\n\t\t\t\t\t.filter((customField) => customField.scope !== 'visitor')\n\t\t\t\t\t.map((customField: ILivechatCustomField) => {\n\t\t\t\t\t\tif (customField.type === 'select') {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Field key={customField._id}>\n\t\t\t\t\t\t\t\t\t<FieldLabel>{customField.label}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname={customField._id}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Select {...field} options={(customField.options || '').split(',').map((item) => [item, item])} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Field key={customField._id}>\n\t\t\t\t\t\t\t\t<FieldLabel>{customField.label}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput flexGrow={1} {...register(customField._id)} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</ContextualbarScrollableContent>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default CustomFieldsList;\n",null],"names":["_extends","Field","FieldLabel","FieldRow","TextInput","Select","useTranslation","useRoute","React","useEffect","Controller","useForm","Contextualbar","ContextualbarScrollableContent","ContextualbarHeader","ContextualbarClose","module","link","default","v","exportDefault","_ref","setCustomFields","allCustomFields","_useForm","mode","register","watch","control","subscription","value","unsubscribe","t","currentChatsRoute","createElement","onClick","push","context","is","filter","customField","scope","map","type","key","_id","label","name","render","_ref2","field","options","split","item","flexGrow"],"mappings":"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"}