function module(e,t,n){var r,a,i,o,c,l,s,u,m,d,h,f,k,y,g,v,p,E,C,T,_,b,P,S,w,x,q,I,B,F,O,G,L,A,N,M,R=["current","itemsPerPage","setItemsPerPage","setCurrent"];n.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},3),n.link("@rocket.chat/fuselage",{Callout:function(e){c=e},Pagination:function(e){l=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){s=e}},1),n.link("@rocket.chat/ui-contexts",{usePermission:function(e){u=e},useTranslation:function(e){m=e}},2),n.link("@tanstack/react-query",{hashQueryKey:function(e){d=e}},3),n.link("moment",{default:function(e){h=e}},4),n.link("react",{default:function(e){f=e},memo:function(e){k=e},useCallback:function(e){y=e},useMemo:function(e){g=e},useState:function(e){v=e}},5),n.link("../../../../ee/client/omnichannel/components/RoomActivityIcon",{RoomActivityIcon:function(e){p=e}},6),n.link("../../../../ee/client/omnichannel/hooks/useOmnichannelPriorities",{useOmnichannelPriorities:function(e){E=e}},7),n.link("../../../../ee/client/omnichannel/priorities/PriorityIcon",{PriorityIcon:function(e){C=e}},8),n.link("../../../components/GenericNoResults",{default:function(e){T=e}},9),n.link("../../../components/GenericTable",{GenericTable:function(e){_=e},GenericTableBody:function(e){b=e},GenericTableCell:function(e){P=e},GenericTableHeader:function(e){S=e},GenericTableHeaderCell:function(e){w=e},GenericTableLoadingTable:function(e){x=e},GenericTableRow:function(e){q=e}},10),n.link("../../../components/GenericTable/hooks/usePagination",{usePagination:function(e){I=e}},11),n.link("../../../components/GenericTable/hooks/useSort",{useSort:function(e){B=e}},12),n.link("../../../components/Page",{default:function(e){F=e}},13),n.link("../../../hooks/omnichannel/useIsOverMacLimit",{useIsOverMacLimit:function(e){O=e}},14),n.link("./CustomFieldsList",{default:function(e){G=e}},15),n.link("./FilterByText",{default:function(e){L=e}},16),n.link("./RemoveChatButton",{default:function(e){A=e}},17),n.link("./hooks/useAllCustomFields",{useAllCustomFields:function(e){N=e}},18),n.link("./hooks/useCurrentChats",{useCurrentChats:function(e){M=e}},19);var j=function(e){return"asc"===e?1:-1},D=function(e,t,n,r,a){var c,l=e.guest,s=e.servedBy,u=e.department,m=e.status,d=e.from,f=e.to,k=e.tags,y=o(n,2),g=y[0],v=y[1],p=i(i(i({},l&&{roomName:l}),{},{sort:JSON.stringify(((c={})[g]=j(v),c.ts="ts"===g?j(v):void 0,c))},a&&{count:a}),r&&{offset:r});if((d||f)&&(p.createdAt=JSON.stringify(i(i({},d&&{start:h(new Date(d)).set({hour:0,minutes:0,seconds:0}).toISOString()}),f&&{end:h(new Date(f)).set({hour:23,minutes:59,seconds:59}).toISOString()}))),"all"!==m&&(p.open="opened"===m||"onhold"===m,p.onhold="onhold"===m),s&&"all"!==s&&(p.agents=[s]),u&&"all"!==u&&(p.departmentId=u),k&&k.length>0&&(p.tags=k),t&&Object.keys(t).length>0){var E=Object.fromEntries(Object.entries(t).filter(function(e){return void 0!==e[1]&&""!==e[1]}));Object.keys(E).length>0&&(p.customFields=JSON.stringify(E))}return p};n.exportDefault(k(function(e){var t=e.id,n=e.onRowClick,k=O(),j=B("ts","desc"),H=j.sortBy,W=j.sortDirection,J=j.setSort,K=o(v(),2),Q=K[0],z=K[1],U=m(),V=u("remove-closed-livechat-room"),X=E().enabled,Y=N().data,Z=I(),$=Z.current,ee=Z.itemsPerPage,et=Z.setItemsPerPage,en=Z.setCurrent,er=a(Z,R),ea=o(v({guest:"",fname:"",servedBy:"",status:"all",department:"",from:"",to:"",tags:[]}),2),ei=ea[0],eo=ea[1],ec=g(function(){var e;return!!(null!=Y&&null!==(e=Y.customFields)&&void 0!==e&&e.find(function(e){return"room"===e.scope}))},[Y]),el=g(function(){return D(ei,Q,[H,W],$,ee)},[Q,ee,ei,H,W,$]),es=M(el),eu=es.data,em=es.isLoading,ed=es.isSuccess,eh=o(v(d([el])),1)[0]!==d([el]),ef=s(function(e){eo(e),en(0)}),ek=y(function(e){var t=e._id,r=e.fname,a=e.servedBy,i=e.ts,o=e.lm,c=e.department,l=e.open,s=e.onHold,u=e.priorityWeight;return f.createElement(q,{key:t,onClick:function(){return n(t)},action:!0},X&&f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-priority"},f.createElement(C,{level:u})),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-name"},r),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-department"},c?c.name:""),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-servedBy"},null==a?void 0:a.username),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-startedAt"},h(i).format("L LTS")),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-lastMessage"},h(o).format("L LTS")),f.createElement(P,{withTruncatedText:!0,"data-qa":"current-chats-cell-status"},f.createElement(p,{room:e})," ",l?s?U("On_Hold_Chats"):U("Open"):U("Closed")),V&&!l&&f.createElement(A,{_id:t}))},[V,n,X,U]),ey=f.createElement(f.Fragment,null,X&&f.createElement(w,{key:"priorityWeight",direction:W,active:"priorityWeight"===H,onClick:J,sort:"priorityWeight",w:"x100",alignItems:"center"},U("Priority")),f.createElement(w,{key:"fname",direction:W,active:"fname"===H,onClick:J,sort:"fname","data-qa":"current-chats-header-name"},U("Name")),f.createElement(w,{key:"departmentId",direction:W,active:"departmentId"===H,onClick:J,sort:"departmentId","data-qa":"current-chats-header-department"},U("Department")),f.createElement(w,{key:"servedBy",direction:W,active:"servedBy"===H,onClick:J,sort:"servedBy","data-qa":"current-chats-header-servedBy"},U("Served_By")),f.createElement(w,{key:"ts",direction:W,active:"ts"===H,onClick:J,sort:"ts","data-qa":"current-chats-header-startedAt"},U("Started_At")),f.createElement(w,{key:"lm",direction:W,active:"lm"===H,onClick:J,sort:"lm","data-qa":"current-chats-header-lastMessage"},U("Last_Message")),f.createElement(w,{key:"open",direction:W,active:"open"===H,onClick:J,sort:"open",w:"x100","data-qa":"current-chats-header-status"},U("Status")),V&&f.createElement(w,{key:"remove",w:"x60","data-qa":"current-chats-header-remove"},U("Remove")));return f.createElement(F,{flexDirection:"row"},f.createElement(F,null,f.createElement(F.Header,{title:U("Current_Chats")}),f.createElement(F.Content,null,(ed&&(null==eu?void 0:eu.rooms.length)>0||eh)&&f.createElement(L,{setFilter:ef,setCustomFields:z,customFields:Q,hasCustomFields:ec}),k&&f.createElement(c,{type:"danger",icon:"warning",title:U("The_workspace_has_exceeded_the_monthly_limit_of_active_contacts"),style:{marginBlock:"2rem"}},U("Talk_to_your_workspace_admin_to_address_this_issue")),ed&&(null==eu?void 0:eu.rooms.length)===0&&eh&&f.createElement(T,null),ed&&(null==eu?void 0:eu.rooms.length)===0&&!eh&&f.createElement(T,{icon:"discussion",title:U("No_chats_yet"),description:U("No_chats_yet_description"),linkHref:"https://go.rocket.chat/omnichannel-docs",linkText:U("Learn_more_about_current_chats")}),em&&f.createElement(_,null,f.createElement(S,null,ey),f.createElement(b,null,f.createElement(x,{headerCells:6}))),ed&&(null==eu?void 0:eu.rooms.length)>0&&f.createElement(f.Fragment,null,f.createElement(_,null,f.createElement(S,null,ey),f.createElement(b,{"data-qa":"GenericTableCurrentChatsBody"},eu.rooms.map(function(e){return ek(i({},e))}))),f.createElement(l,r({divider:!0,current:$,itemsPerPage:ee,count:eu.total,onSetItemsPerPage:et,onSetCurrent:en},er))))),"custom-fields"===t&&ec&&f.createElement(G,{setCustomFields:z,allCustomFields:(null==Y?void 0:Y.customFields)||[]}))}))}
//# sourceMappingURL=/dynamic/client/views/omnichannel/currentChats/94f19847a65b5381b56e10de3706f415e680a9df.map
