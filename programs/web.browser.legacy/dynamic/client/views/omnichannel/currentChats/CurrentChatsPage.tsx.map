)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/currentChats/CurrentChatsPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Callout, Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { GETLivechatRoomsParams } from '@rocket.chat/rest-typings';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport moment from 'moment';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport { RoomActivityIcon } from '../../../../ee/client/omnichannel/components/RoomActivityIcon';\nimport { useOmnichannelPriorities } from '../../../../ee/client/omnichannel/hooks/useOmnichannelPriorities';\nimport { PriorityIcon } from '../../../../ee/client/omnichannel/priorities/PriorityIcon';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport Page from '../../../components/Page';\nimport { useIsOverMacLimit } from '../../../hooks/omnichannel/useIsOverMacLimit';\nimport CustomFieldsList from './CustomFieldsList';\nimport FilterByText from './FilterByText';\nimport RemoveChatButton from './RemoveChatButton';\nimport { useAllCustomFields } from './hooks/useAllCustomFields';\nimport { useCurrentChats } from './hooks/useCurrentChats';\n\ntype DebouncedParams = {\n\tfname: string;\n\tguest: string;\n\tservedBy: string;\n\tdepartment: string;\n\tstatus: string;\n\tfrom: string;\n\tto: string;\n\ttags: any[];\n};\n\ntype CurrentChatQuery = {\n\tagents?: string[];\n\toffset?: number;\n\troomName?: string;\n\tdepartmentId?: string;\n\topen?: boolean;\n\tcreatedAt?: string;\n\tclosedAt?: string;\n\ttags?: string[];\n\tonhold?: boolean;\n\tcustomFields?: string;\n\tsort: string;\n\tcount?: number;\n};\n\ntype useQueryType = (\n\tdebouncedParams: DebouncedParams,\n\tcustomFields: { [key: string]: string } | undefined,\n\t[column, direction]: [string, 'asc' | 'desc'],\n\tcurrent: number,\n\titemsPerPage: 25 | 50 | 100,\n) => GETLivechatRoomsParams;\n\nconst sortDir = (sortDir: 'asc' | 'desc'): 1 | -1 => (sortDir === 'asc' ? 1 : -1);\n\nconst currentChatQuery: useQueryType = (\n\t{ guest, servedBy, department, status, from, to, tags },\n\tcustomFields,\n\t[column, direction],\n\tcurrent,\n\titemsPerPage,\n) => {\n\tconst query: CurrentChatQuery = {\n\t\t...(guest && { roomName: guest }),\n\t\tsort: JSON.stringify({\n\t\t\t[column]: sortDir(direction),\n\t\t\tts: column === 'ts' ? sortDir(direction) : undefined,\n\t\t}),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tif (from || to) {\n\t\tquery.createdAt = JSON.stringify({\n\t\t\t...(from && {\n\t\t\t\tstart: moment(new Date(from)).set({ hour: 0, minutes: 0, seconds: 0 }).toISOString(),\n\t\t\t}),\n\t\t\t...(to && {\n\t\t\t\tend: moment(new Date(to)).set({ hour: 23, minutes: 59, seconds: 59 }).toISOString(),\n\t\t\t}),\n\t\t});\n\t}\n\n\tif (status !== 'all') {\n\t\tquery.open = status === 'opened' || status === 'onhold';\n\t\tquery.onhold = status === 'onhold';\n\t}\n\tif (servedBy && servedBy !== 'all') {\n\t\tquery.agents = [servedBy];\n\t}\n\tif (department && department !== 'all') {\n\t\tquery.departmentId = department;\n\t}\n\n\tif (tags && tags.length > 0) {\n\t\tquery.tags = tags;\n\t}\n\n\tif (customFields && Object.keys(customFields).length > 0) {\n\t\tconst customFieldsQuery = Object.fromEntries(Object.entries(customFields).filter((item) => item[1] !== undefined && item[1] !== ''));\n\t\tif (Object.keys(customFieldsQuery).length > 0) {\n\t\t\tquery.customFields = JSON.stringify(customFieldsQuery);\n\t\t}\n\t}\n\n\treturn query;\n};\n\nconst CurrentChatsPage = ({ id, onRowClick }: { id?: string; onRowClick: (_id: string) => void }): ReactElement => {\n\tconst isWorkspaceOverMacLimit = useIsOverMacLimit();\n\tconst { sortBy, sortDirection, setSort } = useSort<'fname' | 'departmentId' | 'servedBy' | 'priorityWeight' | 'ts' | 'lm' | 'open'>(\n\t\t'ts',\n\t\t'desc',\n\t);\n\tconst [customFields, setCustomFields] = useState<{ [key: string]: string }>();\n\n\tconst t = useTranslation();\n\n\tconst canRemoveClosedChats = usePermission('remove-closed-livechat-room');\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst { data: allCustomFields } = useAllCustomFields();\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst [params, setParams] = useState({\n\t\tguest: '',\n\t\tfname: '',\n\t\tservedBy: '',\n\t\tstatus: 'all',\n\t\tdepartment: '',\n\t\tfrom: '',\n\t\tto: '',\n\t\ttags: [] as string[],\n\t});\n\n\tconst hasCustomFields = useMemo(\n\t\t() => !!allCustomFields?.customFields?.find((customField) => customField.scope === 'room'),\n\t\t[allCustomFields],\n\t);\n\n\tconst query = useMemo(\n\t\t() => currentChatQuery(params, customFields, [sortBy, sortDirection], current, itemsPerPage),\n\t\t[customFields, itemsPerPage, params, sortBy, sortDirection, current],\n\t);\n\n\tconst { data, isLoading, isSuccess } = useCurrentChats(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onFilter = useMutableCallback((params: DebouncedParams): void => {\n\t\tsetParams(params);\n\t\tsetCurrent(0);\n\t});\n\n\tconst renderRow = useCallback(\n\t\t(room) => {\n\t\t\tconst { _id, fname, servedBy, ts, lm, department, open, onHold, priorityWeight } = room;\n\t\t\tconst getStatusText = (open: boolean, onHold: boolean): string => {\n\t\t\t\tif (!open) return t('Closed');\n\t\t\t\treturn onHold ? t('On_Hold_Chats') : t('Open');\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<GenericTableRow key={_id} onClick={(): void => onRowClick(_id)} action>\n\t\t\t\t\t{isPriorityEnabled && (\n\t\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-priority'>\n\t\t\t\t\t\t\t<PriorityIcon level={priorityWeight} />\n\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-name'>\n\t\t\t\t\t\t{fname}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-department'>\n\t\t\t\t\t\t{department ? department.name : ''}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-servedBy'>\n\t\t\t\t\t\t{servedBy?.username}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-startedAt'>\n\t\t\t\t\t\t{moment(ts).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-lastMessage'>\n\t\t\t\t\t\t{moment(lm).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-status'>\n\t\t\t\t\t\t<RoomActivityIcon room={room} /> {getStatusText(open, onHold)}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t{canRemoveClosedChats && !open && <RemoveChatButton _id={_id} />}\n\t\t\t\t</GenericTableRow>\n\t\t\t);\n\t\t},\n\t\t[canRemoveClosedChats, onRowClick, isPriorityEnabled, t],\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t{isPriorityEnabled && (\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='priorityWeight'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === 'priorityWeight'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='priorityWeight'\n\t\t\t\t\tw='x100'\n\t\t\t\t\talignItems='center'\n\t\t\t\t>\n\t\t\t\t\t{t('Priority')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='fname'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'fname'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='fname'\n\t\t\t\tdata-qa='current-chats-header-name'\n\t\t\t>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='departmentId'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'departmentId'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='departmentId'\n\t\t\t\tdata-qa='current-chats-header-department'\n\t\t\t>\n\t\t\t\t{t('Department')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='servedBy'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'servedBy'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='servedBy'\n\t\t\t\tdata-qa='current-chats-header-servedBy'\n\t\t\t>\n\t\t\t\t{t('Served_By')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='ts'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='ts'\n\t\t\t\tdata-qa='current-chats-header-startedAt'\n\t\t\t>\n\t\t\t\t{t('Started_At')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lm'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lm'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lm'\n\t\t\t\tdata-qa='current-chats-header-lastMessage'\n\t\t\t>\n\t\t\t\t{t('Last_Message')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='open'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'open'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='open'\n\t\t\t\tw='x100'\n\t\t\t\tdata-qa='current-chats-header-status'\n\t\t\t>\n\t\t\t\t{t('Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{canRemoveClosedChats && (\n\t\t\t\t<GenericTableHeaderCell key='remove' w='x60' data-qa='current-chats-header-remove'>\n\t\t\t\t\t{t('Remove')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t</>\n\t);\n\n\t// TODO: Missing error state\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<Page.Header title={t('Current_Chats')} />\n\t\t\t\t<Page.Content>\n\t\t\t\t\t{((isSuccess && data?.rooms.length > 0) || queryHasChanged) && (\n\t\t\t\t\t\t<FilterByText\n\t\t\t\t\t\t\tsetFilter={onFilter as ComponentProps<typeof FilterByText>['setFilter']}\n\t\t\t\t\t\t\tsetCustomFields={setCustomFields}\n\t\t\t\t\t\t\tcustomFields={customFields}\n\t\t\t\t\t\t\thasCustomFields={hasCustomFields}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isWorkspaceOverMacLimit && (\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\ttype='danger'\n\t\t\t\t\t\t\ticon='warning'\n\t\t\t\t\t\t\ttitle={t('The_workspace_has_exceeded_the_monthly_limit_of_active_contacts')}\n\t\t\t\t\t\t\tstyle={{ marginBlock: '2rem' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Talk_to_your_workspace_admin_to_address_this_issue')}\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && !queryHasChanged && (\n\t\t\t\t\t\t<GenericNoResults\n\t\t\t\t\t\t\ticon='discussion'\n\t\t\t\t\t\t\ttitle={t('No_chats_yet')}\n\t\t\t\t\t\t\tdescription={t('No_chats_yet_description')}\n\t\t\t\t\t\t\tlinkHref='https://go.rocket.chat/omnichannel-docs'\n\t\t\t\t\t\t\tlinkText={t('Learn_more_about_current_chats')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={6} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableCurrentChatsBody'>\n\t\t\t\t\t\t\t\t\t{data.rooms.map((room) => renderRow({ ...room }))}\n\t\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\tdivider\n\t\t\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\t\t\tcount={data.total}\n\t\t\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Page.Content>\n\t\t\t</Page>\n\t\t\t{id === 'custom-fields' && hasCustomFields && (\n\t\t\t\t<CustomFieldsList setCustomFields={setCustomFields} allCustomFields={allCustomFields?.customFields || []} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default memo(CurrentChatsPage);\n",null],"names":["_extends","_objectWithoutProperties","_objectSpread","_slicedToArray","Callout","Pagination","useMutableCallback","usePermission","useTranslation","hashQueryKey","moment","React","memo","useCallback","useMemo","useState","RoomActivityIcon","useOmnichannelPriorities","PriorityIcon","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","Page","useIsOverMacLimit","CustomFieldsList","FilterByText","RemoveChatButton","useAllCustomFields","useCurrentChats","module","link","default","v","sortDir","currentChatQuery","_ref","customFields","_ref2","current","itemsPerPage","_JSON$stringify","guest","servedBy","department","status","from","to","tags","_ref3","column","direction","query","roomName","sort","JSON","stringify","ts","undefined","count","offset","createdAt","start","Date","set","hour","minutes","seconds","toISOString","end","open","onhold","agents","departmentId","length","Object","keys","customFieldsQuery","fromEntries","entries","filter","item","exportDefault","_ref4","id","onRowClick","isWorkspaceOverMacLimit","_useSort","sortBy","sortDirection","setSort","_useState2","setCustomFields","t","canRemoveClosedChats","isPriorityEnabled","_useOmnichannelPriori","enabled","allCustomFields","_useAllCustomFields","data","_usePagination","setItemsPerPage","setCurrent","paginationProps","_excluded","_useState4","fname","params","setParams","hasCustomFields","_allCustomFields$cust","find","customField","scope","_useCurrentChats","isLoading","isSuccess","queryHasChanged","defaultQuery","_useState6","onFilter","renderRow","room","_id","lm","onHold","priorityWeight","createElement","key","onClick","action","withTruncatedText","level","name","username","format","headers","Fragment","active","w","alignItems","flexDirection","Header","title","Content","rooms","setFilter","type","icon","style","marginBlock","description","linkHref","linkText","headerCells","map","divider","total","onSetItemsPerPage","onSetCurrent"],"mappings":"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"}