)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/contactHistory/MessageList/ContactHistoryMessage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport {\n\tMessage as MessageTemplate,\n\tMessageLeftContainer,\n\tMessageContainer,\n\tMessageBody,\n\tMessageDivider,\n\tMessageName,\n\tMessageUsername,\n\tMessageTimestamp,\n\tMessageHeader as MessageHeaderTemplate,\n\tMessageSystem,\n\tMessageSystemLeftContainer,\n\tMessageSystemContainer,\n\tMessageSystemBlock,\n\tMessageSystemName,\n\tMessageSystemBody,\n\tMessageSystemTimestamp,\n} from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { memo } from 'react';\n\nimport { getUserDisplayName } from '../../../../../lib/getUserDisplayName';\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport StatusIndicators from '../../../../components/message/StatusIndicators';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useChat } from '../../../room/contexts/ChatContext';\n\nconst ContactHistoryMessage: FC<{\n\tmessage: IMessage;\n\tsequential: boolean;\n\tisNewDay: boolean;\n\tshowUserAvatar: boolean;\n}> = ({ message, sequential, isNewDay, showUserAvatar }) => {\n\tconst format = useFormatDate();\n\tconst formatTime = useFormatTime();\n\n\tconst t = useTranslation();\n\tconst chat = useChat();\n\n\tif (message.t === 'livechat-close') {\n\t\treturn (\n\t\t\t<MessageSystem>\n\t\t\t\t<MessageSystemLeftContainer>\n\t\t\t\t\t{showUserAvatar && (\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\turl={message.avatar}\n\t\t\t\t\t\t\tusername={message.u.username}\n\t\t\t\t\t\t\tsize='x18'\n\t\t\t\t\t\t\tonClick={chat?.userCard.open(message.u.username)}\n\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</MessageSystemLeftContainer>\n\t\t\t\t<MessageSystemContainer>\n\t\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t\t<MessageSystemName data-username={message.u.username} data-qa-type='username'>\n\t\t\t\t\t\t\t@{message.u.username}\n\t\t\t\t\t\t</MessageSystemName>\n\t\t\t\t\t\t<MessageSystemBody title={message.msg}>{t('Conversation_closed', { comment: message.msg })}</MessageSystemBody>\n\t\t\t\t\t\t<MessageSystemTimestamp title={formatTime(message.ts)}>{formatTime(message.ts)}</MessageSystemTimestamp>\n\t\t\t\t\t</MessageSystemBlock>\n\t\t\t\t</MessageSystemContainer>\n\t\t\t</MessageSystem>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{isNewDay && <MessageDivider>{format(message.ts)}</MessageDivider>}\n\t\t\t<MessageTemplate isPending={message.temp} sequential={sequential} role='listitem' data-qa='chat-history-message'>\n\t\t\t\t<MessageLeftContainer>\n\t\t\t\t\t{!sequential && message.u.username && showUserAvatar && (\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\turl={message.avatar}\n\t\t\t\t\t\t\tusername={message.u.username}\n\t\t\t\t\t\t\tsize='x36'\n\t\t\t\t\t\t\tonClick={chat?.userCard.open(message.u.username)}\n\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{sequential && <StatusIndicators message={message} />}\n\t\t\t\t</MessageLeftContainer>\n\n\t\t\t\t<MessageContainer>\n\t\t\t\t\t{!sequential && (\n\t\t\t\t\t\t<MessageHeaderTemplate>\n\t\t\t\t\t\t\t<MessageName title={`@${message.u.username}`} data-username={message.u.username}>\n\t\t\t\t\t\t\t\t{message.alias || getUserDisplayName(message.u.name, message.u.username, false)}\n\t\t\t\t\t\t\t</MessageName>\n\t\t\t\t\t\t\t<MessageUsername data-username={message.u.username} data-qa-type='username'>\n\t\t\t\t\t\t\t\t@{message.u.username}\n\t\t\t\t\t\t\t</MessageUsername>\n\t\t\t\t\t\t\t<MessageTimestamp title={formatTime(message.ts)}>{formatTime(message.ts)}</MessageTimestamp>\n\t\t\t\t\t\t\t<StatusIndicators message={message} />\n\t\t\t\t\t\t</MessageHeaderTemplate>\n\t\t\t\t\t)}\n\t\t\t\t\t{!message.blocks && message.md && (\n\t\t\t\t\t\t<MessageBody data-qa-type='message-body'>\n\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t</MessageBody>\n\t\t\t\t\t)}\n\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t{message.attachments && <Attachments attachments={message.attachments} />}\n\t\t\t\t</MessageContainer>\n\t\t\t</MessageTemplate>\n\t\t</>\n\t);\n};\n\nexport default memo(ContactHistoryMessage);\n",null],"names":["MessageTemplate","MessageLeftContainer","MessageContainer","MessageBody","MessageDivider","MessageName","MessageUsername","MessageTimestamp","MessageHeaderTemplate","MessageSystem","MessageSystemLeftContainer","MessageSystemContainer","MessageSystemBlock","MessageSystemName","MessageSystemBody","MessageSystemTimestamp","useTranslation","React","memo","getUserDisplayName","UserAvatar","MessageContentBody","StatusIndicators","Attachments","UiKitMessageBlock","useFormatDate","useFormatTime","useChat","module","link","Message","v","MessageHeader","exportDefault","_ref","message","sequential","isNewDay","showUserAvatar","format","formatTime","t","chat","createElement","url","avatar","username","u","size","onClick","userCard","open","style","cursor","title","msg","comment","ts","Fragment","isPending","temp","role","alias","name","blocks","md","mentions","channels","rid","mid","_id","attachments"],"mappings":"uBAiCA,IAhCAA,EACYC,EACXC,EAAoBC,EACpBC,EACAC,EACAC,EACAC,EACAC,EACgBC,EAChBC,EAAsCC,EAEtCC,EAA0BC,EAC1BC,EACAC,EAI8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAH9BC,EACAC,IAAA,CAAA,wBACA,CAAAC,QAAAA,SACAC,CAAAA,EAAM/B,EAAAA,CAAA,EAAAC,qBAAwB,SAAA8B,CAAA,EAAA9B,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAyB,cAAAA,SAAAA,CAAAA,EAAAxB,EAAAA,CAAA,EAAAC,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,2BAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAZ,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAd,EAAAA,CAAA,EAAAC,KAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAT,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2CAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,oDAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,kDAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,qDAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,yDAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAH,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAF,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAE,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAD,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAjB/BC,EAAOK,aACK,CAiHGf,EA7EV,SAAAgB,CAAA,EAAsD,IAAnDC,EAAOD,EAAPC,OAAO,CAAEC,EAAUF,EAAVE,UAAU,CAAEC,EAAQH,EAARG,QAAQ,CAAEC,EAAcJ,EAAdI,cAAc,CAC9CC,EAASd,IACTe,EAAad,IAEbe,EAAIzB,IACJ0B,EAAOf,UAEb,AAAIQ,AAAc,mBAAdA,EAAQM,CAAC,CAEXxB,EAAA0B,aAAA,CAAClC,EAAa,KACbQ,EAAA0B,aAAA,CAACjC,EAA0B,KACzB4B,GACArB,EAAA0B,aAAA,CAACvB,EAAU,CACVwB,IAAKT,EAAQU,MAAO,CACpBC,SAAUX,EAAQY,CAAC,CAACD,QAAS,CAC7BE,KAAK,MACLC,QAASP,MAAAA,EAAI,KAAA,EAAJA,EAAMQ,QAAQ,CAACC,IAAI,CAAChB,EAAQY,CAAC,CAACD,QAAQ,EAC/CM,MAAO,CAAEC,OAAQ,SAAS,CAAG,IAIhCpC,EAAA0B,aAAA,CAAChC,EAAsB,KACtBM,EAAA0B,aAAA,CAAC/B,EAAkB,KAClBK,EAAA0B,aAAA,CAAC9B,EAAiB,CAAC,gBAAesB,EAAQY,CAAC,CAACD,QAAS,CAAC,eAAa,UAAU,EAC5E,IAAEX,EAAQY,CAAC,CAACD,QAAQ,EAErB7B,EAAA0B,aAAA,CAAC7B,EAAiB,CAACwC,MAAOnB,EAAQoB,GAAAA,AAAI,EAAEd,EAAE,sBAAuB,CAAEe,QAASrB,EAAQoB,GAAAA,AAAG,IACvFtC,EAAA0B,aAAA,CAAC5B,EAAsB,CAACuC,MAAOd,EAAWL,EAAQsB,EAAE,CAAE,EAAEjB,EAAWL,EAAQsB,EAAE,MAQjFxC,EAAA0B,aAAA,CAAA1B,EAAAyC,QAAA,CAAA,KACErB,GAAYpB,EAAA0B,aAAA,CAACvC,EAAc,KAAEmC,EAAOJ,EAAQsB,EAAE,GAC/CxC,EAAA0B,aAAA,CAAC3C,EAAe,CAAC2D,UAAWxB,EAAQyB,IAAK,CAACxB,WAAYA,EAAYyB,KAAK,WAAW,UAAQ,sBAAsB,EAC/G5C,EAAA0B,aAAA,CAAC1C,EAAoB,KACnB,CAACmC,GAAcD,EAAQY,CAAC,CAACD,QAAQ,EAAIR,GACrCrB,EAAA0B,aAAA,CAACvB,EAAU,CACVwB,IAAKT,EAAQU,MAAO,CACpBC,SAAUX,EAAQY,CAAC,CAACD,QAAS,CAC7BE,KAAK,MACLC,QAASP,MAAAA,EAAI,KAAA,EAAJA,EAAMQ,QAAQ,CAACC,IAAI,CAAChB,EAAQY,CAAC,CAACD,QAAQ,EAC/CM,MAAO,CAAEC,OAAQ,SAAS,CAAG,GAG9BjB,GAAcnB,EAAA0B,aAAA,CAACrB,EAAgB,CAACa,QAASA,CAAQ,IAGnDlB,EAAA0B,aAAA,CAACzC,EAAgB,KACf,CAACkC,GACDnB,EAAA0B,aAAA,CAACnC,EAAqB,KACrBS,EAAA0B,aAAA,CAACtC,EAAW,CAACiD,MAAK,IAAMnB,EAAQY,CAAC,CAACD,QAAW,CAAC,gBAAeX,EAAQY,CAAC,CAACD,QAAAA,AAAS,EAC9EX,EAAQ2B,KAAK,EAAI3C,EAAmBgB,EAAQY,CAAC,CAACgB,IAAI,CAAE5B,EAAQY,CAAC,CAACD,QAAQ,CAAE,CAAA,IAE1E7B,EAAA0B,aAAA,CAACrC,EAAe,CAAC,gBAAe6B,EAAQY,CAAC,CAACD,QAAS,CAAC,eAAa,UAAU,EAC1E,IAAEX,EAAQY,CAAC,CAACD,QAAQ,EAErB7B,EAAA0B,aAAA,CAACpC,EAAgB,CAAC+C,MAAOd,EAAWL,EAAQsB,EAAE,CAAE,EAAEjB,EAAWL,EAAQsB,EAAE,GACvExC,EAAA0B,aAAA,CAACrB,EAAgB,CAACa,QAASA,CAAQ,IAGpC,CAACA,EAAQ6B,MAAM,EAAI7B,EAAQ8B,EAAE,EAC7BhD,EAAA0B,aAAA,CAACxC,EAAW,CAAC,eAAa,cAAc,EACvCc,EAAA0B,aAAA,CAACtB,EAAkB,CAAC4C,GAAI9B,EAAQ8B,EAAG,CAACC,SAAU/B,EAAQ+B,QAAS,CAACC,SAAUhC,EAAQgC,QAAAA,AAAS,IAG5FhC,EAAQ6B,MAAM,EAAI/C,EAAA0B,aAAA,CAACnB,EAAiB,CAAC4C,IAAKjC,EAAQiC,GAAI,CAACC,IAAKlC,EAAQmC,GAAI,CAACN,OAAQ7B,EAAQ6B,MAAAA,AAAO,GAChG7B,EAAQoC,WAAW,EAAItD,EAAA0B,aAAA,CAACpB,EAAW,CAACgD,YAAapC,EAAQoC,WAAAA,AAAY,KAK3E"}