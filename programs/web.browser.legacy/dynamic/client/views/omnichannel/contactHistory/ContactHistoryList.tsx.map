)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/contactHistory/ContactHistoryList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Margins, TextInput, Icon, Throbber, States, StatesIcon, StatesTitle, StatesSubtitle } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent, Dispatch, ReactElement, SetStateAction } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarContent,\n\tContextualbarTitle,\n\tContextualbarIcon,\n\tContextualbarClose,\n\tContextualbarEmptyContent,\n} from '../../../components/Contextualbar';\nimport ScrollableContentWrapper from '../../../components/ScrollableContentWrapper';\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../lib/asyncState';\nimport { useOmnichannelRoom } from '../../room/contexts/RoomContext';\nimport ContactHistoryItem from './ContactHistoryItem';\nimport { useHistoryList } from './useHistoryList';\n\nconst ContactHistoryList = ({ setChatId, close }: { setChatId: Dispatch<SetStateAction<string>>; close: () => void }): ReactElement => {\n\tconst [text, setText] = useState('');\n\tconst t = useTranslation();\n\tconst room = useOmnichannelRoom();\n\tconst { itemsList: historyList, loadMoreItems } = useHistoryList(\n\t\tuseMemo(() => ({ roomId: room._id, filter: text, visitorId: room.v._id }), [room, text]),\n\t);\n\n\tconst handleSearchChange = (event: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetText(event.currentTarget.value);\n\t};\n\n\tconst { phase, error, items: history, itemCount: totalItemCount } = useRecordList(historyList);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='history' />\n\t\t\t\t<ContextualbarTitle>{t('Contact_Chat_History')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={close} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp={24}\n\t\t\t\t\tborderBlockEndWidth='default'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='extra-light'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Chat_History')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={handleSearchChange}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t{phase === AsyncStatePhase.LOADING && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{error && (\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t\t<StatesSubtitle>{error.toString()}</StatesSubtitle>\n\t\t\t\t\t</States>\n\t\t\t\t)}\n\t\t\t\t{phase !== AsyncStatePhase.LOADING && totalItemCount === 0 && <ContextualbarEmptyContent title={t('No_results_found')} />}\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && totalItemCount > 0 && history.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\ttotalCount={totalItemCount}\n\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\tphase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t? (): void => undefined\n\t\t\t\t\t\t\t\t\t: (start): unknown => loadMoreItems(start, Math.min(50, totalItemCount - start))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={history}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(index, data): ReactElement => <ContactHistoryItem key={index} history={data} setChatId={setChatId} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</ContextualbarContent>\n\t\t</>\n\t);\n};\n\nexport default ContactHistoryList;\n",null],"names":["_slicedToArray","Box","Margins","TextInput","Icon","Throbber","States","StatesTitle","StatesSubtitle","useTranslation","React","useMemo","useState","Virtuoso","ContextualbarHeader","ContextualbarContent","ContextualbarTitle","ContextualbarIcon","ContextualbarClose","ContextualbarEmptyContent","ScrollableContentWrapper","useRecordList","AsyncStatePhase","useOmnichannelRoom","ContactHistoryItem","useHistoryList","module","link","default","v","StatesIcon","exportDefault","_ref","setChatId","close","_useState2","text","setText","t","room","_useHistoryList","roomId","_id","filter","visitorId","historyList","itemsList","loadMoreItems","_useRecordList","phase","error","history","items","totalItemCount","itemCount","createElement","Fragment","name","onClick","paddingInline","display","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","flexShrink","flexGrow","mi","inline","placeholder","value","onChange","event","currentTarget","addon","size","LOADING","pi","pb","variation","toString","title","overflow","length","totalCount","endReached","start","Math","min","overscan","data","components","Scroller","itemContent","index","key"],"mappings":"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"}