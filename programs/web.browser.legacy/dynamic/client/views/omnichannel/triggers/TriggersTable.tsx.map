)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/triggers/TriggersTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery, hashQueryKey } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\n\nimport GenericError from '../../../components/GenericError';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableBody,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport TriggersRow from './TriggersRow';\n\nconst TriggersTable = () => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\n\tconst handleAddNew = useMutableCallback(() => {\n\t\trouter.navigate('/omnichannel/triggers/new');\n\t});\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useMemo(() => ({ offset: current, count: itemsPerPage }), [current, itemsPerPage]);\n\n\tconst getTriggers = useEndpoint('GET', '/v1/livechat/triggers');\n\tconst { data, refetch, isSuccess, isLoading, isError } = useQuery(['livechat-triggers', query], async () => getTriggers(query));\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell>{t('Name')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Description')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Enabled')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell width='x60' />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data.triggers.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data.triggers.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='smart'\n\t\t\t\t\ttitle={t('No_triggers_yet')}\n\t\t\t\t\tdescription={t('No_triggers_yet_description')}\n\t\t\t\t\tbuttonAction={handleAddNew}\n\t\t\t\t\tbuttonTitle={t('Create_trigger')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_triggers')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data.triggers.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data.triggers.map(({ _id, name, description, enabled }) => (\n\t\t\t\t\t\t\t\t<TriggersRow key={_id} _id={_id} name={name} description={description} enabled={enabled} reload={refetch} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && <GenericError buttonAction={refetch} />}\n\t\t</>\n\t);\n};\n\nexport default TriggersTable;\n",null],"names":["_regeneratorRuntime","_extends","_slicedToArray","_objectWithoutProperties","Pagination","useMutableCallback","useTranslation","useEndpoint","useRouter","useQuery","hashQueryKey","React","useMemo","useState","GenericError","GenericNoResults","GenericTable","GenericTableHeader","GenericTableBody","GenericTableHeaderCell","GenericTableLoadingRow","usePagination","TriggersRow","module","link","default","v","exportDefault","t","router","handleAddNew","navigate","_usePagination","current","itemsPerPage","setItemsPerPage","setCurrent","paginationProps","_excluded","query","offset","count","getTriggers","_useQuery","async","_context","prev","next","abrupt","stop","Promise","data","refetch","isSuccess","isLoading","isError","queryHasChanged","defaultQuery","_useState2","headers","createElement","Fragment","width","cols","triggers","length","icon","title","description","buttonAction","buttonTitle","linkHref","linkText","map","_ref","_id","name","enabled","key","reload","divider","total","onSetItemsPerPage","onSetCurrent"],"mappings":"2BAAAA,EAAmDC,EAAAC,EAAAC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,8DAA9BC,EAAMC,IAAA,CAAA,6BAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAzB,EAAAA,CAAA,CAAA,EAAA,GAAAuB,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAxB,EAAAA,CAAA,CAAA,EAAA,GAAAsB,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAvB,EAAAA,CAAA,CAAA,EAAA,GAAAqB,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAtB,EAAAA,CAAA,CAAA,EAAA,GAA1CoB,EAAYC,IAAA,CAAM,wBAAwB,CAAApB,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAmB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAlB,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAkB,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAjB,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAd,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAf,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,mCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,uCAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAP,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,uDAAAA,CAAAF,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,gBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAnDC,EAAOI,aAAY,CAkBG,WACrB,IAAMC,EAAItB,IACJuB,EAASrB,IAETsB,EAAezB,EAAmB,WACvCwB,EAAOE,QAAQ,CAAC,4BACjB,GAEAC,EAAmFX,IAA3EY,EAAOD,EAAPC,OAAO,CAAEC,EAAYF,EAAZE,YAAY,CAAEC,EAAeH,EAAfG,eAAe,CAAEC,EAAUJ,EAAVI,UAAU,CAAKC,EAAelC,EAAA6B,EAAAM,GAExEC,EAAQ3B,EAAQ,WAAA,MAAO,CAAE4B,OAAQP,EAASQ,MAAOP,CAAY,CAAE,EAAG,CAACD,EAASC,EAAa,EAEzFQ,EAAcnC,EAAY,MAAO,yBACvCoC,EAAyDlC,EAAS,CAAC,oBAAqB8B,EAAM,CAAE,WAAA,OAAAvC,EAAA4C,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAAYN,EAAYH,GAAM,MAAA,EAAA,IAAA,MAAA,OAAAM,EAAAI,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,GAAtHC,EAAIR,EAAJQ,IAAI,CAAEC,EAAOT,EAAPS,OAAO,CAAEC,EAASV,EAATU,SAAS,CAAEC,EAASX,EAATW,SAAS,CAAEC,EAAOZ,EAAPY,OAAO,CAG9CC,EAAkBC,AADLC,AAAmCxD,EAA/BW,EAASH,EAAa,CAAC6B,EAAM,GAAE,EAAnC,CAAA,EAAA,GACsB7B,EAAa,CAAC6B,EAAM,EAEvDoB,EACLhD,EAAAiD,aAAA,CAAAjD,EAAAkD,QAAA,CAAA,KACClD,EAAAiD,aAAA,CAACzC,EAAsB,KAAES,EAAE,SAC3BjB,EAAAiD,aAAA,CAACzC,EAAsB,KAAES,EAAE,gBAC3BjB,EAAAiD,aAAA,CAACzC,EAAsB,KAAES,EAAE,YAC3BjB,EAAAiD,aAAA,CAACzC,EAAsB,CAAC2C,MAAM,KAAK,IAIrC,OACCnD,EAAAiD,aAAA,CAAAjD,EAAAkD,QAAA,CAAA,KACEP,GACA3C,EAAAiD,aAAA,CAAC5C,EAAY,KACZL,EAAAiD,aAAA,CAAC3C,EAAkB,KAAE0C,GACrBhD,EAAAiD,aAAA,CAAC1C,EAAgB,KAChBP,EAAAiD,aAAA,CAACxC,EAAsB,CAAC2C,KAAM,CAAE,KAIlCV,GAAaF,AAAyB,IAAzBA,EAAKa,QAAQ,CAACC,MAAM,EAAUT,GAAmB7C,EAAAiD,aAAA,CAAC7C,EAAgB,MAC/EsC,GAAaF,AAAyB,IAAzBA,EAAKa,QAAQ,CAACC,MAAM,EAAU,CAACT,GAC5C7C,EAAAiD,aAAA,CAAC7C,EAAgB,CAChBmD,KAAK,QACLC,MAAOvC,EAAE,mBACTwC,YAAaxC,EAAE,+BACfyC,aAAcvC,EACdwC,YAAa1C,EAAE,kBACf2C,SAAS,0CACTC,SAAU5C,EAAE,4BAA6B,GAG1CyB,GAAaF,EAAKa,QAAQ,CAACC,MAAM,CAAG,GACpCtD,EAAAiD,aAAA,CAAAjD,EAAAkD,QAAA,CAAA,KACClD,EAAAiD,aAAA,CAAC5C,EAAY,KACZL,EAAAiD,aAAA,CAAC3C,EAAkB,KAAE0C,GACrBhD,EAAAiD,aAAA,CAAC1C,EAAgB,KACfiC,EAAKa,QAAQ,CAACS,GAAG,CAAC,SAAAC,CAAA,EAAA,IAAGC,EAAGD,EAAHC,GAAG,CAAEC,EAAIF,EAAJE,IAAI,CAAER,EAAWM,EAAXN,WAAW,CAAES,EAAOH,EAAPG,OAAO,CAAA,OACpDlE,EAAAiD,aAAA,CAACtC,EAAW,CAACwD,IAAKH,EAAKA,IAAKA,EAAKC,KAAMA,EAAMR,YAAaA,EAAaS,QAASA,EAASE,OAAQ3B,CAAQ,EAAG,KAI/GzC,EAAAiD,aAAA,CAACxD,EAAUH,EAAA,CACV+E,QAAO,CAAA,EACP/C,QAASA,EACTC,aAAcA,EACdO,MAAO,AAAAU,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAM8B,KAAK,AAALA,GAAS,EACtBC,kBAAmB/C,EACnBgD,aAAc/C,CAAW,EACrBC,KAINkB,GAAW5C,EAAAiD,aAAA,CAAC9C,EAAY,CAACuD,aAAcjB,CAAQ,GAGnD"}