)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/managers/ManagersTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport UserAvatar from '../../../components/avatar/UserAvatar';\nimport AddManager from './AddManager';\nimport RemoveManagerButton from './RemoveManagerButton';\n\n// TODO: Missing error state\nconst ManagersTable = () => {\n\tconst t = useTranslation();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address'>('name');\n\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tfields: JSON.stringify({ name: 1, username: 1, emails: 1, avatarETag: 1 }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection],\n\t\t),\n\t\t500,\n\t);\n\n\tconst getManagers = useEndpoint('GET', '/v1/livechat/users/manager');\n\tconst { data, isLoading, isSuccess, refetch } = useQuery(['livechat-manager', query], async () => getManagers(query));\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'emails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='emails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='remove' w='x60'>\n\t\t\t\t{t('Remove')}\n\t\t\t</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<AddManager reload={refetch} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={2} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data.users.length === 0 && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='shield'\n\t\t\t\t\ttitle={t('No_managers_yet')}\n\t\t\t\t\tdescription={t('No_managers_yet_description')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_managers')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data.users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody data-qa-id='GenericTableManagerInfoBody'>\n\t\t\t\t\t\t\t{data.users.map((user) => (\n\t\t\t\t\t\t\t\t<GenericTableRow key={user._id} tabIndex={0} qa-user-id={user._id}>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t<Box display='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={user.username || ''} etag={user.avatarETag} />\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' withTruncatedText mi={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignSelf='center' withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' withTruncatedText color='default'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.name || user.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' withTruncatedText color='hint'>\n\t\t\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t<Box mi={4} />\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{user.emails?.length && user.emails[0].address}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<RemoveManagerButton _id={user._id} reload={refetch} />\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ManagersTable;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","Box","Pagination","useDebouncedValue","useTranslation","useEndpoint","useQuery","React","useMemo","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","UserAvatar","AddManager","RemoveManagerButton","module","link","default","v","exportDefault","t","_useSort","sortBy","sortDirection","setSort","_usePagination","current","itemsPerPage","onSetItemsPerPage","setItemsPerPage","onSetCurrent","setCurrent","paginationProps","_excluded","query","fields","JSON","stringify","name","username","emails","avatarETag","sort","count","offset","getManagers","_useQuery","async","_context","prev","next","abrupt","stop","Promise","data","isLoading","isSuccess","refetch","headers","createElement","Fragment","key","direction","active","onClick","w","reload","headerCells","users","length","icon","title","description","linkHref","linkText","map","user","_user$emails","_id","tabIndex","withTruncatedText","display","alignItems","size","etag","mi","flexDirection","alignSelf","fontScale","color","address","divider","total"],"mappings":"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"}