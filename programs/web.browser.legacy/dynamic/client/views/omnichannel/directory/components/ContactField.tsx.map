)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/components/ContactField.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IOmnichannelGenericRoom, IVisitor } from '@rocket.chat/core-typings';\nimport { Avatar, Box } from '@rocket.chat/fuselage';\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React from 'react';\n\nimport { UserStatus } from '../../../../components/UserStatus';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport AgentInfoDetails from '../../components/AgentInfoDetails';\nimport Field from '../../components/Field';\nimport Info from '../../components/Info';\nimport Label from '../../components/Label';\nimport { FormSkeleton } from './FormSkeleton';\n\ntype ContactFieldProps = {\n\tcontact: IVisitor;\n\troom: IOmnichannelGenericRoom;\n};\n\nconst ContactField = ({ contact, room }: ContactFieldProps) => {\n\tconst t = useTranslation();\n\tconst { status } = contact;\n\tconst { fname, t: type } = room;\n\tconst avatarUrl = roomCoordinator.getRoomDirectives(type).getAvatarPath(room) || '';\n\n\tconst getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\n\tconst { data, isLoading, isError } = useQuery(['/v1/livechat/visitors.info', contact._id], () =>\n\t\tgetVisitorInfo({ visitorId: contact._id }),\n\t);\n\n\tif (isLoading) {\n\t\treturn <FormSkeleton />;\n\t}\n\n\tif (isError || !data?.visitor) {\n\t\treturn <Box mbs={16}>{t('Contact_not_found')}</Box>;\n\t}\n\n\tconst {\n\t\tvisitor: { username, name },\n\t} = data;\n\n\tconst displayName = name || username;\n\n\treturn (\n\t\t<Field>\n\t\t\t<Label>{t('Contact')}</Label>\n\t\t\t<Info style={{ display: 'flex' }}>\n\t\t\t\t<Avatar size='x40' title={fname} url={avatarUrl} />\n\t\t\t\t<AgentInfoDetails mis={10} name={displayName} shortName={username} status={<UserStatus status={status} />} />\n\t\t\t</Info>\n\t\t</Field>\n\t);\n};\n\nexport default ContactField;\n",null],"names":["Avatar","Box","useEndpoint","useTranslation","useQuery","React","UserStatus","roomCoordinator","AgentInfoDetails","Field","Info","Label","FormSkeleton","module","link","v","exportDefault","_ref","contact","room","t","status","fname","type","avatarUrl","getRoomDirectives","getAvatarPath","getVisitorInfo","_useQuery","_id","visitorId","data","isLoading","isError","createElement","visitor","mbs","_data$visitor","username","name","style","display","size","title","url","mis","shortName"],"mappings":"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"}