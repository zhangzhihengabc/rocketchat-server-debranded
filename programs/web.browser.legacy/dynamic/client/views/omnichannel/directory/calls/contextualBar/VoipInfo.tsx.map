)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/calls/contextualBar/VoipInfo.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IVoipRoom } from '@rocket.chat/core-typings';\nimport { Box, Icon, Chip, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { parseOutboundPhoneNumber } from '../../../../../../ee/client/lib/voip/parseOutboundPhoneNumber';\nimport {\n\tContextualbarIcon,\n\tContextualbarHeader,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n} from '../../../../../components/Contextualbar';\nimport InfoPanel from '../../../../../components/InfoPanel';\nimport { UserStatus } from '../../../../../components/UserStatus';\nimport UserAvatar from '../../../../../components/avatar/UserAvatar';\nimport { useIsCallReady } from '../../../../../contexts/CallContext';\nimport AgentInfoDetails from '../../../components/AgentInfoDetails';\nimport AgentField from '../../components/AgentField';\nimport { InfoField } from './InfoField';\nimport { VoipInfoCallButton } from './VoipInfoCallButton';\n\ntype VoipInfoPropsType = {\n\troom: IVoipRoom;\n\tonClickClose: () => void;\n\tonClickReport?: () => void;\n};\n\nexport const VoipInfo = ({ room, onClickClose /* , onClickReport  */ }: VoipInfoPropsType): ReactElement => {\n\tconst t = useTranslation();\n\tconst isCallReady = useIsCallReady();\n\n\tconst { servedBy, queue, v, fname, name, callDuration, callTotalHoldTime, closedAt, callWaitingTime, tags, lastMessage } = room;\n\tconst duration = callDuration && moment.utc(callDuration).format('HH:mm:ss');\n\tconst waiting = callWaitingTime && moment.utc(callWaitingTime).format('HH:mm:ss');\n\tconst hold = callTotalHoldTime && moment.utc(callTotalHoldTime).format('HH:mm:ss');\n\tconst endedAt = closedAt && moment(closedAt).format('LLL');\n\tconst phoneNumber = Array.isArray(v?.phone) ? v?.phone[0]?.phoneNumber : v?.phone;\n\tconst shouldShowWrapup = useMemo(() => lastMessage?.t === 'voip-call-wrapup' && lastMessage?.msg, [lastMessage]);\n\tconst shouldShowTags = useMemo(() => tags && tags.length > 0, [tags]);\n\tconst _name = fname || name;\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader expanded>\n\t\t\t\t<ContextualbarIcon name='phone' />\n\t\t\t\t<ContextualbarTitle>{t('Call_Information')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={onClickClose} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<InfoPanel>\n\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t<InfoPanel.Label>{t('Channel')}</InfoPanel.Label>\n\t\t\t\t\t\t<Box color='default'>\n\t\t\t\t\t\t\t<Icon size='x24' name='phone' verticalAlign='middle' />\n\t\t\t\t\t\t\t{t('Voice_Call')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t\t{servedBy && <AgentField isSmall agent={servedBy} />}\n\t\t\t\t\t{v && _name && (\n\t\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t\t<InfoPanel.Label>{t('Contact')}</InfoPanel.Label>\n\t\t\t\t\t\t\t<Box display='flex'>\n\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={_name} />\n\t\t\t\t\t\t\t\t<AgentInfoDetails mis={8} name={parseOutboundPhoneNumber(_name)} status={<UserStatus status={v?.status} />} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{phoneNumber && <InfoField label={t('Caller_Id')} info={parseOutboundPhoneNumber(phoneNumber)} />}\n\t\t\t\t\t{queue && <InfoField label={t('Queue')} info={queue} />}\n\t\t\t\t\t{endedAt && <InfoField label={t('Last_Call')} info={endedAt} />}\n\t\t\t\t\t<InfoField label={t('Waiting_Time')} info={waiting || t('Not_Available')} />\n\t\t\t\t\t<InfoField label={t('Talk_Time')} info={duration || t('Not_Available')} />\n\t\t\t\t\t<InfoField label={t('Hold_Time')} info={hold || t('Not_Available')} />\n\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t<InfoPanel.Label>{t('Wrap_Up_Notes')}</InfoPanel.Label>\n\t\t\t\t\t\t<InfoPanel.Text withTruncatedText={false}>{shouldShowWrapup ? lastMessage?.msg : t('Not_Available')}</InfoPanel.Text>\n\t\t\t\t\t\t{shouldShowTags && (\n\t\t\t\t\t\t\t<InfoPanel.Text>\n\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t\t\t\t\t\t{tags?.map((tag: string) => (\n\t\t\t\t\t\t\t\t\t\t<Chip mie={4} key={tag} value={tag}>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Chip>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</InfoPanel.Text>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t</InfoPanel>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t{/* TODO: Introduce this buttons [Not part of MVP] */}\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{/* <Button danger onClick={onClickReport}>\n\t\t\t\t\t\t<Box display='flex' justifyContent='center' fontSize='p2'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x20' mie='4px' />\n\t\t\t\t\t\t\t{t('Report_Number')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Button> */}\n\t\t\t\t\t{isCallReady && <VoipInfoCallButton phoneNumber={phoneNumber} />}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n",null],"names":["module","export","VoipInfo","Box","Icon","Chip","ButtonGroup","useTranslation","v","moment","React","useMemo","parseOutboundPhoneNumber","ContextualbarIcon","ContextualbarHeader","ContextualbarTitle","ContextualbarClose","ContextualbarScrollableContent","ContextualbarFooter","InfoPanel","UserStatus","UserAvatar","useIsCallReady","AgentInfoDetails","AgentField","InfoField","VoipInfoCallButton","_ref","_v$phone$","room","onClickClose","t","isCallReady","servedBy","queue","fname","name","callDuration","callTotalHoldTime","closedAt","callWaitingTime","tags","lastMessage","duration","utc","format","waiting","hold","endedAt","phoneNumber","Array","isArray","phone","shouldShowWrapup","msg","shouldShowTags","length","_name","createElement","Fragment","expanded","onClick","Field","Label","color","size","verticalAlign","isSmall","agent","display","username","mis","status","label","info","Text","withTruncatedText","flexDirection","alignItems","map","tag","mie","key","value","stretch"],"mappings":"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"}