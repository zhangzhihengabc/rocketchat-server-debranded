function module(e,t,n){n.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/extends",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),n.link("@rocket.chat/fuselage",{Field:function(e){o=e},FieldLabel:function(e){r=e},FieldRow:function(e){c=e},TextInput:function(e){u=e},ButtonGroup:function(e){s=e},Button:function(e){m=e}},0),n.link("@rocket.chat/ui-client",{CustomFieldsForm:function(e){d=e}},1),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch:function(e){f=e},useTranslation:function(e){p=e},useEndpoint:function(e){h=e}},2),n.link("@tanstack/react-query",{useQueryClient:function(e){k=e}},3),n.link("react",{default:function(e){g=e},useCallback:function(e){v=e}},4),n.link("react-hook-form",{useController:function(e){b=e},useForm:function(e){C=e}},5),n.link("../../../../../../../app/authorization/client",{hasAtLeastOnePermission:function(e){E=e}},6),n.link("../../../../../../../ee/client/omnichannel/hooks/useOmnichannelPriorities",{useOmnichannelPriorities:function(e){I=e}},7),n.link("../../../../../../components/Contextualbar",{ContextualbarFooter:function(e){S=e},ContextualbarScrollableContent:function(e){x=e}},8),n.link("../../../../../../components/Omnichannel/Tags",{default:function(e){y=e}},9),n.link("../../../../additionalForms",{SlaPoliciesSelect:function(e){F=e},PrioritiesSelect:function(e){D=e}},10),n.link("../../../components/FormSkeleton",{FormSkeleton:function(e){P=e}},11),n.link("../../../hooks/useCustomFieldsMetadata",{useCustomFieldsMetadata:function(e){w=e}},12),n.link("../../../hooks/useSlaPolicies",{useSlaPolicies:function(e){_=e}},13);var a,l,i,o,r,c,u,s,m,d,f,p,h,k,g,v,b,C,E,I,S,x,y,F,D,P,w,_,L={topic:"",tags:[],livechatData:{},slaId:""},T=function(e){var t=null!=e?e:L,n=t.topic,a=t.tags,l=t.livechatData,i=t.slaId,o=t.priorityId;return{topic:null!=n?n:"",tags:null!=a?a:[],livechatData:null!=l?l:{},slaId:null!=i?i:"",priorityId:null!=o?o:""}};n.exportDefault(function(e){var t=e.room,n=e.visitor,L=e.reload,O=e.reloadInfo,G=e.onClose,M=p(),A=f(),B=k(),Q=E(["view-livechat-room-customfields","edit-livechat-room-customfields"]),V=h("POST","/v1/livechat/room.saveInfo"),j=_(),q=j.data,z=j.isInitialLoading,N=w({scope:"room",enabled:Q}),R=N.data,H=N.isInitialLoading,J=I(),K=J.data,U=J.isLoading,W=C({mode:"onChange",defaultValues:T(t)}),X=W.register,Y=W.control,Z=W.formState,$=Z.isDirty,ee=Z.isValid,et=Z.isSubmitting,en=W.handleSubmit,ea=b({control:Y,name:"tags"}).field,el=b({control:Y,name:"slaId"}).field,ei=b({control:Y,name:"priorityId"}).field,eo=v(function(e){var l,o,r,c,u,s,m;return a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(ee){d.next=2;break}return d.abrupt("return");case 2:return l=e.topic,o=e.tags,r=e.livechatData,c=e.slaId,u=e.priorityId,s={_id:n._id},m=i({_id:t._id,topic:l,tags:o.sort(),livechatData:r,priorityId:u},c&&{slaId:c}),d.prev=5,d.next=8,a.awrap(V({guestData:s,roomData:m}));case 8:return d.next=10,a.awrap(B.invalidateQueries(["/v1/rooms.info",t._id]));case 10:A({type:"success",message:M("Saved")}),null==L||L(),null==O||O(),G(),d.next=19;break;case 16:d.prev=16,d.t0=d.catch(5),A({type:"error",message:d.t0});case 19:case"end":return d.stop()}},null,null,[[5,16]],Promise)},[A,ee,G,B,L,O,t._id,V,M,n._id]);return H||z||U?g.createElement(x,null,g.createElement(P,null)):g.createElement(g.Fragment,null,g.createElement(x,{is:"form",onSubmit:en(eo)},Q&&R&&g.createElement(d,{formName:"livechatData",formControl:Y,metadata:R}),g.createElement(o,null,g.createElement(r,null,M("Topic")),g.createElement(c,null,g.createElement(u,l({},X("topic"),{flexGrow:1})))),g.createElement(o,null,g.createElement(y,{tags:ea.value,handler:ea.onChange,department:t.departmentId})),F&&!!(null!=q&&q.length)&&g.createElement(F,{label:M("SLA_Policy"),value:el.value,options:q,onChange:el.onChange}),D&&!!(null!=K&&K.length)&&g.createElement(D,{label:M("Priority"),value:ei.value,options:K,onChange:ei.onChange})),g.createElement(S,null,g.createElement(s,{stretch:!0},g.createElement(m,{flexGrow:1,onClick:G},M("Cancel")),g.createElement(m,{mie:"none",flexGrow:1,onClick:en(eo),loading:et,disabled:!ee||!$,primary:!0},M("Save")))))})}
//# sourceMappingURL=/dynamic/client/views/omnichannel/directory/chats/contextualBar/RoomEdit/2684519ac1c4322e58c97866f5a4f327fc1b3785.map
