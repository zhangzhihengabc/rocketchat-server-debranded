function module(e,t,n){var a,l,r,u,s,i,o,c,m,d,f,E,p,h,v,g,b,x,k,A,C,I,S,T,q,D,U,_,F,w,P,M=["data","userDepartments","availableDepartments","uid","reset"],y=["hasUnsavedChanges"];n.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/extends",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){u=e}},3),n.link("@rocket.chat/fuselage",{Field:function(e){s=e},FieldLabel:function(e){i=e},FieldRow:function(e){o=e},TextInput:function(e){c=e},Button:function(e){m=e},Box:function(e){d=e},MultiSelect:function(e){f=e},Icon:function(e){E=e},Select:function(e){p=e},ContextualbarFooter:function(e){h=e},ButtonGroup:function(e){v=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){g=e}},1),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch:function(e){b=e},useRoute:function(e){x=e},useSetting:function(e){k=e},useMethod:function(e){A=e},useTranslation:function(e){C=e},useEndpoint:function(e){I=e}},2),n.link("react",{default:function(e){S=e},useMemo:function(e){T=e},useRef:function(e){q=e},useState:function(e){D=e}},3),n.link("../../../../lib/getUserEmailAddress",{getUserEmailAddress:function(e){U=e}},4),n.link("../../../components/Contextualbar",{ContextualbarScrollableContent:function(e){_=e}},5),n.link("../../../components/UserInfo",{default:function(e){F=e}},6),n.link("../../../hooks/useForm",{useForm:function(e){w=e}},7),n.link("../additionalForms",{MaxChatsPerAgentContainer:function(e){P=e}},8),n.exportDefault(function(e){var t=e.data,n=e.userDepartments,B=e.availableDepartments,R=e.uid,V=e.reset,G=u(e,M),N=C(),z=x("omnichannel-agents"),L=r(D(),2),j=L[0],O=L[1],W=k("VoIP_Enabled"),H=(t||{user:{}}).user,J=H.name,K=H.username,Q=H.statusLivechat,X=U(H),Y=T(function(){var e=function(e,t){return t?e+" ["+N("Archived")+"]":e};return null!=B&&B.departments?B.departments.map(function(t){var n=t._id,a=t.name,l=t.archived;return a?[n,e(a,l)]:[n,e(n,l)]}):[]},[B.departments,N]),Z=T(function(){return n.departments?n.departments.map(function(e){return e.departmentId}):[]},[n]),$=q({values:{},hasUnsavedChanges:!1,reset:function(){},commit:function(){}}),ee=$.current,et=ee.reset,en=ee.commit,ea=g(function(e){var t=e.hasUnsavedChanges,n=u(e,y);$.current=n,t!==j&&O(t)}),el=w({departments:Z,status:Q,maxChats:0,voipExtension:""}),er=el.values,eu=el.handlers,es=el.hasUnsavedChanges,ei=el.commit,eo=eu.handleDepartments,ec=eu.handleStatus,em=eu.handleVoipExtension,ed=er.departments,ef=er.status,eE=er.voipExtension,ep=A("livechat:saveAgentInfo"),eh=I("POST","/v1/livechat/agent.status"),ev=b(),eg=g(function(){V(),et()}),eb=g(function(){return a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.awrap(eh({status:ef,agentId:R}));case 3:return e.next=5,a.awrap(ep(R,$.current.values,ed));case 5:ev({type:"success",message:N("Success")}),z.push({}),V(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),ev({type:"error",message:e.t0});case 13:ei(),en();case 15:case"end":return e.stop()}},null,null,[[0,10]],Promise)});return S.createElement(S.Fragment,null,S.createElement(_,l({is:"form"},G),K&&S.createElement(d,{alignSelf:"center"},S.createElement(F.Avatar,{"data-qa":"AgentEdit-Avatar",username:K})),S.createElement(s,null,S.createElement(i,null,N("Name")),S.createElement(o,null,S.createElement(c,{"data-qa":"AgentEditTextInput-Name",value:J,disabled:!0}))),S.createElement(s,null,S.createElement(i,null,N("Username")),S.createElement(o,null,S.createElement(c,{"data-qa":"AgentEditTextInput-Username",value:K,disabled:!0,addon:S.createElement(E,{name:"at",size:"x20"})}))),S.createElement(s,null,S.createElement(i,null,N("Email")),S.createElement(o,null,S.createElement(c,{"data-qa":"AgentEditTextInput-Email",value:X,disabled:!0,addon:S.createElement(E,{name:"mail",size:"x20"})}))),S.createElement(s,null,S.createElement(i,null,N("Departments")),S.createElement(o,null,S.createElement(f,{"data-qa":"AgentEditTextInput-Departaments",options:Y,value:ed,placeholder:N("Select_an_option"),onChange:eo}))),S.createElement(s,null,S.createElement(i,null,N("Status")),S.createElement(o,null,S.createElement(p,{"data-qa":"AgentEditTextInput-Status",options:[["available",N("Available")],["not-available",N("Not_Available")]],value:ef,placeholder:N("Select_an_option"),onChange:ec}))),S.createElement(P,{data:H,onChange:ea}),W&&S.createElement(s,null,S.createElement(i,null,N("VoIP_Extension")),S.createElement(o,null,S.createElement(c,{"data-qa":"AgentEditTextInput-VoIP_Extension",value:eE,onChange:em})))),S.createElement(h,null,S.createElement(v,{wrap:!0},S.createElement(m,{"data-qa":"AgentEditButtonReset",flexGrow:1,type:"reset",disabled:!es&&!j,onClick:eg},N("Reset")),S.createElement(m,{"data-qa":"AgentEditButtonSave",mie:"none",flexGrow:1,disabled:!es&&!j,onClick:eb},N("Save")))))})}
//# sourceMappingURL=/dynamic/client/views/omnichannel/agents/48810aa25a2500a98e8e772c2109272c4130b16d.map
