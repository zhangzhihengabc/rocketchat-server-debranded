)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/departments/DepartmentsTable/DepartmentItemMenu.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment } from '@rocket.chat/core-typings';\nimport { Box, Icon, Menu } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useRoute, useSetModal, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useCallback } from 'react';\n\nimport RemoveDepartmentModal from './RemoveDepartmentModal';\n\nconst ARCHIVE_DEPARTMENT_ENDPOINTS = {\n\tarchive: '/v1/livechat/department/:_id/archive',\n\tunarchive: '/v1/livechat/department/:_id/unarchive',\n} as const;\n\ntype DepartmentItemMenuProps = {\n\tdepartment: Omit<ILivechatDepartment, '_updatedAt'>;\n\tarchived: boolean;\n};\n\nconst DepartmentItemMenu = ({ department, archived }: DepartmentItemMenuProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst queryClient = useQueryClient();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst route = useRoute('omnichannel-departments');\n\tconst departmentRemovalEnabled = useSetting('Omnichannel_enable_department_removal');\n\tconst { _id, name } = department;\n\n\tconst toggleArchive = useEndpoint('POST', archived ? ARCHIVE_DEPARTMENT_ENDPOINTS.unarchive : ARCHIVE_DEPARTMENT_ENDPOINTS.archive, {\n\t\t_id,\n\t});\n\n\tconst handleEdit = useMutableCallback(() => {\n\t\troute.push({ context: 'edit', id: _id });\n\t});\n\n\tconst handleReload = useCallback(async () => {\n\t\tawait queryClient.invalidateQueries(['livechat-departments']);\n\t}, [queryClient]);\n\n\tconst handleToggleArchive = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait toggleArchive();\n\t\t\tdispatchToastMessage({ type: 'success', message: archived ? t('Department_unarchived') : t('Department_archived') });\n\t\t\tqueryClient.removeQueries(['/v1/livechat/department/:_id', department._id]);\n\t\t\thandleReload();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst handlePermanentDepartmentRemoval = useMutableCallback(() => {\n\t\tsetModal(<RemoveDepartmentModal _id={_id} reset={handleReload} onClose={() => setModal(null)} name={name} />);\n\t});\n\n\tconst menuOptions = {\n\t\t...(!archived && {\n\t\t\tedit: {\n\t\t\t\tlabel: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon name='edit' size='x16' mie={4} />\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t\taction: (): void => handleEdit(),\n\t\t\t},\n\t\t}),\n\t\t[archived ? 'unarchive' : 'archive']: {\n\t\t\tlabel: (\n\t\t\t\t<>\n\t\t\t\t\t<Icon name={archived ? 'undo' : 'arrow-down-box'} size='x16' mie={4} />\n\t\t\t\t\t{archived ? t('Unarchive') : t('Archive')}\n\t\t\t\t</>\n\t\t\t),\n\t\t\taction: (): Promise<void> => handleToggleArchive(),\n\t\t},\n\t\tdelete: {\n\t\t\tlabel: (\n\t\t\t\t<Box data-tooltip={!departmentRemovalEnabled ? t('Department_Removal_Disabled') : undefined}>\n\t\t\t\t\t<Icon name='trash' size='x16' mie={4} />\n\t\t\t\t\t{t('Delete')}\n\t\t\t\t</Box>\n\t\t\t),\n\t\t\taction: (): void => handlePermanentDepartmentRemoval(),\n\t\t\tdisabled: !departmentRemovalEnabled,\n\t\t},\n\t};\n\treturn <Menu options={menuOptions} />;\n};\n\nexport default DepartmentItemMenu;\n",null],"names":["module","link","default","_objectSpread","_regeneratorRuntime","Box","v","Icon","Menu","useMutableCallback","useToastMessageDispatch","useEndpoint","useRoute","useSetModal","useTranslation","useSetting","useQueryClient","React","useCallback","RemoveDepartmentModal","ARCHIVE_DEPARTMENT_ENDPOINTS","archive","unarchive","exportDefault","_ref","_objectSpread2","department","archived","t","queryClient","setModal","dispatchToastMessage","route","departmentRemovalEnabled","_id","name","toggleArchive","handleEdit","push","context","id","handleReload","async","_context","prev","next","awrap","invalidateQueries","stop","Promise","handleToggleArchive","_context2","type","message","removeQueries","t0","handlePermanentDepartmentRemoval","createElement","reset","onClose","menuOptions","edit","label","Fragment","size","mie","action","undefined","disabled","options"],"mappings":"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"}