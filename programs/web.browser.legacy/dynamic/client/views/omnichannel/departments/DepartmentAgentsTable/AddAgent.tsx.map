)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/departments/DepartmentAgentsTable/AddAgent.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useState } from 'react';\n\nimport AutoCompleteAgent from '../../../../components/AutoCompleteAgent';\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\nimport type { IDepartmentAgent } from '../EditDepartment';\n\nfunction AddAgent({ agentList, onAdd }: { agentList: IDepartmentAgent[]; onAdd: (agent: IDepartmentAgent) => void }) {\n\tconst t = useTranslation();\n\n\tconst [userId, setUserId] = useState('');\n\n\tconst getAgent = useEndpointAction('GET', '/v1/livechat/users/agent/:_id', { keys: { _id: userId } });\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleAgent = useMutableCallback((e) => setUserId(e));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tif (!userId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tuser: { _id, username, name },\n\t\t} = await getAgent();\n\n\t\tif (!agentList.some(({ agentId }) => agentId === _id)) {\n\t\t\tsetUserId('');\n\t\t\tonAdd({ agentId: _id, username: username ?? '', name, count: 0, order: 0 });\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('This_agent_was_already_selected') });\n\t\t}\n\t});\n\n\treturn (\n\t\t<Box display='flex' alignItems='center'>\n\t\t\t<AutoCompleteAgent value={userId} onChange={handleAgent} />\n\t\t\t<Button disabled={!userId} onClick={handleSave} mis={8} primary>\n\t\t\t\t{t('Add')}\n\t\t\t</Button>\n\t\t</Box>\n\t);\n}\n\nexport default AddAgent;\n",null],"names":["_regeneratorRuntime","_slicedToArray","Box","Button","useMutableCallback","useToastMessageDispatch","useTranslation","React","useState","AutoCompleteAgent","useEndpointAction","module","link","default","v","exportDefault","_ref","agentList","onAdd","t","_useState2","userId","setUserId","getAgent","keys","_id","dispatchToastMessage","handleAgent","e","handleSave","_await$getAgent$user","username","name","async","_context","prev","next","abrupt","awrap","_await$getAgent","sent","user","some","_ref2","agentId","type","message","count","order","stop","Promise","createElement","display","alignItems","value","onChange","disabled","onClick","mis","primary"],"mappings":"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"}