)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerAgentChart.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useEffect } from 'react';\n\nimport { drawLineChart } from '../../../../../app/livechat/client/lib/chartHandler';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport Chart from './Chart';\nimport { useUpdateChartData } from './useUpdateChartData';\n\nconst initialData = {\n\tagents: {},\n\tsuccess: true,\n};\n\nconst init = (canvas, context, t) =>\n\tdrawLineChart(canvas, context, [t('Open'), t('Closed'), t('On_Hold_Chats')], [], [[], []], {\n\t\tlegends: true,\n\t\tanim: true,\n\t\tsmallTicks: true,\n\t});\n\nconst ChatsPerAgentChart = ({ params, reloadRef, ...props }) => {\n\tconst t = useTranslation();\n\n\tconst canvas = useRef();\n\tconst context = useRef();\n\n\tconst updateChartData = useUpdateChartData({\n\t\tcontext,\n\t\tcanvas,\n\t\tt,\n\t\tinit,\n\t});\n\n\tconst { value: data, phase: state, reload } = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats-per-agent', { params });\n\n\treloadRef.current.chatsPerAgentChart = reload;\n\n\tconst chartData = data ?? initialData;\n\n\tuseEffect(() => {\n\t\tconst initChart = async () => {\n\t\t\tcontext.current = await init(canvas.current, context.current, t);\n\t\t};\n\t\tinitChart();\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tif (state === AsyncStatePhase.RESOLVED) {\n\t\t\tif (chartData && chartData.success) {\n\t\t\t\tdelete chartData.success;\n\t\t\t\tObject.entries(chartData).forEach(([name, value]) => {\n\t\t\t\t\tupdateChartData(name, [value.open, value.closed, value.onhold]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [chartData, state, t, updateChartData]);\n\n\treturn <Chart ref={canvas} {...props} />;\n};\n\nexport default ChatsPerAgentChart;\n",null],"names":["_regeneratorRuntime","_extends","_slicedToArray","_objectWithoutProperties","useTranslation","React","useRef","useEffect","drawLineChart","AsyncStatePhase","useEndpointData","Chart","useUpdateChartData","module","link","default","v","initialData","agents","success","init","canvas","context","t","legends","anim","smallTicks","exportDefault","_ref","params","reloadRef","props","_excluded","updateChartData","_useEndpointData","data","value","state","phase","reload","current","chatsPerAgentChart","chartData","async","_context","prev","next","awrap","sent","stop","Promise","RESOLVED","Object","entries","forEach","_ref2","_ref3","name","open","closed","onhold","createElement","ref"],"mappings":"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"}