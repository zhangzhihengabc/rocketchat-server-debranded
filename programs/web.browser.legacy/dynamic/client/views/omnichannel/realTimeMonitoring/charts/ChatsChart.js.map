)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/charts/ChatsChart.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useEffect } from 'react';\n\nimport { drawDoughnutChart } from '../../../../../app/livechat/client/lib/chartHandler';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport Chart from './Chart';\nimport { useUpdateChartData } from './useUpdateChartData';\n\nconst labels = ['Open', 'Queued', 'On_Hold_Chats', 'Closed'];\n\nconst initialData = {\n\topen: 0,\n\tqueued: 0,\n\tonhold: 0,\n\tclosed: 0,\n};\n\nconst init = (canvas, context, t) =>\n\tdrawDoughnutChart(\n\t\tcanvas,\n\t\tt('Chats'),\n\t\tcontext,\n\t\tlabels.map((l) => t(l)),\n\t\tObject.values(initialData),\n\t);\n\nconst ChatsChart = ({ params, reloadRef, ...props }) => {\n\tconst t = useTranslation();\n\n\tconst canvas = useRef();\n\tconst context = useRef();\n\n\tconst updateChartData = useUpdateChartData({\n\t\tcontext,\n\t\tcanvas,\n\t\tt,\n\t\tinit,\n\t});\n\n\tconst { value: data, phase: state, reload } = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats', { params });\n\n\treloadRef.current.chatsChart = reload;\n\n\tconst { open, queued, closed, onhold } = data ?? initialData;\n\n\tuseEffect(() => {\n\t\tconst initChart = async () => {\n\t\t\tcontext.current = await init(canvas.current, context.current, t);\n\t\t};\n\t\tinitChart();\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tif (state === AsyncStatePhase.RESOLVED) {\n\t\t\tupdateChartData(t('Open'), [open]);\n\t\t\tupdateChartData(t('Closed'), [closed]);\n\t\t\tupdateChartData(t('On_Hold_Chats'), [onhold]);\n\t\t\tupdateChartData(t('Queued'), [queued]);\n\t\t}\n\t}, [closed, open, queued, onhold, state, t, updateChartData]);\n\n\treturn <Chart ref={canvas} {...props} />;\n};\n\nexport default ChatsChart;\n",null],"names":["_regeneratorRuntime","_extends","_objectWithoutProperties","useTranslation","React","useRef","useEffect","drawDoughnutChart","AsyncStatePhase","useEndpointData","Chart","useUpdateChartData","module","link","default","v","labels","initialData","open","queued","onhold","closed","init","canvas","context","t","map","l","Object","values","exportDefault","_ref","params","reloadRef","props","_excluded","updateChartData","_useEndpointData","data","value","state","phase","reload","current","chatsChart","_ref2","async","_context","prev","next","awrap","sent","stop","Promise","RESOLVED","createElement","ref"],"mappings":"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"}