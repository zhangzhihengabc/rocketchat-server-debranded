)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/RealTimeMonitoringPage.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Select, Margins } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useState, useMemo, useEffect, Fragment } from 'react';\n\nimport AutoCompleteDepartment from '../../../components/AutoCompleteDepartment';\nimport Page from '../../../components/Page';\nimport { getDateRange } from '../../../lib/utils/getDateRange';\nimport Label from '../components/Label';\nimport AgentStatusChart from './charts/AgentStatusChart';\nimport ChatDurationChart from './charts/ChatDurationChart';\nimport ChatsChart from './charts/ChatsChart';\nimport ChatsPerAgentChart from './charts/ChatsPerAgentChart';\nimport ChatsPerDepartmentChart from './charts/ChatsPerDepartmentChart';\nimport ResponseTimesChart from './charts/ResponseTimesChart';\nimport AgentsOverview from './overviews/AgentsOverview';\nimport ChatsOverview from './overviews/ChatsOverview';\nimport ConversationOverview from './overviews/ConversationOverview';\nimport ProductivityOverview from './overviews/ProductivityOverview';\n\nconst dateRange = getDateRange();\n\nconst RealTimeMonitoringPage = () => {\n\tconst t = useTranslation();\n\n\tconst [reloadFrequency, setReloadFrequency] = useState(5);\n\tconst [departmentId, setDepartment] = useState('');\n\n\tconst reloadRef = useRef({});\n\n\tconst departmentParams = useMemo(\n\t\t() => ({\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId],\n\t);\n\n\tconst allParams = useMemo(\n\t\t() => ({\n\t\t\t...departmentParams,\n\t\t\t...dateRange,\n\t\t}),\n\t\t[departmentParams],\n\t);\n\n\tconst reloadCharts = useMutableCallback(() => {\n\t\tObject.values(reloadRef.current).forEach((reload) => {\n\t\t\treload();\n\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(reloadCharts, reloadFrequency * 1000);\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [reloadCharts, reloadFrequency]);\n\n\tconst reloadOptions = useMemo(\n\t\t() => [\n\t\t\t[5, <Fragment key='5 seconds'>5 {t('seconds')}</Fragment>],\n\t\t\t[10, <Fragment key='10 seconds'>10 {t('seconds')}</Fragment>],\n\t\t\t[30, <Fragment key='30 seconds'>30 {t('seconds')}</Fragment>],\n\t\t\t[60, <Fragment key='1 minute'>1 {t('minute')}</Fragment>],\n\t\t],\n\t\t[t],\n\t);\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Real_Time_Monitoring')}></Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t<Box flexDirection='row' display='flex' justifyContent='space-between' alignSelf='center' w='full'>\n\t\t\t\t\t\t<Box maxWidth='50%' display='flex' mi={4} flexGrow={1} flexDirection='column'>\n\t\t\t\t\t\t\t<Label mb={4}>{t('Departments')}</Label>\n\t\t\t\t\t\t\t<AutoCompleteDepartment\n\t\t\t\t\t\t\t\tvalue={departmentId}\n\t\t\t\t\t\t\t\tonChange={setDepartment}\n\t\t\t\t\t\t\t\tplaceholder={t('All')}\n\t\t\t\t\t\t\t\tlabel={t('All')}\n\t\t\t\t\t\t\t\tonlyMyDepartments\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box maxWidth='50%' display='flex' mi={4} flexGrow={1} flexDirection='column'>\n\t\t\t\t\t\t\t<Label mb={4}>{t('Update_every')}</Label>\n\t\t\t\t\t\t\t<Select options={reloadOptions} onChange={useMutableCallback((val) => setReloadFrequency(val))} value={reloadFrequency} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ConversationOverview flexGrow={1} flexShrink={1} width='50%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ChatsChart flexGrow={1} flexShrink={1} width='50%' mie={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t\t<ChatsPerAgentChart flexGrow={1} flexShrink={1} width='50%' mis={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ChatsOverview flexGrow={1} flexShrink={1} width='50%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<AgentStatusChart flexGrow={1} flexShrink={1} width='50%' mie={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t\t<ChatsPerDepartmentChart flexGrow={1} flexShrink={1} width='50%' mis={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<AgentsOverview flexGrow={1} flexShrink={1} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' w='full' flexShrink={1}>\n\t\t\t\t\t\t<ChatDurationChart flexGrow={1} flexShrink={1} w='100%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ProductivityOverview flexGrow={1} flexShrink={1} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' w='full' flexShrink={1}>\n\t\t\t\t\t\t<ResponseTimesChart flexGrow={1} flexShrink={1} w='100%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Margins>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default RealTimeMonitoringPage;\n",null],"names":["module","link","default","v","_objectSpread","_slicedToArray","Box","Select","Margins","useMutableCallback","useTranslation","React","useRef","useState","useMemo","useEffect","Fragment","AutoCompleteDepartment","Page","getDateRange","Label","AgentStatusChart","ChatDurationChart","ChatsChart","ChatsPerAgentChart","ChatsPerDepartmentChart","ResponseTimesChart","AgentsOverview","ChatsOverview","ConversationOverview","ProductivityOverview","dateRange","exportDefault","t","_useState2","reloadFrequency","setReloadFrequency","_useState4","departmentId","setDepartment","reloadRef","departmentParams","allParams","reloadCharts","Object","values","current","forEach","reload","interval","setInterval","clearInterval","reloadOptions","createElement","key","Header","title","ScrollableContentWithShadow","block","flexDirection","display","justifyContent","alignSelf","w","maxWidth","mi","flexGrow","mb","value","onChange","placeholder","label","onlyMyDepartments","options","val","alignItems","flexShrink","width","params","mie","mis"],"mappings":"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"}