)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/hooks/useMembersList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useInfiniteQuery } from '@tanstack/react-query';\n\ntype MembersListOptions = {\n\trid: string;\n\ttype: 'all' | 'online';\n\tlimit: number;\n\tdebouncedText: string;\n\troomType: 'd' | 'p' | 'c';\n};\n\nconst endpointsByRoomType = {\n\td: '/v1/im.members',\n\tp: '/v1/groups.members',\n\tc: '/v1/channels.members',\n} as const;\n\nexport const useMembersList = (options: MembersListOptions) => {\n\tconst getMembers = useEndpoint('GET', endpointsByRoomType[options.roomType]);\n\n\treturn useInfiniteQuery(\n\t\t[options.roomType, 'members', options.rid, options.type, options.debouncedText],\n\t\tasync ({ pageParam }) => {\n\t\t\tconst start = pageParam ?? 0;\n\n\t\t\treturn getMembers({\n\t\t\t\troomId: options.rid,\n\t\t\t\toffset: start,\n\t\t\t\tcount: 20,\n\t\t\t\t...(options.debouncedText && { filter: options.debouncedText }),\n\t\t\t\t...(options.type !== 'all' && { status: [options.type] }),\n\t\t\t});\n\t\t},\n\t\t{\n\t\t\tgetNextPageParam: (lastPage) => {\n\t\t\t\tconst offset = lastPage.offset + lastPage.count;\n\t\t\t\t// if the offset is greater than the total, return undefined to stop the query from trying to fetch another page\n\t\t\t\treturn offset >= lastPage.total ? undefined : offset;\n\t\t\t},\n\t\t},\n\t);\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","export","useMembersList","useEndpoint","useInfiniteQuery","endpointsByRoomType","d","p","c","options","getMembers","roomType","rid","type","debouncedText","_ref","pageParam","start","async","_context","prev","next","abrupt","roomId","offset","count","filter","status","stop","Promise","getNextPageParam","lastPage","total","undefined"],"mappings":"uBAAsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAvDJ,EAAOK,MAAE,CAAA,CAAAC,eAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAN,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAO,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAQ,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAWvD,IAXAL,EAAuDC,EAAAG,EAAAC,EAWjDC,EAAsB,CAC3BC,EAAG,iBACHC,EAAG,qBACHC,EAAG,wBAGSN,EAAiB,SAACO,CAA2B,EACzD,IAAMC,EAAaP,EAAY,MAAOE,CAAmB,CAACI,EAAQE,QAAQ,CAAC,EAE3E,OAAOP,EACN,CAACK,EAAQE,QAAQ,CAAE,UAAWF,EAAQG,GAAG,CAAEH,EAAQI,IAAI,CAAEJ,EAAQK,aAAa,CAAC,CAC/E,SAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAA,OAAAlB,EAAAmB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAC6B,OAAtBJ,EAAQD,MADNA,CAAAA,EAASD,EAATC,SAAS,AAATA,EACMA,EAAa,EAACG,EAAAG,MAAA,CAAA,SAErBZ,EAAUV,EAAAA,EAAA,CAChBuB,OAAQd,EAAQG,GAAG,CACnBY,OAAQP,EACRQ,MAAO,EAAE,EACLhB,EAAQK,aAAa,EAAI,CAAEY,OAAQjB,EAAQK,aAAAA,AAAa,GACxDL,AAAiB,QAAjBA,EAAQI,IAAI,EAAc,CAAEc,OAAQ,CAAClB,EAAQI,IAAI,CAAA,AAAC,IACrD,MAAA,EAAA,IAAA,MAAA,OAAAM,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEH,CACCC,iBAAkB,SAACC,CAAQ,EAC1B,IAAMP,EAASO,EAASP,MAAM,CAAGO,EAASN,KAAK,CAE/C,OAAOD,GAAUO,EAASC,KAAK,CAAGC,KAAAA,EAAYT,CAC/C,GAGH"}