)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/hooks/useMonitorsList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatMonitorRecord } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback, useState } from 'react';\n\nimport { useScrollableRecordList } from '../../hooks/lists/useScrollableRecordList';\nimport { useComponentDidUpdate } from '../../hooks/useComponentDidUpdate';\nimport { RecordList } from '../../lib/lists/RecordList';\n\ntype MonitorsListOptions = {\n\tfilter: string;\n};\n\nexport const useMonitorsList = (\n\toptions: MonitorsListOptions,\n): {\n\titemsList: RecordList<ILivechatMonitorRecord>;\n\tinitialItemCount: number;\n\treload: () => void;\n\tloadMoreItems: (start: number, end: number) => void;\n} => {\n\tconst [itemsList, setItemsList] = useState(() => new RecordList<ILivechatMonitorRecord>());\n\tconst reload = useCallback(() => setItemsList(new RecordList<ILivechatMonitorRecord>()), []);\n\n\tconst getMonitors = useEndpoint('GET', '/v1/livechat/monitors');\n\n\tuseComponentDidUpdate(() => {\n\t\toptions && reload();\n\t}, [options, reload]);\n\n\tconst fetchData = useCallback(\n\t\tasync (start, end) => {\n\t\t\tconst { monitors, total } = await getMonitors({\n\t\t\t\ttext: options.filter,\n\t\t\t\toffset: start,\n\t\t\t\tcount: end + start,\n\t\t\t\tsort: JSON.stringify({ username: 1 }),\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\titems: monitors.map((members: any) => ({\n\t\t\t\t\t...members,\n\t\t\t\t\tlabel: members.username,\n\t\t\t\t\tvalue: members._id,\n\t\t\t\t})),\n\t\t\t\titemCount: total,\n\t\t\t};\n\t\t},\n\t\t[getMonitors, options.filter],\n\t);\n\n\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\n\treturn {\n\t\treload,\n\t\titemsList,\n\t\tloadMoreItems,\n\t\tinitialItemCount,\n\t};\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","_slicedToArray","export","useMonitorsList","useEndpoint","useCallback","useState","useScrollableRecordList","useComponentDidUpdate","RecordList","options","_useState2","itemsList","setItemsList","reload","getMonitors","_useScrollableRecordL","start","end","_await$getMonitors","monitors","total","async","_context","prev","next","awrap","text","filter","offset","count","sort","JSON","stringify","username","sent","abrupt","items","map","members","label","value","_id","itemCount","stop","Promise","loadMoreItems","initialItemCount"],"mappings":"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAG,EAAAA,CAAA,CAAA,EAAA,GAAvDL,EAAOM,MAAE,CAAA,CAAAC,gBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAP,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAQ,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,QAAAA,CAAAS,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,4CAAAA,CAAAW,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAX,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAY,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAa,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAWhD,IAXPV,EAAuDC,EAAAC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAW1CN,EAAkB,SAC9BO,CAA4B,EAO5B,IAA0FC,EAAAV,EAAxDK,EAAS,WAAA,OAAM,IAAIG,CAAoC,GAAC,GAAnFG,EAASD,CAAA,CAAA,EAAA,CAAEE,EAAYF,CAAA,CAAA,EAAA,CACxBG,EAAST,EAAY,WAAA,OAAMQ,EAAa,IAAIJ,EAAqC,EAAE,EAAE,EAErFM,EAAcX,EAAY,MAAO,yBAEvCI,EAAsB,WACrBE,GAAWI,GACZ,EAAG,CAACJ,EAASI,EAAO,EAuBpB,IAAAE,EAA4CT,EAAwBK,EArBlDP,EACjB,SAAOY,CAAK,CAAEC,CAAG,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAtB,EAAAuB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA1B,EAAA2B,KAAA,CACkBX,EAAY,CAC7CY,KAAMjB,EAAQkB,MAAM,CACpBC,OAAQZ,EACRa,MAAOZ,EAAMD,EACbc,KAAMC,KAAKC,SAAS,CAAC,CAAEC,SAAU,CAAC,KACjC,MAAA,EALqB,OAAfd,EAAQD,AAKdA,CAAAA,EAAAI,EAAAY,IAAA,EALMf,QAAQ,CAAEC,EAAKF,EAALE,KAAK,CAAAE,EAAAa,MAAA,CAAA,SAOhB,CACNC,MAAOjB,EAASkB,GAAG,CAAC,SAACC,CAAY,EAAA,OAAAvC,EAAAA,EAAA,CAAA,EAC7BuC,GAAO,CAAA,EAAA,CACVC,MAAOD,EAAQL,QAAQ,CACvBO,MAAOF,EAAQG,GAAAA,AAAG,EAAA,GAEnBC,UAAWtB,GACX,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAqB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEF,CAAC9B,EAAaL,EAAQkB,MAAM,CAAC,EAG4D,IAAlFkB,EAAa9B,EAAb8B,aAAa,CAAEC,EAAgB/B,EAAhB+B,gBAAgB,CACvC,MAAO,CACNjC,OAAAA,EACAF,UAAAA,EACAkC,cAAAA,EACAC,iBAAAA,EAEF"}