function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},2),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){s=e}},0),t.link("@rocket.chat/ui-contexts",{useToastMessageDispatch:function(e){u=e},useSessionDispatch:function(e){o=e},useLoginWithPassword:function(e){c=e},useSettingSetValue:function(e){l=e},useSettingsDispatch:function(e){d=e},useMethod:function(e){f=e},useEndpoint:function(e){p=e},useTranslation:function(e){g=e}},1),t.link("meteor/meteor",{Meteor:function(e){m=e}},2),t.link("react",{default:function(e){v=e},useCallback:function(e){k=e},useMemo:function(e){_=e},useState:function(e){S=e}},3),t.link("../../../../lib/callbacks",{callbacks:function(e){h=e}},4),t.link("../../../../lib/emailValidator",{validateEmail:function(e){x=e}},5),t.link("../../../hooks/useLicense",{useInvalidateLicense:function(e){y=e}},6),t.link("../../../lib/queryClient",{queryClient:function(e){w=e}},7),t.link("../contexts/SetupWizardContext",{SetupWizardContext:function(e){b=e}},8),t.link("../hooks/useParameters",{useParameters:function(e){z=e}},9),t.link("../hooks/useStepRouting",{useStepRouting:function(e){D=e}},10);var r,a,i,s,u,o,c,l,d,f,p,g,m,v,k,_,S,h,x,y,w,b,z,D,P={organizationData:{organizationName:"",organizationIndustry:"",organizationSize:"",country:""},serverData:{agreement:!1,email:"",updates:!1},registrationData:{cloudEmail:"",device_code:"",user_code:""}};t.exportDefault(function(e){var n=e.children,t=y(),C=g(),E=i(S(P),2),R=E[0],W=E[1],A=i(D(),2),T=A[0],I=A[1],M=z(),L=M.isSuccess,N=M.data,O=u(),U=d(),q=l("Show_Setup_Wizard"),V=f("registerUser"),j=f("setUsername"),Q=c(),Y=o("forceLogin"),B=p("POST","/v1/cloud.createRegistrationIntent"),F=k(function(){return I(function(e){return e-1})},[I]),G=k(function(){return I(function(e){return e+1})},[I]),H=k(function(e){return I(function(){return e})},[I]),J=k(function(e){return!!x(e)||C("Invalid_email")},[C]),K=k(function(e){var n,t,a,i;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.fullname,t=e.username,a=e.email,i=e.password,s.next=3,r.awrap(V({name:n,username:t,email:a,pass:i}));case 3:return h.run("userRegistered",{}),s.prev=4,s.next=7,r.awrap(Q(a,i));case 7:s.next=16;break;case 9:if(s.prev=9,s.t0=s.catch(4),!(s.t0 instanceof m.Error&&"error-invalid-email"===s.t0.error)){s.next=14;break}return O({type:"success",message:C("We_have_sent_registration_email")}),s.abrupt("return");case 14:throw(s.t0 instanceof Error||"string"==typeof s.t0)&&O({type:"error",message:s.t0}),s.t0;case 16:return Y(!1),s.next=19,r.awrap(j(t));case 19:return s.next=21,r.awrap(U([{_id:"Organization_Email",value:a}]));case 21:h.run("usernameSet",{});case 22:case"end":return s.stop()}},null,null,[[4,9]],Promise)},[V,Y,j,U,Q,O,C]),X=k(function(e){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(U([{_id:"Cloud_Service_Agree_PrivacyTerms",value:e}]));case 2:case"end":return n.stop()}},null,null,null,Promise)},[U]),Z=k(function(){var e,n,t;return r.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=(e=R.serverData).updates,t=e.agreement,a.next=3,r.awrap(U([{_id:"Register_Server",value:!0},{_id:"Allow_Marketing_Emails",value:n}]));case 3:return a.next=5,r.awrap(X(t));case 5:case"end":return a.stop()}},null,null,null,Promise)},[U,X,R]),$=k(function(e){var n,t,a,i;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.organizationName,t=e.organizationIndustry,a=e.organizationSize,i=e.country,s.next=3,r.awrap(U([{_id:"Country",value:i},{_id:"Industry",value:t},{_id:"Size",value:a},{_id:"Organization_Name",value:n}]));case 3:case"end":return s.stop()}},null,null,null,Promise)},[U]),ee=s(function(e){var n,i,s,u;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.email,s=void 0!==(i=e.resend)&&i,o.prev=1,o.next=4,r.awrap(B({resend:s,email:n}));case 4:u=o.sent.intentData,t(100),w.invalidateQueries(["getRegistrationStatus"]),W(function(e){return a(a({},e),{},{registrationData:a(a({},u),{},{cloudEmail:n})})}),H(4),q("in_progress"),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(1),O({type:"error",message:C("Cloud_register_error")});case 16:case"end":return o.stop()}},null,null,[[1,13]],Promise)}),en=s(function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"success",message:C("Your_workspace_is_ready")}),e.abrupt("return",q("completed"));case 2:case"end":return e.stop()}},null,null,null,Promise)}),et=_(function(){return{setupWizardData:R,setSetupWizardData:W,currentStep:T,loaded:L,settings:N.settings,skipCloudRegistration:N.serverAlreadyRegistered,goToPreviousStep:F,goToNextStep:G,goToStep:H,registerAdminUser:K,validateEmail:J,registerServer:ee,saveAgreementData:X,saveWorkspaceData:Z,saveOrganizationData:$,completeSetupWizard:en,maxSteps:N.serverAlreadyRegistered?2:4}},[R,T,L,N.settings,N.serverAlreadyRegistered,F,G,H,K,J,ee,X,Z,$,en]);return v.createElement(b.Provider,{value:et},n)})}
//# sourceMappingURL=/dynamic/client/views/setupWizard/providers/7baa26c381614915262ba201704977625ed4882f.map
