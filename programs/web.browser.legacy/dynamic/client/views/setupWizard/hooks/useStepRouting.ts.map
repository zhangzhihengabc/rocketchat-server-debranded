)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/hooks/useStepRouting.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useRouteParameter, useRouter, useRole, useSetting } from '@rocket.chat/ui-contexts';\nimport type { Dispatch, SetStateAction } from 'react';\nimport { useState, useEffect } from 'react';\n\nexport const useStepRouting = (): [number, Dispatch<SetStateAction<number>>] => {\n\tconst param = useRouteParameter('step');\n\tconst router = useRouter();\n\tconst hasAdminRole = useRole('admin');\n\tconst hasOrganizationData = !!useSetting('Organization_Name');\n\n\tconst [currentStep, setCurrentStep] = useState<number>(() => {\n\t\tconst initialStep = (() => {\n\t\t\tswitch (true) {\n\t\t\t\tcase hasOrganizationData: {\n\t\t\t\t\treturn 3;\n\t\t\t\t}\n\t\t\t\tcase hasAdminRole: {\n\t\t\t\t\treturn 2;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\n\t\tif (!param) {\n\t\t\treturn initialStep;\n\t\t}\n\n\t\tconst step = parseInt(param, 10);\n\t\tif (step && Number.isFinite(step) && step >= 1) {\n\t\t\treturn step;\n\t\t}\n\n\t\treturn initialStep;\n\t});\n\n\tuseEffect(() => {\n\t\tswitch (true) {\n\t\t\tcase (currentStep === 1 || currentStep === 2) && hasOrganizationData: {\n\t\t\t\tsetCurrentStep(3);\n\t\t\t\trouter.navigate(`/setup-wizard/3`);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase currentStep === 1 && hasAdminRole: {\n\t\t\t\tsetCurrentStep(2);\n\t\t\t\trouter.navigate(`/setup-wizard/2`);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\trouter.navigate(`/setup-wizard/${currentStep}`);\n\t\t\t}\n\t\t}\n\t}, [router, currentStep, hasAdminRole, hasOrganizationData]);\n\n\treturn [currentStep, setCurrentStep];\n};\n",null],"names":["module","link","default","_slicedToArray","v","export","useStepRouting","useRouteParameter","useRouter","useRole","useSetting","useState","useEffect","param","router","hasAdminRole","hasOrganizationData","_useState2","initialStep","step","parseInt","Number","isFinite","currentStep","setCurrentStep","navigate"],"mappings":"uBAASA,EAAiBC,IAAE,CAAA,uCAAsC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAA2BC,CAAA,CAAA,EAAA,GAA7FJ,EAAOK,MAAE,CAAA,CAAAC,eAAmB,WAAW,OAASA,CAAY,CAAA,GAAiCN,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAO,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAAW,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAItF,IAJPT,EAAkEI,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAIhFN,EAAiB,WAC7B,IAAMO,EAAQN,EAAkB,QAC1BO,EAASN,IACTO,EAAeN,EAAQ,SACvBO,EAAsB,CAAC,CAACN,EAAW,qBA2BvCO,EAAAd,EAzBoCQ,EAAiB,WACtD,IAAMO,EAAe,WACpB,OAAQ,CAAA,GACP,KAAKF,EACJ,OAAO,CAER,MAAKD,EACJ,OAAO,CAER,SACC,OAAO,CACP,CAEH,IAEA,GAAI,CAACF,EACJ,OAAOK,EAGR,IAAMC,EAAOC,SAASP,EAAO,WAC7B,AAAIM,GAAQE,OAAOC,QAAQ,CAACH,IAASA,GAAQ,EACrCA,EAGDD,CACR,GAAE,GAzBKK,EAAWN,CAAA,CAAA,EAAA,CAAEO,EAAcP,CAAA,CAAA,EAAA,CA+ClC,OApBAL,EAAU,WACT,OAAQ,CAAA,GACP,IAAK,AAACW,CAAAA,AAAgB,IAAhBA,GAAqBA,AAAgB,IAAhBA,CAAgB,GAAMP,EAChDQ,EAAe,GACfV,EAAOW,QAAQ,CAAA,mBACf,KAGD,MAAKF,AAAgB,IAAhBA,GAAqBR,EACzBS,EAAe,GACfV,EAAOW,QAAQ,CAAA,mBACf,KAGD,SACCX,EAAOW,QAAQ,CAAA,iBAAkBF,EACjC,CAEH,EAAG,CAACT,EAAQS,EAAaR,EAAcC,EAAoB,EAEpD,CAACO,EAAaC,EAAe,AACrC"}