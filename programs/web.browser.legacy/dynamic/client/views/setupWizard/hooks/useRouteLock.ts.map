)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/hooks/useRouteLock.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useUserId, useUser, useSetting, useRole, useRouter } from '@rocket.chat/ui-contexts';\nimport { useEffect, useState } from 'react';\n\nexport const useRouteLock = (): boolean => {\n\tconst [locked, setLocked] = useState(true);\n\tconst setupWizardState = useSetting('Show_Setup_Wizard');\n\tconst userId = useUserId();\n\tconst user = useDebouncedValue(useUser(), 100);\n\tconst hasAdminRole = useRole('admin');\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tif (!setupWizardState) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (userId && !user?.status) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isComplete = setupWizardState === 'completed';\n\t\tconst noUserLoggedInAndIsNotPending = locked && !user && setupWizardState !== 'pending';\n\t\tconst userIsLoggedInButIsNotAdmin = !!user && !hasAdminRole;\n\n\t\tconst mustRedirect = isComplete || noUserLoggedInAndIsNotPending || userIsLoggedInButIsNotAdmin;\n\n\t\tif (mustRedirect) {\n\t\t\trouter.navigate('/home');\n\t\t\treturn;\n\t\t}\n\n\t\tsetLocked(false);\n\t}, [router, setupWizardState, userId, user, hasAdminRole, locked]);\n\n\treturn locked;\n};\n",null],"names":["module","link","default","_slicedToArray","export","useRouteLock","useDebouncedValue","useUserId","useUser","useSetting","useRole","useRouter","useEffect","useState","_useState2","locked","setLocked","setupWizardState","userId","user","hasAdminRole","router","status","isComplete","noUserLoggedInAndIsNotPending","userIsLoggedInButIsNotAdmin","navigate"],"mappings":"uBAASA,EAAiBC,IAAE,CAAA,uCAAoC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAhEH,EAAOI,MAAE,CAAA,CAAAC,aAAmB,WAAM,OAAAA,CAAA,CAAA,GAA8BL,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAM,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAO,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAX,EAAAA,IAAAA,CAAAA,QAAAA,CAAAY,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAIzD,IAJPV,EAAgEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAInDR,EAAe,WAC3B,IAA0CS,EAAAX,EAAdU,EAAS,CAAA,GAAK,GAAnCE,EAAMD,CAAA,CAAA,EAAA,CAAEE,EAASF,CAAA,CAAA,EAAA,CAClBG,EAAmBR,EAAW,qBAC9BS,EAASX,IACTY,EAAOb,EAAkBE,IAAW,KACpCY,EAAeV,EAAQ,SACvBW,EAASV,IAyBf,OAvBAC,EAAU,WACT,GAAKK,GAIDC,CAAAA,CAAAA,GAAWC,MAAAA,GAAAA,EAAMG,MAAM,GAI3B,IAAMC,EAAaN,AAAqB,cAArBA,EACbO,EAAgCT,GAAU,CAACI,GAAQF,AAAqB,YAArBA,EACnDQ,EAA8B,CAAC,CAACN,GAAQ,CAACC,EAI/C,GAFqBG,GAAcC,GAAiCC,EAElD,CACjBJ,EAAOK,QAAQ,CAAC,SAChB,OAGDV,EAAU,CAAA,GACX,EAAG,CAACK,EAAQJ,EAAkBC,EAAQC,EAAMC,EAAcL,EAAO,EAE1DA,CACR"}