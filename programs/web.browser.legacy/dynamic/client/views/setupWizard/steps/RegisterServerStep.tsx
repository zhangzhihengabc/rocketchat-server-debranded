function module(e,t,n){n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){u=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},2),n.link("@rocket.chat/onboarding-ui",{RegisterServerPage:function(e){o=e},RegisterOfflinePage:function(e){c=e}},0),n.link("@rocket.chat/ui-contexts",{useEndpoint:function(e){a=e},useMethod:function(e){s=e},useTranslation:function(e){l=e}},1),n.link("@tanstack/react-query",{useMutation:function(e){f=e},useQuery:function(e){p=e}},2),n.link("react",{default:function(e){d=e},useState:function(e){m=e}},3),n.link("../../../hooks/useLicense",{useInvalidateLicense:function(e){g=e}},4),n.link("../../../lib/toast",{dispatchToastMessage:function(e){S=e}},5),n.link("../contexts/SetupWizardContext",{useSetupWizardContext:function(e){k=e}},6);var r,u,i,o,c,a,s,l,f,p,d,m,g,S,k,E={REGISTERED:"REGISTERED",OFFLINE:"OFFLINE"};n.exportDefault(function(){var e=l(),t=k(),n=t.currentStep,h=t.goToNextStep,v=t.setSetupWizardData,y=t.registerServer,b=t.maxSteps,x=t.completeSetupWizard,R=t.saveAgreementData,T=i(m(E.REGISTERED),2),I=T[0],P=T[1],C=g(),D=a("POST","/v1/cloud.manualRegister"),O=a("POST","/v1/cloud.registerPreIntent"),F=s("cloud:getWorkspaceRegisterData"),W=p(["setupWizard/clientKey"],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F());case 1:case"end":return e.stop()}},null,null,null,Promise)},{staleTime:1/0}).data,w=p(["setupWizard/registerIntent"],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O());case 1:case"end":return e.stop()}},null,null,null,Promise)},{staleTime:1/0,select:function(e){return e.offline}}),z=w.data,L=w.isLoading,N=w.isError,G=f(["setupWizard/confirmOfflineRegistration"],function(e){return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",D({cloudBlob:e}));case 1:case"end":return t.stop()}},null,null,null,Promise)},{onSuccess:function(){C(100),x()},onError:function(){S({type:"error",message:e("Cloud_register_error")})}}).mutate;return I===E.OFFLINE?d.createElement(c,{termsHref:"https://rocket.chat/terms",policyHref:"https://rocket.chat/privacy",clientKey:W||"",onCopySecurityCode:function(){return S({type:"success",message:e("Copied")})},onBackButtonClick:function(){return P(E.REGISTERED)},onSubmit:function(e){var t,n;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.token,n=e.agreement,u.next=3,r.awrap(R(n));case 3:G(t);case 4:case"end":return u.stop()}},null,null,null,Promise)}}):d.createElement(o,{onClickRegisterOffline:function(){return P(E.OFFLINE)},stepCount:b,onSubmit:function(e){return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return h(),v(function(t){return u(u({},t),{},{serverData:e})}),t.next=4,r.awrap(y(e));case 4:case"end":return t.stop()}},null,null,null,Promise)},currentStep:n,offline:N||!L&&z})})}
//# sourceMappingURL=/dynamic/client/views/setupWizard/steps/1c46c11afb907b884b1e25fed54d75efe23ccbd5.map
