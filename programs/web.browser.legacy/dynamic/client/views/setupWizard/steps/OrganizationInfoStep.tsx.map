)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/steps/OrganizationInfoStep.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISetting } from '@rocket.chat/core-typings';\nimport { OrganizationInfoPage } from '@rocket.chat/onboarding-ui';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useRole, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React from 'react';\n\nimport { useSetupWizardContext } from '../contexts/SetupWizardContext';\n\nconst getSettingOptions = (\n\tsettings: Array<ISetting> | undefined,\n\tsettingId: ISetting['_id'],\n\tt: ReturnType<typeof useTranslation>,\n): Array<[key: string, text: string]> => {\n\tif (!settings) {\n\t\treturn [];\n\t}\n\n\tconst setting = settings.find(({ _id }) => _id === settingId);\n\n\tif (!setting?.values) {\n\t\treturn [];\n\t}\n\n\treturn setting.values.map(({ i18nLabel, key }) => [String(key), t(i18nLabel as TranslationKey)]);\n};\n\nconst OrganizationInfoStep = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst hasAdminRole = useRole('admin');\n\n\tconst {\n\t\tsetupWizardData: { organizationData },\n\t\tsaveOrganizationData,\n\t\tsetSetupWizardData,\n\t\tsettings,\n\t\tgoToPreviousStep,\n\t\tgoToNextStep,\n\t\tcompleteSetupWizard,\n\t\tcurrentStep,\n\t\tskipCloudRegistration,\n\t\tmaxSteps,\n\t} = useSetupWizardContext();\n\n\tconst countryOptions = getSettingOptions(settings, 'Country', t);\n\tconst organizationIndustryOptions = getSettingOptions(settings, 'Industry', t);\n\tconst organizationSizeOptions = getSettingOptions(settings, 'Size', t);\n\n\tconst handleSubmit: ComponentProps<typeof OrganizationInfoPage>['onSubmit'] = async (data) => {\n\t\tif (skipCloudRegistration) {\n\t\t\treturn completeSetupWizard();\n\t\t}\n\n\t\tsetSetupWizardData((prevState) => ({ ...prevState, organizationData: data }));\n\n\t\tawait saveOrganizationData(data);\n\n\t\tgoToNextStep();\n\t};\n\n\treturn (\n\t\t<OrganizationInfoPage\n\t\t\tinitialValues={organizationData}\n\t\t\tonSubmit={handleSubmit}\n\t\t\tonBackButtonClick={!hasAdminRole ? goToPreviousStep : undefined}\n\t\t\tcurrentStep={currentStep}\n\t\t\tstepCount={maxSteps}\n\t\t\torganizationIndustryOptions={organizationIndustryOptions}\n\t\t\torganizationSizeOptions={organizationSizeOptions}\n\t\t\tcountryOptions={countryOptions}\n\t\t\tnextStep={skipCloudRegistration ? t('Register') : undefined}\n\t\t/>\n\t);\n};\n\nexport default OrganizationInfoStep;\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","OrganizationInfoPage","useRole","useTranslation","v","React","useSetupWizardContext","getSettingOptions","settings","settingId","t","setting","find","_ref","_id","values","map","_ref2","i18nLabel","String","key","exportDefault","hasAdminRole","_useSetupWizardContex","organizationData","setupWizardData","saveOrganizationData","setSetupWizardData","goToPreviousStep","goToNextStep","completeSetupWizard","currentStep","skipCloudRegistration","maxSteps","countryOptions","organizationIndustryOptions","organizationSizeOptions","createElement","initialValues","onSubmit","data","async","_context","prev","next","abrupt","prevState","awrap","stop","Promise","onBackButtonClick","undefined","stepCount","nextStep"],"mappings":"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"}