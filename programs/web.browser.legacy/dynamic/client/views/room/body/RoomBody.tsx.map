)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/body/RoomBody.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage, IUser } from '@rocket.chat/core-typings';\nimport { isEditedMessage } from '@rocket.chat/core-typings';\nimport {\n\tusePermission,\n\tuseRole,\n\tuseRouter,\n\tuseSearchParameter,\n\tuseSetting,\n\tuseTranslation,\n\tuseUser,\n\tuseUserPreference,\n} from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement, UIEvent } from 'react';\nimport React, { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\n\nimport { ChatMessage, RoomRoles } from '../../../../app/models/client';\nimport { RoomHistoryManager } from '../../../../app/ui-utils/client';\nimport { isAtBottom } from '../../../../app/ui/client/views/app/lib/scrolling';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { withDebouncing, withThrottling } from '../../../../lib/utils/highOrderFunctions';\nimport ScrollableContentWrapper from '../../../components/ScrollableContentWrapper';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\nimport { RoomManager } from '../../../lib/RoomManager';\nimport type { Upload } from '../../../lib/chats/Upload';\nimport { roomCoordinator } from '../../../lib/rooms/roomCoordinator';\nimport { setMessageJumpQueryStringParameter } from '../../../lib/utils/setMessageJumpQueryStringParameter';\nimport Announcement from '../Announcement';\nimport { MessageList } from '../MessageList/MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useScrollMessageList } from '../hooks/useScrollMessageList';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LeaderBar from './LeaderBar';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useFileUploadDropTarget } from './hooks/useFileUploadDropTarget';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useRetentionPolicy } from './hooks/useRetentionPolicy';\nimport { useUnreadMessages } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst [lastMessageDate, setLastMessageDate] = useState<Date | undefined>();\n\tconst [hideLeaderHeader, setHideLeaderHeader] = useState(false);\n\tconst [hasNewMessages, setHasNewMessages] = useState(false);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\n\tconst messagesBoxRef = useRef<HTMLDivElement | null>(null);\n\tconst atBottomRef = useRef(true);\n\tconst lastScrollTopRef = useRef(0);\n\n\tconst chat = useChat();\n\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst [fileUploadTriggerProps, fileUploadOverlayProps] = useFileUploadDropTarget();\n\n\tconst _isAtBottom = useCallback((scrollThreshold = 0) => {\n\t\tconst wrapper = wrapperRef.current;\n\n\t\tif (!wrapper) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isAtBottom(wrapper, scrollThreshold)) {\n\t\t\tsetHasNewMessages(false);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, []);\n\n\tconst scrollMessageList = useScrollMessageList(wrapperRef);\n\n\tconst sendToBottom = useCallback(() => {\n\t\tscrollMessageList((wrapper) => {\n\t\t\treturn { left: 30, top: wrapper?.scrollHeight };\n\t\t});\n\n\t\tsetHasNewMessages(false);\n\t}, [scrollMessageList]);\n\n\tconst sendToBottomIfNecessary = useCallback(() => {\n\t\tif (atBottomRef.current === true) {\n\t\t\tsendToBottom();\n\t\t}\n\t}, [sendToBottom]);\n\n\tconst checkIfScrollIsAtBottom = useCallback(() => {\n\t\tatBottomRef.current = _isAtBottom(100);\n\t}, [_isAtBottom]);\n\n\tconst handleNewMessageButtonClick = useCallback(() => {\n\t\tatBottomRef.current = true;\n\t\tsendToBottomIfNecessary();\n\t\tchat.composer?.focus();\n\t}, [chat, sendToBottomIfNecessary]);\n\n\tconst handleJumpToRecentButtonClick = useCallback(() => {\n\t\tatBottomRef.current = true;\n\t\tRoomHistoryManager.clear(room._id);\n\t\tRoomHistoryManager.getMoreIfIsEmpty(room._id);\n\t}, [room._id]);\n\n\tconst [unread, setUnreadCount] = useUnreadMessages(room);\n\n\tconst uploads = useSyncExternalStore(chat.uploads.subscribe, chat.uploads.get);\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\n\n\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\n\t\tconst leaderRoomRole = RoomRoles.findOne({\n\t\t\t'rid': room._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: user?._id },\n\t\t});\n\n\t\tif (!leaderRoomRole) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...leaderRoomRole.u,\n\t\t\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\n\t\t};\n\t});\n\n\tconst handleOpenUserCardButtonClick = useCallback(\n\t\t(event: UIEvent, username: IUser['username']) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchat?.userCard.open(username)(event);\n\t\t},\n\t\t[chat?.userCard],\n\t);\n\n\tconst handleUnreadBarJumpToButtonClick = useCallback(() => {\n\t\tconst rid = room._id;\n\t\tconst { firstUnread } = RoomHistoryManager.getRoom(rid);\n\t\tlet message = firstUnread?.get();\n\t\tif (!message) {\n\t\t\tmessage = ChatMessage.findOne({ rid, ts: { $gt: unread?.since } }, { sort: { ts: 1 }, limit: 1 });\n\t\t}\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\t\tsetMessageJumpQueryStringParameter(message?._id);\n\t\tsetUnreadCount(0);\n\t}, [room._id, unread?.since, setUnreadCount]);\n\n\tconst handleMarkAsReadButtonClick = useCallback(() => {\n\t\tchat.readStateManager.markAsRead();\n\t\tsetUnreadCount(0);\n\t}, [chat.readStateManager, setUnreadCount]);\n\n\tconst handleUploadProgressClose = useCallback(\n\t\t(id: Upload['id']) => {\n\t\t\tchat.uploads.cancel(id);\n\t\t},\n\t\t[chat],\n\t);\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\n\tuseEffect(() => {\n\t\tcallbacks.add(\n\t\t\t'streamNewMessage',\n\t\t\t(msg: IMessage) => {\n\t\t\t\tif (room._id !== msg.rid || isEditedMessage(msg) || msg.tmid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (msg.u._id === user?._id) {\n\t\t\t\t\tsendToBottom();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!_isAtBottom()) {\n\t\t\t\t\tsetHasNewMessages(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallbacks.priority.MEDIUM,\n\t\t\troom._id,\n\t\t);\n\n\t\treturn () => {\n\t\t\tcallbacks.remove('streamNewMessage', room._id);\n\t\t};\n\t}, [_isAtBottom, room._id, sendToBottom, user?._id]);\n\n\tuseEffect(() => {\n\t\tconst messageList = wrapperRef.current?.querySelector('ul');\n\n\t\tif (!messageList) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new ResizeObserver(() => {\n\t\t\tsendToBottomIfNecessary();\n\t\t});\n\n\t\tobserver.observe(messageList);\n\n\t\treturn () => {\n\t\t\tobserver?.disconnect();\n\t\t};\n\t}, [sendToBottomIfNecessary]);\n\n\tconst router = useRouter();\n\n\tconst debouncedReadMessageRead = useMemo(\n\t\t() =>\n\t\t\twithDebouncing({ wait: 500 })(() => {\n\t\t\t\tchat.readStateManager.attemptMarkAsRead();\n\t\t\t}),\n\t\t[chat.readStateManager],\n\t);\n\n\tuseEffect(\n\t\t() =>\n\t\t\trouter.subscribeToRouteChange(() => {\n\t\t\t\tconst routeName = router.getRouteName();\n\t\t\t\tif (!routeName || !roomCoordinator.isRouteNameKnown(routeName)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdebouncedReadMessageRead();\n\t\t\t}),\n\t\t[debouncedReadMessageRead, room._id, router, subscribed, subscription?.alert, subscription?.unread],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!subscribed) {\n\t\t\tsetUnreadCount(0);\n\t\t\treturn;\n\t\t}\n\n\t\tconst count = ChatMessage.find({\n\t\t\trid: room._id,\n\t\t\tts: { $lte: lastMessageDate, $gt: subscription?.ls },\n\t\t}).count();\n\n\t\tsetUnreadCount(count);\n\t}, [lastMessageDate, room._id, setUnreadCount, subscribed, subscription?.ls]);\n\n\tuseEffect(() => {\n\t\tif (!unread?.count) {\n\t\t\treturn debouncedReadMessageRead();\n\t\t}\n\t}, [debouncedReadMessageRead, room._id, unread?.count]);\n\n\tuseEffect(() => {\n\t\tconst wrapper = wrapperRef.current;\n\n\t\tif (!wrapper) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst getElementFromPoint = (topOffset = 0): Element | undefined => {\n\t\t\tconst messagesBox = messagesBoxRef.current;\n\n\t\t\tif (!messagesBox) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst messagesBoxLeft = messagesBox.getBoundingClientRect().left + window.pageXOffset;\n\t\t\tconst messagesBoxTop = messagesBox.getBoundingClientRect().top + window.pageYOffset;\n\t\t\tconst messagesBoxWidth = parseFloat(getComputedStyle(messagesBox).width);\n\n\t\t\tlet element;\n\t\t\tif (document.dir === 'rtl') {\n\t\t\t\telement = document.elementFromPoint(messagesBoxLeft + messagesBoxWidth - 1, messagesBoxTop + topOffset + 1);\n\t\t\t} else {\n\t\t\t\telement = document.elementFromPoint(messagesBoxLeft + 1, messagesBoxTop + topOffset + 1);\n\t\t\t}\n\n\t\t\tif (element?.classList.contains('rcx-message') || element?.classList.contains('rcx-message--sequential')) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t};\n\n\t\tconst updateUnreadCount = withThrottling({ wait: 300 })(() => {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst lastInvisibleMessageOnScreen = getElementFromPoint(0) || getElementFromPoint(20) || getElementFromPoint(40);\n\n\t\t\t\tif (!lastInvisibleMessageOnScreen) {\n\t\t\t\t\tsetUnreadCount(0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst lastMessage = ChatMessage.findOne(lastInvisibleMessageOnScreen.id);\n\t\t\t\tif (!lastMessage) {\n\t\t\t\t\tsetUnreadCount(0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetLastMessageDate(lastMessage.ts);\n\t\t\t});\n\t\t});\n\n\t\tconst handleWrapperScroll = withThrottling({ wait: 100 })((event) => {\n\t\t\tconst roomLeader = messagesBoxRef.current?.querySelector('.room-leader');\n\t\t\tif (roomLeader) {\n\t\t\t\tif (event.target.scrollTop < lastScrollTopRef.current) {\n\t\t\t\t\tsetHideLeaderHeader(false);\n\t\t\t\t} else if (_isAtBottom(100) === false && event.target.scrollTop > parseFloat(getComputedStyle(roomLeader).height)) {\n\t\t\t\t\tsetHideLeaderHeader(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlastScrollTopRef.current = event.target.scrollTop;\n\t\t\tconst height = event.target.clientHeight;\n\t\t\tconst isLoading = RoomHistoryManager.isLoading(room._id);\n\t\t\tconst hasMore = RoomHistoryManager.hasMore(room._id);\n\t\t\tconst hasMoreNext = RoomHistoryManager.hasMoreNext(room._id);\n\n\t\t\tif ((isLoading === false && hasMore === true) || hasMoreNext === true) {\n\t\t\t\tif (hasMore === true && lastScrollTopRef.current <= height / 3) {\n\t\t\t\t\tRoomHistoryManager.getMore(room._id);\n\t\t\t\t} else if (hasMoreNext === true && Math.ceil(lastScrollTopRef.current) >= event.target.scrollHeight - height) {\n\t\t\t\t\tRoomHistoryManager.getMoreNext(room._id, atBottomRef);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\twrapper.addEventListener('scroll', updateUnreadCount);\n\t\twrapper.addEventListener('scroll', handleWrapperScroll);\n\n\t\treturn () => {\n\t\t\twrapper.removeEventListener('scroll', updateUnreadCount);\n\t\t\twrapper.removeEventListener('scroll', handleWrapperScroll);\n\t\t};\n\t}, [_isAtBottom, room._id, setUnreadCount]);\n\n\tuseEffect(() => {\n\t\tconst wrapper = wrapperRef.current;\n\n\t\tif (!wrapper) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst store = RoomManager.getStore(room._id);\n\n\t\tconst handleWrapperScroll = withThrottling({ wait: 30 })(() => {\n\t\t\tstore?.update({ scroll: wrapper.scrollTop, atBottom: isAtBottom(wrapper, 50) });\n\t\t});\n\n\t\tconst afterMessageGroup = (): void => {\n\t\t\tif (store?.scroll && !store.atBottom) {\n\t\t\t\twrapper.scrollTop = store.scroll;\n\t\t\t} else {\n\t\t\t\tsendToBottom();\n\t\t\t}\n\t\t\twrapper.removeEventListener('MessageGroup', afterMessageGroup);\n\t\t};\n\n\t\twrapper.addEventListener('scroll', handleWrapperScroll);\n\n\t\twrapper.addEventListener('MessageGroup', afterMessageGroup);\n\n\t\treturn () => {\n\t\t\twrapper.removeEventListener('MessageGroup', afterMessageGroup);\n\t\t\twrapper.removeEventListener('scroll', handleWrapperScroll);\n\t\t};\n\t}, [room._id, sendToBottom]);\n\n\tuseRestoreScrollPosition(room._id, scrollMessageList, sendToBottom);\n\n\tuseEffect(() => {\n\t\tconst wrapper = wrapperRef.current;\n\n\t\tif (!wrapper) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleWheel = withThrottling({ wait: 100 })(() => {\n\t\t\tcheckIfScrollIsAtBottom();\n\t\t});\n\n\t\tconst handleTouchStart = (): void => {\n\t\t\tatBottomRef.current = false;\n\t\t};\n\n\t\tlet timer1s: ReturnType<typeof setTimeout> | undefined;\n\t\tlet timer2s: ReturnType<typeof setTimeout> | undefined;\n\n\t\tconst handleTouchEnd = (): void => {\n\t\t\tcheckIfScrollIsAtBottom();\n\t\t\ttimer1s = setTimeout(() => checkIfScrollIsAtBottom(), 1000);\n\t\t\ttimer2s = setTimeout(() => checkIfScrollIsAtBottom(), 2000);\n\t\t};\n\n\t\t// wrapper.addEventListener('mousewheel', handleWheel);\n\t\t// wrapper.addEventListener('wheel', handleWheel);\n\t\twrapper.addEventListener('scroll', handleWheel);\n\t\t// wrapper.addEventListener('touchstart', handleTouchStart);\n\t\t// wrapper.addEventListener('touchend', handleTouchEnd);\n\n\t\treturn (): void => {\n\t\t\tif (timer1s) clearTimeout(timer1s);\n\t\t\tif (timer2s) clearTimeout(timer2s);\n\t\t\twrapper.removeEventListener('mousewheel', handleWheel);\n\t\t\twrapper.removeEventListener('wheel', handleWheel);\n\t\t\twrapper.removeEventListener('scroll', handleWheel);\n\t\t\twrapper.removeEventListener('touchstart', handleTouchStart);\n\t\t\twrapper.removeEventListener('touchend', handleTouchEnd);\n\t\t};\n\t}, [checkIfScrollIsAtBottom]);\n\n\tconst handleComposerResize = useCallback((): void => {\n\t\tsendToBottomIfNecessary();\n\t}, [sendToBottomIfNecessary]);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleUploadFiles = useCallback(\n\t\t(files: readonly File[]): void => {\n\t\t\tchat.flows.uploadFiles(files);\n\t\t},\n\t\t[chat],\n\t);\n\n\tconst replyMID = useSearchParameter('reply');\n\n\tuseEffect(() => {\n\t\tif (!replyMID) {\n\t\t\treturn;\n\t\t}\n\n\t\tchat.data.getMessageByID(replyMID).then((message) => {\n\t\t\tif (!message) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchat.composer?.quoteMessage(message);\n\t\t});\n\t}, [chat.data, chat.composer, replyMID]);\n\n\tuseEffect(() => {\n\t\tchat.uploads.wipeFailedOnes();\n\t}, [chat]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tuseReadMessageWindowEvents();\n\n\treturn (\n\t\t<>\n\t\t\t{!isLayoutEmbedded && room.announcement && <Announcement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t<div className='main-content-flex'>\n\t\t\t\t<section\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\taria-label={t('Channel')}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<div className={['container-bars', (unread || uploads.length) && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t{unread && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread.count}\n\t\t\t\t\t\t\t\t\t\tsince={unread.since}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref={messagesBoxRef}\n\t\t\t\t\t\t\t\tclassName={['messages-box', roomLeader && !hideLeaderHeader && 'has-leader'].filter(isTruthy).join(' ')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t{roomLeader ? (\n\t\t\t\t\t\t\t\t\t<LeaderBar\n\t\t\t\t\t\t\t\t\t\t_id={roomLeader._id}\n\t\t\t\t\t\t\t\t\t\tusername={roomLeader.username}\n\t\t\t\t\t\t\t\t\t\tname={roomLeader.name}\n\t\t\t\t\t\t\t\t\t\tvisible={!hideLeaderHeader}\n\t\t\t\t\t\t\t\t\t\tonAvatarClick={handleOpenUserCardButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<ScrollableContentWrapper ref={wrapperRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-live='polite' aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='start color-info-font-color'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy ? <RetentionPolicyWarning {...retentionPolicy} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} scrollMessageList={scrollMessageList} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</ScrollableContentWrapper>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n",null],"names":["_extends","_objectSpread","_slicedToArray","isEditedMessage","usePermission","useRole","useRouter","useSearchParameter","useSetting","useTranslation","useUser","useUserPreference","React","memo","useCallback","useEffect","useMemo","useRef","useState","useSyncExternalStore","ChatMessage","RoomRoles","RoomHistoryManager","isAtBottom","callbacks","isTruthy","withDebouncing","withThrottling","ScrollableContentWrapper","useEmbeddedLayout","useReactiveQuery","RoomManager","roomCoordinator","setMessageJumpQueryStringParameter","Announcement","MessageList","MessageListErrorBoundary","ComposerContainer","RoomComposer","useChat","useRoom","useRoomSubscription","useRoomMessages","useRoomToolbox","useScrollMessageList","DropTargetOverlay","JumpToRecentMessageButton","LeaderBar","LoadingMessagesIndicator","RetentionPolicyWarning","RoomForeword","UnreadMessagesIndicator","UploadProgressIndicator","useFileUploadDropTarget","useGoToHomeOnRemoved","useReadMessageWindowEvents","useRestoreScrollPosition","useRetentionPolicy","useUnreadMessages","module","default","v","link","exportDefault","t","isLayoutEmbedded","room","user","toolbox","admin","subscription","_useState2","lastMessageDate","setLastMessageDate","_useState4","hideLeaderHeader","setHideLeaderHeader","_useState6","hasNewMessages","setHasNewMessages","hideFlexTab","undefined","hideUsernames","displayAvatars","wrapperRef","messagesBoxRef","atBottomRef","lastScrollTopRef","chat","Error","_useFileUploadDropTar2","fileUploadTriggerProps","fileUploadOverlayProps","_isAtBottom","scrollThreshold","arguments","length","wrapper","current","scrollMessageList","sendToBottom","left","top","scrollHeight","sendToBottomIfNecessary","checkIfScrollIsAtBottom","handleNewMessageButtonClick","_chat$composer","composer","focus","handleJumpToRecentButtonClick","clear","_id","getMoreIfIsEmpty","_useUnreadMessages2","unread","setUnreadCount","uploads","subscribe","get","_useRoomMessages","hasMorePreviousMessages","hasMoreNextMessages","isLoadingMoreMessages","allowAnonymousRead","canPreviewChannelRoom","subscribed","canPreview","useRealName","roomLeader","_useReactiveQuery","not","leaderRoomRole","findOne","$ne","u","name","username","data","handleOpenUserCardButtonClick","event","userCard","open","handleUnreadBarJumpToButtonClick","_message","rid","firstUnread","_RoomHistoryManager$g","getRoom","message","ts","$gt","since","sort","limit","handleMarkAsReadButtonClick","readStateManager","markAsRead","handleUploadProgressClose","id","cancel","retentionPolicy","add","msg","tmid","priority","MEDIUM","remove","_wrapperRef$current","messageList","querySelector","observer","ResizeObserver","observe","disconnect","router","debouncedReadMessageRead","wait","attemptMarkAsRead","subscribeToRouteChange","routeName","getRouteName","isRouteNameKnown","alert","find","$lte","ls","count","getElementFromPoint","_element","element","topOffset","messagesBox","messagesBoxLeft","getBoundingClientRect","window","pageXOffset","messagesBoxTop","pageYOffset","messagesBoxWidth","parseFloat","getComputedStyle","width","document","dir","elementFromPoint","classList","contains","_element2","updateUnreadCount","Tracker","afterFlush","lastInvisibleMessageOnScreen","lastMessage","handleWrapperScroll","_messagesBoxRef$curre","target","scrollTop","height","clientHeight","isLoading","hasMore","hasMoreNext","getMore","Math","ceil","getMoreNext","addEventListener","removeEventListener","store","getStore","update","scroll","atBottom","afterMessageGroup","timer1s","timer2s","handleWheel","handleTouchStart","handleTouchEnd","setTimeout","clearTimeout","handleComposerResize","handleNavigateToPreviousMessage","messageEditing","toPreviousMessage","handleNavigateToNextMessage","toNextMessage","handleUploadFiles","files","flows","uploadFiles","replyMID","getMessageByID","then","_chat$composer2","quoteMessage","wipeFailedOnes","handleCloseFlexTab","e","checkElement","HTMLButtonElement","getAttribute","HTMLAnchorElement","parentElement","closeTab","createElement","Fragment","announcement","announcementDetails","className","onClick","filter","join","onJumpButtonClick","onMarkAsReadButtonClick","map","upload","key","percentage","error","onClose","ref","visible","text","onAvatarClick","onResize","onNavigateToPreviousMessage","onNavigateToNextMessage","onUploadFiles"],"mappings":"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"}