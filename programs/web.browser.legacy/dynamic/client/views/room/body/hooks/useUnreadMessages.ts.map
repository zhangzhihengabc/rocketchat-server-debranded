)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/body/hooks/useUnreadMessages.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { Dispatch, SetStateAction } from 'react';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { LegacyRoomManager, RoomHistoryManager } from '../../../../../app/ui-utils/client';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\ninterface IUnreadMessages {\n\tcount: number;\n\tsince: Date;\n}\n\nexport const useUnreadMessages = (\n\troom: IRoom,\n): readonly [data: IUnreadMessages | undefined, setUnreadCount: Dispatch<SetStateAction<number>>] => {\n\tconst notLoadedCount = useReactiveValue(useCallback(() => RoomHistoryManager.getRoom(room._id).unreadNotLoaded.get(), [room._id]));\n\tconst [loadedCount, setLoadedCount] = useState(0);\n\n\tconst count = useMemo(() => notLoadedCount + loadedCount, [notLoadedCount, loadedCount]);\n\n\tconst since = useReactiveValue(useCallback(() => LegacyRoomManager.getOpenedRoomByRid(room._id)?.unreadSince.get(), [room._id]));\n\n\treturn useMemo(() => {\n\t\tif (count && since) {\n\t\t\treturn [{ count, since }, setLoadedCount];\n\t\t}\n\n\t\treturn [undefined, setLoadedCount];\n\t}, [count, since]);\n};\n",null],"names":["module","link","default","_slicedToArray","export","useUnreadMessages","useCallback","useMemo","useState","LegacyRoomManager","RoomHistoryManager","useReactiveValue","room","notLoadedCount","getRoom","_id","unreadNotLoaded","get","_useState2","loadedCount","setLoadedCount","count","since","_LegacyRoomManager$ge","getOpenedRoomByRid","unreadSince","undefined"],"mappings":"uBAESA,EAAaC,IAAO,CAAE,uCAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,kBAAsB,WAAU,OAAMA,CAAQ,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,QAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAS,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAW,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAUhD,IAVPR,EAAuDG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAU1CN,EAAoB,SAChCO,CAAW,EAEX,IAAMC,EAAiBF,EAAiBL,EAAY,WAAA,OAAMI,EAAmBI,OAAO,CAACF,EAAKG,GAAG,EAAEC,eAAe,CAACC,GAAG,EAAE,EAAE,CAACL,EAAKG,GAAG,CAAC,GAC/EG,EAAAf,EAAXK,EAAS,GAAE,GAA1CW,EAAWD,CAAA,CAAA,EAAA,CAAEE,EAAcF,CAAA,CAAA,EAAA,CAE5BG,EAAQd,EAAQ,WAAA,OAAMM,EAAiBM,CAAW,EAAE,CAACN,EAAgBM,EAAY,EAEjFG,EAAQX,EAAiBL,EAAY,WAAA,IAAAiB,EAAA,OAAA,AAAoD,OAApDA,CAAAA,EAAMd,EAAkBe,kBAAkB,CAACZ,EAAKG,GAAG,CAAA,GAACQ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA9CA,EAAgDE,WAAW,CAACR,GAAG,EAAE,EAAE,CAACL,EAAKG,GAAG,CAAC,GAE9H,OAAOR,EAAQ,kBACd,AAAIc,GAASC,EACL,CAAC,CAAED,MAAAA,EAAOC,MAAAA,CAAK,EAAIF,EAAe,CAGnC,CAACM,KAAAA,EAAWN,EAAe,AACnC,EAAG,CAACC,EAAOC,EAAM,CAClB"}