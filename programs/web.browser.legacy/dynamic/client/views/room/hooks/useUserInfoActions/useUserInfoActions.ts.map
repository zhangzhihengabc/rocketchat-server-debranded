)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { Icon } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport { useMemo } from 'react';\n\nimport type { GenericMenuItemProps } from '../../../../components/GenericMenu/GenericMenuItem';\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\nimport { useBlockUserAction } from './actions/useBlockUserAction';\nimport { useCallAction } from './actions/useCallAction';\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\nimport { useMuteUserAction } from './actions/useMuteUserAction';\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\nimport { useReportUser } from './actions/useReportUser';\n\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\n\nexport type UserInfoAction = {\n\tcontent: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\tonClick: () => void;\n\ttype?: UserInfoActionType;\n\tvariant?: 'danger';\n};\n\ntype UserMenuAction = {\n\tid: string;\n\ttitle: string;\n\titems: GenericMenuItemProps[];\n}[];\n\nexport const useUserInfoActions = (\n\tuser: Pick<IUser, '_id' | 'username' | 'name'>,\n\trid: IRoom['_id'],\n\treload?: () => void,\n\tsize = 2,\n): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\n\tconst blockUser = useBlockUserAction(user, rid);\n\tconst changeLeader = useChangeLeaderAction(user, rid);\n\tconst changeModerator = useChangeModeratorAction(user, rid);\n\tconst openModerationConsole = useRedirectModerationConsole(user._id);\n\tconst changeOwner = useChangeOwnerAction(user, rid);\n\tconst openDirectMessage = useDirectMessageAction(user, rid);\n\tconst ignoreUser = useIgnoreUserAction(user, rid);\n\tconst muteUser = useMuteUserAction(user, rid);\n\tconst removeUser = useRemoveUserAction(user, rid, reload);\n\tconst call = useCallAction(user);\n\tconst reportUserOption = useReportUser(user);\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\n\tconst userinfoActions = useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\n\t\t\t...(call && { call }),\n\t\t\t...(changeOwner && { changeOwner }),\n\t\t\t...(changeLeader && { changeLeader }),\n\t\t\t...(changeModerator && { changeModerator }),\n\t\t\t...(openModerationConsole && { openModerationConsole }),\n\t\t\t...(ignoreUser && { ignoreUser }),\n\t\t\t...(muteUser && { muteUser }),\n\t\t\t...(blockUser && { toggleBlock: blockUser }),\n\t\t\t...(reportUserOption && { reportUser: reportUserOption }),\n\t\t\t...(removeUser && { removeUser }),\n\t\t}),\n\t\t[\n\t\t\topenDirectMessage,\n\t\t\tisLayoutEmbedded,\n\t\t\tcall,\n\t\t\tchangeOwner,\n\t\t\tchangeLeader,\n\t\t\tchangeModerator,\n\t\t\tignoreUser,\n\t\t\tmuteUser,\n\t\t\tblockUser,\n\t\t\tremoveUser,\n\t\t\treportUserOption,\n\t\t\topenModerationConsole,\n\t\t],\n\t);\n\n\tconst actionSpread = useMemo(() => {\n\t\tconst entries = Object.entries(userinfoActions);\n\n\t\tconst options = entries.slice(0, size);\n\t\tconst slicedOptions = entries.slice(size, entries.length);\n\n\t\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\n\t\t\tconst newItem = { ...item, id: item.content };\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(newItem);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, title: '', items: [newItem] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as UserMenuAction);\n\n\t\treturn { actions: options, menuActions };\n\t}, [size, userinfoActions]);\n\n\treturn actionSpread;\n};\n",null],"names":["module","link","default","_slicedToArray","_objectSpread","export","useUserInfoActions","useMemo","useEmbeddedLayout","useBlockUserAction","useCallAction","useChangeLeaderAction","useChangeModeratorAction","useChangeOwnerAction","useDirectMessageAction","useIgnoreUserAction","useMuteUserAction","useRedirectModerationConsole","useRemoveUserAction","useReportUser","user","rid","reload","size","arguments","length","undefined","blockUser","changeLeader","changeModerator","openModerationConsole","_id","changeOwner","openDirectMessage","ignoreUser","muteUser","removeUser","call","reportUserOption","isLayoutEmbedded","userinfoActions","toggleBlock","reportUser","entries","Object","actions","slice","menuActions","slicedOptions","reduce","acc","_ref","_ref2","item","group","type","section","find","id","newItem","content","items","push","title"],"mappings":"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"}