)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions/actions/useReportUser.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useEndpoint, useSetModal, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useUserDisplayName } from '../../../../../hooks/useUserDisplayName';\nimport ReportUserModal from '../../../contextualBar/UserInfo/ReportUserModal';\nimport type { UserInfoAction } from '../useUserInfoActions';\n\nexport const useReportUser = (user: Pick<IUser, '_id' | 'username' | 'name'>): UserInfoAction | undefined => {\n\tconst { _id: uid, username, name } = user;\n\tconst ownUserId = useUserId();\n\tconst setModal = useSetModal();\n\n\tconst { t } = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst displayName = useUserDisplayName({ username, name });\n\n\tconst reportUser = useEndpoint('POST', '/v1/moderation.reportUser');\n\tconst reportUserMutation = useMutation(\n\t\t['reportUser', uid],\n\t\tasync (description: string) => {\n\t\t\treportUser({ description, userId: uid });\n\t\t},\n\t\t{\n\t\t\tonSuccess: () => dispatchToastMessage({ type: 'success', message: t('Report_has_been_sent') }),\n\t\t\tonError: (error) => dispatchToastMessage({ type: 'error', message: error }),\n\t\t\tonSettled: () => setModal(),\n\t\t},\n\t);\n\n\tconst openReportUserModal = useMemo(() => {\n\t\tconst action = () =>\n\t\t\tsetModal(\n\t\t\t\t<ReportUserModal\n\t\t\t\t\tonConfirm={reportUserMutation.mutate}\n\t\t\t\t\tonClose={() => setModal()}\n\t\t\t\t\tdisplayName={displayName || ''}\n\t\t\t\t\tusername={username || ''}\n\t\t\t\t/>,\n\t\t\t);\n\n\t\treturn ownUserId !== uid\n\t\t\t? {\n\t\t\t\t\ticon: 'warning' as const,\n\t\t\t\t\tcontent: t('Report'),\n\t\t\t\t\tonClick: action,\n\t\t\t\t\ttype: 'moderation' as const,\n\t\t\t\t\tvariant: 'danger' as const,\n\t\t\t  }\n\t\t\t: undefined;\n\t}, [ownUserId, uid, t, setModal, username, reportUserMutation.mutate, displayName]);\n\n\treturn openReportUserModal;\n};\n",null],"names":["module","default","v","_regeneratorRuntime","export","useReportUser","useEndpoint","useSetModal","useToastMessageDispatch","useUserId","useMutation","React","useMemo","useTranslation","useUserDisplayName","ReportUserModal","user","uid","_id","username","name","ownUserId","setModal","t","_useTranslation","dispatchToastMessage","displayName","reportUser","reportUserMutation","description","async","_context","prev","next","userId","stop","Promise","onSuccess","type","message","onError","error","onSettled","icon","content","onClick","createElement","onConfirm","mutate","onClose","variant","undefined"],"mappings":"uBACsBA,EAAAA,IAAa,CAAA,6BAAyB,CAAAC,QAAW,SAAMC,CAAAA,EAAAC,EAA2BD,CAAA,CAAA,EAAA,GAAxGF,EAAOI,MAAE,CAAA,CAAAC,cAAa,WAAa,OAAAA,CAAyB,CAAA,GAA4CL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAU,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAa,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAb,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAc,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAd,EAAAA,IAAAA,CAAAA,kDAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAa,EAAAA,CAAA,CAAA,EAAA,GASjG,IATPZ,EAA4DG,EAAiBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAS3FV,EAAgB,SAACW,CAA8C,EAC3E,IAAaC,EAAwBD,EAA7BE,GAAG,CAAOC,EAAmBH,EAAnBG,QAAQ,CAAEC,EAASJ,EAATI,IAAI,CAC1BC,EAAYZ,IACZa,EAAWf,IAETgB,EAACC,AAAKX,IAANU,CAAC,CACHE,EAAuBjB,IACvBkB,EAAcZ,EAAmB,CAAEK,SAAAA,EAAUC,KAAAA,CAAI,GAEjDO,EAAarB,EAAY,OAAQ,6BACjCsB,EAAqBlB,EAC1B,CAAC,aAAcO,EAAI,CACnB,SAAOY,CAAmB,EAAA,OAAA1B,EAAA2B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACzBN,EAAW,CAAEE,YAAAA,EAAaK,OAAQjB,CAAG,EAAI,MAAA,EAAA,IAAA,MAAA,OAAAc,EAAAI,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAE1C,CACCC,UAAW,WAAA,OAAMZ,EAAqB,CAAEa,KAAM,UAAWC,QAAShB,EAAE,uBAAuB,EAAG,EAC9FiB,QAAS,SAACC,CAAK,EAAA,OAAKhB,EAAqB,CAAEa,KAAM,QAASC,QAASE,CAAK,EAAG,EAC3EC,UAAW,WAAA,OAAMpB,GAAU,IA0B7B,OAtB4BV,EAAQ,WAWnC,OAAOS,IAAcJ,EAClB,CACA0B,KAAM,UACNC,QAASrB,EAAE,UACXsB,QAdY,WAAA,OACdvB,EACCX,EAAAmC,aAAA,CAAC/B,EAAe,CACfgC,UAAWnB,EAAmBoB,MAAO,CACrCC,QAAS,WAAA,OAAM3B,GAAU,EACzBI,YAAaA,GAAe,GAC5BP,SAAUA,GAAY,EAAG,GAE1B,EAOCmB,KAAM,aACNY,QAAS,UAETC,KAAAA,CACJ,EAAG,CAAC9B,EAAWJ,EAAKM,EAAGD,EAAUH,EAAUS,EAAmBoB,MAAM,CAAEtB,EAAY,CAGnF"}