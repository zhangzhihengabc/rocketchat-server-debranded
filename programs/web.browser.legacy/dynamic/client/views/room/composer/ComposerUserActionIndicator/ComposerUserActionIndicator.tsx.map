)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/ComposerUserActionIndicator/ComposerUserActionIndicator.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, Fragment } from 'react';\n\nimport { UserAction } from '../../../../../app/ui/client/lib/UserAction';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\nconst maxUsernames = 5;\n\nconst ComposerUserActionIndicator = ({ rid, tmid }: { rid: string; tmid?: string }): ReactElement => {\n\tconst t = useTranslation();\n\tconst actions = useReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tconst roomAction = UserAction.get(tmid || rid) || {};\n\n\t\t\tconst activities = Object.entries(roomAction);\n\n\t\t\treturn activities\n\t\t\t\t.map(([key, _users]) => {\n\t\t\t\t\tconst action = key.split('-')[1];\n\n\t\t\t\t\tconst users = Object.keys(_users);\n\t\t\t\t\tif (users.length === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.filter(Boolean) as {\n\t\t\t\taction: 'typing' | 'recording' | 'uploading' | 'playing';\n\t\t\t\tusers: string[];\n\t\t\t}[];\n\t\t}, [rid, tmid]),\n\t);\n\treturn (\n\t\t<Box h='24px' className='rc-message-box__activity-wrapper' fontScale='p2' color='annotation' aria-live='polite'>\n\t\t\t{actions.map(({ action, users }, index) => (\n\t\t\t\t<Fragment key={action}>\n\t\t\t\t\t{index > 0 && ', '}\n\t\t\t\t\t{users.length < maxUsernames\n\t\t\t\t\t\t? users.join(', ')\n\t\t\t\t\t\t: `${users.slice(0, maxUsernames - 1).join(', ')} ${t('and')} ${t('others')}`}{' '}\n\t\t\t\t\t{users.length > 1 ? t(`are_${action}`) : t(`is_${action}`)}\n\t\t\t\t</Fragment>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default ComposerUserActionIndicator;\n",null],"names":["_slicedToArray","Box","useTranslation","React","useCallback","Fragment","UserAction","useReactiveValue","module","link","default","v","exportDefault","_ref","rid","tmid","t","actions","activities","Object","entries","get","map","_ref2","_ref3","key","_users","action","split","users","keys","length","filter","Boolean","createElement","h","className","fontScale","color","_ref4","index","join","slice","maxUsernames"],"mappings":"uBAQA,IARAA,EAAAC,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAMC,IAAA,CAAA,uCAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAArCQ,EAAOC,IAAA,CAAM,wBAAwB,CAAAR,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAF,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAD,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA5CC,EAAOI,aAAa,CAUgB,SAAAC,CAAA,EAAgE,IAA7DC,EAAGD,EAAHC,GAAG,CAAEC,EAAIF,EAAJE,IAAI,CACzCC,EAAId,IACJe,EAAUV,EACfH,EAAY,WAKX,OAAOc,AAFYC,OAAOC,OAAO,CAFdd,EAAWe,GAAG,CAACN,GAAQD,IAAQ,CAAA,GAKhDQ,GAAG,CAAC,SAAAC,CAAA,EAAkB,IAAAC,EAAAxB,EAAAuB,EAAA,GAAhBE,EAAGD,CAAA,CAAA,EAAA,CAAEE,EAAMF,CAAA,CAAA,EAAA,CACXG,EAASF,EAAIG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE1BC,EAAQV,OAAOW,IAAI,CAACJ,GAC1B,GAAIG,AAAiB,IAAjBA,EAAME,MAAM,CAIhB,MAAO,CACNJ,OAAAA,EACAE,MAAAA,EAEF,GACCG,MAAM,CAACC,QAIV,EAAG,CAACnB,EAAKC,EAAK,GAEf,OACCZ,EAAA+B,aAAA,CAACjC,EAAG,CAACkC,EAAE,OAAOC,UAAU,mCAAmCC,UAAU,KAAKC,MAAM,aAAa,YAAU,QAAQ,EAC7GrB,EAAQK,GAAG,CAAC,SAAAiB,CAAA,CAAoBC,CAAK,EAAA,IAAtBb,EAAMY,EAANZ,MAAM,CAAEE,EAAKU,EAALV,KAAK,CAAA,OAC5B1B,EAAA+B,aAAA,CAAC7B,EAAQ,CAACoB,IAAKE,CAAO,EACpBa,EAAQ,GAAK,KACbX,EAAME,MAAM,CAnCG,EAoCbF,EAAMY,IAAI,CAAC,MACRZ,EAAMa,KAAK,CAAC,EAAGC,GAAkBF,IAAI,CAAC,MAAK,IAAIzB,EAAE,OAAM,IAAIA,EAAE,UAAa,IAC/Ea,EAAME,MAAM,CAAG,EAAIf,EAAC,OAAQW,GAAYX,EAAC,MAAOW,GACvC,GAIf"}