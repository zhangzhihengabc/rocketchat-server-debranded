)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLTextAreaElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleInput = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\n\t\ttextarea.addEventListener('input', handleInput);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', handleInput);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n",null],"names":["module","default","_objectSpread","_slicedToArray","export","useAutoGrow","useContentBoxSize","useEffect","useState","shadowStyleBase","position","top","left","resize","whiteSpace","wordWrap","willChange","ref","shadowRef","hideTextArea","_useState2","current","window","getComputedStyle","style","setStyle","textarea","handleInput","value","shadow","innerHTML","replace","addEventListener","removeEventListener","shadowContentSize","composerContentSize","textAreaStyle","visibility","overflowWrap","wordBreak","overflowY","blockSize","parseInt","maxHeight","height","shadowStyle","font","width","inlineSize","minHeight","lineHeight"],"mappings":"uBAASA,EAAAA,IAAmB,CAAA,uCAAoC,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAF,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAhEH,EAAOI,MAAE,CAAA,CAAAC,YAAiB,WAAQ,OAAAA,CAAA,CAAA,GAA8BL,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAM,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,QAAAA,CAAAO,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAIhE,IAJAN,EAAgEC,EAAAG,EAAAC,EAAAC,EAI1DC,EAAiC,CACtCC,SAAU,QACVC,IAAK,WACLC,KAAM,WACNC,OAAQ,OACRC,WAAY,WACZC,SAAU,aACVC,WAAY,YAGAX,EAAc,SAC1BY,CAAmC,CACnCC,CAAyC,CACzCC,CAAsB,EAKtB,IAA6FC,EAAAjB,EAAnEK,EAAS,WAAA,OAAMS,EAAII,OAAO,EAAIC,OAAOC,gBAAgB,CAACN,EAAII,OAAO,CAAC,GAAC,GAAtFG,EAAKJ,CAAA,CAAA,EAAA,CAAEK,EAAQL,CAAA,CAAA,EAAA,CAEtBb,EAAU,WACqBU,EAAtBI,OAAO,EAKfI,EAAS,WAAA,OAAMR,EAAII,OAAO,EAAIC,OAAOC,gBAAgB,CAACN,EAAII,OAAO,CAAC,EACnE,EAAG,CAACJ,EAAI,EAERV,EAAU,WACT,IAAiBmB,EAAaT,EAAtBI,OAAO,CAEf,GAAKK,GAIL,IAAMC,EAAc,WACnB,IAAQC,EAAUF,EAAVE,KAAK,CACIC,EAAWX,EAApBG,OAAO,CACVQ,GAGLA,CAAAA,EAAOC,SAAS,CAAGF,EACjBG,OAAO,CAAC,KAAM,SACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,MAAO,eACfA,OAAO,CAAC,MAAO,QAAO,CACzB,EAGA,OADAL,EAASM,gBAAgB,CAAC,QAASL,GAC5B,WACND,EAASO,mBAAmB,CAAC,QAASN,EACvC,EACD,EAAG,CAACV,EAAKC,EAAU,EAEnB,IAAMgB,EAAoB5B,EAAkBY,GAEtCiB,EAAsB7B,EAAkBW,GAE9C,MAAO,CACNmB,cAAalC,EAAAA,EAAA,CAAA,EACRiB,GAAgB,CACnBkB,WAAY,WACZ,CAAA,EAAA,CACDvB,WAAY,WACZC,SAAU,aACVuB,aAAc,aACdtB,WAAY,WACZuB,UAAW,SACXC,UAAWN,EAAkBO,SAAS,CAAGC,SAAS,AAAAlB,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOmB,SAAS,AAATA,GAAa,KAAO,SAAW,QAAQ,EAC5FT,EAAkBO,SAAS,EAAI,CAClCG,OAAWV,EAAkBO,SAAS,CAAA,OAGxCI,YAAW3C,EAAAA,EAAA,CAAA,EACPO,GAAe,CAAA,EAAA,CAClBqC,KAAMtB,MAAAA,EAAK,KAAA,EAALA,EAAOsB,IAAI,CACjBC,MAAOZ,EAAoBa,UAAU,CACrCC,UAAWzB,MAAAA,EAAK,KAAA,EAALA,EAAO0B,UAAU,CAC5BA,WAAY1B,MAAAA,EAAK,KAAA,EAALA,EAAO0B,UAAAA,AAAU,GAGhC"}