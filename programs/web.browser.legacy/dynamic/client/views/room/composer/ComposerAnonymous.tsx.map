)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/ComposerAnonymous.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport {\n\tuseSessionDispatch,\n\tuseSetting,\n\tuseTranslation,\n\tuseLoginWithToken,\n\tuseToastMessageDispatch,\n\tuseMethod,\n} from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nconst ComposerAnonymous = (): ReactElement => {\n\tconst isAnonymousWriteEnabled = useSetting('Accounts_AllowAnonymousWrite');\n\n\tconst dispatch = useToastMessageDispatch();\n\n\tconst loginWithToken = useLoginWithToken();\n\n\tconst anonymousUser = useMethod('registerUser');\n\n\tconst registerAnonymous = useMutation(\n\t\tasync (...params: Parameters<typeof anonymousUser>) => {\n\t\t\tconst result = await anonymousUser(...params);\n\t\t\tif (typeof result !== 'string' && result.token) {\n\t\t\t\tawait loginWithToken(result.token);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatch({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tconst joinAnonymous = () => {\n\t\tregisterAnonymous.mutate({ email: null });\n\t};\n\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<ButtonGroup marginBlock={16}>\n\t\t\t<Button small primary onClick={() => setForceLogin(true)}>\n\t\t\t\t{t('Sign_in_to_start_talking')}\n\t\t\t</Button>\n\t\t\t{isAnonymousWriteEnabled && (\n\t\t\t\t<Button small secondary onClick={() => joinAnonymous()}>\n\t\t\t\t\t{t('Or_talk_as_anonymous')}\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</ButtonGroup>\n\t);\n};\n\nexport default ComposerAnonymous;\n",null],"names":["_regeneratorRuntime","Button","ButtonGroup","useSessionDispatch","useSetting","useTranslation","useLoginWithToken","useToastMessageDispatch","useMethod","useMutation","React","module","link","default","v","exportDefault","isAnonymousWriteEnabled","dispatch","loginWithToken","anonymousUser","registerAnonymous","result","_args","arguments","async","_context","prev","next","awrap","apply","sent","token","abrupt","stop","Promise","onError","error","type","message","joinAnonymous","mutate","email","setForceLogin","t","createElement","marginBlock","small","primary","onClick","secondary"],"mappings":"uBAaA,IAbAA,EAAAC,EAASC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3CC,EAAaC,IAAA,CAAM,6BAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAA3CW,EAAaC,IAAAA,CAAAA,wBAA6B,CAACX,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA5DC,EAAOI,aAAU,CAaS,WACzB,IAAMC,EAA0BZ,EAAW,gCAErCa,EAAWV,IAEXW,EAAiBZ,IAEjBa,EAAgBX,EAAU,gBAE1BY,EAAoBX,EACzB,WAAA,IAAAY,EAAAC,EAAAC,UAAA,OAAAvB,EAAAwB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA3B,EAAA4B,KAAA,CACsBT,EAAaU,KAAA,CAAA,KAAA,EAAAP,GAAW,MAAA,EAAjC,GAAA,CACR,CAAA,AAAkB,UAAlB,MADED,CAAAA,EAAMI,EAAAK,IAAA,GACsBT,EAAOU,KAAK,AAALA,EAAK,CAAAN,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA3B,EAAA4B,KAAA,CACvCV,EAAeG,EAAOU,KAAK,EAAC,MAAA,EAAA,OAAAN,EAAAO,MAAA,CAAA,SAE5BX,EAAM,MAAA,EAAA,IAAA,MAAA,OAAAI,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEd,CACCC,QAAS,SAACC,CAAK,EACdnB,EAAS,CAAEoB,KAAM,QAASC,QAASF,CAAK,EACzC,IAIIG,EAAgB,WACrBnB,EAAkBoB,MAAM,CAAC,CAAEC,MAAO,IAAI,EACvC,EAEMC,EAAgBvC,EAAmB,cAEnCwC,EAAItC,IAEV,OACCK,EAAAkC,aAAA,CAAC1C,EAAW,CAAC2C,YAAa,EAAG,EAC5BnC,EAAAkC,aAAA,CAAC3C,EAAM,CAAC6C,MAAK,CAAA,EAACC,QAAO,CAAA,EAACC,QAAS,WAAA,OAAMN,EAAc,CAAA,EAAK,CAAC,EACvDC,EAAE,6BAEH3B,GACAN,EAAAkC,aAAA,CAAC3C,EAAM,CAAC6C,MAAK,CAAA,EAACG,UAAS,CAAA,EAACD,QAAS,WAAA,OAAMT,GAAe,CAAC,EACrDI,EAAE,yBAKR"}