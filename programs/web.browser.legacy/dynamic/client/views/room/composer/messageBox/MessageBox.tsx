function module(e,n,o){o.link("@babel/runtime/regenerator",{default:function(e){t=e}},0),o.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){i=e}},1),o.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),o.link("@rocket.chat/fuselage",{Button:function(e){l=e},Tag:function(e){s=e},Box:function(e){u=e}},0),o.link("@rocket.chat/fuselage-hooks",{useContentBoxSize:function(e){a=e},useMutableCallback:function(e){c=e}},1),o.link("@rocket.chat/ui-composer",{MessageComposerAction:function(e){d=e},MessageComposerToolbarActions:function(e){m=e},MessageComposer:function(e){p=e},MessageComposerInput:function(e){f=e},MessageComposerToolbar:function(e){g=e},MessageComposerActionsDivider:function(e){v=e},MessageComposerToolbarSubmit:function(e){k=e}},2),o.link("@rocket.chat/ui-contexts",{useTranslation:function(e){b=e},useUserPreference:function(e){C=e},useLayout:function(e){h=e}},3),o.link("@tanstack/react-query",{useMutation:function(e){E=e}},4),o.link("react",{default:function(e){y=e},memo:function(e){x=e},useRef:function(e){M=e},useReducer:function(e){P=e},useCallback:function(e){w=e}},5),o.link("use-subscription",{useSubscription:function(e){A=e}},6),o.link("../../../../../app/ui-message/client/messageBox/createComposerAPI",{createComposerAPI:function(e){_=e}},7),o.link("../../../../../app/ui-message/client/messageBox/messageBoxFormatting",{formattingButtons:function(e){R=e}},8),o.link("../../../../../app/ui-message/client/popup/ComposerBoxPopup",{default:function(e){B=e}},9),o.link("../../../../../app/ui-message/client/popup/components/composerBoxPopupPreview/ComposerBoxPopupPreview",{default:function(e){D=e}},10),o.link("../../../../../app/ui-message/client/popup/hooks/useComposerBoxPopup",{useComposerBoxPopup:function(e){T=e}},11),o.link("../../../../../app/ui-message/client/popup/hooks/useEnablePopupPreview",{useEnablePopupPreview:function(e){S=e}},12),o.link("../../../../../lib/getImageExtensionFromMime",{getImageExtensionFromMime:function(e){I=e}},13),o.link("../../../../hooks/useFormatDateAndTime",{useFormatDateAndTime:function(e){K=e}},14),o.link("../../../../hooks/useReactiveValue",{useReactiveValue:function(e){F=e}},15),o.link("../../../../lib/rooms/roomCoordinator",{roomCoordinator:function(e){V=e}},16),o.link("../../../../lib/utils/keyCodes",{keyCodes:function(e){N=e}},17),o.link("../../../composer/AudioMessageRecorder",{default:function(e){U=e}},18),o.link("../../../composer/VideoMessageRecorder",{default:function(e){O=e}},19),o.link("../../contexts/ChatContext",{useChat:function(e){j=e}},20),o.link("../../contexts/ComposerPopupContext",{useComposerPopup:function(e){L=e}},21),o.link("../../contexts/RoomContext",{useRoom:function(e){z=e}},22),o.link("../ComposerUserActionIndicator",{default:function(e){G=e}},23),o.link("../RoomComposer/hooks/useAutoGrow",{useAutoGrow:function(e){q=e}},24),o.link("../hooks/useMessageComposerMergedRefs",{useMessageComposerMergedRefs:function(e){J=e}},25),o.link("./MessageBoxActionsToolbar",{default:function(e){W=e}},26),o.link("./MessageBoxFormattingToolbar",{default:function(e){H=e}},27),o.link("./MessageBoxReplies",{default:function(e){Q=e}},28),o.link("./hooks/useMessageBoxAutoFocus",{useMessageBoxAutoFocus:function(e){X=e}},29),o.link("./hooks/useMessageBoxPlaceholder",{useMessageBoxPlaceholder:function(e){Y=e}},30);var t,i,r,l,s,u,a,c,d,m,p,f,g,v,k,b,C,h,E,y,x,M,P,w,A,_,R,B,D,T,S,I,K,F,V,N,U,O,j,L,z,G,q,J,W,H,Q,X,Y,Z=function(e,n){return!!n.target.value.trim()},$=function(e,n,o){var t=-1!==navigator.platform.indexOf("Mac");if(!(t&&e.metaKey||!t&&e.ctrlKey))return!1;var i=e.key.toLowerCase(),r=n.find(function(e){return"command"in e&&e.command===i});return!!r&&"pattern"in r&&(o.wrapSelection(r.pattern),!0)},ee=function(){return function(){}},en=function(){return!1},eo=[],et=function(){return eo};o.exportDefault(x(function(e){var n,o,x,eo,ei,er,el,es,eu,ea,ec,ed,em,ep,ef,eg,ev,ek,eb,eC,eh,eE=e.tmid,ey=e.onSend,ex=e.onJoin,eM=e.onNavigateToNextMessage,eP=e.onNavigateToPreviousMessage,ew=e.onUploadFiles,eA=e.onEscape,e_=e.onTyping,eR=e.readOnly,eB=e.tshow,eD=e.previewUrls,eT=j(),eS=z(),eI=b(),eK=Y(eI("Message"),eS),eF=r(P(Z,!1),2),eV=eF[0],eN=eF[1],eU=h().isMobile,eO=C("sendOnEnter")||eU,ej=null==eO||"normal"===eO||"desktop"===eO&&!eU;if(!eT)throw Error("Chat context not found");var eL=M(null),ez=M(null),eG=M(null),eq=""+eS._id+(eE?"-"+eE:""),eJ=w(function(e){null!==e&&eT.setComposerAPI(_(e,eq))},[eT,eq]),eW=X(!eU),eH=C("useEmojis"),eQ=c(function(e){if(e.stopPropagation(),e.preventDefault(),eH){var n=ez.current;eT.emojiPicker.open(n,function(e){var n;return null===(n=eT.composer)||void 0===n?void 0:n.insertText(" :"+e+": ")})}}),eX=c(function(){var e,n,o,t=null!==(e=null===(n=eT.composer)||void 0===n?void 0:n.text)&&void 0!==e?e:"";null===(o=eT.composer)||void 0===o||o.clear(),nm(),null==ey||ey({value:t,tshow:eB,previewUrls:eD})}),eY=c(function(e){var n=e.which,o=e.target;if(n===N.CARRIAGE_RETURN||n===N.NEW_LINE){var t,r=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;return(e.preventDefault(),ej&&!r||!ej&&r)?eX():null===(t=eT.composer)||void 0===t||t.insertNewLine(),!1}if(!(eT.composer&&$(e,i(R),eT.composer))&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){switch(e.key){case"Escape":if(eT.currentEditing){e.preventDefault(),e.stopPropagation(),eT.currentEditing.reset().then(function(e){if(!e){var n;null===(n=eT.currentEditing)||void 0===n||n.cancel()}});return}o.value.trim()||null==eA||eA();return;case"ArrowUp":0===o.selectionEnd&&(e.preventDefault(),e.stopPropagation(),null==eP||eP(),e.altKey&&o.setSelectionRange(0,0));return;case"ArrowDown":o.selectionEnd===o.value.length&&(e.preventDefault(),e.stopPropagation(),null==eM||eM(),e.altKey&&o.setSelectionRange(o.value.length,o.value.length))}null==e_||e_()}}),eZ=A({getCurrentValue:null!==(n=null===(o=eT.composer)||void 0===o?void 0:o.editing.get)&&void 0!==n?n:en,subscribe:null!==(x=null===(eo=eT.composer)||void 0===eo?void 0:eo.editing.subscribe)&&void 0!==x?x:ee}),e$=A({getCurrentValue:null!==(ei=null===(er=eT.composer)||void 0===er?void 0:er.recording.get)&&void 0!==ei?ei:en,subscribe:null!==(el=null===(es=eT.composer)||void 0===es?void 0:es.recording.subscribe)&&void 0!==el?el:ee}),e0=A({getCurrentValue:null!==(eu=null===(ea=eT.composer)||void 0===ea?void 0:ea.isMicrophoneDenied.get)&&void 0!==eu?eu:en,subscribe:null!==(ec=null===(ed=eT.composer)||void 0===ed?void 0:ed.isMicrophoneDenied.subscribe)&&void 0!==ec?ec:ee}),e1=A({getCurrentValue:null!==(em=null===(ep=eT.composer)||void 0===ep?void 0:ep.recordingVideo.get)&&void 0!==em?em:en,subscribe:null!==(ef=null===(eg=eT.composer)||void 0===eg?void 0:eg.recordingVideo.subscribe)&&void 0!==ef?ef:ee}),e2=A({getCurrentValue:null!==(ev=null===(ek=eT.composer)||void 0===ek?void 0:ek.formatters.get)&&void 0!==ev?ev:et,subscribe:null!==(eb=null===(eC=eT.composer)||void 0===eC?void 0:eC.formatters.subscribe)&&void 0!==eb?eb:ee}),e4=e$||e1,e8=q(eL,eG,e$),e3=e8.textAreaStyle,e5=e8.shadowStyle,e6=F(w(function(){return V.verifyCanSendMessage(eS._id)},[eS._id])),e7=a(eL),e9=K(),ne=E(function(){return t.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==ex?void 0:ex());case 1:case"end":return e.stop()}},null,null,null,Promise)}),nn=c(function(e){var n=e.clipboardData;if(n){var o=Array.from(n.items);if(!o.some(function(e){var n=e.kind,o=e.type;return"string"===n&&"text/plain"===o})){var t=o.filter(function(e){return"file"===e.kind&&-1!==e.type.indexOf("image/")}).map(function(e){var n=e.getAsFile();if(n){var o=n?I(n.type):void 0;return Object.defineProperty(n,"name",{writable:!0,value:"Clipboard - "+e9(new Date)+(o?"."+o:"")}),n}}).filter(function(e){return!!e});t.length&&(e.preventDefault(),null==ew||ew(t))}}}),no=T({configurations:L()}),nt=no.popup,ni=no.focused,nr=no.items,nl=no.ariaActiveDescendant,ns=no.suspended,nu=no.select,na=no.commandsRef,nc=no.callbackRef,nd=no.filter,nm=no.clearPopup,np=J(nc,eL,eJ,eW),nf=S(nd,nt);return y.createElement(y.Fragment,null,(null===(eh=eT.composer)||void 0===eh?void 0:eh.quotedMessages)&&y.createElement(Q,null),nf&&nt&&y.createElement(B,{select:nu,items:nr,focused:ni,title:nt.title,renderItem:nt.renderItem}),(null==nt?void 0:nt.preview)&&y.createElement(D,{select:nu,items:nr,focused:ni,renderItem:nt.renderItem,ref:na,rid:eS._id,tmid:eE,suspended:ns}),eR&&y.createElement(u,{mbe:4,display:"flex"},y.createElement(s,{title:eI("Only_people_with_permission_can_send_messages_here")},eI("This_room_is_read_only"))),e1&&y.createElement(O,{reference:ez,rid:eS._id,tmid:eE}),y.createElement(p,{ref:ez,variant:eZ?"editing":void 0},e$&&y.createElement(U,{rid:eS._id,isMicrophoneDenied:e0}),y.createElement(f,{ref:np,"aria-label":eK,name:"msg",disabled:e4||!e6,onChange:eN,style:e3,placeholder:eK,onKeyDown:eY,onPaste:nn,"aria-activedescendant":nl}),y.createElement("div",{ref:eG,style:e5}),y.createElement(g,null,y.createElement(m,{"aria-label":eI("Message_composer_toolbox_primary_actions")},y.createElement(d,{icon:"emoji",disabled:!eH||e4||!e6,onClick:eQ,title:eI("Emoji")}),y.createElement(v,null),eT.composer&&e2.length>0&&y.createElement(H,{composer:eT.composer,variant:e7.inlineSize<480?"small":"large",items:e2,disabled:e4||!e6}),y.createElement(v,null),y.createElement(W,{variant:e7.inlineSize<480?"small":"large",isRecording:e4,typing:eV,canSend:e6,rid:eS._id,tmid:eE,isMicrophoneDenied:e0})),y.createElement(k,null,!e6&&y.createElement(l,{small:!0,primary:!0,onClick:ex,loading:ne.isLoading},eI("Join")),e6&&y.createElement(d,{"aria-label":eI("Send"),icon:"send",disabled:!e6||!eV&&!eZ,onClick:eX,secondary:eV||eZ,info:eV||eZ})))),y.createElement(G,{rid:eS._id,tmid:eE}))}))}
//# sourceMappingURL=/dynamic/client/views/room/composer/messageBox/7e8a84fb6467fc6af5830004abcd638361c12ed2.map
