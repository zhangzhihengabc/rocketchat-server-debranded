)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/messageBox/MessageBoxActionsToolbar/actions/WebdavAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWebdavAccountIntegration } from '@rocket.chat/core-typings';\nimport { Option, OptionIcon, OptionContent } from '@rocket.chat/fuselage';\nimport { useTranslation, useSetting, useSetModal } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport { WebdavAccounts } from '../../../../../../../app/models/client';\nimport { useReactiveValue } from '../../../../../../hooks/useReactiveValue';\nimport type { ChatAPI } from '../../../../../../lib/chats/ChatAPI';\nimport { useChat } from '../../../../contexts/ChatContext';\nimport AddWebdavAccountModal from '../../../../webdav/AddWebdavAccountModal';\nimport WebdavFilePickerModal from '../../../../webdav/WebdavFilePickerModal';\n\nconst getWebdavAccounts = (): IWebdavAccountIntegration[] => WebdavAccounts.find().fetch();\n\nconst WebdavAction = ({ chatContext }: { chatContext?: ChatAPI }) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst webDavAccounts = useReactiveValue(getWebdavAccounts);\n\n\tconst webDavEnabled = useSetting('Webdav_Integration_Enabled');\n\n\tconst handleCreateWebDav = () => setModal(<AddWebdavAccountModal onClose={() => setModal(null)} onConfirm={() => setModal(null)} />);\n\n\tconst chat = useChat() ?? chatContext;\n\n\tconst handleUpload = async (file: File, description?: string) =>\n\t\tchat?.uploads.send(file, {\n\t\t\tdescription,\n\t\t});\n\n\tconst handleOpenWebdav = (account: IWebdavAccountIntegration) =>\n\t\tsetModal(<WebdavFilePickerModal account={account} onUpload={handleUpload} onClose={() => setModal(null)} />);\n\n\treturn (\n\t\t<>\n\t\t\t<Option\n\t\t\t\t{...(!webDavEnabled && { title: t('WebDAV_Integration_Not_Allowed') })}\n\t\t\t\tdisabled={!webDavEnabled}\n\t\t\t\tonClick={handleCreateWebDav}\n\t\t\t>\n\t\t\t\t<OptionIcon name='cloud-plus' />\n\t\t\t\t<OptionContent>{t('Add_Server')}</OptionContent>\n\t\t\t</Option>\n\t\t\t{webDavEnabled &&\n\t\t\t\twebDavAccounts.length > 0 &&\n\t\t\t\twebDavAccounts.map((account) => (\n\t\t\t\t\t<Option key={account._id} onClick={() => handleOpenWebdav(account)}>\n\t\t\t\t\t\t<OptionIcon name='cloud-plus' />\n\t\t\t\t\t\t<OptionContent>{account.name}</OptionContent>\n\t\t\t\t\t</Option>\n\t\t\t\t))}\n\t\t</>\n\t);\n};\n\nexport default WebdavAction;\n",null],"names":["module","link","default","v","_extends","_regeneratorRuntime","Option","OptionIcon","OptionContent","useTranslation","useSetting","useSetModal","React","WebdavAccounts","useReactiveValue","useChat","AddWebdavAccountModal","WebdavFilePickerModal","getWebdavAccounts","find","fetch","exportDefault","_ref","_useChat","chatContext","t","setModal","webDavAccounts","webDavEnabled","chat","handleUpload","file","description","async","_context","prev","next","abrupt","uploads","send","stop","Promise","createElement","Fragment","title","disabled","onClick","onClose","onConfirm","name","length","map","account","key","_id","onUpload"],"mappings":"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"}