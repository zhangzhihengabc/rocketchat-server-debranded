)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/messageBox/MessageBoxActionsToolbar/ActionsToolbarDropdown.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { Dropdown, IconButton, Option, OptionTitle, OptionIcon, OptionContent } from '@rocket.chat/fuselage';\nimport { useTranslation, useUserRoom } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactNode } from 'react';\nimport React, { useRef, Fragment } from 'react';\n\nimport { messageBox } from '../../../../../../app/ui-utils/client';\nimport { useMessageboxAppsActionButtons } from '../../../../../hooks/useAppActionButtons';\nimport type { ChatAPI } from '../../../../../lib/chats/ChatAPI';\nimport { useDropdownVisibility } from '../../../../../sidebar/header/hooks/useDropdownVisibility';\nimport { useChat } from '../../../contexts/ChatContext';\nimport CreateDiscussionAction from './actions/CreateDiscussionAction';\nimport ShareLocationAction from './actions/ShareLocationAction';\nimport WebdavAction from './actions/WebdavAction';\n\ntype ActionsToolbarDropdownProps = {\n\tchatContext?: ChatAPI;\n\trid: IRoom['_id'];\n\tisRecording?: boolean;\n\ttmid?: string;\n\tactions?: ReactNode[];\n};\n\nconst ActionsToolbarDropdown = ({ isRecording, rid, tmid, actions, ...props }: ActionsToolbarDropdownProps) => {\n\tconst chatContext = useChat();\n\n\tif (!chatContext) {\n\t\tthrow new Error('useChat must be used within a ChatProvider');\n\t}\n\n\tconst t = useTranslation();\n\tconst reference = useRef(null);\n\tconst target = useRef(null);\n\n\tconst room = useUserRoom(rid);\n\n\tconst { isVisible, toggle } = useDropdownVisibility({ reference, target });\n\n\tconst apps = useMessageboxAppsActionButtons();\n\n\tconst groups = {\n\t\t...(apps.isSuccess &&\n\t\t\tapps.data.length > 0 && {\n\t\t\t\tApps: apps.data,\n\t\t\t}),\n\t\t...messageBox.actions.get(),\n\t};\n\n\tconst messageBoxActions = Object.entries(groups).map(([name, group]) => {\n\t\tconst items = group.map((item) => ({\n\t\t\ticon: item.icon,\n\t\t\tname: t(item.label),\n\t\t\ttype: 'messagebox-action',\n\t\t\tid: item.id,\n\t\t\taction: item.action,\n\t\t}));\n\n\t\treturn {\n\t\t\ttitle: t.has(name) && t(name),\n\t\t\titems,\n\t\t};\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<IconButton\n\t\t\t\tdata-qa-id='menu-more-actions'\n\t\t\t\tdisabled={isRecording}\n\t\t\t\tsmall\n\t\t\t\tref={reference}\n\t\t\t\ticon='plus'\n\t\t\t\tonClick={() => toggle()}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t{isVisible && (\n\t\t\t\t<Dropdown reference={reference} ref={target} placement='bottom-start'>\n\t\t\t\t\t<OptionTitle>{t('Create_new')}</OptionTitle>\n\t\t\t\t\t{room && <CreateDiscussionAction room={room} />}\n\t\t\t\t\t{actions}\n\t\t\t\t\t<WebdavAction chatContext={chatContext} />\n\t\t\t\t\t{room && <ShareLocationAction room={room} tmid={tmid} />}\n\t\t\t\t\t{messageBoxActions?.map((actionGroup, index) => (\n\t\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t\t<OptionTitle>{actionGroup.title}</OptionTitle>\n\t\t\t\t\t\t\t{actionGroup.items.map((item) => (\n\t\t\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\tonClick={(event) =>\n\t\t\t\t\t\t\t\t\t\titem.action({\n\t\t\t\t\t\t\t\t\t\t\trid,\n\t\t\t\t\t\t\t\t\t\t\ttmid,\n\t\t\t\t\t\t\t\t\t\t\tevent: event as unknown as Event,\n\t\t\t\t\t\t\t\t\t\t\tchat: chatContext,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tgap={!item.icon}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.icon && <OptionIcon name={item.icon as ComponentProps<typeof OptionIcon>['name']} />}\n\t\t\t\t\t\t\t\t\t<OptionContent>{item.name}</OptionContent>\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t))}\n\t\t\t\t</Dropdown>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ActionsToolbarDropdown;\n",null],"names":["_extends","_slicedToArray","_objectSpread","_objectWithoutProperties","Dropdown","IconButton","Option","OptionTitle","OptionIcon","OptionContent","useTranslation","useUserRoom","React","useRef","Fragment","messageBox","useMessageboxAppsActionButtons","useDropdownVisibility","useChat","CreateDiscussionAction","ShareLocationAction","WebdavAction","module","link","default","v","exportDefault","_ref","isRecording","rid","tmid","actions","props","_excluded","chatContext","Error","t","reference","target","room","_useDropdownVisibilit","isVisible","toggle","apps","messageBoxActions","Object","entries","isSuccess","data","length","Apps","get","map","_ref2","_ref3","name","items","group","item","icon","label","type","id","action","title","has","createElement","disabled","small","ref","onClick","placement","actionGroup","index","key","event","chat","gap"],"mappings":"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"}