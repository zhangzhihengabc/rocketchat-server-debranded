)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/Header/RoomToolbox/RoomToolbox.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { HeaderToolboxAction, HeaderToolboxDivider } from '@rocket.chat/ui-client';\nimport { useLayout, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo } from 'react';\n\nimport GenericMenu from '../../../../components/GenericMenu/GenericMenu';\nimport type { GenericMenuItemProps } from '../../../../components/GenericMenu/GenericMenuItem';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\nimport type { RoomToolboxActionConfig } from '../../contexts/RoomToolboxContext';\n\ntype RoomToolboxProps = {\n\tclassName?: ComponentProps<typeof Box>['className'];\n};\n\ntype MenuActionsProps = {\n\tid: string;\n\titems: GenericMenuItemProps[];\n}[];\n\nconst RoomToolbox = ({ className }: RoomToolboxProps) => {\n\tconst t = useTranslation();\n\tconst { roomToolboxExpanded } = useLayout();\n\n\tconst toolbox = useRoomToolbox();\n\tconst { actions, openTab } = toolbox;\n\n\tconst featuredActions = actions.filter((action) => action.featured);\n\tconst normalActions = actions.filter((action) => !action.featured);\n\tconst visibleActions = !roomToolboxExpanded ? [] : normalActions.slice(0, 6);\n\n\tconst hiddenActions = (!roomToolboxExpanded ? actions : normalActions.slice(6))\n\t\t.filter((item) => !item.disabled && !item.featured)\n\t\t.map((item) => ({\n\t\t\t'key': item.id,\n\t\t\t'content': t(item.title),\n\t\t\t'onClick':\n\t\t\t\titem.action ??\n\t\t\t\t((): void => {\n\t\t\t\t\topenTab(item.id);\n\t\t\t\t}),\n\t\t\t'data-qa-id': `ToolBoxAction-${item.icon}`,\n\t\t\t...item,\n\t\t}))\n\t\t.reduce((acc, item) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(item);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, key: item.key, title: group === 'apps' ? t('Apps') : '', items: [item] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as MenuActionsProps);\n\n\tconst renderDefaultToolboxItem: RoomToolboxActionConfig['renderToolboxItem'] = useMutableCallback(\n\t\t({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => {\n\t\t\treturn (\n\t\t\t\t<HeaderToolboxAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n\t);\n\n\tconst mapToToolboxItem = (action: RoomToolboxActionConfig, index: number) => {\n\t\treturn (action.renderToolboxItem ?? renderDefaultToolboxItem)?.({\n\t\t\t...action,\n\t\t\taction: action.action ?? (() => toolbox.openTab(action.id)),\n\t\t\tclassName,\n\t\t\tindex,\n\t\t\ttoolbox,\n\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{featuredActions.map(mapToToolboxItem)}\n\t\t\t{featuredActions.length > 0 && <HeaderToolboxDivider />}\n\t\t\t{visibleActions.map(mapToToolboxItem)}\n\t\t\t{(normalActions.length > 6 || roomToolboxExpanded) && (\n\t\t\t\t<GenericMenu title={t('Options')} data-qa-id='ToolBox-Menu' sections={hiddenActions} placement='bottom-end' />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default memo(RoomToolbox);\n",null],"names":["_objectSpread","useMutableCallback","HeaderToolboxAction","HeaderToolboxDivider","useLayout","useTranslation","React","memo","GenericMenu","useRoomToolbox","module","default","link","v","exportDefault","_ref","className","t","roomToolboxExpanded","_useLayout","toolbox","actions","openTab","featuredActions","filter","action","featured","normalActions","visibleActions","slice","hiddenActions","item","disabled","map","_item$action","id","title","icon","reduce","acc","group","type","section","find","items","push","newSection","key","renderDefaultToolboxItem","_ref2","index","tab","tooltip","createElement","pressed","mapToToolboxItem","_ref3","_action$renderToolbox","_action$action","renderToolboxItem","Fragment","length","sections","placement"],"mappings":"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"}