)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/Header/ParentTeam.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { TEAM_TYPE } from '@rocket.chat/core-typings';\nimport { HeaderTag, HeaderTagIcon, HeaderTagSkeleton } from '@rocket.chat/ui-client';\nimport { useUserId, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport { goToRoomById } from '../../../lib/utils/goToRoomById';\n\ntype APIErrorResult = { success: boolean; error: string };\n\nconst ParentTeam = ({ room }: { room: IRoom }): ReactElement | null => {\n\tconst { teamId } = room;\n\tconst userId = useUserId();\n\n\tif (!teamId) {\n\t\tthrow new Error('invalid rid');\n\t}\n\n\tif (!userId) {\n\t\tthrow new Error('invalid uid');\n\t}\n\n\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n\tconst userTeamsListEndpoint = useEndpoint('GET', '/v1/users.listTeams');\n\n\tconst {\n\t\tdata: teamInfoData,\n\t\tisLoading: teamInfoLoading,\n\t\tisError: teamInfoError,\n\t} = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\n\t\tkeepPreviousData: true,\n\t\tretry: (_, error) => (error as APIErrorResult)?.error === 'unauthorized' && false,\n\t});\n\n\tconst { data: userTeams, isLoading: userTeamsLoading } = useQuery(['userId', userId], async () => userTeamsListEndpoint({ userId }));\n\n\tconst userBelongsToTeam = userTeams?.teams?.find((team) => team._id === teamId) || false;\n\tconst isTeamPublic = teamInfoData?.teamInfo.type === TEAM_TYPE.PUBLIC;\n\n\tconst redirectToMainRoom = (): void => {\n\t\tconst rid = teamInfoData?.teamInfo.roomId;\n\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tgoToRoomById(rid);\n\t};\n\n\tif (teamInfoLoading || userTeamsLoading) {\n\t\treturn <HeaderTagSkeleton />;\n\t}\n\n\tif (teamInfoError) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<HeaderTag onClick={isTeamPublic || userBelongsToTeam ? redirectToMainRoom : undefined}>\n\t\t\t<HeaderTagIcon icon={{ name: isTeamPublic ? 'team' : 'team-lock' }} />\n\t\t\t{teamInfoData?.teamInfo.name}\n\t\t</HeaderTag>\n\t);\n};\n\nexport default ParentTeam;\n",null],"names":["_regeneratorRuntime","TEAM_TYPE","HeaderTag","HeaderTagIcon","HeaderTagSkeleton","useUserId","useEndpoint","useQuery","React","goToRoomById","module","link","default","v","exportDefault","_ref","_userTeams$teams","teamId","room","userId","Error","teamsInfoEndpoint","userTeamsListEndpoint","_useQuery","async","_context","prev","next","abrupt","stop","Promise","keepPreviousData","retry","_","error","teamInfoData","data","teamInfoLoading","isLoading","teamInfoError","isError","_useQuery2","_context2","userTeams","userTeamsLoading","userBelongsToTeam","teams","find","team","_id","isTeamPublic","teamInfo","type","PUBLIC","createElement","onClick","rid","roomId","undefined","icon","name"],"mappings":"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"}