function module(e,n,t){var r,o,i,s,u,a,c,l,p,m,f,d,g,x,h,v,_,b,P,k,y,E,$,C,w,R;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){s=e}},3),t.link("@rocket.chat/core-typings",{isOmnichannelRoom:function(e){u=e}},0),t.link("@rocket.chat/fuselage-hooks",{useLocalStorage:function(e){a=e}},1),t.link("@rocket.chat/string-helpers",{escapeRegExp:function(e){c=e}},2),t.link("@rocket.chat/ui-contexts",{useMethod:function(e){l=e},useSetting:function(e){p=e},useTranslation:function(e){m=e},useUserPreference:function(e){f=e}},3),t.link("react",{default:function(e){d=e},useMemo:function(e){g=e}},4),t.link("../../../../app/authorization/client",{hasAtLeastOnePermission:function(e){x=e}},5),t.link("../../../../app/emoji/client",{emoji:function(e){h=e}},6),t.link("../../../../app/models/client",{Subscriptions:function(e){v=e}},7),t.link("../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupCannedResponse",{default:function(e){_=e}},8),t.link("../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupEmoji",{default:function(e){b=e}},9),t.link("../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupRoom",{default:function(e){P=e}},10),t.link("../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupSlashCommand",{default:function(e){k=e}},11),t.link("../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupUser",{default:function(e){y=e}},12),t.link("../../../../app/ui-message/client/popup/messagePopupConfig",{usersFromRoomMessages:function(e){E=e}},13),t.link("../../../../app/utils/client",{slashCommands:function(e){$=e}},14),t.link("../../../../ee/app/canned-responses/client/collections/CannedResponse",{CannedResponse:function(e){C=e}},15),t.link("../contexts/ComposerPopupContext",{ComposerPopupContext:function(e){w=e},createMessageBoxPopupConfig:function(e){R=e}},16),t.exportDefault(function(e){var n=e.children,t=e.room,I=t._id,F=l("spotlight"),S=p("Number_of_users_autocomplete_suggestions"),B=p("Canned_Responses_Enable"),j=s(a("emoji.recent",[]),1)[0],L=u(t),O=f("useEmojis"),A=m(),V=l("getSlashCommandPreviews"),M=g(function(){return[R({trigger:"@",title:A("People"),getItemsFromLocal:function(e){var n,t,s;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e&&RegExp(c(e),"i"),t=[],s=E.find(i({ts:{$exists:!0}},e&&{$or:[{username:n},{name:n}]}),{limit:null!=S?S:5,sort:{ts:-1}}).fetch().map(function(e){return e.suggestion=!0,e}),(!n||n.test("all"))&&t.push({_id:"all",username:"all",system:!0,name:A("Notify_all_in_this_room"),sort:4}),(!n||n.test("here"))&&t.push({_id:"here",username:"here",system:!0,name:A("Notify_active_in_this_room"),sort:4}),r.abrupt("return",[].concat(o(s),t));case 6:case"end":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(e){var n,t,o,s;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=e&&RegExp(c(e),"i"),t=E.find(i({ts:{$exists:!0}},e&&{$or:[{username:n},{name:n}]}),{limit:null!=S?S:5,sort:{ts:-1}}).fetch().map(function(e){return e.username}),u.next=4,r.awrap(F(e,t,{users:!0,mentions:!0},I));case 4:return s=void 0===(o=u.sent.users)?[]:o,u.abrupt("return",s.map(function(e){return{_id:e._id,username:e.username,nickname:e.nickname,name:e.name,status:e.status,avatarETag:e.avatarETag,outside:e.outside,sort:3}}));case 8:case"end":return u.stop()}},null,null,null,Promise)},getValue:function(e){return e.username},renderItem:function(e){var n=e.item;return d.createElement(y,n)}}),R({trigger:"#",title:A("Channels"),getItemsFromLocal:function(e){var n,t;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp(c(e),"i"),t=v.find({name:n,$or:[{federated:{$exists:!1}},{federated:!1}],t:{$in:["c","p"]}},{limit:null!=S?S:5,sort:{ls:-1}}).fetch(),r.abrupt("return",t);case 3:case"end":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(e){var n,t;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.awrap(F(e,[],{rooms:!0,mentions:!0},I));case 2:return t=void 0===(n=o.sent.rooms)?[]:n,o.abrupt("return",t);case 6:case"end":return o.stop()}},null,null,null,Promise)},getValue:function(e){return""+(e.name||e.fname)},renderItem:function(e){var n=e.item;return d.createElement(P,n)}}),O&&R({trigger:":",title:A("Emoji"),triggerLength:2,getItemsFromLocal:function(e){var n,t,o,i,s,u,a,l;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp("^tone[1-5]:*$"),t=RegExp("tone[1-5]:*$"),o=RegExp("_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$"),i=function(e){return function(n,t){var r=n._id===u?2:0,o=t._id===u?2:0,i=n._id.startsWith(u)?1:0,s=t._id.startsWith(u)?1:0,a=r+i,c=o+s;return(e.includes(n._id)&&(a+=e.indexOf(n._id)+1),e.includes(t._id)&&(c+=e.indexOf(t._id)+1),a>c)?-1:a<c?1:0}},s=RegExp(c(e),"i"),u=":"+e,a=j.map(function(e){return":"+e+":"}),l=h.list,r.abrupt("return",Object.keys(l).map(function(e){return{_id:e,data:l[u]}}).filter(function(e){var r=e._id;return s.test(r)&&(n.test(r.substring(u.length))||o.test(u)||!t.test(r))}).sort(i(a)).slice(0,10));case 9:case"end":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},null,null,null,Promise)},getValue:function(e){return""+e._id.substring(1)},renderItem:function(e){var n=e.item;return d.createElement(b,n)}}),R({title:A("Emoji"),trigger:"\\+:",prefix:"+",suffix:" ",triggerAnywhere:!1,getItemsFromLocal:function(e){var n,t,o,i,s,u,a,l;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp("^tone[1-5]:*$"),t=RegExp("tone[1-5]:*$"),o=RegExp("_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$"),i=function(e){return function(n,t){var r=n._id,o=n._id;return(e.includes(n._id)&&(r=e.indexOf(n._id)+r),e.includes(t._id)&&(o=e.indexOf(t._id)+o),r<o)?-1:r>o?1:0}},s=RegExp(c(e),"i"),u=":"+e,a=j.map(function(e){return":"+e+":"}),l=h.list,r.abrupt("return",Object.keys(l).map(function(e){return{_id:e,data:l[u]}}).filter(function(e){var r=e._id;return s.test(r)&&(n.test(r.substring(u.length))||o.test(u)||!t.test(r))}).sort(i(a)).slice(0,10));case 9:case"end":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},null,null,null,Promise)},getValue:function(e){return""+e._id},renderItem:function(e){var n=e.item;return d.createElement(b,n)}}),R({title:A("Commands"),trigger:"/",suffix:" ",triggerAnywhere:!1,renderItem:function(e){var n=e.item;return d.createElement(k,n)},getItemsFromLocal:function(e){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object.keys($.commands).map(function(e){var n,t=$.commands[e];return{_id:e,params:t.params&&A.has(t.params)?A(t.params):null!==(n=t.params)&&void 0!==n?n:"",description:t.description&&A.has(t.description)?A(t.description):t.description,permission:t.permission}}).filter(function(n){return n._id.indexOf(e)>-1&&(!n.permission||x(n.permission,I))}).sort(function(e,n){return e._id.localeCompare(n._id)}).slice(0,11));case 1:case"end":return n.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},null,null,null,Promise)}}),B&&L&&R({title:A("Canned_Responses"),trigger:"!",prefix:"",triggerAnywhere:!0,renderItem:function(e){var n=e.item;return d.createElement(_,n)},getItemsFromLocal:function(e){var n;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=RegExp(e,"i"),t.abrupt("return",C.find({shortcut:n},{limit:12,sort:{shortcut:-1}}).fetch().map(function(e){return{_id:e._id,text:e.text,shortcut:e.shortcut}}));case 2:case"end":return t.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},null,null,null,Promise)},getValue:function(e){return e.text}}),R({matchSelectorRegex:/(?:^)(\/[\w\d\S]+ )[^]*$/,preview:!0,getItemsFromLocal:function(e){var n,t,o,i,s;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.cmd,o=e.params,i=e.tmid,u.next=3,r.awrap(V({cmd:t,params:o,msg:{rid:I,tmid:i}}));case 3:return s=u.sent,u.abrupt("return",null!==(n=null==s?void 0:s.items.map(function(e){return{_id:e.id,value:e.value,type:e.type}}))&&void 0!==n?n:[]);case 5:case"end":return u.stop()}},null,null,null,Promise)}})].filter(Boolean)},[A,B,L,j,S,F,I,V,O]);return d.createElement(w.Provider,{value:M,children:n})})}
//# sourceMappingURL=/dynamic/client/views/room/providers/8a4bda53853fd1552139457b8b15a01f56b649ba.map
