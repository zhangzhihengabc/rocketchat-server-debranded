)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/hooks/useRoomQuery.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { UseQueryOptions, UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { ChatRoom } from '../../../../../app/models/client';\nimport { queueMicrotask } from '../../../../lib/utils/queueMicrotask';\n\nexport function useRoomQuery(\n\trid: IRoom['_id'],\n\toptions?: UseQueryOptions<IRoom | null, Error, IRoom | null, readonly ['rooms', IRoom['_id']]>,\n): UseQueryResult<IRoom | null, Error> {\n\tconst queryKey = ['rooms', rid] as const;\n\n\tconst queryResult = useQuery(queryKey, async (): Promise<IRoom | null> => ChatRoom.findOne({ _id: rid }, { reactive: false }) ?? null, {\n\t\tstaleTime: Infinity,\n\t\t...options,\n\t});\n\n\tconst { refetch } = queryResult;\n\n\tuseEffect(() => {\n\t\tconst liveQueryHandle = ChatRoom.find({ _id: rid }).observe({\n\t\t\tadded: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t\tchanged: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t\tremoved: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t});\n\n\t\treturn () => {\n\t\t\tliveQueryHandle.stop();\n\t\t};\n\t}, [refetch, rid]);\n\n\treturn queryResult;\n}\n",null],"names":["_objectSpread","_regeneratorRuntime","useQuery","useEffect","ChatRoom","queueMicrotask","useRoomQuery","rid","options","queryResult","_ChatRoom$findOne","async","_context","prev","next","abrupt","findOne","_id","reactive","stop","Promise","staleTime","Infinity","refetch","liveQueryHandle","find","observe","added","exact","changed","removed","module","link","default","export"],"mappings":"2BAEAA,EAAiDC,EAAAC,EAAAC,EAAAC,EAAAC,EAM3C,SAAUC,EACfC,CAAiB,CACjBC,CAA8F,EAI9F,IAAMC,EAAcP,EAFH,CAAC,QAASK,EAAa,CAED,WAAA,IAAAG,EAAA,OAAAT,EAAAU,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAAA,AAAsF,OAAtFL,CAAAA,EAAmCN,EAASY,OAAO,CAAC,CAAEC,IAAKV,CAAG,EAAI,CAAEW,SAAU,CAAA,CAAK,EAAE,GAACR,AAAA,KAAA,IAAAA,EAAAA,EAAI,KAAI,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAAApB,EAAA,CACpIqB,UAAWC,GAAQ,EAChBd,IAGIe,EAAYd,EAAZc,OAAO,CAcf,OAZApB,EAAU,WACT,IAAMqB,EAAkBpB,EAASqB,IAAI,CAAC,CAAER,IAAKV,CAAG,GAAImB,OAAO,CAAC,CAC3DC,MAAO,WAAA,OAAMtB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,EAC5DC,QAAS,WAAA,OAAMxB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,EAC9DE,QAAS,WAAA,OAAMzB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,IAG/D,OAAO,WACNJ,EAAgBL,IAAI,EACrB,CACD,EAAG,CAACI,EAAShB,EAAI,EAEVE,CACR,CAhCiBsB,EAAQC,IAAAA,CAAAA,uCAAwB,CAAAC,QAAAA,SAAAA,CAAAA,EAAAjC,EAAAA,CAAA,CAAA,EAAA,GAAA+B,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAhC,EAAAA,CAAA,CAAA,EAAA,GAAjD8B,EAAOG,MAAE,CAAA,CAAA5B,aAAgB,WAAA,OAAAA,CAAwB,CAAA,GAAAyB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAA7B,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAA6B,EAAAA,IAAAA,CAAAA,QAAAA,CAAA5B,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAA4B,EAAAA,IAAAA,CAAAA,mCAAAA,CAAA3B,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAA2B,EAAAA,IAAAA,CAAAA,uCAAAA,CAAA1B,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}