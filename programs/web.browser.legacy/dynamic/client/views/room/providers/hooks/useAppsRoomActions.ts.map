)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/hooks/useAppsRoomActions.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { UiKitTriggerTimeoutError } from '../../../../../app/ui-message/client/UiKitTriggerTimeoutError';\nimport { Utilities } from '../../../../../ee/lib/misc/Utilities';\nimport { useAppActionButtons } from '../../../../hooks/useAppActionButtons';\nimport { useApplyButtonFilters } from '../../../../hooks/useApplyButtonFilters';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useRoom } from '../../contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../contexts/RoomToolboxContext';\n\nexport const useAppsRoomActions = () => {\n\tconst result = useAppActionButtons('roomAction');\n\tconst actionManager = useUiKitActionManager();\n\tconst applyButtonFilters = useApplyButtonFilters();\n\tconst room = useRoom();\n\tconst { t } = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tresult.data?.filter(applyButtonFilters).map(\n\t\t\t\t(action): RoomToolboxActionConfig => ({\n\t\t\t\t\tid: action.actionId,\n\t\t\t\t\ticon: undefined,\n\t\t\t\t\tvariant: action.variant,\n\t\t\t\t\torder: 300,\n\t\t\t\t\ttitle: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\n\t\t\t\t\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\n\t\t\t\t\t// Filters were applied in the applyButtonFilters function\n\t\t\t\t\t// if the code made it this far, the button should be shown\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tvoid actionManager\n\t\t\t\t\t\t\t.emitInteraction(action.appId, {\n\t\t\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\t\t\tactionId: action.actionId,\n\t\t\t\t\t\t\t\trid: room._id,\n\t\t\t\t\t\t\t\tpayload: { context: action.context },\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(async (reason) => {\n\t\t\t\t\t\t\t\tif (reason instanceof UiKitTriggerTimeoutError) {\n\t\t\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn reason;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'apps',\n\t\t\t\t}),\n\t\t\t) ?? [],\n\t\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, room._id, t],\n\t);\n};\n",null],"names":["module","default","v","_regeneratorRuntime","export","useAppsRoomActions","useToastMessageDispatch","useMemo","useTranslation","UiKitTriggerTimeoutError","Utilities","useAppActionButtons","useApplyButtonFilters","useUiKitActionManager","useRoom","result","actionManager","applyButtonFilters","room","t","_useTranslation","dispatchToastMessage","_result$data$filter$m","_result$data","data","filter","map","action","id","actionId","icon","undefined","variant","order","title","getI18nKeyForApp","labelI18n","appId","groups","emitInteraction","type","rid","_id","payload","context","catch","reason","async","_context","prev","next","message","abrupt","stop","Promise"],"mappings":"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"}