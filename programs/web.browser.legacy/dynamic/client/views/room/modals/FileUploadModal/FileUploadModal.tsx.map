)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\nimport React, { memo, useState, useEffect } from 'react';\n\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tfileDescription?: string;\n\tinvalidContentType: boolean;\n\tshowDescription?: boolean;\n};\n\nconst FileUploadModal = ({\n\tonClose,\n\tfile,\n\tfileName,\n\tfileDescription,\n\tonSubmit,\n\tinvalidContentType,\n\tshowDescription = true,\n}: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>(fileDescription || '');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\n\t\t\t<Box display='flex' flexDirection='column' height='100%'>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{!name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{showDescription && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button secondary onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit' disabled={!name}>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n",null],"names":["_extends","_slicedToArray","Modal","Box","Field","FieldGroup","FieldLabel","FieldRow","FieldError","TextInput","Button","useAutoFocus","useToastMessageDispatch","useTranslation","React","memo","useState","useEffect","FilePreview","module","link","default","v","exportDefault","_ref","onClose","file","fileName","fileDescription","onSubmit","invalidContentType","_ref$showDescription","showDescription","_useState2","name","setName","_useState4","description","setDescription","t","dispatchToastMessage","ref","handleSubmit","e","preventDefault","type","message","field","size","createElement","wrapperFunction","props","is","display","flexDirection","height","Header","Title","Close","onClick","Content","maxHeight","w","justifyContent","alignContent","mbe","value","onChange","currentTarget","placeholder","Footer","FooterControllers","secondary","primary","disabled"],"mappings":"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"}