)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/RoomMembers/RoomMembers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Box, Icon, TextInput, Select, Throbber, ButtonGroup, Button, Callout } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, FormEventHandler, ComponentProps, MouseEvent } from 'react';\nimport React, { useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarIcon,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n\tContextualbarFooter,\n\tContextualbarEmptyContent,\n} from '../../../../components/Contextualbar';\nimport InfiniteListAnchor from '../../../../components/InfiniteListAnchor';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport RoomMembersRow from './RoomMembersRow';\n\ntype RoomMemberUser = Pick<IUser, 'username' | '_id' | 'name' | 'status'>;\n\ntype RoomMembersProps = {\n\trid: IRoom['_id'];\n\tisTeam?: boolean;\n\tisDirect?: boolean;\n\tloading: boolean;\n\ttext: string;\n\ttype: string;\n\tsetText: FormEventHandler<HTMLElement>;\n\tsetType: (type: 'online' | 'all') => void;\n\tmembers: RoomMemberUser[];\n\ttotal: number;\n\terror?: Error;\n\tonClickClose: () => void;\n\tonClickView: (e: MouseEvent<HTMLElement>) => void;\n\tonClickAdd?: () => void;\n\tonClickInvite?: () => void;\n\tloadMoreItems: () => void;\n\trenderRow?: (props: ComponentProps<typeof RoomMembersRow>) => ReactElement | null;\n\treload: () => void;\n};\n\nconst RoomMembers = ({\n\tloading,\n\tmembers = [],\n\ttext,\n\ttype,\n\tsetText,\n\tsetType,\n\tonClickClose,\n\tonClickView,\n\tonClickAdd,\n\tonClickInvite,\n\ttotal,\n\terror,\n\tloadMoreItems,\n\trenderRow: RowComponent = RoomMembersRow,\n\trid,\n\tisTeam,\n\tisDirect,\n\treload,\n}: RoomMembersProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\tconst itemData = useMemo(() => ({ onClickView, rid }), [onClickView, rid]);\n\n\tconst options: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['online', t('Online')],\n\t\t\t['all', t('All')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst loadMoreMembers = useDebouncedCallback(\n\t\t() => {\n\t\t\tloadMoreItems();\n\t\t},\n\t\t300,\n\t\t[loadMoreItems, members],\n\t);\n\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader data-qa-id='RoomHeader-Members'>\n\t\t\t\t<ContextualbarIcon name='members' />\n\t\t\t\t<ContextualbarTitle>{isTeam ? t('Teams_members') : t('Members')}</ContextualbarTitle>\n\t\t\t\t{onClickClose && <ContextualbarClose onClick={onClickClose} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarContent p={12}>\n\t\t\t\t<Box display='flex' flexDirection='row' p={12} flexShrink={0}>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Search_by_username')}\n\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\tonChange={setText}\n\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box w='x144' mis={8}>\n\t\t\t\t\t\t<Select onChange={(value): void => setType(value as 'online' | 'all')} value={type} options={options} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Box pi={12} pb={12}>\n\t\t\t\t\t\t<Callout type='danger'>{error.message}</Callout>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && members.length <= 0 && <ContextualbarEmptyContent title={t('No_members_found')} />}\n\n\t\t\t\t{!loading && members.length > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Box pi={18} pb={12}>\n\t\t\t\t\t\t\t<Box is='span' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t('Showing_current_of_total', { current: members.length, total })}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t<Box w='full' h='full' overflow='hidden' flexShrink={1}>\n\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\t\toverscan={50}\n\t\t\t\t\t\t\t\tdata={members}\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper, Footer: () => <InfiniteListAnchor loadMore={loadMoreMembers} /> }}\n\t\t\t\t\t\t\t\titemContent={(index, data): ReactElement => (\n\t\t\t\t\t\t\t\t\t<RowComponent useRealName={useRealName} data={itemData} user={data} index={index} reload={reload} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</ContextualbarContent>\n\t\t\t{!isDirect && (onClickInvite || onClickAdd) && (\n\t\t\t\t<ContextualbarFooter>\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t{onClickInvite && (\n\t\t\t\t\t\t\t<Button icon='link' onClick={onClickInvite} width='50%'>\n\t\t\t\t\t\t\t\t{t('Invite_Link')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{onClickAdd && (\n\t\t\t\t\t\t\t<Button icon='user-plus' onClick={onClickAdd} width='50%' primary>\n\t\t\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</ContextualbarFooter>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default RoomMembers;\n",null],"names":["Box","Icon","TextInput","Select","Throbber","ButtonGroup","Button","Callout","useAutoFocus","useDebouncedCallback","useTranslation","useSetting","React","useMemo","Virtuoso","ContextualbarHeader","ContextualbarIcon","ContextualbarTitle","ContextualbarClose","ContextualbarContent","ContextualbarFooter","ContextualbarEmptyContent","InfiniteListAnchor","ScrollableContentWrapper","RoomMembersRow","module","link","v","exportDefault","_ref","loading","_ref$members","members","text","type","setText","setType","onClickClose","onClickView","onClickAdd","onClickInvite","total","error","loadMoreItems","_ref$renderRow","renderRow","RowComponent","rid","isTeam","isDirect","reload","t","inputRef","itemData","options","loadMoreMembers","useRealName","Boolean","createElement","Fragment","name","onClick","p","display","flexDirection","flexShrink","placeholder","value","ref","onChange","addon","size","w","mis","pi","pb","message","length","title","is","color","fontScale","current","h","overflow","style","height","width","totalCount","overscan","data","components","Scroller","Footer","loadMore","itemContent","index","user","stretch","icon","primary"],"mappings":"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"}