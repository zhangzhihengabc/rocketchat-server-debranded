)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/RoomMembers/AddUsers/AddMatrixUsers/useAddMatrixUsers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport React from 'react';\n\nimport AddMatrixUsersModal from './AddMatrixUsersModal';\n\nexport type useAddMatrixUsersProps = {\n\thandleSave: (args_0: any) => Promise<void>;\n\tusers: string[];\n};\n\nexport const useAddMatrixUsers = () => {\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst handleClose = useMutableCallback(() => setModal(null));\n\tconst dispatchVerifyEndpoint = useEndpoint('GET', '/v1/federation/matrixIds.verify');\n\n\treturn useMutation(async ({ users, handleSave }: useAddMatrixUsersProps) => {\n\t\ttry {\n\t\t\tlet matrixIdVerificationMap = new Map();\n\t\t\tconst matrixIds = users.filter((user) => user.startsWith('@'));\n\t\t\tif (matrixIds.length > 0) {\n\t\t\t\tconst matrixIdsVerificationResponse = await dispatchVerifyEndpoint({ matrixIds });\n\t\t\t\tconst { results: matrixIdsVerificationResults } = matrixIdsVerificationResponse;\n\t\t\t\tmatrixIdVerificationMap = new Map(Object.entries(matrixIdsVerificationResults));\n\t\t\t}\n\n\t\t\tsetModal(\n\t\t\t\t<AddMatrixUsersModal\n\t\t\t\t\tcompleteUserList={users}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\tonSave={handleSave}\n\t\t\t\t\tmatrixIdVerifiedStatus={matrixIdVerificationMap as Map<string, string>}\n\t\t\t\t/>,\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as Error });\n\t\t}\n\t});\n};\n",null],"names":["module","link","default","_regeneratorRuntime","export","useAddMatrixUsers","useMutableCallback","useSetModal","useToastMessageDispatch","useEndpoint","useMutation","v","React","AddMatrixUsersModal","setModal","dispatchToastMessage","handleClose","dispatchVerifyEndpoint","_ref","users","handleSave","matrixIdVerificationMap","matrixIds","matrixIdsVerificationResults","async","_context","prev","next","Map","filter","user","startsWith","length","awrap","matrixIdsVerificationResponse","sent","results","Object","entries","createElement","completeUserList","onClose","onSave","matrixIdVerifiedStatus","t0","type","message","stop","Promise"],"mappings":"uBAASA,EAAoBC,IAAM,CAAA,6BAA8B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAjEH,EAAOI,MAAE,CAAA,CAAAC,kBAAoB,WAAM,OAAAA,CAA8B,CAAA,GAAAL,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAM,mBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAO,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAU,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAW,CAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,wBAAAA,CAAA,QAAA,SAAAW,CAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAY1D,IAZPV,EAAiEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAE,EAAAC,EAYpDR,EAAoB,WAChC,IAAMS,EAAWP,IACXQ,EAAuBP,IACvBQ,EAAcV,EAAmB,WAAA,OAAMQ,EAAS,KAAK,GACrDG,EAAyBR,EAAY,MAAO,mCAElD,OAAOC,EAAY,SAAAQ,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAApB,EAAAqB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAG6C,GAHpCR,EAAKD,EAALC,KAAK,CAAEC,EAAUF,EAAVE,UAAU,CAAAK,EAAAC,IAAA,CAAA,EAEvCL,EAA0B,IAAIO,IAC4B,CAC1DN,CAAAA,AADEA,CAAAA,EAAYH,EAAMU,MAAM,CAAC,SAACC,CAAI,EAAA,OAAKA,EAAKC,UAAU,CAAC,IAAI,EAAA,EAC/CC,MAAM,CAAG,CAAA,EAAC,CAAAP,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAxB,EAAA8B,KAAA,CACqBhB,EAAuB,CAAEK,UAAAA,CAAS,GAAG,MAAA,EAChEC,EAAiCW,AADfT,EAAAU,IAAA,CAC3BC,OAAO,CACff,EAA0B,IAAIO,IAAIS,OAAOC,OAAO,CAACf,GAA+B,MAAA,GAGjFT,EACCF,EAAA2B,aAAA,CAAC1B,EAAmB,CACnB2B,iBAAkBrB,EAClBsB,QAASzB,EACT0B,OAAQtB,EACRuB,uBAAwBtB,CAA+C,IAEvEI,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAmB,EAAA,CAAAnB,EAAA,KAAA,CAAA,GAEFV,EAAqB,CAAE8B,KAAM,QAASC,QAAOrB,EAAAmB,EAAA,AAAgB,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAsB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAGpE"}