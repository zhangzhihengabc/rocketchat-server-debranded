)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/RoomMembers/AddUsers/AddUsers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { Field, FieldLabel, Button, ButtonGroup, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarBack,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n} from '../../../../../components/Contextualbar';\nimport UserAutoCompleteMultiple from '../../../../../components/UserAutoCompleteMultiple';\nimport UserAutoCompleteMultipleFederated from '../../../../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated';\nimport { useRoom } from '../../../contexts/RoomContext';\nimport { useRoomToolbox } from '../../../contexts/RoomToolboxContext';\nimport { useAddMatrixUsers } from './AddMatrixUsers/useAddMatrixUsers';\n\ntype AddUsersProps = {\n\trid: IRoom['_id'];\n\tonClickBack: () => void;\n\treload: () => void;\n};\n\nconst AddUsers = ({ rid, onClickBack, reload }: AddUsersProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst room = useRoom();\n\n\tconst { closeTab } = useRoomToolbox();\n\tconst saveAction = useMethod('addUsersToRoom');\n\n\tconst {\n\t\thandleSubmit,\n\t\tcontrol,\n\t\tgetValues,\n\t\tformState: { isDirty, isSubmitting },\n\t} = useForm({ defaultValues: { users: [] } });\n\n\tconst handleSave = useMutableCallback(async ({ users }) => {\n\t\ttry {\n\t\t\tawait saveAction({ rid, users });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Users_added') });\n\t\t\tonClickBack();\n\t\t\treload();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as Error });\n\t\t}\n\t});\n\n\tconst addClickHandler = useAddMatrixUsers();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t{onClickBack && <ContextualbarBack onClick={onClickBack} />}\n\t\t\t\t<ContextualbarTitle>{t('Add_users')}</ContextualbarTitle>\n\t\t\t\t{closeTab && <ContextualbarClose onClick={closeTab} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel flexGrow={0}>{t('Choose_users')}</FieldLabel>\n\t\t\t\t\t\t{isRoomFederated(room) ? (\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='users'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => <UserAutoCompleteMultipleFederated {...field} placeholder={t('Choose_users')} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='users'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => <UserAutoCompleteMultiple {...field} placeholder={t('Choose_users')} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{isRoomFederated(room) ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tprimary\n\t\t\t\t\t\t\tdisabled={addClickHandler.isLoading}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\taddClickHandler.mutate({\n\t\t\t\t\t\t\t\t\tusers: getValues('users'),\n\t\t\t\t\t\t\t\t\thandleSave,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Add_users')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Button primary loading={isSubmitting} disabled={!isDirty} onClick={handleSubmit(handleSave)}>\n\t\t\t\t\t\t\t{t('Add_users')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default AddUsers;\n",null],"names":["_extends","_regeneratorRuntime","isRoomFederated","Field","FieldLabel","Button","ButtonGroup","FieldGroup","useMutableCallback","useToastMessageDispatch","useMethod","useTranslation","React","Controller","useForm","ContextualbarHeader","ContextualbarBack","ContextualbarTitle","ContextualbarClose","ContextualbarScrollableContent","ContextualbarFooter","UserAutoCompleteMultiple","UserAutoCompleteMultipleFederated","useRoom","useRoomToolbox","useAddMatrixUsers","module","default","v","link","exportDefault","_ref","rid","onClickBack","reload","t","dispatchToastMessage","room","closeTab","_useRoomToolbox","saveAction","_useForm","defaultValues","users","handleSubmit","control","getValues","_useForm$formState","formState","isDirty","isSubmitting","handleSave","_ref2","async","_context","prev","next","awrap","type","message","t0","stop","Promise","addClickHandler","createElement","Fragment","onClick","flexGrow","name","render","_ref3","field","placeholder","_ref4","stretch","primary","disabled","isLoading","mutate","loading"],"mappings":"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"}