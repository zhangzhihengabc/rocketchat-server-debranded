)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/hooks/actions/useRoomMoveToTeam.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isRoomFederated } from '@rocket.chat/core-typings';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport ChannelToTeamModal from '../../ChannelToTeamModal';\nimport { useCanEditRoom } from '../useCanEditRoom';\n\nexport const useRoomMoveToTeam = (room: IRoom) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst canEdit = useCanEditRoom(room);\n\tconst canMoveToTeam = !isRoomFederated(room) && !room.teamId && !room.prid && canEdit;\n\n\tconst moveChannelToTeam = useEndpoint('POST', '/v1/teams.addRooms');\n\n\tconst handleMoveToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async (teamId: IRoom['teamId']) => {\n\t\t\tif (!teamId) {\n\t\t\t\tthrow new Error('teamId not provided');\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait moveChannelToTeam({ rooms: [room._id], teamId });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Rooms_added_successfully') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<ChannelToTeamModal onCancel={() => setModal(null)} onConfirm={onConfirm} />);\n\t});\n\n\treturn canMoveToTeam ? handleMoveToTeam : null;\n};\n",null],"names":["module","link","default","_regeneratorRuntime","export","useRoomMoveToTeam","isRoomFederated","useMutableCallback","useSetModal","useToastMessageDispatch","useTranslation","useEndpoint","v","React","ChannelToTeamModal","useCanEditRoom","room","t","setModal","dispatchToastMessage","canEdit","canMoveToTeam","teamId","prid","moveChannelToTeam","handleMoveToTeam","onConfirm","async","_context2","prev","next","_callee","_callee$","_context","Error","awrap","rooms","_id","type","message","t0","finish","stop","Promise","createElement","onCancel"],"mappings":"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"}