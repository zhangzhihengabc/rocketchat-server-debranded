)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/hooks/actions/useRoomConvertToTeam.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isRoomFederated } from '@rocket.chat/core-typings';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport GenericModal from '../../../../../../components/GenericModal';\nimport { useCanEditRoom } from '../useCanEditRoom';\n\nexport const useRoomConvertToTeam = (room: IRoom) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst canEdit = useCanEditRoom(room);\n\tconst hasPermissionToConvertRoomToTeam = usePermission('create-team');\n\tconst canConvertRoomToTeam = isRoomFederated(room) ? false : hasPermissionToConvertRoomToTeam;\n\tconst allowConvertToTeam = !room.teamId && !room.prid && canConvertRoomToTeam && canEdit;\n\n\tconst convertRoomToTeam = useEndpoint('POST', room.t === 'c' ? '/v1/channels.convertToTeam' : '/v1/groups.convertToTeam');\n\n\tconst handleConvertToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait convertRoomToTeam(room.t === 'c' ? { channelId: room._id } : { roomId: room._id });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_converted') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Confirmation')}\n\t\t\t\tvariant='warning'\n\t\t\t\tonClose={() => setModal(null)}\n\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmText={t('Convert')}\n\t\t\t>\n\t\t\t\t{t('Converting_channel_to_a_team')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn allowConvertToTeam ? handleConvertToTeam : null;\n};\n",null],"names":["module","link","default","_regeneratorRuntime","export","useRoomConvertToTeam","isRoomFederated","useMutableCallback","useSetModal","useToastMessageDispatch","useTranslation","useEndpoint","usePermission","v","React","GenericModal","useCanEditRoom","room","t","setModal","dispatchToastMessage","canEdit","hasPermissionToConvertRoomToTeam","canConvertRoomToTeam","allowConvertToTeam","teamId","prid","convertRoomToTeam","handleConvertToTeam","onConfirm","async","_context2","prev","next","_callee","_callee$","_context","awrap","channelId","_id","roomId","type","message","t0","finish","stop","Promise","createElement","title","variant","onClose","onCancel","confirmText"],"mappings":"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"}