)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/EditRoomInfo/useEditRoomInitialValues.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoomWithRetentionPolicy } from '@rocket.chat/core-typings';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\n\nconst getPolicyRoomType = (roomType: IRoomWithRetentionPolicy['t']) => {\n\tswitch (roomType) {\n\t\tcase 'c':\n\t\t\treturn 'Channels';\n\t\tcase 'p':\n\t\t\treturn 'Groups';\n\t\tcase 'd':\n\t\t\treturn 'DMs';\n\t}\n};\n\nexport const useEditRoomInitialValues = (room: IRoomWithRetentionPolicy) => {\n\tconst { t, ro, archived, topic, description, announcement, joinCodeRequired, sysMes, encrypted, retention, reactWhenReadOnly } = room;\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst maxAgeDefault = useSetting<number>(`RetentionPolicy_MaxAge_${getPolicyRoomType(room.t)}`) || 30;\n\tconst retentionEnabledDefault = useSetting<boolean>(`RetentionPolicy_AppliesTo${getPolicyRoomType(room.t)}`);\n\tconst excludePinnedDefault = useSetting('RetentionPolicy_DoNotPrunePinned');\n\tconst filesOnlyDefault = useSetting('RetentionPolicy_FilesOnly');\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\troomName: t === 'd' && room.usernames ? room.usernames.join(' x ') : roomCoordinator.getRoomName(t, room),\n\t\t\troomType: t,\n\t\t\treadOnly: !!ro,\n\t\t\treactWhenReadOnly,\n\t\t\tarchived: !!archived,\n\t\t\troomTopic: topic ?? '',\n\t\t\troomDescription: description ?? '',\n\t\t\troomAnnouncement: announcement ?? '',\n\t\t\troomAvatar: undefined,\n\t\t\tjoinCode: '',\n\t\t\tjoinCodeRequired: !!joinCodeRequired,\n\t\t\tsystemMessages: Array.isArray(sysMes) ? sysMes : [],\n\t\t\thideSysMes: Array.isArray(sysMes) ? !!sysMes?.length : !!sysMes,\n\t\t\tencrypted,\n\t\t\t...(retentionPolicyEnabled && {\n\t\t\t\tretentionEnabled: retention?.enabled ?? retentionEnabledDefault,\n\t\t\t\tretentionOverrideGlobal: !!retention?.overrideGlobal,\n\t\t\t\tretentionMaxAge: Math.min(retention?.maxAge, maxAgeDefault) || maxAgeDefault,\n\t\t\t\tretentionExcludePinned: retention?.excludePinned ?? excludePinnedDefault,\n\t\t\t\tretentionFilesOnly: retention?.filesOnly ?? filesOnlyDefault,\n\t\t\t}),\n\t\t}),\n\t\t[\n\t\t\tannouncement,\n\t\t\tarchived,\n\t\t\tdescription,\n\t\t\texcludePinnedDefault,\n\t\t\tfilesOnlyDefault,\n\t\t\tjoinCodeRequired,\n\t\t\tmaxAgeDefault,\n\t\t\tretention,\n\t\t\tretentionEnabledDefault,\n\t\t\tretentionPolicyEnabled,\n\t\t\tro,\n\t\t\troom,\n\t\t\tsysMes,\n\t\t\tt,\n\t\t\ttopic,\n\t\t\tencrypted,\n\t\t\treactWhenReadOnly,\n\t\t],\n\t);\n};\n",null],"names":["module","link","default","_objectSpread","export","useEditRoomInitialValues","useSetting","useMemo","roomCoordinator","getPolicyRoomType","roomType","room","t","ro","archived","topic","description","announcement","joinCodeRequired","sysMes","encrypted","retention","reactWhenReadOnly","retentionPolicyEnabled","maxAgeDefault","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","_retention$enabled","_retention$excludePin","_retention$filesOnly","roomName","usernames","join","getRoomName","readOnly","roomTopic","roomDescription","roomAnnouncement","roomAvatar","undefined","joinCode","systemMessages","Array","isArray","hideSysMes","length","retentionEnabled","enabled","retentionOverrideGlobal","overrideGlobal","retentionMaxAge","Math","min","maxAge","retentionExcludePinned","excludePinned","retentionFilesOnly","filesOnly"],"mappings":"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"}