)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/MessageSearchTab/components/MessageSearchForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessageSearchProvider } from '@rocket.chat/core-typings';\nimport { Box, Field, FieldLabel, FieldRow, FieldHint, Icon, TextInput, ToggleSwitch } from '@rocket.chat/fuselage';\nimport { useDebouncedCallback, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useEffect } from 'react';\nimport { useForm, useWatch } from 'react-hook-form';\n\ntype MessageSearchFormProps = {\n\tprovider: IMessageSearchProvider;\n\tonSearch: (params: { searchText: string; globalSearch: boolean }) => void;\n};\n\nconst MessageSearchForm = ({ provider, onSearch }: MessageSearchFormProps) => {\n\tconst { handleSubmit, register, setFocus, control } = useForm({\n\t\tdefaultValues: {\n\t\t\tsearchText: '',\n\t\t\tglobalSearch: false,\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetFocus('searchText');\n\t}, [setFocus]);\n\n\tconst debouncedOnSearch = useDebouncedCallback(useMutableCallback(onSearch), 300);\n\n\tconst submitHandler = handleSubmit(({ searchText, globalSearch }) => {\n\t\tdebouncedOnSearch.cancel();\n\t\tonSearch({ searchText, globalSearch });\n\t});\n\n\tconst searchText = useWatch({ control, name: 'searchText' });\n\tconst globalSearch = useWatch({ control, name: 'globalSearch' });\n\n\tuseEffect(() => {\n\t\tdebouncedOnSearch({ searchText, globalSearch });\n\t}, [debouncedOnSearch, searchText, globalSearch]);\n\n\tconst globalSearchEnabled = provider.settings.GlobalSearchEnabled;\n\tconst globalSearchToggleId = useUniqueId();\n\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<Box\n\t\t\tdisplay='flex'\n\t\t\tflexGrow={0}\n\t\t\tflexShrink={1}\n\t\t\tflexDirection='column'\n\t\t\tp={24}\n\t\t\tborderBlockEndWidth={2}\n\t\t\tborderBlockEndStyle='solid'\n\t\t\tborderBlockEndColor='extra-light'\n\t\t>\n\t\t\t<Box is='form' onSubmit={submitHandler}>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\taria-label={t('Search_Messages')}\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t{...register('searchText')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{provider.description && <FieldHint dangerouslySetInnerHTML={{ __html: t(provider.description as TranslationKey) }} />}\n\t\t\t\t</Field>\n\t\t\t\t{globalSearchEnabled && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<ToggleSwitch id={globalSearchToggleId} {...register('globalSearch')} />\n\t\t\t\t\t\t\t<FieldLabel htmlFor={globalSearchToggleId}>{t('Global_Search')}</FieldLabel>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default MessageSearchForm;\n",null],"names":["_extends","Box","Field","FieldLabel","FieldRow","FieldHint","Icon","TextInput","ToggleSwitch","useDebouncedCallback","useMutableCallback","useUniqueId","useTranslation","React","useEffect","useForm","useWatch","module","link","default","v","exportDefault","_ref","provider","onSearch","_useForm","defaultValues","searchText","globalSearch","handleSubmit","register","setFocus","control","debouncedOnSearch","submitHandler","_ref2","cancel","name","globalSearchEnabled","settings","GlobalSearchEnabled","globalSearchToggleId","t","createElement","display","flexGrow","flexShrink","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","is","onSubmit","addon","size","placeholder","autoComplete","description","dangerouslySetInnerHTML","__html","id","htmlFor"],"mappings":"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"}