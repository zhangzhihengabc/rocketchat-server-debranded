)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Discussions/DiscussionsList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IDiscussionMessage, IUser } from '@rocket.chat/core-typings';\nimport { Box, Icon, TextInput, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { RefObject } from 'react';\nimport React, { useCallback } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarIcon,\n\tContextualbarContent,\n\tContextualbarClose,\n\tContextualbarEmptyContent,\n} from '../../../../components/Contextualbar';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport { goToRoomById } from '../../../../lib/utils/goToRoomById';\nimport DiscussionsListRow from './DiscussionsListRow';\n\ntype DiscussionsListProps = {\n\ttotal: number;\n\tdiscussions: Array<IDiscussionMessage>;\n\tloadMoreItems: (start: number, end: number) => void;\n\tloading: boolean;\n\tonClose: () => void;\n\terror: unknown;\n\tuserId: IUser['_id'];\n\ttext: string;\n\tonChangeFilter: (e: unknown) => void;\n};\n\nfunction DiscussionsList({\n\ttotal = 10,\n\tdiscussions = [],\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId,\n\ttext,\n\tonChangeFilter,\n}: DiscussionsListProps) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus(true);\n\tconst onClick = useCallback((e) => {\n\t\tconst { drid } = e.currentTarget.dataset;\n\t\tgoToRoomById(drid);\n\t}, []);\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='discussion' />\n\t\t\t\t<Box flexShrink={1} flexGrow={1} withTruncatedText mi={8}>\n\t\t\t\t\t{t('Discussions')}\n\t\t\t\t</Box>\n\t\t\t\t<ContextualbarClose onClick={onClose} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp={24}\n\t\t\t\t\tborderBlockEndWidth='default'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='extra-light'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\tonChange={onChangeFilter}\n\t\t\t\t\t\tref={inputRef as RefObject<HTMLInputElement>}\n\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error instanceof Error && (\n\t\t\t\t\t<Callout mi={24} type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && <ContextualbarEmptyContent title={t('No_Discussions_found')} />}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && discussions.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? () => undefined : (start) => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={discussions}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper }}\n\t\t\t\t\t\t\titemContent={(_, data) => (\n\t\t\t\t\t\t\t\t<DiscussionsListRow discussion={data} showRealNames={showRealNames} userId={userId} onClick={onClick} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</ContextualbarContent>\n\t\t</>\n\t);\n}\n\nexport default DiscussionsList;\n",null],"names":["Box","Icon","TextInput","Callout","Throbber","useResizeObserver","useAutoFocus","useSetting","useTranslation","React","useCallback","Virtuoso","ContextualbarHeader","ContextualbarIcon","ContextualbarContent","ContextualbarClose","ContextualbarEmptyContent","ScrollableContentWrapper","goToRoomById","DiscussionsListRow","module","v","exportDefault","_ref","_ref$total","total","_ref$discussions","discussions","loadMoreItems","loading","onClose","error","userId","text","onChangeFilter","showRealNames","Boolean","t","inputRef","onClick","e","currentTarget","dataset","drid","_useResizeObserver","debounceDelay","ref","_useResizeObserver$co","contentBoxSize","_useResizeObserver$co2","inlineSize","_useResizeObserver$co3","blockSize","createElement","Fragment","name","flexShrink","flexGrow","withTruncatedText","mi","paddingInline","display","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","placeholder","value","onChange","addon","size","pi","pb","Error","type","toString","title","overflow","length","style","height","width","totalCount","endReached","start","Math","min","overscan","data","components","Scroller","itemContent","_","discussion"],"mappings":"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"}