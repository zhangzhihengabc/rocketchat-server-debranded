)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/hooks/useGetMessageByID.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\nimport { Messages } from '../../../../../../app/models/client';\nimport { onClientMessageReceived } from '../../../../../lib/onClientMessageReceived';\nimport { mapMessageFromApi } from '../../../../../lib/utils/mapMessageFromApi';\n\nexport const useGetMessageByID = () => {\n\tconst getMessage = useEndpoint('GET', '/v1/chat.getMessage');\n\n\treturn useCallback(\n\t\tasync (mid: IMessage['_id']) => {\n\t\t\ttry {\n\t\t\t\tconst { message: rawMessage } = await getMessage({ msgId: mid });\n\t\t\t\tconst mappedMessage = mapMessageFromApi(rawMessage);\n\t\t\t\tconst message = (await onClientMessageReceived(mappedMessage)) || mappedMessage;\n\t\t\t\tMessages.upsert({ _id: message._id }, { $set: message as any });\n\t\t\t\treturn message;\n\t\t\t} catch (error) {\n\t\t\t\tif (typeof error === 'object' && error !== null && 'success' in error) {\n\t\t\t\t\tthrow new Error('Message not found');\n\t\t\t\t}\n\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[getMessage],\n\t);\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_typeof","export","useGetMessageByID","useEndpoint","useCallback","Messages","onClientMessageReceived","mapMessageFromApi","getMessage","mid","mappedMessage","message","async","_context","prev","next","awrap","msgId","_await$getMessage","sent","t0","upsert","_id","$set","abrupt","t1","Error","stop","Promise"],"mappings":"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAvDJ,EAAOK,MAAE,CAAA,CAAAC,kBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAN,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAO,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,QAAAA,CAAAQ,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAS,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAU,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAW,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOhD,IAPPR,EAAuDC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAO1CL,EAAoB,WAChC,IAAMM,EAAaL,EAAY,MAAO,uBAEtC,OAAOC,EACN,SAAOK,CAAoB,EAAA,IAAAC,EAAAC,EAAA,OAAAZ,EAAAa,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAhB,EAAAiB,KAAA,CAEaR,EAAW,CAAES,MAAOR,CAAG,GAAG,MAAA,EACb,OAA7CC,EAAgBH,EADKW,AAAqCL,EAAAM,IAAA,CAAxDR,OAAO,EACoCE,EAAAE,IAAA,CAAA,EAAAhB,EAAAiB,KAAA,CAC5BV,EAAwBI,GAAc,MAAA,EAAA,GAAAG,EAAAO,EAAA,CAAAP,EAAAM,IAAA,CAAAN,EAAAO,EAAA,CAAA,CAAAP,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAAF,EAAAO,EAAA,CAAKV,CAAa,MAAA,GACf,OAD1DC,EAAOE,EAAAO,EAAA,CACbf,EAASgB,MAAM,CAAC,CAAEC,IAAKX,EAAQW,GAAAA,AAAG,EAAI,CAAEC,KAAMZ,CAAc,GAAIE,EAAAW,MAAA,CAAA,SACzDb,EAAO,MAAA,GAAA,GAAAE,EAAAC,IAAA,CAAA,GAAAD,EAAAY,EAAA,CAAAZ,EAAA,KAAA,CAAA,GAAA,CAEVb,CAAAA,AAAiB,WAAjBA,EAAAa,EAAAY,EAAA,GAA6BZ,AAAU,OAAVA,EAAAY,EAAA,EAAkB,YAASZ,EAAAY,EAAS,AAAT,EAAS,CAAAZ,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,MAC9D,AAAIW,MAAM,oBAAoB,MAAA,GAAA,MAAAb,EAAAY,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAZ,EAAAc,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAMvC,CAACpB,EAAW,CAEd"}