function module(n,e,t){t.link("@babel/runtime/regenerator",{default:function(n){u=n}},0),t.export({useThreadMainMessageQuery:function(){return k}}),t.link("@rocket.chat/ui-contexts",{useStream:function(n){i=n}},0),t.link("@tanstack/react-query",{useQueryClient:function(n){r=n},useQuery:function(n){o=n}},1),t.link("react",{useCallback:function(n){s=n},useEffect:function(n){c=n},useRef:function(n){a=n}},2),t.link("../../../../../../lib/utils/highOrderFunctions",{withDebouncing:function(n){l=n}},3),t.link("../../../../../lib/minimongo",{createFilterFromQuery:function(n){f=n}},4),t.link("../../../contexts/RoomContext",{useRoom:function(n){d=n}},5),t.link("./useGetMessageByID",{useGetMessageByID:function(n){m=n}},6);var u,i,r,o,s,c,a,l,f,d,m,g=function(n){var e,t={ts:n.ts};return n.excludePinned&&(t.pinned={$ne:!0}),n.ignoreDiscussion&&(t.drid={$exists:!1}),null!==(e=n.users)&&void 0!==e&&e.length&&(t["u.username"]={$in:n.users}),f(t)},v=function(){var n=i("room-messages"),e=i("notify-room");return s(function(t,u){var i=u.onMutate,r=u.onDelete,o=n(t.rid,function(n){t._id===n._id&&(null==i||i(n))}),s=e(t.rid+"/deleteMessage",function(n){t._id===n._id&&(null==r||r())}),c=e(t.rid+"/deleteMessageBulk",function(n){g(n)(t)&&(null==r||r())});return function(){o(),s(),c()}},[e,n])},k=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.onDelete,i=d(),s=m(),f=v(),g=r(),k=a();return c(function(){return function(){var n;null===(n=k.current)||void 0===n||n.call(k),k.current=void 0}},[n]),o(["rooms",i._id,"threads",n,"main-message"],function(e){var i,r,o;return u.async(function(c){for(;;)switch(c.prev=c.next){case 0:return i=e.queryKey,c.next=3,u.awrap(s(n));case 3:if(r=c.sent){c.next=6;break}throw Error("Invalid main message");case 6:return o=l({wait:1e4})(function(){g.invalidateQueries(i,{exact:!0})}),k.current=k.current||f(r,{onMutate:function(n){g.setQueryData(i,function(){return n}),o()},onDelete:function(){null==t||t(),g.invalidateQueries(i,{exact:!0})}}),c.abrupt("return",r);case 9:case"end":return c.stop()}},null,null,null,Promise)})}}
//# sourceMappingURL=/dynamic/client/views/room/contextualBar/Threads/hooks/0423313a8abd1cb2a020ad2a292e294cf750db0d.map
