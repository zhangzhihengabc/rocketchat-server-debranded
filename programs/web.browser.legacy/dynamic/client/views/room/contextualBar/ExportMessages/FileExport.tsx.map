)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/ExportMessages/FileExport.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Field, FieldLabel, FieldRow, Select, ButtonGroup, Button, FieldGroup, InputBox } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useMemo } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\nimport type { MailExportFormValues } from './ExportMessages';\nimport { useRoomExportMutation } from './useRoomExportMutation';\n\ntype FileExportProps = {\n\tformId: string;\n\trid: IRoom['_id'];\n\tonCancel: () => void;\n\texportOptions: SelectOption[];\n};\n\nconst FileExport = ({ formId, rid, exportOptions, onCancel }: FileExportProps) => {\n\tconst t = useTranslation();\n\tconst { control, handleSubmit } = useFormContext<MailExportFormValues>();\n\tconst roomExportMutation = useRoomExportMutation();\n\tconst formFocus = useAutoFocus<HTMLFormElement>();\n\n\tconst outputOptions = useMemo<SelectOption[]>(\n\t\t() => [\n\t\t\t['html', t('HTML')],\n\t\t\t['json', t('JSON')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst handleExport = ({ type, dateFrom, dateTo, format }: MailExportFormValues) => {\n\t\troomExportMutation.mutateAsync({\n\t\t\trid,\n\t\t\ttype,\n\t\t\tdateFrom,\n\t\t\tdateTo,\n\t\t\tformat,\n\t\t});\n\t};\n\n\tconst typeField = useUniqueId();\n\tconst dateFromField = useUniqueId();\n\tconst dateToField = useUniqueId();\n\tconst formatField = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={typeField}>{t('Method')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={typeField} {...field} placeholder={t('Type')} options={exportOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={dateFromField}>{t('Date_From')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='dateFrom'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <InputBox id={dateFromField} type='date' {...field} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={dateToField}>{t('Date_to')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller name='dateTo' control={control} render={({ field }) => <InputBox id={dateToField} {...field} type='date' />} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={formatField}>{t('Output_format')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='format'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select {...field} id={formatField} placeholder={t('Format')} options={outputOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit'>\n\t\t\t\t\t\t{t('Export')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default FileExport;\n",null],"names":["_extends","Field","FieldLabel","FieldRow","Select","ButtonGroup","Button","FieldGroup","InputBox","useAutoFocus","useUniqueId","useTranslation","React","useMemo","Controller","useFormContext","ContextualbarScrollableContent","ContextualbarFooter","useRoomExportMutation","module","link","default","v","exportDefault","_ref","formId","rid","exportOptions","onCancel","t","_useFormContext","control","handleSubmit","roomExportMutation","formFocus","outputOptions","typeField","dateFromField","dateToField","formatField","createElement","Fragment","ref","tabIndex","id","onSubmit","_ref2","type","dateFrom","dateTo","format","mutateAsync","htmlFor","name","render","_ref3","field","placeholder","options","_ref4","_ref5","_ref6","stretch","onClick","form","primary"],"mappings":"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"}