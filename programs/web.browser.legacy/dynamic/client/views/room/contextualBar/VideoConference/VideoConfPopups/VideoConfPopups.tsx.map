)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopups.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useCustomSound } from '@rocket.chat/ui-contexts';\nimport { VideoConfPopupBackdrop } from '@rocket.chat/ui-video-conf';\nimport type { ReactElement } from 'react';\nimport React, { useEffect, useMemo } from 'react';\n\nimport type { VideoConfPopupPayload } from '../../../../../contexts/VideoConfContext';\nimport { useVideoConfIsCalling, useVideoConfIsRinging, useVideoConfIncomingCalls } from '../../../../../contexts/VideoConfContext';\nimport VideoConfPopupPortal from '../../../../../portals/VideoConfPopupPortal';\nimport VideoConfPopup from './VideoConfPopup';\n\nconst VideoConfPopups = ({ children }: { children?: VideoConfPopupPayload }): ReactElement => {\n\tconst customSound = useCustomSound();\n\tconst incomingCalls = useVideoConfIncomingCalls();\n\tconst isRinging = useVideoConfIsRinging();\n\tconst isCalling = useVideoConfIsCalling();\n\n\tconst popups = useMemo(\n\t\t() =>\n\t\t\tincomingCalls\n\t\t\t\t.filter((incomingCall) => !incomingCall.dismissed)\n\t\t\t\t.map((incomingCall) => ({ id: incomingCall.callId, rid: incomingCall.rid, isReceiving: true })),\n\t\t[incomingCalls],\n\t);\n\n\tuseEffect(() => {\n\t\tif (isRinging) {\n\t\t\tcustomSound.play('ringtone', { loop: true });\n\t\t}\n\n\t\tif (isCalling) {\n\t\t\tcustomSound.play('dialtone', { loop: true });\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tcustomSound.stop('ringtone');\n\t\t\tcustomSound.stop('dialtone');\n\t\t};\n\t}, [customSound, isRinging, isCalling]);\n\n\treturn (\n\t\t<>\n\t\t\t{(children || popups?.length > 0) && (\n\t\t\t\t<VideoConfPopupPortal>\n\t\t\t\t\t<VideoConfPopupBackdrop>\n\t\t\t\t\t\t{(children ? [children, ...popups] : popups).map(({ id, rid, isReceiving }, index = 1) => (\n\t\t\t\t\t\t\t<VideoConfPopup key={id} id={id} rid={rid} isReceiving={isReceiving} isCalling={isCalling} position={index * 10} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</VideoConfPopupBackdrop>\n\t\t\t\t</VideoConfPopupPortal>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default VideoConfPopups;\n",null],"names":["_toConsumableArray","useCustomSound","VideoConfPopupBackdrop","React","useEffect","useMemo","useVideoConfIsCalling","useVideoConfIsRinging","useVideoConfIncomingCalls","VideoConfPopupPortal","VideoConfPopup","module","link","default","v","exportDefault","_ref","children","customSound","incomingCalls","isRinging","isCalling","popups","filter","incomingCall","dismissed","map","id","callId","rid","isReceiving","play","loop","stop","createElement","Fragment","length","concat","_ref2","index","arguments","undefined","key","position"],"mappings":"uBAUA,IAVAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnCC,EAAEC,IAAM,CAAA,2CAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAjDW,EAAgBC,IAAA,CAAM,2BAA2B,CAAAX,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAT,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAX,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAL,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,0BAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,8CAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,mBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA1DC,EAAOI,aAAE,CAUe,SAAAC,CAAA,EAAqE,IAAlEC,EAAQD,EAARC,QAAQ,CAC5BC,EAAcjB,IACdkB,EAAgBX,IAChBY,EAAYb,IACZc,EAAYf,IAEZgB,EAASjB,EACd,WAAA,OACCc,EACEI,MAAM,CAAC,SAACC,CAAY,EAAA,MAAK,CAACA,EAAaC,SAAS,GAChDC,GAAG,CAAC,SAACF,CAAY,EAAA,MAAM,CAAEG,GAAIH,EAAaI,MAAM,CAAEC,IAAKL,EAAaK,GAAG,CAAEC,YAAa,CAAA,CAAI,CAAE,EAAE,EACjG,CAACX,EAAc,EAkBhB,OAfAf,EAAU,WAST,OARIgB,GACHF,EAAYa,IAAI,CAAC,WAAY,CAAEC,KAAM,CAAA,CAAI,GAGtCX,GACHH,EAAYa,IAAI,CAAC,WAAY,CAAEC,KAAM,CAAA,CAAI,GAGnC,WACNd,EAAYe,IAAI,CAAC,YACjBf,EAAYe,IAAI,CAAC,WAClB,CACD,EAAG,CAACf,EAAaE,EAAWC,EAAU,EAGrClB,EAAA+B,aAAA,CAAA/B,EAAAgC,QAAA,CAAA,KACE,AAAClB,CAAAA,GAAY,AAAAK,CAAAA,MAAAA,EAAM,KAAA,EAANA,EAAQc,MAAM,AAANA,EAAS,CAAA,GAC9BjC,EAAA+B,aAAA,CAACzB,EAAoB,KACpBN,EAAA+B,aAAA,CAAChC,EAAsB,KACrB,AAACe,CAAAA,EAAQ,CAAIA,EAAQ,CAAAoB,MAAA,CAAArC,EAAKsB,IAAUA,CAAAA,EAAQI,GAAG,CAAC,SAAAY,CAAA,EAAA,IAAGX,EAAEW,EAAFX,EAAE,CAAEE,EAAGS,EAAHT,GAAG,CAAEC,EAAWQ,EAAXR,WAAW,CAAIS,EAAKC,UAAAJ,MAAA,CAAA,GAAAI,AAAAC,KAAAA,IAAAD,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,EAAC,OACpFrC,EAAA+B,aAAA,CAACxB,EAAc,CAACgC,IAAKf,EAAIA,GAAIA,EAAIE,IAAKA,EAAKC,YAAaA,EAAaT,UAAWA,EAAWsB,SAAUJ,AAAQ,GAARA,CAAW,EAAG,KAO1H"}