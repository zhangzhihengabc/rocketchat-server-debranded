)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfList/useVideoConfList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback, useState } from 'react';\n\nimport { useScrollableRecordList } from '../../../../../hooks/lists/useScrollableRecordList';\nimport { useComponentDidUpdate } from '../../../../../hooks/useComponentDidUpdate';\nimport { VideoConfRecordList } from './VideoConfRecordList';\n\nexport const useVideoConfList = (options: {\n\troomId: IRoom['_id'];\n}): {\n\tvideoConfList: VideoConfRecordList;\n\tinitialItemCount: number;\n\treload: () => void;\n\tloadMoreItems: (start: number, end: number) => void;\n} => {\n\tconst getVideoConfs = useEndpoint('GET', '/v1/video-conference.list');\n\tconst [videoConfList, setVideoConfList] = useState(() => new VideoConfRecordList());\n\tconst reload = useCallback(() => setVideoConfList(new VideoConfRecordList()), []);\n\n\tuseComponentDidUpdate(() => {\n\t\toptions && reload();\n\t}, [options, reload]);\n\n\tconst fetchData = useCallback(\n\t\tasync (_start, _end) => {\n\t\t\tconst { data, total } = await getVideoConfs({\n\t\t\t\troomId: options.roomId,\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\titems: data.map((videoConf: any) => ({\n\t\t\t\t\t...videoConf,\n\t\t\t\t\t_updatedAt: new Date(videoConf._updatedAt),\n\t\t\t\t\tcreatedAt: new Date(videoConf.createdAt),\n\t\t\t\t\tendedAt: videoConf.endedAt ? new Date(videoConf.endedAt) : undefined,\n\t\t\t\t})),\n\t\t\t\titemCount: total,\n\t\t\t};\n\t\t},\n\t\t[getVideoConfs, options],\n\t);\n\n\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(videoConfList, fetchData);\n\n\treturn {\n\t\treload,\n\t\tvideoConfList,\n\t\tloadMoreItems,\n\t\tinitialItemCount,\n\t};\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","_slicedToArray","export","useVideoConfList","useEndpoint","useCallback","useState","useScrollableRecordList","useComponentDidUpdate","VideoConfRecordList","options","getVideoConfs","_useState2","videoConfList","setVideoConfList","reload","_useScrollableRecordL","_start","_end","_await$getVideoConfs","data","total","async","_context","prev","next","awrap","roomId","sent","abrupt","items","map","videoConf","_updatedAt","Date","createdAt","endedAt","undefined","itemCount","stop","Promise","loadMoreItems","initialItemCount"],"mappings":"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAC,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAE,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,SAAAA,CAAAA,EAAAG,EAAAA,CAAA,CAAA,EAAA,GAAvDL,EAAOM,MAAE,CAAA,CAAAC,iBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAP,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAQ,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,QAAAA,CAAAS,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,qDAAAA,CAAAW,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAX,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAY,sBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAa,oBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOhD,IAPPV,EAAuDC,EAAAC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO1CN,EAAmB,SAACO,CAEhC,EAMA,IAAMC,EAAgBP,EAAY,MAAO,6BAC0CQ,EAAAX,EAAzCK,EAAS,WAAA,OAAM,IAAIG,CAAqB,GAAC,GAA5EI,EAAaD,CAAA,CAAA,EAAA,CAAEE,EAAgBF,CAAA,CAAA,EAAA,CAChCG,EAASV,EAAY,WAAA,OAAMS,EAAiB,IAAIL,EAAsB,EAAE,EAAE,EAEhFD,EAAsB,WACrBE,GAAWK,GACZ,EAAG,CAACL,EAASK,EAAO,EAqBpB,IAAAC,EAA4CT,EAAwBM,EAnBlDR,EACjB,SAAOY,CAAM,CAAEC,CAAI,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAtB,EAAAuB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA1B,EAAA2B,KAAA,CACYf,EAAc,CAC3CgB,OAAQjB,EAAQiB,MAAAA,GACf,MAAA,EAFiB,OAAXP,EAAID,AAEVA,CAAAA,EAAAI,EAAAK,IAAA,EAFMR,IAAI,CAAEC,EAAKF,EAALE,KAAK,CAAAE,EAAAM,MAAA,CAAA,SAIZ,CACNC,MAAOV,EAAKW,GAAG,CAAC,SAACC,CAAc,EAAA,OAAAhC,EAAAA,EAAA,CAAA,EAC3BgC,GAAS,CAAA,EAAA,CACZC,WAAY,IAAIC,KAAKF,EAAUC,UAAU,EACzCE,UAAW,IAAID,KAAKF,EAAUG,SAAS,EACvCC,QAASJ,EAAUI,OAAO,CAAG,IAAIF,KAAKF,EAAUI,OAAO,EAAIC,KAAAA,CAAS,EAAA,GAErEC,UAAWjB,GACX,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAgB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEF,CAAC7B,EAAeD,EAAQ,GAGjB+B,EAAazB,EAAbyB,aAAa,CAAEC,EAAgB1B,EAAhB0B,gBAAgB,CAEvC,MAAO,CACN3B,OAAAA,EACAF,cAAAA,EACA4B,cAAAA,EACAC,iBAAAA,EAEF"}