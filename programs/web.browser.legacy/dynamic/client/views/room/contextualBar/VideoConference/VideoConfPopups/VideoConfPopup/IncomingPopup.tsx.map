)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/IncomingPopup.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { Skeleton } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport {\n\tVideoConfPopup,\n\tVideoConfPopupContent,\n\tVideoConfPopupControllers,\n\tVideoConfController,\n\tuseVideoConfControllers,\n\tVideoConfButton,\n\tVideoConfPopupFooter,\n\tVideoConfPopupFooterButtons,\n\tVideoConfPopupTitle,\n\tVideoConfPopupHeader,\n} from '@rocket.chat/ui-video-conf';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useVideoConfSetPreferences } from '../../../../../../contexts/VideoConfContext';\nimport { AsyncStatePhase } from '../../../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../../../hooks/useEndpointData';\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\n\ntype IncomingPopupProps = {\n\tid: string;\n\troom: IRoom;\n\tposition: number;\n\tonClose: (id: string) => void;\n\tonMute: (id: string) => void;\n\tonConfirm: () => void;\n};\n\nconst IncomingPopup = ({ id, room, position, onClose, onMute, onConfirm }: IncomingPopupProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers();\n\tconst setPreferences = useVideoConfSetPreferences();\n\n\tconst params = useMemo(() => ({ callId: id }), [id]);\n\tconst { phase, value } = useEndpointData('/v1/video-conference.info', { params });\n\tconst showMic = Boolean(value?.capabilities?.mic);\n\tconst showCam = Boolean(value?.capabilities?.cam);\n\n\tconst handleJoinCall = useMutableCallback(() => {\n\t\tsetPreferences(controllersConfig);\n\t\tonConfirm();\n\t});\n\n\treturn (\n\t\t<VideoConfPopup position={position}>\n\t\t\t<VideoConfPopupHeader>\n\t\t\t\t<VideoConfPopupTitle text={t('Incoming_call_from')} />\n\t\t\t\t{phase === AsyncStatePhase.LOADING && <Skeleton />}\n\t\t\t\t{phase === AsyncStatePhase.RESOLVED && (showMic || showCam) && (\n\t\t\t\t\t<VideoConfPopupControllers>\n\t\t\t\t\t\t{showCam && (\n\t\t\t\t\t\t\t<VideoConfController\n\t\t\t\t\t\t\t\tactive={controllersConfig.cam}\n\t\t\t\t\t\t\t\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\n\t\t\t\t\t\t\t\ticon={controllersConfig.cam ? 'video' : 'video-off'}\n\t\t\t\t\t\t\t\tonClick={handleToggleCam}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showMic && (\n\t\t\t\t\t\t\t<VideoConfController\n\t\t\t\t\t\t\t\tactive={controllersConfig.mic}\n\t\t\t\t\t\t\t\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\n\t\t\t\t\t\t\t\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\n\t\t\t\t\t\t\t\tonClick={handleToggleMic}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</VideoConfPopupControllers>\n\t\t\t\t)}\n\t\t\t</VideoConfPopupHeader>\n\t\t\t<VideoConfPopupContent>\n\t\t\t\t<VideoConfPopupRoomInfo room={room} />\n\t\t\t</VideoConfPopupContent>\n\t\t\t<VideoConfPopupFooter>\n\t\t\t\t<VideoConfPopupFooterButtons>\n\t\t\t\t\t<VideoConfButton primary onClick={handleJoinCall}>\n\t\t\t\t\t\t{t('Accept')}\n\t\t\t\t\t</VideoConfButton>\n\t\t\t\t\t{onClose && (\n\t\t\t\t\t\t<VideoConfButton danger secondary onClick={(): void => onClose(id)}>\n\t\t\t\t\t\t\t{t('Decline')}\n\t\t\t\t\t\t</VideoConfButton>\n\t\t\t\t\t)}\n\t\t\t\t\t<VideoConfController small={false} secondary title={t('Mute_and_dismiss')} icon='cross' onClick={(): void => onMute(id)} />\n\t\t\t\t</VideoConfPopupFooterButtons>\n\t\t\t</VideoConfPopupFooter>\n\t\t</VideoConfPopup>\n\t);\n};\n\nexport default IncomingPopup;\n",null],"names":["Skeleton","useMutableCallback","useTranslation","VideoConfPopup","VideoConfPopupContent","VideoConfPopupControllers","VideoConfController","useVideoConfControllers","VideoConfButton","VideoConfPopupFooter","VideoConfPopupFooterButtons","VideoConfPopupTitle","VideoConfPopupHeader","React","useMemo","useVideoConfSetPreferences","AsyncStatePhase","useEndpointData","VideoConfPopupRoomInfo","module","link","v","exportDefault","_ref","_value$capabilities","_value$capabilities2","id","room","position","onClose","onMute","onConfirm","t","_useVideoConfControll","controllersConfig","handleToggleMic","handleToggleCam","setPreferences","_useEndpointData","params","callId","phase","value","showMic","Boolean","capabilities","mic","showCam","cam","handleJoinCall","createElement","text","LOADING","RESOLVED","active","title","icon","onClick","primary","danger","secondary","small"],"mappings":"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"}