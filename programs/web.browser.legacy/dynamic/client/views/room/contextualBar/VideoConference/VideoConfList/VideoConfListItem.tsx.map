)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfList/VideoConfListItem.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IGroupVideoConference } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Button, Message, Box, Avatar, Palette } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport UserAvatar from '../../../../../components/avatar/UserAvatar';\nimport { useVideoConfJoinCall } from '../../../../../contexts/VideoConfContext';\nimport { useTimeAgo } from '../../../../../hooks/useTimeAgo';\nimport { VIDEOCONF_STACK_MAX_USERS } from '../../../../../lib/constants';\n\nconst VideoConfListItem = ({\n\tvideoConfData,\n\tclassName = [],\n\treload,\n\t...props\n}: {\n\tvideoConfData: IGroupVideoConference;\n\tclassName?: string[];\n\treload: () => void;\n}): ReactElement => {\n\tconst t = useTranslation();\n\tconst formatDate = useTimeAgo();\n\tconst joinCall = useVideoConfJoinCall();\n\tconst showRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst {\n\t\t_id: callId,\n\t\tcreatedBy: { name, username, _id },\n\t\tusers,\n\t\tcreatedAt,\n\t\tendedAt,\n\t} = videoConfData;\n\n\tconst joinedUsers = users.filter((user) => user._id !== _id);\n\n\tconst hovered = css`\n\t\t&:hover,\n\t\t&:focus {\n\t\t\tbackground: ${Palette.surface['surface-tint']};\n\t\t\t.rcx-message {\n\t\t\t\tbackground: ${Palette.surface['surface-tint']};\n\t\t\t}\n\t\t}\n\t`;\n\n\tconst handleJoinConference = useMutableCallback((): void => {\n\t\tjoinCall(callId);\n\t\treturn reload();\n\t});\n\n\treturn (\n\t\t<Box\n\t\t\tcolor='default'\n\t\t\tborderBlockEndWidth={2}\n\t\t\tborderBlockEndColor='stroke-extra-light'\n\t\t\tborderBlockEndStyle='solid'\n\t\t\tclassName={[...className, hovered].filter(Boolean)}\n\t\t\tpb={8}\n\t\t>\n\t\t\t<Message {...props}>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t{username && <UserAvatar username={username} className='rcx-message__avatar' size='x36' />}\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<Message.Name title={username}>{showRealName ? name : username}</Message.Name>\n\t\t\t\t\t\t<Message.Timestamp>{formatDate(createdAt)}</Message.Timestamp>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body clamp={2} />\n\t\t\t\t\t<Box display='flex'></Box>\n\t\t\t\t\t<Message.Block flexDirection='row' alignItems='center'>\n\t\t\t\t\t\t<Button disabled={Boolean(endedAt)} small alignItems='center' display='flex' onClick={handleJoinConference}>\n\t\t\t\t\t\t\t{endedAt ? t('Call_ended') : t('Join_call')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{joinedUsers.length > 0 && (\n\t\t\t\t\t\t\t<Box mis={8} fontScale='c1' display='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t<Avatar.Stack>\n\t\t\t\t\t\t\t\t\t{joinedUsers.map(\n\t\t\t\t\t\t\t\t\t\t(user, index) =>\n\t\t\t\t\t\t\t\t\t\t\tuser.username &&\n\t\t\t\t\t\t\t\t\t\t\tindex + 1 <= VIDEOCONF_STACK_MAX_USERS && (\n\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip={user.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={user.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\tusername={user.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\tetag={user.avatarETag}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='x28'\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Avatar.Stack>\n\t\t\t\t\t\t\t\t<Box mis={4}>\n\t\t\t\t\t\t\t\t\t{joinedUsers.length > VIDEOCONF_STACK_MAX_USERS\n\t\t\t\t\t\t\t\t\t\t? t('__usersCount__member_joined', { usersCount: joinedUsers.length - VIDEOCONF_STACK_MAX_USERS })\n\t\t\t\t\t\t\t\t\t\t: t('joined')}\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{joinedUsers.length === 0 && !endedAt && (\n\t\t\t\t\t\t\t<Box mis={8} fontScale='c1'>\n\t\t\t\t\t\t\t\t{t('Be_the_first_to_join')}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Message.Block>\n\t\t\t\t</Message.Container>\n\t\t\t</Message>\n\t\t</Box>\n\t);\n};\n\nexport default VideoConfListItem;\n",null],"names":["_toConsumableArray","_taggedTemplateLiteralLoose","_objectWithoutProperties","css","Button","Message","Box","Avatar","Palette","useMutableCallback","useTranslation","useSetting","React","UserAvatar","useVideoConfJoinCall","useTimeAgo","VIDEOCONF_STACK_MAX_USERS","module","default","link","v","exportDefault","_ref","videoConfData","_ref$className","className","reload","props","_excluded","t","formatDate","joinCall","showRealName","Boolean","callId","_id","_videoConfData$create","createdBy","name","username","users","createdAt","endedAt","joinedUsers","filter","user","hovered","_templateObject","surface","handleJoinConference","createElement","color","borderBlockEndWidth","borderBlockEndColor","borderBlockEndStyle","concat","pb","LeftContainer","size","Container","Header","Name","title","Timestamp","Body","clamp","display","Block","flexDirection","alignItems","disabled","small","onClick","length","mis","fontScale","Stack","map","index","key","etag","avatarETag","usersCount"],"mappings":"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"}