function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},1),t.export({initialValues:function(){return b}}),t.link("@rocket.chat/core-typings",{isDirectMessageRoom:function(e){s=e}},0),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){i=e}},1),t.link("@rocket.chat/ui-contexts",{useSetModal:function(e){a=e},useToastMessageDispatch:function(e){u=e},useEndpoint:function(e){c=e},useTranslation:function(e){l=e}},2),t.link("moment",{default:function(e){f=e}},3),t.link("react",{default:function(e){m=e},useCallback:function(e){d=e},useMemo:function(e){p=e},useState:function(e){_=e}},4),t.link("react-hook-form",{useForm:function(e){g=e},FormProvider:function(e){h=e}},5),t.link("../../../../components/GenericModal",{default:function(e){k=e}},6),t.link("../../contexts/RoomContext",{useRoom:function(e){x=e}},7),t.link("../../contexts/RoomToolboxContext",{useRoomToolbox:function(e){v=e}},8),t.link("./PruneMessages",{default:function(e){T=e}},9);var r,o,s,i,a,u,c,l,f,m,d,p,_,g,h,k,x,v,T,P=function(){var e=new Date().getTimezoneOffset(),n=Math.abs(e);return(e<0?"+":"-")+("00"+Math.floor(n/60)).slice(-2)+":"+("00"+n%60).slice(-2)},b={newer:{date:"",time:""},older:{date:"",time:""},users:[],inclusive:!1,pinned:!1,discussion:!1,threads:!1,attached:!1};t.exportDefault(function(){var e=l(),n=x(),t=a(),w=v().closeTab,C=d(function(){return t(null)},[t]),M=u(),y=c("POST","/v1/rooms.cleanHistory"),L=o(_(0),2),D=L[0],O=L[1],S=g({defaultValues:b}),N=S.watch(),E=N.newer,R=E.date,W=E.time,I=N.older,j=I.date,F=I.time,V=N.users,z=N.inclusive,A=N.pinned,G=N.discussion,H=N.threads,Y=N.attached,q=p(function(){return new Date((R||"0001-01-01")+"T"+(W||"00:00")+":00"+P())},[R,W]),B=p(function(){return new Date((j||"9999-12-31")+"T"+(F||"23:59")+":59"+P())},[j,F]),J=i(function(){return t(m.createElement(k,{variant:"danger",onClose:C,onCancel:C,onConfirm:function(){var t,o;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=2e3,s.prev=1,D!==t){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,r.awrap(y({roomId:n._id,latest:B.toISOString(),oldest:q.toISOString(),inclusive:z,limit:t,excludePinned:A,filesOnly:Y,ignoreDiscussion:G,ignoreThreads:H,users:V}));case 6:if(O(o=s.sent.count),!(o<1)){s.next=11;break}throw Error(e("No_messages_found_to_prune"));case 11:M({type:"success",message:e("__count__message_pruned",{count:o})}),S.reset(),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(1),M({type:"error",message:s.t0});case 18:return s.prev=18,C(),s.finish(18);case 21:case"end":return s.stop()}},null,null,[[1,15,18,21]],Promise)},confirmText:e("Yes_prune_them")},e("Prune_Modal")))}),K=p(function(){var t,r=A?" "+e("except_pinned",{}):"",o=V.length?" "+e("if_they_are_from",{postProcess:"sprintf",sprintf:[V.map(function(e){return e}).join(", ")]}):"",i=e(Y?"files":"messages",{});return R&&j?e("Prune_Warning_between",{postProcess:"sprintf",sprintf:[i,name,f(q).format("L LT"),f(B).format("L LT")]})+r+o:R?e("Prune_Warning_after",{postProcess:"sprintf",sprintf:[i,name,f(q).format("L LT")]})+r+o:j?e("Prune_Warning_before",{postProcess:"sprintf",sprintf:[i,name,f(B).format("L LT")]})+r+o:e("Prune_Warning_all",{postProcess:"sprintf",sprintf:[i,n&&(s(n)&&(null===(t=n.usernames)||void 0===t?void 0:t.join(" x "))||n.fname||n.name)]})+r+o},[Y,q,R,j,A,n,e,B,V]),Q=p(function(){return q>B?e("Newer_than_may_not_exceed_Older_than",{postProcess:"sprintf",sprintf:[]}):isNaN(q.getTime())||isNaN(B.getTime())?e("error-invalid-date",{postProcess:"sprintf",sprintf:[]}):void 0},[q,e,B]);return m.createElement(h,S,m.createElement(T,{callOutText:K,validateText:Q,users:V,onClickClose:w,onClickPrune:J}))})}
//# sourceMappingURL=/dynamic/client/views/room/contextualBar/PruneMessages/e6e194b17f8b68a7570cdaca840963c6aa167b69.map
