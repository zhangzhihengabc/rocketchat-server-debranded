)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/modal/uikit/UiKitModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UiKit } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\nimport { MarkupInteractionContext } from '@rocket.chat/gazzodown';\nimport React from 'react';\nimport type { FormEvent } from 'react';\n\nimport { detectEmoji } from '../../../lib/utils/detectEmoji';\nimport { preventSyntheticEvent } from '../../../lib/utils/preventSyntheticEvent';\nimport { useModalContextValue } from '../../../uikit/hooks/useModalContextValue';\nimport { useUiKitActionManager } from '../../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../../uikit/hooks/useUiKitView';\nimport ModalBlock from './ModalBlock';\n\ntype UiKitModalProps = {\n\tkey: UiKit.ModalView['id']; // force re-mount when viewId changes\n\tinitialView: UiKit.ModalView;\n};\n\nconst UiKitModal = ({ initialView }: UiKitModalProps) => {\n\tconst actionManager = useUiKitActionManager();\n\tconst { view, errors, values, updateValues, state } = useUiKitView(initialView);\n\tconst contextValue = useModalContextValue({ view, values, updateValues });\n\n\tconst handleSubmit = useMutableCallback((e: FormEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tvoid actionManager\n\t\t\t.emitInteraction(view.appId, {\n\t\t\t\ttype: 'viewSubmit',\n\t\t\t\tpayload: {\n\t\t\t\t\tview: {\n\t\t\t\t\t\t...view,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tviewId: view.id,\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tactionManager.disposeView(view.id);\n\t\t\t});\n\t});\n\n\tconst handleCancel = useMutableCallback((e: FormEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tvoid actionManager\n\t\t\t.emitInteraction(view.appId, {\n\t\t\t\ttype: 'viewClosed',\n\t\t\t\tpayload: {\n\t\t\t\t\tviewId: view.id,\n\t\t\t\t\tview: {\n\t\t\t\t\t\t...view,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t},\n\t\t\t\t\tisCleared: false,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tactionManager.disposeView(view.id);\n\t\t\t});\n\t});\n\n\tconst handleClose = useMutableCallback(() => {\n\t\tvoid actionManager\n\t\t\t.emitInteraction(view.appId, {\n\t\t\t\ttype: 'viewClosed',\n\t\t\t\tpayload: {\n\t\t\t\t\tviewId: view.id,\n\t\t\t\t\tview: {\n\t\t\t\t\t\t...view,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t},\n\t\t\t\t\tisCleared: true,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tactionManager.disposeView(view.id);\n\t\t\t});\n\t});\n\n\treturn (\n\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t<MarkupInteractionContext.Provider\n\t\t\t\tvalue={{\n\t\t\t\t\tdetectEmoji,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ModalBlock view={view} errors={errors} appId={view.appId} onSubmit={handleSubmit} onCancel={handleCancel} onClose={handleClose} />\n\t\t\t</MarkupInteractionContext.Provider>\n\t\t</UiKitContext.Provider>\n\t);\n};\n\nexport default UiKitModal;\n",null],"names":["_objectSpread","useMutableCallback","UiKitContext","MarkupInteractionContext","React","detectEmoji","preventSyntheticEvent","useModalContextValue","useUiKitActionManager","useUiKitView","ModalBlock","module","default","link","v","exportDefault","_ref","initialView","actionManager","_useUiKitView","view","errors","values","updateValues","state","contextValue","handleSubmit","e","emitInteraction","appId","type","payload","viewId","id","finally","disposeView","handleCancel","isCleared","handleClose","createElement","Provider","value","onSubmit","onCancel","onClose"],"mappings":"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"}