function module(e,t,n){n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/inheritsLoose",{default:function(e){s=e}},1),n.export({EEVoipClient:function(){return l}}),n.link("@rocket.chat/core-typings",{Operation:function(e){i=e},UserState:function(e){a=e}},0),n.link("sip.js",{Inviter:function(e){o=e},UserAgent:function(e){c=e}},1),n.link("../../../../client/lib/voip/VoIPUser",{VoIPUser:function(e){u=e}},2);var r,s,i,a,o,c,u,l=function(e){function t(t,n){return e.call(this,t,n)||this}s(t,e);var n=t.prototype;return n.makeCallURI=function(e,t){var n,s,u,l,h=this;return r.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(t&&(this.mediaStreamRendered=t),!this.session){f.next=3;break}throw Error("Session exists");case 3:if(this.userAgent){f.next=5;break}throw Error("No User Agent.");case 5:if(!("REGISTERED"!==this.callState)){f.next=7;break}throw Error("Incorrect UA state");case 7:if(n=c.makeURI(e)){f.next=10;break}throw Error("Failed to create valid URI "+e);case 10:return s={sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:!1}}},u=new o(this.userAgent,n,s),this.session=u,this.setupSessionEventHandlers(u),this._opInProgress=i.OP_SEND_INVITE,f.next=18,r.awrap(u.invite({requestDelegate:{onReject:function(e){e.message.reasonPhrase&&h.emit("callfailed",e.message.reasonPhrase||"unknown")}}}));case 18:this._callState="OFFER_SENT",l={callerId:u.remoteIdentity.uri.user?u.remoteIdentity.uri.user:"",callerName:u.remoteIdentity.displayName,host:u.remoteIdentity.uri.host},this._callerInfo=l,this._userState=a.UAC,this.emit("stateChanged");case 23:case"end":return f.stop()}},null,this,null,Promise)},n.makeCall=function(e){var t,n;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:t=e.includes("+"),n=e.replace("+",""),this.makeCallURI("sip:"+(t?"*":"")+n+"@"+this.userConfig.sipRegistrarHostnameOrIP);case 3:case"end":return r.stop()}},null,this,null,Promise)},t.create=function(e,n){var s;return r.async(function(i){for(;;)switch(i.prev=i.next){case 0:return s=new t(e,n),i.next=3,r.awrap(s.init());case 3:return i.abrupt("return",s);case 4:case"end":return i.stop()}},null,null,null,Promise)},t}(u)}
//# sourceMappingURL=/dynamic/ee/client/lib/voip/676864f40671e4765c0856ea01a253f8386e11b6.map
