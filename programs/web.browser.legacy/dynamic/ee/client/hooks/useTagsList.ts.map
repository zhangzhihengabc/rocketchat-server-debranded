)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/hooks/useTagsList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback, useState } from 'react';\n\nimport { useScrollableRecordList } from '../../../client/hooks/lists/useScrollableRecordList';\nimport { useComponentDidUpdate } from '../../../client/hooks/useComponentDidUpdate';\nimport { RecordList } from '../../../client/lib/lists/RecordList';\n\ntype TagsListOptions = {\n\tfilter: string;\n\tdepartment?: string;\n\tviewAll?: boolean;\n};\n\ntype TagListItem = { _id: string; label: string; value: string; _updatedAt: Date };\n\ntype UseTagsListResult = {\n\titemsList: RecordList<TagListItem>;\n\tinitialItemCount: number;\n\treload: () => void;\n\tloadMoreItems: (start: number, end: number) => void;\n};\n\nexport const useTagsList = (options: TagsListOptions): UseTagsListResult => {\n\tconst { viewAll, department, filter } = options;\n\tconst [itemsList, setItemsList] = useState(() => new RecordList<TagListItem>());\n\tconst reload = useCallback(() => setItemsList(new RecordList<TagListItem>()), []);\n\n\tconst getTags = useEndpoint('GET', '/v1/livechat/tags');\n\n\tuseComponentDidUpdate(() => {\n\t\toptions && reload();\n\t}, [options, reload]);\n\n\tconst fetchData = useCallback(\n\t\tasync (start, end) => {\n\t\t\tconst { tags, total } = await getTags({\n\t\t\t\ttext: filter,\n\t\t\t\toffset: start,\n\t\t\t\tcount: end + start,\n\t\t\t\t...(viewAll && { viewAll: 'true' }),\n\t\t\t\t...(department && { department }),\n\t\t\t\tsort: JSON.stringify({ name: 1 }),\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\titems: tags.map<any>((tag: any) => ({\n\t\t\t\t\t_id: tag._id,\n\t\t\t\t\tlabel: tag.name,\n\t\t\t\t\tvalue: tag.name,\n\t\t\t\t})),\n\t\t\t\titemCount: total,\n\t\t\t};\n\t\t},\n\t\t[getTags, filter, viewAll, department],\n\t);\n\n\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\n\n\treturn {\n\t\treload,\n\t\titemsList,\n\t\tloadMoreItems,\n\t\tinitialItemCount,\n\t};\n};\n",null],"names":["module","link","default","_regeneratorRuntime","_objectSpread","_slicedToArray","export","useTagsList","useEndpoint","useCallback","useState","useScrollableRecordList","useComponentDidUpdate","RecordList","options","viewAll","department","filter","_useState2","itemsList","setItemsList","reload","getTags","_useScrollableRecordL","start","end","_await$getTags","tags","total","async","_context","prev","next","awrap","text","offset","count","sort","JSON","stringify","name","sent","abrupt","items","map","tag","_id","label","value","itemCount","stop","Promise","loadMoreItems","initialItemCount"],"mappings":"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"}