)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/hooks/useDeviceLogout.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSetModal, useTranslation, useToastMessageDispatch, useRoute, useRouteParameter } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport GenericModal from '../../../client/components/GenericModal';\nimport { useEndpointAction } from '../../../client/hooks/useEndpointAction';\n\nexport const useDeviceLogout = (\n\tsessionId: string,\n\tendpoint: '/v1/sessions/logout' | '/v1/sessions/logout.me',\n): ((onReload: () => void) => void) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst deviceManagementRouter = useRoute('device-management');\n\tconst routeId = useRouteParameter('id');\n\n\tconst logoutDevice = useEndpointAction('POST', endpoint);\n\n\tconst handleCloseContextualBar = useCallback((): void => deviceManagementRouter.push({}), [deviceManagementRouter]);\n\n\tconst isContextualBarOpen = routeId === sessionId;\n\n\tconst handleLogoutDeviceModal = useCallback(\n\t\t(onReload: () => void) => {\n\t\t\tconst closeModal = (): void => setModal(null);\n\n\t\t\tconst handleLogoutDevice = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait logoutDevice({ sessionId });\n\t\t\t\t\tonReload();\n\t\t\t\t\tisContextualBarOpen && handleCloseContextualBar();\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Device_Logged_Out') });\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<GenericModal\n\t\t\t\t\ttitle={t('Logout_Device')}\n\t\t\t\t\tvariant='danger'\n\t\t\t\t\tconfirmText={t('Logout_Device')}\n\t\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\t\tonConfirm={handleLogoutDevice}\n\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t>\n\t\t\t\t\t{t('Device_Logout_Text')}\n\t\t\t\t</GenericModal>,\n\t\t\t);\n\t\t},\n\t\t[setModal, t, logoutDevice, sessionId, isContextualBarOpen, handleCloseContextualBar, dispatchToastMessage],\n\t);\n\n\treturn handleLogoutDeviceModal;\n};\n",null],"names":["module","default","v","_regeneratorRuntime","export","useDeviceLogout","useSetModal","useTranslation","useToastMessageDispatch","useRoute","useRouteParameter","React","useCallback","GenericModal","useEndpointAction","sessionId","endpoint","t","setModal","dispatchToastMessage","deviceManagementRouter","routeId","logoutDevice","handleCloseContextualBar","push","isContextualBarOpen","onReload","closeModal","createElement","title","variant","confirmText","cancelText","onConfirm","async","_context","prev","next","awrap","type","message","t0","finish","stop","Promise","onCancel","onClose"],"mappings":"uBAAsBA,EAAAA,IAAAA,CAAc,6BAA2B,CAAAC,QAAU,SAAAC,CAAA,EAAAC,EAAyBD,CAAA,CAAA,EAAA,GAAlGF,EAAOI,MAAE,CAAA,CAAAC,gBAAa,WAAgB,OAAAA,CAAyB,CAAA,GAA8DL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAM,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAV,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAA,CAAA,EAAAC,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAZ,EAAAA,IAAAA,CAAAA,0CAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAW,EAAAA,CAAA,CAAA,EAAA,GAAAb,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAc,kBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMtH,IANPX,EAAuEG,EAAEC,EAAyBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAMhHT,EAAkB,SAC9BU,CAAiB,CACjBC,CAA0D,EAE1D,IAAMC,EAAIV,IACJW,EAAWZ,IACXa,EAAuBX,IACvBY,EAAyBX,EAAS,qBAClCY,EAAUX,EAAkB,MAE5BY,EAAeR,EAAkB,OAAQE,GAEzCO,EAA2BX,EAAY,WAAA,OAAYQ,EAAuBI,IAAI,CAAC,CAAA,EAAG,EAAE,CAACJ,EAAuB,EAE5GK,EAAsBJ,IAAYN,EAoCxC,OAlCgCH,EAC/B,SAACc,CAAoB,EACpB,IAAMC,EAAa,WAAA,OAAYT,EAAS,KAAK,EAe7CA,EACCP,EAAAiB,aAAA,CAACf,EAAY,CACZgB,MAAOZ,EAAE,iBACTa,QAAQ,SACRC,YAAad,EAAE,iBACfe,WAAYf,EAAE,UACdgB,UAnByB,WAAA,OAAA9B,EAAA+B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAlC,EAAAmC,KAAA,CAEnBhB,EAAa,CAAEP,UAAAA,CAAS,GAAG,MAAA,EACjCW,IACAD,GAAuBF,IACvBJ,EAAqB,CAAEoB,KAAM,UAAWC,QAASvB,EAAE,oBAAoB,GAAIkB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAE3EhB,EAAqB,CAAEoB,KAAM,QAASC,QAAOL,EAAAM,EAAA,AAAO,EAAI,MAAA,GAE3C,OAF2CN,EAAAC,IAAA,CAAA,GAExDT,IAAaQ,EAAAO,MAAA,CAAA,GAAA,MAAA,GAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,GAAA,GAAA,CAAA,CAAAC,QAAA,EAWbC,SAAUlB,EACVmB,QAASnB,CAAW,EAEnBV,EAAE,uBAGN,EACA,CAACC,EAAUD,EAAGK,EAAcP,EAAWU,EAAqBF,EAA0BJ,EAAqB,CAI7G"}