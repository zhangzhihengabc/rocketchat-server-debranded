function module(e,n,t){t.link("@babel/runtime/regenerator",{default:function(e){o=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},1),t.export({useVoipClient:function(){return w},isOutboundClient:function(){return x}}),t.link("@rocket.chat/core-typings",{WorkflowTypes:function(e){r=e}},0),t.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){s=e}},1),t.link("@rocket.chat/ui-contexts",{useUser:function(e){u=e},useSetting:function(e){c=e},useEndpoint:function(e){l=e},useStream:function(e){a=e}},2),t.link("jsrsasign",{KJUR:function(e){f=e}},3),t.link("react",{useEffect:function(e){p=e},useState:function(e){d=e}},4),t.link("../../../client/lib/voip/VoIPUser",{VoIPUser:function(e){v=e}},5),t.link("../../../client/providers/CallProvider/hooks/useWebRtcServers",{useWebRtcServers:function(e){b=e}},6),t.link("../lib/voip/EEVoipClient",{EEVoipClient:function(e){k=e}},7),t.link("./useHasLicenseModule",{useHasLicenseModule:function(e){g=e}},8);var o,i,r,s,u,c,l,a,f,p,d,v,b,k,g,h={},w=function(){var e=!!c("VoIP_Enabled"),n=i(s(d(!0)),2),t=n[0],w=n[1],x=c("VoIP_Retry_Count"),E=c("VoIP_Enable_Keep_Alive_For_Unstable_Networks"),S=l("GET","/v1/connector.extension.getRegistrationInfoByUserId"),_=l("GET","/v1/voip/queues.getMembershipSubscription"),C=u(),U=a("notify-logged"),y=b(),R=i(s(d({})),2),m=R[0],I=R[1],P=g("voip-enterprise"),V=e&&t;return p(function(){return U("voip.statuschanged",function(e){w(e)})},[I,w,U]),p(function(){var e,n=null==C?void 0:C._id,t=null==C?void 0:C.extension;if(!n||!t||!V){I(h);return}return S({id:n}).then(function(n){var t,i,s,u,c,l=t="string"==typeof(null==n?void 0:n.result)?null===(i=f.jws.JWS.parse(n.result).payloadObj)||void 0===i?void 0:i.context:n,a=l.extensionDetails,p=a.extension,d=a.password,b=l.callServerConfig.websocketPath;o.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=new URL(b),n.next=4,o.awrap(_({extension:p}));case 4:return u=n.sent,c={authUserName:p,authPassword:d,sipRegistrarHostnameOrIP:s.host,webSocketURI:b,enableVideo:!0,iceServers:y,connectionRetryCount:Number(x),enableKeepAliveUsingOptionsForUnstableNetworks:!!E},n.next=8,o.awrap(P?k.create(c):v.create(c));case 8:(e=n.sent).setWorkflowMode(r.CONTACT_CENTER_USER),e.setMembershipSubscription(u),I({voipClient:e,registrationInfo:t}),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),I({error:n.t0});case 17:case"end":return n.stop()}},null,null,[[0,14]],Promise)},function(e){I({error:e})}),function(){e&&e.clear()}},[y,S,I,_,V,null==C?void 0:C._id,null==C?void 0:C.extension,x,E,P]),m},x=function(e){return e instanceof k}}
//# sourceMappingURL=/dynamic/ee/client/hooks/ee2d0b827f9d5d9400dbff4e4e8069feb7f38b8b.map
