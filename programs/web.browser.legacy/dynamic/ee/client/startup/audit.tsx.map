)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/startup/audit.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import React, { lazy } from 'react';\n\nimport { hasAllPermission } from '../../../app/authorization/client';\nimport { appLayout } from '../../../client/lib/appLayout';\nimport { router } from '../../../client/providers/RouterProvider';\nimport NotAuthorizedPage from '../../../client/views/notAuthorized/NotAuthorizedPage';\nimport MainLayout from '../../../client/views/root/MainLayout';\nimport { onToggledFeature } from '../lib/onToggledFeature';\n\nconst AuditPage = lazy(() => import('../views/audit/AuditPage'));\nconst AuditLogPage = lazy(() => import('../views/audit/AuditLogPage'));\n\ndeclare module '@rocket.chat/ui-contexts' {\n\tinterface IRouterPaths {\n\t\t'audit-home': {\n\t\t\tpathname: '/audit';\n\t\t\tpattern: '/audit/:tab?';\n\t\t};\n\t\t'audit-log': {\n\t\t\tpathname: '/audit-log';\n\t\t\tpattern: '/audit-log';\n\t\t};\n\t}\n}\n\nconst PermissionGuard = ({ children, permission }: { children: React.ReactNode; permission: string }) => {\n\tconst canView = hasAllPermission(permission);\n\n\treturn <>{canView ? children : <NotAuthorizedPage />}</>;\n};\n\nlet unregisterAuditRoutes: () => void;\n\nonToggledFeature('auditing', {\n\tup: () => {\n\t\tunregisterAuditRoutes = router.defineRoutes([\n\t\t\t{\n\t\t\t\tpath: '/audit/:tab?',\n\t\t\t\tid: 'audit-home',\n\t\t\t\telement: appLayout.wrap(\n\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t<PermissionGuard permission='can-audit'>\n\t\t\t\t\t\t\t<AuditPage />\n\t\t\t\t\t\t</PermissionGuard>\n\t\t\t\t\t</MainLayout>,\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: '/audit-log',\n\t\t\t\tid: 'audit-log',\n\t\t\t\telement: appLayout.wrap(\n\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t<PermissionGuard permission='can-audit-log'>\n\t\t\t\t\t\t\t<AuditLogPage />\n\t\t\t\t\t\t</PermissionGuard>\n\t\t\t\t\t</MainLayout>,\n\t\t\t\t),\n\t\t\t},\n\t\t]);\n\t},\n\tdown: () => {\n\t\tunregisterAuditRoutes();\n\t},\n});\n",null],"names":["module","link","v","React","lazy","hasAllPermission","appLayout","router","NotAuthorizedPage","MainLayout","onToggledFeature","unregisterAuditRoutes","AuditPage","dynamicImport","AuditLogPage","PermissionGuard","_ref","children","canView","permission","createElement","Fragment","up","defineRoutes","path","id","element","wrap","down"],"mappings":"uBAAcA,EAAQC,IAAAA,CAAAA,QAAa,CAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAA,CAAA,EAAAC,KAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAK,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAL,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAM,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAN,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAO,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAP,EAAAA,IAAAA,CAAAA,wDAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAA,CAAA,CAAA,EAAA,GAAAR,EAAAA,IAAAA,CAAAA,wCAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAO,EAAAA,CAAA,CAAA,EAAA,GAAAT,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAU,iBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASpC,IATAP,EAAOC,EAA6BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA+BhCC,EAtBEC,EAAYR,EAAK,WAAA,OAAMJ,EAAAa,aAAA,CAAO,2BAA2B,GACzDC,EAAeV,EAAK,WAAA,OAAMJ,EAAAa,aAAA,CAAO,8BAA8B,GAe/DE,EAAkB,SAAAC,CAAA,EAAgF,IAA7EC,EAAQD,EAARC,QAAQ,CAC5BC,EAAUb,EAD8BW,EAAVG,UAAU,EAG9C,OAAOhB,EAAAiB,aAAA,CAAAjB,EAAAkB,QAAA,CAAA,KAAGH,EAAUD,EAAWd,EAAAiB,aAAA,CAACZ,EAAiB,MAClD,EAIAE,EAAiB,WAAY,CAC5BY,GAAI,WACHX,EAAwBJ,EAAOgB,YAAY,CAAC,CAC3C,CACCC,KAAM,eACNC,GAAI,aACJC,QAASpB,EAAUqB,IAAI,CACtBxB,EAAAiB,aAAA,CAACX,EAAU,KACVN,EAAAiB,aAAA,CAACL,EAAe,CAACI,WAAW,WAAW,EACtChB,EAAAiB,aAAA,CAACR,EAAS,UAKd,CACCY,KAAM,aACNC,GAAI,YACJC,QAASpB,EAAUqB,IAAI,CACtBxB,EAAAiB,aAAA,CAACX,EAAU,KACVN,EAAAiB,aAAA,CAACL,EAAe,CAACI,WAAW,eAAe,EAC1ChB,EAAAiB,aAAA,CAACN,EAAY,UAKjB,CACF,EACAc,KAAM,WACLjB,GACD"}