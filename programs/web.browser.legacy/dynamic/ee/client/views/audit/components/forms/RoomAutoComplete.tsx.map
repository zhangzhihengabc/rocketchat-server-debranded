)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/forms/RoomAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Options } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport RoomAvatar from '../../../../../../client/components/avatar/RoomAvatar';\n\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst RoomAutoComplete = ({ value, onChange, ...props }: RoomAutoCompleteProps) => {\n\tconst [filter, setFilter] = useState('');\n\n\tconst performRoomSearch = useEndpoint('GET', '/v1/rooms.autocomplete.adminRooms');\n\n\tconst roomAutocompleteQueryResult = useQuery(['audit', 'rooms', filter], () =>\n\t\tperformRoomSearch({ selector: JSON.stringify({ name: filter ?? '' }) }),\n\t);\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\troomAutocompleteQueryResult.data?.items.map(({ name, _id, fname, avatarETag, t }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: { name: fname || name, avatarETag, type: t },\n\t\t\t})) ?? [],\n\t\t[roomAutocompleteQueryResult.data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { value, label } }) => (\n\t\t\t\t<Option key={value} label={label.name} avatar={<RoomAvatar size={Options.AvatarSize} room={{ _id: value, ...label }} />} />\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option\n\t\t\t\t\tkey={value}\n\t\t\t\t\t{...props}\n\t\t\t\t\tlabel={label.name}\n\t\t\t\t\tavatar={<RoomAvatar size={Options.AvatarSize} room={{ _id: value, ...label }} />}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoComplete);\n",null],"names":["_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","AutoComplete","Option","Options","useEndpoint","useQuery","React","memo","useMemo","useState","RoomAvatar","module","default","v","link","exportDefault","_ref","value","onChange","props","_excluded","_useState2","filter","setFilter","performRoomSearch","roomAutocompleteQueryResult","selector","JSON","stringify","name","options","_roomAutocompleteQuer","_roomAutocompleteQuer2","data","items","map","_ref2","_id","label","fname","avatarETag","type","t","createElement","renderSelected","_ref3","_ref3$selected","selected","key","avatar","size","AvatarSize","room","renderItem","_ref4","_excluded2"],"mappings":"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"}