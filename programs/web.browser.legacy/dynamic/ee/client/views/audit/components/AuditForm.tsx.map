)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/AuditForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IAuditLog } from '@rocket.chat/core-typings';\nimport { Box, Field, FieldLabel, FieldRow, FieldError, TextInput, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React from 'react';\nimport { useController } from 'react-hook-form';\n\nimport type { AuditFields } from '../hooks/useAuditForm';\nimport { useAuditForm } from '../hooks/useAuditForm';\nimport { useSendTelemetryMutation } from '../hooks/useSendTelemetryMutation';\nimport DateRangePicker from './forms/DateRangePicker';\nimport DirectTab from './tabs/DirectTab';\nimport OmnichannelTab from './tabs/OmnichannelTab';\nimport RoomsTab from './tabs/RoomsTab';\nimport UsersTab from './tabs/UsersTab';\n\ntype AuditFormProps = {\n\ttype: IAuditLog['fields']['type'];\n\tonSubmit?: (payload: { type: IAuditLog['fields']['type'] } & AuditFields) => void;\n};\n\nconst AuditForm = ({ type, onSubmit }: AuditFormProps) => {\n\tconst t = useTranslation();\n\n\tconst form = useAuditForm();\n\tconst { control, handleSubmit, register } = form;\n\n\tconst { field: dateRangeField, fieldState: dateRangeFieldState } = useController({ name: 'dateRange', control });\n\n\tconst sendTelemetryMutation = useSendTelemetryMutation();\n\n\tconst submit = () => {\n\t\tsendTelemetryMutation.mutate({\n\t\t\tparams: [{ eventName: 'updateCounter', settingsId: 'Message_Auditing_Apply_Count', timestamp: Date.now() }],\n\t\t});\n\n\t\tonSubmit?.({ type, ...form.getValues() });\n\t};\n\n\treturn (\n\t\t<form onSubmit={handleSubmit(submit)}>\n\t\t\t<Box display='flex' flexDirection='row' justifyContent='stretch' marginInline={-4}>\n\t\t\t\t<Field flexShrink={1} marginInline={4}>\n\t\t\t\t\t<FieldLabel>{t('Message')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput placeholder={t('Search')} {...register('msg')} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field flexShrink={1} marginInline={4}>\n\t\t\t\t\t<FieldLabel>{t('Date')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<DateRangePicker value={dateRangeField.value} onChange={dateRangeField.onChange} display='flex' flexGrow={1} />\n\t\t\t\t\t\t{dateRangeFieldState.error?.type === 'required' && <FieldError>{t('The_field_is_required', t('Date'))}</FieldError>}\n\t\t\t\t\t\t{dateRangeFieldState.error?.type === 'validate' && <FieldError>{dateRangeFieldState.error.message}</FieldError>}\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Box>\n\t\t\t<Box display='flex' flexDirection='row' alignItems='flex-start'>\n\t\t\t\t{type === '' && <RoomsTab form={form} />}\n\t\t\t\t{type === 'u' && <UsersTab form={form} />}\n\t\t\t\t{type === 'd' && <DirectTab form={form} />}\n\t\t\t\t{type === 'l' && <OmnichannelTab form={form} />}\n\t\t\t\t<ButtonGroup align='end' flexShrink={0} marginBlockStart={28} marginInlineStart={8}>\n\t\t\t\t\t<Button secondary onClick={() => window.print()}>\n\t\t\t\t\t\t{t('Export')} {t('PDF')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button primary type='submit'>\n\t\t\t\t\t\t{t('Apply')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Box>\n\t\t</form>\n\t);\n};\n\nexport default AuditForm;\n",null],"names":["_extends","_objectSpread","Box","Field","FieldLabel","FieldRow","FieldError","TextInput","Button","useTranslation","React","useController","useAuditForm","useSendTelemetryMutation","DateRangePicker","DirectTab","OmnichannelTab","RoomsTab","UsersTab","module","link","default","v","ButtonGroup","exportDefault","_ref","_dateRangeFieldState$","_dateRangeFieldState$2","type","onSubmit","t","form","control","handleSubmit","register","_useController","name","dateRangeField","field","dateRangeFieldState","fieldState","sendTelemetryMutation","createElement","mutate","params","eventName","settingsId","timestamp","Date","now","getValues","display","flexDirection","justifyContent","marginInline","flexShrink","placeholder","value","onChange","flexGrow","error","message","alignItems","align","marginBlockStart","marginInlineStart","secondary","onClick","window","print","primary"],"mappings":"uBAoBA,IAnBAA,EAA6FC,EAA7FC,EAAOC,EAAOC,EAAOC,EAAYC,EAAUC,EAAYC,EAAAA,EAA8DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzGC,EAAOC,IAAE,CAAA,iCAAkC,CAAAC,QAAW,SAAQC,CAAAA,EAAAtB,EAAasB,CAAA,CAAA,EAAA,GAAMH,EAAwBC,IAAA,CAAA,uCAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAApB,EAAAA,CAAA,CAAA,EAAA,GAA3CkB,EAAAA,IAAW,CAAA,wBAAQ,CAAAjB,IAAAA,SAAwBoB,CAAAA,EAAApB,EAAAA,CAAA,EAAAC,MAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAe,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAV,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAR,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAP,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAN,yBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,0BAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,mBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kBAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,IAArHC,EAAOK,aAAY,CAmBD,SAAAC,CAAA,EAAuC,IAAAC,EAAAC,EAApCC,EAAIH,EAAJG,IAAI,CAAEC,EAAQJ,EAARI,QAAQ,CAC5BC,EAAIrB,IAEJsB,EAAOnB,IACLoB,EAAoCD,EAApCC,OAAO,CAAEC,EAA2BF,EAA3BE,YAAY,CAAEC,EAAaH,EAAbG,QAAQ,CAEvCC,EAAmExB,EAAc,CAAEyB,KAAM,YAAaJ,QAAAA,CAAO,GAA9FK,EAAcF,EAArBG,KAAK,CAA8BC,EAAmBJ,EAA/BK,UAAU,CAEnCC,EAAwB5B,IAU9B,OACCH,EAAAgC,aAAA,CAAA,OAAA,CAAMb,SAAUI,EATF,WACdQ,EAAsBE,MAAM,CAAC,CAC5BC,OAAQ,CAAC,CAAEC,UAAW,gBAAiBC,WAAY,+BAAgCC,UAAWC,KAAKC,GAAG,EAAE,EAAE,GAG3GpB,MAAAA,GAAAA,EAAQ5B,EAAA,CAAK2B,KAAAA,CAAI,EAAKG,EAAKmB,SAAS,IACrC,EAGsC,EACpCxC,EAAAgC,aAAA,CAACxC,EAAG,CAACiD,QAAQ,OAAOC,cAAc,MAAMC,eAAe,UAAUC,aAAc,EAAG,EACjF5C,EAAAgC,aAAA,CAACvC,EAAK,CAACoD,WAAY,EAAGD,aAAc,CAAE,EACrC5C,EAAAgC,aAAA,CAACtC,EAAU,KAAE0B,EAAE,YACfpB,EAAAgC,aAAA,CAACrC,EAAQ,KACRK,EAAAgC,aAAA,CAACnC,EAASP,EAAA,CAACwD,YAAa1B,EAAE,SAAU,EAAKI,EAAS,WAGpDxB,EAAAgC,aAAA,CAACvC,EAAK,CAACoD,WAAY,EAAGD,aAAc,CAAE,EACrC5C,EAAAgC,aAAA,CAACtC,EAAU,KAAE0B,EAAE,SACfpB,EAAAgC,aAAA,CAACrC,EAAQ,KACRK,EAAAgC,aAAA,CAAC5B,EAAe,CAAC2C,MAAOpB,EAAeoB,KAAM,CAACC,SAAUrB,EAAeqB,QAAS,CAACP,QAAQ,OAAOQ,SAAU,CAAE,GAC3G,CAAA,AAAyB,OAAzBjC,CAAAA,EAAAa,EAAoBqB,KAAK,AAALA,GAAKlC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAzBA,EAA2BE,IAAI,AAAJA,IAAS,YAAclB,EAAAgC,aAAA,CAACpC,EAAU,KAAEwB,EAAE,wBAAyBA,EAAE,UAC5F,CAAA,AAAyB,OAAzBH,CAAAA,EAAAY,EAAoBqB,KAAK,AAALA,GAAKjC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAzBA,EAA2BC,IAAI,AAAJA,IAAS,YAAclB,EAAAgC,aAAA,CAACpC,EAAU,KAAEiC,EAAoBqB,KAAK,CAACC,OAAO,KAIpGnD,EAAAgC,aAAA,CAACxC,EAAG,CAACiD,QAAQ,OAAOC,cAAc,MAAMU,WAAW,YAAY,EAC7DlC,AAAS,KAATA,GAAelB,EAAAgC,aAAA,CAACzB,EAAQ,CAACc,KAAMA,CAAK,GACpCH,AAAS,MAATA,GAAgBlB,EAAAgC,aAAA,CAACxB,EAAQ,CAACa,KAAMA,CAAK,GACrCH,AAAS,MAATA,GAAgBlB,EAAAgC,aAAA,CAAC3B,EAAS,CAACgB,KAAMA,CAAK,GACtCH,AAAS,MAATA,GAAgBlB,EAAAgC,aAAA,CAAC1B,EAAc,CAACe,KAAMA,CAAK,GAC5CrB,EAAAgC,aAAA,CAACnB,EAAW,CAACwC,MAAM,MAAMR,WAAY,EAAGS,iBAAkB,GAAIC,kBAAmB,CAAE,EAClFvD,EAAAgC,aAAA,CAAClC,EAAM,CAAC0D,UAAS,CAAA,EAACC,QAAS,WAAA,OAAMC,OAAOC,KAAK,EAAE,CAAC,EAC9CvC,EAAE,UAAW,IAACA,EAAE,QAElBpB,EAAAgC,aAAA,CAAClC,EAAM,CAAC8D,QAAO,CAAA,EAAC1C,KAAK,QAAQ,EAC3BE,EAAE,YAMT"}