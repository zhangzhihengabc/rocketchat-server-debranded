)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/forms/VisitorAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\ntype VisitorAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst VisitorAutoComplete = ({ value, onChange, ...props }: VisitorAutoCompleteProps): ReactElement => {\n\tconst [filter, setFilter] = useState('');\n\n\tconst performVisitorSearch = useEndpoint('GET', '/v1/livechat/visitors.autocomplete');\n\n\tconst visitorAutocompleteQueryResult = useQuery(['audit', 'visitors', filter], () =>\n\t\tperformVisitorSearch({ selector: JSON.stringify({ term: filter ?? '' }) }),\n\t);\n\n\tconst options = useMemo(\n\t\t() => visitorAutocompleteQueryResult.data?.items.map((user) => ({ value: user._id, label: user.name ?? user.username })) ?? [],\n\t\t[visitorAutocompleteQueryResult.data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { label } }) => <>{label}</>}\n\t\t\trenderItem={({ value, ...props }) => <Option key={value} {...props} />}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(VisitorAutoComplete);\n",null],"names":["_extends","_slicedToArray","_objectWithoutProperties","AutoComplete","Option","useEndpoint","useQuery","React","memo","useMemo","useState","module","default","v","link","exportDefault","_ref","value","onChange","props","_excluded","_useState2","filter","setFilter","performVisitorSearch","visitorAutocompleteQueryResult","selector","JSON","stringify","term","options","_visitorAutocompleteQ","_visitorAutocompleteQ2","data","items","map","user","_user$name","_id","label","name","username","createElement","renderSelected","_ref2","selected","Fragment","renderItem","_ref3","_excluded2","key"],"mappings":"2BAAAA,EAA6DC,EAAAC,EAA7DC,EAASC,EAAoDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,qCAApDC,EAAAA,IAAc,CAAA,iCAAc,CAAAC,QAAwB,SAAAC,CAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAC,QAAAA,SAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAtCS,EAAQG,IAAAA,CAAAA,wBAA6B,CAACX,aAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,YAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAL,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAA,CAAA,EAAAC,KAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA7DC,EAAOI,aAAE,CAoCMP,EA5Ba,SAAAQ,CAAA,EAA0E,IAAvEC,EAAKD,EAALC,KAAK,CAAEC,EAAQF,EAARE,QAAQ,CAAKC,EAAKjB,EAAAc,EAAAI,GACfC,EAAApB,EAAZS,EAAS,IAAG,GAAjCY,EAAMD,CAAA,CAAA,EAAA,CAAEE,EAASF,CAAA,CAAA,EAAA,CAElBG,EAAuBnB,EAAY,MAAO,sCAE1CoB,EAAiCnB,EAAS,CAAC,QAAS,WAAYgB,EAAO,CAAE,WAAA,OAC9EE,EAAqB,CAAEE,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMP,MAAAA,EAAAA,EAAU,EAAE,EAAG,EAAG,GAGrEQ,EAAUrB,EACf,WAAA,IAAAsB,EAAAC,EAAA,OAAA,AAAwH,OAAxHD,CAAAA,EAAA,AAAyC,OAAzCC,CAAAA,EAAMP,EAA+BQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnCA,EAAqCE,KAAK,CAACC,GAAG,CAAC,SAACC,CAAI,EAAA,IAAAC,EAAA,MAAM,CAAEpB,MAAOmB,EAAKE,GAAG,CAAEC,MAAK,AAAW,OAAXF,CAAAA,EAAED,EAAKI,IAAI,AAAJA,GAAIH,AAAA,KAAA,IAAAA,EAAAA,EAAID,EAAKK,QAAAA,AAAQ,CAAE,EAAC,GAACV,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EAC9H,CAACN,EAA+BQ,IAAI,CAAC,EAGtC,OACC1B,EAAAmC,aAAA,CAACvC,EAAYH,EAAA,CAAA,EACRmB,EAAK,CACTF,MAAOA,EACPC,SAAUA,EACVI,OAAQA,EACRC,UAAWA,EACXoB,eAAgB,SAAAC,CAAA,EAAA,IAAeL,EAAKK,EAAjBC,QAAQ,CAAIN,KAAK,CAAA,OAAShC,EAAAmC,aAAA,CAAAnC,EAAAuC,QAAA,CAAA,KAAGP,EAAS,EACzDQ,WAAY,SAAAC,CAAA,EAAA,IAAG/B,EAAK+B,EAAL/B,KAAK,CAAKE,EAAKjB,EAAA8C,EAAAC,GAAA,OAAO1C,EAAAmC,aAAA,CAACtC,EAAMJ,EAAA,CAACkD,IAAKjC,CAAM,EAAKE,GAAS,EACtEW,QAASA,CAAQ,GAGpB"}