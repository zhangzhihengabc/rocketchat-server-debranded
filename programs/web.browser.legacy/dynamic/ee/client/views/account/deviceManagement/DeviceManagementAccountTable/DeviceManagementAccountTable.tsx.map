)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/account/deviceManagement/DeviceManagementAccountTable/DeviceManagementAccountTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { GenericTableHeaderCell } from '../../../../../../client/components/GenericTable';\nimport { usePagination } from '../../../../../../client/components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../../../client/components/GenericTable/hooks/useSort';\nimport { useEndpointData } from '../../../../../../client/hooks/useEndpointData';\nimport DeviceManagementTable from '../../../../components/deviceManagement/DeviceManagementTable';\nimport DeviceManagementAccountRow from './DeviceManagementAccountRow';\n\nconst sortMapping = {\n\tclient: 'device.name',\n\tos: 'device.os.name',\n\tloginAt: 'loginAt',\n};\n\nconst DeviceManagementAccountTable = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst { current, itemsPerPage, setCurrent, setItemsPerPage, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'client' | 'os' | 'loginAt'>('loginAt');\n\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\tsort: JSON.stringify({ [sortMapping[sortBy]]: sortDirection === 'asc' ? 1 : -1 }),\n\t\t\tcount: itemsPerPage,\n\t\t\toffset: current,\n\t\t}),\n\t\t[itemsPerPage, current, sortBy, sortDirection],\n\t);\n\n\tconst { value: data, phase, error, reload } = useEndpointData('/v1/sessions/list', { params: query });\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='client' direction={sortDirection} active={sortBy === 'client'} onClick={setSort} sort='client'>\n\t\t\t\t{t('Client')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='os' direction={sortDirection} active={sortBy === 'os'} onClick={setSort} sort='os'>\n\t\t\t\t{t('OS')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='loginAt' direction={sortDirection} active={sortBy === 'loginAt'} onClick={setSort} sort='loginAt'>\n\t\t\t\t{t('Last_login')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\tmediaQuery && <GenericTableHeaderCell key='_id'>{t('Device_ID')}</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='logout' />,\n\t\t],\n\t\t[t, mediaQuery, sortDirection, sortBy, setSort],\n\t);\n\n\treturn (\n\t\t<DeviceManagementTable\n\t\t\tdata={data}\n\t\t\tphase={phase}\n\t\t\terror={error}\n\t\t\treload={reload}\n\t\t\theaders={headers}\n\t\t\trenderRow={(session): ReactElement => (\n\t\t\t\t<DeviceManagementAccountRow\n\t\t\t\t\tkey={session._id}\n\t\t\t\t\t_id={session._id}\n\t\t\t\t\tdeviceName={session.device?.name}\n\t\t\t\t\tdeviceType={session.device?.type}\n\t\t\t\t\tdeviceOSName={session.device?.os.name}\n\t\t\t\t\tloginAt={session.loginAt}\n\t\t\t\t\tonReload={reload}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\tcurrent={current}\n\t\t\titemsPerPage={itemsPerPage}\n\t\t\tsetCurrent={setCurrent}\n\t\t\tsetItemsPerPage={setItemsPerPage}\n\t\t\tpaginationProps={paginationProps}\n\t\t/>\n\t);\n};\n\nexport default DeviceManagementAccountTable;\n",null],"names":["_objectWithoutProperties","useMediaQuery","useTranslation","React","useMemo","GenericTableHeaderCell","usePagination","useSort","useEndpointData","DeviceManagementTable","DeviceManagementAccountRow","module","link","default","v","sortMapping","client","os","loginAt","exportDefault","t","_usePagination","current","itemsPerPage","setCurrent","setItemsPerPage","paginationProps","_excluded","_useSort","sortBy","sortDirection","setSort","_useEndpointData","params","_JSON$stringify","sort","JSON","stringify","count","offset","data","value","phase","error","reload","mediaQuery","headers","createElement","key","direction","active","onClick","renderRow","session","_session$device","_session$device2","_session$device3","_id","deviceName","device","name","deviceType","type","deviceOSName","onReload"],"mappings":"2BAAAA,EAAAC,EAA4DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,8DAApCC,EAAMC,IAAA,CAAA,iDAA8B,CAAAC,QAAAA,SAAAA,CAAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAnDW,EAAeC,IAAA,CAAM,8BAA8B,CAAAX,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,eAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAX,EAAAA,CAAA,EAAAC,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,mDAAAA,CAAAN,uBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,uEAAAA,CAAAL,cAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,iEAAAA,CAAAJ,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAH,gBAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gEAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAA,QAAA,SAAAG,CAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAY5D,IAAMK,EAAc,CACnBC,OAAQ,cACRC,GAAI,iBACJC,QAAS,WAfVP,EAAOQ,aAAE,CAkB4B,WACpC,IAAMC,EAAIlB,IACVmB,EAAmFf,IAA3EgB,EAAOD,EAAPC,OAAO,CAAEC,EAAYF,EAAZE,YAAY,CAAEC,EAAUH,EAAVG,UAAU,CAAEC,EAAeJ,EAAfI,eAAe,CAAKC,EAAe1B,EAAAqB,EAAAM,GAC9EC,EAA2CrB,EAAqC,WAAxEsB,EAAMD,EAANC,MAAM,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAOH,EAAPG,OAAO,CAWtCC,EAA8CxB,EAAgB,oBAAqB,CAAEyB,OATvE7B,EACb,WAAA,IAAA8B,EAAA,MAAO,CACNC,KAAMC,KAAKC,SAAS,CAAAH,CAAAA,CAAAA,EAAA,CAAA,CAAA,CAAA,CAAInB,CAAW,CAACc,EAAO,CAAA,CAAGC,AAAkB,QAAlBA,EAA0B,EAAI,GAAEI,CAAA,GAC9EI,MAAOf,EACPgB,OAAQjB,EACR,EACD,CAACC,EAAcD,EAASO,EAAQC,EAAc,CAGmD,GAAnFU,EAAIR,EAAXS,KAAK,CAAQC,EAAKV,EAALU,KAAK,CAAEC,EAAKX,EAALW,KAAK,CAAEC,EAAMZ,EAANY,MAAM,CAEnCC,EAAa5C,EAAc,uBAE3B6C,EAAU1C,EACf,WAAA,MAAM,CACLD,EAAA4C,aAAA,CAAC1C,EAAsB,CAAC2C,IAAI,SAASC,UAAWnB,EAAeoB,OAAQrB,AAAW,WAAXA,EAAqBsB,QAASpB,EAASI,KAAK,QAAQ,EACzHf,EAAE,WAEJjB,EAAA4C,aAAA,CAAC1C,EAAsB,CAAC2C,IAAI,KAAKC,UAAWnB,EAAeoB,OAAQrB,AAAW,OAAXA,EAAiBsB,QAASpB,EAASI,KAAK,IAAI,EAC7Gf,EAAE,OAEJjB,EAAA4C,aAAA,CAAC1C,EAAsB,CAAC2C,IAAI,UAAUC,UAAWnB,EAAeoB,OAAQrB,AAAW,YAAXA,EAAsBsB,QAASpB,EAASI,KAAK,SAAS,EAC5Hf,EAAE,eAEJyB,GAAc1C,EAAA4C,aAAA,CAAC1C,EAAsB,CAAC2C,IAAI,KAAK,EAAE5B,EAAE,cACnDjB,EAAA4C,aAAA,CAAC1C,EAAsB,CAAC2C,IAAI,QAAQ,GACpC,EACD,CAAC5B,EAAGyB,EAAYf,EAAeD,EAAQE,EAAQ,EAGhD,OACC5B,EAAA4C,aAAA,CAACtC,EAAqB,CACrB+B,KAAMA,EACNE,MAAOA,EACPC,MAAOA,EACPC,OAAQA,EACRE,QAASA,EACTM,UAAW,SAACC,CAAO,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAClBrD,EAAA4C,aAAA,CAACrC,EAA0B,CAC1BsC,IAAKK,EAAQI,GAAI,CACjBA,IAAKJ,EAAQI,GAAI,CACjBC,WAAU,AAAgB,OAAhBJ,CAAAA,EAAED,EAAQM,MAAM,AAANA,GAAML,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBM,IAAK,CACjCC,WAAU,AAAgB,OAAhBN,CAAAA,EAAEF,EAAQM,MAAM,AAANA,GAAMJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBO,IAAK,CACjCC,aAAY,AAAgB,OAAhBP,CAAAA,EAAEH,EAAQM,MAAM,AAANA,GAAMH,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBvC,EAAE,CAAC2C,IAAK,CACtC1C,QAASmC,EAAQnC,OAAQ,CACzB8C,SAAUpB,CAAO,EAChB,EAEHtB,QAASA,EACTC,aAAcA,EACdC,WAAYA,EACZC,gBAAiBA,EACjBC,gBAAiBA,CAAgB,EAGpC"}