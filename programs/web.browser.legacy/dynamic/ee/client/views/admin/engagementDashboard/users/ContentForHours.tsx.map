)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ContentForHours.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ResponsiveBar } from '@nivo/bar';\nimport { Box, Button, Chevron, Skeleton, Tooltip } from '@rocket.chat/fuselage';\nimport { useBreakpoints } from '@rocket.chat/fuselage-hooks';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useHourlyChatActivity } from './useHourlyChatActivity';\n\ntype ContentForHoursProps = {\n\tdisplacement: number;\n\tonPreviousDateClick: () => void;\n\tonNextDateClick: () => void;\n\ttimezone: 'utc' | 'local';\n};\n\nconst ContentForHours = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForHoursProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useHourlyChatActivity({ displacement, utc });\n\n\tconst t = useTranslation();\n\tconst isLgScreen = useBreakpoints().includes('lg');\n\n\tconst values = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst divider = 2;\n\t\tconst values = Array.from({ length: 24 / divider }, (_, i) => ({\n\t\t\thour: String(divider * i),\n\t\t\tusers: 0,\n\t\t}));\n\n\t\tfor (const { hour, users } of data?.hours ?? []) {\n\t\t\tconst i = Math.floor(hour / divider);\n\t\t\tvalues[i] = values[i] || { hour: String(divider * i), users: 0 };\n\t\t\tvalues[i].users += users;\n\t\t}\n\n\t\treturn values;\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<Box display='flex' alignItems='center' justifyContent='center'>\n\t\t\t\t<Button square small onClick={onPreviousDateClick}>\n\t\t\t\t\t<Chevron left size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t\t<Box mi={8} flexBasis='25%' is='span' style={{ textAlign: 'center' }}>\n\t\t\t\t\t{data ? moment(data.day).format(displacement < 7 ? 'dddd' : 'L') : null}\n\t\t\t\t</Box>\n\t\t\t\t<Button square small disabled={displacement === 0} onClick={onNextDateClick}>\n\t\t\t\t\t<Chevron right size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t\t{data ? (\n\t\t\t\t<Box display='flex' height='196px'>\n\t\t\t\t\t<Box alignSelf='stretch' flexGrow={1} flexShrink={0} position='relative'>\n\t\t\t\t\t\t<Box position='absolute' width='100%' height='100%'>\n\t\t\t\t\t\t\t<ResponsiveBar\n\t\t\t\t\t\t\t\tdata={values}\n\t\t\t\t\t\t\t\tindexBy='hour'\n\t\t\t\t\t\t\t\tkeys={['users']}\n\t\t\t\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\t\t\t\tpadding={0.25}\n\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tbottom: 30,\n\t\t\t\t\t\t\t\t\tright: 5,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolors={[\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tcolors.p500,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tenableLabel={false}\n\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\taxisTop={null}\n\t\t\t\t\t\t\t\taxisRight={null}\n\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\ttickRotation: isLgScreen ? 0 : 25,\n\t\t\t\t\t\t\t\t\ttickValues: 'every 2 hours',\n\t\t\t\t\t\t\t\t\tformat: (hour): string => moment().set({ hour, minute: 0, second: 0 }).format('LT'),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\taxisLeft={null}\n\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\tfill: colors.n600,\n\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttooltip={({ value }) => <Tooltip>{t('Value_users', { value })}</Tooltip>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Skeleton variant='rect' height={196} />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ContentForHours;\n",null],"names":["_createForOfIteratorHelperLoose","ResponsiveBar","Box","Button","Chevron","Skeleton","Tooltip","useBreakpoints","colors","useTranslation","moment","React","useMemo","useHourlyChatActivity","module","link","default","v","exportDefault","_ref","displacement","onPreviousDateClick","onNextDateClick","data","_useHourlyChatActivit","utc","timezone","t","isLgScreen","includes","values","_step","Array","from","length","_","i","hour","String","divider","users","_iterator","_data$hours","hours","done","_ref2","value","Math","floor","createElement","Fragment","display","alignItems","justifyContent","square","small","onClick","left","size","style","verticalAlign","mi","flexBasis","is","textAlign","day","format","disabled","right","height","alignSelf","flexGrow","flexShrink","position","width","indexBy","keys","groupMode","padding","margin","bottom","p500","enableLabel","enableGridY","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","tickValues","set","minute","second","axisLeft","animate","motionConfig","theme","axis","ticks","text","fill","n600","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","tooltip","_ref3","variant"],"mappings":"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"}