)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ActiveUsersSection.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ResponsiveLine } from '@nivo/line';\nimport { Box, Flex, Skeleton, Tile } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport CounterSet from '../../../../../../client/components/dataView/CounterSet';\nimport { useFormatDate } from '../../../../../../client/hooks/useFormatDate';\nimport DownloadDataButton from '../../../../components/dashboards/DownloadDataButton';\nimport EngagementDashboardCardFilter from '../EngagementDashboardCardFilter';\nimport LegendSymbol from '../dataView/LegendSymbol';\nimport { useActiveUsers } from './useActiveUsers';\n\ntype ActiveUsersSectionProps = {\n\ttimezone: 'utc' | 'local';\n};\n\nconst ActiveUsersSection = ({ timezone }: ActiveUsersSectionProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useActiveUsers({ utc });\n\n\tconst [\n\t\tcountDailyActiveUsers,\n\t\tdiffDailyActiveUsers,\n\t\tcountWeeklyActiveUsers,\n\t\tdiffWeeklyActiveUsers,\n\t\tcountMonthlyActiveUsers,\n\t\tdiffMonthlyActiveUsers,\n\t\tdauValues = [],\n\t\twauValues = [],\n\t\tmauValues = [],\n\t] = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst createPoint = (i: number): { x: Date; y: number } => ({\n\t\t\tx: moment(data.start).add(i, 'days').toDate(),\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst createPoints = (): { x: Date; y: number }[] =>\n\t\t\tArray.from({ length: moment(data.end).diff(data.start, 'days') + 1 }, (_, i) => createPoint(i));\n\n\t\tconst dauValues = createPoints();\n\t\tconst prevDauValue = createPoint(-1);\n\t\tconst wauValues = createPoints();\n\t\tconst prevWauValue = createPoint(-1);\n\t\tconst mauValues = createPoints();\n\t\tconst prevMauValue = createPoint(-1);\n\n\t\tconst usersListsMap = data.month.reduce<{ [x: number]: string[] }>((map, dayData) => {\n\t\t\tconst date = utc\n\t\t\t\t? moment.utc({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day')\n\t\t\t\t: moment({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day');\n\t\t\tconst dateOffset = date.diff(data.start, 'days');\n\t\t\tif (dateOffset >= 0) {\n\t\t\t\tmap[dateOffset] = dayData.usersList;\n\t\t\t\tdauValues[dateOffset].y = dayData.users;\n\t\t\t}\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tconst distributeValueOverPoints = (\n\t\t\tusersListsMap: { [x: number]: string[] },\n\t\t\tdateOffset: number,\n\t\t\tcount: number,\n\t\t\tarray: { x: Date; y: number }[],\n\t\t): void => {\n\t\t\tconst usersSet = new Set();\n\t\t\tfor (let k = dateOffset; count > 0; k--, count--) {\n\t\t\t\tif (usersListsMap[k]) {\n\t\t\t\t\tusersListsMap[k].forEach((userId) => usersSet.add(userId));\n\t\t\t\t}\n\t\t\t}\n\t\t\tarray[dateOffset].y = usersSet.size;\n\t\t};\n\n\t\tfor (let i = 0; i < 30; i++) {\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 7, wauValues);\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 30, mauValues);\n\t\t}\n\t\tprevWauValue.y = wauValues[28].y;\n\t\tprevMauValue.y = mauValues[28].y;\n\t\tprevDauValue.y = dauValues[28].y;\n\n\t\treturn [\n\t\t\tdauValues[dauValues.length - 1].y,\n\t\t\tdauValues[dauValues.length - 1].y - prevDauValue.y,\n\t\t\twauValues[wauValues.length - 1].y,\n\t\t\twauValues[wauValues.length - 1].y - prevWauValue.y,\n\t\t\tmauValues[mauValues.length - 1].y,\n\t\t\tmauValues[mauValues.length - 1].y - prevMauValue.y,\n\t\t\tdauValues,\n\t\t\twauValues,\n\t\t\tmauValues,\n\t\t];\n\t}, [data, utc]);\n\n\tconst formatDate = useFormatDate();\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<EngagementDashboardCardFilter>\n\t\t\t\t<DownloadDataButton\n\t\t\t\t\tattachmentName={`ActiveUsersSection_start_${data?.start}_end_${data?.end}`}\n\t\t\t\t\theaders={['Date', 'DAU', 'WAU', 'MAU']}\n\t\t\t\t\tdataAvailable={!!data}\n\t\t\t\t\tdataExtractor={(): unknown[][] | undefined => {\n\t\t\t\t\t\tconst values = [];\n\n\t\t\t\t\t\tfor (let i = 0; i < 30; i++) {\n\t\t\t\t\t\t\tvalues.push([dauValues[i].x.toISOString(), dauValues[i].y, wauValues[i].y, mauValues[i].y]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</EngagementDashboardCardFilter>\n\t\t\t<CounterSet\n\t\t\t\tcounters={[\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countDailyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffDailyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b200} /> {t('Daily_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countWeeklyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffWeeklyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b300} /> {t('Weekly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countMonthlyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffMonthlyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.p500} /> {t('Monthly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t\t<Flex.Container>\n\t\t\t\t{data ? (\n\t\t\t\t\t<Box style={{ height: 240 }}>\n\t\t\t\t\t\t<Flex.Item align='stretch' grow={1} shrink={0}>\n\t\t\t\t\t\t\t<Box style={{ position: 'relative' }}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ResponsiveLine\n\t\t\t\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'dau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: dauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'wau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: wauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'mau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: mauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\txScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'time',\n\t\t\t\t\t\t\t\t\t\t\tformat: 'native',\n\t\t\t\t\t\t\t\t\t\t\tprecision: 'day',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\txFormat='time:%Y-%m-%d'\n\t\t\t\t\t\t\t\t\t\tyScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'linear',\n\t\t\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableGridX={false}\n\t\t\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\t\t\tenablePoints={false}\n\t\t\t\t\t\t\t\t\t\tuseMesh\n\t\t\t\t\t\t\t\t\t\tenableArea\n\t\t\t\t\t\t\t\t\t\tareaOpacity={1}\n\t\t\t\t\t\t\t\t\t\tenableCrosshair\n\t\t\t\t\t\t\t\t\t\tcrosshairType='bottom'\n\t\t\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\tbottom: 20,\n\t\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t\tleft: 40,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcolors={[colors.b200, colors.b300, colors.b500]}\n\t\t\t\t\t\t\t\t\t\taxisLeft={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 3,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 'every 3 days',\n\t\t\t\t\t\t\t\t\t\t\tformat: (date): string => moment(date).format(dauValues.length === 7 ? 'dddd' : 'L'),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill: '#9EA2A8',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#1F2329',\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: '0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)',\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableSlices='x'\n\t\t\t\t\t\t\t\t\t\tsliceTooltip={({ slice: { points } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t\t<Tile elevation='2'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>{formatDate(points[0].data.x)}</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{points.map(({ serieId, data: { y: activeUsers } }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box key={serieId} fontScale='p1m'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(serieId === 'dau' && t('DAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'wau' && t('WAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'mau' && t('MAU_value', { value: activeUsers }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Tile>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t) : (\n\t\t\t\t\t<Skeleton variant='rect' height={240} />\n\t\t\t\t)}\n\t\t\t</Flex.Container>\n\t\t</>\n\t);\n};\n\nexport default ActiveUsersSection;\n",null],"names":["_slicedToArray","ResponsiveLine","Box","Flex","Skeleton","Tile","colors","useTranslation","moment","React","useMemo","CounterSet","useFormatDate","DownloadDataButton","EngagementDashboardCardFilter","LegendSymbol","useActiveUsers","module","link","default","v","exportDefault","_ref","utc","timezone","data","_useActiveUsers","_useMemo2","createPoint","i","x","start","add","toDate","y","createPoints","Array","from","length","end","diff","_","dauValues","prevDauValue","wauValues","prevWauValue","mauValues","prevMauValue","usersListsMap","month","reduce","map","dayData","dateOffset","date","year","day","endOf","usersList","users","distributeValueOverPoints","count","array","usersSet","Set","k","forEach","userId","size","countDailyActiveUsers","diffDailyActiveUsers","countWeeklyActiveUsers","diffWeeklyActiveUsers","countMonthlyActiveUsers","diffMonthlyActiveUsers","_useMemo2$","_useMemo2$2","_useMemo2$3","formatDate","t","createElement","Fragment","attachmentName","headers","dataAvailable","dataExtractor","values","push","toISOString","counters","variant","width","height","variation","description","color","b200","b300","p500","Container","style","Item","align","grow","shrink","position","id","xScale","type","format","precision","xFormat","yScale","stacked","enableGridX","enableGridY","enablePoints","useMesh","enableArea","areaOpacity","enableCrosshair","crosshairType","margin","top","bottom","right","left","b500","axisLeft","tickSize","tickPadding","tickRotation","tickValues","axisBottom","animate","motionConfig","theme","axis","ticks","text","fill","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","tooltip","container","backgroundColor","boxShadow","borderRadius","enableSlices","sliceTooltip","_ref2","points","slice","elevation","_ref3","serieId","activeUsers","key","fontScale","value"],"mappings":"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"}