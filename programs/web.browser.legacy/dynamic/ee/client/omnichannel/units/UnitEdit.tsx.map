)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/units/UnitEdit.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment, ILivechatUnitMonitor, Serialized, IOmnichannelBusinessUnit } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldError,\n\tField,\n\tTextInput,\n\tButton,\n\tPaginatedMultiSelectFiltered,\n\tSelect,\n\tButtonGroup,\n\tFieldGroup,\n\tBox,\n\tFieldLabel,\n\tFieldRow,\n} from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport {\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n\tContextualbarTitle,\n\tContextualbar,\n\tContextualbarHeader,\n\tContextualbarClose,\n} from '../../../../client/components/Contextualbar';\nimport { useRecordList } from '../../../../client/hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../client/hooks/useAsyncState';\nimport { useDepartmentsByUnitsList } from '../../../../client/views/hooks/useDepartmentsByUnitsList';\nimport { useMonitorsList } from '../../../../client/views/hooks/useMonitorsList';\nimport { useRemoveUnit } from './useRemoveUnit';\n\ntype UnitEditProps = {\n\tunitData?: Serialized<IOmnichannelBusinessUnit>;\n\tunitMonitors?: Serialized<ILivechatUnitMonitor>[];\n\tunitDepartments?: Serialized<ILivechatDepartment>[];\n};\n\nconst UnitEdit = ({ unitData, unitMonitors, unitDepartments }: UnitEditProps) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst saveUnit = useMethod('livechat:saveUnit');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst queryClient = useQueryClient();\n\n\tconst handleDeleteUnit = useRemoveUnit();\n\n\tconst [monitorsFilter, setMonitorsFilter] = useState('');\n\tconst debouncedMonitorsFilter = useDebouncedValue(monitorsFilter, 500);\n\n\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: monitorsList, loadMoreItems: loadMoreMonitors } = useMonitorsList(\n\t\tuseMemo(() => ({ filter: debouncedMonitorsFilter }), [debouncedMonitorsFilter]),\n\t);\n\n\tconst { phase: monitorsPhase, items: monitorsItems, itemCount: monitorsTotal } = useRecordList(monitorsList);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsByUnitsList(\n\t\tuseMemo(() => ({ filter: debouncedDepartmentsFilter, unitId: unitData?._id }), [debouncedDepartmentsFilter, unitData?._id]),\n\t);\n\n\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst visibilityOpts: SelectOption[] = [\n\t\t['public', t('Public')],\n\t\t['private', t('Private')],\n\t];\n\n\tconst { _id } = unitData || {};\n\n\tconst currUnitDepartments = useMemo(\n\t\t() =>\n\t\t\tunitDepartments?.map(({ _id, name }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: name,\n\t\t\t})) || [],\n\t\t[unitDepartments],\n\t);\n\n\tconst currUnitMonitors = useMemo(\n\t\t() =>\n\t\t\tunitMonitors?.map(({ _id, username }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: username,\n\t\t\t})) || [],\n\t\t[unitMonitors],\n\t);\n\n\tconst {\n\t\tcontrol,\n\t\tformState: { errors, isDirty },\n\t\thandleSubmit,\n\t\twatch,\n\t} = useForm({\n\t\tmode: 'onBlur',\n\t\tvalues: {\n\t\t\tname: unitData?.name || '',\n\t\t\tvisibility: unitData?.visibility || '',\n\t\t\tdepartments: currUnitDepartments,\n\t\t\tmonitors: currUnitMonitors,\n\t\t},\n\t});\n\n\tconst { departments, monitors } = watch();\n\n\tconst departmentsOptions = useMemo(() => {\n\t\tconst pending = departments.filter(({ value }) => !departmentsItems.find((dep) => dep._id === value));\n\t\tconst mappedDepartmentsItems = departmentsItems?.map(({ _id, name }) => ({\n\t\t\tvalue: _id,\n\t\t\tlabel: name,\n\t\t}));\n\t\treturn [...mappedDepartmentsItems, ...pending];\n\t}, [departments, departmentsItems]);\n\n\tconst monitorsOptions = useMemo(() => {\n\t\tconst pending = monitors.filter(({ value }) => !monitorsItems.find((mon) => mon._id === value));\n\t\tconst mappedMonitorsItems = monitorsItems?.map(({ _id, name }) => ({\n\t\t\tvalue: _id,\n\t\t\tlabel: name,\n\t\t}));\n\t\treturn [...mappedMonitorsItems, ...pending];\n\t}, [monitors, monitorsItems]);\n\n\tconst handleSave = useMutableCallback(async ({ name, visibility }) => {\n\t\tconst departmentsData = departments.map((department) => ({ departmentId: department.value }));\n\n\t\tconst monitorsData = monitors.map((monitor) => ({\n\t\t\tmonitorId: monitor.value,\n\t\t\tusername: monitor.label,\n\t\t}));\n\n\t\ttry {\n\t\t\tawait saveUnit(_id as unknown as string, { name, visibility }, monitorsData, departmentsData);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tqueryClient.invalidateQueries(['livechat-units']);\n\t\t\trouter.navigate('/omnichannel/units');\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst formId = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst visibilityField = useUniqueId();\n\tconst departmentsField = useUniqueId();\n\tconst monitorsField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{_id ? t('Edit_Unit') : t('New_Unit')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/units')}></ContextualbarClose>\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<Box id={formId} is='form' autoComplete='off' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField} required>\n\t\t\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Name')) }}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tid={nameField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.name?.message}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${nameField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.name)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.name && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${nameField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.name.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={visibilityField} required>\n\t\t\t\t\t\t\t\t{t('Visibility')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='visibility'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Visibility')) }}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tid={visibilityField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\toptions={visibilityOpts}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.visibility?.message}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${visibilityField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.visibility)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.visibility && <FieldError id={`${visibilityField}-error`}>{errors?.visibility.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={departmentsField} required>\n\t\t\t\t\t\t\t\t{t('Departments')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='departments'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Departments')) }}\n\t\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange, onBlur } }) => (\n\t\t\t\t\t\t\t\t\t\t<PaginatedMultiSelectFiltered\n\t\t\t\t\t\t\t\t\t\t\tid={departmentsField}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\t\t\t\tfilter={departmentsFilter}\n\t\t\t\t\t\t\t\t\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\t\t\t\t\t\t\t\t\toptions={departmentsOptions}\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(errors?.departments)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\t\t\t\t\tdepartmentsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (start) => start && loadMoreDepartments(start, Math.min(50, departmentsTotal))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${departmentsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.departments)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.departments && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${departmentsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.departments.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={monitorsField} required>\n\t\t\t\t\t\t\t\t{t('Monitors')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='monitors'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Monitors')) }}\n\t\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange, onBlur } }) => (\n\t\t\t\t\t\t\t\t\t\t<PaginatedMultiSelectFiltered\n\t\t\t\t\t\t\t\t\t\t\tid={monitorsField}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\t\t\t\tfilter={monitorsFilter}\n\t\t\t\t\t\t\t\t\t\t\tsetFilter={setMonitorsFilter}\n\t\t\t\t\t\t\t\t\t\t\toptions={monitorsOptions}\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(errors?.monitors)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\t\t\t\t\tmonitorsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (start) => start && loadMoreMonitors(start, Math.min(50, monitorsTotal))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${monitorsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.monitors)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.monitors && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${monitorsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.monitors.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Box>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={() => router.navigate('/omnichannel/units')}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} disabled={!isDirty} type='submit' primary>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{_id && (\n\t\t\t\t\t<ButtonGroup stretch mbs={8}>\n\t\t\t\t\t\t<Button icon='trash' danger onClick={() => handleDeleteUnit(_id)}>\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default UnitEdit;\n",null],"names":["_regeneratorRuntime","_extends","_toConsumableArray","_slicedToArray","FieldError","Field","TextInput","Button","PaginatedMultiSelectFiltered","Select","ButtonGroup","FieldGroup","Box","FieldLabel","FieldRow","useMutableCallback","useDebouncedValue","useUniqueId","useToastMessageDispatch","useMethod","useTranslation","useRouter","useQueryClient","React","useMemo","useState","useForm","Controller","ContextualbarScrollableContent","ContextualbarFooter","ContextualbarTitle","Contextualbar","ContextualbarHeader","ContextualbarClose","useRecordList","AsyncStatePhase","useDepartmentsByUnitsList","useMonitorsList","useRemoveUnit","module","link","default","v","exportDefault","_ref","unitData","unitMonitors","unitDepartments","t","router","saveUnit","dispatchToastMessage","queryClient","handleDeleteUnit","_useState2","monitorsFilter","setMonitorsFilter","debouncedMonitorsFilter","_useState4","departmentsFilter","setDepartmentsFilter","debouncedDepartmentsFilter","_useMonitorsList","filter","monitorsList","itemsList","loadMoreMonitors","loadMoreItems","_useRecordList","monitorsPhase","phase","monitorsItems","items","monitorsTotal","itemCount","_useDepartmentsByUnit","unitId","_id","departmentsList","loadMoreDepartments","_useRecordList2","departmentsPhase","departmentsItems","departmentsTotal","visibilityOpts","_ref2","currUnitDepartments","map","_ref3","value","label","name","currUnitMonitors","_ref4","username","_useForm","mode","values","visibility","departments","monitors","control","_useForm$formState","formState","errors","isDirty","handleSubmit","_watch","watch","departmentsOptions","pending","_ref5","find","dep","concat","_ref6","monitorsOptions","_ref7","mon","_ref8","handleSave","_ref9","departmentsData","monitorsData","async","_context","prev","next","department","departmentId","monitor","monitorId","awrap","type","message","invalidateQueries","navigate","t0","stop","Promise","formId","nameField","visibilityField","departmentsField","monitorsField","createElement","onClick","id","is","autoComplete","onSubmit","htmlFor","required","rules","render","_ref10","_errors$name","field","error","Boolean","_ref11","_errors$visibility","options","placeholder","_ref12","_ref12$field","onChange","onBlur","withTitle","setFilter","endReached","LOADING","undefined","start","Math","min","_ref13","_ref13$field","stretch","form","disabled","primary","mbs","icon","danger"],"mappings":"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"}