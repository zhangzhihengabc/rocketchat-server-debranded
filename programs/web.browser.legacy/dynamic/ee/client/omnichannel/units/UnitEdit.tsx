function module(e,n,t){var i,r,l,a,o,u,c,s,d,m,f,v,b,p,h,E,k,y,_,C,g,q,x,F,M,S,D,L,T,B,w,I,R,U,A,N,P,G,V;t.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){l=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},3),t.link("@rocket.chat/fuselage",{FieldError:function(e){o=e},Field:function(e){u=e},TextInput:function(e){c=e},Button:function(e){s=e},PaginatedMultiSelectFiltered:function(e){d=e},Select:function(e){m=e},ButtonGroup:function(e){f=e},FieldGroup:function(e){v=e},Box:function(e){b=e},FieldLabel:function(e){p=e},FieldRow:function(e){h=e}},0),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){E=e},useDebouncedValue:function(e){k=e},useUniqueId:function(e){y=e}},1),t.link("@rocket.chat/ui-contexts",{useToastMessageDispatch:function(e){_=e},useMethod:function(e){C=e},useTranslation:function(e){g=e},useRouter:function(e){q=e}},2),t.link("@tanstack/react-query",{useQueryClient:function(e){x=e}},3),t.link("react",{default:function(e){F=e},useMemo:function(e){M=e},useState:function(e){S=e}},4),t.link("react-hook-form",{useForm:function(e){D=e},Controller:function(e){L=e}},5),t.link("../../../../client/components/Contextualbar",{ContextualbarScrollableContent:function(e){T=e},ContextualbarFooter:function(e){B=e},ContextualbarTitle:function(e){w=e},Contextualbar:function(e){I=e},ContextualbarHeader:function(e){R=e},ContextualbarClose:function(e){U=e}},6),t.link("../../../../client/hooks/lists/useRecordList",{useRecordList:function(e){A=e}},7),t.link("../../../../client/hooks/useAsyncState",{AsyncStatePhase:function(e){N=e}},8),t.link("../../../../client/views/hooks/useDepartmentsByUnitsList",{useDepartmentsByUnitsList:function(e){P=e}},9),t.link("../../../../client/views/hooks/useMonitorsList",{useMonitorsList:function(e){G=e}},10),t.link("./useRemoveUnit",{useRemoveUnit:function(e){V=e}},11),t.exportDefault(function(e){var n=e.unitData,t=e.unitMonitors,O=e.unitDepartments,Q=g(),H=q(),j=C("livechat:saveUnit"),z=_(),J=x(),K=V(),W=a(S(""),2),X=W[0],Y=W[1],Z=k(X,500),$=a(S(""),2),ee=$[0],en=$[1],et=k(ee,500),ei=G(M(function(){return{filter:Z}},[Z])),er=ei.itemsList,el=ei.loadMoreItems,ea=A(er),eo=ea.phase,eu=ea.items,ec=ea.itemCount,es=P(M(function(){return{filter:et,unitId:null==n?void 0:n._id}},[et,null==n?void 0:n._id])),ed=es.itemsList,em=es.loadMoreItems,ef=A(ed),ev=ef.phase,eb=ef.items,ep=ef.itemCount,eh=[["public",Q("Public")],["private",Q("Private")]],eE=(n||{})._id,ek=M(function(){return(null==O?void 0:O.map(function(e){return{value:e._id,label:e.name}}))||[]},[O]),ey=M(function(){return(null==t?void 0:t.map(function(e){return{value:e._id,label:e.username}}))||[]},[t]),e_=D({mode:"onBlur",values:{name:(null==n?void 0:n.name)||"",visibility:(null==n?void 0:n.visibility)||"",departments:ek,monitors:ey}}),eC=e_.control,eg=e_.formState,eq=eg.errors,ex=eg.isDirty,eF=e_.handleSubmit,eM=(0,e_.watch)(),eS=eM.departments,eD=eM.monitors,eL=M(function(){var e=eS.filter(function(e){var n=e.value;return!eb.find(function(e){return e._id===n})});return[].concat(l(null==eb?void 0:eb.map(function(e){return{value:e._id,label:e.name}})),l(e))},[eS,eb]),eT=M(function(){var e=eD.filter(function(e){var n=e.value;return!eu.find(function(e){return e._id===n})});return[].concat(l(null==eu?void 0:eu.map(function(e){return{value:e._id,label:e.name}})),l(e))},[eD,eu]),eB=E(function(e){var n,t,r,l;return i.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.name,t=e.visibility,r=eS.map(function(e){return{departmentId:e.value}}),l=eD.map(function(e){return{monitorId:e.value,username:e.label}}),a.prev=3,a.next=6,i.awrap(j(eE,{name:n,visibility:t},l,r));case 6:z({type:"success",message:Q("Saved")}),J.invalidateQueries(["livechat-units"]),H.navigate("/omnichannel/units"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),z({type:"error",message:a.t0});case 14:case"end":return a.stop()}},null,null,[[3,11]],Promise)}),ew=y(),eI=y(),eR=y(),eU=y(),eA=y();return F.createElement(I,null,F.createElement(R,null,F.createElement(w,null,eE?Q("Edit_Unit"):Q("New_Unit")),F.createElement(U,{onClick:function(){return H.navigate("/omnichannel/units")}})),F.createElement(T,null,F.createElement(b,{id:ew,is:"form",autoComplete:"off",onSubmit:eF(eB)},F.createElement(v,null,F.createElement(u,null,F.createElement(p,{htmlFor:eI,required:!0},Q("Name")),F.createElement(h,null,F.createElement(L,{name:"name",control:eC,rules:{required:Q("The_field_is_required",Q("Name"))},render:function(e){var n,t=e.field;return F.createElement(c,r({id:eI},t,{error:null==eq?void 0:null===(n=eq.name)||void 0===n?void 0:n.message,"aria-describedby":eI+"-error","aria-required":!0,"aria-invalid":!!(null==eq?void 0:eq.name)}))}})),(null==eq?void 0:eq.name)&&F.createElement(o,{"aria-live":"assertive",id:eI+"-error"},null==eq?void 0:eq.name.message)),F.createElement(u,null,F.createElement(p,{htmlFor:eR,required:!0},Q("Visibility")),F.createElement(h,null,F.createElement(L,{name:"visibility",control:eC,rules:{required:Q("The_field_is_required",Q("Visibility"))},render:function(e){var n,t=e.field;return F.createElement(m,r({id:eR},t,{options:eh,error:null==eq?void 0:null===(n=eq.visibility)||void 0===n?void 0:n.message,placeholder:Q("Select_an_option"),"aria-describedby":eR+"-error","aria-required":!0,"aria-invalid":!!(null==eq?void 0:eq.visibility)}))}})),(null==eq?void 0:eq.visibility)&&F.createElement(o,{id:eR+"-error"},null==eq?void 0:eq.visibility.message)),F.createElement(u,null,F.createElement(p,{htmlFor:eU,required:!0},Q("Departments")),F.createElement(h,null,F.createElement(L,{name:"departments",control:eC,rules:{required:Q("The_field_is_required",Q("Departments"))},render:function(e){var n=e.field,t=n.name,i=n.value,r=n.onChange,l=n.onBlur;return F.createElement(d,{id:eU,name:t,value:i,onChange:r,onBlur:l,withTitle:!0,filter:ee,setFilter:en,options:eL,error:!!(null==eq?void 0:eq.departments),placeholder:Q("Select_an_option"),endReached:ev===N.LOADING?void 0:function(e){return e&&em(e,Math.min(50,ep))},"aria-describedby":eU+"-error","aria-required":!0,"aria-invalid":!!(null==eq?void 0:eq.departments)})}})),(null==eq?void 0:eq.departments)&&F.createElement(o,{"aria-live":"assertive",id:eU+"-error"},null==eq?void 0:eq.departments.message)),F.createElement(u,null,F.createElement(p,{htmlFor:eA,required:!0},Q("Monitors")),F.createElement(h,null,F.createElement(L,{name:"monitors",control:eC,rules:{required:Q("The_field_is_required",Q("Monitors"))},render:function(e){var n=e.field,t=n.name,i=n.value,r=n.onChange,l=n.onBlur;return F.createElement(d,{id:eA,name:t,value:i,onChange:r,onBlur:l,withTitle:!0,filter:X,setFilter:Y,options:eT,error:!!(null==eq?void 0:eq.monitors),placeholder:Q("Select_an_option"),endReached:eo===N.LOADING?void 0:function(e){return e&&el(e,Math.min(50,ec))},"aria-describedby":eA+"-error","aria-required":!0,"aria-invalid":!!(null==eq?void 0:eq.monitors)})}})),(null==eq?void 0:eq.monitors)&&F.createElement(o,{"aria-live":"assertive",id:eA+"-error"},null==eq?void 0:eq.monitors.message))))),F.createElement(B,null,F.createElement(f,{stretch:!0},F.createElement(s,{onClick:function(){return H.navigate("/omnichannel/units")}},Q("Cancel")),F.createElement(s,{form:ew,disabled:!ex,type:"submit",primary:!0},Q("Save"))),eE&&F.createElement(f,{stretch:!0,mbs:8},F.createElement(s,{icon:"trash",danger:!0,onClick:function(){return K(eE)}},Q("Delete")))))})}
//# sourceMappingURL=/dynamic/ee/client/omnichannel/units/25ffde608e65150b61228f37aa9d2c75145d3d3c.map
