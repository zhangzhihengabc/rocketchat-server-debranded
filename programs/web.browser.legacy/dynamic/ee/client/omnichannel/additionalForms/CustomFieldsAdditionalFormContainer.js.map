)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useMemo, useEffect } from 'react';\n\nimport { useForm } from '../../../../client/hooks/useForm';\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\nimport CustomFieldsAdditionalForm from './CustomFieldsAdditionalForm';\n\nconst getInitialValues = (data) => ({\n\ttype: data.type || 'input',\n\trequired: !!data.required,\n\tdefaultValue: data.defaultValue ?? '',\n\toptions: data.options || '',\n\tpublic: !!data.public,\n});\n\nconst checkInvalidOptions = (value) => {\n\tif (!value || value.trim() === '') {\n\t\treturn false;\n\t}\n\n\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\n};\n\nconst CustomFieldsAdditionalFormContainer = ({ data = {}, state, onChange, className }) => {\n\tconst t = useTranslation();\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst errors = useMemo(\n\t\t() => ({\n\t\t\toptionsError: checkInvalidOptions(values.options) ? t('error-invalid-value') : undefined,\n\t\t}),\n\t\t[t, values.options],\n\t);\n\n\tconst hasError = useMemo(() => !!Object.values(errors).filter(Boolean).length, [errors]);\n\n\tuseEffect(() => {\n\t\tonChange({ data: values, hasError, hasUnsavedChanges });\n\t}, [hasError, hasUnsavedChanges, onChange, values]);\n\n\tif (!hasLicense) {\n\t\treturn null;\n\t}\n\n\treturn <CustomFieldsAdditionalForm values={values} handlers={handlers} state={state} className={className} errors={errors} />;\n};\n\nexport default CustomFieldsAdditionalFormContainer;\n",null],"names":["module","link","useTranslation","v","React","useMemo","useEffect","useForm","useHasLicenseModule","CustomFieldsAdditionalForm","getInitialValues","data","_data$defaultValue","type","required","defaultValue","options","public","exportDefault","_ref","_ref$data","state","onChange","className","t","hasLicense","_useForm","values","handlers","hasUnsavedChanges","errors","value","optionsError","checkInvalidOptions","trim","split","every","test","undefined","hasError","Object","filter","Boolean","length","createElement"],"mappings":"uBAAmBA,EAAOC,IAAI,CAAC,2BAA2B,CAACC,eAAe,SAASC,CAAC,EAAED,EAAeC,CAAC,CAAC,EAAE,GAA+BH,EAAOC,IAAI,CAAC,QAAQ,CAAC,QAAQ,SAASE,CAAC,EAAEC,EAAMD,CAAC,EAAEE,QAAQ,SAASF,CAAC,EAAEE,EAAQF,CAAC,EAAEG,UAAU,SAASH,CAAC,EAAEG,EAAUH,CAAC,CAAC,EAAE,GAAeH,EAAOC,IAAI,CAAC,mCAAmC,CAACM,QAAQ,SAASJ,CAAC,EAAEI,EAAQJ,CAAC,CAAC,EAAE,GAA2BH,EAAOC,IAAI,CAAC,kCAAkC,CAACO,oBAAoB,SAASL,CAAC,EAAEK,EAAoBL,CAAC,CAAC,EAAE,GAAkCH,EAAOC,IAAI,CAAC,+BAA+B,CAAC,QAAQ,SAASE,CAAC,EAAEM,EAA2BN,CAAC,CAAC,EAAE,GAO/lB,IAPID,EAA4GE,EAAMC,EAAQC,EAAsIC,EAA+FC,EAAkIC,EAO/dC,EAAmB,SAACC,CAAI,EAAA,IAAAC,EAAA,MAAM,CACnCC,KAAMF,EAAKE,IAAI,EAAI,QACnBC,SAAU,CAAC,CAACH,EAAKG,QAAQ,CACzBC,aAAY,AAAmB,OAAnBH,CAAAA,EAAED,EAAKI,YAAY,AAAZA,GAAYH,AAAA,KAAA,IAAAA,EAAAA,EAAI,GACnCI,QAASL,EAAKK,OAAO,EAAI,GACzB,OAAQ,CAAC,CAACL,EAAKM,MAAAA,AAChB,CAAC,EAbDjB,EAAOkB,aAAa,CAuBwB,SAAAC,CAAA,EAA+C,IAAAC,EAAAD,EAA5CR,IAAI,CAAOU,EAAKF,EAALE,KAAK,CAAEC,EAAQH,EAARG,QAAQ,CAAEC,EAASJ,EAATI,SAAS,CAC7EC,EAAItB,IACJuB,EAAajB,EAAoB,uBAEvCkB,EAAgDnB,EAAQG,EAJNU,AAAA,KAAA,IAAAA,EAAG,CAAC,EAACA,IAI/CO,EAAMD,EAANC,MAAM,CAAEC,EAAQF,EAARE,QAAQ,CAAEC,EAAiBH,EAAjBG,iBAAiB,CAErCC,EAASzB,EACd,eAf2B0B,EAe3B,MAAO,CACNC,aAAcC,AAfhB,CAD4BF,EAgBQJ,EAAOX,OAAO,GAfpCe,AAAiB,KAAjBA,EAAMG,IAAI,IAIjBH,EAAMI,KAAK,CAAC,KAAKC,KAAK,CAAC,SAACjC,CAAC,EAAA,MAAK,oBAAoBkC,IAAI,CAAClC,EAAE,GAWVqB,EAAE,uBAAyBc,KAAAA,CAChF,CAAC,EACD,CAACd,EAAGG,EAAOX,OAAO,CAAC,EAGduB,EAAWlC,EAAQ,WAAA,MAAM,CAAC,CAACmC,OAAOb,MAAM,CAACG,GAAQW,MAAM,CAACC,SAASC,MAAM,EAAE,CAACb,EAAO,QAMvF,CAJAxB,EAAU,WACTgB,EAAS,CAAEX,KAAMgB,EAAQY,SAAAA,EAAUV,kBAAAA,CAAkB,EACtD,EAAG,CAACU,EAAUV,EAAmBP,EAAUK,EAAO,EAE7CF,GAIErB,EAAAwC,aAAA,CAACnC,EAA0B,CAACkB,OAAQA,EAAQC,SAAUA,EAAUP,MAAOA,EAAOE,UAAWA,EAAWO,OAAQA,CAAO,GAHlH,IAIT"}