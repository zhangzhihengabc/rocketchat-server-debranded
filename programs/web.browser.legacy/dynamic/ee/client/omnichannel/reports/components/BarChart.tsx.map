)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/reports/components/BarChart.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { BarCustomLayerProps, BarDatum } from '@nivo/bar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { Box, Palette, Tooltip } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { REPORTS_CHARTS_THEME } from './constants';\n\ntype axisItem = {\n\tticksPosition?: 'before' | 'after';\n\ttickValues?: number;\n\ttickSize?: number;\n\ttickPadding?: number;\n\ttickRotation?: number;\n\tformat?: string | ((v: string | number) => string | number);\n\trenderTick?: (props: any) => JSX.Element;\n\tlegend?: React.ReactNode;\n\tlegendPosition?: 'start' | 'middle' | 'end';\n\tlegendOffset?: number;\n\tariaHidden?: boolean;\n};\n\ntype BarChartProps = {\n\tdata: {\n\t\tlabel: string;\n\t\tvalue: number;\n\t\tcolor: string;\n\t}[];\n\tmaxWidth?: string | number;\n\theight: number;\n\tdirection?: 'vertical' | 'horizontal';\n\tindexBy?: string;\n\tkeys?: string[];\n\treverse?: boolean;\n\tmargins?: { top?: number; right?: number; bottom?: number; left?: number };\n\taxis: { axisTop?: axisItem; axisLeft?: axisItem; axisRight?: axisItem; axisBottom?: axisItem };\n\tenableGridX?: boolean;\n\tenableGridY?: boolean;\n\tcolors?: ComponentProps<typeof ResponsiveBar>['colors'];\n};\n\nconst sideLabelStyle = {\n\tfill: Palette.text['font-annotation'].toString(),\n\tfontFamily:\n\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\tfontSize: 12,\n};\n\nconst horizontalSideLabel = ({ bars, labelSkipWidth }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, y, data }) => {\n\t\t\tif (width >= labelSkipWidth) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${width + 8}, ${y + height / 2})`}\n\t\t\t\t\ttextAnchor='left'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nconst verticalSideLabel = ({ bars, labelSkipHeight, innerHeight }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, x, data }) => {\n\t\t\tif (height >= labelSkipHeight) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${x + width / 2}, ${innerHeight - height - 8})`}\n\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nexport const BarChart = ({\n\tdata,\n\tmaxWidth,\n\theight,\n\tdirection = 'vertical',\n\tindexBy = 'label',\n\tkeys,\n\tmargins,\n\treverse,\n\tenableGridX = false,\n\tenableGridY = false,\n\taxis: { axisTop, axisLeft, axisRight, axisBottom } = {},\n\tcolors,\n}: BarChartProps) => {\n\tconst { minHeight, padding } = useMemo(() => {\n\t\tconst minHeight = data.length * 22;\n\t\tconst padding = data.length <= 4 ? 0.5 : 0.05;\n\t\treturn { minHeight, padding };\n\t}, [data.length]);\n\n\tconst sideLabel: any = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n\n\treturn (\n\t\t<Box maxWidth={maxWidth} height={height} overflowY='auto'>\n\t\t\t<Box position='relative' height={Math.max(minHeight, height)} padding={8} overflow='hidden'>\n\t\t\t\t<ResponsiveBar\n\t\t\t\t\tanimate\n\t\t\t\t\tdata={data}\n\t\t\t\t\tindexBy={indexBy}\n\t\t\t\t\tlayout={direction}\n\t\t\t\t\tlayers={['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel]}\n\t\t\t\t\tindexScale={{ type: 'band', round: false }}\n\t\t\t\t\tkeys={keys}\n\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\tpadding={padding}\n\t\t\t\t\tcolors={colors ?? { datum: 'data.color' }}\n\t\t\t\t\tenableGridY={enableGridY}\n\t\t\t\t\tenableGridX={enableGridX}\n\t\t\t\t\taxisTop={axisTop || null}\n\t\t\t\t\taxisRight={axisRight || null}\n\t\t\t\t\taxisBottom={axisBottom || null}\n\t\t\t\t\taxisLeft={axisLeft || null}\n\t\t\t\t\treverse={reverse}\n\t\t\t\t\tborderRadius={4}\n\t\t\t\t\tlabelTextColor='white'\n\t\t\t\t\tmargin={margins}\n\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\ttheme={REPORTS_CHARTS_THEME}\n\t\t\t\t\tlabelSkipWidth={direction === 'horizontal' ? 24 : undefined}\n\t\t\t\t\tlabelSkipHeight={direction === 'vertical' ? 16 : undefined}\n\t\t\t\t\tvalueScale={{ type: 'linear' }}\n\t\t\t\t\ttooltip={({ data }) => <Tooltip>{`${data.label}: ${data.value}`}</Tooltip>}\n\t\t\t\t\tbarAriaLabel={({ data }) => data.label}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n",null],"names":["module","export","BarChart","ResponsiveBar","Box","Palette","Tooltip","v","React","useMemo","REPORTS_CHARTS_THEME","sideLabelStyle","fill","text","toString","fontFamily","fontSize","horizontalSideLabel","_ref","bars","labelSkipWidth","createElement","map","_ref2","width","height","y","data","key","indexValue","transform","textAnchor","dominantBaseline","style","formattedValue","verticalSideLabel","_ref3","labelSkipHeight","innerHeight","_ref4","x","_ref5","maxWidth","_ref5$direction","direction","_ref5$indexBy","indexBy","keys","margins","reverse","_ref5$enableGridX","enableGridX","_ref5$enableGridY","enableGridY","_ref5$axis","axis","axisTop","axisLeft","axisRight","axisBottom","colors","_useMemo","minHeight","length","padding","overflowY","position","Math","max","overflow","animate","layout","layers","indexScale","type","round","groupMode","datum","borderRadius","labelTextColor","margin","motionConfig","theme","undefined","valueScale","tooltip","_ref6","label","value","barAriaLabel","_ref7"],"mappings":"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"}