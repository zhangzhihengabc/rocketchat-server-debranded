function module(e,n,t){var i,o,r,a,c,l,u,s,m,f,d,h,k,E,p,g,b,v,T,y,x,C,P,w,S,_,G,M,F,B,D,I,A,L,R,N,Q,q,H,U,j,K,V,W=["current","itemsPerPage","setItemsPerPage","setCurrent"];t.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},3),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){c=e}},4),t.link("@rocket.chat/fuselage",{IconButton:function(e){l=e},Pagination:function(e){u=e},Button:function(e){s=e},Field:function(e){m=e},FieldLabel:function(e){f=e},FieldRow:function(e){d=e},Box:function(e){h=e},States:function(e){k=e},StatesIcon:function(e){E=e},StatesTitle:function(e){p=e},StatesActions:function(e){g=e},StatesAction:function(e){b=e}},0),t.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){v=e}},1),t.link("@rocket.chat/ui-contexts",{useTranslation:function(e){T=e},useToastMessageDispatch:function(e){y=e},useMethod:function(e){x=e},useEndpoint:function(e){C=e},useSetModal:function(e){P=e}},2),t.link("@tanstack/react-query",{useMutation:function(e){w=e},useQuery:function(e){S=e},hashQueryKey:function(e){_=e}},3),t.link("react",{default:function(e){G=e},useMemo:function(e){M=e},useState:function(e){F=e}},4),t.link("../../../../client/components/FilterByText",{default:function(e){B=e}},5),t.link("../../../../client/components/GenericModal",{default:function(e){D=e}},6),t.link("../../../../client/components/GenericNoResults",{default:function(e){I=e}},7),t.link("../../../../client/components/GenericTable",{GenericTable:function(e){A=e},GenericTableBody:function(e){L=e},GenericTableCell:function(e){R=e},GenericTableHeader:function(e){N=e},GenericTableHeaderCell:function(e){Q=e},GenericTableLoadingTable:function(e){q=e},GenericTableRow:function(e){H=e}},8),t.link("../../../../client/components/GenericTable/hooks/usePagination",{usePagination:function(e){U=e}},9),t.link("../../../../client/components/GenericTable/hooks/useSort",{useSort:function(e){j=e}},10),t.link("../../../../client/components/UserAutoComplete",{default:function(e){K=e}},11),t.link("../../../../client/lib/queryClient",{queryClient:function(e){V=e}},12),t.exportDefault(function(){var e,n=T(),t=P(),z=c(F(""),2),J=z[0],O=z[1],X=c(F(""),2),Y=X[0],Z=X[1],$=v(J,500),ee=y(),en=U(),et=j("name"),ei=C("GET","/v1/livechat/monitors"),eo=x("livechat:removeMonitor"),er=x("livechat:addMonitor"),ea=en.current,ec=en.itemsPerPage,el=en.setItemsPerPage,eu=en.setCurrent,es=a(en,W),em=et.sortBy,ef=et.sortDirection,ed=et.setSort,eh=M(function(){return r(r({text:$,sort:'{ "'+em+'": '+("asc"===ef?1:-1)+" }"},ec&&{count:ec}),ea&&{offset:ea})},[$,ec,ea,em,ef]),ek=S(["omnichannel","monitors",$,en,et],function(){return ei(eh)}),eE=ek.data,ep=ek.refetch,eg=ek.isLoading,eb=ek.isSuccess,ev=ek.isError,eT=c(F(_([eh])),1)[0]!==_([eh]),ey=w({mutationFn:function(e){return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.awrap(er(e));case 2:return n.next=4,i.awrap(V.invalidateQueries(["omnichannel","monitors"]));case 4:case"end":return n.stop()}},null,null,null,Promise)},onSuccess:function(){Z(""),ee({type:"success",message:n("Monitor_added")})},onError:function(e){ee({type:"error",message:e})}}),ex=function(){ey.mutate(Y)},eC=function(e){t(G.createElement(D,{variant:"danger",onConfirm:function(){return i.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i.awrap(eo(e));case 3:ee({type:"success",message:n("Monitor_removed")}),o.next=9;break;case 6:o.prev=6,o.t0=o.catch(0),ee({type:"error",message:o.t0});case 9:V.invalidateQueries(["omnichannel","monitors"]),t();case 11:case"end":return o.stop()}},null,null,[[0,6]],Promise)},onCancel:function(){return t()},confirmText:n("Delete")}))},eP=M(function(){return[G.createElement(Q,{key:"name",direction:ef,active:"name"===em,onClick:ed},n("Name")),G.createElement(Q,{key:"username",direction:ef,active:"username"===em,onClick:ed},n("Username")),G.createElement(Q,{key:"email",direction:ef,active:"email"===em,onClick:ed},n("Email")),G.createElement(Q,{key:"spacer",w:40})]},[ed,em,ef,n]);return G.createElement(G.Fragment,null,G.createElement(h,{display:"flex",flexDirection:"column"},G.createElement(m,null,G.createElement(f,null,n("Username")),G.createElement(d,null,G.createElement(K,{value:Y,onChange:Z}),G.createElement(s,{primary:!0,disabled:!Y,loading:ey.isLoading,onClick:function(){return ex()},mis:8},n("Add_monitor"))))),(eb&&(null==eE?void 0:eE.monitors.length)>0||eT)&&G.createElement(B,{onChange:function(e){return O(e.text)}}),eg&&G.createElement(A,null,G.createElement(N,null,eP),G.createElement(L,null,G.createElement(q,{headerCells:4}))),eb&&0===eE.monitors.length&&eT&&G.createElement(I,null),eb&&0===eE.monitors.length&&!eT&&G.createElement(I,{icon:"shield-blank",title:n("No_monitors_yet"),description:n("No_monitors_yet_description"),linkHref:"https://go.rocket.chat/omnichannel-docs",linkText:n("Learn_more_about_monitors")}),eb&&eE.monitors.length>0&&G.createElement(G.Fragment,null,G.createElement(A,{"aria-busy":J!==$,"aria-live":"assertive"},G.createElement(N,null,eP),G.createElement(L,null,null===(e=eE.monitors)||void 0===e?void 0:e.map(function(e){return G.createElement(H,{key:e._id,tabIndex:0,width:"full"},G.createElement(R,{withTruncatedText:!0},e.name),G.createElement(R,{withTruncatedText:!0},e.username),G.createElement(R,{withTruncatedText:!0},e.email),G.createElement(R,{withTruncatedText:!0},G.createElement(l,{icon:"trash",small:!0,title:n("Remove"),onClick:function(){return eC(e.username)}})))}))),G.createElement(u,o({divider:!0,current:ea,itemsPerPage:ec,count:(null==eE?void 0:eE.total)||0,onSetItemsPerPage:el,onSetCurrent:eu},es))),ev&&G.createElement(k,null,G.createElement(E,{name:"warning",variation:"danger"}),G.createElement(p,null,n("Something_went_wrong")),G.createElement(g,null,G.createElement(b,{onClick:function(){return ep()}},n("Reload_page")))))})}
//# sourceMappingURL=/dynamic/ee/client/omnichannel/monitors/8bcbfda77aca15900c20f5c8f98b36eaf3e5329d.map
