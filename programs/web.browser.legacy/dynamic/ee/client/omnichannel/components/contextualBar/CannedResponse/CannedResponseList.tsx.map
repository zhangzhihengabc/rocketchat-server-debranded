)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/components/contextualBar/CannedResponse/CannedResponseList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment, IOmnichannelCannedResponse } from '@rocket.chat/core-typings';\nimport { Box, Button, ButtonGroup, ContextualbarEmptyContent, Icon, Margins, Select, TextInput } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useResizeObserver } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Dispatch, FC, FormEventHandler, MouseEvent, ReactElement, SetStateAction } from 'react';\nimport React, { memo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n\tContextualbarInnerContent,\n\tContextualbarFooter,\n} from '../../../../../../client/components/Contextualbar';\nimport ScrollableContentWrapper from '../../../../../../client/components/ScrollableContentWrapper';\nimport { useRoomToolbox } from '../../../../../../client/views/room/contexts/RoomToolboxContext';\nimport Item from './Item';\nimport WrapCannedResponse from './WrapCannedResponse';\n\nconst CannedResponseList: FC<{\n\tloadMoreItems: (start: number, end: number) => void;\n\tcannedItems: (IOmnichannelCannedResponse & { departmentName: ILivechatDepartment['name'] })[];\n\titemCount: number;\n\tonClose: any;\n\tloading: boolean;\n\toptions: [string, string][];\n\ttext: string;\n\tsetText: FormEventHandler<HTMLOrSVGElement>;\n\ttype: string;\n\tsetType: Dispatch<SetStateAction<string>>;\n\tisRoomOverMacLimit: boolean;\n\tonClickItem: (data: any) => void;\n\tonClickCreate: (e: MouseEvent<HTMLOrSVGElement>) => void;\n\tonClickUse: (e: MouseEvent<HTMLOrSVGElement>, text: string) => void;\n\treload: () => void;\n}> = ({\n\tloadMoreItems,\n\tcannedItems,\n\titemCount,\n\tonClose,\n\tloading,\n\toptions,\n\ttext,\n\tsetText,\n\ttype,\n\tsetType,\n\tisRoomOverMacLimit,\n\tonClickItem,\n\tonClickCreate,\n\tonClickUse,\n\treload,\n}) => {\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\n\tconst { context: cannedId } = useRoomToolbox();\n\n\tconst { ref, contentBoxSize: { inlineSize = 378 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Canned_Responses')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={onClose} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0} ref={ref}>\n\t\t\t\t<Box display='flex' flexDirection='row' p={24} flexShrink={0}>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box w='x144'>\n\t\t\t\t\t\t\t\t<Select onChange={(value) => setType(String(value))} value={type} options={options} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t{itemCount === 0 && <ContextualbarEmptyContent title={t('No_Canned_Responses')} />}\n\t\t\t\t{itemCount > 0 && cannedItems.length > 0 && (\n\t\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{ width: inlineSize }}\n\t\t\t\t\t\t\ttotalCount={itemCount}\n\t\t\t\t\t\t\tendReached={loading ? undefined : (start): void => loadMoreItems(start, Math.min(25, itemCount - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={cannedItems}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\tScroller: ScrollableContentWrapper,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\titemContent={(_index, data): ReactElement => (\n\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\tallowUse={!isRoomOverMacLimit}\n\t\t\t\t\t\t\t\t\tonClickItem={(): void => {\n\t\t\t\t\t\t\t\t\t\tonClickItem(data);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClickUse={onClickUse}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t</ContextualbarContent>\n\n\t\t\t{cannedId && (\n\t\t\t\t<ContextualbarInnerContent>\n\t\t\t\t\t<WrapCannedResponse\n\t\t\t\t\t\tallowUse={!isRoomOverMacLimit}\n\t\t\t\t\t\tcannedItem={cannedItems.find((canned) => canned._id === (cannedId as unknown))}\n\t\t\t\t\t\tonClickBack={onClickItem}\n\t\t\t\t\t\tonClickUse={onClickUse}\n\t\t\t\t\t\treload={reload}\n\t\t\t\t\t/>\n\t\t\t\t</ContextualbarInnerContent>\n\t\t\t)}\n\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onClickCreate}>{t('Create')}</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default memo(CannedResponseList);\n",null],"names":["Box","Button","ButtonGroup","ContextualbarEmptyContent","Icon","Margins","Select","TextInput","useAutoFocus","useResizeObserver","useTranslation","React","memo","Virtuoso","ContextualbarHeader","ContextualbarTitle","ContextualbarClose","ContextualbarContent","ContextualbarInnerContent","ContextualbarFooter","ScrollableContentWrapper","useRoomToolbox","Item","WrapCannedResponse","module","link","v","exportDefault","_ref","loadMoreItems","cannedItems","itemCount","onClose","loading","options","text","setText","type","setType","isRoomOverMacLimit","onClickItem","onClickCreate","onClickUse","reload","t","inputRef","cannedId","_useRoomToolbox","context","_useResizeObserver","debounceDelay","ref","_useResizeObserver$co","contentBoxSize","_useResizeObserver$co2","inlineSize","createElement","Fragment","onClick","paddingInline","display","flexDirection","p","flexShrink","flexGrow","mi","inline","placeholder","value","onChange","addon","name","size","w","String","title","length","overflow","style","width","totalCount","endReached","undefined","start","Math","min","overscan","data","components","Scroller","itemContent","_index","allowUse","cannedItem","find","canned","_id","onClickBack","stretch"],"mappings":"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"}