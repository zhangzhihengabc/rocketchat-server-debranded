)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/components/contextualBar/CannedResponse/index.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedValue, useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useRouter } from '@rocket.chat/ui-contexts';\nimport type { MouseEvent } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../../../../../../client/hooks/lists/useRecordList';\nimport { useIsRoomOverMacLimit } from '../../../../../../client/hooks/omnichannel/useIsRoomOverMacLimit';\nimport { AsyncStatePhase } from '../../../../../../client/lib/asyncState';\nimport { useChat } from '../../../../../../client/views/room/contexts/ChatContext';\nimport { useRoom } from '../../../../../../client/views/room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../../../../client/views/room/contexts/RoomToolboxContext';\nimport { useCannedResponseFilterOptions } from '../../../hooks/useCannedResponseFilterOptions';\nimport { useCannedResponseList } from '../../../hooks/useCannedResponseList';\nimport CreateCannedResponse from '../../CannedResponse/modals';\nimport CannedResponseList from './CannedResponseList';\n\nexport const WrapCannedResponseList = () => {\n\tconst room = useRoom();\n\tconst { closeTab } = useRoomToolbox();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\n\tconst options = useCannedResponseFilterOptions() as [string, string][];\n\n\tconst [text, setText] = useState('');\n\tconst [type, setType] = useLocalStorage('canned-response-list-type', 'all');\n\n\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst debouncedText = useDebouncedValue(text, 400);\n\n\tconst { cannedList, loadMoreItems, reload } = useCannedResponseList(\n\t\tuseMemo(() => ({ filter: debouncedText, type }), [debouncedText, type]),\n\t);\n\tconst { phase, items, itemCount } = useRecordList(cannedList);\n\n\tconst onClickItem = useMutableCallback((data) => {\n\t\tconst { _id: context } = data;\n\n\t\trouter.navigate({\n\t\t\tname: router.getRouteName() ?? 'live',\n\t\t\tparams: {\n\t\t\t\tid: room._id,\n\t\t\t\ttab: 'canned-responses',\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t});\n\n\tconst composer = useChat()?.composer;\n\n\tconst onClickUse = (e: MouseEvent<HTMLOrSVGElement>, text: string): void => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tcomposer?.setText(text);\n\t\tcomposer?.focus();\n\t};\n\n\tconst onClickCreate = (): void => {\n\t\tsetModal(<CreateCannedResponse reloadCannedList={reload} />);\n\t};\n\n\treturn (\n\t\t<CannedResponseList\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\tcannedItems={items}\n\t\t\titemCount={itemCount}\n\t\t\tonClose={closeTab}\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\toptions={options}\n\t\t\ttext={text}\n\t\t\tsetText={handleTextChange}\n\t\t\ttype={type}\n\t\t\tsetType={setType}\n\t\t\tisRoomOverMacLimit={isRoomOverMacLimit}\n\t\t\tonClickUse={onClickUse}\n\t\t\tonClickItem={onClickItem}\n\t\t\tonClickCreate={onClickCreate}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default memo(WrapCannedResponseList);\n",null],"names":["module","link","default","_slicedToArray","v","export","WrapCannedResponseList","useDebouncedValue","useLocalStorage","useMutableCallback","useSetModal","useRouter","React","memo","useCallback","useMemo","useState","useRecordList","useIsRoomOverMacLimit","AsyncStatePhase","useChat","useRoom","useRoomToolbox","useCannedResponseFilterOptions","useCannedResponseList","CreateCannedResponse","CannedResponseList","_useChat","room","closeTab","_useRoomToolbox","router","setModal","options","_useState2","text","setText","_useLocalStorage2","type","setType","isRoomOverMacLimit","handleTextChange","event","currentTarget","value","debouncedText","_useCannedResponseLis","filter","cannedList","loadMoreItems","reload","_useRecordList","phase","items","itemCount","onClickItem","data","_router$getRouteName","context","_id","navigate","name","getRouteName","params","id","tab","composer","createElement","cannedItems","onClose","loading","LOADING","onClickUse","e","preventDefault","stopPropagation","focus","onClickCreate","reloadCannedList","exportDefault"],"mappings":"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"}