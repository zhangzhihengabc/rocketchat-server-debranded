function module(e,n,r){r.link("@babel/runtime/helpers/objectSpread2",{default:function(e){t=e}},0),r.link("@babel/runtime/regenerator",{default:function(e){a=e}},1),r.export({AppClientOrchestratorInstance:function(){return o}}),r.link("@rocket.chat/apps-engine/client/AppClientManager",{AppClientManager:function(e){s=e}},0),r.link("../../../app/authorization/client",{hasAtLeastOnePermission:function(e){p=e}},1),r.link("../../../app/utils/client/lib/SDKClient",{sdk:function(e){u=e}},2),r.link("../../../client/lib/toast",{dispatchToastMessage:function(e){i=e}},3),r.link("./RealAppsEngineUIHost",{RealAppsEngineUIHost:function(e){l=e}},4);var t,a,s,p,u,i,l,o=new(function(){function e(){this._appClientUIHost=void 0,this._manager=void 0,this._isLoaded=void 0,this._appClientUIHost=new l,this._manager=new s(this._appClientUIHost),this._isLoaded=!1}var n=e.prototype;return n.load=function(){return a.async(function(e){for(;;)switch(e.prev=e.next){case 0:this._isLoaded||(this._isLoaded=!0);case 1:case"end":return e.stop()}},null,this,null,Promise)},n.getAppClientManager=function(){return this._manager},n.handleError=function(e){p(["manage-apps"])&&i({type:"error",message:e})},n.getInstalledApps=function(){var e;return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(u.rest.get("/apps/installed"));case 2:if(!("apps"in(e=n.sent))){n.next=5;break}return n.abrupt("return",e.apps);case 5:throw Error("Invalid response from API");case 6:case"end":return n.stop()}},null,null,null,Promise)},n.getAppsFromMarketplace=function(e){var n;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.awrap(u.rest.get("/apps/marketplace",{isAdminUser:e?e.toString():"false"}));case 2:if(Array.isArray(n=r.sent)){r.next=5;break}throw Error("Invalid response from API");case 5:return r.abrupt("return",n.map(function(e){var n=e.latest,r=e.appRequestStats,a=e.price,s=e.pricingPlans,p=e.purchaseType,u=e.isEnterpriseOnly,i=e.modifiedAt,l=e.bundledIn,o=e.requestedEndUser;return t(t({},n),{},{appRequestStats:r,price:a,pricingPlans:s,purchaseType:p,isEnterpriseOnly:u,modifiedAt:i,bundledIn:l,requestedEndUser:o})}));case 6:case"end":return r.stop()}},null,null,null,Promise)},n.getAppsOnBundle=function(e){var n;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.awrap(u.rest.get("/apps/bundles/"+e+"/apps"));case 2:return n=r.sent.apps,r.abrupt("return",n);case 5:case"end":return r.stop()}},null,null,null,Promise)},n.getApp=function(e){var n;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.awrap(u.rest.get("/apps/"+e));case 2:return n=r.sent.app,r.abrupt("return",n);case 5:case"end":return r.stop()}},null,null,null,Promise)},n.setAppSettings=function(e,n){return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.awrap(u.rest.post("/apps/"+e+"/settings",{settings:n}));case 2:case"end":return r.stop()}},null,null,null,Promise)},n.installApp=function(e,n,r){var t;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.awrap(u.rest.post("/apps/",{appId:e,marketplace:!0,version:n,permissionsGranted:r}));case 2:return t=s.sent.app,s.abrupt("return",t);case 5:case"end":return s.stop()}},null,null,null,Promise)},n.updateApp=function(e,n,r){var t;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.awrap(u.rest.post("/apps/"+e,{appId:e,marketplace:!0,version:n,permissionsGranted:r}));case 2:if(!("app"in(t=s.sent))){s.next=5;break}return s.abrupt("return",t.app);case 5:throw Error("App not found");case 6:case"end":return s.stop()}},null,null,null,Promise)},n.buildExternalUrl=function(e){var n,r,t,s=arguments;return a.async(function(p){for(;;)switch(p.prev=p.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"buy",r=s.length>2&&void 0!==s[2]&&s[2],p.next=4,a.awrap(u.rest.get("/apps/buildExternalUrl",{appId:e,purchaseType:n,details:""+r}));case 4:if(!("url"in(t=p.sent))){p.next=7;break}return p.abrupt("return",t);case 7:throw Error("Failed to build external url");case 8:case"end":return p.stop()}},null,null,null,Promise)},n.buildExternalAppRequest=function(e){var n;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.awrap(u.rest.get("/apps/buildExternalAppRequest",{appId:e}));case 2:if(!("url"in(n=r.sent))){r.next=5;break}return r.abrupt("return",n);case 5:throw Error("Failed to build App Request external url");case 6:case"end":return r.stop()}},null,null,null,Promise)},n.buildIncompatibleExternalUrl=function(e,n,r){var t;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.awrap(u.rest.get("/apps/incompatibleModal",{appId:e,appVersion:n,action:r}));case 2:if(!("url"in(t=s.sent))){s.next=5;break}return s.abrupt("return",t);case 5:throw Error("Failed to build external url");case 6:case"end":return s.stop()}},null,null,null,Promise)},n.getCategories=function(){var e;return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(u.rest.get("/apps/categories"));case 2:if(!Array.isArray(e=n.sent)){n.next=5;break}return n.abrupt("return",e);case 5:throw Error("Failed to get categories");case 6:case"end":return n.stop()}},null,null,null,Promise)},e}())}
//# sourceMappingURL=/dynamic/ee/client/apps/32e42fcd99ce11a1dd80009f4a0c2e1da2f9f690.map
