"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.proxify = exports.proxifyWithWait = void 0;
const api_1 = require("../api");
function handler(namespace, waitService) {
    return {
        get: (_target, prop) => (...params) => api_1.api[waitService ? 'waitAndCall' : 'call'](`${namespace}.${prop}`, params),
    };
}
// TODO remove the need to wait for a service, if that is really needed it should have a dependency on startup
function proxifyWithWait(namespace) {
    return new Proxy({}, handler(namespace, true));
}
exports.proxifyWithWait = proxifyWithWait;
function proxify(namespace) {
    return new Proxy({}, handler(namespace, false));
}
exports.proxify = proxify;
//# sourceMappingURL=proxify.js.map