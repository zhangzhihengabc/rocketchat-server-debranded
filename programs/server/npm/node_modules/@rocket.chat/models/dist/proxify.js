"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.proxify = exports.registerModel = void 0;
const lazyModels = new Map();
const models = new Map();
function handler(namespace) {
    return {
        get: (_target, prop) => {
            if (!models.has(namespace) && lazyModels.has(namespace)) {
                const getModel = lazyModels.get(namespace);
                if (getModel) {
                    models.set(namespace, getModel());
                }
            }
            const model = models.get(namespace);
            if (!model) {
                throw new Error(`Model ${namespace} not found`);
            }
            return model[prop];
        },
    };
}
function registerModel(name, instance) {
    if (typeof instance === 'function') {
        lazyModels.set(name, instance);
    }
    else {
        models.set(name, instance);
    }
}
exports.registerModel = registerModel;
function proxify(namespace) {
    return new Proxy({}, handler(namespace));
}
exports.proxify = proxify;
//# sourceMappingURL=proxify.js.map