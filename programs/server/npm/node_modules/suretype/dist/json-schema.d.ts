import * as Ajv from "ajv";
import { CoreValidator } from "./validators/core/validator";
import { TypeOf } from "./validators/functional";
import { ValidationResult } from "./validation-error";
export declare function compileSchema(schema: {}, opts?: Ajv.Options): (value: any) => ValidationResult;
export declare function validateSchema(schema: {}, value: any): ValidationResult;
export interface CompileOptionsBase {
    /**
     * Ajv options
     */
    ajvOptions?: Ajv.Options;
    /**
     * If true, the validator function will not return {ok: boolean} but will
     * return the payload if it validates, or throw a ValidationError
     * otherwise.
     */
    ensure?: boolean;
    /**
     * If true, the validator function will return true if the data was valid,
     * and false other.
     * This value can be used in conditionals to provide deduced types.
     */
    simple?: boolean;
}
export interface CompileOptionsDefault extends CompileOptionsBase {
    ensure?: false;
    simple?: false;
}
export interface CompileOptionsEnsure extends CompileOptionsBase {
    ensure: true;
    simple?: never;
}
export interface CompileOptionsSimple extends CompileOptionsBase {
    ensure?: never;
    simple: true;
}
export declare type ValidateFunction = (value: any) => ValidationResult;
export declare type SimpleValidateFunction<T> = (value: any) => value is T;
export declare type EnsureFunction<T> = <U = T>(value: any) => T extends U ? U : never;
export declare function compile<T extends CoreValidator<unknown> = any, U = TypeOf<T>>(schema: T, opts: CompileOptionsEnsure): TypeOf<T> extends U ? EnsureFunction<U> : never;
export declare function compile<T extends CoreValidator<unknown> = any>(schema: T, opts: CompileOptionsSimple): SimpleValidateFunction<TypeOf<T>>;
export declare function compile<T extends CoreValidator<unknown>>(schema: T, opts?: CompileOptionsDefault): ValidateFunction;
export declare function validate<T extends CoreValidator<unknown>>(schema: T, value: any): ValidationResult;
export declare function ensure<R, T extends CoreValidator<unknown>>(schema: TypeOf<T> extends R ? T : never, value: any): R;
export declare function getJsonSchemaValidator(): ValidateFunction;
export declare function validateJsonSchema(schema: {}): ValidationResult;
