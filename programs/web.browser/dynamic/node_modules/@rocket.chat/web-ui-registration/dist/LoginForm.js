function module(e,r,i){let n,o,t,a,l,s,d,c,u,g,m,p,h,f,v,k,w,y,F,b,L,x,q,A,C,E,P,S;i.export({LoginForm:()=>B},!0),i.link("react/jsx-runtime",{jsx(e){n=e},jsxs(e){o=e},Fragment(e){t=e}},0),i.link("@rocket.chat/fuselage",{FieldGroup(e){a=e},TextInput(e){l=e},Field(e){s=e},FieldLabel(e){d=e},FieldRow(e){c=e},FieldError(e){u=e},FieldLink(e){g=e},PasswordInput(e){m=e},ButtonGroup(e){p=e},Button(e){h=e},Callout(e){f=e}},1),i.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){v=e}},2),i.link("@rocket.chat/layout",{Form(e){k=e},ActionLink(e){w=e}},3),i.link("@rocket.chat/ui-contexts",{useLoginWithPassword(e){y=e},useSetting(e){F=e}},4),i.link("@tanstack/react-query",{useMutation(e){b=e}},5),i.link("react",{useEffect(e){L=e},useRef(e){x=e},useState(e){q=e}},6),i.link("react-hook-form",{useForm(e){A=e}},7),i.link("react-i18next",{Trans(e){C=e},useTranslation(e){E=e}},8),i.link("./EmailConfirmationForm",{default(e){P=e}},9),i.link("./LoginServices",{default(e){S=e}},10);var T=this&&this.__awaiter||function(e,r,i,n){return new(i||(i=Promise))(function(o,t){function a(e){try{s(n.next(e))}catch(e){t(e)}}function l(e){try{s(n.throw(e))}catch(e){t(e)}}function s(e){var r;e.done?o(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(a,l)}s((n=n.apply(e,r||[])).next())})};let j={"error-user-is-not-activated":{type:"warning",i18n:"registration.page.registration.waitActivationWarning"},"error-app-user-is-not-allowed-to-login":{type:"danger",i18n:"registration.page.login.errors.AppUserNotAllowedToLogin"},"user-not-found":{type:"danger",i18n:"registration.page.login.errors.wrongCredentials"},"error-login-blocked-for-ip":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForIp"},"error-login-blocked-for-user":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForUser"},"error-license-user-limit-reached":{type:"warning",i18n:"registration.page.login.errors.licenseUserLimitReached"},"error-invalid-email":{type:"danger",i18n:"registration.page.login.errors.invalidEmail"}},B=({setLoginRoute:e})=>{var r,i,B;let{register:U,handleSubmit:_,setError:I,clearErrors:$,getValues:O,formState:{errors:R}}=A({mode:"onBlur"}),{t:D}=E(),G=v(),[K,N]=q(void 0),W=F("Accounts_PasswordReset"),H=y(),M=F("Accounts_ShowFormLogin"),z=String(F("Accounts_EmailOrUsernamePlaceholder")),J=String(F("Accounts_PasswordPlaceholder")),Q=b({mutationFn:e=>H(e.username,e.password),onError:e=>{if([e.error,e.errorType].includes("error-invalid-email")&&I("username",{type:"invalid-email",message:D("registration.page.login.errors.invalidEmail")}),"error"in e&&403!==e.error){N(e.error);return}N("user-not-found")}}),V=v(),X=v(),Y=x(null);return(L(()=>{Y.current&&Y.current.focus()},[K]),(null===(r=R.username)||void 0===r?void 0:r.type)==="invalid-email")?n(P,{onBackToLogin:()=>$("username"),email:O("username")}):o(k,{tabIndex:-1,ref:Y,"aria-labelledby":G,"aria-describedby":"welcomeTitle",onSubmit:_(e=>T(void 0,void 0,void 0,function*(){return Q.mutate(e)})),children:[n(k.Header,{children:n(k.Title,{id:G,children:D("registration.component.login")})}),M&&o(t,{children:[o(k.Container,{children:[o(a,{disabled:Q.isLoading,children:[o(s,{children:[n(d,{required:!0,htmlFor:V,children:D("registration.component.form.emailOrUsername")}),n(c,{children:n(l,Object.assign({},U("username",{required:D("registration.component.form.requiredField")}),{placeholder:z||D("registration.component.form.emailPlaceholder"),error:null===(i=R.username)||void 0===i?void 0:i.message,"aria-invalid":R.username||K?"true":"false","aria-describedby":`${V}-error`,id:V}))}),R.username&&n(u,{"aria-live":"assertive",id:`${V}-error`,children:R.username.message})]}),o(s,{children:[n(d,{required:!0,htmlFor:X,children:D("registration.component.form.password")}),n(c,{children:n(m,Object.assign({},U("password",{required:D("registration.component.form.requiredField")}),{placeholder:J,error:null===(B=R.password)||void 0===B?void 0:B.message,"aria-invalid":R.password||K?"true":"false","aria-describedby":`${X}-error`,id:X}))}),R.password&&n(u,{"aria-live":"assertive",id:`${X}-error`,children:R.password.message}),W&&n(c,{justifyContent:"end",children:n(g,{href:"#",onClick:r=>{r.preventDefault(),e("reset-password")},children:n(C,{i18nKey:"registration.page.login.forgot",children:"Forgot your password?"})})})]})]}),K&&n(a,{disabled:Q.isLoading,children:(e=>{let{type:r,i18n:i}=j[e];return n(f,{id:`${V}-error`,"aria-live":"assertive",type:r,children:D(i)})})(K)})]}),o(k.Footer,{children:[n(p,{stretch:!0,children:n(h,{loading:Q.isLoading,type:"submit",primary:!0,children:D("registration.component.login")})}),n("p",{children:o(C,{i18nKey:"registration.page.login.register",children:["New here? ",n(w,{onClick:()=>e("register"),children:"Create an account"})]})})]})]}),n(S,{disabled:Q.isLoading,setError:N})]})};i.exportDefault(B)}
//# sourceMappingURL=/dynamic/node_modules/@rocket.chat/web-ui-registration/dist/fe140b63f4a856120a54e5f02c67d2b4bdc5e1c9.map
