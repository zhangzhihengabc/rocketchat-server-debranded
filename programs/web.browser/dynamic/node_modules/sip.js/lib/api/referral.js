function module(e,r,t){let s;t.export({Referral:()=>i}),t.link("../core",{NameAddrHeader(e){s=e}},0);class i{constructor(e,r){this.incomingReferRequest=e,this.session=r}get referTo(){let e=this.incomingReferRequest.message.parseHeader("refer-to");if(!(e instanceof s))throw Error("Failed to parse Refer-To header.");return e}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){let e=this.referTo.uri.getHeader("replaces");return e instanceof Array?e[0]:e}get request(){return this.incomingReferRequest.message}accept(e={statusCode:202}){return this.incomingReferRequest.accept(e),Promise.resolve()}reject(e){return this.incomingReferRequest.reject(e),Promise.resolve()}makeInviter(e){if(this.inviter)return this.inviter;let r=this.referTo.uri.clone();r.clearHeaders(),e=e||{};let t=(e.extraHeaders||[]).slice(),s=this.replaces;s&&t.push("Replaces: "+decodeURIComponent(s));let i=this.referredBy;return i&&t.push("Referred-By: "+i),e.extraHeaders=t,this.inviter=this.session.userAgent._makeInviter(r,e),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}}
//# sourceMappingURL=/dynamic/node_modules/sip.js/lib/api/59ba6fe142ce30f3047c3c72b89a03d18f94d353.map
