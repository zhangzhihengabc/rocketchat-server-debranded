)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/UserPresenceProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useMemo, useEffect } from 'react';\n\nimport { UserPresenceContext } from '../contexts/UserPresenceContext';\nimport { Presence } from '../lib/presence';\n\ntype UserPresenceProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst UserPresenceProvider = ({ children }: UserPresenceProviderProps): ReactElement => {\n\tconst usePresenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\n\n\tuseEffect(() => {\n\t\tPresence.setStatus(usePresenceDisabled ? 'disabled' : 'enabled');\n\t}, [usePresenceDisabled]);\n\n\treturn (\n\t\t<UserPresenceContext.Provider\n\t\t\tvalue={useMemo(\n\t\t\t\t() => ({\n\t\t\t\t\tqueryUserData: (uid) => {\n\t\t\t\t\t\tconst subscribe = (callback: () => void) => {\n\t\t\t\t\t\t\tPresence.listen(uid, callback);\n\n\t\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t\tPresence.stop(uid, callback);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst get = () => Presence.store.get(uid);\n\n\t\t\t\t\t\treturn { subscribe, get };\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\t[],\n\t\t\t)}\n\t\t>\n\t\t\t{children}\n\t\t</UserPresenceContext.Provider>\n\t);\n};\n\nexport default UserPresenceProvider;\n",null],"names":["useSetting","React","useMemo","useEffect","UserPresenceContext","Presence","module","link","default","exportDefault","_ref","children","usePresenceDisabled","setStatus","createElement","Provider","value","queryUserData","uid","subscribe","callback","listen","stop","get","store"],"mappings":"2BAAAA,EAAsDC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAA,CAAM,2BAA2B,CAAAP,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAF,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAD,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAtDC,EAAOG,aAAY,CAWUC,IAA0D,GAAzD,CAAEC,SAAAA,CAAAA,CAAqC,CAAAD,EAC9DE,EAAsBZ,EAAoB,+BAMhD,OAJAG,EAAU,KACTE,EAASQ,SAAS,CAACD,EAAsB,WAAa,UACvD,EAAG,CAACA,EAAoB,EAGvBX,EAAAa,aAAA,CAACV,EAAoBW,QAAQ,CAAA,CAC5BC,MAAOd,EACN,IAAO,CAAA,CACNe,cAAgBC,GAWR,CAAA,CAAEC,UAVUC,IAClBf,EAASgB,MAAM,CAACH,EAAKE,GAEd,KACNf,EAASiB,IAAI,CAACJ,EAAKE,EACpB,GAKmBG,IAFR,IAAMlB,EAASmB,KAAK,CAACD,GAAG,CAACL,EAEd,CAAA,IAGzB,EAAE,CACD,EAEDP,EAGJ"}