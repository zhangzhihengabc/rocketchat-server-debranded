)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/AvatarUrlProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AvatarUrlContext, useSetting } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { getURL } from '../../app/utils/client/getURL';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\n\nconst AvatarUrlProvider: FC = ({ children }) => {\n\tconst cdnAvatarUrl = String(useSetting('CDN_PREFIX') || '');\n\tconst externalProviderUrl = String(useSetting('Accounts_AvatarExternalProviderUrl') || '');\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tgetUserPathAvatar: ((): ((uid: string, etag?: string) => string) => {\n\t\t\t\tif (externalProviderUrl) {\n\t\t\t\t\treturn (uid: string): string => externalProviderUrl.trim().replace(/\\/+$/, '').replace('{username}', uid);\n\t\t\t\t}\n\t\t\t\tif (cdnAvatarUrl) {\n\t\t\t\t\treturn (uid: string, etag?: string): string => `${cdnAvatarUrl}/avatar/${uid}${etag ? `?etag=${etag}` : ''}`;\n\t\t\t\t}\n\t\t\t\treturn (uid: string, etag?: string): string => getURL(`/avatar/${uid}${etag ? `?etag=${etag}` : ''}`);\n\t\t\t})(),\n\t\t\tgetRoomPathAvatar: ({ type, ...room }: any): string =>\n\t\t\t\troomCoordinator.getRoomDirectives(type || room.t).getAvatarPath({ username: room._id, ...room }) || '',\n\t\t}),\n\t\t[externalProviderUrl, cdnAvatarUrl],\n\t);\n\n\treturn <AvatarUrlContext.Provider children={children} value={contextValue} />;\n};\n\nexport default AvatarUrlProvider;\n",null],"names":["_objectSpread","_objectWithoutProperties","AvatarUrlContext","useSetting","React","useMemo","getURL","roomCoordinator","module","link","default","v","exportDefault","_ref","children","cdnAvatarUrl","String","externalProviderUrl","contextValue","getUserPathAvatar","uid","trim","replace","etag","concat","getRoomPathAvatar","_ref2","type","room","_excluded","getRoomDirectives","t","getAvatarPath","username","_id","createElement","Provider","value"],"mappings":"2BAAAA,EAAwEC,EAAxEC,EAASC,EAA+DC,EAAAC,EAAAC,EAAAC,iBAA/DC,EAAgBC,IAAE,CAAA,uCAAkB,CAAAC,QAA2BC,CAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAA7CO,EAAYC,IAAAA,CAAAA,2BAAgC,CAACP,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAF,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAD,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAxEC,EAAOI,aAAE,CAOqBC,IAAiB,GAAhB,CAAEC,SAAAA,CAAAA,CAAU,CAAAD,EACpCE,EAAeC,OAAOb,EAAW,eAAiB,IAClDc,EAAsBD,OAAOb,EAAW,uCAAyC,IACjFe,EAAeb,EACpB,IAAO,CAAA,CACNc,kBACC,AAAIF,EACKG,GAAwBH,EAAoBI,IAAI,GAAGC,OAAO,CAAC,OAAQ,IAAIA,OAAO,CAAC,aAAcF,GAElGL,EACI,CAACK,EAAaG,IAAa,GAAAC,MAAA,CAAgBT,EAAY,YAAAS,MAAA,CAAWJ,GAAGI,MAAA,CAAGD,EAAI,SAAAC,MAAA,CAAYD,GAAS,IAElG,CAACH,EAAaG,IAA0BjB,EAAM,WAAAkB,MAAA,CAAYJ,GAAGI,MAAA,CAAGD,EAAI,SAAAC,MAAA,CAAYD,GAAS,KAEjGE,kBAAmBC,IAAA,GAAC,CAAEC,KAAAA,CAAAA,CAAoB,CAAAD,EAAXE,EAAI3B,EAAAyB,EAAAG,GAAA,OAClCtB,EAAgBuB,iBAAiB,CAACH,GAAQC,EAAKG,CAAC,EAAEC,aAAa,CAAAhC,EAAA,CAAGiC,SAAUL,EAAKM,GAAAA,AAAG,EAAKN,KAAW,EAAE,IAExG,CAACX,EAAqBF,EAAa,EAGpC,OAAOX,EAAA+B,aAAA,CAACjC,EAAiBkC,QAAQ,CAAA,CAACtB,SAAUA,EAAUuB,MAAOnB,CAAa,EAC3E"}