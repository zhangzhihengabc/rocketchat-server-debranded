function module(e,t,i){let a,n,l,r,o,u,d;i.export({DeviceProvider:()=>c}),i.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){a=e}},0),i.link("@rocket.chat/ui-contexts",{DeviceContext(e){n=e}},1),i.link("react",{default(e){l=e},useEffect(e){r=e},useState(e){o=e},useMemo(e){u=e}},2),i.link("./lib/isSetSinkIdAvailable",{isSetSinkIdAvailable(e){d=e}},3);let c=e=>{let{children:t}=e,[i]=o(typeof isSecureContext&&isSecureContext),[c,s]=o([]),[v,h]=o([]),[k,b]=o({id:"default",label:"",type:"audio"}),[f,S]=o({id:"default",label:"",type:"audio"}),p=e=>{if(!isSecureContext)throw Error("Device Changes are not available on insecure contexts");S(e)},g=a(e=>{let{outputDevice:t,HTMLAudioElement:a}=e;if(!d())throw Error("setSinkId is not available in this browser");if(!i)throw Error("Device Changes are not available on insecure contexts");b(t),a.setSinkId(t.id)});r(()=>{var e;if(!i)return;let t=()=>{var e;null===(e=navigator.mediaDevices)||void 0===e||e.enumerateDevices().then(e=>{let t=[],i=[];e.forEach(e=>{let a={id:e.deviceId,label:e.label,type:e.kind};"audioinput"===e.kind?t.push(a):"audiooutput"===e.kind&&i.push(a)}),s(i),h(t)})};return null===(e=navigator.mediaDevices)||void 0===e||e.addEventListener("devicechange",t),t(),()=>{var e;null===(e=navigator.mediaDevices)||void 0===e||e.removeEventListener("devicechange",t)}},[i]);let m=u(()=>i?{enabled:i,availableAudioOutputDevices:c,availableAudioInputDevices:v,selectedAudioOutputDevice:k,selectedAudioInputDevice:f,setAudioOutputDevice:g,setAudioInputDevice:p}:{enabled:i},[v,c,i,f,k,g]);return l.createElement(n.Provider,{value:m},t)}}
//# sourceMappingURL=/dynamic/client/providers/DeviceProvider/c7c6a63716b3d07d6e412bdbbae17bb2066f80ed.map
