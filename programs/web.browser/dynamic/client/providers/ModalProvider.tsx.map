)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/providers/ModalProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ModalContext } from '@rocket.chat/ui-contexts';\nimport type { ReactNode } from 'react';\nimport React, { useState, useMemo, memo, Suspense, createElement, useEffect } from 'react';\n\nimport { imperativeModal } from '../lib/imperativeModal';\n\nconst mapCurrentModal = (descriptor: typeof imperativeModal.current): ReactNode => {\n\tif (descriptor === null) {\n\t\treturn null;\n\t}\n\n\tif ('component' in descriptor) {\n\t\treturn (\n\t\t\t<Suspense fallback={<div />}>\n\t\t\t\t{createElement(descriptor.component, {\n\t\t\t\t\tkey: Math.random(),\n\t\t\t\t\t...descriptor.props,\n\t\t\t\t})}\n\t\t\t</Suspense>\n\t\t);\n\t}\n};\n\ntype ModalProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst ModalProvider = ({ children }: ModalProviderProps) => {\n\tconst [currentModal, setCurrentModal] = useState<ReactNode>(() => mapCurrentModal(imperativeModal.current));\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tmodal: {\n\t\t\t\tsetModal: setCurrentModal,\n\t\t\t},\n\t\t\tcurrentModal,\n\t\t}),\n\t\t[currentModal],\n\t);\n\n\tuseEffect(\n\t\t() =>\n\t\t\timperativeModal.on('update', (descriptor) => {\n\t\t\t\tsetCurrentModal(mapCurrentModal(descriptor));\n\t\t\t}),\n\t\t[],\n\t);\n\n\treturn <ModalContext.Provider value={contextValue} children={children} />;\n};\n\nexport default memo<typeof ModalProvider>(ModalProvider);\n",null],"names":["_objectSpread","ModalContext","React","useState","useMemo","memo","Suspense","createElement","useEffect","imperativeModal","module","link","default","mapCurrentModal","descriptor","fallback","component","key","Math","random","props","exportDefault","_ref","children","currentModal","setCurrentModal","current","contextValue","modal","setModal","on","Provider","value"],"mappings":"2BAAAA,EAAAC,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA/CC,EAAcC,IAAM,CAAA,uCAA2B,CAAAC,QAAAA,CAAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAA/CU,EAAcC,IAAA,CAAM,2BAA2B,CAAAV,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAD,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMxD,IAAMI,EAAmBC,GACxB,AAAIA,AAAe,OAAfA,EACI,KAGJ,cAAeA,EAEjBZ,EAAAK,aAAA,CAACD,EAAQ,CAACS,SAAUb,EAAAK,aAAA,CAAA,MAAA,KAAQ,EAC1BA,EAAcO,EAAWE,SAAS,CAAAhB,EAAA,CAClCiB,IAAKC,KAAKC,MAAM,EAAE,EACfL,EAAWM,KAAK,WAhBxBV,EAAOW,aAAE,CAmDMhB,EAxBOiB,IAAqC,GAApC,CAAEC,SAAAA,CAAAA,CAA8B,CAAAD,EAChD,CAACE,EAAcC,EAAgB,CAAGtB,EAAoB,IAAMU,EAAgBJ,EAAgBiB,OAAO,GAEnGC,EAAevB,EACpB,IAAO,CAAA,CACNwB,MAAO,CACNC,SAAUJ,GAEXD,aAAAA,IAED,CAACA,EAAa,EAWf,OARAhB,EACC,IACCC,EAAgBqB,EAAE,CAAC,SAAWhB,IAC7BW,EAAgBZ,EAAgBC,GACjC,GACD,EAAE,EAGIZ,EAAAK,aAAA,CAACN,EAAa8B,QAAQ,CAAA,CAACC,MAAOL,EAAcJ,SAAUA,CAAS,EACvE"}