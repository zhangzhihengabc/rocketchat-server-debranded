function module(e,i,t){let n,a,l,r,o,s,u,c,h,d,v,m,p,g,k,f,b,_,L,y,C,S,q,w,A,O,E;t.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),t.link("@rocket.chat/fuselage-hooks",{useSafely(e){a=e}},0),t.link("@rocket.chat/ui-contexts",{useUser(e){l=e},useSetting(e){r=e},usePermission(e){o=e},useMethod(e){s=e},useEndpoint(e){u=e},useStream(e){c=e}},1),t.link("@tanstack/react-query",{useQuery(e){h=e},useQueryClient(e){d=e}},2),t.link("react",{default(e){v=e},useState(e){m=e},useEffect(e){p=e},useMemo(e){g=e},useCallback(e){k=e},memo(e){f=e},useRef(e){b=e}},3),t.link("../../app/livechat/client/collections/LivechatInquiry",{LivechatInquiry(e){_=e}},4),t.link("../../app/livechat/client/lib/stream/queueManager",{initializeLivechatInquiryStream(e){L=e}},5),t.link("../../app/livechat/lib/inquiries",{getOmniChatSortQuery(e){y=e}},6),t.link("../../app/notifications/client",{Notifications(e){C=e}},7),t.link("../../app/ui/client/lib/KonchatNotification",{KonchatNotification(e){S=e}},8),t.link("../../ee/client/hooks/useHasLicenseModule",{useHasLicenseModule(e){q=e}},9),t.link("../../lib/ClientLogger",{ClientLogger(e){w=e}},10),t.link("../contexts/OmnichannelContext",{OmnichannelContext(e){A=e}},11),t.link("../hooks/useReactiveValue",{useReactiveValue(e){O=e}},12),t.link("../hooks/useShouldPreventAction",{useShouldPreventAction(e){E=e}},13);let M={inquiries:{enabled:!1},enabled:!1,isEnterprise:!1,agentAvailable:!1,showOmnichannelQueueLink:!1,isOverMacLimit:!1,livechatPriorities:{enabled:!1,data:[],isLoading:!1,isError:!1}};t.exportDefault(f(e=>{var i;let{children:t}=e,f=r("Livechat_enabled"),Q=r("Livechat_Routing_Method"),R=r("Livechat_show_queue_list_link"),x=null!==(i=r("Livechat_guest_pool_max_number_incoming_livechats_displayed"))&&void 0!==i?i:0,P=r("Omnichannel_sorting_mechanism"),I=b(new w("OmnichannelProvider")),N=o("view-l-room"),T=o("view-livechat-queue"),D=l(),H=(null==D?void 0:D.statusLivechat)==="available",K=s("livechat:getRoutingConfig"),[U,V]=a(m(void 0)),[j,z]=m(new Set),G=N&&f,J=r("WebRTC_Servers"),W=!0===q("livechat-enterprise"),B=u("GET","/v1/livechat/priorities"),F=c("notify-logged"),X=d(),Y=W&&G,Z=G&&!!D&&!!U,{data:{priorities:$=[]}={},isInitialLoading:ee,isError:ei}=h(["/v1/livechat/priorities"],()=>B({sort:JSON.stringify({sortItem:1})}),{staleTime:1/0,enabled:Y}),et=E("monthlyActiveContacts");p(()=>{if(Y)return F("omnichannel.priority-changed",()=>{X.invalidateQueries(["/v1/livechat/priorities"])})},[Y,X,F]),p(()=>{if(!G)return;let e=async()=>{try{let e=await K();V(e)}catch(e){I.current.error("update() error in routeConfig ".concat(e))}};(Q||!Q)&&e()},[G,K,J,Q,V,!0]);let en=Z&&T&&!!U&&U.showQueue&&!U.autoAssignAgent&&H;p(()=>{if(en)return L(null==D?void 0:D._id),C.onUser("departmentAgentData",()=>{L(null==D?void 0:D._id)}).stop},[en,null==D?void 0:D._id]);let ea=O(k(()=>{if(en)return _.find({status:"queued"},{sort:y(P),limit:x}).fetch()},[en,x,P]));null==ea||ea.map(e=>{let{rid:i}=e;if(!j.has(i))return z(e=>new Set([...e,i])),S.newRoom(i)});let el=g(()=>{if(!Z)return M;let e={enabled:Y,data:$,isLoading:ee,isError:ei};return en?n(n({},M),{},{enabled:!0,isEnterprise:W,agentAvailable:H,voipCallAvailable:!0,routeConfig:U,inquiries:ea?{enabled:!0,queue:ea}:{enabled:!1},showOmnichannelQueueLink:R&&!!H,livechatPriorities:e,isOverMacLimit:et}):n(n({},M),{},{enabled:!0,isEnterprise:W,agentAvailable:H,voipCallAvailable:!0,routeConfig:U,livechatPriorities:e,isOverMacLimit:et})},[Z,Y,$,ee,ei,en,W,H,!0,U,ea,R,et]);return v.createElement(A.Provider,{children:t,value:el})}))}
//# sourceMappingURL=/dynamic/client/providers/8181bffd339ed42bd48aa1b851f8f3c920b4a7d7.map
