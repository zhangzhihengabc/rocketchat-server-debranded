)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/header/hooks/useMessageRoles.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport { useCallback } from 'react';\n\nimport { RoomRoles, UserRoles, Roles } from '../../../../../app/models/client';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\nexport const useMessageRoles = (userId: IUser['_id'] | undefined, roomId: IRoom['_id'], shouldLoadRoles: boolean): Array<string> =>\n\tuseReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tif (!shouldLoadRoles || !userId) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst userRoles = UserRoles.findOne(userId);\n\t\t\tconst roomRoles = RoomRoles.findOne({\n\t\t\t\t'u._id': userId,\n\t\t\t\t'rid': roomId,\n\t\t\t});\n\n\t\t\tconst roles = [...(userRoles?.roles || []), ...(roomRoles?.roles || [])];\n\n\t\t\tconst result = Roles.find(\n\t\t\t\t{\n\t\t\t\t\t_id: {\n\t\t\t\t\t\t$in: roles,\n\t\t\t\t\t},\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\t$exists: true,\n\t\t\t\t\t\t$ne: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tdescription: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).fetch();\n\t\t\treturn result.map(({ description }) => description);\n\t\t}, [userId, roomId, shouldLoadRoles]),\n\t);\n",null],"names":["useCallback","RoomRoles","UserRoles","Roles","useReactiveValue","module","export","useMessageRoles","userId","roomId","shouldLoadRoles","userRoles","findOne","roomRoles","roles","result","find","_id","$in","description","$exists","$ne","fields","fetch","map","_ref"],"mappings":"2BACoCA,EAAAC,EAAAC,EAAAC,EAAAC,EAApCC,EAAOC,MAAE,CAAA,CAAAC,gBAAmB,IAAOA,CAAC,GAAAF,EAAAA,IAAAA,CAAAA,QAAAA,CAAAL,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAJ,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAK7B,IAAMG,EAAkB,CAACC,EAAkCC,EAAsBC,IACvFN,EACCJ,EAAY,KACX,GAAI,CAACU,GAAmB,CAACF,EACxB,MAAO,EAAE,CAGV,IAAMG,EAAYT,EAAUU,OAAO,CAACJ,GAC9BK,EAAYZ,EAAUW,OAAO,CAAC,CACnC,QAASJ,EACT,IAAOC,IAGFK,EAAQ,IAAK,AAAAH,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWG,KAAK,AAALA,GAAS,EAAE,IAAO,AAAAD,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWC,KAAK,AAALA,GAAS,EAAE,CAAE,CAElEC,EAASZ,EAAMa,IAAI,CACxB,CACCC,IAAK,CACJC,IAAKJ,GAENK,YAAa,CACZC,QAAS,CAAA,EACTC,IAAK,KAGP,CACCC,OAAQ,CACPH,YAAa,KAGdI,KAAK,GACP,OAAOR,EAAOS,GAAG,CAACC,IAAA,GAAC,CAAEN,YAAAA,CAAAA,CAAa,CAAAM,EAAA,OAAKN,CAAW,EACnD,EAAG,CAACX,EAAQC,EAAQC,EAAgB"}