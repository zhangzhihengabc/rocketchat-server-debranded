)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/message/variants/thread/ThreadMessageContent.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetting, useUserId, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\n\nimport { useUserData } from '../../../../hooks/useUserData';\nimport type { UserPresence } from '../../../../lib/presence';\nimport MessageContentBody from '../../MessageContentBody';\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\nimport Attachments from '../../content/Attachments';\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\nimport Location from '../../content/Location';\nimport MessageActions from '../../content/MessageActions';\nimport Reactions from '../../content/Reactions';\nimport UrlPreviews from '../../content/UrlPreviews';\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\n\ntype ThreadMessageContentProps = {\n\tmessage: IThreadMessage | IThreadMainMessage;\n};\n\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\n\tconst encrypted = isE2EEMessage(message);\n\tconst { enabled: oembedEnabled } = useOembedLayout();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst broadcast = subscription?.broadcast ?? false;\n\tconst uid = useUserId();\n\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n\n\tconst t = useTranslation();\n\n\tconst normalizedMessage = useNormalizedMessage(message);\n\n\treturn (\n\t\t<>\n\t\t\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\n\t\t\t\t<>\n\t\t\t\t\t{(!encrypted || normalizedMessage.e2e === 'done') && (\n\t\t\t\t\t\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\n\t\t\t\t\t)}\n\t\t\t\t\t{encrypted && normalizedMessage.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.blocks && (\n\t\t\t\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\n\t\t\t)}\n\n\t\t\t{normalizedMessage.attachments && <Attachments attachments={normalizedMessage.attachments} />}\n\n\t\t\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\n\n\t\t\t{normalizedMessage.actionLinks?.length && (\n\t\t\t\t<MessageActions\n\t\t\t\t\tmessage={normalizedMessage}\n\t\t\t\t\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t...action,\n\t\t\t\t\t}))}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\n\n\t\t\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\n\n\t\t\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\n\t\t\t\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\n\t\t\t)}\n\n\t\t\t{readReceiptEnabled && <ReadReceiptIndicator unread={normalizedMessage.unread} />}\n\t\t</>\n\t);\n};\n\nexport default memo(ThreadMessageContent);\n",null],"names":["_objectWithoutProperties","_objectSpread","isE2EEMessage","useSetting","useUserId","useTranslation","React","memo","useUserData","MessageContentBody","ReadReceiptIndicator","Attachments","BroadcastMetrics","Location","MessageActions","Reactions","UrlPreviews","useNormalizedMessage","useOembedLayout","useSubscriptionFromMessageQuery","UiKitMessageBlock","module","link","default","exportDefault","_ref","_useSubscriptionFromM","_subscription$broadca","_normalizedMessage$bl","_normalizedMessage$md","_normalizedMessage$ur","_normalizedMessage$ac","message","encrypted","enabled","oembedEnabled","subscription","data","undefined","broadcast","uid","messageUser","u","roles","_id","readReceiptEnabled","t","normalizedMessage","createElement","Fragment","blocks","length","md","e2e","mentions","channels","rid","mid","attachments","urls","actionLinks","actions","map","_ref2","method_id","methodId","i18nLabel","_excluded","reactions","Object","keys","location","username","unread"],"mappings":"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"}