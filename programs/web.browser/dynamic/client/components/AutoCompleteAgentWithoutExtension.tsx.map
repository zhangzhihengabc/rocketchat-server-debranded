)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/AutoCompleteAgentWithoutExtension.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatAgent } from '@rocket.chat/core-typings';\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport type { FC } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\n\ntype AutoCompleteAgentProps = {\n\tonChange: (value: string) => void;\n\thaveAll?: boolean;\n\tvalue?: string;\n\tcurrentExtension?: string;\n};\n\nconst AutoCompleteAgentWithoutExtension: FC<AutoCompleteAgentProps> = (props) => {\n\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\n\t\tuseMemo(\n\t\t\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\n\t\t\t[currentExtension, debouncedAgentsFilter, haveAll],\n\t\t),\n\t);\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\tconst sortedByName = agentsItems\n\t\t.sort((a, b) => {\n\t\t\tif (value === 'all') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (a?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (b?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t})\n\t\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\n\t\t\t...agent,\n\t\t\tlabel: agent?.username || '',\n\t\t\tvalue: agent?.username || '',\n\t\t}));\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter as string | undefined}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={\n\t\t\t\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgentWithoutExtension);\n",null],"names":["_objectSpread","PaginatedSelectFiltered","useDebouncedValue","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useAvailableAgentsList","module","default","link","exportDefault","props","value","currentExtension","onChange","undefined","haveAll","agentsFilter","setAgentsFilter","debouncedAgentsFilter","itemsList","AgentsList","loadMoreItems","loadMoreAgents","text","includeExtension","phase","agentsPhase","items","agentsItems","itemCount","agentsTotal","sortedByName","sort","a","b","_a$username","_b$username","username","localeCompare","map","agent","label","createElement","flexShrink","filter","setFilter","options","endReached","LOADING","start","Math","min"],"mappings":"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"}