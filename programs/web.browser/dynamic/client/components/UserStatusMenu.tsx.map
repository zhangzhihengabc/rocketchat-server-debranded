)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/UserStatusMenu.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { UserStatus as UserStatusType } from '@rocket.chat/core-typings';\nimport { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ComponentProps } from 'react';\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\n\nimport { UserStatus } from './UserStatus';\n\ntype UserStatusMenuProps = {\n\tmargin: ComponentProps<typeof Box>['margin'];\n\tonChange: (type: UserStatusType) => void;\n\tinitialStatus?: UserStatusType;\n\toptionWidth?: ComponentProps<typeof Box>['width'];\n\tplacement?: ComponentProps<typeof PositionAnimated>['placement'];\n};\n\nconst UserStatusMenu = ({\n\tmargin,\n\tonChange,\n\tinitialStatus = UserStatusType.OFFLINE,\n\toptionWidth = undefined,\n\tplacement = 'bottom-end',\n}: UserStatusMenuProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [status, setStatus] = useState(initialStatus);\n\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption') as boolean;\n\n\tconst options = useMemo(() => {\n\t\tconst renderOption = (status: UserStatusType, label: string): ReactElement => (\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t<Box marginInlineEnd={8}>\n\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t</Box>\n\t\t\t\t{label}\n\t\t\t</Box>\n\t\t);\n\n\t\tconst statuses: Array<[value: UserStatusType, label: ReactElement]> = [\n\t\t\t[UserStatusType.ONLINE, renderOption(UserStatusType.ONLINE, t('Online'))],\n\t\t\t[UserStatusType.AWAY, renderOption(UserStatusType.AWAY, t('Away'))],\n\t\t\t[UserStatusType.BUSY, renderOption(UserStatusType.BUSY, t('Busy'))],\n\t\t];\n\n\t\tif (allowInvisibleStatus) {\n\t\t\tstatuses.push([UserStatusType.OFFLINE, renderOption(UserStatusType.OFFLINE, t('Offline'))]);\n\t\t}\n\n\t\treturn statuses;\n\t}, [t, allowInvisibleStatus]);\n\n\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\n\t\tsetStatus(selected);\n\t\treset();\n\t\thide();\n\t});\n\n\tconst ref = useRef<HTMLButtonElement>(null);\n\tconst onClick = useCallback(() => {\n\t\tif (!ref?.current) {\n\t\t\treturn;\n\t\t}\n\t\tref.current.focus();\n\t\tshow();\n\t\tref.current.classList.add('focus-visible');\n\t}, [show]);\n\n\tconst handleSelection = useCallback(\n\t\t([selected]) => {\n\t\t\tsetStatus(selected);\n\t\t\treset();\n\t\t\thide();\n\t\t},\n\t\t[hide, reset],\n\t);\n\n\tuseEffect(() => onChange(status), [status, onChange]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tref={ref}\n\t\t\t\tsmall\n\t\t\t\tsquare\n\t\t\t\tsecondary\n\t\t\t\tonClick={onClick}\n\t\t\t\tonBlur={hide}\n\t\t\t\tonKeyUp={handleKeyUp}\n\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\tmargin={margin}\n\t\t\t\taria-label={t('User_status_menu')}\n\t\t\t>\n\t\t\t\t<UserStatus status={status} />\n\t\t\t</Button>\n\t\t\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\n\t\t\t\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\n\t\t\t</PositionAnimated>\n\t\t</>\n\t);\n};\n\nexport default UserStatusMenu;\n",null],"names":["UserStatusType","Button","PositionAnimated","Options","useCursor","Box","useSetting","useTranslation","React","useRef","useCallback","useState","useMemo","useEffect","UserStatus","module","link","default","exportDefault","_ref","margin","onChange","initialStatus","OFFLINE","optionWidth","placement","t","status","setStatus","allowInvisibleStatus","options","renderOption","label","createElement","display","flexDirection","alignItems","marginInlineEnd","statuses","ONLINE","AWAY","BUSY","push","cursor","handleKeyDown","handleKeyUp","reset","visible","hide","show","_ref2","_ref3","selected","ref","onClick","current","focus","classList","add","handleSelection","_ref4","Fragment","small","square","secondary","onBlur","onKeyUp","onKeyDown","width","anchor","onSelect"],"mappings":"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"}