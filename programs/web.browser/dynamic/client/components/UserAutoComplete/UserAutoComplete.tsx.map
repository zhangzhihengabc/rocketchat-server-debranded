)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/UserAutoComplete/UserAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Box, Chip, Options } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport UserAvatar from '../avatar/UserAvatar';\n\nconst query = (\n\tterm = '',\n\tconditions = {},\n): {\n\tselector: string;\n} => ({ selector: JSON.stringify({ term, conditions }) });\n\ntype UserAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\n\tconditions?: { [key: string]: unknown };\n};\n\nconst UserAutoComplete = ({ value, onChange, ...props }: UserAutoCompleteProps): ReactElement => {\n\tconst { conditions = {} } = props;\n\tconst [filter, setFilter] = useState('');\n\tconst debouncedFilter = useDebouncedValue(filter, 1000);\n\tconst usersAutoCompleteEndpoint = useEndpoint('GET', '/v1/users.autocomplete');\n\n\tconst { data } = useQuery(['usersAutoComplete', debouncedFilter, conditions], async () =>\n\t\tusersAutoCompleteEndpoint(query(debouncedFilter, conditions)),\n\t);\n\n\tconst options = useMemo(() => data?.items.map((user) => ({ value: user.username, label: user.name || user.username })) || [], [data]);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\tdata-qa-id='UserAutoComplete'\n\t\t\trenderSelected={({ selected: { value, label } }): ReactElement | null => (\n\t\t\t\t<Chip height='x20' value={value} mie={4}>\n\t\t\t\t\t<UserAvatar size='x20' username={value} />\n\t\t\t\t\t<Box verticalAlign='middle' is='span' margin='none' mi={4}>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Box>\n\t\t\t\t</Chip>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }): ReactElement => (\n\t\t\t\t<Option key={value} label={label} avatar={<UserAvatar size={Options.AvatarSize} username={value} />} {...props} />\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(UserAutoComplete);\n",null],"names":["_extends","_objectWithoutProperties","AutoComplete","Option","Box","Chip","Options","useDebouncedValue","useEndpoint","useQuery","React","memo","useMemo","useState","UserAvatar","module","default","link","v","query","term","arguments","length","undefined","conditions","selector","JSON","stringify","exportDefault","_ref","value","onChange","props","_excluded","filter","setFilter","debouncedFilter","usersAutoCompleteEndpoint","data","options","items","map","user","username","label","name","createElement","renderSelected","_ref2","selected","height","mie","size","verticalAlign","is","margin","mi","renderItem","_ref3","_excluded2","key","avatar","AvatarSize"],"mappings":"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"}