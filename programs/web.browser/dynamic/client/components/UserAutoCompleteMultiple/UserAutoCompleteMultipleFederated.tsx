function module(e,t,l){let a,r,n,u,o,i,s,c,m,d,p,f,h,k,b,v,E,g;let x=["onChange","value","placeholder"];l.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){r=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},2),l.link("@rocket.chat/fuselage",{MultiSelectFiltered(e){u=e},Icon(e){o=e},Box(e){i=e},Chip(e){s=e}},0),l.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){c=e}},1),l.link("@rocket.chat/ui-contexts",{useEndpoint(e){m=e}},2),l.link("@tanstack/react-query",{useQuery(e){d=e}},3),l.link("react",{default(e){p=e},memo(e){f=e},useState(e){h=e},useCallback(e){k=e},useMemo(e){b=e}},4),l.link("../avatar/UserAvatar",{default(e){v=e}},5),l.link("./UserAutoCompleteMultipleOptions",{default(e){E=e},OptionsContext(e){g=e}},6);let C=RegExp("@(.*:.*)");l.exportDefault(f(e=>{let{onChange:t,value:l,placeholder:f}=e,y=n(e,x),[S,M]=h(""),[O,A]=h({}),D=c(S,500),j=m("GET","/v1/users.autocomplete"),{data:q}=d(["users.autocomplete",D],async()=>{let e=await j({selector:JSON.stringify({term:D})}),t=e.items.map(e=>[e.username,e]);return C.test(D)&&t.unshift([D,{name:D,username:D,_federated:!0}]),t},{keepPreviousData:!0}),w=b(()=>q||[],[q]),P=k(e=>{var t;let l=null===(t=w.find(t=>{let[l]=t;return l===e}))||void 0===t?void 0:t[1];if(!l)throw Error("UserAutoCompleteMultiple - onAddSelected - failed to cache option");A(t=>r(r({},t),{},{[e]:l}))},[A,w]),U=k(e=>A(t=>{let l=r({},t);return delete l[e],l}),[A]),z=k(e=>{t(e);let a=e.filter(e=>!l.includes(e))[0],r=l.filter(t=>!e.includes(t))[0];M(""),a&&P(a),r&&U(r)},[t,M,P,U,l]);return p.createElement(g.Provider,{value:{options:w}},p.createElement(u,a({},y,{"data-qa-type":"user-auto-complete-input",placeholder:f,value:l,onChange:z,filter:S,setFilter:M,renderSelected:e=>{let{value:t,onMouseDown:l}=e,a=O[t]||{};return p.createElement(s,{key:t,height:"x20",onMouseDown:l,mie:4,mb:2},a._federated?p.createElement(o,{size:"x20",name:"globe"}):p.createElement(v,{size:"x20",username:t}),p.createElement(i,{is:"span",margin:"none",mis:4},a.name||a.username||t))},renderOptions:E,options:w.concat(Object.entries(O)).map(e=>{let[,t]=e;return[t.username,t.name||t.username]}),"data-qa":"create-channel-users-autocomplete"})))}))}
//# sourceMappingURL=/dynamic/client/components/UserAutoCompleteMultiple/51b56740d969d2e247b237a66ec9609a1cf03649.map
