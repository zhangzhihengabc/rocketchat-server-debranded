)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/RoomAutoComplete/RoomAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Box } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport RoomAvatar from '../avatar/RoomAvatar';\nimport Avatar from './Avatar';\n\nconst generateQuery = (\n\tterm = '',\n): {\n\tselector: string;\n} => ({ selector: JSON.stringify({ name: term }) });\n\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst RoomAutoComplete = ({ value, onChange, ...props }: RoomAutoCompleteProps): ReactElement => {\n\tconst [filter, setFilter] = useState('');\n\tconst filterDebounced = useDebouncedValue(filter, 300);\n\tconst autocomplete = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate');\n\n\tconst result = useQuery(['rooms.autocomplete.channelAndPrivate', filterDebounced], () => autocomplete(generateQuery(filterDebounced)), {\n\t\tkeepPreviousData: true,\n\t});\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\tresult.isSuccess\n\t\t\t\t? result.data.items.map(({ name, _id, avatarETag, t }) => ({\n\t\t\t\t\t\tvalue: _id,\n\t\t\t\t\t\tlabel: { name, avatarETag, type: t },\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t[result.data?.items, result.isSuccess],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { value, label } }): ReactElement => (\n\t\t\t\t<>\n\t\t\t\t\t<Box margin='none' mi={2}>\n\t\t\t\t\t\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box margin='none' mi={2}>\n\t\t\t\t\t\t{label?.name}\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }): ReactElement => (\n\t\t\t\t<Option key={value} {...props} label={label.name} avatar={<Avatar value={value} {...label} />} />\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoComplete);\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","AutoComplete","Option","Box","useDebouncedValue","useEndpoint","useQuery","React","memo","useMemo","useState","RoomAvatar","Avatar","module","default","v","link","generateQuery","term","arguments","length","undefined","selector","JSON","stringify","name","exportDefault","_ref","_result$data","value","onChange","props","_excluded","filter","setFilter","filterDebounced","autocomplete","result","keepPreviousData","options","isSuccess","data","items","map","_ref2","_id","avatarETag","t","label","type","createElement","renderSelected","_ref3","selected","Fragment","margin","mi","size","room","renderItem","_ref4","_excluded2","key","avatar"],"mappings":"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"}