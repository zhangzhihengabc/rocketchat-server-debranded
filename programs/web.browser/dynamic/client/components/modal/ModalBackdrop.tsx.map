)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/modal/ModalBackdrop.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport type { MouseEvent, ReactElement, ReactNode, RefObject } from 'react';\nimport React, { useCallback, useEffect, useRef } from 'react';\n\nconst useEscapeKey = (onDismiss: (() => void) | undefined): void => {\n\tuseEffect(() => {\n\t\tconst closeOnEsc = (e: KeyboardEvent): void => {\n\t\t\tif (e.key !== 'Escape') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\tonDismiss?.();\n\t\t};\n\n\t\twindow.addEventListener('keydown', closeOnEsc);\n\n\t\treturn (): void => {\n\t\t\twindow.removeEventListener('keydown', closeOnEsc);\n\t\t};\n\t}, [onDismiss]);\n};\n\nconst isAtBackdropChildren = (e: MouseEvent, ref: RefObject<HTMLElement>): boolean => {\n\tconst backdrop = ref.current;\n\tconst { parentElement } = e.target as HTMLElement;\n\n\treturn (Boolean(parentElement) && backdrop?.contains(parentElement)) ?? false;\n};\n\nconst useOutsideClick = (\n\tref: RefObject<HTMLElement>,\n\tonDismiss: (() => void) | undefined,\n): {\n\tonMouseDown: (e: MouseEvent) => void;\n\tonMouseUp: (e: MouseEvent) => void;\n} => {\n\tconst hasClicked = useRef<boolean>(false);\n\n\tconst onMouseDown = useCallback(\n\t\t(e) => {\n\t\t\tif (isAtBackdropChildren(e, ref)) {\n\t\t\t\thasClicked.current = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thasClicked.current = true;\n\t\t},\n\t\t[ref],\n\t);\n\n\tconst onMouseUp = useCallback(\n\t\t(e: MouseEvent) => {\n\t\t\tif (isAtBackdropChildren(e, ref)) {\n\t\t\t\thasClicked.current = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!hasClicked.current) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thasClicked.current = false;\n\t\t\te.stopPropagation();\n\t\t\tonDismiss?.();\n\t\t},\n\t\t[onDismiss, ref],\n\t);\n\n\treturn {\n\t\tonMouseDown,\n\t\tonMouseUp,\n\t};\n};\n\ntype ModalBackdropProps = {\n\tchildren?: ReactNode;\n\tonDismiss?: () => void;\n};\n\nconst ModalBackdrop = ({ children, onDismiss }: ModalBackdropProps): ReactElement => {\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEscapeKey(onDismiss);\n\tconst { onMouseDown, onMouseUp } = useOutsideClick(ref, onDismiss);\n\n\treturn (\n\t\t<Box\n\t\t\tref={ref}\n\t\t\tchildren={children}\n\t\t\tclassName='rcx-modal__backdrop'\n\t\t\tposition='fixed'\n\t\t\tzIndex={9999}\n\t\t\tinset={0}\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tonMouseDown={onMouseDown}\n\t\t\tonMouseUp={onMouseUp}\n\t\t/>\n\t);\n};\n\nexport default ModalBackdrop;\n",null],"names":["Box","React","useCallback","useEffect","useRef","module","link","default","useEscapeKey","onDismiss","closeOnEsc","e","key","stopPropagation","window","addEventListener","removeEventListener","isAtBackdropChildren","ref","_ref","backdrop","current","parentElement","target","Boolean","contains","useOutsideClick","hasClicked","onMouseDown","onMouseUp","exportDefault","_ref2","children","createElement","className","position","zIndex","inset","display","flexDirection"],"mappings":"2BAAAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAN,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAI5C,IAAMI,EAAgBC,IACrBN,EAAU,KACT,IAAMO,EAAcC,IACL,WAAVA,EAAEC,GAAG,GAITD,EAAEE,eAAe,GACjBJ,MAAAA,GAAAA,IACD,EAIA,OAFAK,OAAOC,gBAAgB,CAAC,UAAWL,GAE5B,KACNI,OAAOE,mBAAmB,CAAC,UAAWN,EACvC,CACD,EAAG,CAACD,EAAU,CACf,EAEMQ,EAAuB,CAACN,EAAeO,KAAwC,IAAAC,EACpF,IAAMC,EAAWF,EAAIG,OAAO,CACtB,CAAEC,cAAAA,CAAAA,CAAe,CAAGX,EAAEY,MAAqB,CAEjD,OAAA,AAAmE,OAAnEJ,CAAAA,EAAQK,CAAAA,CAAQF,GAAkBF,CAAAA,MAAAA,EAAQ,KAAA,EAARA,EAAUK,QAAQ,CAACH,EAAa,CAAC,GAAAH,AAAA,KAAA,IAAAA,GAAAA,CACpE,EAEMO,EAAkB,CACvBR,EACAT,KAKA,IAAMkB,EAAavB,EAAgB,CAAA,GAE7BwB,EAAc1B,EAClBS,IACA,GAAIM,EAAqBN,EAAGO,GAAM,CACjCS,EAAWN,OAAO,CAAG,CAAA,EACrB,OAGDM,EAAWN,OAAO,CAAG,CAAA,CACtB,EACA,CAACH,EAAI,EAGAW,EAAY3B,EAChBS,IACA,GAAIM,EAAqBN,EAAGO,GAAM,CACjCS,EAAWN,OAAO,CAAG,CAAA,EACrB,OAGIM,EAAWN,OAAO,GAIvBM,EAAWN,OAAO,CAAG,CAAA,EACrBV,EAAEE,eAAe,GACjBJ,MAAAA,GAAAA,IACD,EACA,CAACA,EAAWS,EAAI,EAGjB,MAAO,CACNU,YAAAA,EACAC,UAAAA,EAEF,EAzEAxB,EAAOyB,aAAa,CAgFEC,IAA8D,GAA7D,CAAEC,SAAAA,CAAQ,CAAEvB,UAAAA,CAAAA,CAA+B,CAAAsB,EAC3Db,EAAMd,EAAuB,MAEnCI,EAAaC,GACb,GAAM,CAAEmB,YAAAA,CAAW,CAAEC,UAAAA,CAAAA,CAAW,CAAGH,EAAgBR,EAAKT,GAExD,OACCR,EAAAgC,aAAA,CAACjC,EAAG,CACHkB,IAAKA,EACLc,SAAUA,EACVE,UAAU,sBACVC,SAAS,QACTC,OAAQ,KACRC,MAAO,EACPC,QAAQ,OACRC,cAAc,SACdX,YAAaA,EACbC,UAAWA,CAAU,EAGxB"}