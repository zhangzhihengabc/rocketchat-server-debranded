function module(e,t,r){let l,n,a,o,i,c,s,m,u,d,E,p,f,h,_,b,k,g,F,y,C,v,D,R,q,x,w;let I=["value"];r.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},0),r.link("@babel/runtime/helpers/extends",{default(e){n=e}},1),r.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},2),r.link("@rocket.chat/fuselage",{Modal(e){o=e},Field(e){i=e},FieldGroup(e){c=e},ToggleSwitch(e){s=e},TextInput(e){m=e},TextAreaInput(e){u=e},Button(e){d=e},Icon(e){E=e},Box(e){p=e},FieldHint(e){f=e},FieldLabel(e){h=e},FieldRow(e){_=e},FieldError(e){b=e}},0),r.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){k=e}},1),r.link("@rocket.chat/ui-contexts",{useTranslation(e){g=e},useEndpoint(e){F=e}},2),r.link("@tanstack/react-query",{useMutation(e){y=e}},3),r.link("react",{default(e){C=e}},4),r.link("react-hook-form",{useForm(e){v=e},Controller(e){D=e}},5),r.link("../../lib/utils/goToRoomById",{goToRoomById(e){R=e}},6),r.link("../RoomAutoComplete",{default(e){q=e}},7),r.link("../UserAutoCompleteMultiple",{default(e){x=e}},8),r.link("./DefaultParentRoomField",{default(e){w=e}},9),r.exportDefault(e=>{let{onClose:t,defaultParentRoom:r,parentMessageId:B,nameSuggestion:T}=e,S=g(),{formState:{isDirty:M,isSubmitting:P,isValidating:U,errors:j},handleSubmit:A,control:G,watch:H}=v({mode:"onBlur",defaultValues:{name:T||"",parentRoom:"",encrypted:!1,usernames:[],firstMessage:""}}),{encrypted:N}=H(),z=F("POST","/v1/rooms.createDiscussion"),L=y({mutationFn:z,onSuccess:e=>{let{discussion:r}=e;R(r._id),t()}}),O=async e=>{let{name:t,parentRoom:l,encrypted:n,usernames:o,firstMessage:i}=e;L.mutate(a({prid:r||l,t_name:t,users:o,reply:n?void 0:i},B&&{pmid:B}))},V=k(),W=k(),J=k(),K=k(),Q=k();return C.createElement(o,{"data-qa":"create-discussion-modal",wrapperFunction:e=>C.createElement(p,n({is:"form",onSubmit:A(O)},e))},C.createElement(o.Header,null,C.createElement(o.Title,null,S("Discussion_title")),C.createElement(o.Close,{tabIndex:-1,onClick:t})),C.createElement(o.Content,null,C.createElement(p,{mbe:24},S("Discussion_description")),C.createElement(c,null,C.createElement(i,null,C.createElement(h,{htmlFor:V,required:!0},S("Discussion_target_channel")),C.createElement(_,null,r&&C.createElement(D,{control:G,name:"parentRoom",render:()=>C.createElement(w,{defaultParentRoom:r})}),!r&&C.createElement(D,{control:G,name:"parentRoom",rules:{required:S("error-the-field-is-required",{field:S("Discussion_target_channel")})},render:e=>{let{field:{name:t,onBlur:l,onChange:n,value:a}}=e;return C.createElement(q,{name:t,onBlur:l,onChange:n,value:a,id:V,placeholder:S("Discussion_target_channel_description"),disabled:!!r,"aria-invalid":!!j.parentRoom,"aria-required":"true","aria-describedby":"".concat(V,"-error")})}})),j.parentRoom&&C.createElement(b,{"aria-live":"assertive",id:"".concat(V,"-error")},j.parentRoom.message)),C.createElement(i,null,C.createElement(p,{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"spaceBetween",flexGrow:1},C.createElement(h,{htmlFor:W},S("Encrypted")),C.createElement(_,null,C.createElement(D,{control:G,name:"encrypted",render:e=>{let{field:{value:t}}=e,r=l(e.field,I);return C.createElement(s,n({id:W},r,{checked:t}))}})))),C.createElement(i,null,C.createElement(h,{htmlFor:J,required:!0},S("Discussion_name")),C.createElement(_,null,C.createElement(D,{name:"name",control:G,rules:{required:S("Field_required")},render:e=>{let{field:t}=e;return C.createElement(m,n({id:J},t,{placeholder:S("New_discussion_name"),"aria-invalid":!!j.name,"aria-required":"true","aria-describedby":"".concat(J,"-error"),addon:C.createElement(E,{name:"baloons",size:"x20"})}))}})),j.name&&C.createElement(b,{"aria-live":"assertive",id:"".concat(J,"-error")},j.name.message)),C.createElement(i,null,C.createElement(h,{htmlFor:K},S("Invite_Users")),C.createElement(_,null,C.createElement(D,{control:G,name:"usernames",render:e=>{let{field:{name:t,onChange:r,value:l,onBlur:n}}=e;return C.createElement(x,{id:K,name:t,onChange:r,value:l,onBlur:n,placeholder:S("Username_Placeholder")})}}))),C.createElement(i,null,C.createElement(h,{htmlFor:Q},S("Discussion_first_message_title")),C.createElement(_,null,C.createElement(D,{control:G,name:"firstMessage",render:e=>{let{field:t}=e;return C.createElement(u,n({id:Q},t,{placeholder:S("New_discussion_first_message"),rows:5,disabled:N,"aria-describedby":"".concat(Q,"-hint")}))}})),N&&C.createElement(f,{id:"".concat(Q,"-hint")},S("Discussion_first_message_disabled_due_to_e2e"))))),C.createElement(o.Footer,null,C.createElement(o.FooterControllers,null,C.createElement(d,{onClick:t},S("Cancel")),C.createElement(d,{type:"submit",primary:!0,disabled:!M,loading:P||U},S("Create")))))})}
//# sourceMappingURL=/dynamic/client/components/CreateDiscussion/69ad2f77f20f3add49012db98b659211de91f88b.map
