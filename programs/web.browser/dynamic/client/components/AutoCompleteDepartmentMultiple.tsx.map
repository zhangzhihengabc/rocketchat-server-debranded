)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/AutoCompleteDepartmentMultiple.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { PaginatedMultiSelectFiltered } from '@rocket.chat/fuselage';\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../hooks/useAsyncState';\nimport { useDepartmentsList } from './Omnichannel/hooks/useDepartmentsList';\n\ntype AutoCompleteDepartmentMultipleProps = {\n\tvalue?: PaginatedMultiSelectOption[];\n\tonChange: (value: PaginatedMultiSelectOption[]) => void;\n\tonlyMyDepartments?: boolean;\n\tshowArchived?: boolean;\n\tenabled?: boolean;\n} & Omit<ComponentProps<typeof PaginatedMultiSelectFiltered>, 'options'>;\n\nconst AutoCompleteDepartmentMultiple = ({\n\tvalue = [],\n\tonlyMyDepartments = false,\n\tshowArchived = false,\n\tenabled = false,\n\tonChange = () => undefined,\n}: AutoCompleteDepartmentMultipleProps) => {\n\tconst t = useTranslation();\n\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\n\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\n\t\tuseMemo(\n\t\t\t() => ({ filter: debouncedDepartmentsFilter, onlyMyDepartments, ...(showArchived && { showArchived: true }), enabled }),\n\t\t\t[debouncedDepartmentsFilter, enabled, onlyMyDepartments, showArchived],\n\t\t),\n\t);\n\n\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst departmentOptions = useMemo(() => {\n\t\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value)) || [];\n\t\treturn [...departmentsItems, ...pending];\n\t}, [departmentsItems, value]);\n\n\treturn (\n\t\t<PaginatedMultiSelectFiltered\n\t\t\twithTitle\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={departmentsFilter}\n\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\toptions={departmentOptions}\n\t\t\twidth='100%'\n\t\t\tflexShrink={0}\n\t\t\tflexGrow={0}\n\t\t\tplaceholder={t('Select_an_option')}\n\t\t\tendReached={\n\t\t\t\tdepartmentsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t? () => undefined\n\t\t\t\t\t: (start?: number) => {\n\t\t\t\t\t\t\tif (start === undefined) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn loadMoreDepartments(start, Math.min(50, departmentsTotal));\n\t\t\t\t\t  }\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteDepartmentMultiple);\n",null],"names":["_objectSpread","PaginatedMultiSelectFiltered","useDebouncedValue","useTranslation","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useDepartmentsList","module","default","link","exportDefault","_ref","value","onlyMyDepartments","showArchived","enabled","onChange","undefined","t","departmentsFilter","setDepartmentsFilter","debouncedDepartmentsFilter","itemsList","departmentsList","loadMoreItems","loadMoreDepartments","filter","phase","departmentsPhase","items","departmentsItems","itemCount","departmentsTotal","departmentOptions","pending","_ref2","find","dep","createElement","withTitle","setFilter","options","width","flexShrink","flexGrow","placeholder","endReached","LOADING","start","Math","min"],"mappings":"2BAAAA,EAAAC,EAAqEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAAA,IAAAA,CAAAA,uCAA4D,CAAAC,QAAAA,CAAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAA5DW,EAA8BE,IAAA,CAAM,wBAAwB,CAAAZ,6BAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAT,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAH,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAF,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,yCAAAA,CAAAD,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAArEC,EAAOG,aAAE,CAuEMT,EApDwBU,IAMG,GANF,CACvCC,MAAAA,EAAQ,EAAE,CACVC,kBAAAA,EAAoB,CAAA,CAAK,CACzBC,aAAAA,EAAe,CAAA,CAAK,CACpBC,QAAAA,EAAU,CAAA,CAAK,CACfC,SAAAA,EAAW,IAAMC,KAAAA,CAAAA,CACoB,CAAAN,EAC/BO,EAAInB,IACJ,CAACoB,EAAmBC,EAAqB,CAAGjB,EAAS,IAErDkB,EAA6BvB,EAAkBqB,EAAmB,KAElE,CAAEG,UAAWC,CAAe,CAAEC,cAAeC,CAAAA,CAAqB,CAAGnB,EAC1EJ,EACC,IAAAN,EAAAA,EAAA,CAAS8B,OAAQL,EAA4BR,kBAAAA,CAAiB,EAAMC,GAAgB,CAAEA,aAAc,CAAA,CAAI,GAAE,CAAA,EAAA,CAAGC,QAAAA,CAAO,GACpH,CAACM,EAA4BN,EAASF,EAAmBC,EAAa,GAIlE,CAAEa,MAAOC,CAAgB,CAAEC,MAAOC,CAAgB,CAAEC,UAAWC,CAAAA,CAAkB,CAAG5B,EAAcmB,GAElGU,EAAoB/B,EAAQ,KACjC,IAAMgC,EAAUtB,EAAMc,MAAM,CAACS,IAAA,GAAC,CAAEvB,MAAAA,CAAAA,CAAO,CAAAuB,EAAA,MAAK,CAACL,EAAiBM,IAAI,CAAEC,GAAQA,EAAIzB,KAAK,GAAKA,EAAM,IAAK,EAAE,CACvG,MAAO,IAAIkB,KAAqBI,EAAQ,AACzC,EAAG,CAACJ,EAAkBlB,EAAM,EAE5B,OACCZ,EAAAsC,aAAA,CAACzC,EAA4B,CAC5B0C,UAAS,CAAA,EACT3B,MAAOA,EACPI,SAAUA,EACVU,OAAQP,EACRqB,UAAWpB,EACXqB,QAASR,EACTS,MAAM,OACNC,WAAY,EACZC,SAAU,EACVC,YAAa3B,EAAE,oBACf4B,WACClB,IAAqBvB,EAAgB0C,OAAO,CACzC,IAAM9B,KAAAA,EACL+B,IACD,GAAIA,AAAU/B,KAAAA,IAAV+B,EAGJ,OAAOvB,EAAoBuB,EAAOC,KAAKC,GAAG,CAAC,GAAIlB,GAC/C,CACH,EAGJ"}