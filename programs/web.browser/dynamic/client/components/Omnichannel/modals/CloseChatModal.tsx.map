)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/components/Omnichannel/modals/CloseChatModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextInput,\n\tModal,\n\tBox,\n\tCheckBox,\n\tDivider,\n\tEmailInput,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n} from '@rocket.chat/fuselage';\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../../ee/client/hooks/useHasLicenseModule';\nimport { dispatchToastMessage } from '../../../lib/toast';\nimport GenericModal from '../../GenericModal';\nimport Tags from '../Tags';\n\nconst CloseChatModal = ({\n\tdepartment,\n\tvisitorEmail,\n\tonCancel,\n\tonConfirm,\n}: {\n\tdepartment?: ILivechatDepartment | null;\n\tvisitorEmail?: string;\n\tonCancel: () => void;\n\tonConfirm: (\n\t\tcomment?: string,\n\t\ttags?: string[],\n\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\trequestData?: { email: string; subject: string },\n\t) => Promise<void>;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst {\n\t\tformState: { errors },\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetError,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t} = useForm();\n\n\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\n\tconst [tagRequired, setTagRequired] = useState(false);\n\n\tconst tags = watch('tags');\n\tconst comment = watch('comment');\n\tconst transcriptEmail = watch('transcriptEmail');\n\tconst subject = watch('subject');\n\n\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\n\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n\n\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail;\n\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n\n\tconst handleTags = (value: string[]): void => {\n\t\tsetValue('tags', value);\n\t};\n\n\tconst onSubmit = useCallback(\n\t\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\n\t\t\tconst preferences = {\n\t\t\t\tomnichannelTranscriptPDF: !!transcriptPDF,\n\t\t\t\tomnichannelTranscriptEmail: !!transcriptEmail,\n\t\t\t};\n\t\t\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\n\n\t\t\tif (!comment?.trim() && commentRequired) {\n\t\t\t\tsetError('comment', { type: 'custom', message: t('The_field_is_required', t('Comment')) });\n\t\t\t}\n\n\t\t\tif (transcriptEmail && !subject) {\n\t\t\t\tsetError('subject', { type: 'custom', message: t('The_field_is_required', t('Subject')) });\n\t\t\t}\n\n\t\t\tif (!tags?.length && tagRequired) {\n\t\t\t\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\n\t\t\t}\n\n\t\t\tif (!errors.comment || errors.tags) {\n\t\t\t\tonConfirm(comment, tags, preferences, requestData);\n\t\t\t}\n\t\t},\n\t\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm],\n\t);\n\n\tconst cannotSubmit = useMemo(() => {\n\t\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\n\t\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\n\t\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n\n\t\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n\n\tuseEffect(() => {\n\t\tif (department?.requestTagBeforeClosingChat) {\n\t\t\tsetTagRequired(true);\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tif (commentRequired) {\n\t\t\tsetFocus('comment');\n\t\t}\n\t}, [commentRequired, setFocus]);\n\n\tuseEffect(() => {\n\t\tif (tagRequired) {\n\t\t\tregister('tags');\n\t\t}\n\t}, [register, tagRequired]);\n\n\tuseEffect(() => {\n\t\tif (transcriptEmail) {\n\t\t\tif (!visitorEmail) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetValue('subject', subject || t('Transcript_of_your_livechat_conversation'));\n\t\t}\n\t}, [transcriptEmail, setValue, visitorEmail, subject, t]);\n\n\treturn commentRequired || tagRequired || canSendTranscript ? (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='baloon-close-top-right' />\n\t\t\t\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<Box color='annotation'>{t('Close_room_description')}</Box>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t{...register('comment')}\n\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\terrors.comment &&\n\t\t\t\t\t\t\t\t\tt('error-the-field-is-required', {\n\t\t\t\t\t\t\t\t\t\tfield: t('Comment'),\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tplaceholder={t('Please_add_a_comment')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.comment?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\n\t\t\t\t\t\t<FieldError>{errors.tags?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t{canSendTranscript && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t{canSendTranscriptPDF && (\n\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\n\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-pdf' color='default' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t\t{t('Omnichannel_transcript_pdf')}\n\t\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{canSendTranscriptEmail && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\n\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-email' color='default' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('Omnichannel_transcript_email')}\n\t\t\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t{transcriptEmail && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={14}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('subject', { required: true })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='active'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terrors.subject &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tt('error-the-field-is-required', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfield: t('Subject'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Field marginBlockStart={16}>\n\t\t\t\t\t\t\t\t<FieldLabel color='annotation' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t{canSendTranscriptPDF && canSendTranscriptEmail\n\t\t\t\t\t\t\t\t\t\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\n\t\t\t\t\t\t\t\t\t\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\n\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button type='submit' disabled={cannotSubmit} primary>\n\t\t\t\t\t\t{t('Confirm')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t) : (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\n\t\t\tonConfirm={(): Promise<void> => onConfirm()}\n\t\t\tonCancel={onCancel}\n\t\t\tonClose={onCancel}\n\t\t\tconfirmText={t('Confirm')}\n\t\t></GenericModal>\n\t);\n};\n\nexport default CloseChatModal;\n",null],"names":["_extends","Field","FieldGroup","Button","TextInput","Modal","Box","CheckBox","Divider","EmailInput","FieldLabel","FieldRow","FieldError","usePermission","useSetting","useTranslation","useUserPreference","React","useCallback","useState","useEffect","useMemo","useForm","useHasLicenseModule","dispatchToastMessage","GenericModal","Tags","module","link","default","v","exportDefault","_ref","_useUserPreference","_useUserPreference2","_errors$comment","_errors$tags","_errors$subject","department","visitorEmail","onCancel","onConfirm","t","formState","errors","handleSubmit","register","setError","setFocus","setValue","watch","commentRequired","tagRequired","setTagRequired","tags","comment","transcriptEmail","subject","userTranscriptEmail","userTranscriptPDF","hasLicense","transcriptPDFPermission","transcriptEmailPermission","canSendTranscriptEmail","canSendTranscriptPDF","canSendTranscript","onSubmit","_ref2","transcriptPDF","requestData","email","undefined","trim","type","message","length","omnichannelTranscriptPDF","omnichannelTranscriptEmail","cannotSubmit","cannotSendTag","cannotSendComment","cannotSendTranscriptEmail","Boolean","requestTagBeforeClosingChat","createElement","wrapperFunction","props","is","Header","Icon","name","Title","Close","onClick","Content","fontScale","color","required","error","field","flexGrow","placeholder","handler","value","_id","Fragment","marginBlockStart","id","htmlFor","disabled","className","Footer","FooterControllers","primary","variant","title","onClose","confirmText"],"mappings":"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"}