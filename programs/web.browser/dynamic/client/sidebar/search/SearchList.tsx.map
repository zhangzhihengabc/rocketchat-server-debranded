)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/search/SearchList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Sidebar, TextInput, Box, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject, SetStateAction, Dispatch, FormEventHandler, Ref, MouseEventHandler } from 'react';\nimport React, { forwardRef, useState, useMemo, useEffect, useRef } from 'react';\nimport type { VirtuosoHandle } from 'react-virtuoso';\nimport { Virtuoso } from 'react-virtuoso';\nimport tinykeys from 'tinykeys';\n\nimport { getConfig } from '../../lib/utils/getConfig';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\nimport ScrollerWithCustomProps from './ScrollerWithCustomProps';\n\nconst mobileCheck = function () {\n\tlet check = false;\n\t(function (a: string) {\n\t\tif (\n\t\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n\t\t\t\ta,\n\t\t\t) ||\n\t\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n\t\t\t\ta.substr(0, 4),\n\t\t\t)\n\t\t)\n\t\t\tcheck = true;\n\t})(navigator.userAgent || navigator.vendor || window.opera || '');\n\treturn check;\n};\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Window {\n\t\topera?: string;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Navigator {\n\t\tuserAgentData?: {\n\t\t\tmobile: boolean;\n\t\t};\n\t}\n}\n\nconst shortcut = ((): string => {\n\tif (navigator.userAgentData?.mobile || mobileCheck()) {\n\t\treturn '';\n\t}\n\tif (window.navigator.platform.toLowerCase().includes('mac')) {\n\t\treturn '(\\u2318+K)';\n\t}\n\treturn '(\\u2303+K)';\n})();\n\nconst LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\n\nconst options = {\n\tsort: {\n\t\tlm: -1,\n\t\tname: 1,\n\t},\n\tlimit: LIMIT,\n} as const;\n\nconst useSearchItems = (filterText: string): UseQueryResult<(ISubscription & IRoom)[] | undefined, Error> => {\n\tconst [, mention, name] = useMemo(() => filterText.match(/(@|#)?(.*)/i) || [], [filterText]);\n\tconst query = useMemo(() => {\n\t\tconst filterRegex = new RegExp(escapeRegExp(name), 'i');\n\n\t\treturn {\n\t\t\t$or: [{ name: filterRegex }, { fname: filterRegex }],\n\t\t\t...(mention && {\n\t\t\t\tt: mention === '@' ? 'd' : { $ne: 'd' },\n\t\t\t}),\n\t\t};\n\t}, [name, mention]);\n\n\tconst localRooms = useUserSubscriptions(query, options);\n\n\tconst usernamesFromClient = [...localRooms?.map(({ t, name }) => (t === 'd' ? name : null))].filter(Boolean) as string[];\n\n\tconst searchForChannels = mention === '#';\n\tconst searchForDMs = mention === '@';\n\n\tconst type = useMemo(() => {\n\t\tif (searchForChannels) {\n\t\t\treturn { users: false, rooms: true, includeFederatedRooms: true };\n\t\t}\n\t\tif (searchForDMs) {\n\t\t\treturn { users: true, rooms: false };\n\t\t}\n\t\treturn { users: true, rooms: true, includeFederatedRooms: true };\n\t}, [searchForChannels, searchForDMs]);\n\n\tconst getSpotlight = useMethod('spotlight');\n\n\treturn useQuery(\n\t\t['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(({ _id }) => _id)],\n\t\tasync () => {\n\t\t\tif (localRooms.length === LIMIT) {\n\t\t\t\treturn localRooms;\n\t\t\t}\n\n\t\t\tconst spotlight = await getSpotlight(name, usernamesFromClient, type);\n\n\t\t\tconst filterUsersUnique = ({ _id }: { _id: string }, index: number, arr: { _id: string }[]): boolean =>\n\t\t\t\tindex === arr.findIndex((user) => _id === user._id);\n\n\t\t\tconst roomFilter = (room: { t: string; uids?: string[]; _id: string; name?: string }): boolean =>\n\t\t\t\t!localRooms.find(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\t(room.t === 'd' && room.uids && room.uids.length > 1 && room.uids?.includes(item._id)) ||\n\t\t\t\t\t\t[item.rid, item._id].includes(room._id),\n\t\t\t\t);\n\t\t\tconst usersFilter = (user: { _id: string }): boolean =>\n\t\t\t\t!localRooms.find((room) => room.t === 'd' && room.uids && room.uids?.length === 2 && room.uids.includes(user._id));\n\n\t\t\tconst userMap = (user: {\n\t\t\t\t_id: string;\n\t\t\t\tname: string;\n\t\t\t\tusername: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t}): {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tfname: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t} => ({\n\t\t\t\t_id: user._id,\n\t\t\t\tt: 'd',\n\t\t\t\tname: user.username,\n\t\t\t\tfname: user.name,\n\t\t\t\tavatarETag: user.avatarETag,\n\t\t\t});\n\n\t\t\ttype resultsFromServerType = {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tteamMain?: boolean;\n\t\t\t\tfname?: string;\n\t\t\t\tavatarETag?: string | undefined;\n\t\t\t\tuids?: string[] | undefined;\n\t\t\t}[];\n\n\t\t\tconst resultsFromServer: resultsFromServerType = [];\n\t\t\tresultsFromServer.push(...spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap));\n\t\t\tresultsFromServer.push(...spotlight.rooms.filter(roomFilter));\n\n\t\t\tconst exact = resultsFromServer?.filter((item) => [item.name, item.fname].includes(name));\n\t\t\treturn Array.from(new Set([...exact, ...localRooms, ...resultsFromServer]));\n\t\t},\n\t\t{\n\t\t\tstaleTime: 60_000,\n\t\t\tkeepPreviousData: true,\n\t\t\tplaceholderData: localRooms,\n\t\t},\n\t);\n};\n\nconst useInput = (initial: string): { value: string; onChange: FormEventHandler; setValue: Dispatch<SetStateAction<string>> } => {\n\tconst [value, setValue] = useState(initial);\n\tconst onChange = useMutableCallback((e) => {\n\t\tsetValue(e.currentTarget.value);\n\t});\n\treturn { value, onChange, setValue };\n};\n\nconst toggleSelectionState = (next: HTMLElement, current: HTMLElement | undefined, input: HTMLElement | undefined): void => {\n\tinput?.setAttribute('aria-activedescendant', next.id);\n\tnext.setAttribute('aria-selected', 'true');\n\tnext.classList.add('rcx-sidebar-item--selected');\n\tif (current) {\n\t\tcurrent.removeAttribute('aria-selected');\n\t\tcurrent.classList.remove('rcx-sidebar-item--selected');\n\t}\n};\n\n/**\n * @type import('react').ForwardRefExoticComponent<{ onClose: unknown } & import('react').RefAttributes<HTMLElement>>\n */\n\ntype SearchListProps = {\n\tonClose: () => void;\n};\n\nconst SearchList = forwardRef(function SearchList({ onClose }: SearchListProps, ref): ReactElement {\n\tconst listId = useUniqueId();\n\tconst t = useTranslation();\n\tconst { setValue: setFilterValue, ...filter } = useInput('');\n\n\tconst cursorRef = useRef<HTMLInputElement>(null);\n\tconst autofocus: Ref<HTMLInputElement> = useMergedRefs(useAutoFocus<HTMLInputElement>(), cursorRef);\n\n\tconst listRef = useRef<VirtuosoHandle>(null);\n\tconst boxRef = useRef<HTMLDivElement>(null);\n\n\tconst selectedElement: MutableRefObject<HTMLElement | null | undefined> = useRef(null);\n\tconst itemIndexRef = useRef(0);\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\n\tconst extended = sidebarViewMode === 'extended';\n\n\tconst filterText = useDebouncedValue(filter.value, 100);\n\n\tconst placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n\n\tconst { data: items = [], isLoading } = useSearchItems(filterText);\n\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\titems,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tavatarTemplate,\n\t\t\tuseRealName,\n\t\t\textended,\n\t\t\tsidebarViewMode,\n\t\t}),\n\t\t[avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tconst changeSelection = useMutableCallback((dir) => {\n\t\tlet nextSelectedElement = null;\n\n\t\tif (dir === 'up') {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.previousSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t} else {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.nextSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t}\n\n\t\tif (nextSelectedElement) {\n\t\t\ttoggleSelectionState(nextSelectedElement, selectedElement.current || undefined, cursorRef?.current || undefined);\n\t\t\treturn nextSelectedElement;\n\t\t}\n\t\treturn selectedElement.current;\n\t});\n\n\tconst resetCursor = useMutableCallback(() => {\n\t\titemIndexRef.current = 0;\n\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\n\t\tselectedElement.current = boxRef.current?.querySelector('a.rcx-sidebar-item');\n\n\t\tif (selectedElement.current) {\n\t\t\ttoggleSelectionState(selectedElement.current, undefined, cursorRef?.current || undefined);\n\t\t}\n\t});\n\n\tusePreventDefault(boxRef);\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t});\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t}, [filterText, resetCursor]);\n\n\tuseEffect(() => {\n\t\tif (!cursorRef?.current) {\n\t\t\treturn;\n\t\t}\n\t\treturn tinykeys(cursorRef?.current, {\n\t\t\tEscape: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetFilterValue((value) => {\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}\n\t\t\t\t\tresetCursor();\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t},\n\t\t\tTab: onClose,\n\t\t\tArrowUp: () => {\n\t\t\t\tconst currentElement = changeSelection('up');\n\t\t\t\titemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tArrowDown: () => {\n\t\t\t\tconst currentElement = changeSelection('down');\n\t\t\t\titemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tEnter: () => {\n\t\t\t\tif (selectedElement.current) {\n\t\t\t\t\tselectedElement.current.click();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n\n\tconst handleClick: MouseEventHandler<HTMLElement> = (e): void => {\n\t\tif (e.target instanceof Element && [e.target.tagName, e.target.parentElement?.tagName].includes('BUTTON')) {\n\t\t\treturn;\n\t\t}\n\t\treturn onClose();\n\t};\n\n\treturn (\n\t\t<Box\n\t\t\tposition='absolute'\n\t\t\trcx-sidebar\n\t\t\th='full'\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tzIndex={99}\n\t\t\tw='full'\n\t\t\tclassName={css`\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t`}\n\t\t\tref={ref}\n\t\t\trole='search'\n\t\t>\n\t\t\t<Sidebar.TopBar.Section {...({ flexShrink: 0 } as any)} is='form'>\n\t\t\t\t<TextInput\n\t\t\t\t\taria-owns={listId}\n\t\t\t\t\tdata-qa='sidebar-search-input'\n\t\t\t\t\tref={autofocus}\n\t\t\t\t\t{...filter}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\trole='searchbox'\n\t\t\t\t\taddon={<Icon name='cross' size='x20' onClick={onClose} />}\n\t\t\t\t/>\n\t\t\t</Sidebar.TopBar.Section>\n\t\t\t<Box\n\t\t\t\tref={boxRef}\n\t\t\t\trole='listbox'\n\t\t\t\tid={listId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tflexShrink={1}\n\t\t\t\th='full'\n\t\t\t\tw='full'\n\t\t\t\tdata-qa='sidebar-search-result'\n\t\t\t\taria-live='polite'\n\t\t\t\taria-atomic='true'\n\t\t\t\taria-busy={isLoading}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<Virtuoso\n\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\ttotalCount={items.length}\n\t\t\t\t\tdata={items}\n\t\t\t\t\tcomponents={{ Scroller: ScrollerWithCustomProps }}\n\t\t\t\t\tcomputeItemKey={(_, room) => room._id}\n\t\t\t\t\titemContent={(_, data): ReactElement => <Row data={itemData} item={data} />}\n\t\t\t\t\tref={listRef}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n});\n\nexport default SearchList;\n",null],"names":["_navigator$userAgentD","a","_extends","_taggedTemplateLiteral","_objectWithoutProperties","_objectSpread","css","Sidebar","TextInput","Box","Icon","useMutableCallback","useDebouncedValue","useAutoFocus","useUniqueId","useMergedRefs","escapeRegExp","useUserPreference","useUserSubscriptions","useSetting","useTranslation","useMethod","useQuery","React","forwardRef","useState","useMemo","useEffect","useRef","Virtuoso","tinykeys","getConfig","useAvatarTemplate","usePreventDefault","useTemplateByViewMode","Row","ScrollerWithCustomProps","check","module","link","default","shortcut","navigator","userAgentData","mobile","userAgent","vendor","window","opera","test","substr","platform","toLowerCase","includes","LIMIT","parseInt","String","options","sort","lm","name","limit","useSearchItems","filterText","mention","match","query","filterRegex","RegExp","$or","fname","t","$ne","localRooms","usernamesFromClient","map","_ref","filter","Boolean","searchForChannels","searchForDMs","type","users","rooms","includeFederatedRooms","getSpotlight","_ref2","_id","length","spotlight","resultsFromServer","push","_ref3","index","arr","findIndex","user","find","room","_room$uids2","uids","username","avatarETag","item","_room$uids","rid","exact","Array","from","Set","staleTime","keepPreviousData","placeholderData","useInput","initial","value","setValue","onChange","e","currentTarget","toggleSelectionState","next","current","input","setAttribute","id","classList","add","removeAttribute","remove","SearchList","_ref4","ref","onClose","listId","_useInput","setFilterValue","_excluded","cursorRef","autofocus","listRef","boxRef","selectedElement","itemIndexRef","sidebarViewMode","useRealName","sideBarItemTemplate","avatarTemplate","extended","placeholder","join","data","items","isLoading","itemData","SideBarItemTemplate","changeSelection","dir","_selectedElement$curr","_selectedElement$curr2","_selectedElement$curr3","_selectedElement$curr4","nextSelectedElement","potentialElement","parentElement","previousSibling","querySelector","nextSibling","undefined","resetCursor","_listRef$current","_boxRef$current","scrollToIndex","Escape","event","preventDefault","Tab","ArrowUp","_listRef$current2","currentElement","Math","max","ArrowDown","_listRef$current3","min","Enter","click","createElement","position","h","display","flexDirection","zIndex","w","className","_templateObject","role","TopBar","Section","flexShrink","is","addon","size","onClick","tabIndex","_e$target$parentEleme","target","Element","tagName","style","height","width","totalCount","components","Scroller","computeItemKey","_","itemContent","exportDefault"],"mappings":"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"}