)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/footer/voip/index.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { VoIpCallerInfo } from '@rocket.chat/core-typings';\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useVoipFooterMenu } from '../../../../ee/client/hooks/useVoipFooterMenu';\nimport {\n\tuseCallActions,\n\tuseCallCreateRoom,\n\tuseCallerInfo,\n\tuseCallOpenRoom,\n\tuseIsVoipEnterprise,\n\tuseOpenedRoomInfo,\n\tuseQueueCounter,\n\tuseQueueName,\n} from '../../../contexts/CallContext';\nimport SidebarFooterDefault from '../SidebarFooterDefault';\nimport { VoipFooter as VoipFooterComponent } from './VoipFooter';\n\nexport const VoipFooter = (): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst callerInfo = useCallerInfo();\n\tconst callActions = useCallActions();\n\tconst dispatchEvent = useEndpoint('POST', '/v1/voip/events');\n\n\tconst createRoom = useCallCreateRoom();\n\tconst openRoom = useCallOpenRoom();\n\tconst queueCounter = useQueueCounter();\n\tconst queueName = useQueueName();\n\tconst openedRoomInfo = useOpenedRoomInfo();\n\tconst options = useVoipFooterMenu();\n\n\tconst [muted, setMuted] = useState(false);\n\tconst [paused, setPaused] = useState(false);\n\tconst isEnterprise = useIsVoipEnterprise();\n\n\tconst toggleMic = useCallback(\n\t\t(state: boolean) => {\n\t\t\tstate ? callActions.mute() : callActions.unmute();\n\t\t\tsetMuted(state);\n\t\t},\n\t\t[callActions],\n\t);\n\n\tconst togglePause = useCallback(\n\t\t(state: boolean) => {\n\t\t\tstate ? callActions.pause() : callActions.resume();\n\t\t\tsetMuted(false);\n\t\t\tsetPaused(state);\n\t\t},\n\t\t[callActions],\n\t);\n\n\tconst getSubtitle = (state: VoIpCallerInfo['state']): string => {\n\t\tconst subtitles: Record<string, string> = {\n\t\t\tIN_CALL: t('In_progress'),\n\t\t\tOFFER_RECEIVED: t('Ringing'),\n\t\t\tOFFER_SENT: t('Calling'),\n\t\t\tON_HOLD: t('On_Hold'),\n\t\t};\n\n\t\treturn subtitles[state] || '';\n\t};\n\n\tconst getCallsInQueueText = useMemo((): string => {\n\t\tif (queueCounter === 0) {\n\t\t\treturn t('Calls_in_queue_empty');\n\t\t}\n\n\t\tif (queueCounter === 1) {\n\t\t\treturn t('Calls_in_queue', { calls: queueCounter });\n\t\t}\n\n\t\treturn t('Calls_in_queue_plural', { calls: queueCounter });\n\t}, [queueCounter, t]);\n\n\tif (!('caller' in callerInfo)) {\n\t\treturn <SidebarFooterDefault />;\n\t}\n\n\treturn (\n\t\t<VoipFooterComponent\n\t\t\tcaller={callerInfo.caller}\n\t\t\tcallerState={callerInfo.state}\n\t\t\tcallActions={callActions}\n\t\t\ttitle={queueName || t('Phone_call')}\n\t\t\tsubtitle={getSubtitle(callerInfo.state)}\n\t\t\tmuted={muted}\n\t\t\tpaused={paused}\n\t\t\ttoggleMic={toggleMic}\n\t\t\ttogglePause={togglePause}\n\t\t\tcreateRoom={createRoom}\n\t\t\topenRoom={openRoom}\n\t\t\tcallsInQueue={getCallsInQueueText}\n\t\t\tdispatchEvent={dispatchEvent}\n\t\t\topenedRoomInfo={openedRoomInfo}\n\t\t\tisEnterprise={isEnterprise}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n",null],"names":["useEndpoint","React","useCallback","useMemo","useState","useVoipFooterMenu","useCallActions","useCallCreateRoom","useCallerInfo","useCallOpenRoom","useIsVoipEnterprise","useOpenedRoomInfo","useQueueCounter","useQueueName","SidebarFooterDefault","VoipFooterComponent","module","export","VoipFooter","useTranslation","default","t","callerInfo","callActions","dispatchEvent","createRoom","openRoom","queueCounter","queueName","openedRoomInfo","options","muted","setMuted","paused","setPaused","isEnterprise","toggleMic","state","mute","unmute","togglePause","pause","resume","getCallsInQueueText","calls","createElement","caller","callerState","title","subtitle","getSubtitle","subtitles","IN_CALL","OFFER_RECEIVED","OFFER_SENT","ON_HOLD","callsInQueue"],"mappings":"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"}