)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/footer/voip/VoipFooter.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IVoipRoom, ICallerInfo, VoIpCallerInfo } from '@rocket.chat/core-typings';\nimport { VoipClientEvents } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, Button, ButtonGroup, SidebarFooter, Menu, IconButton } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, MouseEvent, ReactNode } from 'react';\nimport React from 'react';\n\nimport type { VoipFooterMenuOptions } from '../../../../ee/client/hooks/useVoipFooterMenu';\nimport type { CallActionsType } from '../../../contexts/CallContext';\nimport { useOmnichannelContactLabel } from './hooks/useOmnichannelContactLabel';\n\ntype VoipFooterPropsType = {\n\tcaller: ICallerInfo;\n\tcallerState: VoIpCallerInfo['state'];\n\tcallActions: CallActionsType;\n\ttitle: string;\n\tsubtitle: string;\n\tmuted: boolean;\n\tpaused: boolean;\n\ttoggleMic: (state: boolean) => void;\n\ttogglePause: (state: boolean) => void;\n\tcallsInQueue: string;\n\tcreateRoom: (caller: ICallerInfo, callDirection?: IVoipRoom['direction']) => Promise<IVoipRoom['_id']>;\n\topenRoom: (rid: IVoipRoom['_id']) => void;\n\tdispatchEvent: (params: { event: VoipClientEvents; rid: string; comment?: string }) => void;\n\topenedRoomInfo: { v: { token?: string | undefined }; rid: string };\n\tisEnterprise: boolean;\n\tchildren?: ReactNode;\n\toptions: VoipFooterMenuOptions;\n};\n\nexport const VoipFooter = ({\n\tcaller,\n\tcallerState,\n\tcallActions,\n\ttitle,\n\tsubtitle,\n\tmuted,\n\tpaused,\n\ttoggleMic,\n\ttogglePause,\n\tcreateRoom,\n\topenRoom,\n\tcallsInQueue,\n\tdispatchEvent,\n\topenedRoomInfo,\n\tisEnterprise = false,\n\tchildren,\n\toptions,\n}: VoipFooterPropsType): ReactElement => {\n\tconst contactLabel = useOmnichannelContactLabel(caller);\n\tconst t = useTranslation();\n\n\tconst cssClickable =\n\t\tcallerState === 'IN_CALL' || callerState === 'ON_HOLD'\n\t\t\t? css`\n\t\t\t\t\tcursor: pointer;\n\t\t\t  `\n\t\t\t: '';\n\n\tconst handleHold = (e: MouseEvent<HTMLButtonElement>): void => {\n\t\te.stopPropagation();\n\t\tconst eventName = paused ? 'VOIP-CALL-UNHOLD' : 'VOIP-CALL-ON-HOLD';\n\t\tdispatchEvent({ event: VoipClientEvents[eventName], rid: openedRoomInfo.rid });\n\t\ttogglePause(!paused);\n\t};\n\n\tconst holdTitle = ((): string => {\n\t\tif (!isEnterprise) {\n\t\t\treturn t('Hold_Premium_only');\n\t\t}\n\t\treturn paused ? t('Resume') : t('Hold');\n\t})();\n\n\treturn (\n\t\t<SidebarFooter elevated>\n\t\t\t<Box\n\t\t\t\tclassName={cssClickable}\n\t\t\t\tonClick={(): void => {\n\t\t\t\t\tif (callerState === 'IN_CALL' || callerState === 'ON_HOLD') {\n\t\t\t\t\t\topenRoom(openedRoomInfo.rid);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Box display='flex' justifyContent='center' fontScale='c1' color='font-default' mbe='14px'>\n\t\t\t\t\t{callsInQueue}\n\t\t\t\t</Box>\n\t\t\t\t<Box display='flex' flexDirection='row' h='24px' mi='16px' mbs='12px' mbe='8px' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t<Box color='font-default' fontScale='c2' withTruncatedText>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Box>\n\t\t\t\t\t{(callerState === 'IN_CALL' || callerState === 'ON_HOLD') && (\n\t\t\t\t\t\t<ButtonGroup onClick={(e): void => e.stopPropagation()}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tdisabled={paused}\n\t\t\t\t\t\t\t\ticon={muted ? 'mic-off' : 'mic'}\n\t\t\t\t\t\t\t\tcolor={muted ? 'disabled' : 'hint'}\n\t\t\t\t\t\t\t\tdata-tooltip={muted ? t('Turn_on_microphone') : t('Turn_off_microphone')}\n\t\t\t\t\t\t\t\tonClick={(e): void => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\ttoggleMic(!muted);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tdata-tooltip={holdTitle}\n\t\t\t\t\t\t\t\tdisabled={!isEnterprise}\n\t\t\t\t\t\t\t\ticon={paused ? 'pause' : 'pause-unfilled'}\n\t\t\t\t\t\t\t\tcolor={paused ? 'disabled' : 'hint'}\n\t\t\t\t\t\t\t\tonClick={handleHold}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{options && <Menu color='disabled' data-tooltip={t('More_options')} options={options} />}\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t\t<Box display='flex' flexDirection='row' mi='16px' mbe='12px' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Box color='font-default' fontScale='p2' withTruncatedText>\n\t\t\t\t\t\t\t{contactLabel || t('Anonymous')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box color='font-default' fontScale='c1' withTruncatedText>\n\t\t\t\t\t\t\t{subtitle}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t{(callerState === 'IN_CALL' || callerState === 'ON_HOLD' || callerState === 'OFFER_SENT') && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\ticon='phone-off'\n\t\t\t\t\t\t\t\tdisabled={paused}\n\t\t\t\t\t\t\t\taria-label={t('End_call')}\n\t\t\t\t\t\t\t\tdata-tooltip={t('End_Call')}\n\t\t\t\t\t\t\t\tonClick={(e): unknown => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tmuted && toggleMic(false);\n\t\t\t\t\t\t\t\t\tpaused && togglePause(false);\n\t\t\t\t\t\t\t\t\treturn callActions.end();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{callerState === 'OFFER_RECEIVED' && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ticon='phone-off'\n\t\t\t\t\t\t\t\tdata-tooltip={t('Decline')}\n\t\t\t\t\t\t\t\taria-label={t('Decline')}\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\tonClick={callActions.reject}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{callerState === 'OFFER_RECEIVED' && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tsuccess\n\t\t\t\t\t\t\t\ticon='phone'\n\t\t\t\t\t\t\t\tdata-tooltip={t('Accept')}\n\t\t\t\t\t\t\t\tonClick={async (): Promise<void> => {\n\t\t\t\t\t\t\t\t\tcallActions.pickUp();\n\t\t\t\t\t\t\t\t\tconst rid = await createRoom(caller);\n\t\t\t\t\t\t\t\t\tdispatchEvent({ event: VoipClientEvents['VOIP-CALL-STARTED'], rid });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{children}\n\t\t</SidebarFooter>\n\t);\n};\n",null],"names":["_taggedTemplateLiteral","VoipClientEvents","css","Box","Button","ButtonGroup","SidebarFooter","Menu","IconButton","useTranslation","React","useOmnichannelContactLabel","module","link","default","export","VoipFooter","_ref","caller","callerState","callActions","title","subtitle","muted","paused","toggleMic","togglePause","createRoom","openRoom","callsInQueue","dispatchEvent","openedRoomInfo","isEnterprise","children","options","contactLabel","t","cssClickable","_templateObject","holdTitle","createElement","elevated","className","onClick","rid","display","justifyContent","fontScale","color","mbe","flexDirection","h","mi","mbs","alignItems","withTruncatedText","e","stopPropagation","small","disabled","icon","eventName","event","square","danger","end","reject","success","pickUp"],"mappings":"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"}