function module(e,t,a){let n,l,r,i,c,o,d,s,m,u,h,E,_,p,f,y,b,g,x,F,C,w,k,v,D,I,T,M,q,O;a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},1),a.link("@rocket.chat/fuselage",{Box(e){r=e},Modal(e){i=e},Button(e){c=e},TextInput(e){o=e},Icon(e){d=e},Field(e){s=e},ToggleSwitch(e){m=e},FieldGroup(e){u=e},FieldLabel(e){h=e},FieldRow(e){E=e},FieldError(e){_=e},FieldHint(e){p=e},FieldDescription(e){f=e}},0),a.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){y=e}},1),a.link("@rocket.chat/ui-contexts",{useSetting(e){b=e},useTranslation(e){g=e},useEndpoint(e){x=e},usePermission(e){F=e},useToastMessageDispatch(e){C=e},usePermissionWithScopedRoles(e){w=e}},2),a.link("react",{default(e){k=e},useEffect(e){v=e},useMemo(e){D=e}},3),a.link("react-hook-form",{useForm(e){I=e},Controller(e){T=e}},4),a.link("../../../../ee/client/hooks/useHasLicenseModule",{useHasLicenseModule(e){M=e}},5),a.link("../../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated",{default(e){q=e}},6),a.link("../../../lib/utils/goToRoomById",{goToRoomById(e){O=e}},7);let P=(e,t)=>"loading"!==e&&e?t?"Federation_Matrix_Federated_Description":"Federation_Matrix_Federated_Description_disabled":"error-this-is-a-premium-feature";a.exportDefault(e=>{var t;let{teamId:a="",onClose:R}=e,S=g(),B=w("set-readonly",["owner"]),j=b("E2E_Enable"),A=b("UTF8_Channel_Names_Validation"),U=b("UI_Allow_room_names_with_special_chars"),H=b("Federation_Matrix_enabled")||!1,L=b("E2E_Enabled_Default_PrivateRooms"),N=F("create-c"),z=F("create-p"),G=D(()=>new RegExp("^".concat(A,"$")),[A]),V=M("federation"),W="loading"!==V&&V&&H,$=x("GET","/v1/rooms.nameExists"),J=x("POST","/v1/channels.create"),K=x("POST","/v1/groups.create"),Q=C(),X=D(()=>!N&&z?"p":!!N&&!z&&"c",[N,z]),{register:Y,formState:{errors:Z},handleSubmit:ee,control:et,setValue:ea,watch:en}=I({mode:"onBlur",defaultValues:{members:[],name:"",topic:"",isPrivate:!X||"p"===X,readOnly:!1,encrypted:null!=L&&L,broadcast:!1,federated:!1}}),{isPrivate:el,broadcast:er,readOnly:ei,federated:ec}=en();v(()=>{el||ea("encrypted",!1),er&&ea("encrypted",!1),ec&&(ea("encrypted",!1),ea("broadcast",!1),ea("readOnly",!1)),ea("readOnly",er)},[ec,ea,er,el]);let eo=async e=>{if(!e)return;if(!U&&!G.test(e))return S("error-invalid-name");let{exists:t}=await $({roomName:e});if(t)return S("Channel_already_exist",e)},ed=async e=>{let t,{name:n,members:r,readOnly:i,topic:c,broadcast:o,encrypted:d,federated:s}=e,m={name:n,members:r,readOnly:i,extraData:l(l({topic:c,broadcast:o,encrypted:d},s&&{federated:s}),a&&{teamId:a})};try{el?(t=await K(m),a||O(t.group._id)):(t=await J(m),a||O(t.channel._id)),Q({type:"success",message:S("Room_has_been_created")})}catch(e){Q({type:"error",message:e})}finally{R()}},es=D(()=>!el||er||!j||!!L,[j,L,er,el]),em=y(),eu=y(),eh=y(),eE=y(),e_=y(),ep=y(),ef=y(),ey=y(),eb=y();return k.createElement(i,{"data-qa":"create-channel-modal","aria-labelledby":"".concat(em,"-title"),wrapperFunction:e=>k.createElement(r,n({is:"form",id:em,onSubmit:ee(ed)},e))},k.createElement(i.Header,null,k.createElement(i.Title,{id:"".concat(em,"-title")},S("Create_channel")),k.createElement(i.Close,{tabIndex:-1,title:S("Close"),onClick:R})),k.createElement(i.Content,{mbe:2},k.createElement(u,null,k.createElement(s,null,k.createElement(h,{required:!0,htmlFor:eu},S("Channel_name")),k.createElement(E,null,k.createElement(o,n({id:eu,"data-qa-type":"channel-name-input"},Y("name",{required:S("error-the-field-is-required",{field:S("Name")}),validate:e=>eo(e)}),{error:null===(t=Z.name)||void 0===t?void 0:t.message,addon:k.createElement(d,{name:el?"hashtag-lock":"hashtag",size:"x20"}),"aria-invalid":Z.name?"true":"false","aria-describedby":"".concat(eu,"-error"),"aria-required":"true"}))),Z.name&&k.createElement(_,{"aria-live":"assertive",id:"".concat(eu,"-error")},Z.name.message)),k.createElement(s,null,k.createElement(h,{htmlFor:eh},S("Topic")),k.createElement(E,null,k.createElement(o,n({id:eh,"aria-describedby":"".concat(eh,"-hint")},Y("topic"),{"data-qa-type":"channel-topic-input"}))),k.createElement(p,{id:"".concat(eh,"-hint")},S("Channel_what_is_this_channel_about"))),k.createElement(s,null,k.createElement(r,{display:"flex",justifyContent:"space-between",alignItems:"start"},k.createElement(r,{display:"flex",flexDirection:"column",width:"full"},k.createElement(h,{htmlFor:eE},S("Private")),k.createElement(p,{id:"".concat(eE,"-hint")},el?S("Only_invited_users_can_acess_this_channel"):S("Everyone_can_access_this_channel"))),k.createElement(T,{control:et,name:"isPrivate",render:e=>{let{field:{onChange:t,value:a,ref:n}}=e;return k.createElement(m,{id:eE,"aria-describedby":"".concat(eE,"-hint"),ref:n,checked:a,disabled:!!X,onChange:t})}}))),k.createElement(s,null,k.createElement(r,{display:"flex",justifyContent:"space-between",alignItems:"start"},k.createElement(r,{display:"flex",flexDirection:"column",width:"full"},k.createElement(h,{htmlFor:e_},S("Federation_Matrix_Federated")),k.createElement(p,{id:"".concat(e_,"-hint")},S(P(V,H)))),k.createElement(T,{control:et,name:"federated",render:e=>{let{field:{onChange:t,value:a,ref:n}}=e;return k.createElement(m,{"aria-describedby":"".concat(e_,"-hint"),id:e_,ref:n,checked:a,disabled:!W,onChange:t})}}))),k.createElement(s,null,k.createElement(r,{display:"flex",justifyContent:"space-between",alignItems:"start"},k.createElement(r,{display:"flex",flexDirection:"column",width:"full"},k.createElement(h,{htmlFor:ep},S("Read_only")),k.createElement(p,{id:"".concat(ep,"-hint")},ei?S("Only_authorized_users_can_write_new_messages"):S("All_users_in_the_channel_can_write_new_messages"))),k.createElement(T,{control:et,name:"readOnly",render:e=>{let{field:{onChange:t,value:a,ref:n}}=e;return k.createElement(m,{id:ep,"aria-describedby":"".concat(ep,"-hint"),ref:n,checked:a,disabled:!B||er||ec,onChange:t})}}))),k.createElement(s,null,k.createElement(r,{display:"flex",justifyContent:"space-between",alignItems:"start"},k.createElement(r,{display:"flex",flexDirection:"column",width:"full"},k.createElement(h,{htmlFor:ef},S("Encrypted")),k.createElement(f,{id:"".concat(ef,"-hint")},el?S("Encrypted_channel_Description"):S("Encrypted_not_available"))),k.createElement(T,{control:et,name:"encrypted",render:e=>{let{field:{onChange:t,value:a,ref:n}}=e;return k.createElement(m,{id:ef,ref:n,checked:a,disabled:es||ec,onChange:t,"aria-describedby":"".concat(ef,"-hint"),"aria-labelledby":"Encrypted_channel_Label"})}}))),k.createElement(s,null,k.createElement(r,{display:"flex",justifyContent:"space-between",alignItems:"start"},k.createElement(r,{display:"flex",flexDirection:"column",width:"full"},k.createElement(h,{htmlFor:ey},S("Broadcast")),k.createElement(p,{id:"".concat(ey,"-hint")},S("Broadcast_channel_Description"))),k.createElement(T,{control:et,name:"broadcast",render:e=>{let{field:{onChange:t,value:a,ref:n}}=e;return k.createElement(m,{"aria-describedby":"".concat(ey,"-hint"),id:ey,ref:n,checked:a,disabled:!!ec,onChange:t})}}))),k.createElement(s,null,k.createElement(h,{htmlFor:eb},S("Add_members")),k.createElement(T,{control:et,name:"members",render:e=>{let{field:{onChange:t,value:a}}=e;return k.createElement(q,{id:eb,value:a,onChange:t})}})))),k.createElement(i.Footer,null,k.createElement(i.FooterControllers,null,k.createElement(c,{onClick:R},S("Cancel")),k.createElement(c,{type:"submit",primary:!0,"data-qa-type":"create-channel-confirm-button"},S("Create")))))})}
//# sourceMappingURL=/dynamic/client/sidebar/header/CreateChannel/47055b87fbc746c32fc91dd8fe6734cc46e8b420.map
