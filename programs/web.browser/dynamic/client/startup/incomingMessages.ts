function module(e,i,n){let t,o,r,d,a;n.link("@babel/runtime/helpers/objectSpread2",{default(e){t=e}},0),n.link("meteor/meteor",{Meteor(e){o=e}},0),n.link("../../app/models/client",{ChatMessage(e){r=e}},1),n.link("../../app/notifications/client",{Notifications(e){d=e}},2),n.link("../../app/ui-cached-collection/client",{CachedCollectionManager(e){a=e}},3),o.startup(()=>{Tracker.autorun(()=>{o.userId()&&d.onUser("message",e=>(e.u=e.u||{username:"rocket.cat"},e.private=!0,r.upsert({_id:e._id},e)))}),a.onLogin(()=>{d.onUser("subscriptions-changed",(e,i)=>{r.update(t({rid:i.rid},"ignored"in i&&i.ignored?{"u._id":{$nin:i.ignored}}:{ignored:{$exists:!0}}),{$unset:{ignored:!0}},{multi:!0}),"ignored"in i&&i.ignored&&r.update({rid:i.rid,t:{$ne:"command"},"u._id":{$in:i.ignored}},{$set:{ignored:!0}},{multi:!0})})})})}
//# sourceMappingURL=/dynamic/client/startup/6b9ac24535f1e533eeacd573d91a4081491a5f9f.map
