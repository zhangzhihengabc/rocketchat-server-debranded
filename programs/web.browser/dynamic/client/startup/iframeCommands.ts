function module(e,t,r){let n,i,a,o,l,c,s,g,u,d,m,p,f;r.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),r.link("@rocket.chat/string-helpers",{escapeRegExp(e){i=e}},0),r.link("meteor/meteor",{Meteor(e){a=e}},1),r.link("meteor/service-configuration",{ServiceConfiguration(e){o=e}},2),r.link("../../app/settings/client",{settings(e){l=e}},3),r.link("../../app/ui-utils/client/lib/AccountBox",{AccountBox(e){c=e}},4),r.link("../../app/utils/client/lib/SDKClient",{sdk(e){s=e}},5),r.link("../../lib/callbacks/afterLogoutCleanUpCallback",{afterLogoutCleanUpCallback(e){g=e}},6),r.link("../../lib/utils/stringUtils",{capitalize(e){u=e},ltrim(e){d=e},rtrim(e){m=e}},7),r.link("../lib/baseURI",{baseURI(e){p=e}},8),r.link("../providers/RouterProvider",{router(e){f=e}},9);let k={go(e){if("string"!=typeof e.path||0===e.path.trim().length)return console.error("`path` not defined");let t=new URL("".concat(m(p,"/"),"/").concat(d(e.path,"/"))),r=Array.from(t.searchParams.entries()).reduce((e,t)=>{let[r,n]=t;return e[r]=n,e},{}),a=t.pathname.replace(new RegExp("^".concat(i(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX))),"");f.navigate({pathname:a,search:n(n({},f.getSearchParameters()),r)})},"set-user-status"(e){c.setStatus(e.status)},"call-custom-oauth-login"(e,t){let r="".concat(a.settings.Site_Url,"/");if("string"==typeof e.redirectUrl&&e.redirectUrl.startsWith(r)||(e.redirectUrl=null),"string"==typeof e.service&&window.ServiceConfiguration){let n=o.configurations.findOne({service:e.service});if(n){let i=a["loginWith".concat(u(n.service,!0))],o=e.redirectUrl||r;i.call(a,{redirectUrl:o},e=>{var r;null===(r=t.source)||void 0===r||r.postMessage({event:"custom-oauth-callback",response:e},{targetOrigin:t.origin})})}}},"login-with-token"(e){"string"==typeof e.token&&a.loginWithToken(e.token,()=>{console.log("Iframe command [login-with-token]: result",e)})},async logout(){let e=a.user();a.logout(()=>{if(e)return g.run(e),s.call("logoutCleanUp",e),f.navigate("/home")})}};window.addEventListener("message",e=>{if(!l.get("Iframe_Integration_receive_enable")||"object"!=typeof e.data||"string"!=typeof e.data.externalCommand)return;let t=l.get("Iframe_Integration_receive_origin");if("*"!==t&&-1===t.split(",").indexOf(e.origin)){console.error("Origin not allowed",e.origin);return}if(!(e.data.externalCommand in k)){console.error("Command not allowed",e.data.externalCommand);return}let r=k[e.data.externalCommand];r(e.data,e)})}
//# sourceMappingURL=/dynamic/client/startup/f2fb81056b17d9844bf95e7a05af9b63469338ae.map
