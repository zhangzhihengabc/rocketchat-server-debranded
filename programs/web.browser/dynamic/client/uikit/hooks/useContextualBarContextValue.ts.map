)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/uikit/hooks/useContextualBarContextValue.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UiKit } from '@rocket.chat/core-typings';\nimport { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport type { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\nimport type { Dispatch } from 'react';\nimport { useMemo, type ContextType } from 'react';\n\nimport { useUiKitActionManager } from './useUiKitActionManager';\n\ntype UseContextualBarContextValueParams = {\n\tview: UiKit.ContextualBarView;\n\tvalues: {\n\t\t[actionId: string]: {\n\t\t\tvalue: unknown;\n\t\t\tblockId?: string | undefined;\n\t\t};\n\t};\n\tupdateValues: Dispatch<{\n\t\tactionId: string;\n\t\tpayload: {\n\t\t\tvalue: unknown;\n\t\t\tblockId?: string | undefined;\n\t\t};\n\t}>;\n};\ntype UseContextualBarContextValueReturn = ContextType<typeof UiKitContext>;\n\nexport const useContextualBarContextValue = ({\n\tview,\n\tvalues,\n\tupdateValues,\n}: UseContextualBarContextValueParams): UseContextualBarContextValueReturn => {\n\tconst actionManager = useUiKitActionManager();\n\n\tconst emitInteraction = useMemo(() => actionManager.emitInteraction.bind(actionManager), [actionManager]);\n\tconst debouncedEmitInteraction = useDebouncedCallback(emitInteraction, 700);\n\n\treturn {\n\t\taction: async ({ appId, viewId, actionId, dispatchActionConfig, blockId, value }): Promise<void> => {\n\t\t\tif (!appId || !viewId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst emit = dispatchActionConfig?.includes('on_character_entered') ? debouncedEmitInteraction : emitInteraction;\n\n\t\t\tawait emit(appId, {\n\t\t\t\ttype: 'blockAction',\n\t\t\t\tactionId,\n\t\t\t\tcontainer: {\n\t\t\t\t\ttype: 'view',\n\t\t\t\t\tid: viewId,\n\t\t\t\t},\n\t\t\t\tpayload: {\n\t\t\t\t\tblockId,\n\t\t\t\t\tvalue,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tupdateState: ({ actionId, value, blockId = 'default' }) => {\n\t\t\tupdateValues({\n\t\t\t\tactionId,\n\t\t\t\tpayload: {\n\t\t\t\t\tblockId,\n\t\t\t\t\tvalue,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t...view,\n\t\tvalues,\n\t\tviewId: view.id,\n\t};\n};\n",null],"names":["_objectSpread","useDebouncedCallback","useMemo","useUiKitActionManager","module","default","export","useContextualBarContextValue","_ref","view","values","updateValues","actionManager","emitInteraction","bind","debouncedEmitInteraction","action","_ref2","appId","viewId","actionId","dispatchActionConfig","blockId","value","emit","includes","type","container","id","payload","updateState","_ref3"],"mappings":"2BACAA,EAAmEC,EAAAC,EAAAC,EAA1DC,EAAAA,IAAoB,CAAA,uCAAsC,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAnEI,EAAOE,MAAE,CAAA,CAAAC,6BAA4B,IAAAA,CAA8B,GAAAH,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAH,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAD,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAyB5D,IAAMI,EAA+BC,IAIiC,GAJhC,CAC5CC,KAAAA,CAAI,CACJC,OAAAA,CAAM,CACNC,aAAAA,CAAAA,CACoC,CAAAH,EAC9BI,EAAgBT,IAEhBU,EAAkBX,EAAQ,IAAMU,EAAcC,eAAe,CAACC,IAAI,CAACF,GAAgB,CAACA,EAAc,EAClGG,EAA2Bd,EAAqBY,EAAiB,KAEvE,OAAAb,EAAAA,EAAA,CACCgB,OAAQ,MAAAC,IAA2F,GAApF,CAAEC,MAAAA,CAAK,CAAEC,OAAAA,CAAM,CAAEC,SAAAA,CAAQ,CAAEC,qBAAAA,CAAoB,CAAEC,QAAAA,CAAO,CAAEC,MAAAA,CAAAA,CAAO,CAAAN,EAC/E,GAAI,CAACC,GAAS,CAACC,EACd,OAGD,IAAMK,EAAOH,MAAAA,GAAAA,EAAsBI,QAAQ,CAAC,wBAA0BV,EAA2BF,CAEjG,OAAMW,EAAKN,EAAO,CACjBQ,KAAM,cACNN,SAAAA,EACAO,UAAW,CACVD,KAAM,OACNE,GAAIT,GAELU,QAAS,CACRP,QAAAA,EACAC,MAAAA,IAGH,EACAO,YAAaC,IAA6C,GAA5C,CAAEX,SAAAA,CAAQ,CAAEG,MAAAA,CAAK,CAAED,QAAAA,EAAU,SAAA,CAAW,CAAAS,EACrDpB,EAAa,CACZS,SAAAA,EACAS,QAAS,CACRP,QAAAA,EACAC,MAAAA,IAGH,CAAC,EACEd,GAAI,CAAA,EAAA,CACPC,OAAAA,EACAS,OAAQV,EAAKmB,EAAAA,AAAE,EAEjB"}