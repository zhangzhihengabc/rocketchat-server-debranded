)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/RealTimeMonitoringPage.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Select, Margins } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useState, useMemo, useEffect, Fragment } from 'react';\n\nimport AutoCompleteDepartment from '../../../components/AutoCompleteDepartment';\nimport Page from '../../../components/Page';\nimport { getDateRange } from '../../../lib/utils/getDateRange';\nimport Label from '../components/Label';\nimport AgentStatusChart from './charts/AgentStatusChart';\nimport ChatDurationChart from './charts/ChatDurationChart';\nimport ChatsChart from './charts/ChatsChart';\nimport ChatsPerAgentChart from './charts/ChatsPerAgentChart';\nimport ChatsPerDepartmentChart from './charts/ChatsPerDepartmentChart';\nimport ResponseTimesChart from './charts/ResponseTimesChart';\nimport AgentsOverview from './overviews/AgentsOverview';\nimport ChatsOverview from './overviews/ChatsOverview';\nimport ConversationOverview from './overviews/ConversationOverview';\nimport ProductivityOverview from './overviews/ProductivityOverview';\n\nconst dateRange = getDateRange();\n\nconst RealTimeMonitoringPage = () => {\n\tconst t = useTranslation();\n\n\tconst [reloadFrequency, setReloadFrequency] = useState(5);\n\tconst [departmentId, setDepartment] = useState('');\n\n\tconst reloadRef = useRef({});\n\n\tconst departmentParams = useMemo(\n\t\t() => ({\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId],\n\t);\n\n\tconst allParams = useMemo(\n\t\t() => ({\n\t\t\t...departmentParams,\n\t\t\t...dateRange,\n\t\t}),\n\t\t[departmentParams],\n\t);\n\n\tconst reloadCharts = useMutableCallback(() => {\n\t\tObject.values(reloadRef.current).forEach((reload) => {\n\t\t\treload();\n\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(reloadCharts, reloadFrequency * 1000);\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [reloadCharts, reloadFrequency]);\n\n\tconst reloadOptions = useMemo(\n\t\t() => [\n\t\t\t[5, <Fragment key='5 seconds'>5 {t('seconds')}</Fragment>],\n\t\t\t[10, <Fragment key='10 seconds'>10 {t('seconds')}</Fragment>],\n\t\t\t[30, <Fragment key='30 seconds'>30 {t('seconds')}</Fragment>],\n\t\t\t[60, <Fragment key='1 minute'>1 {t('minute')}</Fragment>],\n\t\t],\n\t\t[t],\n\t);\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Real_Time_Monitoring')}></Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t<Box flexDirection='row' display='flex' justifyContent='space-between' alignSelf='center' w='full'>\n\t\t\t\t\t\t<Box maxWidth='50%' display='flex' mi={4} flexGrow={1} flexDirection='column'>\n\t\t\t\t\t\t\t<Label mb={4}>{t('Departments')}</Label>\n\t\t\t\t\t\t\t<AutoCompleteDepartment\n\t\t\t\t\t\t\t\tvalue={departmentId}\n\t\t\t\t\t\t\t\tonChange={setDepartment}\n\t\t\t\t\t\t\t\tplaceholder={t('All')}\n\t\t\t\t\t\t\t\tlabel={t('All')}\n\t\t\t\t\t\t\t\tonlyMyDepartments\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box maxWidth='50%' display='flex' mi={4} flexGrow={1} flexDirection='column'>\n\t\t\t\t\t\t\t<Label mb={4}>{t('Update_every')}</Label>\n\t\t\t\t\t\t\t<Select options={reloadOptions} onChange={useMutableCallback((val) => setReloadFrequency(val))} value={reloadFrequency} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ConversationOverview flexGrow={1} flexShrink={1} width='50%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ChatsChart flexGrow={1} flexShrink={1} width='50%' mie={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t\t<ChatsPerAgentChart flexGrow={1} flexShrink={1} width='50%' mis={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ChatsOverview flexGrow={1} flexShrink={1} width='50%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<AgentStatusChart flexGrow={1} flexShrink={1} width='50%' mie={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t\t<ChatsPerDepartmentChart flexGrow={1} flexShrink={1} width='50%' mis={2} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<AgentsOverview flexGrow={1} flexShrink={1} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' w='full' flexShrink={1}>\n\t\t\t\t\t\t<ChatDurationChart flexGrow={1} flexShrink={1} w='100%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' flexDirection='row' w='full' alignItems='stretch' flexShrink={1}>\n\t\t\t\t\t\t<ProductivityOverview flexGrow={1} flexShrink={1} reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box display='flex' w='full' flexShrink={1}>\n\t\t\t\t\t\t<ResponseTimesChart flexGrow={1} flexShrink={1} w='100%' reloadRef={reloadRef} params={allParams} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Margins>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default RealTimeMonitoringPage;\n",null],"names":["_objectSpread","Box","Select","Margins","useMutableCallback","useTranslation","React","useRef","useState","useMemo","useEffect","Fragment","AutoCompleteDepartment","Page","getDateRange","Label","AgentStatusChart","ChatDurationChart","ChatsChart","ChatsPerAgentChart","ChatsPerDepartmentChart","ResponseTimesChart","AgentsOverview","ChatsOverview","ConversationOverview","ProductivityOverview","module","link","default","v","dateRange","exportDefault","t","reloadFrequency","setReloadFrequency","departmentId","setDepartment","reloadRef","departmentParams","allParams","reloadCharts","Object","values","current","forEach","reload","interval","setInterval","clearInterval","reloadOptions","createElement","key","Header","title","ScrollableContentWithShadow","block","flexDirection","display","justifyContent","alignSelf","w","maxWidth","mi","flexGrow","mb","value","onChange","placeholder","label","onlyMyDepartments","options","val","alignItems","flexShrink","width","params","mie","mis"],"mappings":"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"}