)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useEffect } from 'react';\n\nimport { drawLineChart } from '../../../../../app/livechat/client/lib/chartHandler';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport Chart from './Chart';\nimport { useUpdateChartData } from './useUpdateChartData';\n\nconst initialData = {\n\tdepartments: {},\n};\n\nconst init = (canvas, context, t) =>\n\tdrawLineChart(canvas, context, [t('Open'), t('Closed')], [], [[], []], {\n\t\tlegends: true,\n\t\tanim: true,\n\t\tsmallTicks: true,\n\t});\n\nconst ChatsPerDepartmentChart = ({ params, reloadRef, ...props }) => {\n\tconst t = useTranslation();\n\n\tconst canvas = useRef();\n\tconst context = useRef();\n\n\tconst updateChartData = useUpdateChartData({\n\t\tcontext,\n\t\tcanvas,\n\t\tt,\n\t\tinit,\n\t});\n\n\tconst {\n\t\tvalue: data,\n\t\tphase: state,\n\t\treload,\n\t} = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats-per-department', { params });\n\n\treloadRef.current.chatsPerDepartmentChart = reload;\n\n\tconst chartData = data ?? initialData;\n\n\tuseEffect(() => {\n\t\tconst initChart = async () => {\n\t\t\tcontext.current = await init(canvas.current, context.current, t);\n\t\t};\n\t\tinitChart();\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tif (state === AsyncStatePhase.RESOLVED) {\n\t\t\tif (chartData && chartData.success) {\n\t\t\t\tdelete chartData.success;\n\t\t\t\tObject.entries(chartData).forEach(([name, value]) => {\n\t\t\t\t\tupdateChartData(name, [value.open, value.closed]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [chartData, state, t, updateChartData]);\n\n\treturn <Chart ref={canvas} {...props} />;\n};\n\nexport default ChatsPerDepartmentChart;\n",null],"names":["_extends","_objectWithoutProperties","useTranslation","React","useRef","useEffect","drawLineChart","AsyncStatePhase","useEndpointData","Chart","useUpdateChartData","module","link","default","v","initialData","departments","init","canvas","context","t","legends","anim","smallTicks","exportDefault","_ref","params","reloadRef","props","_excluded","updateChartData","value","data","phase","state","reload","current","chatsPerDepartmentChart","chartData","initChart","RESOLVED","success","Object","entries","forEach","_ref2","name","open","closed","createElement","ref"],"mappings":"2BAAIA,EAAsFC,EAAtFC,EAAmGC,EAAMC,EAAOC,EAAyGC,EAA2HC,EAA6GC,EAA+GC,EAAyDC,+BAAhmBC,EAAOC,IAAI,CAAC,iCAAiC,CAACC,QAAQC,CAAC,EAAEd,EAASc,CAAC,CAAC,EAAE,GAAgCH,EAAOC,IAAI,CAAC,iDAAiD,CAACC,QAAQC,CAAC,EAAEb,EAAyBa,CAAC,CAAC,EAAE,GAAtMH,EAAOC,IAAI,CAAC,2BAA2B,CAACV,eAAeY,CAAC,EAAEZ,EAAeY,CAAC,CAAC,EAAE,GAA8BH,EAAOC,IAAI,CAAC,QAAQ,CAACC,QAAQC,CAAC,EAAEX,EAAMW,CAAC,EAAEV,OAAOU,CAAC,EAAEV,EAAOU,CAAC,EAAET,UAAUS,CAAC,EAAET,EAAUS,CAAC,CAAC,EAAE,GAAqBH,EAAOC,IAAI,CAAC,sDAAsD,CAACN,cAAcQ,CAAC,EAAER,EAAcQ,CAAC,CAAC,EAAE,GAAuBH,EAAOC,IAAI,CAAC,kCAAkC,CAACL,gBAAgBO,CAAC,EAAEP,EAAgBO,CAAC,CAAC,EAAE,GAAuBH,EAAOC,IAAI,CAAC,oCAAoC,CAACJ,gBAAgBM,CAAC,EAAEN,EAAgBM,CAAC,CAAC,EAAE,GAAaH,EAAOC,IAAI,CAAC,UAAU,CAACC,QAAQC,CAAC,EAAEL,EAAMK,CAAC,CAAC,EAAE,GAA0BH,EAAOC,IAAI,CAAC,uBAAuB,CAACF,mBAAmBI,CAAC,EAAEJ,EAAmBI,CAAC,CAAC,EAAE,GASjtB,IAAMC,EAAc,CACnBC,YAAa,CAAC,CACf,EAEMC,EAAO,CAACC,EAAQC,EAASC,IAC9Bd,EAAcY,EAAQC,EAAS,CAACC,EAAE,QAASA,EAAE,UAAU,CAAE,EAAE,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAAE,CACtEC,QAAS,CAAA,EACTC,KAAM,CAAA,EACNC,WAAY,CAAA,CACb,GAlBDZ,EAAOa,aAAa,CAoBYC,IAAqC,GAApC,CAAEC,OAAAA,CAAM,CAAEC,UAAAA,CAAAA,CAAqB,CAAAF,EAAPG,EAAK3B,EAAAwB,EAAAI,GACvDT,EAAIlB,IAEJgB,EAASd,IACTe,EAAUf,IAEV0B,EAAkBpB,EAAmB,CAC1CS,QAAAA,EACAD,OAAAA,EACAE,EAAAA,EACAH,KAAAA,CACD,GAEM,CACLc,MAAOC,CAAI,CACXC,MAAOC,CAAK,CACZC,OAAAA,CAAAA,CACA,CAAG3B,EAAgB,gEAAiE,CAAEkB,OAAAA,CAAO,EAE9FC,CAAAA,EAAUS,OAAO,CAACC,uBAAuB,CAAGF,EAE5C,IAAMG,EAAYN,MAAAA,EAAAA,EAAQjB,EAoB1B,OAlBAV,EAAU,KACT,IAAMkC,EAAY,UACjBpB,EAAQiB,OAAO,CAAG,MAAMnB,EAAKC,EAAOkB,OAAO,CAAEjB,EAAQiB,OAAO,CAAEhB,EAC/D,EACAmB,GACD,EAAG,CAACnB,EAAE,EAENf,EAAU,KACL6B,IAAU3B,EAAgBiC,QAAQ,EACjCF,GAAaA,EAAUG,OAAO,GACjC,OAAOH,EAAUG,OAAO,CACxBC,OAAOC,OAAO,CAACL,GAAWM,OAAO,CAACC,IAAmB,GAAlB,CAACC,EAAMf,EAAM,CAAAc,EAC/Cf,EAAgBgB,EAAM,CAACf,EAAMgB,IAAI,CAAEhB,EAAMiB,MAAM,CAAC,CACjD,GAGH,EAAG,CAACV,EAAWJ,EAAOd,EAAGU,EAAgB,EAElC3B,EAAA8C,aAAA,CAACxC,EAAKT,EAAA,CAACkD,IAAKhC,CAAO,EAAKU,GAChC"}