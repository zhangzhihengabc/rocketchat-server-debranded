)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerAgentChart.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useEffect } from 'react';\n\nimport { drawLineChart } from '../../../../../app/livechat/client/lib/chartHandler';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport Chart from './Chart';\nimport { useUpdateChartData } from './useUpdateChartData';\n\nconst initialData = {\n\tagents: {},\n\tsuccess: true,\n};\n\nconst init = (canvas, context, t) =>\n\tdrawLineChart(canvas, context, [t('Open'), t('Closed'), t('On_Hold_Chats')], [], [[], []], {\n\t\tlegends: true,\n\t\tanim: true,\n\t\tsmallTicks: true,\n\t});\n\nconst ChatsPerAgentChart = ({ params, reloadRef, ...props }) => {\n\tconst t = useTranslation();\n\n\tconst canvas = useRef();\n\tconst context = useRef();\n\n\tconst updateChartData = useUpdateChartData({\n\t\tcontext,\n\t\tcanvas,\n\t\tt,\n\t\tinit,\n\t});\n\n\tconst { value: data, phase: state, reload } = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats-per-agent', { params });\n\n\treloadRef.current.chatsPerAgentChart = reload;\n\n\tconst chartData = data ?? initialData;\n\n\tuseEffect(() => {\n\t\tconst initChart = async () => {\n\t\t\tcontext.current = await init(canvas.current, context.current, t);\n\t\t};\n\t\tinitChart();\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tif (state === AsyncStatePhase.RESOLVED) {\n\t\t\tif (chartData && chartData.success) {\n\t\t\t\tdelete chartData.success;\n\t\t\t\tObject.entries(chartData).forEach(([name, value]) => {\n\t\t\t\t\tupdateChartData(name, [value.open, value.closed, value.onhold]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [chartData, state, t, updateChartData]);\n\n\treturn <Chart ref={canvas} {...props} />;\n};\n\nexport default ChatsPerAgentChart;\n",null],"names":["_extends","_objectWithoutProperties","useTranslation","React","useRef","useEffect","drawLineChart","AsyncStatePhase","useEndpointData","Chart","useUpdateChartData","module","link","default","v","initialData","agents","success","init","canvas","context","t","legends","anim","smallTicks","exportDefault","_ref","params","reloadRef","props","_excluded","updateChartData","value","data","phase","state","reload","current","chatsPerAgentChart","chartData","initChart","RESOLVED","Object","entries","forEach","_ref2","name","open","closed","onhold","createElement","ref"],"mappings":"2BAAIA,EAAsFC,EAAtFC,EAAmGC,EAAMC,EAAOC,EAAyGC,EAA2HC,EAA6GC,EAA+GC,EAAyDC,+BAAhmBC,EAAOC,IAAI,CAAC,iCAAiC,CAACC,QAAQC,CAAC,EAAEd,EAASc,CAAC,CAAC,EAAE,GAAgCH,EAAOC,IAAI,CAAC,iDAAiD,CAACC,QAAQC,CAAC,EAAEb,EAAyBa,CAAC,CAAC,EAAE,GAAtMH,EAAOC,IAAI,CAAC,2BAA2B,CAACV,eAAeY,CAAC,EAAEZ,EAAeY,CAAC,CAAC,EAAE,GAA8BH,EAAOC,IAAI,CAAC,QAAQ,CAACC,QAAQC,CAAC,EAAEX,EAAMW,CAAC,EAAEV,OAAOU,CAAC,EAAEV,EAAOU,CAAC,EAAET,UAAUS,CAAC,EAAET,EAAUS,CAAC,CAAC,EAAE,GAAqBH,EAAOC,IAAI,CAAC,sDAAsD,CAACN,cAAcQ,CAAC,EAAER,EAAcQ,CAAC,CAAC,EAAE,GAAuBH,EAAOC,IAAI,CAAC,kCAAkC,CAACL,gBAAgBO,CAAC,EAAEP,EAAgBO,CAAC,CAAC,EAAE,GAAuBH,EAAOC,IAAI,CAAC,oCAAoC,CAACJ,gBAAgBM,CAAC,EAAEN,EAAgBM,CAAC,CAAC,EAAE,GAAaH,EAAOC,IAAI,CAAC,UAAU,CAACC,QAAQC,CAAC,EAAEL,EAAMK,CAAC,CAAC,EAAE,GAA0BH,EAAOC,IAAI,CAAC,uBAAuB,CAACF,mBAAmBI,CAAC,EAAEJ,EAAmBI,CAAC,CAAC,EAAE,GASjtB,IAAMC,EAAc,CACnBC,OAAQ,CAAC,EACTC,QAAS,CAAA,CACV,EAEMC,EAAO,CAACC,EAAQC,EAASC,IAC9Bf,EAAca,EAAQC,EAAS,CAACC,EAAE,QAASA,EAAE,UAAWA,EAAE,iBAAiB,CAAE,EAAE,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAAE,CAC1FC,QAAS,CAAA,EACTC,KAAM,CAAA,EACNC,WAAY,CAAA,CACb,GAnBDb,EAAOc,aAAa,CAqBOC,IAAqC,GAApC,CAAEC,OAAAA,CAAM,CAAEC,UAAAA,CAAAA,CAAqB,CAAAF,EAAPG,EAAK5B,EAAAyB,EAAAI,GAClDT,EAAInB,IAEJiB,EAASf,IACTgB,EAAUhB,IAEV2B,EAAkBrB,EAAmB,CAC1CU,QAAAA,EACAD,OAAAA,EACAE,EAAAA,EACAH,KAAAA,CACD,GAEM,CAAEc,MAAOC,CAAI,CAAEC,MAAOC,CAAK,CAAEC,OAAAA,CAAAA,CAAQ,CAAG5B,EAAgB,2DAA4D,CAAEmB,OAAAA,CAAO,EAEnIC,CAAAA,EAAUS,OAAO,CAACC,kBAAkB,CAAGF,EAEvC,IAAMG,EAAYN,MAAAA,EAAAA,EAAQlB,EAoB1B,OAlBAV,EAAU,KACT,IAAMmC,EAAY,UACjBpB,EAAQiB,OAAO,CAAG,MAAMnB,EAAKC,EAAOkB,OAAO,CAAEjB,EAAQiB,OAAO,CAAEhB,EAC/D,EACAmB,GACD,EAAG,CAACnB,EAAE,EAENhB,EAAU,KACL8B,IAAU5B,EAAgBkC,QAAQ,EACjCF,GAAaA,EAAUtB,OAAO,GACjC,OAAOsB,EAAUtB,OAAO,CACxByB,OAAOC,OAAO,CAACJ,GAAWK,OAAO,CAACC,IAAmB,GAAlB,CAACC,EAAMd,EAAM,CAAAa,EAC/Cd,EAAgBe,EAAM,CAACd,EAAMe,IAAI,CAAEf,EAAMgB,MAAM,CAAEhB,EAAMiB,MAAM,CAAC,CAC/D,GAGH,EAAG,CAACV,EAAWJ,EAAOd,EAAGU,EAAgB,EAElC5B,EAAA+C,aAAA,CAACzC,EAAKT,EAAA,CAACmD,IAAKhC,CAAO,EAAKU,GAChC"}