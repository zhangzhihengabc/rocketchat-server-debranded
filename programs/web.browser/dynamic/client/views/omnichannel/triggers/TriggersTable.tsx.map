)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/triggers/TriggersTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery, hashQueryKey } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\n\nimport GenericError from '../../../components/GenericError';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableBody,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport TriggersRow from './TriggersRow';\n\nconst TriggersTable = () => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\n\tconst handleAddNew = useMutableCallback(() => {\n\t\trouter.navigate('/omnichannel/triggers/new');\n\t});\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useMemo(() => ({ offset: current, count: itemsPerPage }), [current, itemsPerPage]);\n\n\tconst getTriggers = useEndpoint('GET', '/v1/livechat/triggers');\n\tconst { data, refetch, isSuccess, isLoading, isError } = useQuery(['livechat-triggers', query], async () => getTriggers(query));\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell>{t('Name')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Description')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Enabled')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell width='x60' />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data.triggers.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data.triggers.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='smart'\n\t\t\t\t\ttitle={t('No_triggers_yet')}\n\t\t\t\t\tdescription={t('No_triggers_yet_description')}\n\t\t\t\t\tbuttonAction={handleAddNew}\n\t\t\t\t\tbuttonTitle={t('Create_trigger')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_triggers')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data.triggers.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data.triggers.map(({ _id, name, description, enabled }) => (\n\t\t\t\t\t\t\t\t<TriggersRow key={_id} _id={_id} name={name} description={description} enabled={enabled} reload={refetch} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && <GenericError buttonAction={refetch} />}\n\t\t</>\n\t);\n};\n\nexport default TriggersTable;\n",null],"names":["_extends","_objectWithoutProperties","Pagination","useMutableCallback","useTranslation","useEndpoint","useRouter","useQuery","hashQueryKey","React","useMemo","useState","GenericError","GenericNoResults","GenericTable","GenericTableHeader","GenericTableBody","GenericTableHeaderCell","GenericTableLoadingRow","usePagination","TriggersRow","module","link","default","exportDefault","t","router","handleAddNew","navigate","_usePagination","current","itemsPerPage","setItemsPerPage","setCurrent","paginationProps","_excluded","query","offset","count","getTriggers","data","refetch","isSuccess","isLoading","isError","defaultQuery","queryHasChanged","headers","createElement","Fragment","width","cols","triggers","length","icon","title","description","buttonAction","buttonTitle","linkHref","linkText","map","_ref","_id","name","enabled","key","reload","divider","total","onSetItemsPerPage","onSetCurrent"],"mappings":"2BAAAA,EAAmDC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,kEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAAA,CAAAA,EAAAvB,EAAAA,CAAA,CAAA,EAAA,GAAAqB,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,CAAAA,EAAAtB,EAAAA,CAAA,CAAA,EAAA,GAA1CoB,EAAYC,IAAA,CAAM,wBAAwB,CAAApB,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAmB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAlB,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAkB,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAjB,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAd,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAd,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAE,QAAAA,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAP,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,uBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,uDAAAA,CAAAF,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAnDC,EAAOG,aAAY,CAkBG,KACrB,IAAMC,EAAIrB,IACJsB,EAASpB,IAETqB,EAAexB,EAAmB,KACvCuB,EAAOE,QAAQ,CAAC,4BACjB,GAEAC,EAAmFV,IAA7E,CAAEW,QAAAA,CAAO,CAAEC,aAAAA,CAAY,CAAEC,gBAAAA,CAAe,CAAEC,WAAAA,CAAAA,CAAgC,CAAAJ,EAAjBK,EAAejC,EAAA4B,EAAAM,GAExEC,EAAQ1B,EAAQ,IAAO,CAAA,CAAE2B,OAAQP,EAASQ,MAAOP,CAAY,CAAA,EAAK,CAACD,EAASC,EAAa,EAEzFQ,EAAclC,EAAY,MAAO,yBACjC,CAAEmC,KAAAA,CAAI,CAAEC,QAAAA,CAAO,CAAEC,UAAAA,CAAS,CAAEC,UAAAA,CAAS,CAAEC,QAAAA,CAAAA,CAAS,CAAGrC,EAAS,CAAC,oBAAqB6B,EAAM,CAAE,SAAYG,EAAYH,IAElH,CAACS,EAAa,CAAGlC,EAASH,EAAa,CAAC4B,EAAM,GAC9CU,EAAkBD,IAAiBrC,EAAa,CAAC4B,EAAM,EAEvDW,EACLtC,EAAAuC,aAAA,CAAAvC,EAAAwC,QAAA,CAAA,KACCxC,EAAAuC,aAAA,CAAC/B,EAAsB,KAAEQ,EAAE,SAC3BhB,EAAAuC,aAAA,CAAC/B,EAAsB,KAAEQ,EAAE,gBAC3BhB,EAAAuC,aAAA,CAAC/B,EAAsB,KAAEQ,EAAE,YAC3BhB,EAAAuC,aAAA,CAAC/B,EAAsB,CAACiC,MAAM,KAAK,IAIrC,OACCzC,EAAAuC,aAAA,CAAAvC,EAAAwC,QAAA,CAAA,KACEN,GACAlC,EAAAuC,aAAA,CAAClC,EAAY,KACZL,EAAAuC,aAAA,CAACjC,EAAkB,KAAEgC,GACrBtC,EAAAuC,aAAA,CAAChC,EAAgB,KAChBP,EAAAuC,aAAA,CAAC9B,EAAsB,CAACiC,KAAM,CAAE,KAIlCT,GAAaF,AAAyB,IAAzBA,EAAKY,QAAQ,CAACC,MAAM,EAAUP,GAAmBrC,EAAAuC,aAAA,CAACnC,EAAgB,MAC/E6B,GAAaF,AAAyB,IAAzBA,EAAKY,QAAQ,CAACC,MAAM,EAAU,CAACP,GAC5CrC,EAAAuC,aAAA,CAACnC,EAAgB,CAChByC,KAAK,QACLC,MAAO9B,EAAE,mBACT+B,YAAa/B,EAAE,+BACfgC,aAAc9B,EACd+B,YAAajC,EAAE,kBACfkC,SAAS,0CACTC,SAAUnC,EAAE,4BAA6B,GAG1CiB,GAAaF,EAAKY,QAAQ,CAACC,MAAM,CAAG,GACpC5C,EAAAuC,aAAA,CAAAvC,EAAAwC,QAAA,CAAA,KACCxC,EAAAuC,aAAA,CAAClC,EAAY,KACZL,EAAAuC,aAAA,CAACjC,EAAkB,KAAEgC,GACrBtC,EAAAuC,aAAA,CAAChC,EAAgB,KACfwB,EAAKY,QAAQ,CAACS,GAAG,CAACC,IAAA,GAAC,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAI,CAAER,YAAAA,CAAW,CAAES,QAAAA,CAAAA,CAAS,CAAAH,EAAA,OACtDrD,EAAAuC,aAAA,CAAC5B,EAAW,CAAC8C,IAAKH,EAAKA,IAAKA,EAAKC,KAAMA,EAAMR,YAAaA,EAAaS,QAASA,EAASE,OAAQ1B,CAAQ,EAAG,KAI/GhC,EAAAuC,aAAA,CAAC9C,EAAUF,EAAA,CACVoE,QAAO,CAAA,EACPtC,QAASA,EACTC,aAAcA,EACdO,MAAO,AAAAE,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAM6B,KAAK,AAALA,GAAS,EACtBC,kBAAmBtC,EACnBuC,aAActC,CAAW,EACrBC,KAINU,GAAWnC,EAAAuC,aAAA,CAACpC,EAAY,CAAC6C,aAAchB,CAAQ,GAGnD"}