)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/triggers/EditTrigger.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatTrigger, ILivechatTriggerCondition, Serialized } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldGroup,\n\tButton,\n\tButtonGroup,\n\tBox,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n\tTextInput,\n\tToggleSwitch,\n\tSelect,\n\tTextAreaInput,\n} from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useRouter, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { Controller, useFieldArray, useForm } from 'react-hook-form';\n\nimport {\n\tContextualbarScrollableContent,\n\tContextualbarTitle,\n\tContextualbarFooter,\n\tContextualbar,\n\tContextualbarHeader,\n\tContextualbarClose,\n} from '../../../components/Contextualbar';\n\nconst getInitialValues = (triggerData: Serialized<ILivechatTrigger> | undefined) => ({\n\tname: triggerData?.name || '',\n\tdescription: triggerData?.description || '',\n\tenabled: triggerData?.enabled || true,\n\trunOnce: !!triggerData?.runOnce || false,\n\tconditions: triggerData?.conditions.map(({ name, value }) => ({ name: name || 'page-url', value: value || '' })) || [\n\t\t{ name: 'page-url' as unknown as ILivechatTriggerCondition['name'], value: '' },\n\t],\n\tactions: triggerData?.actions.map(({ name, params }) => ({\n\t\tname: name || '',\n\t\tparams: {\n\t\t\tsender: params?.sender || 'queue',\n\t\t\tmsg: params?.msg || '',\n\t\t\tname: params?.name || '',\n\t\t},\n\t})) || [\n\t\t{\n\t\t\tname: 'send-message',\n\t\t\tparams: {\n\t\t\t\tsender: 'queue',\n\t\t\t\tmsg: '',\n\t\t\t\tname: '',\n\t\t\t},\n\t\t},\n\t],\n});\n\ntype TriggersPayload = {\n\tname: string;\n\tdescription: string;\n\tenabled: boolean;\n\trunOnce: boolean;\n\t// In the future, this will be an array\n\tconditions: ILivechatTrigger['conditions'];\n\t// In the future, this will be an array\n\tactions: ILivechatTrigger['actions'];\n};\n\nconst EditTrigger = ({ triggerData }: { triggerData?: Serialized<ILivechatTrigger> }) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst queryClient = useQueryClient();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst saveTrigger = useEndpoint('POST', '/v1/livechat/triggers');\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { isDirty, errors },\n\t\twatch,\n\t} = useForm<TriggersPayload>({ mode: 'onBlur', values: getInitialValues(triggerData) });\n\n\tconst { fields: conditionsFields } = useFieldArray({\n\t\tcontrol,\n\t\tname: 'conditions',\n\t});\n\n\tconst { fields: actionsFields } = useFieldArray({\n\t\tcontrol,\n\t\tname: 'actions',\n\t});\n\n\tconst { description, conditions, actions } = watch();\n\n\tconst conditionOptions: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['page-url', t('Visitor_page_URL')],\n\t\t\t['time-on-site', t('Visitor_time_on_site')],\n\t\t\t['chat-opened-by-visitor', t('Chat_opened_by_visitor')],\n\t\t\t['after-guest-registration', t('After_guest_registration')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst conditionValuePlaceholders: { [conditionName: string]: string } = useMemo(\n\t\t() => ({\n\t\t\t'page-url': t('Enter_a_regex'),\n\t\t\t'time-on-site': t('Time_in_seconds'),\n\t\t}),\n\t\t[t],\n\t);\n\n\tconst senderOptions: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['queue', t('Impersonate_next_agent_from_queue')],\n\t\t\t['custom', t('Custom_agent')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst saveTriggerMutation = useMutation({\n\t\tmutationFn: saveTrigger,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tqueryClient.invalidateQueries(['livechat-triggers']);\n\t\t\trouter.navigate('/omnichannel/triggers');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t});\n\n\tconst handleSave = async (data: TriggersPayload) => {\n\t\tsaveTriggerMutation.mutateAsync({ ...data, _id: triggerData?._id });\n\t};\n\n\tconst formId = useUniqueId();\n\tconst enabledField = useUniqueId();\n\tconst runOnceField = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst descriptionField = useUniqueId();\n\tconst conditionField = useUniqueId();\n\tconst actionField = useUniqueId();\n\tconst actionMessageField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{triggerData?._id ? t('Edit_Trigger') : t('New_Trigger')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/triggers')} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form id={formId} onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={enabledField}>{t('Enabled')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='enabled'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field: { value, ...field } }) => <ToggleSwitch id={enabledField} {...field} checked={value} />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={runOnceField}>{t('Run_only_once_for_each_visitor')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='runOnce'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field: { value, ...field } }) => <ToggleSwitch id={runOnceField} {...field} checked={value} />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField} required>\n\t\t\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Name')) }}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tid={nameField}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.name?.message}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.name)}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${nameField}-error`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.name && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${nameField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.name.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={descriptionField}>{t('Description')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='description'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={descriptionField} {...field} value={description} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{conditionsFields.map((_, index) => {\n\t\t\t\t\t\t\tconst conditionValuePlaceholder = conditionValuePlaceholders[conditions[index].name];\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Field key={index}>\n\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor={conditionField}>{t('Condition')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname={`conditions.${index}.name`}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={conditionField} {...field} options={conditionOptions} />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t{conditionValuePlaceholder && (\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\t\tname={`conditions.${index}.value`}\n\t\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput {...field} placeholder={conditionValuePlaceholder} />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t{actionsFields.map((_, index) => (\n\t\t\t\t\t\t\t<Field key={index}>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={actionField}>{t('Action')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={t('Send_a_message')} readOnly />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname={`actions.${index}.params.sender`}\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Select id={actionField} {...field} options={senderOptions} placeholder={t('Select_an_option')} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t{actions[index].params?.sender === 'custom' && (\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname={`actions.${index}.params.name`}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput {...field} placeholder={t('Name_of_agent')} />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname={`actions.${index}.params.msg`}\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Message')) }}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextAreaInput\n\t\t\t\t\t\t\t\t\t\t\t\terror={errors.actions?.[index]?.params?.msg?.message}\n\t\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors.actions?.[index]?.params?.msg)}\n\t\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${actionMessageField}-error`}\n\t\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={`${t('Message')}*`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t{errors.actions?.[index]?.params?.msg && (\n\t\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${actionMessageField}-error`}>\n\t\t\t\t\t\t\t\t\t\t{errors.actions?.[index]?.params?.msg?.message}\n\t\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={() => router.navigate('/omnichannel/triggers')}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} type='submit' primary disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default EditTrigger;\n",null],"names":["_extends","_objectWithoutProperties","_objectSpread","FieldGroup","Button","ButtonGroup","Box","Field","FieldLabel","FieldRow","FieldError","TextInput","ToggleSwitch","Select","TextAreaInput","useUniqueId","useToastMessageDispatch","useRouter","useEndpoint","useTranslation","useMutation","useQueryClient","React","useMemo","Controller","useFieldArray","useForm","ContextualbarScrollableContent","ContextualbarTitle","ContextualbarFooter","Contextualbar","ContextualbarHeader","ContextualbarClose","module","link","default","v","getInitialValues","triggerData","name","description","enabled","runOnce","conditions","map","_ref","value","actions","_ref2","params","sender","msg","exportDefault","_ref3","t","router","queryClient","dispatchToastMessage","saveTrigger","control","handleSubmit","formState","isDirty","errors","watch","mode","values","fields","conditionsFields","actionsFields","conditionOptions","conditionValuePlaceholders","senderOptions","saveTriggerMutation","mutationFn","onSuccess","type","message","invalidateQueries","navigate","onError","error","handleSave","data","mutateAsync","_id","formId","enabledField","runOnceField","nameField","descriptionField","conditionField","actionField","actionMessageField","createElement","onClick","id","onSubmit","display","flexDirection","htmlFor","render","_ref4","field","_excluded","checked","_ref5","_excluded2","required","rules","_ref6","_errors$name","Boolean","concat","_ref7","_","index","conditionValuePlaceholder","key","_ref8","options","_ref9","placeholder","_actions$index$params","_errors$actions3","_errors$actions3$inde","_errors$actions3$inde2","_errors$actions4","_errors$actions4$inde","_errors$actions4$inde2","_errors$actions4$inde3","readOnly","_ref10","_ref11","_ref12","_errors$actions","_errors$actions$index","_errors$actions$index2","_errors$actions$index3","_errors$actions2","_errors$actions2$inde","_errors$actions2$inde2","rows","stretch","form","primary","disabled"],"mappings":"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"}