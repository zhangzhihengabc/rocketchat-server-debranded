function module(e,t,n){let o,a,l,c,r,i,s,h,_,u,m,k,d,v,b,g,L,E,w,p,f,C;n.link("@rocket.chat/fuselage",{Box(e){o=e},FieldGroup(e){a=e},Field(e){l=e},FieldRow(e){c=e},TextInput(e){r=e},MultiSelect(e){i=e},Button(e){s=e},ButtonGroup(e){h=e},NumberInput(e){_=e},FieldLabel(e){u=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){m=e}},1),n.link("@rocket.chat/ui-client",{ExternalLink(e){k=e}},2),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){d=e},useTranslation(e){v=e},useEndpoint(e){b=e}},3),n.link("@tanstack/react-query",{useMutation(e){g=e}},4),n.link("react",{default(e){L=e},useMemo(e){E=e}},5),n.link("react-hook-form",{Controller(e){w=e},useForm(e){p=e},useWatch(e){f=e}},6),n.link("../../../components/Page",{default(e){C=e}},7);let S=e=>Object.entries(e).reduce((e,t)=>{let[n,o]=t;return o&&(e=[...e,n]),e},[]),y=e=>{let{Livechat_webhookUrl:t,Livechat_secret_token:n,Livechat_webhook_on_start:o,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:c,Livechat_webhook_on_forward:r,Livechat_webhook_on_offline_msg:i,Livechat_webhook_on_visitor_message:s,Livechat_webhook_on_agent_message:h,Livechat_http_timeout:_}=e,u=S({Livechat_webhook_on_start:o,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:c,Livechat_webhook_on_forward:r,Livechat_webhook_on_offline_msg:i,Livechat_webhook_on_visitor_message:s,Livechat_webhook_on_agent_message:h});return{Livechat_webhookUrl:t,Livechat_secret_token:n,Livechat_http_timeout:_,sendOn:u}};n.exportDefault(e=>{let{settings:t}=e,n=v(),S=d(),O=y(t),{control:W,reset:T,formState:{isDirty:M,isSubmitting:x},handleSubmit:F}=p({defaultValues:O}),q=b("POST","/v1/omnichannel/integrations"),R=b("POST","/v1/livechat/webhook.test"),U=f({name:"Livechat_webhookUrl",control:W}),H=!(U&&!M),I=E(()=>[["Livechat_webhook_on_start",n("Chat_start")],["Livechat_webhook_on_close",n("Chat_close")],["Livechat_webhook_on_chat_taken",n("Chat_taken")],["Livechat_webhook_on_chat_queued",n("Chat_queued")],["Livechat_webhook_on_forward",n("Forwarding")],["Livechat_webhook_on_offline_msg",n("Offline_messages")],["Livechat_webhook_on_visitor_message",n("Visitor_message")],["Livechat_webhook_on_agent_message",n("Agent_messages")]],[n]),A=m(async e=>{let{sendOn:t,Livechat_webhookUrl:o,Livechat_secret_token:a,Livechat_http_timeout:l}=e;try{await q({LivechatWebhookUrl:o,LivechatSecretToken:a,LivechatHttpTimeout:l,LivechatWebhookOnStart:t.includes("Livechat_webhook_on_start"),LivechatWebhookOnClose:t.includes("Livechat_webhook_on_close"),LivechatWebhookOnChatTaken:t.includes("Livechat_webhook_on_chat_taken"),LivechatWebhookOnChatQueued:t.includes("Livechat_webhook_on_chat_queued"),LivechatWebhookOnForward:t.includes("Livechat_webhook_on_forward"),LivechatWebhookOnOfflineMsg:t.includes("Livechat_webhook_on_offline_msg"),LivechatWebhookOnVisitorMessage:t.includes("Livechat_webhook_on_visitor_message"),LivechatWebhookOnAgentMessage:t.includes("Livechat_webhook_on_agent_message")}),T(e),S({type:"success",message:n("Saved")})}catch(e){S({type:"error",message:e})}}),B=g({mutationFn:()=>R(),onSuccess:()=>S({type:"success",message:n("It_works")}),onError:e=>S({type:"error",message:e})});return L.createElement(C,null,L.createElement(C.Header,{title:n("Webhooks")},L.createElement(h,null,L.createElement(s,{onClick:()=>T(),disabled:!M||x},n("Reset")),L.createElement(s,{onClick:()=>B.mutateAsync(),disabled:H||B.isLoading,title:H?n("Webhook_URL_not_set"):""},B.isLoading?n("Sending"):n("Send_Test")),L.createElement(s,{primary:!0,onClick:F(A),loading:x,disabled:!M},n("Save")))),L.createElement(C.ScrollableContentWithShadow,null,L.createElement(o,{maxWidth:"x600",w:"full",alignSelf:"center"},L.createElement("p",null,n("You_can_use_webhooks_to_easily_integrate_livechat_with_your_CRM")),L.createElement("p",null,L.createElement(k,{to:"https://docs.rocket.chat/use-rocket.chat/omnichannel/webhooks"},n("Click_here"))," ",n("to_see_more_details_on_how_to_integrate")),L.createElement(a,{style:{marginTop:"1.5rem"}},L.createElement(l,null,L.createElement(u,null,n("Webhook_URL")),L.createElement(c,null,L.createElement(w,{control:W,name:"Livechat_webhookUrl",render:e=>{let{field:{onChange:t,value:n}}=e;return L.createElement(r,{onChange:t,value:n,placeholder:"https://yourdomain.com/webhook/entrypoint"})}}))),L.createElement(l,null,L.createElement(u,null,n("Secret_token")),L.createElement(c,null,L.createElement(w,{control:W,name:"Livechat_secret_token",render:e=>{let{field:{onChange:t,value:o}}=e;return L.createElement(r,{onChange:t,value:o,placeholder:n("Secret_token")})}}))),L.createElement(l,null,L.createElement(u,null,n("Send_request_on")),L.createElement(c,null,L.createElement(o,{w:"full",display:"flex",alignItems:"stretch",justifyContent:"stretch"},L.createElement(w,{control:W,name:"sendOn",render:e=>{let{field:{onChange:t,value:o}}=e;return L.createElement(i,{w:"full",value:o,onChange:t,options:I,placeholder:n("Select_an_option")})}})))),L.createElement(l,null,L.createElement(u,null,n("Http_timeout")),L.createElement(c,null,L.createElement(w,{control:W,name:"Livechat_http_timeout",render:e=>{let{field:{onChange:t,value:o}}=e;return L.createElement(_,{onChange:t,value:o,placeholder:n("Http_timeout_value")})}})))))))})}
//# sourceMappingURL=/dynamic/client/views/omnichannel/webhooks/9abf6f0f92d12f6fe8f5da580ce319c9953cdb22.map
