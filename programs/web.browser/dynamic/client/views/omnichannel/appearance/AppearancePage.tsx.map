)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/appearance/AppearancePage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISetting, Serialized } from '@rocket.chat/core-typings';\nimport { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React from 'react';\n\nimport Page from '../../../components/Page';\nimport { useForm } from '../../../hooks/useForm';\nimport AppearanceForm from './AppearanceForm';\n\ntype LivechatAppearanceSettings = {\n\tLivechat_title: string;\n\tLivechat_title_color: string;\n\tLivechat_show_agent_info: boolean;\n\tLivechat_show_agent_email: boolean;\n\tLivechat_display_offline_form: boolean;\n\tLivechat_offline_form_unavailable: string;\n\tLivechat_offline_message: string;\n\tLivechat_offline_title: string;\n\tLivechat_offline_title_color: string;\n\tLivechat_offline_email: string;\n\tLivechat_offline_success_message: string;\n\tLivechat_registration_form: boolean;\n\tLivechat_name_field_registration_form: boolean;\n\tLivechat_email_field_registration_form: boolean;\n\tLivechat_registration_form_message: string;\n\tLivechat_conversation_finished_message: string;\n\tLivechat_conversation_finished_text: string;\n\tLivechat_enable_message_character_limit: boolean;\n\tLivechat_message_character_limit: number;\n};\n\ntype AppearanceSettings = Partial<LivechatAppearanceSettings>;\n\nconst reduceAppearance = (settings: Serialized<ISetting>[]): AppearanceSettings =>\n\tsettings.reduce<Partial<LivechatAppearanceSettings>>((acc, { _id, value }) => {\n\t\tacc = { ...acc, [_id]: value };\n\t\treturn acc;\n\t}, {});\n\ntype AppearancePageProps = {\n\tsettings: Serialized<ISetting>[];\n};\n\nconst AppearancePage: FC<AppearancePageProps> = ({ settings }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst save = useEndpoint('POST', '/v1/livechat/appearance');\n\n\tconst { values, handlers, commit, reset, hasUnsavedChanges } = useForm(reduceAppearance(settings));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst mappedAppearance = Object.entries(values).map(([_id, value]) => ({ _id, value })) as {\n\t\t\t_id: string;\n\t\t\tvalue: string | boolean | number;\n\t\t}[];\n\n\t\ttry {\n\t\t\tawait save(mappedAppearance);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t\tcommit();\n\t\t} catch (error: unknown) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Appearance')}></Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<AppearanceForm values={values} handlers={handlers} />\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t<Page.Footer isDirty={hasUnsavedChanges}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={() => reset()}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasUnsavedChanges}>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Footer>\n\t\t</Page>\n\t);\n};\n\nexport default AppearancePage;\n",null],"names":["_objectSpread","ButtonGroup","Button","Box","useMutableCallback","useToastMessageDispatch","useEndpoint","useTranslation","React","Page","useForm","AppearanceForm","module","link","default","v","reduceAppearance","settings","reduce","acc","_ref","_id","value","exportDefault","_ref2","t","dispatchToastMessage","save","values","handlers","commit","reset","hasUnsavedChanges","handleSave","mappedAppearance","Object","entries","map","_ref3","type","message","error","createElement","Header","title","ScrollableContentWithShadow","maxWidth","w","alignSelf","Footer","isDirty","onClick","primary","disabled"],"mappings":"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"}