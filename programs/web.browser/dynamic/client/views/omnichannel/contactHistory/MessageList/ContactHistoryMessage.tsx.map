)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/contactHistory/MessageList/ContactHistoryMessage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport {\n\tMessage as MessageTemplate,\n\tMessageLeftContainer,\n\tMessageContainer,\n\tMessageBody,\n\tMessageDivider,\n\tMessageName,\n\tMessageUsername,\n\tMessageTimestamp,\n\tMessageHeader as MessageHeaderTemplate,\n\tMessageSystem,\n\tMessageSystemLeftContainer,\n\tMessageSystemContainer,\n\tMessageSystemBlock,\n\tMessageSystemName,\n\tMessageSystemBody,\n\tMessageSystemTimestamp,\n} from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { memo } from 'react';\n\nimport { getUserDisplayName } from '../../../../../lib/getUserDisplayName';\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport StatusIndicators from '../../../../components/message/StatusIndicators';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useChat } from '../../../room/contexts/ChatContext';\n\nconst ContactHistoryMessage: FC<{\n\tmessage: IMessage;\n\tsequential: boolean;\n\tisNewDay: boolean;\n\tshowUserAvatar: boolean;\n}> = ({ message, sequential, isNewDay, showUserAvatar }) => {\n\tconst format = useFormatDate();\n\tconst formatTime = useFormatTime();\n\n\tconst t = useTranslation();\n\tconst chat = useChat();\n\n\tif (message.t === 'livechat-close') {\n\t\treturn (\n\t\t\t<MessageSystem>\n\t\t\t\t<MessageSystemLeftContainer>\n\t\t\t\t\t{showUserAvatar && (\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\turl={message.avatar}\n\t\t\t\t\t\t\tusername={message.u.username}\n\t\t\t\t\t\t\tsize='x18'\n\t\t\t\t\t\t\tonClick={chat?.userCard.open(message.u.username)}\n\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</MessageSystemLeftContainer>\n\t\t\t\t<MessageSystemContainer>\n\t\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t\t<MessageSystemName data-username={message.u.username} data-qa-type='username'>\n\t\t\t\t\t\t\t@{message.u.username}\n\t\t\t\t\t\t</MessageSystemName>\n\t\t\t\t\t\t<MessageSystemBody title={message.msg}>{t('Conversation_closed', { comment: message.msg })}</MessageSystemBody>\n\t\t\t\t\t\t<MessageSystemTimestamp title={formatTime(message.ts)}>{formatTime(message.ts)}</MessageSystemTimestamp>\n\t\t\t\t\t</MessageSystemBlock>\n\t\t\t\t</MessageSystemContainer>\n\t\t\t</MessageSystem>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{isNewDay && <MessageDivider>{format(message.ts)}</MessageDivider>}\n\t\t\t<MessageTemplate isPending={message.temp} sequential={sequential} role='listitem' data-qa='chat-history-message'>\n\t\t\t\t<MessageLeftContainer>\n\t\t\t\t\t{!sequential && message.u.username && showUserAvatar && (\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\turl={message.avatar}\n\t\t\t\t\t\t\tusername={message.u.username}\n\t\t\t\t\t\t\tsize='x36'\n\t\t\t\t\t\t\tonClick={chat?.userCard.open(message.u.username)}\n\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{sequential && <StatusIndicators message={message} />}\n\t\t\t\t</MessageLeftContainer>\n\n\t\t\t\t<MessageContainer>\n\t\t\t\t\t{!sequential && (\n\t\t\t\t\t\t<MessageHeaderTemplate>\n\t\t\t\t\t\t\t<MessageName title={`@${message.u.username}`} data-username={message.u.username}>\n\t\t\t\t\t\t\t\t{message.alias || getUserDisplayName(message.u.name, message.u.username, false)}\n\t\t\t\t\t\t\t</MessageName>\n\t\t\t\t\t\t\t<MessageUsername data-username={message.u.username} data-qa-type='username'>\n\t\t\t\t\t\t\t\t@{message.u.username}\n\t\t\t\t\t\t\t</MessageUsername>\n\t\t\t\t\t\t\t<MessageTimestamp title={formatTime(message.ts)}>{formatTime(message.ts)}</MessageTimestamp>\n\t\t\t\t\t\t\t<StatusIndicators message={message} />\n\t\t\t\t\t\t</MessageHeaderTemplate>\n\t\t\t\t\t)}\n\t\t\t\t\t{!message.blocks && message.md && (\n\t\t\t\t\t\t<MessageBody data-qa-type='message-body'>\n\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t</MessageBody>\n\t\t\t\t\t)}\n\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t{message.attachments && <Attachments attachments={message.attachments} />}\n\t\t\t\t</MessageContainer>\n\t\t\t</MessageTemplate>\n\t\t</>\n\t);\n};\n\nexport default memo(ContactHistoryMessage);\n",null],"names":["MessageTemplate","MessageLeftContainer","MessageContainer","MessageBody","MessageDivider","MessageName","MessageUsername","MessageTimestamp","MessageHeaderTemplate","MessageSystem","MessageSystemLeftContainer","MessageSystemContainer","MessageSystemBlock","MessageSystemName","MessageSystemBody","MessageSystemTimestamp","useTranslation","React","memo","getUserDisplayName","UserAvatar","MessageContentBody","StatusIndicators","Attachments","UiKitMessageBlock","useFormatDate","useFormatTime","useChat","module","link","Message","v","MessageHeader","default","exportDefault","_ref","message","sequential","isNewDay","showUserAvatar","format","formatTime","t","chat","createElement","url","avatar","username","u","size","onClick","userCard","open","style","cursor","title","msg","comment","ts","Fragment","isPending","temp","role","concat","alias","name","blocks","md","mentions","channels","rid","mid","_id","attachments"],"mappings":"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"}