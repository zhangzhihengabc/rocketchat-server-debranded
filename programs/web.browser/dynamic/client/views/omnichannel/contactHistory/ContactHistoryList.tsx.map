)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/contactHistory/ContactHistoryList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Margins, TextInput, Icon, Throbber, States, StatesIcon, StatesTitle, StatesSubtitle } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent, Dispatch, ReactElement, SetStateAction } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarContent,\n\tContextualbarTitle,\n\tContextualbarIcon,\n\tContextualbarClose,\n\tContextualbarEmptyContent,\n} from '../../../components/Contextualbar';\nimport ScrollableContentWrapper from '../../../components/ScrollableContentWrapper';\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../lib/asyncState';\nimport { useOmnichannelRoom } from '../../room/contexts/RoomContext';\nimport ContactHistoryItem from './ContactHistoryItem';\nimport { useHistoryList } from './useHistoryList';\n\nconst ContactHistoryList = ({ setChatId, close }: { setChatId: Dispatch<SetStateAction<string>>; close: () => void }): ReactElement => {\n\tconst [text, setText] = useState('');\n\tconst t = useTranslation();\n\tconst room = useOmnichannelRoom();\n\tconst { itemsList: historyList, loadMoreItems } = useHistoryList(\n\t\tuseMemo(() => ({ roomId: room._id, filter: text, visitorId: room.v._id }), [room, text]),\n\t);\n\n\tconst handleSearchChange = (event: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetText(event.currentTarget.value);\n\t};\n\n\tconst { phase, error, items: history, itemCount: totalItemCount } = useRecordList(historyList);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='history' />\n\t\t\t\t<ContextualbarTitle>{t('Contact_Chat_History')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={close} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp={24}\n\t\t\t\t\tborderBlockEndWidth='default'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='extra-light'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Chat_History')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={handleSearchChange}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t{phase === AsyncStatePhase.LOADING && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{error && (\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t\t<StatesSubtitle>{error.toString()}</StatesSubtitle>\n\t\t\t\t\t</States>\n\t\t\t\t)}\n\t\t\t\t{phase !== AsyncStatePhase.LOADING && totalItemCount === 0 && <ContextualbarEmptyContent title={t('No_results_found')} />}\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && totalItemCount > 0 && history.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\ttotalCount={totalItemCount}\n\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\tphase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t? (): void => undefined\n\t\t\t\t\t\t\t\t\t: (start): unknown => loadMoreItems(start, Math.min(50, totalItemCount - start))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={history}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(index, data): ReactElement => <ContactHistoryItem key={index} history={data} setChatId={setChatId} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</ContextualbarContent>\n\t\t</>\n\t);\n};\n\nexport default ContactHistoryList;\n",null],"names":["Box","Margins","TextInput","Icon","Throbber","States","StatesTitle","StatesSubtitle","useTranslation","React","useMemo","useState","Virtuoso","ContextualbarHeader","ContextualbarContent","ContextualbarTitle","ContextualbarIcon","ContextualbarClose","ContextualbarEmptyContent","ScrollableContentWrapper","useRecordList","AsyncStatePhase","useOmnichannelRoom","ContactHistoryItem","useHistoryList","module","StatesIcon","default","exportDefault","_ref","setChatId","close","text","setText","t","room","itemsList","historyList","loadMoreItems","roomId","_id","filter","visitorId","v","phase","error","items","history","itemCount","totalItemCount","createElement","Fragment","name","onClick","paddingInline","display","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","flexShrink","flexGrow","mi","inline","placeholder","value","onChange","event","currentTarget","addon","size","LOADING","pi","pb","variation","toString","title","overflow","length","totalCount","endReached","undefined","start","Math","min","overscan","data","components","Scroller","itemContent","index","key"],"mappings":"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"}