function module(e,t,n){let l,a,r,o,c,i,u,s,m,d,E,k,f,p,h,b,v,C,x,g,y,B,F,N,S,_,D,I,M,R,T;n.link("@rocket.chat/fuselage",{Box(e){l=e},Margins(e){a=e},ButtonGroup(e){r=e},Button(e){o=e},Divider(e){c=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){i=e}},1),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){u=e},useRoute(e){s=e},useTranslation(e){m=e},useEndpoint(e){d=e},usePermission(e){E=e},useRouter(e){k=e}},2),n.link("@tanstack/react-query",{useQuery(e){f=e}},3),n.link("react",{default(e){p=e},useCallback(e){h=e}},4),n.link("use-sync-external-store/shim",{useSyncExternalStore(e){b=e}},5),n.link("../../../../../../ee/client/lib/voip/parseOutboundPhoneNumber",{parseOutboundPhoneNumber(e){v=e}},6),n.link("../../../../../../ee/client/omnichannel/ContactManagerInfo",{default(e){C=e}},7),n.link("../../../../../components/Contextualbar",{ContextualbarScrollableContent(e){x=e},ContextualbarFooter(e){g=e}},8),n.link("../../../../../components/UserStatus",{UserStatus(e){y=e}},9),n.link("../../../../../components/avatar/UserAvatar",{default(e){B=e}},10),n.link("../../../../../contexts/CallContext",{useIsCallReady(e){F=e}},11),n.link("../../../../../hooks/useFormatDate",{useFormatDate(e){N=e}},12),n.link("../../../components/AgentInfoDetails",{default(e){S=e}},13),n.link("../../../components/CustomField",{default(e){_=e}},14),n.link("../../../components/Field",{default(e){D=e}},15),n.link("../../../components/Info",{default(e){I=e}},16),n.link("../../../components/Label",{default(e){M=e}},17),n.link("../../calls/contextualBar/VoipInfoCallButton",{VoipInfoCallButton(e){R=e}},18),n.link("../../components/FormSkeleton",{FormSkeleton(e){T=e}},19),n.exportDefault(e=>{let{id:t,rid:n="",route:P}=e,U=m(),w=u(),G=k(),O=s("live"),z=b(G.subscribeToRouteChange,h(()=>G.getRouteName(),[G])),A=N(),L=F(),V=E("view-livechat-room-customfields"),j=E("edit-omnichannel-contact"),q=d("GET","/v1/livechat/custom-fields"),{data:{customFields:H}={}}=f(["/v1/livechat/custom-fields"],()=>q()),Q=d("GET","/v1/omnichannel/contact"),{data:{contact:W}={},isInitialLoading:J,isError:K}=f(["/v1/omnichannel/contact",t],()=>Q({contactId:t}),{enabled:V&&!!t}),X=i(()=>{if(!j)return w({type:"error",message:U("Not_authorized")});if(P){G.navigate({name:P,params:{tab:"contact-profile",context:"edit",id:n}});return}G.navigate({name:"omnichannel-directory",params:{page:"contacts",id:t,bar:"edit"}})});if(J)return p.createElement(l,{pi:24},p.createElement(T,null));if(K||!W)return p.createElement(l,{mbs:16},U("Contact_not_found"));let{username:Y,visitorEmails:Z,phone:$,ts:ee,livechatData:et,lastChat:en,contactManager:el,status:ea}=W,er="live"===z&&en,[{phoneNumber:eo=""}]=null!=$?$:[{}],[{address:ec=""}]=null!=Z?Z:[{}],ei=e=>{let t=null==H?void 0:H.find(t=>{let{_id:n}=t;return n===e});return(null==t?void 0:t.visibility)==="visible"&&(null==t?void 0:t.scope)==="visitor"},eu=Object.entries(null!=et?et:{}).filter(e=>{let[t,n]=e;return ei(t)&&n});return p.createElement(p.Fragment,null,p.createElement(x,{p:24},p.createElement(a,{block:4},Y&&p.createElement(D,null,p.createElement(M,null,"".concat(U("Name")," / ").concat(U("Username"))),p.createElement(I,{style:{display:"flex"}},p.createElement(B,{size:"x40",title:Y,username:Y}),p.createElement(S,{mis:10,name:Y,shortName:Y,status:p.createElement(y,{status:ea})}))),ec&&p.createElement(D,null,p.createElement(M,null,U("Email")),p.createElement(I,null,ec)),eo&&p.createElement(D,null,p.createElement(M,null,U("Phone")),p.createElement(I,null,v(eo))),ee&&p.createElement(D,null,p.createElement(M,null,U("Created_at")),p.createElement(I,null,A(ee))),en&&p.createElement(D,null,p.createElement(M,null,U("Last_Chat")),p.createElement(I,null,A(en.ts))),V&&eu.map(e=>{let[t,n]=e;return p.createElement(_,{key:t,id:t,value:n})}),el&&p.createElement(D,null,p.createElement(M,null,U("Contact_Manager")),p.createElement(C,{username:el.username})))),p.createElement(g,null,p.createElement(r,{stretch:!0,flexWrap:"wrap"},L&&p.createElement(p.Fragment,null,p.createElement(R,{phoneNumber:eo,mi:0,flexBasis:"0"}),er&&p.createElement(c,{width:"100%"})),er&&p.createElement(o,{icon:"history",onClick:()=>{let{_id:e=""}=null!=en?en:{};O.push({id:e,tab:"contact-chat-history"})},mis:0,flexBasis:"0"},U("Chat_History")),p.createElement(o,{icon:"pencil",onClick:X,flexBasis:"0"},U("Edit")))))})}
//# sourceMappingURL=/dynamic/client/views/omnichannel/directory/contacts/contextualBar/95d004c88a943aece021490429015f9e61ac38eb.map
