function module(e,t,l){let n,a,o,r,i,u,m,c,s,d,E,k,f,p,v,h,g,b,F,C,T,_,y,D,x,A,I,M,S,B,O,Q,R,w,N;l.link("@rocket.chat/fuselage",{Box(e){n=e},Margins(e){a=e},Tag(e){o=e},Button(e){r=e},ButtonGroup(e){i=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){u=e}},1),l.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){m=e},useRoute(e){c=e},useUserSubscription(e){s=e},useTranslation(e){d=e},usePermission(e){E=e}},2),l.link("meteor/meteor",{Meteor(e){k=e}},3),l.link("moment",{default(e){f=e}},4),l.link("react",{default(e){p=e},useEffect(e){v=e},useMemo(e){h=e},useState(e){g=e}},5),l.link("../../../../../components/Contextualbar",{ContextualbarScrollableContent(e){b=e},ContextualbarFooter(e){F=e}},6),l.link("../../../../../hooks/useEndpointData",{useEndpointData(e){C=e}},7),l.link("../../../../../hooks/useFormatDateAndTime",{useFormatDateAndTime(e){T=e}},8),l.link("../../../../../hooks/useFormatDuration",{useFormatDuration(e){_=e}},9),l.link("../../../components/CustomField",{default(e){y=e}},10),l.link("../../../components/Field",{default(e){D=e}},11),l.link("../../../components/Info",{default(e){x=e}},12),l.link("../../../components/Label",{default(e){A=e}},13),l.link("../../components",{AgentField(e){I=e},SlaField(e){M=e},ContactField(e){S=e},SourceField(e){B=e}},14),l.link("../../components/PriorityField",{default(e){O=e}},15),l.link("../../hooks/useOmnichannelRoomInfo",{useOmnichannelRoomInfo(e){Q=e}},16),l.link("../../utils/formatQueuedAt",{formatQueuedAt(e){R=e}},17),l.link("./DepartmentField",{default(e){w=e}},18),l.link("./VisitorClientInfo",{default(e){N=e}},19),l.exportDefault(function(e){var t;let{id:l,route:P}=e,j=d(),z=m(),G=T(),{value:L,phase:U}=C("/v1/livechat/custom-fields"),[V,q]=g([]),H=_(),{data:J}=Q(l),{ts:K,tags:W,closedAt:X,departmentId:Y,v:Z,servedBy:$,metrics:ee,topic:et,waitingResponse:el,responseBy:en,slaId:ea,priorityId:eo,livechatData:er,source:ei,queuedAt:eu}=J||{room:{v:{}}},em=c(P||"omnichannel-directory"),ec=E("view-livechat-room-customfields"),es=s(l),ed=E("save-others-livechat-room-info"),eE=(null==$?void 0:$._id)===k.userId(),ek=null==Z?void 0:Z._id,ef=eu||K,ep=h(()=>R(J),[J]);v(()=>{if(L){let{customFields:e}=L;q(e)}},[L,U]);let ev=e=>{let t=V.find(t=>{let{_id:l}=t;return l===e});return(null==t?void 0:t.visibility)==="visible"&&(null==t?void 0:t.scope)==="room"},eh=u(()=>{if(!(es||eE||ed))return z({type:"error",message:j("Not_authorized")});em.push(P?{tab:"room-info",context:"edit",id:l}:{page:"chats",id:l,bar:"edit"})}),eg=Object.entries(er||{}).filter(e=>{let[t]=e;return ev(t)&&er[t]});return p.createElement(p.Fragment,null,p.createElement(b,{p:24},p.createElement(a,{block:"x4"},ei&&p.createElement(B,{room:J}),J&&Z&&p.createElement(S,{contact:Z,room:J}),ek&&p.createElement(N,{uid:ek}),$&&p.createElement(I,{agent:$}),Y&&p.createElement(w,{departmentId:Y}),W&&W.length>0&&p.createElement(D,null,p.createElement(A,null,j("Tags")),p.createElement(x,null,W.map(e=>p.createElement(n,{key:e,mie:4,display:"inline"},p.createElement(o,{style:{display:"inline"},disabled:!0},e))))),et&&p.createElement(D,null,p.createElement(A,null,j("Topic")),p.createElement(x,null,et)),ef&&p.createElement(D,null,p.createElement(A,null,j("Queue_Time")),p.createElement(x,null,ep)),X&&p.createElement(D,null,p.createElement(A,null,j("Chat_Duration")),p.createElement(x,null,f(X).from(f(K),!0))),K&&p.createElement(D,null,p.createElement(A,null,j("Created_at")),p.createElement(x,null,G(K))),X&&p.createElement(D,null,p.createElement(A,null,j("Closed_At")),p.createElement(x,null,G(X))),(null==$?void 0:$.ts)&&p.createElement(D,null,p.createElement(A,null,j("Taken_at")),p.createElement(x,null,G($.ts))),(null==ee?void 0:null===(t=ee.response)||void 0===t?void 0:t.avg)&&H(ee.response.avg)&&p.createElement(D,null,p.createElement(A,null,j("Avg_response_time")),p.createElement(x,null,H(ee.response.avg))),!el&&(null==en?void 0:en.lastMessageTs)&&p.createElement(D,null,p.createElement(A,null,j("Inactivity_Time")),p.createElement(x,null,f(en.lastMessageTs).fromNow(!0))),ec&&eg.map(e=>{let[t,l]=e;return p.createElement(y,{key:t,id:t,value:l})}),ea&&p.createElement(M,{id:ea}),eo&&p.createElement(O,{id:eo}))),p.createElement(F,null,p.createElement(i,{stretch:!0},p.createElement(r,{icon:"pencil",onClick:eh},j("Edit")))))})}
//# sourceMappingURL=/dynamic/client/views/omnichannel/directory/chats/contextualBar/9dc8d48f59f221c9a38fb5b77f5d89eff0d8e578.map
