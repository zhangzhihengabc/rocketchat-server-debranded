)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/calls/contextualBar/VoipInfo.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IVoipRoom } from '@rocket.chat/core-typings';\nimport { Box, Icon, Chip, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { parseOutboundPhoneNumber } from '../../../../../../ee/client/lib/voip/parseOutboundPhoneNumber';\nimport {\n\tContextualbarIcon,\n\tContextualbarHeader,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n} from '../../../../../components/Contextualbar';\nimport InfoPanel from '../../../../../components/InfoPanel';\nimport { UserStatus } from '../../../../../components/UserStatus';\nimport UserAvatar from '../../../../../components/avatar/UserAvatar';\nimport { useIsCallReady } from '../../../../../contexts/CallContext';\nimport AgentInfoDetails from '../../../components/AgentInfoDetails';\nimport AgentField from '../../components/AgentField';\nimport { InfoField } from './InfoField';\nimport { VoipInfoCallButton } from './VoipInfoCallButton';\n\ntype VoipInfoPropsType = {\n\troom: IVoipRoom;\n\tonClickClose: () => void;\n\tonClickReport?: () => void;\n};\n\nexport const VoipInfo = ({ room, onClickClose /* , onClickReport  */ }: VoipInfoPropsType): ReactElement => {\n\tconst t = useTranslation();\n\tconst isCallReady = useIsCallReady();\n\n\tconst { servedBy, queue, v, fname, name, callDuration, callTotalHoldTime, closedAt, callWaitingTime, tags, lastMessage } = room;\n\tconst duration = callDuration && moment.utc(callDuration).format('HH:mm:ss');\n\tconst waiting = callWaitingTime && moment.utc(callWaitingTime).format('HH:mm:ss');\n\tconst hold = callTotalHoldTime && moment.utc(callTotalHoldTime).format('HH:mm:ss');\n\tconst endedAt = closedAt && moment(closedAt).format('LLL');\n\tconst phoneNumber = Array.isArray(v?.phone) ? v?.phone[0]?.phoneNumber : v?.phone;\n\tconst shouldShowWrapup = useMemo(() => lastMessage?.t === 'voip-call-wrapup' && lastMessage?.msg, [lastMessage]);\n\tconst shouldShowTags = useMemo(() => tags && tags.length > 0, [tags]);\n\tconst _name = fname || name;\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader expanded>\n\t\t\t\t<ContextualbarIcon name='phone' />\n\t\t\t\t<ContextualbarTitle>{t('Call_Information')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={onClickClose} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<InfoPanel>\n\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t<InfoPanel.Label>{t('Channel')}</InfoPanel.Label>\n\t\t\t\t\t\t<Box color='default'>\n\t\t\t\t\t\t\t<Icon size='x24' name='phone' verticalAlign='middle' />\n\t\t\t\t\t\t\t{t('Voice_Call')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t\t{servedBy && <AgentField isSmall agent={servedBy} />}\n\t\t\t\t\t{v && _name && (\n\t\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t\t<InfoPanel.Label>{t('Contact')}</InfoPanel.Label>\n\t\t\t\t\t\t\t<Box display='flex'>\n\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={_name} />\n\t\t\t\t\t\t\t\t<AgentInfoDetails mis={8} name={parseOutboundPhoneNumber(_name)} status={<UserStatus status={v?.status} />} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{phoneNumber && <InfoField label={t('Caller_Id')} info={parseOutboundPhoneNumber(phoneNumber)} />}\n\t\t\t\t\t{queue && <InfoField label={t('Queue')} info={queue} />}\n\t\t\t\t\t{endedAt && <InfoField label={t('Last_Call')} info={endedAt} />}\n\t\t\t\t\t<InfoField label={t('Waiting_Time')} info={waiting || t('Not_Available')} />\n\t\t\t\t\t<InfoField label={t('Talk_Time')} info={duration || t('Not_Available')} />\n\t\t\t\t\t<InfoField label={t('Hold_Time')} info={hold || t('Not_Available')} />\n\t\t\t\t\t<InfoPanel.Field>\n\t\t\t\t\t\t<InfoPanel.Label>{t('Wrap_Up_Notes')}</InfoPanel.Label>\n\t\t\t\t\t\t<InfoPanel.Text withTruncatedText={false}>{shouldShowWrapup ? lastMessage?.msg : t('Not_Available')}</InfoPanel.Text>\n\t\t\t\t\t\t{shouldShowTags && (\n\t\t\t\t\t\t\t<InfoPanel.Text>\n\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t\t\t\t\t\t{tags?.map((tag: string) => (\n\t\t\t\t\t\t\t\t\t\t<Chip mie={4} key={tag} value={tag}>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Chip>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</InfoPanel.Text>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</InfoPanel.Field>\n\t\t\t\t</InfoPanel>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t{/* TODO: Introduce this buttons [Not part of MVP] */}\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{/* <Button danger onClick={onClickReport}>\n\t\t\t\t\t\t<Box display='flex' justifyContent='center' fontSize='p2'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x20' mie='4px' />\n\t\t\t\t\t\t\t{t('Report_Number')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Button> */}\n\t\t\t\t\t{isCallReady && <VoipInfoCallButton phoneNumber={phoneNumber} />}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n",null],"names":["Box","Icon","Chip","ButtonGroup","useTranslation","moment","React","useMemo","parseOutboundPhoneNumber","ContextualbarIcon","ContextualbarHeader","ContextualbarTitle","ContextualbarClose","ContextualbarScrollableContent","ContextualbarFooter","InfoPanel","UserStatus","UserAvatar","useIsCallReady","AgentInfoDetails","AgentField","InfoField","VoipInfoCallButton","module","export","VoipInfo","default","_ref","_v$phone$","room","onClickClose","t","isCallReady","servedBy","queue","v","fname","name","callDuration","callTotalHoldTime","closedAt","callWaitingTime","tags","lastMessage","duration","utc","format","waiting","hold","endedAt","phoneNumber","Array","isArray","phone","shouldShowWrapup","msg","shouldShowTags","length","_name","createElement","Fragment","expanded","onClick","Field","Label","color","size","verticalAlign","isSmall","agent","display","username","mis","status","label","info","Text","withTruncatedText","flexDirection","alignItems","map","tag","mie","key","value","stretch"],"mappings":"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"}