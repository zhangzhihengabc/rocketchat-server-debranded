)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/CallsContextualBarDirectory.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IVoipRoom } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useRoute, useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { Contextualbar } from '../../../components/Contextualbar';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport Call from './calls/Call';\nimport { VoipInfo } from './calls/contextualBar/VoipInfo';\nimport { FormSkeleton } from './components/FormSkeleton';\n\nconst CallsContextualBarDirectory: FC = () => {\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\n\tconst bar = useRouteParameter('bar') || 'info';\n\tconst id = useRouteParameter('id');\n\tconst token = useSearchParameter('token');\n\n\tconst t = useTranslation();\n\n\tconst handleCallsContextualbarCloseButtonClick = (): void => {\n\t\tdirectoryRoute.push({ page: 'calls' });\n\t};\n\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\trid: id || '',\n\t\t\ttoken: token || '',\n\t\t}),\n\t\t[id, token],\n\t);\n\n\tconst { value: data, phase: state, error } = useEndpointData(`/v1/voip/room`, { params: query });\n\n\tif (bar === 'view' && id) {\n\t\treturn <Call rid={id} />;\n\t}\n\n\tif (state === AsyncStatePhase.LOADING) {\n\t\treturn (\n\t\t\t<Box pi={24}>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (error || !data || !data.room) {\n\t\treturn <Box mbs={16}>{t('Room_not_found')}</Box>;\n\t}\n\n\tconst room = data.room as unknown as IVoipRoom; // TODO Check why types are incompatible even though the endpoint returns an IVoipRooms\n\n\treturn (\n\t\t<Contextualbar>{bar === 'info' && <VoipInfo room={room} onClickClose={handleCallsContextualbarCloseButtonClick} />}</Contextualbar>\n\t);\n};\n\nexport default CallsContextualBarDirectory;\n",null],"names":["Box","useRoute","useRouteParameter","useSearchParameter","useTranslation","React","useMemo","Contextualbar","AsyncStatePhase","useEndpointData","Call","VoipInfo","FormSkeleton","module","link","default","exportDefault","directoryRoute","bar","id","token","t","query","rid","value","data","phase","state","error","params","createElement","LOADING","pi","room","mbs","onClickClose","push","page"],"mappings":"2BACAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAd,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAZ,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAN,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAL,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAJ,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,eAAAA,CAAAE,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAF,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAD,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA5CC,EAAOG,aAAa,CAYoB,KACvC,IAAMC,EAAiBhB,EAAS,yBAE1BiB,EAAMhB,EAAkB,QAAU,OAClCiB,EAAKjB,EAAkB,MACvBkB,EAAQjB,EAAmB,SAE3BkB,EAAIjB,IAMJkB,EAAQhB,EACb,IAAO,CAAA,CACNiB,IAAKJ,GAAM,GACXC,MAAOA,GAAS,KAEjB,CAACD,EAAIC,EAAM,EAGN,CAAEI,MAAOC,CAAI,CAAEC,MAAOC,CAAK,CAAEC,MAAAA,CAAAA,CAAO,CAAGnB,EAAe,gBAAkB,CAAEoB,OAAQP,CAAK,GAE7F,GAAIJ,AAAQ,SAARA,GAAkBC,EACrB,OAAOd,EAAAyB,aAAA,CAACpB,EAAI,CAACa,IAAKJ,CAAG,GAGtB,GAAIQ,IAAUnB,EAAgBuB,OAAO,CACpC,OACC1B,EAAAyB,aAAA,CAAC9B,EAAG,CAACgC,GAAI,EAAG,EACX3B,EAAAyB,aAAA,CAAClB,EAAY,OAKhB,GAAIgB,GAAS,CAACH,GAAQ,CAACA,EAAKQ,IAAI,CAC/B,OAAO5B,EAAAyB,aAAA,CAAC9B,EAAG,CAACkC,IAAK,EAAG,EAAEb,EAAE,mBAGzB,IAAMY,EAAOR,EAAKQ,IAA4B,CAE9C,OACC5B,EAAAyB,aAAA,CAACvB,EAAa,KAAEW,AAAQ,SAARA,GAAkBb,EAAAyB,aAAA,CAACnB,EAAQ,CAACsB,KAAMA,EAAME,aAjCR,KAChDlB,EAAemB,IAAI,CAAC,CAAEC,KAAM,OAAO,EACpC,CA+BgH,GAEjH"}