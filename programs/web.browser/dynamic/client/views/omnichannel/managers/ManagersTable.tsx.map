)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/managers/ManagersTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport UserAvatar from '../../../components/avatar/UserAvatar';\nimport AddManager from './AddManager';\nimport RemoveManagerButton from './RemoveManagerButton';\n\n// TODO: Missing error state\nconst ManagersTable = () => {\n\tconst t = useTranslation();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address'>('name');\n\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tfields: JSON.stringify({ name: 1, username: 1, emails: 1, avatarETag: 1 }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection],\n\t\t),\n\t\t500,\n\t);\n\n\tconst getManagers = useEndpoint('GET', '/v1/livechat/users/manager');\n\tconst { data, isLoading, isSuccess, refetch } = useQuery(['livechat-manager', query], async () => getManagers(query));\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'emails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='emails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='remove' w='x60'>\n\t\t\t\t{t('Remove')}\n\t\t\t</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<AddManager reload={refetch} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={2} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data.users.length === 0 && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='shield'\n\t\t\t\t\ttitle={t('No_managers_yet')}\n\t\t\t\t\tdescription={t('No_managers_yet_description')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_managers')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data.users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody data-qa-id='GenericTableManagerInfoBody'>\n\t\t\t\t\t\t\t{data.users.map((user) => (\n\t\t\t\t\t\t\t\t<GenericTableRow key={user._id} tabIndex={0} qa-user-id={user._id}>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t<Box display='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={user.username || ''} etag={user.avatarETag} />\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' withTruncatedText mi={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignSelf='center' withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' withTruncatedText color='default'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.name || user.username}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' withTruncatedText color='hint'>\n\t\t\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t<Box mi={4} />\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{user.emails?.length && user.emails[0].address}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<RemoveManagerButton _id={user._id} reload={refetch} />\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ManagersTable;\n",null],"names":["_extends","_objectWithoutProperties","Box","Pagination","useDebouncedValue","useTranslation","useEndpoint","useQuery","React","useMemo","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","UserAvatar","AddManager","RemoveManagerButton","module","link","default","exportDefault","t","sortBy","sortDirection","setSort","_usePagination","current","itemsPerPage","setItemsPerPage","onSetItemsPerPage","setCurrent","onSetCurrent","paginationProps","_excluded","query","fields","JSON","stringify","name","username","emails","avatarETag","sort","concat","count","offset","getManagers","data","isLoading","isSuccess","refetch","headers","createElement","Fragment","key","direction","active","onClick","w","reload","headerCells","users","length","icon","title","description","linkHref","linkText","map","user","_user$emails","_id","tabIndex","withTruncatedText","display","alignItems","size","etag","mi","flexDirection","alignSelf","fontScale","color","address","divider","total"],"mappings":"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"}