)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/analytics/DateRangePicker.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, InputBox, Menu, Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Moment } from 'moment';\nimport moment from 'moment';\nimport type { ComponentProps } from 'react';\nimport React, { useState, useMemo, useEffect } from 'react';\n\nmoment.locale('en');\n\ntype DateRangePickerProps = Omit<ComponentProps<typeof Box>, 'onChange'> & {\n\tonChange(range: { start: string; end: string }): void;\n};\n\nconst formatToDateInput = (date: Moment) => date.format('YYYY-MM-DD');\n\nconst todayDate = formatToDateInput(moment());\n\nconst getMonthRange = (monthsToSubtractFromToday: number) => ({\n\tstart: formatToDateInput(moment().subtract(monthsToSubtractFromToday, 'month').date(1)),\n\tend: formatToDateInput(monthsToSubtractFromToday === 0 ? moment() : moment().subtract(monthsToSubtractFromToday).date(0)),\n});\n\nconst getWeekRange = (daysToSubtractFromStart: number, daysToSubtractFromEnd: number) => ({\n\tstart: formatToDateInput(moment().subtract(daysToSubtractFromStart, 'day')),\n\tend: formatToDateInput(moment().subtract(daysToSubtractFromEnd, 'day')),\n});\n\nconst DateRangePicker = ({ onChange = () => undefined, ...props }: DateRangePickerProps) => {\n\tconst t = useTranslation();\n\tconst [range, setRange] = useState({ start: '', end: '' });\n\n\tconst { start, end } = range;\n\n\tconst handleStart = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tstart: currentTarget.value,\n\t\t\tend: range.end,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleEnd = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tend: currentTarget.value,\n\t\t\tstart: range.start,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleRange = useMutableCallback((range) => {\n\t\tsetRange(range);\n\t\tonChange(range);\n\t});\n\n\tuseEffect(() => {\n\t\thandleRange({\n\t\t\tstart: todayDate,\n\t\t\tend: todayDate,\n\t\t});\n\t}, [handleRange]);\n\n\tconst options = useMemo(\n\t\t() => ({\n\t\t\ttoday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Today'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(0, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tyesterday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Yesterday'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(1, 1));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(7, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tpreviousWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(14, 7));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tlastMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(1));\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t\t[handleRange, t],\n\t);\n\n\treturn (\n\t\t<Box {...props}>\n\t\t\t<Box mi='neg-x4' height='full' display='flex' flexDirection='row'>\n\t\t\t\t<Field mi={4} flexShrink={1} flexGrow={1}>\n\t\t\t\t\t<FieldLabel>{t('Start')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<Box height='x40' display='flex' width='full'>\n\t\t\t\t\t\t\t<InputBox type='date' onChange={handleStart} max={todayDate} value={start} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field mi={4} flexShrink={1} flexGrow={1}>\n\t\t\t\t\t<FieldLabel>{t('End')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<Box height='x40' display='flex' width='full'>\n\t\t\t\t\t\t\t<InputBox type='date' onChange={handleEnd} min={start} max={todayDate} value={end} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Menu mis={8} options={options} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default DateRangePicker;\n",null],"names":["_objectWithoutProperties","Box","InputBox","Menu","Field","FieldLabel","FieldRow","useMutableCallback","useTranslation","moment","React","useState","useMemo","useEffect","module","link","default","v","locale","formatToDateInput","date","format","todayDate","getMonthRange","monthsToSubtractFromToday","start","subtract","end","getWeekRange","daysToSubtractFromStart","daysToSubtractFromEnd","exportDefault","_ref","onChange","undefined","props","_excluded","t","range","setRange","handleStart","_ref2","currentTarget","rangeObj","value","handleEnd","_ref3","handleRange","options","today","icon","label","action","yesterday","thisWeek","previousWeek","thisMonth","lastMonth","createElement","mi","height","display","flexDirection","flexShrink","flexGrow","width","type","max","min","mis"],"mappings":"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"}