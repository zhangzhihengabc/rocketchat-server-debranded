)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/analytics/Overview.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Skeleton } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useEffect, useState, useMemo } from 'react';\n\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\n\nconst initialData: { title?: string; value: string | number }[] = Array.from({ length: 3 }).map(() => ({ title: undefined, value: '' }));\n\nconst conversationsInitialData = [initialData, initialData];\nconst productivityInitialData = [initialData];\n\nconst Overview = ({ type, dateRange, departmentId }: { type: string; dateRange: { start: string; end: string }; departmentId: string }) => {\n\tconst t = useTranslation();\n\n\tconst { start, end } = dateRange;\n\n\tconst params = useMemo(\n\t\t() => ({\n\t\t\tname: type,\n\t\t\tfrom: start,\n\t\t\tto: end,\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId, end, start, type],\n\t);\n\n\tconst loadData = useEndpoint('GET', '/v1/livechat/analytics/overview');\n\n\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\n\n\tuseEffect(() => {\n\t\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\n\t}, [type]);\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tif (!start || !end) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst value = await loadData(params);\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (value.length > 3) {\n\t\t\t\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\n\t\t\t}\n\n\t\t\tsetDisplayData([value]);\n\t\t}\n\t\tfetchData();\n\t}, [start, end, loadData, params]);\n\n\treturn (\n\t\t<Box pb={28} flexDirection='column'>\n\t\t\t{displayData.map((items = [], i) => (\n\t\t\t\t<CounterRow key={i} border='0' pb='none'>\n\t\t\t\t\t{items.map(({ title, value }, i) => (\n\t\t\t\t\t\t<CounterItem\n\t\t\t\t\t\t\tflexShrink={1}\n\t\t\t\t\t\t\tpb={8}\n\t\t\t\t\t\t\tflexBasis='100%'\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\ttitle={title ? t(title as TranslationKey) : <Skeleton width='x60' />}\n\t\t\t\t\t\t\tcount={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CounterRow>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Overview;\n",null],"names":["_objectSpread","Box","Skeleton","useEndpoint","useTranslation","React","useEffect","useState","useMemo","CounterItem","CounterRow","module","link","default","initialData","Array","from","length","map","title","undefined","value","conversationsInitialData","productivityInitialData","exportDefault","_ref","type","dateRange","departmentId","t","start","end","params","name","to","loadData","displayData","setDisplayData","fetchData","slice","createElement","pb","flexDirection","items","arguments","i","key","border","_ref2","flexShrink","flexBasis","width","count"],"mappings":"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"}