)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/businessHours/NewBusinessHoursPage.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useRoute, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useState } from 'react';\n\nimport Page from '../../../components/Page';\nimport { DAYS_OF_WEEK } from './BusinessHoursForm';\nimport BusinessHoursFormContainer from './BusinessHoursFormContainer';\nimport { mapBusinessHoursForm } from './mapBusinessHoursForm';\n\nconst closedDays = ['Saturday', 'Sunday'];\nconst createDefaultBusinessHours = () => ({\n\tname: '',\n\tworkHours: DAYS_OF_WEEK.map((day) => ({\n\t\tday,\n\t\tstart: {\n\t\t\ttime: '00:00',\n\t\t},\n\t\tfinish: {\n\t\t\ttime: '00:00',\n\t\t},\n\t\topen: !closedDays.includes(day),\n\t})),\n\tdepartments: [],\n\ttimezoneName: 'America/Sao_Paulo',\n\tdepartmentsToApplyBusinessHour: '',\n});\n\nconst defaultBusinessHour = createDefaultBusinessHours();\n\nconst NewBusinessHoursPage = () => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [hasChanges, setHasChanges] = useState(false);\n\n\tconst saveData = useRef({ form: {} });\n\n\tconst save = useMethod('livechat:saveBusinessHour');\n\tconst router = useRoute('omnichannel-businessHours');\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst {\n\t\t\tcurrent: { form, multiple: { departments, ...multiple } = {}, timezone: { name: timezoneName } = {} },\n\t\t} = saveData;\n\n\t\tif (multiple.name === '') {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\n\t\tconst mappedForm = mapBusinessHoursForm(form, defaultBusinessHour);\n\n\t\tconst departmentsToApplyBusinessHour = departments?.map((dep) => dep.value).join(',') || '';\n\n\t\ttry {\n\t\t\tconst payload = {\n\t\t\t\t...defaultBusinessHour,\n\t\t\t\t...multiple,\n\t\t\t\t...(departmentsToApplyBusinessHour && { departmentsToApplyBusinessHour }),\n\t\t\t\ttimezoneName,\n\t\t\t\tworkHours: mappedForm,\n\t\t\t\ttype: 'custom',\n\t\t\t};\n\n\t\t\tawait save(payload);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\trouter.push({});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst handleReturn = useMutableCallback(() => {\n\t\trouter.push({});\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Business_Hours')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={handleReturn}>{t('Back')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasChanges}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<BusinessHoursFormContainer data={defaultBusinessHour} saveRef={saveData} onChange={setHasChanges} />\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default NewBusinessHoursPage;\n",null],"names":["_objectSpread","_objectWithoutProperties","Button","ButtonGroup","useMutableCallback","useToastMessageDispatch","useRoute","useMethod","useTranslation","React","useRef","useState","Page","DAYS_OF_WEEK","BusinessHoursFormContainer","mapBusinessHoursForm","module","link","default","v","closedDays","defaultBusinessHour","name","workHours","map","day","start","time","finish","open","includes","departments","timezoneName","departmentsToApplyBusinessHour","exportDefault","t","dispatchToastMessage","hasChanges","setHasChanges","saveData","form","save","router","handleSave","current","multiple","timezone","_excluded","type","message","field","mappedForm","dep","value","join","payload","push","error","handleReturn","createElement","Header","title","onClick","primary","disabled","ScrollableContentWithShadow","data","saveRef","onChange"],"mappings":"2BAAIA,EAAsGC,EAAtGC,EAAOC,EAA2GC,EAAkHC,EAAwBC,EAASC,EAAUC,EAA2MC,EAAMC,EAAOC,EAAsGC,EAAwEC,EAAwFC,EAAwHC,wBAAv1BC,EAAOC,IAAI,CAAC,uCAAuC,CAACC,QAAQC,CAAC,EAAEnB,EAAcmB,CAAC,CAAC,EAAE,GAAgCH,EAAOC,IAAI,CAAC,iDAAiD,CAACC,QAAQC,CAAC,EAAElB,EAAyBkB,CAAC,CAAC,EAAE,GAAlNH,EAAOC,IAAI,CAAC,wBAAwB,CAACf,OAAOiB,CAAC,EAAEjB,EAAOiB,CAAC,EAAEhB,YAAYgB,CAAC,EAAEhB,EAAYgB,CAAC,CAAC,EAAE,GAA0BH,EAAOC,IAAI,CAAC,8BAA8B,CAACb,mBAAmBe,CAAC,EAAEf,EAAmBe,CAAC,CAAC,EAAE,GAAiEH,EAAOC,IAAI,CAAC,2BAA2B,CAACZ,wBAAwBc,CAAC,EAAEd,EAAwBc,CAAC,EAAEb,SAASa,CAAC,EAAEb,EAASa,CAAC,EAAEZ,UAAUY,CAAC,EAAEZ,EAAUY,CAAC,EAAEX,eAAeW,CAAC,EAAEX,EAAeW,CAAC,CAAC,EAAE,GAA6BH,EAAOC,IAAI,CAAC,QAAQ,CAACC,QAAQC,CAAC,EAAEV,EAAMU,CAAC,EAAET,OAAOS,CAAC,EAAET,EAAOS,CAAC,EAAER,SAASQ,CAAC,EAAER,EAASQ,CAAC,CAAC,EAAE,GAAYH,EAAOC,IAAI,CAAC,2BAA2B,CAACC,QAAQC,CAAC,EAAEP,EAAKO,CAAC,CAAC,EAAE,GAAoBH,EAAOC,IAAI,CAAC,sBAAsB,CAACJ,aAAaM,CAAC,EAAEN,EAAaM,CAAC,CAAC,EAAE,GAAkCH,EAAOC,IAAI,CAAC,+BAA+B,CAACC,QAAQC,CAAC,EAAEL,EAA2BK,CAAC,CAAC,EAAE,GAA4BH,EAAOC,IAAI,CAAC,yBAAyB,CAACF,qBAAqBI,CAAC,EAAEJ,EAAqBI,CAAC,CAAC,EAAE,GAUr9B,IAAMC,EAAa,CAAC,WAAY,SAAS,CAkBnCC,EAjBoC,CACzCC,KAAM,GACNC,UAAWV,EAAaW,GAAG,CAAEC,GAAS,CAAA,CACrCA,IAAAA,EACAC,MAAO,CACNC,KAAM,OACP,EACAC,OAAQ,CACPD,KAAM,OACP,EACAE,KAAM,CAACT,EAAWU,QAAQ,CAACL,EAC5B,CAAA,GACAM,YAAa,EAAE,CACfC,aAAc,oBACdC,+BAAgC,EACjC,EA1BAjB,EAAOkB,aAAa,CA8BS,KAC5B,IAAMC,EAAI3B,IACJ4B,EAAuB/B,IAEvB,CAACgC,EAAYC,EAAc,CAAG3B,EAAS,CAAA,GAEvC4B,EAAW7B,EAAO,CAAE8B,KAAM,CAAC,CAAE,GAE7BC,EAAOlC,EAAU,6BACjBmC,EAASpC,EAAS,6BAElBqC,EAAavC,EAAmB,UACrC,GAAM,CACLwC,QAAS,CAAEJ,KAAAA,CAAI,CAAEK,SAAU,CAAEd,YAAAA,CAAAA,CAA0B,CAAG,CAAC,CAAC,CAAEe,SAAU,CAAExB,KAAMU,CAAAA,CAAc,CAAG,CAAC,CAAA,CAAE,CACpG,CAAGO,EAD0CM,EAAQ5C,EAClDsC,EADHK,OAAO,CAAUC,QAAQ,CAAAE,GAG1B,GAAIF,AAAkB,KAAlBA,EAASvB,IAAI,CAChB,OAAOc,EAAqB,CAC3BY,KAAM,QACNC,QAASd,EAAE,8BAA+B,CAAEe,MAAOf,EAAE,OAAQ,EAC9D,GAGD,IAAMgB,EAAapC,EAAqByB,EAAMnB,GAExCY,EAAiC,AAAAF,CAAAA,MAAAA,EAAW,KAAA,EAAXA,EAAaP,GAAG,CAAE4B,GAAQA,EAAIC,KAAK,EAAEC,IAAI,CAAC,IAAG,GAAK,GAEzF,GAAI,CACH,IAAMC,EAAOvD,EAAAA,EAAAA,EAAAA,EAAA,CAAA,EACTqB,GACAwB,GACCZ,GAAkC,CAAEA,+BAAAA,CAA+B,GAAC,CAAA,EAAA,CACxED,aAAAA,EACAT,UAAW4B,EACXH,KAAM,QAAQ,EAGf,OAAMP,EAAKc,GACXnB,EAAqB,CAAEY,KAAM,UAAWC,QAASd,EAAE,QAAS,GAC5DO,EAAOc,IAAI,CAAC,CAAC,EACd,CAAE,MAAOC,EAAO,CACfrB,EAAqB,CAAEY,KAAM,QAASC,QAASQ,CAAM,EACtD,CACD,GAEMC,EAAetD,EAAmB,KACvCsC,EAAOc,IAAI,CAAC,CAAC,EACd,GAEA,OACC/C,EAAAkD,aAAA,CAAC/C,EAAI,KACJH,EAAAkD,aAAA,CAAC/C,EAAKgD,MAAM,CAAA,CAACC,MAAO1B,EAAE,iBAAkB,EACvC1B,EAAAkD,aAAA,CAACxD,EAAW,KACXM,EAAAkD,aAAA,CAACzD,EAAM,CAAC4D,QAASJ,CAAa,EAAEvB,EAAE,SAClC1B,EAAAkD,aAAA,CAACzD,EAAM,CAAC6D,QAAO,CAAA,EAACD,QAASnB,EAAYqB,SAAU,CAAC3B,CAAW,EACzDF,EAAE,WAIN1B,EAAAkD,aAAA,CAAC/C,EAAKqD,2BAA2B,CAAA,KAChCxD,EAAAkD,aAAA,CAAC7C,EAA0B,CAACoD,KAAM7C,EAAqB8C,QAAS5B,EAAU6B,SAAU9B,CAAc,IAItG"}