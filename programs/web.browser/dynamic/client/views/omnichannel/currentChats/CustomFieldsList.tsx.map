)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/currentChats/CustomFieldsList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatCustomField } from '@rocket.chat/core-typings';\nimport { Field, FieldLabel, FieldRow, TextInput, Select } from '@rocket.chat/fuselage';\nimport { useTranslation, useRoute } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, Dispatch, SetStateAction } from 'react';\nimport React, { useEffect } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { Contextualbar, ContextualbarScrollableContent, ContextualbarHeader, ContextualbarClose } from '../../../components/Contextualbar';\n\ntype CustomFieldsListProps = {\n\tsetCustomFields: Dispatch<SetStateAction<{ [key: string]: string } | undefined>>;\n\tallCustomFields: ILivechatCustomField[];\n};\n\nconst CustomFieldsList = ({ setCustomFields, allCustomFields }: CustomFieldsListProps): ReactElement => {\n\tconst { register, watch, control } = useForm({ mode: 'onChange' });\n\n\t// TODO: When we refactor the other CurrentChat's fields to use react-hook-form, we need to change this to use the form controller\n\n\tuseEffect(() => {\n\t\tconst subscription = watch((value) => setCustomFields(value));\n\t\treturn (): void => subscription.unsubscribe();\n\t}, [setCustomFields, watch]);\n\n\tconst t = useTranslation();\n\tconst currentChatsRoute = useRoute('omnichannel-current-chats');\n\n\treturn (\n\t\t<Contextualbar>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t{t('Filter_by_Custom_Fields')}\n\t\t\t\t<ContextualbarClose onClick={(): void => currentChatsRoute.push({ context: '' })} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent is='form'>\n\t\t\t\t{/* TODO: REMOVE FILTER ONCE THE ENDPOINT SUPPORTS A SCOPE PARAMETER */}\n\t\t\t\t{allCustomFields\n\t\t\t\t\t.filter((customField) => customField.scope !== 'visitor')\n\t\t\t\t\t.map((customField: ILivechatCustomField) => {\n\t\t\t\t\t\tif (customField.type === 'select') {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Field key={customField._id}>\n\t\t\t\t\t\t\t\t\t<FieldLabel>{customField.label}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname={customField._id}\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Select {...field} options={(customField.options || '').split(',').map((item) => [item, item])} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Field key={customField._id}>\n\t\t\t\t\t\t\t\t<FieldLabel>{customField.label}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput flexGrow={1} {...register(customField._id)} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</ContextualbarScrollableContent>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default CustomFieldsList;\n",null],"names":["_extends","Field","FieldLabel","FieldRow","TextInput","Select","useTranslation","useRoute","React","useEffect","Controller","useForm","Contextualbar","ContextualbarScrollableContent","ContextualbarHeader","ContextualbarClose","module","link","default","v","exportDefault","_ref","setCustomFields","allCustomFields","register","watch","control","mode","subscription","value","unsubscribe","t","currentChatsRoute","createElement","onClick","push","context","is","filter","customField","scope","map","type","key","_id","label","name","render","_ref2","field","options","split","item","flexGrow"],"mappings":"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"}