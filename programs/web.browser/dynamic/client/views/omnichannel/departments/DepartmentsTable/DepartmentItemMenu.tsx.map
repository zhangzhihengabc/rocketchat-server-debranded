)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/departments/DepartmentsTable/DepartmentItemMenu.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment } from '@rocket.chat/core-typings';\nimport { Box, Icon, Menu } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useRoute, useSetModal, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useCallback } from 'react';\n\nimport RemoveDepartmentModal from './RemoveDepartmentModal';\n\nconst ARCHIVE_DEPARTMENT_ENDPOINTS = {\n\tarchive: '/v1/livechat/department/:_id/archive',\n\tunarchive: '/v1/livechat/department/:_id/unarchive',\n} as const;\n\ntype DepartmentItemMenuProps = {\n\tdepartment: Omit<ILivechatDepartment, '_updatedAt'>;\n\tarchived: boolean;\n};\n\nconst DepartmentItemMenu = ({ department, archived }: DepartmentItemMenuProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst queryClient = useQueryClient();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst route = useRoute('omnichannel-departments');\n\tconst departmentRemovalEnabled = useSetting('Omnichannel_enable_department_removal');\n\tconst { _id, name } = department;\n\n\tconst toggleArchive = useEndpoint('POST', archived ? ARCHIVE_DEPARTMENT_ENDPOINTS.unarchive : ARCHIVE_DEPARTMENT_ENDPOINTS.archive, {\n\t\t_id,\n\t});\n\n\tconst handleEdit = useMutableCallback(() => {\n\t\troute.push({ context: 'edit', id: _id });\n\t});\n\n\tconst handleReload = useCallback(async () => {\n\t\tawait queryClient.invalidateQueries(['livechat-departments']);\n\t}, [queryClient]);\n\n\tconst handleToggleArchive = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait toggleArchive();\n\t\t\tdispatchToastMessage({ type: 'success', message: archived ? t('Department_unarchived') : t('Department_archived') });\n\t\t\tqueryClient.removeQueries(['/v1/livechat/department/:_id', department._id]);\n\t\t\thandleReload();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst handlePermanentDepartmentRemoval = useMutableCallback(() => {\n\t\tsetModal(<RemoveDepartmentModal _id={_id} reset={handleReload} onClose={() => setModal(null)} name={name} />);\n\t});\n\n\tconst menuOptions = {\n\t\t...(!archived && {\n\t\t\tedit: {\n\t\t\t\tlabel: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon name='edit' size='x16' mie={4} />\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t\taction: (): void => handleEdit(),\n\t\t\t},\n\t\t}),\n\t\t[archived ? 'unarchive' : 'archive']: {\n\t\t\tlabel: (\n\t\t\t\t<>\n\t\t\t\t\t<Icon name={archived ? 'undo' : 'arrow-down-box'} size='x16' mie={4} />\n\t\t\t\t\t{archived ? t('Unarchive') : t('Archive')}\n\t\t\t\t</>\n\t\t\t),\n\t\t\taction: (): Promise<void> => handleToggleArchive(),\n\t\t},\n\t\tdelete: {\n\t\t\tlabel: (\n\t\t\t\t<Box data-tooltip={!departmentRemovalEnabled ? t('Department_Removal_Disabled') : undefined}>\n\t\t\t\t\t<Icon name='trash' size='x16' mie={4} />\n\t\t\t\t\t{t('Delete')}\n\t\t\t\t</Box>\n\t\t\t),\n\t\t\taction: (): void => handlePermanentDepartmentRemoval(),\n\t\t\tdisabled: !departmentRemovalEnabled,\n\t\t},\n\t};\n\treturn <Menu options={menuOptions} />;\n};\n\nexport default DepartmentItemMenu;\n",null],"names":["_objectSpread","Box","Icon","Menu","useMutableCallback","useToastMessageDispatch","useEndpoint","useRoute","useSetModal","useTranslation","useSetting","useQueryClient","React","useCallback","RemoveDepartmentModal","module","link","default","v","ARCHIVE_DEPARTMENT_ENDPOINTS","archive","unarchive","exportDefault","_ref","department","archived","t","queryClient","setModal","dispatchToastMessage","route","departmentRemovalEnabled","_id","name","toggleArchive","handleEdit","push","context","id","handleReload","invalidateQueries","handleToggleArchive","type","message","removeQueries","error","handlePermanentDepartmentRemoval","createElement","reset","onClose","menuOptions","edit","label","Fragment","size","mie","action","delete","undefined","disabled","options"],"mappings":"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"}