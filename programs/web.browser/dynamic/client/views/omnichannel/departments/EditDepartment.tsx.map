)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/departments/EditDepartment.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment, ILivechatDepartmentAgents, Serialized } from '@rocket.chat/core-typings';\nimport {\n\tFieldGroup,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n\tTextInput,\n\tBox,\n\tIcon,\n\tDivider,\n\tToggleSwitch,\n\tTextAreaInput,\n\tButtonGroup,\n\tButton,\n\tPaginatedSelectFiltered,\n} from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useRoute, useMethod, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../../ee/client/hooks/useHasLicenseModule';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport AutoCompleteDepartment from '../../../components/AutoCompleteDepartment';\nimport Page from '../../../components/Page';\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { useRoomsList } from '../../../hooks/useRoomsList';\nimport { AsyncStatePhase } from '../../../lib/asyncState';\nimport { EeTextInput, EeTextAreaInput, EeNumberInput, DepartmentForwarding, DepartmentBusinessHours } from '../additionalForms';\nimport DepartmentsAgentsTable from './DepartmentAgentsTable/DepartmentAgentsTable';\nimport { DepartmentTags } from './DepartmentTags';\n\nexport type EditDepartmentProps = {\n\tid?: string;\n\ttitle: string;\n\tdata?: Serialized<{\n\t\tdepartment: ILivechatDepartment | null;\n\t\tagents?: ILivechatDepartmentAgents[];\n\t}>;\n\tallowedToForwardData?: Serialized<{\n\t\tdepartments: ILivechatDepartment[];\n\t}>;\n};\n\ntype InitialValueParams = {\n\tdepartment?: Serialized<ILivechatDepartment> | null;\n\tagents?: Serialized<ILivechatDepartmentAgents>[];\n\tallowedToForwardData?: EditDepartmentProps['allowedToForwardData'];\n};\n\nexport type IDepartmentAgent = Pick<ILivechatDepartmentAgents, 'agentId' | 'username' | 'count' | 'order'> & {\n\t_id?: string;\n\tname?: string;\n};\n\nexport type FormValues = {\n\tname: string;\n\temail: string;\n\tdescription: string;\n\tenabled: boolean;\n\tmaxNumberSimultaneousChat: number;\n\tshowOnRegistration: boolean;\n\tshowOnOfflineForm: boolean;\n\tabandonedRoomsCloseCustomMessage: string;\n\trequestTagBeforeClosingChat: boolean;\n\tofflineMessageChannelName: string;\n\tvisitorInactivityTimeoutInSeconds: number;\n\twaitingQueueMessage: string;\n\tdepartmentsAllowedToForward: { label: string; value: string }[];\n\tfallbackForwardDepartment: string;\n\tagentList: IDepartmentAgent[];\n\tchatClosingTags: string[];\n};\n\nfunction withDefault<T>(key: T | undefined | null, defaultValue: T) {\n\treturn key || defaultValue;\n}\n\nconst getInitialValues = ({ department, agents, allowedToForwardData }: InitialValueParams) => ({\n\tname: withDefault(department?.name, ''),\n\temail: withDefault(department?.email, ''),\n\tdescription: withDefault(department?.description, ''),\n\tenabled: !!department?.enabled,\n\tmaxNumberSimultaneousChat: department?.maxNumberSimultaneousChat,\n\tshowOnRegistration: !!department?.showOnRegistration,\n\tshowOnOfflineForm: !!department?.showOnOfflineForm,\n\tabandonedRoomsCloseCustomMessage: withDefault(department?.abandonedRoomsCloseCustomMessage, ''),\n\trequestTagBeforeClosingChat: !!department?.requestTagBeforeClosingChat,\n\tofflineMessageChannelName: withDefault(department?.offlineMessageChannelName, ''),\n\tvisitorInactivityTimeoutInSeconds: department?.visitorInactivityTimeoutInSeconds,\n\twaitingQueueMessage: withDefault(department?.waitingQueueMessage, ''),\n\tdepartmentsAllowedToForward: allowedToForwardData?.departments?.map((dep) => ({ label: dep.name, value: dep._id })) || [],\n\tfallbackForwardDepartment: withDefault(department?.fallbackForwardDepartment, ''),\n\tchatClosingTags: department?.chatClosingTags ?? [],\n\tagentList: agents || [],\n});\n\nfunction EditDepartment({ data, id, title, allowedToForwardData }: EditDepartmentProps) {\n\tconst t = useTranslation();\n\tconst departmentsRoute = useRoute('omnichannel-departments');\n\tconst queryClient = useQueryClient();\n\n\tconst { department, agents = [] } = data || {};\n\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\n\tconst initialValues = getInitialValues({ department, agents, allowedToForwardData });\n\n\tconst {\n\t\tregister,\n\t\tcontrol,\n\t\thandleSubmit,\n\t\twatch,\n\t\tformState: { errors, isValid, isDirty, isSubmitting },\n\t} = useForm<FormValues>({ mode: 'onChange', defaultValues: initialValues });\n\n\tconst requestTagBeforeClosingChat = watch('requestTagBeforeClosingChat');\n\n\tconst [fallbackFilter, setFallbackFilter] = useState<string>('');\n\n\tconst debouncedFallbackFilter = useDebouncedValue(fallbackFilter, 500);\n\n\tconst { itemsList: RoomsList, loadMoreItems: loadMoreRooms } = useRoomsList(\n\t\tuseMemo(() => ({ text: debouncedFallbackFilter }), [debouncedFallbackFilter]),\n\t);\n\n\tconst { phase: roomsPhase, items: roomsItems, itemCount: roomsTotal } = useRecordList(RoomsList);\n\n\tconst saveDepartmentInfo = useMethod('livechat:saveDepartment');\n\tconst saveDepartmentAgentsInfoOnEdit = useEndpoint('POST', `/v1/livechat/department/:_id/agents`, { _id: id || '' });\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleSave = useMutableCallback(async (data: FormValues) => {\n\t\tconst {\n\t\t\tagentList,\n\t\t\tenabled,\n\t\t\tname,\n\t\t\tdescription,\n\t\t\tshowOnRegistration,\n\t\t\tshowOnOfflineForm,\n\t\t\temail,\n\t\t\tchatClosingTags,\n\t\t\tofflineMessageChannelName,\n\t\t\tmaxNumberSimultaneousChat,\n\t\t\tvisitorInactivityTimeoutInSeconds,\n\t\t\tabandonedRoomsCloseCustomMessage,\n\t\t\twaitingQueueMessage,\n\t\t\tdepartmentsAllowedToForward,\n\t\t\tfallbackForwardDepartment,\n\t\t} = data;\n\n\t\tconst payload = {\n\t\t\tenabled,\n\t\t\tname,\n\t\t\tdescription,\n\t\t\tshowOnRegistration,\n\t\t\tshowOnOfflineForm,\n\t\t\trequestTagBeforeClosingChat,\n\t\t\temail,\n\t\t\tchatClosingTags,\n\t\t\tofflineMessageChannelName,\n\t\t\tmaxNumberSimultaneousChat,\n\t\t\tvisitorInactivityTimeoutInSeconds,\n\t\t\tabandonedRoomsCloseCustomMessage,\n\t\t\twaitingQueueMessage,\n\t\t\tdepartmentsAllowedToForward: departmentsAllowedToForward?.map((dep) => dep.value),\n\t\t\tfallbackForwardDepartment,\n\t\t};\n\n\t\ttry {\n\t\t\tif (id) {\n\t\t\t\tconst { agentList: initialAgentList } = initialValues;\n\n\t\t\t\tconst agentListPayload = {\n\t\t\t\t\tupsert: agentList.filter(\n\t\t\t\t\t\t(agent) =>\n\t\t\t\t\t\t\t!initialAgentList.some(\n\t\t\t\t\t\t\t\t(initialAgent) =>\n\t\t\t\t\t\t\t\t\tinitialAgent._id === agent._id && agent.count === initialAgent.count && agent.order === initialAgent.order,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tremove: initialAgentList.filter((initialAgent) => !agentList.some((agent) => initialAgent._id === agent._id)),\n\t\t\t\t};\n\n\t\t\t\tawait saveDepartmentInfo(id, payload, []);\n\t\t\t\tif (agentListPayload.upsert.length > 0 || agentListPayload.remove.length > 0) {\n\t\t\t\t\tawait saveDepartmentAgentsInfoOnEdit(agentListPayload);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tawait saveDepartmentInfo(id ?? null, payload, agentList);\n\t\t\t}\n\t\t\tqueryClient.invalidateQueries(['/v1/livechat/department/:_id', id]);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tdepartmentsRoute.push({});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst handleReturn = useMutableCallback(() => {\n\t\tdepartmentsRoute.push({});\n\t});\n\n\tconst isFormValid = isValid && isDirty;\n\n\tconst formId = useUniqueId();\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<Page.Header title={title}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button icon='back' onClick={handleReturn}>\n\t\t\t\t\t\t\t{t('Back')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type='submit' form={formId} primary disabled={!isFormValid} loading={isSubmitting}>\n\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Page.Header>\n\t\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t\t<FieldGroup\n\t\t\t\t\t\tw='full'\n\t\t\t\t\t\talignSelf='center'\n\t\t\t\t\t\tmaxWidth='x600'\n\t\t\t\t\t\tid={formId}\n\t\t\t\t\t\tis='form'\n\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\tonSubmit={handleSubmit(handleSave)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box display='flex' data-qa='DepartmentEditToggle-Enabled' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Enabled')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch flexGrow={1} {...register('enabled')} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Name')}*</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\tdata-qa='DepartmentEditTextInput-Name'\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\terror={errors.name?.message as string}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Name')}\n\t\t\t\t\t\t\t\t\t{...register('name', { required: t('The_field_is_required', 'name') })}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.name && <FieldError>{errors.name?.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Description')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextAreaInput\n\t\t\t\t\t\t\t\t\tdata-qa='DepartmentEditTextInput-Description'\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Description')}\n\t\t\t\t\t\t\t\t\t{...register('description')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box data-qa='DepartmentEditToggle-ShowOnRegistrationPage' display='flex' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Show_on_registration_page')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch flexGrow={1} {...register('showOnRegistration')} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Email')}*</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\tdata-qa='DepartmentEditTextInput-Email'\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\terror={errors.email?.message as string}\n\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Email')}\n\t\t\t\t\t\t\t\t\t{...register('email', {\n\t\t\t\t\t\t\t\t\t\trequired: t('The_field_is_required', 'email'),\n\t\t\t\t\t\t\t\t\t\tvalidate: (email) => validateEmail(email) || t('error-invalid-email-address'),\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.email && <FieldError>{errors.email?.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box display='flex' data-qa='DepartmentEditToggle-ShowOnOfflinePage' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Show_on_offline_page')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch flexGrow={1} {...register('showOnOfflineForm')} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Livechat_DepartmentOfflineMessageToChannel')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='offlineMessageChannelName'\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t\t<PaginatedSelectFiltered\n\t\t\t\t\t\t\t\t\t\t\tdata-qa='DepartmentSelect-LivechatDepartmentOfflineMessageToChannel'\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tflexShrink={0}\n\t\t\t\t\t\t\t\t\t\t\tfilter={fallbackFilter}\n\t\t\t\t\t\t\t\t\t\t\tsetFilter={setFallbackFilter as (value?: string | number) => void}\n\t\t\t\t\t\t\t\t\t\t\toptions={roomsItems}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Channel_name')}\n\t\t\t\t\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\t\t\t\t\troomsPhase === AsyncStatePhase.LOADING ? () => undefined : (start) => loadMoreRooms(start, Math.min(50, roomsTotal))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-busy={fallbackFilter !== debouncedFallbackFilter}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='maxNumberSimultaneousChat'\n\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t<EeNumberInput\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\thandler={onChange}\n\t\t\t\t\t\t\t\t\t\tlabel='Max_number_of_chats_per_agent'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Max_number_of_chats_per_agent_description'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='visitorInactivityTimeoutInSeconds'\n\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t<EeNumberInput\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\thandler={onChange}\n\t\t\t\t\t\t\t\t\t\tlabel='How_long_to_wait_to_consider_visitor_abandonment_in_seconds'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Number_in_seconds'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='abandonedRoomsCloseCustomMessage'\n\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t<EeTextInput\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\thandler={onChange}\n\t\t\t\t\t\t\t\t\t\tlabel='Livechat_abandoned_rooms_closed_custom_message'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter_a_custom_message'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='waitingQueueMessage'\n\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t<EeTextAreaInput value={value} handler={onChange} label='Waiting_queue_message' placeholder='Waiting_queue_message' />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t{DepartmentForwarding && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='departmentsAllowedToForward'\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t\t<DepartmentForwarding\n\t\t\t\t\t\t\t\t\t\t\tdepartmentId={id ?? ''}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\thandler={onChange}\n\t\t\t\t\t\t\t\t\t\t\tlabel='List_of_departments_for_forward'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{hasLicense && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Fallback_forward_department')}</FieldLabel>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='fallbackForwardDepartment'\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t\t<AutoCompleteDepartment\n\t\t\t\t\t\t\t\t\t\t\thaveNone\n\t\t\t\t\t\t\t\t\t\t\texcludeDepartmentId={department?._id}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonlyMyDepartments\n\t\t\t\t\t\t\t\t\t\t\tshowArchived\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Box display='flex' data-qa='DiscussionToggle-RequestTagBeforeCLosingChat' flexDirection='row'>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Request_tag_before_closing_chat')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<ToggleSwitch\n\t\t\t\t\t\t\t\t\t\tdata-qa='DiscussionToggle-RequestTagBeforeCLosingChat'\n\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t{...register('requestTagBeforeClosingChat')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t{requestTagBeforeClosingChat && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel alignSelf='stretch'>{t('Conversation_closing_tags')}*</FieldLabel>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='chatClosingTags'\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', 'tags') }}\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange } }) => (\n\t\t\t\t\t\t\t\t\t\t<DepartmentTags value={value} onChange={onChange} error={errors.chatClosingTags?.message as string} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{errors.chatClosingTags && <FieldError>{errors.chatClosingTags?.message}</FieldError>}\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<DepartmentBusinessHours bhId={department?.businessHourId} />\n\t\t\t\t\t\t</Field>\n\n\t\t\t\t\t\t<Divider mb={16} />\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel mb={4}>{t('Agents')}:</FieldLabel>\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' height='50vh'>\n\t\t\t\t\t\t\t\t<DepartmentsAgentsTable control={control} register={register} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t</Page>\n\t\t</Page>\n\t);\n}\n\nexport default EditDepartment;\n",null],"names":["_extends","FieldGroup","Field","FieldLabel","FieldRow","FieldError","TextInput","Box","Divider","ToggleSwitch","TextAreaInput","ButtonGroup","Button","PaginatedSelectFiltered","useDebouncedValue","useMutableCallback","useUniqueId","useToastMessageDispatch","useRoute","useMethod","useEndpoint","useTranslation","useQueryClient","React","useMemo","useState","Controller","useForm","useHasLicenseModule","validateEmail","AutoCompleteDepartment","Page","useRecordList","useRoomsList","AsyncStatePhase","EeTextInput","EeTextAreaInput","EeNumberInput","DepartmentForwarding","DepartmentBusinessHours","DepartmentsAgentsTable","DepartmentTags","withDefault","key","defaultValue","module","link","default","v","Icon","getInitialValues","_ref","_allowedToForwardData","_department$chatClosi","department","agents","allowedToForwardData","name","email","description","enabled","maxNumberSimultaneousChat","showOnRegistration","showOnOfflineForm","abandonedRoomsCloseCustomMessage","requestTagBeforeClosingChat","offlineMessageChannelName","visitorInactivityTimeoutInSeconds","waitingQueueMessage","departmentsAllowedToForward","departments","map","dep","label","value","_id","fallbackForwardDepartment","chatClosingTags","agentList","exportDefault","_ref2","_errors$name","_errors$name2","_errors$email","_errors$email2","_errors$chatClosingTa2","data","id","title","t","departmentsRoute","queryClient","hasLicense","initialValues","register","control","handleSubmit","watch","formState","errors","isValid","isDirty","isSubmitting","mode","defaultValues","fallbackFilter","setFallbackFilter","debouncedFallbackFilter","itemsList","RoomsList","loadMoreItems","loadMoreRooms","text","phase","roomsPhase","items","roomsItems","itemCount","roomsTotal","saveDepartmentInfo","saveDepartmentAgentsInfoOnEdit","dispatchToastMessage","handleSave","payload","initialAgentList","agentListPayload","upsert","filter","agent","some","initialAgent","count","order","remove","length","invalidateQueries","type","message","push","error","handleReturn","formId","createElement","flexDirection","Header","icon","onClick","form","primary","disabled","loading","ScrollableContentWithShadow","w","alignSelf","maxWidth","is","autoComplete","onSubmit","display","flexGrow","placeholder","required","addon","size","validate","render","_ref3","field","onChange","flexShrink","setFilter","options","endReached","LOADING","undefined","start","Math","min","_ref4","handler","_ref5","_ref6","_ref7","_ref8","departmentId","_ref9","haveNone","excludeDepartmentId","onlyMyDepartments","showArchived","rules","_ref10","_errors$chatClosingTa","bhId","businessHourId","mb","height"],"mappings":"2BACAA,EAAAC,EACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAAA,EAASC,EAETC,EACOC,EACKC,EACZC,EACAC,EAG8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA4D/B,SAASC,EAAeC,CAAyB,CAAEC,CAAe,EACjE,OAAOD,GAAOC,CACf,CA5ECC,EAAUC,IACV,CAAA,iCAGA,CAAAC,QACAC,CAAA,EAAAhD,EAEAgD,CAAA,CAAA,EAAI,GAMJH,EAAAA,IAAAA,CAAAA,wBACM,CAAA5C,WAAAA,CAAuB,EAACA,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAA0C,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAzC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgC,EAAAA,IAAAA,CAAAA,8BAAAA,CAAA/B,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAA6B,EAAAA,IAAAA,CAAAA,2BAAAA,CAAA5B,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAwB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAvB,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAuB,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAxB,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAoB,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAnB,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAkB,EAAAA,IAAAA,CAAAA,kDAAAA,CAAAjB,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAiB,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAhB,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgB,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAE,QAAAA,CAAAA,EAAAjB,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAE,QAAAA,CAAAA,EAAAhB,EAAAA,CAAA,CAAA,EAAA,GAAAc,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAb,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAa,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAZ,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAY,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAX,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAW,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAV,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAM,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,IAAAK,EAAAA,IAAAA,CAAAA,mBAAAA,CAAAJ,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAgE/B,IAAMS,EAAmBC,IAAA,IAAAC,EAAAC,EAAA,GAAC,CAAEC,WAAAA,CAAU,CAAEC,OAAAA,CAAM,CAAEC,qBAAAA,CAAAA,CAA0C,CAAAL,EAAA,MAAM,CAC/FM,KAJOd,AAIWW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYG,IAAI,AAAJA,GAAM,GACpCC,MALOf,AAKYW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYI,KAAK,AAALA,GAAO,GACtCC,YANOhB,AAMkBW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYK,WAAW,AAAXA,GAAa,GAClDC,QAAS,CAAC,CAACN,CAAAA,MAAAA,GAAAA,EAAYM,OAAO,AAAPA,EACvBC,0BAA2BP,MAAAA,EAAU,KAAA,EAAVA,EAAYO,yBAAyB,CAChEC,mBAAoB,CAAC,CAACR,CAAAA,MAAAA,GAAAA,EAAYQ,kBAAkB,AAAlBA,EAClCC,kBAAmB,CAAC,CAACT,CAAAA,MAAAA,GAAAA,EAAYS,iBAAiB,AAAjBA,EACjCC,iCAXOrB,AAWuCW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYU,gCAAgC,AAAhCA,GAAkC,GAC5FC,4BAA6B,CAAC,CAACX,CAAAA,MAAAA,GAAAA,EAAYW,2BAA2B,AAA3BA,EAC3CC,0BAbOvB,AAagCW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYY,yBAAyB,AAAzBA,GAA2B,GAC9EC,kCAAmCb,MAAAA,EAAU,KAAA,EAAVA,EAAYa,iCAAiC,CAChFC,oBAfOzB,AAe0BW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYc,mBAAmB,AAAnBA,GAAqB,GAClEC,4BAA6B,AAAAb,CAAAA,MAAAA,EAAoB,KAAA,EAAA,AAAa,OAAbJ,CAAAA,EAApBI,EAAsBc,WAAW,AAAXA,GAAWlB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAjCA,EAAmCmB,GAAG,CAAEC,GAAS,CAAA,CAAEC,MAAOD,EAAIf,IAAI,CAAEiB,MAAOF,EAAIG,GAAAA,AAAG,CAAA,EAAG,GAAK,EAAE,CACzHC,0BAjBOjC,AAiBgCW,CAAAA,MAAAA,EAAU,KAAA,EAAVA,EAAYsB,yBAAyB,AAAzBA,GAA2B,GAC9EC,gBAAe,AAA6B,OAA7BxB,CAAAA,EAAEC,MAAAA,EAAU,KAAA,EAAVA,EAAYuB,eAAe,AAAfA,GAAexB,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,CAClDyB,UAAWvB,GAAU,EAAA,CACrB,EAhGDV,EAAOkC,aACI,CAiGX,SAAuBC,CAAA,EAA+D,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,GAA9D,CAAEC,KAAAA,CAAI,CAAEC,GAAAA,CAAE,CAAEC,MAAAA,CAAK,CAAEhC,qBAAAA,CAAAA,CAA2C,CAAAwB,EAC/ES,GAAIpE,IACJqE,GAAmBxE,EAAS,2BAC5ByE,GAAcrE,IAEd,CAAEgC,WAAAA,EAAU,CAAEC,OAAAA,GAAS,EAAA,CAAI,CAAG+B,GAAQ,CAAA,EAEtCM,GAAahE,EAAoB,uBAEjCiE,GAAgB3C,EAAiB,CAAEI,WAAAA,GAAYC,OAAAA,GAAQC,qBAAAA,CAAoB,GAE3E,CACLsC,SAAAA,EAAQ,CACRC,QAAAA,EAAO,CACPC,aAAAA,EAAY,CACZC,MAAAA,EAAK,CACLC,UAAW,CAAEC,OAAAA,EAAM,CAAEC,QAAAA,EAAO,CAAEC,QAAAA,EAAO,CAAEC,aAAAA,EAAAA,CAAY,CACnD,CAAG3E,EAAoB,CAAE4E,KAAM,WAAYC,cAAeX,EAAa,GAElE5B,GAA8BgC,GAAM,+BAEpC,CAACQ,GAAgBC,GAAkB,CAAGjF,EAAiB,IAEvDkF,GAA0B7F,EAAkB2F,GAAgB,KAE5D,CAAEG,UAAWC,EAAS,CAAEC,cAAeC,EAAAA,CAAe,CAAG9E,EAC9DT,EAAQ,IAAO,CAAA,CAAEwF,KAAML,EAAuB,CAAA,EAAK,CAACA,GAAwB,GAGvE,CAAEM,MAAOC,EAAU,CAAEC,MAAOC,EAAU,CAAEC,UAAWC,EAAAA,CAAY,CAAGtF,EAAc6E,IAEhFU,GAAqBpG,EAAU,2BAC/BqG,GAAiCpG,EAAY,OAAM,sCAAyC,CAAEuD,IAAKY,GAAM,EAAE,GAE3GkC,GAAuBxG,IAEvByG,GAAa3G,EAAmB,MAAOuE,IAC5C,GAAM,CACLR,UAAAA,CAAS,CACTlB,QAAAA,CAAO,CACPH,KAAAA,CAAI,CACJE,YAAAA,CAAW,CACXG,mBAAAA,CAAkB,CAClBC,kBAAAA,CAAiB,CACjBL,MAAAA,CAAK,CACLmB,gBAAAA,CAAe,CACfX,0BAAAA,CAAyB,CACzBL,0BAAAA,CAAyB,CACzBM,kCAAAA,CAAiC,CACjCH,iCAAAA,CAAgC,CAChCI,oBAAAA,CAAmB,CACnBC,4BAAAA,CAA2B,CAC3BO,0BAAAA,CAAAA,CACA,CAAGU,EAEEqC,EAAU,CACf/D,QAAAA,EACAH,KAAAA,EACAE,YAAAA,EACAG,mBAAAA,EACAC,kBAAAA,EACAE,4BAAAA,GACAP,MAAAA,EACAmB,gBAAAA,EACAX,0BAAAA,EACAL,0BAAAA,EACAM,kCAAAA,EACAH,iCAAAA,EACAI,oBAAAA,EACAC,4BAA6BA,MAAAA,EAA2B,KAAA,EAA3BA,EAA6BE,GAAG,CAAEC,GAAQA,EAAIE,KAAK,EAChFE,0BAAAA,GAGD,GAAI,CACH,GAAIW,EAAI,CACP,GAAM,CAAET,UAAW8C,CAAAA,CAAkB,CAAG/B,GAElCgC,EAAmB,CACxBC,OAAQhD,EAAUiD,MAAM,CACtBC,GACA,CAACJ,EAAiBK,IAAI,CACpBC,GACAA,EAAavD,GAAG,GAAKqD,EAAMrD,GAAG,EAAIqD,EAAMG,KAAK,GAAKD,EAAaC,KAAK,EAAIH,EAAMI,KAAK,GAAKF,EAAaE,KAAK,GAG9GC,OAAQT,EAAiBG,MAAM,CAAEG,GAAiB,CAACpD,EAAUmD,IAAI,CAAED,GAAUE,EAAavD,GAAG,GAAKqD,EAAMrD,GAAG,GAG5G,OAAM4C,GAAmBhC,EAAIoC,EAAS,EAAE,EACpCE,CAAAA,EAAiBC,MAAM,CAACQ,MAAM,CAAG,GAAKT,EAAiBQ,MAAM,CAACC,MAAM,CAAG,CAAA,GAC1E,MAAMd,GAA+BK,QAGtC,MAAMN,GAAmBhC,MAAAA,EAAAA,EAAM,KAAMoC,EAAS7C,GAE/Ca,GAAY4C,iBAAiB,CAAC,CAAC,+BAAgChD,EAAG,EAClEkC,GAAqB,CAAEe,KAAM,UAAWC,QAAShD,GAAE,QAAQ,GAC3DC,GAAiBgD,IAAI,CAAC,CAAA,GACrB,MAAOC,EAAO,CACflB,GAAqB,CAAEe,KAAM,QAASC,QAASE,CAAK,GAEtD,GAEMC,GAAe7H,EAAmB,KACvC2E,GAAiBgD,IAAI,CAAC,CAAA,EACvB,GAIMG,GAAS7H,IAEf,OACCO,EAAAuH,aAAA,CAAC/G,EAAI,CAACgH,cAAc,KAAK,EACxBxH,EAAAuH,aAAA,CAAC/G,EAAI,KACJR,EAAAuH,aAAA,CAAC/G,EAAKiH,MAAM,CAAA,CAACxD,MAAOA,CAAM,EACzBjE,EAAAuH,aAAA,CAACnI,EAAW,KACXY,EAAAuH,aAAA,CAAClI,EAAM,CAACqI,KAAK,OAAOC,QAASN,EAAa,EACxCnD,GAAE,SAEJlE,EAAAuH,aAAA,CAAClI,EAAM,CAAC4H,KAAK,SAASW,KAAMN,GAAQO,QAAO,CAAA,EAACC,SAAU,CAZvCjD,CAAAA,IAAWC,EAAAA,EAY0CiD,QAAShD,EAAa,EACxFb,GAAE,WAINlE,EAAAuH,aAAA,CAAC/G,EAAKwH,2BAA2B,CAAA,KAChChI,EAAAuH,aAAA,CAAC7I,EAAU,CACVuJ,EAAE,OACFC,UAAU,SACVC,SAAS,OACTnE,GAAIsD,GACJc,GAAG,OACHC,aAAa,MACbC,SAAU7D,GAAa0B,GAAY,EAEnCnG,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACvI,EAAG,CAACuJ,QAAQ,OAAO,UAAQ,+BAA+Bf,cAAc,KAAK,EAC7ExH,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,YACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACrI,EAAYT,EAAA,CAAC+J,SAAU,CAAE,EAAKjE,GAAS,gBAK3CvE,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,QAAQ,KACvBlE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACxI,EAASN,EAAA,CACT,UAAQ,+BACR+J,SAAU,EACVpB,MAAK,AAAa,OAAb1D,CAAAA,EAAEkB,GAAO1C,IAAI,AAAJA,GAAIwB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAXA,EAAawD,OAAkB,CACtCuB,YAAavE,GAAE,OAAQ,EACnBK,GAAS,OAAQ,CAAEmE,SAAUxE,GAAE,wBAAyB,OAAO,MAGpEU,GAAO1C,IAAI,EAAIlC,EAAAuH,aAAA,CAACzI,EAAU,KAAA,AAAa,OAAb6E,CAAAA,EAAEiB,GAAO1C,IAAI,AAAJA,GAAIyB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAXA,EAAauD,OAAO,GAGlDlH,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,gBACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACpI,EAAaV,EAAA,CACb,UAAQ,sCACR+J,SAAU,EACVC,YAAavE,GAAE,cAAe,EAC1BK,GAAS,mBAKhBvE,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACvI,EAAG,CAAC,UAAQ,8CAA8CuJ,QAAQ,OAAOf,cAAc,KAAK,EAC5FxH,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,8BACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACrI,EAAYT,EAAA,CAAC+J,SAAU,CAAE,EAAKjE,GAAS,2BAK3CvE,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,SAAS,KACxBlE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACxI,EAASN,EAAA,CACT,UAAQ,gCACR+J,SAAU,EACVpB,MAAK,AAAc,OAAdxD,CAAAA,EAAEgB,GAAOzC,KAAK,AAALA,GAAKyB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAZA,EAAcsD,OAAkB,CACvCyB,MAAO3I,EAAAuH,aAAA,CAAC7F,EAAI,CAACQ,KAAK,OAAO0G,KAAK,KAAK,GACnCH,YAAavE,GAAE,QAAS,EACpBK,GAAS,QAAS,CACrBmE,SAAUxE,GAAE,wBAAyB,SACrC2E,SAAW1G,GAAU7B,EAAc6B,IAAU+B,GAAE,oCAIjDU,GAAOzC,KAAK,EAAInC,EAAAuH,aAAA,CAACzI,EAAU,KAAA,AAAc,OAAd+E,CAAAA,EAAEe,GAAOzC,KAAK,AAALA,GAAK0B,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAZA,EAAcqD,OAAO,GAGpDlH,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACvI,EAAG,CAACuJ,QAAQ,OAAO,UAAQ,yCAAyCf,cAAc,KAAK,EACvFxH,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,yBACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACrI,EAAYT,EAAA,CAAC+J,SAAU,CAAE,EAAKjE,GAAS,0BAK3CvE,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,+CACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,4BACL4G,OAAQC,IAAA,GAAC,CAAEC,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAF,EAAA,OACtC/I,EAAAuH,aAAA,CAACjI,EAAuB,CACvB,UAAQ,6DACR6D,MAAOA,EACP8F,SAAUA,EACVC,WAAY,EACZ1C,OAAQtB,GACRiE,UAAWhE,GACXiE,QAASvD,GACT4C,YAAavE,GAAE,gBACfmF,WACC1D,KAAehF,EAAgB2I,OAAO,CAAG,IAAMC,KAAAA,EAAaC,GAAUhE,GAAcgE,EAAOC,KAAKC,GAAG,CAAC,GAAI3D,KAEzG,YAAWb,KAAmBE,EAAwB,EACrD,CACD,KAKLpF,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,4BACL4G,OAAQa,IAAA,GAAC,CAAEX,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAU,EAAA,OACtC3J,EAAAuH,aAAA,CAACzG,EAAa,CACbqC,MAAOA,EACPyG,QAASX,EACT/F,MAAM,gCACNuF,YAAY,2CAA2C,EACtD,CACD,IAIJzI,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,oCACL4G,OAAQe,IAAA,GAAC,CAAEb,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAY,EAAA,OACtC7J,EAAAuH,aAAA,CAACzG,EAAa,CACbqC,MAAOA,EACPyG,QAASX,EACT/F,MAAM,8DACNuF,YAAY,mBAAmB,EAC9B,CACD,IAIJzI,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,mCACL4G,OAAQgB,IAAA,GAAC,CAAEd,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAa,EAAA,OACtC9J,EAAAuH,aAAA,CAAC3G,EAAW,CACXuC,MAAOA,EACPyG,QAASX,EACT/F,MAAM,iDACNuF,YAAY,wBAAwB,EACnC,CACD,IAIJzI,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,sBACL4G,OAAQiB,IAAA,GAAC,CAAEf,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAc,EAAA,OACtC/J,EAAAuH,aAAA,CAAC1G,EAAe,CAACsC,MAAOA,EAAOyG,QAASX,EAAU/F,MAAM,wBAAwBuF,YAAY,uBAAuB,EAAG,CACrH,IAIH1H,GACAf,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,8BACL4G,OAAQkB,IAAA,GAAC,CAAEhB,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAe,EAAA,OACtChK,EAAAuH,aAAA,CAACxG,EAAoB,CACpBkJ,aAAcjG,MAAAA,EAAAA,EAAM,GACpBb,MAAOA,EACPyG,QAASX,EACT/F,MAAM,iCAAiC,EACtC,CACD,IAKJmB,IACArE,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,gCACflE,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,4BACL4G,OAAQoB,IAAA,GAAC,CAAElB,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAiB,EAAA,OACtClK,EAAAuH,aAAA,CAAChH,EAAsB,CACtB4J,SAAQ,CAAA,EACRC,oBAAqBrI,MAAAA,GAAU,KAAA,EAAVA,GAAYqB,GAAI,CACrCD,MAAOA,EACP8F,SAAUA,EACVoB,kBAAiB,CAAA,EACjBC,aAAY,CAAA,CAAA,EACX,CACD,IAKLtK,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACvI,EAAG,CAACuJ,QAAQ,OAAO,UAAQ,+CAA+Cf,cAAc,KAAK,EAC7FxH,EAAAuH,aAAA,CAAC3I,EAAU,KAAEsF,GAAE,oCACflE,EAAAuH,aAAA,CAAC1I,EAAQ,KACRmB,EAAAuH,aAAA,CAACrI,EAAYT,EAAA,CACZ,UAAQ,+CACR+J,SAAU,CAAE,EACRjE,GAAS,oCAMhB7B,IACA1C,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,CAACsJ,UAAU,SAAS,EAAEhE,GAAE,6BAA6B,KAChElE,EAAAuH,aAAA,CAACpH,EAAU,CACVqE,QAASA,GACTtC,KAAK,kBACLqI,MAAO,CAAE7B,SAAUxE,GAAE,wBAAyB,OAAO,EACrD4E,OAAQ0B,IAAA,IAAAC,EAAA,GAAC,CAAEzB,MAAO,CAAE7F,MAAAA,CAAK,CAAE8F,SAAAA,CAAAA,CAAQ,CAAI,CAAAuB,EAAA,OACtCxK,EAAAuH,aAAA,CAACrG,EAAc,CAACiC,MAAOA,EAAO8F,SAAUA,EAAU7B,MAAK,AAAwB,OAAxBqD,CAAAA,EAAE7F,GAAOtB,eAAe,AAAfA,GAAemH,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAtBA,EAAwBvD,OAAAA,AAAkB,EAAG,CACrG,GAEFtC,GAAOtB,eAAe,EAAItD,EAAAuH,aAAA,CAACzI,EAAU,KAAA,AAAwB,OAAxBgF,CAAAA,EAAEc,GAAOtB,eAAe,AAAfA,GAAeQ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAtBA,EAAwBoD,OAAO,GAIzElH,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAACvG,EAAuB,CAAC0J,KAAM3I,MAAAA,GAAU,KAAA,EAAVA,GAAY4I,cAAAA,AAAe,IAG3D3K,EAAAuH,aAAA,CAACtI,EAAO,CAAC2L,GAAI,EAAG,GAChB5K,EAAAuH,aAAA,CAAC5I,EAAK,KACLqB,EAAAuH,aAAA,CAAC3I,EAAU,CAACgM,GAAI,CAAE,EAAE1G,GAAE,UAAU,KAChClE,EAAAuH,aAAA,CAACvI,EAAG,CAACuJ,QAAQ,OAAOf,cAAc,SAASqD,OAAO,MAAM,EACvD7K,EAAAuH,aAAA,CAACtG,EAAsB,CAACuD,QAASA,GAASD,SAAUA,EAAS,QAQrE"}