)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/hooks/useClearUnreadAllMessagesMutation.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { UseMutationOptions } from '@tanstack/react-query';\nimport { useMutation } from '@tanstack/react-query';\n\nimport { ChatSubscription } from '../../../../app/models/client';\n\nexport const useClearUnreadAllMessagesMutation = (options?: Omit<UseMutationOptions<void, unknown, void, unknown>, 'mutationFn'>) => {\n\tconst readSubscription = useEndpoint('POST', '/v1/subscriptions.read');\n\n\treturn useMutation(async () => {\n\t\tconst promises = ChatSubscription.find(\n\t\t\t{\n\t\t\t\topen: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tunread: 1,\n\t\t\t\t\talert: 1,\n\t\t\t\t\trid: 1,\n\t\t\t\t\tt: 1,\n\t\t\t\t\tname: 1,\n\t\t\t\t\tls: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t).map((subscription) => {\n\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\treturn readSubscription({ rid: subscription.rid, readThreads: true });\n\t\t\t}\n\n\t\t\treturn Promise.resolve();\n\t\t});\n\n\t\tawait Promise.all(promises);\n\t}, options);\n};\n",null],"names":["useEndpoint","useMutation","ChatSubscription","module","export","useClearUnreadAllMessagesMutation","options","readSubscription","promises","find","open","fields","unread","alert","rid","t","name","ls","map","subscription","readThreads","Promise","resolve","all"],"mappings":"2BAAuDA,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,kCAAmB,IAAAA,CAA2B,GAAAF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAH,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMhD,IAAMG,EAAqCC,IACjD,IAAMC,EAAmBP,EAAY,OAAQ,0BAE7C,OAAOC,EAAY,UAClB,IAAMO,EAAWN,EAAiBO,IAAI,CACrC,CACCC,KAAM,CAAA,GAEP,CACCC,OAAQ,CACPC,OAAQ,EACRC,MAAO,EACPC,IAAK,EACLC,EAAG,EACHC,KAAM,EACNC,GAAI,KAGLC,GAAG,CAAEC,GACN,AAAIA,EAAaN,KAAK,EAAIM,EAAaP,MAAM,CAAG,EACxCL,EAAiB,CAAEO,IAAKK,EAAaL,GAAG,CAAEM,YAAa,CAAA,CAAI,GAG5DC,QAAQC,OAAO,GAGvB,OAAMD,QAAQE,GAAG,CAACf,EACnB,EAAGF,EACJ"}