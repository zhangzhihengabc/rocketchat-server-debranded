)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/MainLayout/Preload.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useUserId } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useEffect } from 'react';\n\nimport { CachedChatSubscription } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { CachedCollectionManager } from '../../../../app/ui-cached-collection/client';\nimport { mainReady } from '../../../../app/ui-utils/client';\nimport { useReactiveVar } from '../../../hooks/useReactiveVar';\nimport { isSyncReady } from '../../../lib/userData';\nimport PageLoading from '../PageLoading';\n\nconst Preload = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst uid = useUserId();\n\tconst subscriptionsReady = useReactiveVar(CachedChatSubscription.ready);\n\tconst settingsReady = useReactiveVar(settings.cachedCollection.ready);\n\tconst userDataReady = useReactiveVar(isSyncReady);\n\n\tconst ready = !uid || (userDataReady && subscriptionsReady && settingsReady);\n\n\tuseEffect(() => {\n\t\tCachedCollectionManager.syncEnabled = ready;\n\t\tmainReady.set(ready);\n\t}, [ready]);\n\n\tif (!ready) {\n\t\treturn <PageLoading />;\n\t}\n\n\treturn <>{children}</>;\n};\n\nexport default Preload;\n",null],"names":["useUserId","React","useEffect","CachedChatSubscription","settings","CachedCollectionManager","mainReady","useReactiveVar","isSyncReady","PageLoading","module","link","default","exportDefault","_ref","children","uid","subscriptionsReady","ready","settingsReady","cachedCollection","userDataReady","syncEnabled","set","createElement","Fragment"],"mappings":"2BAAAA,EAAqDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5CC,EAAWC,IAAA,CAAM,2BAA2B,CAAAX,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAX,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAP,uBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAN,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAL,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAJ,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAArDC,EAAOG,aAAa,CAYJC,IAAwD,GAAvD,CAAEC,SAAAA,CAAAA,CAAmC,CAAAD,EAC/CE,EAAMhB,IACNiB,EAAqBV,EAAeJ,EAAuBe,KAAK,EAChEC,EAAgBZ,EAAeH,EAASgB,gBAAgB,CAACF,KAAK,EAC9DG,EAAgBd,EAAeC,GAE/BU,EAAQ,CAACF,GAAQK,GAAiBJ,GAAsBE,QAO9D,CALAjB,EAAU,KACTG,EAAwBiB,WAAW,CAAGJ,EACtCZ,EAAUiB,GAAG,CAACL,EACf,EAAG,CAACA,EAAM,EAELA,GAIEjB,EAAAuB,aAAA,CAAAvB,EAAAwB,QAAA,CAAA,KAAGV,GAHFd,EAAAuB,aAAA,CAACf,EAAW,KAIrB"}