)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/root/MainLayout/UsernameCheck.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useUserId, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useCallback } from 'react';\n\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\nimport PasswordChangeCheck from './PasswordChangeCheck';\nimport RegisterUsername from './RegisterUsername';\n\nconst UsernameCheck = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst userId = useUserId();\n\tconst { data: userData, isLoading } = useUserInfoQuery({ userId: userId || '' });\n\n\tconst allowAnonymousRead = useSetting<boolean>('Accounts_AllowAnonymousRead') ?? false;\n\n\tconst shouldRegisterUsername = useReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tconst hasUserInCollection = !!userData?.user;\n\t\t\tconst hasUsername = !!userData?.user?.username;\n\n\t\t\tif (!userId) {\n\t\t\t\treturn !allowAnonymousRead;\n\t\t\t}\n\n\t\t\tif (!hasUserInCollection) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !hasUsername;\n\t\t}, [userData?.user, userId, allowAnonymousRead]),\n\t);\n\n\tif (!isLoading && shouldRegisterUsername) {\n\t\treturn <RegisterUsername />;\n\t}\n\n\treturn <PasswordChangeCheck>{children}</PasswordChangeCheck>;\n};\n\nexport default UsernameCheck;\n",null],"names":["useUserId","useSetting","React","useCallback","useReactiveValue","useUserInfoQuery","PasswordChangeCheck","RegisterUsername","module","link","default","exportDefault","_ref","_useSetting","children","userId","data","userData","isLoading","allowAnonymousRead","shouldRegisterUsername","_userData$user","hasUserInCollection","user","hasUsername","username","createElement"],"mappings":"2BAAAA,EAASC,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAAA,CAAAA,2BAAgC,CAACT,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAJ,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAH,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAjEC,EAAOG,aAAa,CASEC,IAAwD,IAAAC,EAAA,GAAvD,CAAEC,SAAAA,CAAAA,CAAmC,CAAAF,EACrDG,EAASf,IACT,CAAEgB,KAAMC,CAAQ,CAAEC,UAAAA,CAAAA,CAAW,CAAGb,EAAiB,CAAEU,OAAQA,GAAU,EAAE,GAEvEI,EAAkB,AAAqD,OAArDN,CAAAA,EAAGZ,EAAoB,8BAA6B,GAACY,AAAA,KAAA,IAAAA,GAAAA,EAEvEO,EAAyBhB,EAC9BD,EAAY,KAAK,IAAAkB,EAChB,IAAMC,EAAsB,CAAC,CAACL,CAAAA,MAAAA,GAAAA,EAAUM,IAAI,AAAJA,EAClCC,EAAc,CAAC,CAACP,CAAAA,MAAAA,GAAQ,AAAM,OAANI,CAAAA,EAARJ,EAAUM,IAAI,AAAJA,GAAIF,AAAA,KAAA,IAAAA,GAAdA,EAAgBI,QAAQ,AAARA,SAEtC,AAAKV,GAIAO,GAIE,CAACE,EAPA,CAACL,CAQV,EAAG,CAACF,MAAAA,EAAQ,KAAA,EAARA,EAAUM,IAAI,CAAER,EAAQI,EAAmB,SAGhD,AAAI,CAACD,GAAaE,EACVlB,EAAAwB,aAAA,CAACnB,EAAgB,MAGlBL,EAAAwB,aAAA,CAACpB,EAAmB,KAAEQ,EAC9B"}