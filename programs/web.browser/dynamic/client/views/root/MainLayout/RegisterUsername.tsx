function module(e,t,r){let l,a,n,s,u,o,i,m,c,d,g,b,k,E,p,f,y,h,F,_,v,U,x,L,T,C,S,q,M,w,B,G;let I=["username"];r.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),r.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},1),r.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},2),r.link("@rocket.chat/fuselage",{TextInput(e){s=e},ButtonGroup(e){u=e},Button(e){o=e},FieldGroup(e){i=e},Field(e){m=e},FieldLabel(e){c=e},FieldRow(e){d=e},FieldError(e){g=e},Box(e){b=e}},0),r.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){k=e}},1),r.link("@rocket.chat/layout",{VerticalWizardLayout(e){E=e},Form(e){p=e}},2),r.link("@rocket.chat/ui-client",{CustomFieldsForm(e){f=e}},3),r.link("@rocket.chat/ui-contexts",{useSetting(e){y=e},useTranslation(e){h=e},useLogout(e){F=e},useEndpoint(e){_=e},useUserId(e){v=e},useToastMessageDispatch(e){U=e},useAssetWithDarkModePath(e){x=e},useMethod(e){L=e},useAccountsCustomFields(e){T=e}},4),r.link("@tanstack/react-query",{useQuery(e){C=e},useMutation(e){S=e}},5),r.link("react",{default(e){q=e},useEffect(e){M=e}},6),r.link("react-hook-form",{useForm(e){w=e}},7),r.link("../../../components/MarkdownText",{default(e){B=e}},8),r.link("../../../lib/queryClient",{queryClient(e){G=e}},9),r.exportDefault(()=>{let e=h(),t=v(),r=F(),D=k(),H=y("Layout_Login_Hide_Logo"),P=x("logo"),W=x("background"),j=U(),A=T();if(!t)throw Error("Invalid user");let Q=L("setUsername"),z=L("saveCustomFields"),N=_("GET","/v1/users.getUsernameSuggestion"),{data:R,isLoading:V}=C(["suggestion"],async()=>N()),{register:J,handleSubmit:K,setValue:O,getValues:X,setError:Y,control:Z,formState:{errors:$}}=w({mode:"onBlur"});M(()=>{null!=R&&R.result&&""===X("username")&&O("username",R.result)});let ee=S({mutationFn:async e=>{let{username:t}=e,r=n(e,I);return Promise.all([Q(t),z(a({},r))])},onSuccess:()=>{j({type:"success",message:e("Username_has_been_updated")}),G.invalidateQueries(["users.info"])},onError:(t,r)=>{let{username:l}=r;return[t.error,t.errorType].includes("error-blocked-username")?Y("username",{type:"error-blocked-username",message:e("error-blocked-username",{field:l})}):[t.errorType].includes("error-field-unavailable")?Y("username",{type:"error-field-unavailable",message:e("error-field-unavailable",{field:l})}):[t.errorType].includes("")?Y("username",{type:"username-invalid",message:e("Username_invalid")}):void j({type:"error",message:t})}});return q.createElement(E,{background:W,logo:!H&&P?q.createElement(b,{is:"img",maxHeight:"x40",mi:"neg-x8",src:P,alt:"Logo"}):q.createElement(q.Fragment,null)},q.createElement(p,{"aria-labelledby":D,onSubmit:K(e=>ee.mutate(e))},q.createElement(p.Header,null,q.createElement(p.Title,{id:D},e("Username_title")),q.createElement(p.Subtitle,null,e("Username_description"))),q.createElement(p.Container,null,!V&&q.createElement(i,null,q.createElement(m,null,q.createElement(c,{id:"username-label"},e("Username")),q.createElement(d,null,q.createElement(s,l({"aria-labelledby":"username-label"},J("username",{required:e("Username_cant_be_empty")})))),$.username&&q.createElement(g,null,q.createElement(B,{content:$.username.message})))),V&&e("Loading_suggestion"),q.createElement(f,{formName:"customFields",formControl:Z,metadata:A})),q.createElement(p.Footer,null,q.createElement(u,{stretch:!0,vertical:!0,flexGrow:1},q.createElement(o,{disabled:V,type:"submit",primary:!0},e("Use_this_username")),q.createElement(o,{onClick:r},e("Logout"))))))})}
//# sourceMappingURL=/dynamic/client/views/root/MainLayout/fee96e3f0e3d1c98975fe8501d26c74b60af8b9a.map
