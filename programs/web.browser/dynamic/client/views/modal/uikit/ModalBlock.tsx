function module(e,t,n){let l,o,a,i,r,c,u,d,s,m,b,f,E,p,v,k,x,g;n.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),n.link("@rocket.chat/fuselage",{Modal(e){o=e},AnimatedVisibility(e){a=e},Button(e){i=e},Box(e){r=e}},0),n.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){c=e}},1),n.link("@rocket.chat/fuselage-ui-kit",{UiKitComponent(e){u=e},UiKitModal(e){d=e},modalParser(e){s=e}},2),n.link("@rocket.chat/ui-kit",{BlockContext(e){m=e}},3),n.link("react",{default(e){b=e},useCallback(e){f=e},useEffect(e){E=e},useMemo(e){p=e},useRef(e){v=e}},4),n.link("react-aria",{FocusScope(e){k=e}},5),n.link("../../../../app/utils/client/getURL",{getURL(e){x=e}},6),n.link("./getButtonStyle",{getButtonStyle(e){g=e}},7);let y='\n	a[href]:not([tabindex="-1"]),\n	area[href]:not([tabindex="-1"]),\n	input:not([disabled]):not([tabindex="-1"]),\n	select:not([disabled]):not([tabindex="-1"]),\n	textarea:not([disabled]):not([tabindex="-1"]),\n	button:not([disabled]):not([tabindex="-1"]),\n	iframe,\n	object,\n	embed,\n	[tabindex]:not([tabindex="-1"]),\n	[contenteditable]',h=e=>null!==e&&"focus"in e&&"function"==typeof e.focus,C=new Map([["ENTER",13],["ESC",27],["TAB",9]]);n.exportDefault(e=>{let{view:t,errors:n,onSubmit:N,onClose:S,onCancel:T}=e,A="modal_id_".concat(c()),B=v(null);E(()=>{if(B.current){if(n&&Object.keys(n).length){let e=B.current.querySelector('\n	a[href]:not([tabindex="-1"]):invalid,\n	area[href]:not([tabindex="-1"]):invalid,\n	input:not([disabled]):not([tabindex="-1"]):invalid,\n	select:not([disabled]):not([tabindex="-1"]):invalid,\n	textarea:not([disabled]):not([tabindex="-1"]):invalid,\n	button:not([disabled]):not([tabindex="-1"]):invalid,\n	iframe:invalid,\n	object:invalid,\n	embed:invalid,\n	[tabindex]:not([tabindex="-1"]):invalid,\n	[contenteditable]:invalid');null==e||e.focus()}else{let e=B.current.querySelector(y);null==e||e.focus()}}},[n]);let q=p(()=>document.activeElement,[]);E(()=>()=>{if(q&&h(q))return q.focus()},[q]);let D=f(e=>{var t;switch(e.keyCode){case C.get("ENTER"):if((null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.nodeName)!=="TEXTAREA")return N(e);return;case C.get("ESC"):e.stopPropagation(),e.preventDefault(),S();return;case C.get("TAB"):if(!B.current)return;let n=Array.from(B.current.querySelectorAll(y)),[l]=n,o=n.pop();if(!B.current.contains(document.activeElement))return l.focus();if(e.shiftKey){l&&l!==document.activeElement||(null==o||o.focus(),e.stopPropagation(),e.preventDefault());return}o&&o!==document.activeElement||(l.focus(),e.stopPropagation(),e.preventDefault())}},[S,N]);return E(()=>{let e=document.querySelector("#modal-root"),t=e.querySelector(".rcx-modal__content"),n=t=>{if(t.target===e)return t.preventDefault(),t.stopPropagation(),S(),!1},l=n=>{if(n.target===e&&t.contains(n.target))return D(n)};return document.addEventListener("keydown",l),e.addEventListener("click",n),()=>{document.removeEventListener("keydown",l),e.removeEventListener("click",n)}},[D,S]),b.createElement(a,{visibility:a.UNHIDING},b.createElement(k,{contain:!0,restoreFocus:!0,autoFocus:!0},b.createElement(o,{open:!0,id:A,ref:B},b.createElement(o.Header,null,t.showIcon?b.createElement(o.Thumb,{url:x("/api/apps/".concat(t.appId,"/icon"))}):null,b.createElement(o.Title,null,s.text(t.title,m.NONE,0)),b.createElement(o.Close,{tabIndex:-1,onClick:S})),b.createElement(o.Content,null,b.createElement(r,{is:"form",method:"post",action:"#",onSubmit:N},b.createElement(u,{render:d,blocks:t.blocks}))),b.createElement(o.Footer,null,b.createElement(o.FooterControllers,null,t.close&&b.createElement(i,{danger:"danger"===t.close.style,onClick:T},s.text(t.close.text,m.NONE,0)),t.submit&&b.createElement(i,l({},g(t.submit),{onClick:N}),s.text(t.submit.text,m.NONE,1)))))))})}
//# sourceMappingURL=/dynamic/client/views/modal/uikit/c5fee8b8a40f09dc808e8482d15441aec61cf06e.map
