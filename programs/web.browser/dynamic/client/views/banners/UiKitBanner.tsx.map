)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/banners/UiKitBanner.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UiKit } from '@rocket.chat/core-typings';\nimport { Banner, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UiKitContext, bannerParser, UiKitBanner as UiKitBannerSurfaceRender, UiKitComponent } from '@rocket.chat/fuselage-ui-kit';\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport MarkdownText from '../../components/MarkdownText';\nimport { useBannerContextValue } from '../../uikit/hooks/useBannerContextValue';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../uikit/hooks/useUiKitView';\n\n// TODO: move this to fuselage-ui-kit itself\nbannerParser.mrkdwn = ({ text }): ReactElement => <MarkdownText variant='inline' content={text} />;\n\ntype UiKitBannerProps = {\n\tkey: UiKit.BannerView['viewId']; // force re-mount when viewId changes\n\tinitialView: UiKit.BannerView;\n};\n\nconst UiKitBanner = ({ initialView }: UiKitBannerProps) => {\n\tconst { view, values, state } = useUiKitView(initialView);\n\tconst actionManager = useUiKitActionManager();\n\tconst contextValue = useBannerContextValue({ view, values });\n\n\tconst icon = useMemo(() => {\n\t\tif (view.icon) {\n\t\t\treturn <Icon name={view.icon} size='x20' />;\n\t\t}\n\n\t\treturn null;\n\t}, [view.icon]);\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst handleClose = useMutableCallback(() => {\n\t\tvoid actionManager\n\t\t\t.emitInteraction(view.appId, {\n\t\t\t\ttype: 'viewClosed',\n\t\t\t\tpayload: {\n\t\t\t\t\tviewId: view.viewId,\n\t\t\t\t\tview: {\n\t\t\t\t\t\t...view,\n\t\t\t\t\t\tid: view.viewId,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t},\n\t\t\t\t\tisCleared: true,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treturn Promise.reject(error);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tactionManager.disposeView(view.viewId);\n\t\t\t});\n\t});\n\n\treturn (\n\t\t<Banner icon={icon} inline={view.inline} title={view.title} variant={view.variant} closeable onClose={handleClose}>\n\t\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t\t<UiKitComponent render={UiKitBannerSurfaceRender} blocks={view.blocks} />\n\t\t\t</UiKitContext.Provider>\n\t\t</Banner>\n\t);\n};\n\nexport default UiKitBanner;\n",null],"names":["_objectSpread","Banner","Icon","useMutableCallback","UiKitContext","bannerParser","UiKitBannerSurfaceRender","UiKitComponent","useToastMessageDispatch","React","useMemo","MarkdownText","useBannerContextValue","useUiKitActionManager","useUiKitView","module","link","default","UiKitBanner","mrkdwn","_ref","text","createElement","variant","content","exportDefault","_ref2","initialView","view","values","state","actionManager","contextValue","icon","name","size","dispatchToastMessage","handleClose","emitInteraction","appId","type","payload","viewId","id","isCleared","catch","error","message","Promise","reject","finally","disposeView","inline","title","closeable","onClose","Provider","value","render","blocks"],"mappings":"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"}