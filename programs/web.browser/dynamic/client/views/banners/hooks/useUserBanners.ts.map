)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/banners/hooks/useUserBanners.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation, useUser } from '@rocket.chat/ui-contexts';\nimport { useEffect } from 'react';\n\nimport * as banners from '../../../lib/banners';\nimport { useDismissUserBannerMutation } from './useDismissUserBannerMutation';\n\nexport const useUserBanners = () => {\n\tconst user = useUser();\n\n\tconst t = useTranslation();\n\tconst { mutate: dismissUserBanner } = useDismissUserBannerMutation();\n\n\tuseEffect(() => {\n\t\tif (!user?.banners || Object.keys(user.banners).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstBanner = Object.values(user.banners)\n\t\t\t.filter((b) => b.read !== true)\n\t\t\t.sort((a, b) => b.priority - a.priority)[0];\n\n\t\tif (!firstBanner) {\n\t\t\treturn;\n\t\t}\n\n\t\tbanners.open({\n\t\t\tid: firstBanner.id,\n\t\t\ttitle: t.has(firstBanner.title) ? t(firstBanner.title) : firstBanner.title,\n\t\t\ttext: t.has(firstBanner.text) ? t(firstBanner.text, firstBanner.textArguments) : firstBanner.text,\n\t\t\tmodifiers: firstBanner.modifiers,\n\t\t\taction() {\n\t\t\t\tif (firstBanner.link) {\n\t\t\t\t\twindow.open(firstBanner.link, '_system');\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClose() {\n\t\t\t\tdismissUserBanner({ id: firstBanner.id });\n\t\t\t},\n\t\t});\n\t}, [dismissUserBanner, t, user?.banners]);\n};\n",null],"names":["useTranslation","useUser","useEffect","banners","useDismissUserBannerMutation","module","export","useUserBanners","v","user","t","mutate","dismissUserBanner","Object","keys","length","firstBanner","values","filter","b","read","sort","a","priority","open","id","title","has","text","textArguments","modifiers","action","link","window","onClose"],"mappings":"2BAAwCA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,eAAgB,IAASA,CAAM,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAL,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAAH,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,uBAAAA,CAAA,IAAAG,CAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAD,6BAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAM5D,IAAMG,EAAiB,KAC7B,IAAME,EAAOR,IAEPS,EAAIV,IACJ,CAAEW,OAAQC,CAAAA,CAAmB,CAAGR,IAEtCF,EAAU,KACT,GAAI,CAACO,CAAAA,MAAAA,GAAAA,EAAMN,OAAO,AAAPA,GAAWU,AAAqC,IAArCA,OAAOC,IAAI,CAACL,EAAKN,OAAO,EAAEY,MAAM,CACrD,OAGD,IAAMC,EAAcH,OAAOI,MAAM,CAACR,EAAKN,OAAO,EAC5Ce,MAAM,CAAEC,GAAMA,AAAW,CAAA,IAAXA,EAAEC,IAAI,EACpBC,IAAI,CAAC,CAACC,EAAGH,IAAMA,EAAEI,QAAQ,CAAGD,EAAEC,QAAQ,CAAC,CAAC,EAAE,CAEvCP,GAILb,EAAQqB,IAAI,CAAC,CACZC,GAAIT,EAAYS,EAAE,CAClBC,MAAOhB,EAAEiB,GAAG,CAACX,EAAYU,KAAK,EAAIhB,EAAEM,EAAYU,KAAK,EAAIV,EAAYU,KAAK,CAC1EE,KAAMlB,EAAEiB,GAAG,CAACX,EAAYY,IAAI,EAAIlB,EAAEM,EAAYY,IAAI,CAAEZ,EAAYa,aAAa,EAAIb,EAAYY,IAAI,CACjGE,UAAWd,EAAYc,SAAS,CAChCC,SACKf,EAAYgB,IAAI,EACnBC,OAAOT,IAAI,CAACR,EAAYgB,IAAI,CAAE,UAEhC,EACAE,UACCtB,EAAkB,CAAEa,GAAIT,EAAYS,EAAAA,AAAE,EACvC,GAEF,EAAG,CAACb,EAAmBF,EAAGD,MAAAA,EAAI,KAAA,EAAJA,EAAMN,OAAO,CAAC,CACzC"}