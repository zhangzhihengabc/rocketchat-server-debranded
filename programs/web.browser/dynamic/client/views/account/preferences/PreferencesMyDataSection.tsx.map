)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/preferences/PreferencesMyDataSection.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Accordion, Field, FieldGroup, FieldRow, ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useSetModal, useToastMessageDispatch, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport MyDataModal from './MyDataModal';\n\nconst PreferencesMyDataSection = () => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst requestDataDownload = useMethod('requestDataDownload');\n\n\tconst downloadData = useCallback(\n\t\tasync (fullExport) => {\n\t\t\ttry {\n\t\t\t\tconst result = await requestDataDownload({ fullExport });\n\t\t\t\tif (result.requested) {\n\t\t\t\t\tconst text = t('UserDataDownload_Requested_Text', {\n\t\t\t\t\t\tpending_operations: result.pendingOperationsBeforeMyRequest,\n\t\t\t\t\t});\n\t\t\t\t\tsetModal(\n\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.exportOperation) {\n\t\t\t\t\tif (result.exportOperation.status === 'completed') {\n\t\t\t\t\t\tconst text = result.url\n\t\t\t\t\t\t\t? t('UserDataDownload_CompletedRequestExistedWithLink_Text', {\n\t\t\t\t\t\t\t\t\tdownload_link: result.url,\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: t('UserDataDownload_CompletedRequestExisted_Text');\n\n\t\t\t\t\t\tsetModal(\n\t\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst text = t('UserDataDownload_RequestExisted_Text', {\n\t\t\t\t\t\tpending_operations: result.pendingOperationsBeforeMyRequest,\n\t\t\t\t\t});\n\t\t\t\t\tsetModal(\n\t\t\t\t\t\t<MyDataModal\n\t\t\t\t\t\t\ttitle={t('UserDataDownload_Requested')}\n\t\t\t\t\t\t\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\n\t\t\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetModal(<MyDataModal title={t('UserDataDownload_Requested')} onCancel={() => setModal(null)} />);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, requestDataDownload, setModal, t],\n\t);\n\n\tconst handleClickDownload = useCallback(() => downloadData(false), [downloadData]);\n\tconst handleClickExport = useCallback(() => downloadData(true), [downloadData]);\n\n\treturn (\n\t\t<Accordion.Item title={t('My Data')}>\n\t\t\t<FieldGroup>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<ButtonGroup stretch flexGrow={1}>\n\t\t\t\t\t\t\t<Button icon='download' onClick={handleClickDownload}>\n\t\t\t\t\t\t\t\t{t('Download_My_Data')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button icon='download' onClick={handleClickExport}>\n\t\t\t\t\t\t\t\t{t('Export_My_Data')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t</Accordion.Item>\n\t);\n};\n\nexport default PreferencesMyDataSection;\n",null],"names":["Accordion","Field","FieldGroup","FieldRow","ButtonGroup","Button","Box","useSetModal","useToastMessageDispatch","useMethod","useTranslation","React","useCallback","MyDataModal","module","link","v","default","exportDefault","t","setModal","dispatchToastMessage","requestDataDownload","downloadData","fullExport","result","requested","text","pending_operations","pendingOperationsBeforeMyRequest","createElement","title","dangerouslySetInnerHTML","__html","onCancel","exportOperation","status","url","download_link","error","type","message","handleClickDownload","handleClickExport","Item","stretch","flexGrow","icon","onClick"],"mappings":"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"}