)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/integrations/AccountIntegrationsPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWebdavAccountIntegration } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { SelectLegacy, Box, Button, Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { WebdavAccounts } from '../../../../app/models/client';\nimport Page from '../../../components/Page';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { getWebdavServerName } from '../../../lib/getWebdavServerName';\n\nconst getWebdavAccounts = (): IWebdavAccountIntegration[] => WebdavAccounts.find().fetch();\n\nconst AccountIntegrationsPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst { handleSubmit, control } = useForm();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst accounts = useReactiveValue(getWebdavAccounts);\n\tconst removeWebdavAccount = useEndpoint('POST', '/v1/webdav.removeWebdavAccount');\n\n\tconst options: SelectOption[] = useMemo(() => accounts?.map(({ _id, ...current }) => [_id, getWebdavServerName(current)]), [accounts]);\n\n\tconst handleClickRemove = useMutableCallback(({ accountSelected }) => {\n\t\ttry {\n\t\t\tremoveWebdavAccount({ accountId: accountSelected });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Webdav_account_removed') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as Error });\n\t\t}\n\t});\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Integrations')} />\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('WebDAV_Accounts')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='accountSelected'\n\t\t\t\t\t\t\t\trender={({ field: { onChange, value, name, ref } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<SelectLegacy\n\t\t\t\t\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button danger onClick={handleSubmit(handleClickRemove)}>\n\t\t\t\t\t\t\t\t{t('Remove')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default AccountIntegrationsPage;\n",null],"names":["_objectWithoutProperties","SelectLegacy","Box","Button","Field","FieldLabel","FieldRow","useMutableCallback","useEndpoint","useToastMessageDispatch","useTranslation","React","useMemo","useForm","Controller","WebdavAccounts","Page","useReactiveValue","getWebdavServerName","module","link","default","v","getWebdavAccounts","find","fetch","exportDefault","t","handleSubmit","control","dispatchToastMessage","accounts","removeWebdavAccount","options","map","_ref","_id","_excluded","handleClickRemove","_ref2","accountSelected","accountId","type","message","error","createElement","Header","title","ScrollableContentWithShadow","maxWidth","w","alignSelf","name","render","_ref3","field","onChange","value","ref","placeholder","danger","onClick"],"mappings":"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"}