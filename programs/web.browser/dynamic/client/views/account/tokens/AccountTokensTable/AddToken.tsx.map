)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/tokens/AccountTokensTable/AddToken.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, FieldLabel, FieldRow, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useUserId, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport GenericModal from '../../../../components/GenericModal';\n\nconst AddToken = ({ reload, ...props }: { reload: () => void }): ReactElement => {\n\tconst t = useTranslation();\n\tconst userId = useUserId();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\tconst setModal = useSetModal();\n\n\tconst initialValues = useMemo(() => ({ name: '', bypassTwoFactor: false }), []);\n\n\tconst {\n\t\tregister,\n\t\tresetField,\n\t\thandleSubmit,\n\t\tformState: { isDirty, isSubmitted, submitCount },\n\t} = useForm({ defaultValues: initialValues });\n\n\tconst handleAddToken = useCallback(\n\t\tasync ({ name: tokenName, bypassTwoFactor }: typeof initialValues) => {\n\t\t\ttry {\n\t\t\t\tconst token = await createTokenFn({ tokenName, bypassTwoFactor });\n\n\t\t\t\tsetModal(\n\t\t\t\t\t<GenericModal title={t('API_Personal_Access_Token_Generated')} onConfirm={() => setModal(null)} onClose={() => setModal(null)}>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</GenericModal>,\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[createTokenFn, dispatchToastMessage, setModal, t, userId],\n\t);\n\n\tuseEffect(() => {\n\t\tresetField('name');\n\t\treload();\n\t}, [isSubmitted, submitCount, reload, resetField]);\n\n\treturn (\n\t\t<FieldGroup is='form' onSubmit={handleSubmit(handleAddToken)} marginBlock={8} {...props}>\n\t\t\t<Field>\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<Margins inlineEnd={4}>\n\t\t\t\t\t\t<TextInput data-qa='PersonalTokenField' {...register('name')} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={!isDirty} type='submit'>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FieldRow>\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} {...register('bypassTwoFactor')} />\n\t\t\t\t\t<FieldLabel htmlFor={bypassTwoFactorCheckboxId}>{t('Ignore_Two_Factor_Authentication')}</FieldLabel>\n\t\t\t\t</FieldRow>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n",null],"names":["_extends","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","FieldLabel","FieldRow","Margins","CheckBox","useUniqueId","useSetModal","useToastMessageDispatch","useUserId","useMethod","useTranslation","React","useCallback","useMemo","useEffect","useForm","GenericModal","module","link","default","v","exportDefault","_ref","reload","props","_excluded","t","userId","createTokenFn","dispatchToastMessage","bypassTwoFactorCheckboxId","setModal","initialValues","name","bypassTwoFactor","register","resetField","handleSubmit","formState","isDirty","isSubmitted","submitCount","defaultValues","handleAddToken","_ref2","tokenName","token","createElement","title","onConfirm","onClose","dangerouslySetInnerHTML","__html","error","type","message","is","onSubmit","marginBlock","inlineEnd","placeholder","primary","disabled","id","htmlFor"],"mappings":"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"}