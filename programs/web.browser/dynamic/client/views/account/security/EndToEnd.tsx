function module(e,t,a){let r,n,s,l,o,c,i,d,m,p,_,u,y,E,w,f,h,g,k,b;a.link("@babel/runtime/helpers/extends",{default(e){r=e}},0),a.link("@rocket.chat/fuselage",{Box(e){n=e},Margins(e){s=e},PasswordInput(e){l=e},Field(e){o=e},FieldGroup(e){c=e},FieldLabel(e){i=e},FieldRow(e){d=e},FieldError(e){m=e},FieldHint(e){p=e},Button(e){_=e}},0),a.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){u=e},useMethod(e){y=e},useTranslation(e){E=e},useLogout(e){w=e}},1),a.link("react",{default(e){f=e},useCallback(e){h=e},useEffect(e){g=e}},2),a.link("react-hook-form",{useForm(e){k=e}},3),a.link("../../../../app/e2e/client/rocketchat.e2e",{e2e(e){b=e}},4),a.exportDefault(e=>{var t;let a=E(),C=u(),v=w(),x=localStorage.getItem("public_key"),P=localStorage.getItem("private_key"),S=y("e2e.resetOwnE2EKey"),{register:F,handleSubmit:I,watch:K,resetField:M,formState:{errors:N,isValid:q}}=k({defaultValues:{password:"",passwordConfirm:""},mode:"onChange"}),{password:D}=K(),L=!!(x&&P),R=!!(null==D?void 0:D.trim().length),T=async e=>{try{await b.changePassword(e.password),M("password"),C({type:"success",message:a("Encryption_key_saved_successfully")})}catch(e){C({type:"error",message:e})}},H=h(async()=>{try{let e=await S();e&&(C({type:"success",message:a("User_e2e_key_was_reset")}),v())}catch(e){C({type:"error",message:e})}},[C,S,v,a]);return g(()=>{(null==D?void 0:D.trim())===""&&M("passwordConfirm")},[D,M]),f.createElement(n,r({display:"flex",flexDirection:"column",alignItems:"flex-start",mbs:16},e),f.createElement(s,{blockEnd:8},f.createElement(n,{fontScale:"h4"},a("E2E_Encryption_Password_Change")),f.createElement(n,{dangerouslySetInnerHTML:{__html:a("E2E_Encryption_Password_Explanation")}}),f.createElement(c,{w:"full"},f.createElement(o,null,f.createElement(i,{id:"New_encryption_password"},a("New_encryption_password")),f.createElement(d,null,f.createElement(l,r({},F("password",{required:!0}),{placeholder:a("New_Password_Placeholder"),disabled:!L,"aria-labelledby":"New_encryption_password"}))),!L&&f.createElement(p,null,a("EncryptionKey_Change_Disabled"))),R&&f.createElement(o,null,f.createElement(i,{id:"Confirm_new_encryption_password"},a("Confirm_new_encryption_password")),f.createElement(l,r({error:null===(t=N.passwordConfirm)||void 0===t?void 0:t.message},F("passwordConfirm",{required:!0,validate:e=>D===e||"Your passwords do no match"}),{placeholder:a("Confirm_New_Password_Placeholder"),"aria-labelledby":"Confirm_new_encryption_password"})),N.passwordConfirm&&f.createElement(m,null,N.passwordConfirm.message))),f.createElement(_,{primary:!0,disabled:!(L&&q),onClick:I(T),"data-qa-type":"e2e-encryption-save-password-button"},a("Save_changes")),f.createElement(n,{fontScale:"h4",mbs:16},a("Reset_E2E_Key")),f.createElement(n,{dangerouslySetInnerHTML:{__html:a("E2E_Reset_Key_Explanation")}}),f.createElement(_,{onClick:H,"data-qa-type":"e2e-encryption-reset-key-button"},a("Reset_E2E_Key"))))})}
//# sourceMappingURL=/dynamic/client/views/account/security/3521a41893bdfa18e50f3e931e2516a35dab38ad.map
