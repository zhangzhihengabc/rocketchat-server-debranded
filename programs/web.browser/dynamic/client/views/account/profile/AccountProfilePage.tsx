function module(e,t,l){let n,a,r,o,s,c,u,i,m,d,f,g,h,k,y,_,w,p,C,E,P,S,A;l.link("@rocket.chat/fuselage",{ButtonGroup(e){n=e},Button(e){a=e},Box(e){r=e}},0),l.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){o=e}},1),l.link("@rocket.chat/sha256",{SHA256(e){s=e}},2),l.link("@rocket.chat/ui-contexts",{useSetModal(e){c=e},useToastMessageDispatch(e){u=e},useUser(e){i=e},useLogout(e){m=e},useEndpoint(e){d=e},useTranslation(e){f=e},useSetting(e){g=e}},3),l.link("react",{default(e){h=e},useState(e){k=e},useCallback(e){y=e}},4),l.link("react-hook-form",{FormProvider(e){_=e},useForm(e){w=e}},5),l.link("../../../components/ConfirmOwnerChangeModal",{default(e){p=e}},6),l.link("../../../components/Page",{default(e){C=e}},7),l.link("../security/useAllowPasswordChange",{useAllowPasswordChange(e){E=e}},8),l.link("./AccountProfileForm",{default(e){P=e}},9),l.link("./ActionConfirmModal",{default(e){S=e}},10),l.link("./getProfileInitialValues",{getProfileInitialValues(e){A=e}},11),l.exportDefault(()=>{let e=f(),t=i(),l=u(),b=c(),O=m(),[x,D]=k(!1),T=g("Message_ErasureType"),v=g("Accounts_AllowDeleteOwnAccount"),{hasLocalPassword:B}=E(),M=w({defaultValues:A(t),mode:"onBlur"}),{reset:U,formState:{isDirty:F,isSubmitting:q}}=M,I=d("POST","/v1/users.logoutOtherClients"),L=d("POST","/v1/users.deleteOwnAccount"),V=y(async()=>{D(!0);try{await I(),l({type:"success",message:e("Logged_out_of_other_clients_successfully")})}catch(e){l({type:"error",message:e})}D(!1)},[I,l,e]),W=y((t,n,a)=>{let r=async()=>{try{await L({password:s(t),confirmRelinquish:!0}),l({type:"success",message:e("User_has_been_deleted")}),b(null),O()}catch(e){l({type:"error",message:e})}};return b(()=>h.createElement(p,{onConfirm:r,onCancel:()=>b(null),contentTitle:e("Delete_User_Warning_".concat(T)),confirmText:e("Delete"),shouldChangeOwner:n,shouldBeRemoved:a}))},[T,b,e,L,l,O]),G=y(async()=>{let t=async t=>{try{await L({password:s(t)}),l({type:"success",message:e("User_has_been_deleted")}),O()}catch(e){if("user-last-owner"===e.error){let{shouldChangeOwner:l,shouldBeRemoved:n}=e.details;return W(t,l,n)}l({type:"error",message:e})}};return b(()=>h.createElement(S,{onConfirm:t,onCancel:()=>b(null),isPassword:B}))},[l,B,b,W,L,O,e]),H=o();return h.createElement(C,null,h.createElement(C.Header,{title:e("Profile")}),h.createElement(C.ScrollableContentWithShadow,null,h.createElement(r,{maxWidth:"600px",w:"full",alignSelf:"center"},h.createElement(_,M,h.createElement(P,{id:H})),h.createElement(n,{stretch:!0,mb:12},h.createElement(a,{onClick:V,flexGrow:0,loading:x},e("Logout_Others")),v&&h.createElement(a,{icon:"trash",danger:!0,onClick:G},e("Delete_my_account"))))),h.createElement(C.Footer,{isDirty:F},h.createElement(n,null,h.createElement(a,{disabled:!F,onClick:()=>U(A(t))},e("Cancel")),h.createElement(a,{form:H,"data-qa":"AccountProfilePageSaveButton",primary:!0,disabled:!F||x,loading:q,type:"submit"},e("Save_changes")))))})}
//# sourceMappingURL=/dynamic/client/views/account/profile/dcb9f1eff4f283d0a85334e9bc99de7031b3de69.map
