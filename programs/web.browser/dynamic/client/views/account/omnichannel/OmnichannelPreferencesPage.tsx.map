)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/omnichannel/OmnichannelPreferencesPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ButtonGroup, Button, Box, Accordion } from '@rocket.chat/fuselage';\nimport { useToastMessageDispatch, useTranslation, useEndpoint, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\nimport { useForm, FormProvider } from 'react-hook-form';\n\nimport Page from '../../../components/Page';\nimport PreferencesConversationTranscript from './PreferencesConversationTranscript';\nimport { PreferencesGeneral } from './PreferencesGeneral';\n\ntype FormData = {\n\tomnichannelTranscriptPDF: boolean;\n\tomnichannelTranscriptEmail: boolean;\n};\n\nconst OmnichannelPreferencesPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst omnichannelTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst omnichannelTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst omnichannelHideConversationAfterClosing = useUserPreference<boolean>('omnichannelHideConversationAfterClosing') ?? true;\n\n\tconst methods = useForm({\n\t\tdefaultValues: { omnichannelTranscriptPDF, omnichannelTranscriptEmail, omnichannelHideConversationAfterClosing },\n\t});\n\n\tconst {\n\t\thandleSubmit,\n\t\tformState: { isDirty },\n\t\treset,\n\t} = methods;\n\n\tconst saveFn = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tconst handleSave = async (data: FormData) => {\n\t\ttry {\n\t\t\tawait saveFn({ data });\n\t\t\treset(data);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Omnichannel')} />\n\t\t\t<Page.ScrollableContentWithShadow is='form' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t\t\t<PreferencesGeneral />\n\t\t\t\t\t\t\t<PreferencesConversationTranscript />\n\t\t\t\t\t\t</FormProvider>\n\t\t\t\t\t</Accordion>\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t<Page.Footer isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={() => reset({ omnichannelTranscriptPDF, omnichannelTranscriptEmail })}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!isDirty} onClick={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Footer>\n\t\t</Page>\n\t);\n};\n\nexport default OmnichannelPreferencesPage;\n",null],"names":["ButtonGroup","Button","Box","Accordion","useToastMessageDispatch","useTranslation","useEndpoint","useUserPreference","React","useForm","FormProvider","Page","PreferencesConversationTranscript","PreferencesGeneral","module","link","v","default","exportDefault","_useUserPreference","_useUserPreference2","_useUserPreference3","t","dispatchToastMessage","omnichannelTranscriptPDF","omnichannelTranscriptEmail","omnichannelHideConversationAfterClosing","methods","defaultValues","handleSubmit","formState","isDirty","reset","saveFn","handleSave","data","type","message","error","createElement","Header","title","ScrollableContentWithShadow","is","onSubmit","maxWidth","w","alignSelf","Footer","onClick","primary","disabled"],"mappings":"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"}