)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/components/ScreenshotCarouselAnchor.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { AppScreenshot } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, Icon } from '@rocket.chat/fuselage';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport ScreenshotCarousel from './ScreenshotCarousel';\n\ntype ScreenshotCarouselAnchorProps = {\n\tscreenshots: AppScreenshot[];\n};\n\ntype voidFunction = () => void;\n\nconst ScreenshotCarouselAnchor = ({ screenshots }: ScreenshotCarouselAnchorProps): ReactElement => {\n\tconst [viewCarousel, setViewCarousel] = useState(false);\n\n\tconst [currentSlideIndex, setCurrentSlideIndex] = useState(0);\n\n\tconst [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\n\n\tconst { length } = screenshots;\n\n\tconst isFirstSlide = currentSlideIndex === 0;\n\tconst isLastSlide = currentSlideIndex === length - 1;\n\n\tconst isCarouselVisible = viewCarousel && screenshots?.length;\n\n\tconst handleNextSlide = (): void => {\n\t\tsetCurrentSlideIndex(currentSlideIndex + 1);\n\t};\n\n\tconst handlePrevSlide = (): void => {\n\t\tsetCurrentSlideIndex(currentSlideIndex - 1);\n\t};\n\n\tconst handleKeyboardKey = useCallback(\n\t\t(onKeyDownEvent: KeyboardEvent): void => {\n\t\t\tconst keysObject: Record<string, voidFunction> = {\n\t\t\t\tArrowLeft: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== 0 ? prevSlideIndex - 1 : 0)),\n\t\t\t\tArrowRight: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== length - 1 ? prevSlideIndex + 1 : length - 1)),\n\t\t\t\tEscape: () => setViewCarousel(false),\n\t\t\t};\n\n\t\t\tkeysObject[onKeyDownEvent.key]();\n\t\t},\n\t\t[length],\n\t);\n\n\tuseEffect(() => {\n\t\tconst intervalId = setInterval(() => {\n\t\t\tsetCurrentPreviewIndex((prevIndex) => {\n\t\t\t\tif (prevIndex === length - 1) return 0;\n\n\t\t\t\treturn prevIndex + 1;\n\t\t\t});\n\t\t}, 5000);\n\n\t\tdocument.addEventListener('keydown', handleKeyboardKey);\n\n\t\treturn (): void => {\n\t\t\tclearInterval(intervalId);\n\t\t\tdocument.removeEventListener('keydown', handleKeyboardKey);\n\t\t};\n\t}, [handleKeyboardKey, length]);\n\n\tconst carouselPortal = createPortal(\n\t\t<ScreenshotCarousel\n\t\t\tAppScreenshots={screenshots}\n\t\t\tsetViewCarousel={setViewCarousel}\n\t\t\thandleNextSlide={handleNextSlide}\n\t\t\thandlePrevSlide={handlePrevSlide}\n\t\t\tisFirstSlide={isFirstSlide}\n\t\t\tisLastSlide={isLastSlide}\n\t\t\tcurrentSlideIndex={currentSlideIndex}\n\t\t/>,\n\t\tdocument.body,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Box\n\t\t\t\tonClick={(): void => setViewCarousel(true)}\n\t\t\t\tdisplay='flex'\n\t\t\t\tflexDirection='column'\n\t\t\t\tmaxWidth='x640'\n\t\t\t\twidth='100%'\n\t\t\t\tstyle={{\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t}}\n\t\t\t\ttabIndex={0}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tis='img'\n\t\t\t\t\tsrc={screenshots[currentPreviewIndex]?.accessUrl}\n\t\t\t\t\talt='App preview image'\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\ttransition: filter 0.2s ease;\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\tfilter: brightness(90%);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t/>\n\n\t\t\t\t<Box display='flex' flexDirection='row' bg='tint' pi={16} pb={10} alignItems='center'>\n\t\t\t\t\t<Icon name='image' size='x24' mie={8} />{' '}\n\t\t\t\t\t<Box is='span' fontScale='p2m' color='default'>\n\t\t\t\t\t\t{currentPreviewIndex + 1} of {screenshots.length}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{isCarouselVisible && carouselPortal}\n\t\t</>\n\t);\n};\n\nexport default ScreenshotCarouselAnchor;\n",null],"names":["_taggedTemplateLiteral","css","Box","Icon","React","useCallback","useEffect","useState","createPortal","ScreenshotCarousel","module","default","link","exportDefault","_ref","_screenshots$currentP","screenshots","viewCarousel","setViewCarousel","currentSlideIndex","setCurrentSlideIndex","currentPreviewIndex","setCurrentPreviewIndex","length","isFirstSlide","isLastSlide","isCarouselVisible","handleKeyboardKey","onKeyDownEvent","keysObject","ArrowLeft","prevSlideIndex","ArrowRight","Escape","key","intervalId","setInterval","prevIndex","document","addEventListener","clearInterval","removeEventListener","carouselPortal","createElement","AppScreenshots","handleNextSlide","handlePrevSlide","body","Fragment","onClick","display","flexDirection","maxWidth","width","style","cursor","tabIndex","is","src","accessUrl","alt","className","_templateObject","bg","pi","pb","alignItems","name","size","mie","fontScale","color"],"mappings":"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"}