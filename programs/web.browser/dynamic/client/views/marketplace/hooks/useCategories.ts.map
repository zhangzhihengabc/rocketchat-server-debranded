)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/hooks/useCategories.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { AppClientOrchestratorInstance } from '../../../../ee/client/apps/orchestrator';\nimport type {\n\tCategoryDropDownGroups,\n\tCategoryDropdownItem,\n\tCategoryDropDownListProps,\n\tCategoryOnSelected,\n\tselectedCategoriesList,\n} from '../definitions/CategoryDropdownDefinitions';\nimport { handleAPIError } from '../helpers/handleAPIError';\nimport { useCategoryFlatList } from './useCategoryFlatList';\nimport { useCategoryToggle } from './useCategoryToggle';\n\nexport const useCategories = (): [CategoryDropDownGroups, selectedCategoriesList, selectedCategoriesList, CategoryOnSelected] => {\n\tconst t = useTranslation();\n\tconst [categories, setCategories] = useState<CategoryDropDownListProps['categories']>([]);\n\n\tconst fetchCategories = useCallback(async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst fetchedCategories = await AppClientOrchestratorInstance.getCategories();\n\n\t\t\tconst mappedCategories = fetchedCategories\n\t\t\t\t.filter((currentCategory) => !currentCategory.hidden)\n\t\t\t\t.map((currentCategory) => ({\n\t\t\t\t\tid: currentCategory.id,\n\t\t\t\t\tlabel: currentCategory.title,\n\t\t\t\t\tchecked: false,\n\t\t\t\t}));\n\n\t\t\tsetCategories([\n\t\t\t\t{\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'all',\n\t\t\t\t\t\t\tlabel: t('All_categories'),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('Filter_by_category'),\n\t\t\t\t\titems: mappedCategories,\n\t\t\t\t},\n\t\t\t]);\n\t\t} catch (e: any) {\n\t\t\thandleAPIError(e);\n\t\t}\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tconst fetchCategoriesWrapper = async (): Promise<void> => {\n\t\t\tawait fetchCategories();\n\t\t};\n\n\t\tfetchCategoriesWrapper();\n\t}, [fetchCategories]);\n\n\tconst onSelected = useCategoryToggle(setCategories);\n\tconst flatCategories = useCategoryFlatList(categories);\n\tconst originalSize = useCategoryFlatList(categories).length;\n\n\tconst selectedCategories = useMemo(\n\t\t() => flatCategories.filter((category) => Boolean(category.checked)),\n\t\t[flatCategories],\n\t) as (CategoryDropdownItem & { checked: true })[];\n\treturn [categories, selectedCategories, originalSize === selectedCategories.length ? [] : selectedCategories, onSelected];\n};\n",null],"names":["useTranslation","useCallback","useEffect","useMemo","useState","AppClientOrchestratorInstance","handleAPIError","useCategoryFlatList","useCategoryToggle","module","export","useCategories","t","categories","setCategories","fetchCategories","fetchedCategories","getCategories","mappedCategories","filter","currentCategory","hidden","map","id","label","title","checked","items","e","fetchCategoriesWrapper","onSelected","flatCategories","originalSize","length","selectedCategories","category","Boolean"],"mappings":"2BAA+BA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA1DC,EAAOC,MAAE,CAAA,CAAAC,cAAgB,IAAMA,CAAA,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAR,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAJ,8BAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAD,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAenD,IAAMG,EAAgB,KAC5B,IAAMC,EAAIZ,IACJ,CAACa,EAAYC,EAAc,CAAGV,EAAkD,EAAE,EAElFW,EAAkBd,EAAY,UACnC,GAAI,CACH,IAAMe,EAAoB,MAAMX,EAA8BY,aAAa,GAErEC,EAAmBF,EACvBG,MAAM,CAAEC,GAAoB,CAACA,EAAgBC,MAAM,EACnDC,GAAG,CAAEF,GAAqB,CAAA,CAC1BG,GAAIH,EAAgBG,EAAE,CACtBC,MAAOJ,EAAgBK,KAAK,CAC5BC,QAAS,CAAA,KAGXZ,EAAc,CACb,CACCa,MAAO,CACN,CACCJ,GAAI,MACJC,MAAOZ,EAAE,mBACT,EAGH,CACCY,MAAOZ,EAAE,sBACTe,MAAOT,GAER,EACA,MAAOU,EAAQ,CAChBtB,EAAesB,GAEjB,EAAG,CAAChB,EAAE,EAENV,EAAU,KACT,IAAM2B,EAAyB,UAC9B,MAAMd,GACP,EAEAc,GACD,EAAG,CAACd,EAAgB,EAEpB,IAAMe,EAAatB,EAAkBM,GAC/BiB,EAAiBxB,EAAoBM,GACrCmB,EAAezB,EAAoBM,GAAYoB,MAAM,CAErDC,EAAqB/B,EAC1B,IAAM4B,EAAeZ,MAAM,CAAEgB,GAAaC,CAAAA,CAAQD,EAAST,OAAO,EAClE,CAACK,EAAe,EAEjB,MAAO,CAAClB,EAAYqB,EAAoBF,IAAiBE,EAAmBD,MAAM,CAAG,EAAE,CAAGC,EAAoBJ,EAAW,AAC1H"}