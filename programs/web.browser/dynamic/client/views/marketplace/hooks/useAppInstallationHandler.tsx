function module(e,a,n){let t,l,s,r,i,p,o,u,c,d,m,h,k,f,A,b;function y(e){let{app:a,action:n,isAppPurchased:y,onDismiss:x,onSuccess:C}=e,E=r(),I=s(),g=String(l("context")),M=k(g)?g:"explore",O=f(M),P=t("POST","/apps/notify-admins"),w=b(),R=u(),U=c()({target:"user-page",action:"buy_more"}),T=p(()=>{I(null),x()},[x,I]),q=p(e=>{I(null),C(n,e)},[n,C,I]),v=A({app:a,onCancel:T,onConfirm:q}),S=p(async()=>{if("purchase"===n&&!y){try{let e=await o.buildExternalUrl(a.id,a.purchaseType,!1);I(i.createElement(d,{url:e.url,cancel:x,confirm:v}))}catch(e){h(e)}return}v()},[n,y,v,a.id,a.purchaseType,I,x]);return p(async()=>{if(null!=a&&a.versionIncompatible){w(a,n,T);return}if("request"===n){try{let e=await o.buildExternalAppRequest(a.id);I(i.createElement(d,{url:e.url,wrapperHeight:"x460",cancel:x,confirm:e=>{I(null),E({type:"success",message:"App request submitted"}),P({appId:a.id,appName:a.name,appVersion:a.marketplaceVersion,message:"string"==typeof e.message?e.message:""}),q()}}))}catch(e){h(e)}return}if(O.data){if(O.data.hasUnlimitedApps)return S();I(i.createElement(m,{context:M,enabled:O.data.enabled,limit:O.data.limit,appName:a.name,handleClose:T,handleConfirm:S,handleEnableUnlimitedApps:()=>{R(U),I(null)}}))}},[a,n,O.data,I,M,T,S,w,E,P,q,x,R,U])}n.export({useAppInstallationHandler:()=>y}),n.link("@rocket.chat/ui-contexts",{useEndpoint(e){t=e},useRouteParameter(e){l=e},useSetModal(e){s=e},useToastMessageDispatch(e){r=e}},0),n.link("react",{default(e){i=e},useCallback(e){p=e}},1),n.link("../../../../ee/client/apps/orchestrator",{AppClientOrchestratorInstance(e){o=e}},2),n.link("../../../hooks/useExternalLink",{useExternalLink(e){u=e}},3),n.link("../../admin/subscription/hooks/useCheckoutUrl",{useCheckoutUrl(e){c=e}},4),n.link("../IframeModal",{default(e){d=e}},5),n.link("../components/AppInstallModal/AppInstallModal",{default(e){m=e}},6),n.link("../helpers/handleAPIError",{handleAPIError(e){h=e}},7),n.link("./useAppsCountQuery",{isMarketplaceRouteContext(e){k=e},useAppsCountQuery(e){f=e}},8),n.link("./useOpenAppPermissionsReviewModal",{useOpenAppPermissionsReviewModal(e){A=e}},9),n.link("./useOpenIncompatibleModal",{useOpenIncompatibleModal(e){b=e}},10)}
//# sourceMappingURL=/dynamic/client/views/marketplace/hooks/e31a5dcca9ad169a7cedbfd4a5cb0f2024762e9e.map
