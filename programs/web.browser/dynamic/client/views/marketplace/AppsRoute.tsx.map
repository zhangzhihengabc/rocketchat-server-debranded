)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppsRoute.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useRouteParameter, useRoute, usePermission } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useEffect } from 'react';\n\nimport PageSkeleton from '../../components/PageSkeleton';\nimport AppsProvider from '../../providers/AppsProvider';\nimport NotAuthorizedPage from '../notAuthorized/NotAuthorizedPage';\nimport AppDetailsPage from './AppDetailsPage';\nimport AppInstallPage from './AppInstallPage';\nimport AppsPage from './AppsPage';\nimport BannerEnterpriseTrialEnded from './components/BannerEnterpriseTrialEnded';\n\nconst AppsRoute = (): ReactElement => {\n\tconst [isLoading, setLoading] = useState(true);\n\tconst marketplaceRoute = useRoute('marketplace');\n\n\tconst context = useRouteParameter('context') || 'explore';\n\tconst id = useRouteParameter('id');\n\tconst page = useRouteParameter('page');\n\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst canAccessMarketplace = usePermission('access-marketplace');\n\n\tif (!page) marketplaceRoute.push({ context, page: 'list' });\n\n\tuseEffect(() => {\n\t\tlet mounted = true;\n\n\t\tconst initialize = async (): Promise<void> => {\n\t\t\tif (!mounted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t};\n\n\t\tinitialize();\n\n\t\treturn (): void => {\n\t\t\tmounted = false;\n\t\t};\n\t}, [marketplaceRoute, context]);\n\n\tif (\n\t\t(context === 'explore' || context === 'installed' || context === 'private' || context === 'premium') &&\n\t\t!canAccessMarketplace &&\n\t\t!isAdminUser\n\t) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\tif ((context === 'requested' || page === 'install') && !isAdminUser) return <NotAuthorizedPage />;\n\n\tif (isLoading) {\n\t\treturn <PageSkeleton />;\n\t}\n\n\treturn (\n\t\t<AppsProvider>\n\t\t\t<BannerEnterpriseTrialEnded />\n\t\t\t{(page === 'list' && <AppsPage />) ||\n\t\t\t\t(id && page === 'info' && <AppDetailsPage id={id} />) ||\n\t\t\t\t(page === 'install' && <AppInstallPage />)}\n\t\t</AppsProvider>\n\t);\n};\n\nexport default AppsRoute;\n",null],"names":["useRouteParameter","useRoute","usePermission","React","useState","useEffect","PageSkeleton","AppsProvider","NotAuthorizedPage","AppDetailsPage","AppInstallPage","AppsPage","BannerEnterpriseTrialEnded","module","link","v","default","exportDefault","isLoading","setLoading","marketplaceRoute","context","id","page","isAdminUser","canAccessMarketplace","push","mounted","initialize","createElement"],"mappings":"2BAAAA,EAASC,EAAmBC,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhDC,EAAaC,IAAE,CAAA,2BAAM,CAA0Bd,kBAACe,CAAA,EAAAf,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,QAAAA,CAAAA,EAAAb,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAG,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAG,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAG,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,mBAAAA,CAAAG,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,mBAAAA,CAAAG,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,aAAAA,CAAAG,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAG,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAtFC,EAAOI,aAAE,CAYS,KACjB,GAAM,CAACC,EAAWC,EAAW,CAAGf,EAAS,CAAA,GACnCgB,EAAmBnB,EAAS,eAE5BoB,EAAUrB,EAAkB,YAAc,UAC1CsB,EAAKtB,EAAkB,MACvBuB,EAAOvB,EAAkB,QAEzBwB,EAActB,EAAc,eAC5BuB,EAAuBvB,EAAc,4BAsB3C,CApBKqB,GAAMH,EAAiBM,IAAI,CAAC,CAAEL,QAAAA,EAASE,KAAM,MAAM,GAExDlB,EAAU,KACT,IAAIsB,EAAU,CAAA,EAERC,EAAa,UACbD,GAILR,EAAW,CAAA,EACZ,EAIA,OAFAS,IAEO,KACND,EAAU,CAAA,CACX,CACD,EAAG,CAACP,EAAkBC,EAAQ,EAG7B,CAAA,AAAa,YAAZA,GAAyBA,AAAY,cAAZA,GAA2BA,AAAY,YAAZA,GAAyBA,AAAY,YAAZA,GAC7EI,GACAD,CAAAA,GAKE,CAAA,AAAa,cAAZH,GAA2BE,AAAS,YAATA,GAAwBC,CAAAA,GAEpDN,EACIf,EAAA0B,aAAA,CAACvB,EAAY,MAIpBH,EAAA0B,aAAA,CAACtB,EAAY,KACZJ,EAAA0B,aAAA,CAACjB,EAA0B,MACzBW,AAAS,SAATA,GAAmBpB,EAAA0B,aAAA,CAAClB,EAAQ,OAC5BW,GAAMC,AAAS,SAATA,GAAmBpB,EAAA0B,aAAA,CAACpB,EAAc,CAACa,GAAIA,CAAG,IAChDC,AAAS,YAATA,GAAsBpB,EAAA0B,aAAA,CAACnB,EAAc,OAdjCP,EAAA0B,aAAA,CAACrB,EAAiB,KAiB3B"}