function module(e,l,t){let n,a,i,s,r,o,u,p,c,d,m,k,v,b,h,f,y,E,q,x,S,g,P,T;let A=["app","showStatus","isAppDetailsPage","installed"];t.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){i=e}},2),t.link("@rocket.chat/fuselage",{Box(e){s=e},Button(e){r=e},Throbber(e){o=e},Tag(e){u=e},Margins(e){p=e}},0),t.link("@rocket.chat/fuselage-hooks",{useSafely(e){c=e}},1),t.link("@rocket.chat/ui-contexts",{useRouteParameter(e){d=e},usePermission(e){m=e},useSetModal(e){k=e},useTranslation(e){v=e}},2),t.link("react",{default(e){b=e},useCallback(e){h=e},useState(e){f=e},memo(e){y=e}},3),t.link("semver",{default(e){E=e}},4),t.link("../../../../../hooks/useIsEnterprise",{useIsEnterprise(e){q=e}},5),t.link("../../../helpers",{appButtonProps(e){x=e},appMultiStatusProps(e){S=e}},6),t.link("../../../helpers/marketplaceActions",{marketplaceActions(e){g=e}},7),t.link("../../../hooks/useAppInstallationHandler",{useAppInstallationHandler(e){P=e}},8),t.link("./AppStatusPriceDisplay",{default(e){T=e}},9),t.exportDefault(y(e=>{var l,t,y;let{app:D,showStatus:I=!0,isAppDetailsPage:R,installed:w}=e,C=i(e,A),j=v(),[B,M]=f(!1),[H,U]=c(f(!1)),[V,O]=c(f(!!(null!=D&&D.isPurchased))),W=k(),_=m("manage-apps"),z=d("context"),{price:F,purchaseType:G,pricingPlans:J}=D,K=x(a(a({},D),{},{isAdminUser:_,endUserRequested:B})),L="requested"===z,N=R&&K&&!D.isEnterpriseOnly,Q=w&&(null==D?void 0:D.version)&&(null==D?void 0:D.marketplaceVersion)&&E.lt(null==D?void 0:D.version,null==D?void 0:D.marketplaceVersion),{data:X}=q(),Y=null!==(l=null==X?void 0:X.isEnterprise)&&void 0!==l&&l,Z=S(D,R,z||"",Y),$=null==D?void 0:null===(t=D.appRequestStats)||void 0===t?void 0:t.totalSeen,ee=null==D?void 0:null===(y=D.appRequestStats)||void 0===y?void 0:y.totalUnseen,el=null==K?void 0:K.action,et=h(async(e,l)=>{"request"!==e?(O(!0),await g[e](a(a({},D),{},{permissionsGranted:l}))):M(!0),U(!1)},[D,U,O]),en=h(()=>{U(!1),W(null)},[U,W]),ea=P({app:D,action:el||"purchase",isAppPurchased:V,onDismiss:en,onSuccess:et}),ei=h(()=>{U(!0),ea()},[ea,U]),es=e=>L&&ee&&("request"===e.label||"requests"===e.label)?"primary":L&&"Requested"===e.label?void 0:e.label.includes("Disabled")?"secondary-danger":void 0,er=e=>{if(("request"===e.label||"requests"===e.label)&&!w&&L){let e=0;return ee>=0&&(e+=ee),$>=0&&(e+=$),e}return null};return b.createElement(s,n({},C,{display:"flex",alignItems:"center",mie:8}),K&&R&&(!w||Q)&&b.createElement(s,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:"x4",invisible:!I&&!H},b.createElement(r,{icon:!H&&K.icon?K.icon:void 0,primary:!0,small:!0,disabled:H||"request"===el&&((null==D?void 0:D.requestedEndUser)||B),onClick:ei,mie:8},H&&b.createElement(o,{inheritColor:!0}),!H&&j(K.label.replace(" ","_"))),N&&!w&&b.createElement(T,{purchaseType:G,pricingPlans:J,price:F,showType:!1})),null==Z?void 0:Z.map((e,l)=>b.createElement(p,{inlineEnd:8,key:l},b.createElement(u,{variant:es(e),title:e.tooltipText?e.tooltipText:""},er(e)," ",j("".concat(e.label))))))}))}
//# sourceMappingURL=/dynamic/client/views/marketplace/AppDetailsPage/tabs/AppStatus/f01c51992e9ef4bf82c1931bd0260b0c617a83ea.map
