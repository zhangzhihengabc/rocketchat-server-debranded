)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\nimport type { ISettingBase, SettingValue } from '@rocket.chat/core-typings';\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\n\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport MemoizedSetting from '../../../../admin/settings/MemoizedSetting';\n\ntype AppTranslationFunction = {\n\t(key: string, ...replaces: unknown[]): string;\n\thas: (key: string | undefined) => boolean;\n};\n\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\n\tconst t = useTranslation();\n\n\tconst tApp = useCallback(\n\t\t(key: string, ...args: unknown[]) => {\n\t\t\tif (!key) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\n\n\t\t\tif (t.has(appKey)) {\n\t\t\t\treturn t(appKey, ...args);\n\t\t\t}\n\t\t\tif (t.has(key)) {\n\t\t\t\treturn t(key, ...args);\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t[t, appId],\n\t);\n\n\treturn Object.assign(tApp, {\n\t\thas: useCallback(\n\t\t\t(key: string | undefined) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n\t\t\t},\n\t\t\t[t, appId],\n\t\t),\n\t});\n};\n\ntype AppSettingProps = {\n\tappSetting: {\n\t\tid: string;\n\t\ttype: ISettingBase['type'];\n\t\ti18nLabel: string;\n\t\ti18nDescription?: string;\n\t\tvalues?: ISettingSelectValue[];\n\t\trequired: boolean;\n\t};\n\tonChange: (value: SettingValue) => void;\n\tvalue: SettingValue;\n};\nconst AppSetting = ({ appSetting, onChange, value, ...props }: AppSettingProps): ReactElement => {\n\tconst appId = useRouteParameter('id');\n\tconst tApp = useAppTranslation(appId || '');\n\n\tconst { id, type, i18nLabel, i18nDescription, values, required } = appSetting;\n\n\tconst label = (i18nLabel && tApp(i18nLabel)) + (required ? ' *' : '') || id || tApp(id);\n\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\n\n\tlet translatedValues;\n\tif (values?.length) {\n\t\ttranslatedValues = values.map((selectFieldEntry) => {\n\t\t\tconst { key, i18nLabel } = selectFieldEntry;\n\n\t\t\tif (!i18nLabel) {\n\t\t\t\treturn selectFieldEntry;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey,\n\t\t\t\ti18nLabel: tApp(i18nLabel),\n\t\t\t};\n\t\t});\n\t}\n\n\treturn (\n\t\t<MemoizedSetting\n\t\t\ttype={type}\n\t\t\tlabel={label}\n\t\t\thint={hint}\n\t\t\tvalue={value}\n\t\t\tonChangeValue={onChange}\n\t\t\t_id={id}\n\t\t\t{...(translatedValues && { values: translatedValues })}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nexport default AppSetting;\n",null],"names":["_extends","_objectWithoutProperties","useRouteParameter","useTranslation","React","useMemo","useCallback","Utilities","MarkdownText","MemoizedSetting","module","default","v","link","useAppTranslation","appId","t","tApp","key","appKey","getI18nKeyForApp","_len","arguments","length","args","Array","_key","has","Object","assign","exportDefault","_ref","translatedValues","appSetting","onChange","value","props","_excluded","id","type","i18nLabel","i18nDescription","values","required","label","hint","createElement","content","map","selectFieldEntry","onChangeValue","_id"],"mappings":"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"}