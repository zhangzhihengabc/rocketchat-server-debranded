)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/helpers/handleInstallError.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { t } from '../../../../app/utils/lib/i18n';\nimport { dispatchToastMessage } from '../../../lib/toast';\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ninterface ApiError {\n\txhr: {\n\t\tresponseJSON: {\n\t\t\terror: string;\n\t\t\tstatus: string;\n\t\t\tmessages: string[];\n\t\t\tpayload?: any;\n\t\t};\n\t};\n}\n\nexport function handleInstallError(apiError: ApiError | Error): void {\n\tif (apiError instanceof Error) {\n\t\tdispatchToastMessage({ type: 'error', message: apiError.message });\n\t\treturn;\n\t}\n\n\tif (!apiError.xhr?.responseJSON) {\n\t\treturn;\n\t}\n\n\tconst { status, messages, error, payload = null } = apiError.xhr.responseJSON;\n\n\tlet message: string;\n\n\tswitch (status) {\n\t\tcase 'storage_error':\n\t\t\tmessage = messages.join('');\n\t\t\tbreak;\n\t\tcase 'app_user_error':\n\t\t\tmessage = messages.join('');\n\t\t\tif (payload?.username) {\n\t\t\t\tmessage = t('Apps_User_Already_Exists', { username: payload.username });\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (error) {\n\t\t\t\tmessage = error;\n\t\t\t} else {\n\t\t\t\tmessage = t('There_has_been_an_error_installing_the_app');\n\t\t\t}\n\t}\n\n\tdispatchToastMessage({ type: 'error', message });\n}\n",null],"names":["t","dispatchToastMessage","handleInstallError","apiError","_apiError$xhr","message","Error","type","xhr","responseJSON","status","messages","error","payload","join","username","module","export"],"mappings":"2BAAmDA,EAAAC,EAe7C,SAAUC,EAAmBC,CAA0B,MAAAC,MAYxDC,EAXJ,GAAIF,aAAoBG,MAAO,CAC9BL,EAAqB,CAAEM,KAAM,QAASF,QAASF,EAASE,OAAAA,AAAO,GAC/D,OAGD,GAAI,CAAA,CAAA,AAAa,OAAbD,CAAAA,EAACD,EAASK,GAAG,AAAHA,GAAGJ,AAAA,KAAA,IAAAA,GAAZA,EAAcK,YAAY,AAAZA,EAClB,OAGD,GAAM,CAAEC,OAAAA,CAAM,CAAEC,SAAAA,CAAQ,CAAEC,MAAAA,CAAK,CAAEC,QAAAA,EAAU,IAAA,CAAM,CAAGV,EAASK,GAAG,CAACC,YAAY,CAI7E,OAAQC,GACP,IAAK,gBACJL,EAAUM,EAASG,IAAI,CAAC,IACxB,KACD,KAAK,iBACJT,EAAUM,EAASG,IAAI,CAAC,UACpBD,GAAAA,EAASE,QAAQ,EACpBV,CAAAA,EAAUL,EAAE,2BAA4B,CAAEe,SAAUF,EAAQE,QAAAA,AAAQ,EAAE,EAEvE,KACD,SAEEV,EADGO,GAGOZ,EAAE,6CACZ,CAGHC,EAAqB,CAAEM,KAAM,QAASF,QAAAA,CAAO,EAC9C,CAhDAW,EAAOC,MAAK,CAAA,CAAAf,mBAAM,IAAAA,CAAiC,GAAAc,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAhB,EAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgB,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAf,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}