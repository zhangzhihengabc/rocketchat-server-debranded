)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/marketplace/AppInstallPage.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, ButtonGroup, Icon, Field, FieldGroup, FieldLabel, FieldRow, TextInput } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseSetModal,\n\tuseEndpoint,\n\tuseUpload,\n\tuseTranslation,\n\tuseRouteParameter,\n\tuseRouter,\n\tuseSearchParameter,\n} from '@rocket.chat/ui-contexts';\nimport React, { useCallback, useState } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { AppClientOrchestratorInstance } from '../../../ee/client/apps/orchestrator';\nimport Page from '../../components/Page';\nimport { useAppsReload } from '../../contexts/hooks/useAppsReload';\nimport { useExternalLink } from '../../hooks/useExternalLink';\nimport { useFileInput } from '../../hooks/useFileInput';\nimport { useCheckoutUrl } from '../admin/subscription/hooks/useCheckoutUrl';\nimport AppPermissionsReviewModal from './AppPermissionsReviewModal';\nimport AppUpdateModal from './AppUpdateModal';\nimport AppInstallModal from './components/AppInstallModal/AppInstallModal';\nimport { handleAPIError } from './helpers/handleAPIError';\nimport { handleInstallError } from './helpers/handleInstallError';\nimport { useAppsCountQuery } from './hooks/useAppsCountQuery';\nimport { getManifestFromZippedApp } from './lib/getManifestFromZippedApp';\n\nconst placeholderUrl = 'https://rocket.chat/apps/package.zip';\n\nfunction AppInstallPage() {\n\tconst t = useTranslation();\n\n\tconst reload = useAppsReload();\n\n\tconst router = useRouter();\n\n\tconst context = useRouteParameter('context');\n\n\tconst setModal = useSetModal();\n\n\tconst appId = useSearchParameter('id');\n\tconst queryUrl = useSearchParameter('url');\n\n\tconst [installing, setInstalling] = useState(false);\n\n\tconst endpointAddress = appId ? `/apps/${appId}` : '/apps';\n\tconst downloadApp = useEndpoint('POST', endpointAddress);\n\tconst uploadAppEndpoint = useUpload(endpointAddress);\n\tconst uploadUpdateApp = useUpload(`${endpointAddress}/update`);\n\n\tconst appCountQuery = useAppsCountQuery('private');\n\n\tconst openExternalLink = useExternalLink();\n\tconst manageSubscriptionUrl = useCheckoutUrl()({ target: 'marketplace-app-install', action: 'Enable_unlimited_apps' });\n\n\tconst { control, setValue, watch } = useForm({ defaultValues: { url: queryUrl || '' } });\n\tconst { file, url } = watch();\n\n\tconst canSave = !!url || !!file?.name;\n\n\tconst [handleUploadButtonClick] = useFileInput((value) => setValue('file', value), 'app');\n\n\tconst sendFile = async (permissionsGranted, appFile, appId) => {\n\t\tlet app;\n\t\tconst fileData = new FormData();\n\t\tfileData.append('app', appFile, appFile.name);\n\t\tfileData.append('permissions', JSON.stringify(permissionsGranted));\n\n\t\ttry {\n\t\t\tif (appId) {\n\t\t\t\tawait uploadUpdateApp(fileData);\n\t\t\t} else {\n\t\t\t\tapp = await uploadAppEndpoint(fileData);\n\t\t\t}\n\n\t\t\trouter.navigate({\n\t\t\t\tname: 'marketplace',\n\t\t\t\tparams: {\n\t\t\t\t\tcontext: 'private',\n\t\t\t\t\tpage: 'info',\n\t\t\t\t\tid: appId || app.app.id,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treload();\n\t\t} catch (e) {\n\t\t\thandleAPIError(e);\n\t\t} finally {\n\t\t\tsetInstalling(false);\n\t\t\tsetModal(null);\n\t\t}\n\t};\n\n\tconst cancelAction = useCallback(() => {\n\t\tsetInstalling(false);\n\t\tsetModal(null);\n\t}, [setInstalling, setModal]);\n\n\tconst isAppInstalled = async (appId) => {\n\t\ttry {\n\t\t\tconst app = await AppClientOrchestratorInstance.getApp(appId);\n\t\t\treturn !!app || false;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tconst handleAppPermissionsReview = async (permissions, appFile, appId) => {\n\t\tsetModal(\n\t\t\t<AppPermissionsReviewModal\n\t\t\t\tappPermissions={permissions}\n\t\t\t\tonCancel={cancelAction}\n\t\t\t\tonConfirm={(permissionsGranted) => sendFile(permissionsGranted, appFile, appId)}\n\t\t\t/>,\n\t\t);\n\t};\n\n\tconst uploadFile = async (appFile, { id, permissions }) => {\n\t\tconst isInstalled = await isAppInstalled(id);\n\n\t\tif (isInstalled) {\n\t\t\treturn setModal(<AppUpdateModal cancel={cancelAction} confirm={() => handleAppPermissionsReview(permissions, appFile, id)} />);\n\t\t}\n\n\t\tawait handleAppPermissionsReview(permissions, appFile);\n\t};\n\n\tconst getAppFileAndManifest = async () => {\n\t\ttry {\n\t\t\tlet manifest;\n\t\t\tlet appFile;\n\t\t\tif (url) {\n\t\t\t\tconst { buff } = await downloadApp({ url, downloadOnly: true });\n\t\t\t\tconst fileData = Uint8Array.from(buff.data);\n\t\t\t\tmanifest = await getManifestFromZippedApp(fileData);\n\t\t\t\tappFile = new File([fileData], 'app.zip', { type: 'application/zip' });\n\t\t\t} else {\n\t\t\t\tappFile = file;\n\t\t\t\tmanifest = await getManifestFromZippedApp(appFile);\n\t\t\t}\n\n\t\t\treturn { appFile, manifest };\n\t\t} catch (error) {\n\t\t\thandleInstallError(error);\n\n\t\t\treturn { appFile: null, manifest: null };\n\t\t}\n\t};\n\n\tconst install = async () => {\n\t\tsetInstalling(true);\n\n\t\tif (!appCountQuery.data) {\n\t\t\treturn cancelAction();\n\t\t}\n\n\t\tconst { appFile, manifest } = await getAppFileAndManifest();\n\n\t\tif (!appFile || !manifest) {\n\t\t\treturn cancelAction();\n\t\t}\n\n\t\tif (appCountQuery.data.hasUnlimitedApps) {\n\t\t\treturn uploadFile(appFile, manifest);\n\t\t}\n\n\t\tsetModal(\n\t\t\t<AppInstallModal\n\t\t\t\tcontext={context}\n\t\t\t\tenabled={appCountQuery.data.enabled}\n\t\t\t\tlimit={appCountQuery.data.limit}\n\t\t\t\tappName={manifest.name}\n\t\t\t\thandleClose={cancelAction}\n\t\t\t\thandleConfirm={() => uploadFile(appFile, manifest)}\n\t\t\t\thandleEnableUnlimitedApps={() => {\n\t\t\t\t\topenExternalLink(manageSubscriptionUrl);\n\t\t\t\t\tsetModal(null);\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\t};\n\n\tconst handleCancel = () => {\n\t\trouter.navigate({\n\t\t\tname: 'marketplace',\n\t\t\tparams: {\n\t\t\t\tcontext,\n\t\t\t\tpage: 'list',\n\t\t\t},\n\t\t});\n\t};\n\n\tconst urlField = useUniqueId();\n\tconst fileField = useUniqueId();\n\n\treturn (\n\t\t<Page flexDirection='column'>\n\t\t\t<Page.Header title={t('App_Installation')} />\n\t\t\t<Page.ScrollableContent>\n\t\t\t\t<FieldGroup display='flex' flexDirection='column' alignSelf='center' maxWidth='x600' w='full'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={urlField}>{t('App_Url_to_Install_From')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='url'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<TextInput id={urlField} placeholder={placeholderUrl} addon={<Icon name='permalink' size='x20' />} {...field} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={fileField}>{t('App_Url_to_Install_From_File')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='file'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\tid={fileField}\n\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\tvalue={field.value?.name || ''}\n\t\t\t\t\t\t\t\t\t\taddon={\n\t\t\t\t\t\t\t\t\t\t\t<Button icon='upload' small primary onClick={handleUploadButtonClick} mb='neg-x4' mie='neg-x8'>\n\t\t\t\t\t\t\t\t\t\t\t\t{t('Browse_Files')}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t<Button disabled={!canSave} loading={installing} onClick={install}>\n\t\t\t\t\t\t\t\t{t('Install')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handleCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Page.ScrollableContent>\n\t\t</Page>\n\t);\n}\n\nexport default AppInstallPage;\n",null],"names":["_extends","Button","ButtonGroup","Icon","Field","FieldGroup","FieldLabel","FieldRow","TextInput","useUniqueId","useSetModal","useEndpoint","useUpload","useTranslation","useRouteParameter","useRouter","useSearchParameter","React","useCallback","useState","useForm","Controller","AppClientOrchestratorInstance","Page","useAppsReload","useExternalLink","useFileInput","useCheckoutUrl","AppPermissionsReviewModal","AppUpdateModal","AppInstallModal","handleAPIError","handleInstallError","useAppsCountQuery","getManifestFromZippedApp","module","link","default","v","exportDefault","t","reload","router","context","setModal","appId","queryUrl","installing","setInstalling","endpointAddress","concat","downloadApp","uploadAppEndpoint","uploadUpdateApp","appCountQuery","openExternalLink","manageSubscriptionUrl","target","action","control","setValue","watch","defaultValues","url","file","canSave","name","handleUploadButtonClick","value","sendFile","permissionsGranted","appFile","app","fileData","FormData","append","JSON","stringify","navigate","params","page","id","e","cancelAction","isAppInstalled","getApp","handleAppPermissionsReview","permissions","createElement","appPermissions","onCancel","onConfirm","uploadFile","_ref","isInstalled","cancel","confirm","getAppFileAndManifest","manifest","buff","downloadOnly","Uint8Array","from","data","File","type","error","install","hasUnlimitedApps","enabled","limit","appName","handleClose","handleConfirm","handleEnableUnlimitedApps","urlField","fileField","flexDirection","Header","title","ScrollableContent","display","alignSelf","maxWidth","w","htmlFor","render","_ref2","field","placeholder","addon","size","_ref3","_field$value","readOnly","icon","small","primary","onClick","mb","mie","disabled","loading"],"mappings":"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"}