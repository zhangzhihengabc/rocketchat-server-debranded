)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/hooks/useMembersList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useInfiniteQuery } from '@tanstack/react-query';\n\ntype MembersListOptions = {\n\trid: string;\n\ttype: 'all' | 'online';\n\tlimit: number;\n\tdebouncedText: string;\n\troomType: 'd' | 'p' | 'c';\n};\n\nconst endpointsByRoomType = {\n\td: '/v1/im.members',\n\tp: '/v1/groups.members',\n\tc: '/v1/channels.members',\n} as const;\n\nexport const useMembersList = (options: MembersListOptions) => {\n\tconst getMembers = useEndpoint('GET', endpointsByRoomType[options.roomType]);\n\n\treturn useInfiniteQuery(\n\t\t[options.roomType, 'members', options.rid, options.type, options.debouncedText],\n\t\tasync ({ pageParam }) => {\n\t\t\tconst start = pageParam ?? 0;\n\n\t\t\treturn getMembers({\n\t\t\t\troomId: options.rid,\n\t\t\t\toffset: start,\n\t\t\t\tcount: 20,\n\t\t\t\t...(options.debouncedText && { filter: options.debouncedText }),\n\t\t\t\t...(options.type !== 'all' && { status: [options.type] }),\n\t\t\t});\n\t\t},\n\t\t{\n\t\t\tgetNextPageParam: (lastPage) => {\n\t\t\t\tconst offset = lastPage.offset + lastPage.count;\n\t\t\t\t// if the offset is greater than the total, return undefined to stop the query from trying to fetch another page\n\t\t\t\treturn offset >= lastPage.total ? undefined : offset;\n\t\t\t},\n\t\t},\n\t);\n};\n",null],"names":["_objectSpread","useEndpoint","useInfiniteQuery","module","link","default","export","useMembersList","endpointsByRoomType","d","p","c","options","getMembers","roomType","rid","type","debouncedText","_ref","pageParam","roomId","offset","count","filter","status","getNextPageParam","lastPage","total","undefined"],"mappings":"2BAAAA,EAAuDC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAvDG,EAAOG,MAAE,CAAA,CAAAC,eAAmB,IAAAA,CAAA,GAA2BJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAF,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAWvD,IAAMM,EAAsB,CAC3BC,EAAG,iBACHC,EAAG,qBACHC,EAAG,wBAGSJ,EAAkBK,IAC9B,IAAMC,EAAaZ,EAAY,MAAOO,CAAmB,CAACI,EAAQE,QAAQ,CAAC,EAE3E,OAAOZ,EACN,CAACU,EAAQE,QAAQ,CAAE,UAAWF,EAAQG,GAAG,CAAEH,EAAQI,IAAI,CAAEJ,EAAQK,aAAa,CAAC,CAC/E,MAAAC,IAAwB,GAAjB,CAAEC,UAAAA,CAAAA,CAAW,CAAAD,EAGnB,OAAOL,EAAUb,EAAAA,EAAA,CAChBoB,OAAQR,EAAQG,GAAG,CACnBM,OAJaF,MAAAA,EAAAA,EAAa,EAK1BG,MAAO,EAAE,EACLV,EAAQK,aAAa,EAAI,CAAEM,OAAQX,EAAQK,aAAAA,AAAa,GACxDL,AAAiB,QAAjBA,EAAQI,IAAI,EAAc,CAAEQ,OAAQ,CAACZ,EAAQI,IAAI,CAAA,AAAC,GAExD,EACA,CACCS,iBAAmBC,IAClB,IAAML,EAASK,EAASL,MAAM,CAAGK,EAASJ,KAAK,CAE/C,OAAOD,GAAUK,EAASC,KAAK,CAAGC,KAAAA,EAAYP,CAC/C,GAGH"}