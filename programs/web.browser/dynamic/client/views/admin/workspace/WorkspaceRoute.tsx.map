)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/WorkspaceRoute.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Callout, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo, useState } from 'react';\n\nimport Page from '../../../components/Page';\nimport PageSkeleton from '../../../components/PageSkeleton';\nimport { useWorkspaceInfo } from '../../../hooks/useWorkspaceInfo';\nimport { downloadJsonAs } from '../../../lib/download';\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\nimport WorkspacePage from './WorkspacePage';\n\nconst WorkspaceRoute = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst canViewStatistics = usePermission('view-statistics');\n\n\tconst [refreshStatistics, setRefreshStatistics] = useState(false);\n\tconst [serverInfoQuery, instancesQuery, statisticsQuery] = useWorkspaceInfo({ refreshStatistics });\n\n\tif (!canViewStatistics) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\tif (serverInfoQuery.isLoading || instancesQuery.isLoading || statisticsQuery.isLoading) {\n\t\treturn <PageSkeleton />;\n\t}\n\n\tconst handleClickRefreshButton = async () => {\n\t\tsetRefreshStatistics(true);\n\t\tstatisticsQuery.refetch();\n\t};\n\n\tif (serverInfoQuery.isError || instancesQuery.isError || statisticsQuery.isError) {\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Page.Header title={t('Workspace')}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button icon='reload' primary type='button' onClick={handleClickRefreshButton} loading={statisticsQuery.isLoading}>\n\t\t\t\t\t\t\t{t('Refresh')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Page.Header>\n\t\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t\t<Callout type='danger'>{t('Error_loading_pages')}</Callout>\n\t\t\t\t</Page.ScrollableContentWithShadow>\n\t\t\t</Page>\n\t\t);\n\t}\n\n\tconst handleClickDownloadInfo = (): void => {\n\t\tdownloadJsonAs(statisticsQuery.data, 'statistics');\n\t};\n\n\treturn (\n\t\t<WorkspacePage\n\t\t\tcanViewStatistics={canViewStatistics}\n\t\t\tserverInfo={serverInfoQuery.data}\n\t\t\tstatistics={statisticsQuery.data}\n\t\t\tstatisticsIsLoading={statisticsQuery.isLoading}\n\t\t\tinstances={instancesQuery.data}\n\t\t\tonClickRefreshButton={handleClickRefreshButton}\n\t\t\tonClickDownloadInfo={handleClickDownloadInfo}\n\t\t/>\n\t);\n};\n\nexport default memo(WorkspaceRoute);\n",null],"names":["Callout","ButtonGroup","Button","usePermission","useTranslation","React","memo","useState","Page","PageSkeleton","useWorkspaceInfo","downloadJsonAs","NotAuthorizedPage","WorkspacePage","module","link","v","default","exportDefault","t","canViewStatistics","refreshStatistics","setRefreshStatistics","serverInfoQuery","instancesQuery","statisticsQuery","createElement","isLoading","handleClickRefreshButton","refetch","isError","Header","title","icon","primary","type","onClick","loading","ScrollableContentWithShadow","serverInfo","data","statistics","statisticsIsLoading","instances","onClickRefreshButton","onClickDownloadInfo"],"mappings":"2BAAAA,EAASC,EAASC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtCC,EAAMC,IAAE,CAAA,wBAAM,CAAuBf,QAACgB,CAAA,EAAAhB,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAX,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,QAAAA,CAAAA,EAAAZ,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAG,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAG,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAJ,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAG,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAG,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAArEC,EAAOI,aAAW,CAkEHZ,EAtDQ,KACtB,IAAMa,EAAIf,IACJgB,EAAoBjB,EAAc,mBAElC,CAACkB,EAAmBC,EAAqB,CAAGf,EAAS,CAAA,GACrD,CAACgB,EAAiBC,EAAgBC,EAAgB,CAAGf,EAAiB,CAAEW,kBAAAA,CAAiB,GAE/F,GAAI,CAACD,EACJ,OAAOf,EAAAqB,aAAA,CAACd,EAAiB,MAG1B,GAAIW,EAAgBI,SAAS,EAAIH,EAAeG,SAAS,EAAIF,EAAgBE,SAAS,CACrF,OAAOtB,EAAAqB,aAAA,CAACjB,EAAY,MAGrB,IAAMmB,EAA2B,UAChCN,EAAqB,CAAA,GACrBG,EAAgBI,OAAO,EACxB,SAEA,AAAIN,EAAgBO,OAAO,EAAIN,EAAeM,OAAO,EAAIL,EAAgBK,OAAO,CAE9EzB,EAAAqB,aAAA,CAAClB,EAAI,KACJH,EAAAqB,aAAA,CAAClB,EAAKuB,MAAM,CAAA,CAACC,MAAOb,EAAE,YAAa,EAClCd,EAAAqB,aAAA,CAACzB,EAAW,KACXI,EAAAqB,aAAA,CAACxB,EAAM,CAAC+B,KAAK,SAASC,QAAO,CAAA,EAACC,KAAK,SAASC,QAASR,EAA0BS,QAASZ,EAAgBE,SAAAA,AAAU,EAChHR,EAAE,cAINd,EAAAqB,aAAA,CAAClB,EAAK8B,2BAA2B,CAAA,KAChCjC,EAAAqB,aAAA,CAAC1B,EAAO,CAACmC,KAAK,QAAQ,EAAEhB,EAAE,0BAW7Bd,EAAAqB,aAAA,CAACb,EAAa,CACbO,kBAAmBA,EACnBmB,WAAYhB,EAAgBiB,IAAK,CACjCC,WAAYhB,EAAgBe,IAAK,CACjCE,oBAAqBjB,EAAgBE,SAAU,CAC/CgB,UAAWnB,EAAegB,IAAK,CAC/BI,qBAAsBhB,EACtBiB,oBAZ8B,KAC/BlC,EAAec,EAAgBe,IAAI,CAAE,aACtC,CAU+C,EAGhD"}