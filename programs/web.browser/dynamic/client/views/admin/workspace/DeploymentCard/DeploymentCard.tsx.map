)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/DeploymentCard/DeploymentCard.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWorkspaceInfo, IStats } from '@rocket.chat/core-typings';\nimport { ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { IInstance } from '@rocket.chat/rest-typings';\nimport { Card, CardBody, CardCol, CardColSection, CardColTitle, CardFooter } from '@rocket.chat/ui-client';\nimport { useSetModal, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\n\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport InstancesModal from './components/InstancesModal';\n\ntype DeploymentCardProps = {\n\tserverInfo: IWorkspaceInfo;\n\tinstances: IInstance[];\n\tstatistics: IStats;\n};\n\nconst DeploymentCard = ({ serverInfo: { info }, statistics, instances }: DeploymentCardProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst setModal = useSetModal();\n\n\tconst { commit = {}, marketplaceApiVersion: appsEngineVersion } = info || {};\n\n\tconst handleInstancesModal = useMutableCallback(() => {\n\t\tsetModal(<InstancesModal instances={instances} onClose={(): void => setModal()} />);\n\t});\n\n\treturn (\n\t\t<Card data-qa-id='deployment-card'>\n\t\t\t<CardBody>\n\t\t\t\t<CardCol>\n\t\t\t\t\t<CardColTitle>{t('Deployment')}</CardColTitle>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Version')}</CardColTitle>\n\t\t\t\t\t\t{statistics.version}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Deployment_ID')}</CardColTitle>\n\t\t\t\t\t\t{statistics.uniqueId}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t{appsEngineVersion && (\n\t\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t\t<CardColTitle>{t('Apps_Engine_Version')}</CardColTitle>\n\t\t\t\t\t\t\t{appsEngineVersion}\n\t\t\t\t\t\t</CardColSection>\n\t\t\t\t\t)}\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Node_version')}</CardColTitle>\n\t\t\t\t\t\t{statistics.process.nodeVersion}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('DB_Migration')}</CardColTitle>\n\t\t\t\t\t\t{`${statistics.migration.version} (${formatDateAndTime(statistics.migration.lockedAt)})`}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('MongoDB')}</CardColTitle>\n\t\t\t\t\t\t{`${statistics.mongoVersion} / ${statistics.mongoStorageEngine} ${\n\t\t\t\t\t\t\t!statistics.msEnabled ? `(oplog ${statistics.oplogEnabled ? t('Enabled') : t('Disabled')})` : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('Commit_details')}</CardColTitle>\n\t\t\t\t\t\t{t('github_HEAD')}: ({commit.hash ? commit.hash.slice(0, 9) : ''}) <br />\n\t\t\t\t\t\t{t('Branch')}: {commit.branch} <br />\n\t\t\t\t\t\t{commit.subject}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t\t<CardColSection>\n\t\t\t\t\t\t<CardColTitle>{t('PID')}</CardColTitle>\n\t\t\t\t\t\t{statistics.process.pid}\n\t\t\t\t\t</CardColSection>\n\t\t\t\t</CardCol>\n\t\t\t</CardBody>\n\n\t\t\t{!!instances.length && (\n\t\t\t\t<CardFooter>\n\t\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t\t<Button small onClick={handleInstancesModal}>\n\t\t\t\t\t\t\t{t('Instances')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</CardFooter>\n\t\t\t)}\n\t\t</Card>\n\t);\n};\n\nexport default memo(DeploymentCard);\n",null],"names":["ButtonGroup","Button","useMutableCallback","Card","CardBody","CardCol","CardColSection","CardColTitle","CardFooter","useSetModal","useTranslation","React","memo","useFormatDateAndTime","InstancesModal","module","link","default","exportDefault","_ref","serverInfo","info","statistics","instances","t","formatDateAndTime","setModal","commit","marketplaceApiVersion","appsEngineVersion","handleInstancesModal","createElement","onClose","version","uniqueId","process","nodeVersion","concat","migration","lockedAt","mongoVersion","mongoStorageEngine","msEnabled","oplogEnabled","hash","slice","branch","subject","pid","length","align","small","onClick"],"mappings":"2BACAA,EAASC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtCC,EAAQC,IAAAA,CAAAA,wBAA6B,CAAChB,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAc,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAb,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAZ,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yCAAAA,CAAAF,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAA5DC,EAAOG,aAAa,CAuFLN,EAtEQO,IAAuF,GAAtF,CAAEC,WAAY,CAAEC,KAAAA,CAAAA,CAAM,CAAEC,WAAAA,CAAU,CAAEC,UAAAA,CAAAA,CAAgC,CAAAJ,EACrFK,EAAId,IACJe,EAAoBZ,IACpBa,EAAWjB,IAEX,CAAEkB,OAAAA,EAAS,CAAA,CAAE,CAAEC,sBAAuBC,CAAAA,CAAmB,CAAGR,GAAQ,CAAA,EAEpES,EAAuB5B,EAAmB,KAC/CwB,EAASf,EAAAoB,aAAA,CAACjB,EAAc,CAACS,UAAWA,EAAWS,QAAS,IAAYN,GAAW,GAChF,GAEA,OACCf,EAAAoB,aAAA,CAAC5B,EAAI,CAAC,aAAW,iBAAiB,EACjCQ,EAAAoB,aAAA,CAAC3B,EAAQ,KACRO,EAAAoB,aAAA,CAAC1B,EAAO,KACPM,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,eACjBb,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,YAChBF,EAAWW,OAAO,EAEpBtB,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,kBAChBF,EAAWY,QAAQ,EAEpBL,GACAlB,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,wBAChBK,GAGHlB,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,iBAChBF,EAAWa,OAAO,CAACC,WAAW,EAEhCzB,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,iBACjB,GAAAa,MAAA,CAAIf,EAAWgB,SAAS,CAACL,OAAO,CAAA,MAAAI,MAAA,CAAKZ,EAAkBH,EAAWgB,SAAS,CAACC,QAAQ,EAAC,MAEtF5B,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,YACjB,GAAAa,MAAA,CAAIf,EAAWkB,YAAY,CAAA,OAAAH,MAAA,CAAMf,EAAWmB,kBAAkB,CAAA,KAAAJ,MAAA,CAC7D,AAACf,EAAWoB,SAAS,CAAyE,GAAzE,UAAAL,MAAA,CAAuCb,EAAE,AAA5BF,EAAWqB,YAAY,CAAK,UAAe,YAAW,OAG1FhC,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,mBAChBA,EAAE,eAAe,MAAIG,EAAOiB,IAAI,CAAGjB,EAAOiB,IAAI,CAACC,KAAK,CAAC,EAAG,GAAK,GAAG,KAAElC,EAAAoB,aAAA,CAAA,KAAA,MAClEP,EAAE,UAAU,KAAGG,EAAOmB,MAAM,CAAE,IAAAnC,EAAAoB,aAAA,CAAA,KAAA,MAC9BJ,EAAOoB,OAAO,EAEhBpC,EAAAoB,aAAA,CAACzB,EAAc,KACdK,EAAAoB,aAAA,CAACxB,EAAY,KAAEiB,EAAE,QAChBF,EAAWa,OAAO,CAACa,GAAG,IAKzB,CAAC,CAACzB,EAAU0B,MAAM,EAClBtC,EAAAoB,aAAA,CAACvB,EAAU,KACVG,EAAAoB,aAAA,CAAC/B,EAAW,CAACkD,MAAM,KAAK,EACvBvC,EAAAoB,aAAA,CAAC9B,EAAM,CAACkD,MAAK,CAAA,EAACC,QAAStB,CAAqB,EAC1CN,EAAE,gBAOV"}