)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/VersionCard/modals/RegisterWorkspaceTokenModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button, ButtonGroup, Field, FieldLabel, FieldRow, FieldError, Modal, TextInput } from '@rocket.chat/fuselage';\nimport { useMethod, useSetModal, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ChangeEvent } from 'react';\nimport React, { useState } from 'react';\nimport { Trans } from 'react-i18next';\n\nimport WorkspaceRegistrationModal from './RegisterWorkspaceModal';\n\ntype RegisterWorkspaceTokenModalProps = {\n\tonClose: () => void;\n\tonStatusChange?: () => void;\n};\n\nconst RegisterWorkspaceTokenModal = ({ onClose, onStatusChange, ...props }: RegisterWorkspaceTokenModalProps) => {\n\tconst setModal = useSetModal();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst connectWorkspace = useMethod('cloud:connectWorkspace');\n\n\tconst [token, setToken] = useState('');\n\tconst [processing, setProcessing] = useState(false);\n\tconst [error, setError] = useState(false);\n\n\tconst handleBackAction = (): void => {\n\t\tconst handleModalClose = (): void => setModal(null);\n\t\tsetModal(<WorkspaceRegistrationModal onClose={handleModalClose} />);\n\t};\n\n\tconst handleTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\n\t\tsetToken(event.target.value);\n\t};\n\n\tconst isToken = token.length > 0;\n\n\tconst handleConnectButtonClick = async (): Promise<void> => {\n\t\tsetProcessing(true);\n\t\tsetError(false);\n\n\t\ttry {\n\t\t\tconst isConnected = await connectWorkspace(token);\n\n\t\t\tif (!isConnected) {\n\t\t\t\tthrow Error(t('RegisterWorkspace_Connection_Error'));\n\t\t\t}\n\n\t\t\tsetModal(null);\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Connected') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\tsetError(true);\n\t\t} finally {\n\t\t\tawait (onStatusChange && onStatusChange());\n\t\t\tsetProcessing(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.HeaderText>\n\t\t\t\t\t<Modal.Title>{t('RegisterWorkspace_Token_Title')}</Modal.Title>\n\t\t\t\t</Modal.HeaderText>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<Box is='p'>\n\t\t\t\t\t<Trans i18nKey='RegisterWorkspace_Token_Step_One'>\n\t\t\t\t\t\t1. Go to:{' '}\n\t\t\t\t\t\t<Box is='span' fontWeight={600}>\n\t\t\t\t\t\t\tcloud.rocket.chat {'>'} Workspaces\n\t\t\t\t\t\t</Box>{' '}\n\t\t\t\t\t\tand click{' '}\n\t\t\t\t\t\t<Box is='span' fontWeight={600}>\n\t\t\t\t\t\t\t\"Register self-managed\"\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Box>\n\t\t\t\t<Box is='p' fontSize='p2'>{`2. ${t('RegisterWorkspace_Token_Step_Two')}`}</Box>\n\t\t\t\t<Field pbs={10}>\n\t\t\t\t\t<FieldLabel>{t('Registration_Token')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput onChange={handleTokenChange} value={token} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{error && <FieldError>{t('Token_Not_Recognized')}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={handleBackAction}>{t('Back')}</Button>\n\t\t\t\t\t<Button primary disabled={!isToken} loading={processing} onClick={handleConnectButtonClick}>\n\t\t\t\t\t\t{t('Next')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default RegisterWorkspaceTokenModal;\n",null],"names":["_objectWithoutProperties","Box","Button","ButtonGroup","Field","FieldLabel","FieldRow","FieldError","Modal","useMethod","useSetModal","useToastMessageDispatch","useTranslation","React","useState","Trans","WorkspaceRegistrationModal","module","link","default","v","TextInput","exportDefault","_ref","onClose","onStatusChange","props","_excluded","setModal","t","dispatchToastMessage","connectWorkspace","token","setToken","processing","setProcessing","error","setError","isToken","length","handleConnectButtonClick","isConnected","Error","type","message","createElement","Header","HeaderText","Title","Close","onClick","Content","is","i18nKey","fontWeight","fontSize","concat","pbs","onChange","event","target","value","Footer","align","primary","disabled","loading"],"mappings":"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"}