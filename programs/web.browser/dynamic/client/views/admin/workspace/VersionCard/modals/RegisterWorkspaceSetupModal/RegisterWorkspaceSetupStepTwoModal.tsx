function module(e,t,l){let n,a,c,i,r,s,o,u,m,d,p,E,f,k;let _=["email","step","setStep","onClose","intentData","onSuccess"];l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},0),l.link("@rocket.chat/fuselage",{Modal(e){a=e},Box(e){c=e},Field(e){i=e},FieldLabel(e){r=e},FieldRow(e){s=e},TextInput(e){o=e}},0),l.link("@rocket.chat/ui-contexts",{useEndpoint(e){u=e},useToastMessageDispatch(e){m=e},useTranslation(e){d=e}},1),l.link("react",{default(e){p=e},useCallback(e){E=e},useEffect(e){f=e}},2),l.link("react-i18next",{Trans(e){k=e}},3);let g=e=>e?1e3*e:0;l.exportDefault(e=>{let{email:t,step:l,setStep:S,onClose:y,intentData:v,onSuccess:C}=e,b=n(e,_),h=d(),T=m(),x=u("GET","/v1/cloud.confirmationPoll"),w=u("POST","/v1/cloud.createRegistrationIntent"),R=async()=>{try{await w({resend:!0,email:t}),T({type:"success",message:h("Email_sent")})}catch(e){T({type:"error",message:e})}},W=E(async()=>{try{let{pollData:e}=await x({deviceCode:v.device_code});"successful"in e&&e.successful&&(T({type:"success",message:h("Workspace_registered")}),C())}catch(e){console.log(e)}},[x,v.device_code,T,h]);return f(()=>{let e=setInterval(()=>W(),g(v.interval));return()=>clearInterval(e)},[W,v]),p.createElement(a,b,p.createElement(a.Header,null,p.createElement(a.HeaderText,null,p.createElement(a.Tagline,null,h("RegisterWorkspace_Setup_Steps",{step:l,numberOfSteps:2})),p.createElement(a.Title,null,h("Awaiting_confirmation"))),p.createElement(a.Close,{onClick:y})),p.createElement(a.Content,null,p.createElement(c,{fontSize:"p2"},p.createElement(c,null,p.createElement(k,{i18nKey:"RegisterWorkspace_Setup_Email_Confirmation"},p.createElement(c,{is:"p"},"Email sent to"," ",p.createElement(c,{is:"span",fontScale:"p2b"},t," "),"with a confirmation link."))),p.createElement(c,{is:"p"},h("RegisterWorkspace_Setup_Email_Verification")),p.createElement(i,{pbs:10},p.createElement(r,null,h("Security_code")),p.createElement(s,null,p.createElement(o,{defaultValue:v.user_code,disabled:!0}))))),p.createElement(a.Footer,null,p.createElement(c,{is:"div",display:"flex",justifyContent:"start",fontSize:"c1",w:"full"},"Didnâ€™t receive email?"," ",p.createElement(c,{is:"a",pi:4,onClick:R},"Resend")," ","or"," ",p.createElement(c,{is:"a",pi:4,onClick:()=>S(l-1)},"change email"))))})}
//# sourceMappingURL=/dynamic/client/views/admin/workspace/VersionCard/modals/RegisterWorkspaceSetupModal/6891a43741735aa5cffa6054f2e51bb75a32dcb4.map
