)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/workspace/WorkspacePage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWorkspaceInfo, IStats } from '@rocket.chat/core-typings';\nimport { Box, Button, ButtonGroup, Callout, Grid } from '@rocket.chat/fuselage';\nimport type { IInstance } from '@rocket.chat/rest-typings';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { memo } from 'react';\n\nimport Page from '../../../components/Page';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport DeploymentCard from './DeploymentCard/DeploymentCard';\nimport MessagesRoomsCard from './MessagesRoomsCard/MessagesRoomsCard';\nimport UsersUploadsCard from './UsersUploadsCard/UsersUploadsCard';\nimport VersionCard from './VersionCard/VersionCard';\n\ntype WorkspaceStatusPageProps = {\n\tcanViewStatistics: boolean;\n\tserverInfo: IWorkspaceInfo;\n\tstatistics: IStats;\n\tstatisticsIsLoading: boolean;\n\tinstances: IInstance[];\n\tonClickRefreshButton: () => void;\n\tonClickDownloadInfo: () => void;\n};\n\nconst WorkspacePage = ({\n\tcanViewStatistics,\n\tserverInfo,\n\tstatistics,\n\tstatisticsIsLoading,\n\tinstances,\n\tonClickRefreshButton,\n\tonClickDownloadInfo,\n}: WorkspaceStatusPageProps) => {\n\tconst t = useTranslation();\n\n\tconst { data } = useIsEnterprise();\n\n\tconst warningMultipleInstances = !data?.isEnterprise && !statistics?.msEnabled && statistics?.instanceCount > 1;\n\tconst alertOplogForMultipleInstances = warningMultipleInstances && !statistics.oplogEnabled;\n\n\treturn (\n\t\t<Page bg='tint'>\n\t\t\t<Page.Header title={t('Workspace')}>\n\t\t\t\t{canViewStatistics && (\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button onClick={onClickDownloadInfo}>{t('Download_Info')}</Button>\n\t\t\t\t\t\t<Button onClick={onClickRefreshButton} loading={statisticsIsLoading}>\n\t\t\t\t\t\t\t{t('Refresh')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t</Page.Header>\n\n\t\t\t<Page.ScrollableContentWithShadow p={16}>\n\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' color='default'>\n\t\t\t\t\t{warningMultipleInstances && (\n\t\t\t\t\t\t<Callout type='warning' title={t('Multiple_monolith_instances_alert')} marginBlockEnd={16}></Callout>\n\t\t\t\t\t)}\n\t\t\t\t\t{alertOplogForMultipleInstances && (\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\ttype='danger'\n\t\t\t\t\t\t\ttitle={t('Error_RocketChat_requires_oplog_tailing_when_running_in_multiple_instances')}\n\t\t\t\t\t\t\tmarginBlockEnd={16}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box withRichContent>\n\t\t\t\t\t\t\t\t<p>{t('Error_RocketChat_requires_oplog_tailing_when_running_in_multiple_instances_details')}</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\n\t\t\t\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t'https://rocket.chat/docs/installation/manual-installation/multiple-instances-to-improve-' +\n\t\t\t\t\t\t\t\t\t\t\t'performance/#running-multiple-instances-per-host-to-improve-performance'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{t('Click_here_for_more_info')}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Grid m={0}>\n\t\t\t\t\t\t<Grid.Item lg={12} xs={4} p={8}>\n\t\t\t\t\t\t\t<VersionCard serverInfo={serverInfo} />\n\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t<DeploymentCard serverInfo={serverInfo} statistics={statistics} instances={instances} />\n\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t<UsersUploadsCard statistics={statistics} />\n\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t<MessagesRoomsCard statistics={statistics} />\n\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default memo(WorkspacePage);\n",null],"names":["Box","Button","ButtonGroup","Callout","Grid","useTranslation","React","memo","Page","useIsEnterprise","DeploymentCard","MessagesRoomsCard","UsersUploadsCard","VersionCard","module","link","v","default","exportDefault","_ref","canViewStatistics","serverInfo","statistics","statisticsIsLoading","instances","onClickRefreshButton","onClickDownloadInfo","t","data","warningMultipleInstances","isEnterprise","msEnabled","instanceCount","alertOplogForMultipleInstances","oplogEnabled","createElement","bg","Header","title","onClick","loading","ScrollableContentWithShadow","p","marginBlock","marginInline","width","color","type","marginBlockEnd","withRichContent","rel","target","href","m","Item","lg","xs"],"mappings":"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"}