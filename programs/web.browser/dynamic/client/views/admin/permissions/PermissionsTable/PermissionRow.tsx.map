)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/permissions/PermissionsTable/PermissionRow.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRole, IPermission } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, memo } from 'react';\n\nimport { CONSTANTS } from '../../../../../app/authorization/lib';\nimport { GenericTableRow, GenericTableCell } from '../../../../components/GenericTable';\nimport { useChangeRole } from '../hooks/useChangeRole';\nimport RoleCell from './RoleCell';\n\nconst getName = (t: ReturnType<typeof useTranslation>, permission: IPermission): string => {\n\tif (permission.level === CONSTANTS.SETTINGS_LEVEL) {\n\t\tlet path = '';\n\t\tif (permission.group) {\n\t\t\tpath = `${t(permission.group as TranslationKey)} > `;\n\t\t}\n\t\tif (permission.section) {\n\t\t\tpath = `${path}${t(permission.section as TranslationKey)} > `;\n\t\t}\n\t\treturn `${path}${t(permission.settingId as TranslationKey)}`;\n\t}\n\n\treturn t(permission._id as TranslationKey);\n};\n\ntype PermissionRowProps = {\n\tpermission: IPermission;\n\troleList: IRole[];\n\tonGrant: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\n\tonRemove: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\n};\n\nconst PermissionRow = ({ permission, roleList, onGrant, onRemove }: PermissionRowProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { _id, roles } = permission;\n\tconst [hovered, setHovered] = useState(false);\n\tconst changeRole = useChangeRole({ onGrant, onRemove, permissionId: _id });\n\n\tconst onMouseEnter = useMutableCallback(() => setHovered(true));\n\tconst onMouseLeave = useMutableCallback(() => setHovered(false));\n\n\treturn (\n\t\t<GenericTableRow key={_id} role='link' action tabIndex={0} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n\t\t\t<GenericTableCell maxWidth='x300' withTruncatedText title={t(`${_id}_description` as TranslationKey)}>\n\t\t\t\t{getName(t, permission)}\n\t\t\t</GenericTableCell>\n\t\t\t{roleList.map(({ _id, name, description }) => (\n\t\t\t\t<RoleCell\n\t\t\t\t\tkey={_id}\n\t\t\t\t\t_id={_id}\n\t\t\t\t\tname={name}\n\t\t\t\t\tdescription={description}\n\t\t\t\t\tgrantedRoles={roles}\n\t\t\t\t\tonChange={changeRole}\n\t\t\t\t\tlineHovered={hovered}\n\t\t\t\t\tpermissionId={_id}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</GenericTableRow>\n\t);\n};\n\nexport default memo(PermissionRow);\n",null],"names":["useMutableCallback","useTranslation","React","useState","memo","CONSTANTS","GenericTableRow","GenericTableCell","useChangeRole","RoleCell","module","link","default","getName","t","permission","level","SETTINGS_LEVEL","path","group","concat","section","settingId","_id","exportDefault","_ref","roleList","onGrant","onRemove","roles","hovered","setHovered","changeRole","permissionId","onMouseEnter","onMouseLeave","createElement","key","role","action","tabIndex","maxWidth","withTruncatedText","title","map","_ref2","name","description","grantedRoles","onChange","lineHovered"],"mappings":"2BACAA,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAoBC,IAAA,CAAM,8BAA8B,CAAAX,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAL,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAJ,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAF,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,aAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAWjE,IAAMI,EAAU,CAACC,EAAsCC,KACtD,GAAIA,EAAWC,KAAK,GAAKX,EAAUY,cAAc,CAAE,CAClD,IAAIC,EAAO,GAOX,OANIH,EAAWI,KAAK,EACnBD,CAAAA,EAAI,GAAAE,MAAA,CAAMN,EAAEC,EAAWI,KAAuB,EAAC,MAAA,EAE5CJ,EAAWM,OAAO,EACrBH,CAAAA,EAAI,GAAAE,MAAA,CAAMF,GAAIE,MAAA,CAAGN,EAAEC,EAAWM,OAAyB,EAAC,MAAA,EAEzD,GAAAD,MAAA,CAAUF,GAAIE,MAAA,CAAGN,EAAEC,EAAWO,SAA2B,GAG1D,OAAOR,EAAEC,EAAWQ,GAAqB,CAC1C,EAxBAb,EAAOc,aAAE,CA+DMpB,EA9BOqB,IAAkF,GAAjF,CAAEV,WAAAA,CAAU,CAAEW,SAAAA,CAAQ,CAAEC,QAAAA,CAAO,CAAEC,SAAAA,CAAAA,CAA8B,CAAAH,EAC/EX,EAAIb,IACJ,CAAEsB,IAAAA,CAAG,CAAEM,MAAAA,CAAAA,CAAO,CAAGd,EACjB,CAACe,EAASC,EAAW,CAAG5B,EAAS,CAAA,GACjC6B,EAAaxB,EAAc,CAAEmB,QAAAA,EAASC,SAAAA,EAAUK,aAAcV,CAAG,GAEjEW,EAAelC,EAAmB,IAAM+B,EAAW,CAAA,IACnDI,EAAenC,EAAmB,IAAM+B,EAAW,CAAA,IAEzD,OACC7B,EAAAkC,aAAA,CAAC9B,EAAe,CAAC+B,IAAKd,EAAKe,KAAK,OAAOC,OAAM,CAAA,EAACC,SAAU,EAAGN,aAAcA,EAAcC,aAAcA,CAAa,EACjHjC,EAAAkC,aAAA,CAAC7B,EAAgB,CAACkC,SAAS,OAAOC,kBAAiB,CAAA,EAACC,MAAO7B,EAAC,GAAAM,MAAA,CAAIG,EAAG,gBAAkC,EACnGV,EAAQC,EAAGC,IAEZW,EAASkB,GAAG,CAACC,IAAA,GAAC,CAAEtB,IAAAA,CAAG,CAAEuB,KAAAA,CAAI,CAAEC,YAAAA,CAAAA,CAAa,CAAAF,EAAA,OACxC3C,EAAAkC,aAAA,CAAC3B,EAAQ,CACR4B,IAAKd,EACLA,IAAKA,EACLuB,KAAMA,EACNC,YAAaA,EACbC,aAAcnB,EACdoB,SAAUjB,EACVkB,YAAapB,EACbG,aAAcV,CAAI,EACjB,GAIN"}