function module(e,t,l){let n,a,r,o,s,i,c,u,d,m,p,f,k,v,_,g,y;l.link("@rocket.chat/fuselage",{Box(e){n=e},ButtonGroup(e){a=e},Button(e){r=e},Margins(e){o=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){s=e}},1),l.link("@rocket.chat/ui-contexts",{useSetModal(e){i=e},useToastMessageDispatch(e){c=e},useRoute(e){u=e},useEndpoint(e){d=e},useTranslation(e){m=e}},2),l.link("react",{default(e){p=e}},3),l.link("react-hook-form",{FormProvider(e){f=e},useForm(e){k=e}},4),l.link("../../../components/Contextualbar",{ContextualbarFooter(e){v=e},ContextualbarScrollableContent(e){_=e}},5),l.link("../../../components/GenericModal",{default(e){g=e}},6),l.link("./RoleForm",{default(e){y=e}},7),l.exportDefault(e=>{let{role:t,isEnterprise:l}=e,h=m(),E=c(),b=i(),C=u("admin-permissions"),S=u("admin-permissions"),x=d("POST","/v1/roles.create"),D=d("POST","/v1/roles.update"),T=d("POST","/v1/roles.delete"),F=k({defaultValues:{roleId:null==t?void 0:t._id,name:null==t?void 0:t.name,description:null==t?void 0:t.description,scope:(null==t?void 0:t.scope)||"Users",mandatory2fa:!!(null!=t&&t.mandatory2fa)}}),M=s(()=>{null!=t&&t._id&&C.push({context:"users-in-role",_id:t._id})}),P=s(async e=>{try{if(e.roleId)return await D(e),E({type:"success",message:h("Saved")}),S.push({});await x(e),E({type:"success",message:h("Saved")}),S.push({})}catch(e){E({type:"error",message:e})}}),R=s(async()=>{if(!(null!=t&&t._id))return;let e=async()=>{try{await T({roleId:t._id}),E({type:"success",message:h("Role_removed")}),b(),S.push({})}catch(e){E({type:"error",message:e}),b()}},n=l?h("Delete_Role_Warning"):h("Delete_Role_Warning_Not_Enterprise");b(p.createElement(g,{variant:"danger",onConfirm:e,onClose:()=>b(),onCancel:()=>b(),confirmText:h("Delete")},n))});return p.createElement(p.Fragment,null,p.createElement(_,null,p.createElement(n,{w:"full",alignSelf:"center",mb:"neg-x8"},p.createElement(o,{block:8},p.createElement(f,F,p.createElement(y,{editing:!!(null==t?void 0:t._id),isProtected:null==t?void 0:t.protected,isDisabled:!l}))))),p.createElement(v,null,p.createElement(a,{vertical:!0,stretch:!0},p.createElement(r,{primary:!0,disabled:!F.formState.isDirty||!l,onClick:F.handleSubmit(P)},h("Save")),!(null!=t&&t.protected)&&(null==t?void 0:t._id)&&p.createElement(r,{secondary:!0,danger:!0,onClick:R},h("Delete")),(null==t?void 0:t._id)&&p.createElement(r,{onClick:M},h("Users_in_role")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/permissions/2d891ba75b0a02c331af0d8dfae9e71786125053.map
