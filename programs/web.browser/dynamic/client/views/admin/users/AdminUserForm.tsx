function module(e,t,l){let r,n,a,i,o,s,d,c,m,u,E,v,f,_,h,g,p,b,x,w,y,k,C,T,F,S,G,q,I,M,P,A,U,D,R,j,L,N,z,B,H,O,V,W;let X=["userData","onReload"],Q=["avatar"];l.link("@babel/runtime/helpers/extends",{default(e){r=e}},0),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),l.link("@rocket.chat/fuselage",{Field(e){a=e},FieldLabel(e){i=e},FieldRow(e){o=e},FieldError(e){s=e},FieldHint(e){d=e},TextInput(e){c=e},TextAreaInput(e){m=e},PasswordInput(e){u=e},MultiSelectFiltered(e){E=e},Box(e){v=e},ToggleSwitch(e){f=e},Icon(e){_=e},Divider(e){h=e},FieldGroup(e){g=e},ContextualbarFooter(e){p=e},ButtonGroup(e){b=e},Button(e){x=e},Callout(e){w=e}},0),l.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){y=e},useMutableCallback(e){k=e}},1),l.link("@rocket.chat/ui-client",{CustomFieldsForm(e){C=e}},2),l.link("@rocket.chat/ui-contexts",{useAccountsCustomFields(e){T=e},useSetting(e){F=e},useEndpoint(e){S=e},useRouter(e){G=e},useToastMessageDispatch(e){q=e},useTranslation(e){I=e}},3),l.link("@tanstack/react-query",{useQuery(e){M=e},useMutation(e){P=e}},4),l.link("react",{default(e){A=e},useCallback(e){U=e}},5),l.link("react-hook-form",{Controller(e){D=e},useForm(e){R=e}},6),l.link("../../../../lib/emailValidator",{validateEmail(e){j=e}},7),l.link("../../../../lib/utils/parseCSV",{parseCSV(e){L=e}},8),l.link("../../../components/Contextualbar",{ContextualbarScrollableContent(e){N=e}},9),l.link("../../../components/avatar/UserAvatarEditor",{default(e){z=e}},10),l.link("../../../hooks/useEndpointAction",{useEndpointAction(e){B=e}},11),l.link("../../../hooks/useUpdateAvatar",{useUpdateAvatar(e){H=e}},12),l.link("../../../lib/constants",{USER_STATUS_TEXT_MAX_LENGTH(e){O=e},BIO_TEXT_MAX_LENGTH(e){V=e}},13),l.link("./hooks/useSmtpQuery",{useSmtpQuery(e){W=e}},14);let J=e=>{var t,l,r,n,a,i,o,s,d;let{data:c,defaultUserRoles:m,isSmtpEnabled:u}=e;return{roles:null!==(t=null==c?void 0:c.roles)&&void 0!==t?t:m,name:null!==(l=null==c?void 0:c.name)&&void 0!==l?l:"",password:"",username:null!==(r=null==c?void 0:c.username)&&void 0!==r?r:"",bio:null!==(n=null==c?void 0:c.bio)&&void 0!==n?n:"",nickname:null!==(a=null==c?void 0:c.nickname)&&void 0!==a?a:"",email:(null==c?void 0:null===(i=c.emails)||void 0===i?void 0:i.length)&&c.emails[0].address||"",verified:(null==c?void 0:null===(o=c.emails)||void 0===o?void 0:o.length)&&c.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:(null==c?void 0:c.requirePasswordChange)||!1,customFields:null!==(s=null==c?void 0:c.customFields)&&void 0!==s?s:{},statusText:null!==(d=null==c?void 0:c.statusText)&&void 0!==d?d:"",joinDefaultChannels:!0,sendWelcomeEmail:u,avatar:""}};l.exportDefault(e=>{let{userData:t,onReload:l}=e,K=n(e,X),Y=I(),Z=G(),$=q(),ee=T(),et=F("Accounts_Registration_Users_Default_Roles")||"",el=L(et),{data:er}=W(),en=null==er?void 0:er.isSMTPConfigured,ea=B("POST","/v1/statistics.telemetry"),ei=S("POST","/v1/users.update"),eo=S("POST","/v1/users.create"),es=S("GET","/v1/roles.list"),{data:ed,error:ec}=M(["roles"],async()=>es()),em=(null==ed?void 0:ed.roles.map(e=>{let{_id:t,name:l,description:r}=e;return[t,r||l]}))||[],eu=U(e=>Z.navigate("/admin/users/info/".concat(e)),[Z]),{control:eE,watch:ev,handleSubmit:ef,reset:e_,formState:{errors:eh,isDirty:eg}}=R({defaultValues:J({data:t,defaultUserRoles:el,isSmtpEnabled:en}),mode:"onBlur"}),{avatar:ep,username:eb,setRandomPassword:ex}=ev(),ew=H(ep,(null==t?void 0:t._id)||""),ey=P({mutationFn:ei,onSuccess:async e=>{let{user:{_id:t}}=e;$({type:"success",message:Y("User_updated_successfully")}),await ew(),Z.navigate("/admin/users/info/".concat(t)),l()},onError:e=>{$({type:"error",message:e})}}),ek=P({mutationFn:eo,onSuccess:async e=>{$({type:"success",message:Y("User_created_successfully!")}),await ea({params:[{eventName:"updateCounter",settingsId:"Manual_Entry_User_Count"}]}),eu(e.user._id),l()},onError:e=>{$({type:"error",message:e})}}),eC=k(async e=>{let{avatar:l}=e,r=n(e,Q);return null!=t&&t._id?ey.mutateAsync({userId:null==t?void 0:t._id,data:r}):ek.mutateAsync(r)}),eT=y(),eF=y(),eS=y(),eG=y(),eq=y(),eI=y(),eM=y(),eP=y(),eA=y(),eU=y(),eD=y(),eR=y(),ej=y();return A.createElement(A.Fragment,null,A.createElement(N,K,A.createElement(g,null,(null==t?void 0:t._id)&&A.createElement(a,null,A.createElement(D,{name:"avatar",control:eE,render:e=>{let{field:{onChange:l}}=e;return A.createElement(z,{currentUsername:null==t?void 0:t.username,username:eb,etag:null==t?void 0:t.avatarETag,setAvatarObj:l})}})),A.createElement(a,null,A.createElement(i,{htmlFor:eT},Y("Name")),A.createElement(o,null,A.createElement(D,{control:eE,name:"name",rules:{required:Y("The_field_is_required",Y("Name"))},render:e=>{var t;let{field:l}=e;return A.createElement(c,r({},l,{id:eT,"aria-invalid":eh.name?"true":"false","aria-describedby":"".concat(eT,"-error"),error:null===(t=eh.name)||void 0===t?void 0:t.message,flexGrow:1}))}})),(null==eh?void 0:eh.name)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eT,"-error")},eh.name.message)),A.createElement(a,null,A.createElement(i,{htmlFor:eF},Y("Username")),A.createElement(o,null,A.createElement(D,{control:eE,name:"username",rules:{required:Y("The_field_is_required",Y("Username"))},render:e=>{var t;let{field:l}=e;return A.createElement(c,r({},l,{id:eF,"aria-invalid":eh.username?"true":"false","aria-describedby":"".concat(eF,"-error"),error:null===(t=eh.username)||void 0===t?void 0:t.message,flexGrow:1,addon:A.createElement(_,{name:"at",size:"x20"})}))}})),(null==eh?void 0:eh.username)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eF,"-error")},eh.username.message)),A.createElement(a,null,A.createElement(i,{htmlFor:eS},Y("Email")),A.createElement(o,null,A.createElement(D,{control:eE,name:"email",rules:{required:Y("The_field_is_required",Y("Email")),validate:e=>j(e)?void 0:Y("error-invalid-email-address")},render:e=>{var t;let{field:l}=e;return A.createElement(c,r({},l,{id:eS,"aria-invalid":eh.email?"true":"false","aria-describedby":"".concat(eS,"-error"),error:null===(t=eh.email)||void 0===t?void 0:t.message,flexGrow:1,addon:A.createElement(_,{name:"mail",size:"x20"})}))}})),(null==eh?void 0:eh.email)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eS,"-error")},eh.email.message)),A.createElement(a,null,A.createElement(v,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},A.createElement(i,{htmlFor:eG},Y("Verified")),A.createElement(o,null,A.createElement(D,{control:eE,name:"verified",render:e=>{let{field:{onChange:t,value:l}}=e;return A.createElement(f,{id:eG,checked:l,onChange:t})}})))),A.createElement(a,null,A.createElement(i,{htmlFor:eq},Y("StatusMessage")),A.createElement(o,null,A.createElement(D,{control:eE,name:"statusText",rules:{maxLength:{value:O,message:Y("Max_length_is",O)}},render:e=>{var t;let{field:l}=e;return A.createElement(c,r({},l,{id:eq,error:null==eh?void 0:null===(t=eh.statusText)||void 0===t?void 0:t.message,"aria-invalid":eh.statusText?"true":"false","aria-describedby":"".concat(eq,"-error"),flexGrow:1,addon:A.createElement(_,{name:"edit",size:"x20"})}))}})),(null==eh?void 0:eh.statusText)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eq,"-error")},eh.statusText.message)),A.createElement(a,null,A.createElement(i,{htmlFor:eI},Y("Bio")),A.createElement(o,null,A.createElement(D,{control:eE,name:"bio",rules:{maxLength:{value:V,message:Y("Max_length_is",V)}},render:e=>{var t;let{field:l}=e;return A.createElement(m,r({},l,{id:eI,rows:3,error:null==eh?void 0:null===(t=eh.bio)||void 0===t?void 0:t.message,"aria-invalid":eh.bio?"true":"false","aria-describedby":"".concat(eI,"-error"),flexGrow:1,addon:A.createElement(_,{name:"edit",size:"x20",alignSelf:"center"})}))}})),(null==eh?void 0:eh.bio)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eI,"-error")},eh.bio.message)),A.createElement(a,null,A.createElement(i,{htmlFor:eM},Y("Nickname")),A.createElement(o,null,A.createElement(D,{control:eE,name:"nickname",render:e=>{let{field:t}=e;return A.createElement(c,r({},t,{id:eM,flexGrow:1,addon:A.createElement(_,{name:"edit",size:"x20",alignSelf:"center"})}))}})))),A.createElement(g,null,!ex&&A.createElement(a,null,A.createElement(i,{htmlFor:eP},Y("Password")),A.createElement(o,null,A.createElement(D,{control:eE,name:"password",rules:{required:!(null!=t&&t._id)&&Y("The_field_is_required",Y("Password"))},render:e=>{var t;let{field:l}=e;return A.createElement(u,r({},l,{id:eP,"aria-invalid":eh.password?"true":"false","aria-describedby":"".concat(eP,"-error"),error:null===(t=eh.password)||void 0===t?void 0:t.message,flexGrow:1,addon:A.createElement(_,{name:"key",size:"x20"})}))}})),(null==eh?void 0:eh.password)&&A.createElement(s,{"aria-live":"assertive",id:"".concat(eP,"-error")},eh.password.message)),A.createElement(a,null,A.createElement(v,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},A.createElement(i,{htmlFor:eA},Y("Require_password_change")),A.createElement(o,null,A.createElement(D,{control:eE,name:"requirePasswordChange",render:e=>{let{field:{ref:t,onChange:l,value:r}}=e;return A.createElement(f,{ref:t,id:eA,disabled:ex,checked:ex||r,onChange:l})}})))),A.createElement(a,null,A.createElement(v,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},A.createElement(i,{htmlFor:eU},Y("Set_random_password_and_send_by_email")),A.createElement(o,null,A.createElement(D,{control:eE,name:"setRandomPassword",render:e=>{let{field:{ref:t,onChange:l,value:r}}=e;return A.createElement(f,{ref:t,id:eU,"aria-describedby":"".concat(eU,"-hint"),checked:r,onChange:l,disabled:!en})}}))),!en&&A.createElement(d,{id:"".concat(eU,"-hint"),dangerouslySetInnerHTML:{__html:Y("Send_Email_SMTP_Warning",{url:"admin/settings/Email"})}})),A.createElement(a,null,A.createElement(i,{htmlFor:eD},Y("Roles")),A.createElement(o,null,ec&&A.createElement(w,null,ec),!ec&&A.createElement(D,{control:eE,name:"roles",rules:{required:Y("The_field_is_required",Y("Roles"))},render:e=>{let{field:{onChange:t,value:l}}=e;return A.createElement(E,{id:eD,value:l,onChange:t,flexGrow:1,placeholder:Y("Select_an_option"),options:em})}})),(null==eh?void 0:eh.roles)&&A.createElement(s,null,eh.roles.message)),A.createElement(a,null,A.createElement(v,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},A.createElement(i,{htmlFor:eR},Y("Join_default_channels")),A.createElement(o,null,A.createElement(D,{control:eE,name:"joinDefaultChannels",render:e=>{let{field:{ref:t,onChange:l,value:r}}=e;return A.createElement(f,{id:eR,ref:t,onChange:l,checked:r})}})))),A.createElement(a,null,A.createElement(v,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1},A.createElement(i,{htmlFor:ej},Y("Send_welcome_email")),A.createElement(o,null,A.createElement(D,{control:eE,name:"sendWelcomeEmail",render:e=>{let{field:{onChange:t,value:l}}=e;return A.createElement(f,{id:ej,"aria-describedby":"".concat(ej,"-hint"),onChange:t,checked:l,disabled:!en})}}))),!en&&A.createElement(d,{id:"".concat(ej,"-hint"),dangerouslySetInnerHTML:{__html:Y("Send_Email_SMTP_Warning",{url:"admin/settings/Email"})}})),!!ee.length&&A.createElement(A.Fragment,null,A.createElement(h,null),A.createElement(v,{fontScale:"h4"},Y("Custom_Fields")),A.createElement(C,{formName:"customFields",formControl:eE,metadata:ee})))),A.createElement(p,null,A.createElement(b,{stretch:!0},A.createElement(x,{type:"reset",disabled:!eg,onClick:()=>e_(J({data:t,defaultUserRoles:el,isSmtpEnabled:en}))},Y("Reset")),A.createElement(x,{primary:!0,disabled:!eg,onClick:ef(eC)},Y("Save")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/users/9551c0688e93ca6286b7d158d370c2dd25316ec1.map
