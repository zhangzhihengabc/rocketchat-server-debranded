)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useResetE2EEKeyAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useSetModal, usePermission, useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport GenericModal from '../../../../components/GenericModal';\nimport type { Action } from '../../../hooks/useActionSpread';\n\nexport const useResetE2EEKeyAction = (userId: IUser['_id']): Action | undefined => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst canResetE2EEKey = usePermission('edit-other-user-e2ee');\n\tconst resetE2EEKeyRequest = useEndpoint('POST', '/v1/users.resetE2EKey');\n\n\tconst resetE2EEKey = useCallback(async () => {\n\t\ttry {\n\t\t\tawait resetE2EEKeyRequest({ userId });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Users_key_has_been_reset') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tsetModal();\n\t\t}\n\t}, [resetE2EEKeyRequest, setModal, t, userId, dispatchToastMessage]);\n\n\tconst confirmResetE2EEKey = useCallback(() => {\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={resetE2EEKey} onCancel={(): void => setModal()} confirmText={t('Reset')}>\n\t\t\t\t{t('E2E_Reset_Other_Key_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t}, [resetE2EEKey, t, setModal]);\n\n\treturn canResetE2EEKey\n\t\t? {\n\t\t\t\ticon: 'key',\n\t\t\t\tlabel: t('Reset_E2E_Key'),\n\t\t\t\taction: confirmResetE2EEKey,\n\t\t  }\n\t\t: undefined;\n};\n",null],"names":["useSetModal","useEndpoint","useTranslation","useToastMessageDispatch","React","useCallback","GenericModal","module","export","useResetE2EEKeyAction","usePermission","default","userId","t","setModal","dispatchToastMessage","canResetE2EEKey","resetE2EEKeyRequest","resetE2EEKey","type","message","error","confirmResetE2EEKey","createElement","variant","onConfirm","onCancel","confirmText","icon","label","action","undefined"],"mappings":"2BACkEA,EAAAA,EAAyBC,EAAMC,EAAAC,EAA2BC,EAAAC,EAAAC,EAA5HC,EAAOC,MAAE,CAAA,CAAAC,sBAA4B,IAAAA,CAAa,GAA0EF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAP,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAU,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAT,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAAI,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAI,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAMrH,IAAMG,EAAyBG,IACrC,IAAMC,EAAIX,IACJY,EAAWd,IACXe,EAAuBZ,IACvBa,EAAkBN,EAAc,wBAChCO,EAAsBhB,EAAY,OAAQ,yBAE1CiB,EAAeb,EAAY,UAChC,GAAI,CACH,MAAMY,EAAoB,CAAEL,OAAAA,CAAM,GAClCG,EAAqB,CAAEI,KAAM,UAAWC,QAASP,EAAE,2BAA2B,GAC7E,MAAOQ,EAAO,CACfN,EAAqB,CAAEI,KAAM,QAASC,QAASC,CAAK,UAC3C,CACTP,IAEF,EAAG,CAACG,EAAqBH,EAAUD,EAAGD,EAAQG,EAAqB,EAE7DO,EAAsBjB,EAAY,KACvCS,EACCV,EAAAmB,aAAA,CAACjB,EAAY,CAACkB,QAAQ,SAASC,UAAWP,EAAcQ,SAAU,IAAYZ,IAAYa,YAAad,EAAE,QAAS,EAChHA,EAAE,gCAGN,EAAG,CAACK,EAAcL,EAAGC,EAAS,EAE9B,OAAOE,EACJ,CACAY,KAAM,MACNC,MAAOhB,EAAE,iBACTiB,OAAQR,GAERS,KAAAA,CACJ"}