)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useConfirmOwnerChanges.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React from 'react';\n\nimport ConfirmOwnerChangeWarningModal from '../../../../components/ConfirmOwnerChangeModal';\n\nexport const useConfirmOwnerChanges = (): ((\n\taction: (confirm?: boolean) => Promise<void>,\n\tmodalProps: Pick<ComponentProps<typeof ConfirmOwnerChangeWarningModal>, 'contentTitle' | 'confirmText'>,\n\tonChange: () => void,\n) => Promise<void>) => {\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn async (action, modalProps, onChange): Promise<void> => {\n\t\ttry {\n\t\t\treturn await action();\n\t\t} catch (error: any) {\n\t\t\tif (error.errorType === 'user-last-owner') {\n\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.details;\n\n\t\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\t\tawait action(true);\n\t\t\t\t\tsetModal();\n\t\t\t\t\tonChange();\n\t\t\t\t};\n\n\t\t\t\treturn setModal(\n\t\t\t\t\t<ConfirmOwnerChangeWarningModal\n\t\t\t\t\t\t{...modalProps}\n\t\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\t\tonCancel={(): void => setModal()}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t}\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n};\n",null],"names":["_extends","useSetModal","useToastMessageDispatch","React","ConfirmOwnerChangeWarningModal","module","link","default","v","export","useConfirmOwnerChanges","setModal","dispatchToastMessage","action","modalProps","onChange","error","errorType","shouldChangeOwner","shouldBeRemoved","details","handleConfirm","createElement","onConfirm","onCancel","type","message"],"mappings":"2BAAAA,EAAqDC,EAA2BC,EAAAC,EAAAC,EAAvEC,EAAWC,IAAE,CAAA,iCAA+B,CAAAC,QAAAA,CAAAA,EAAAP,EAA0BQ,CAAC,CAAA,EAAA,GAAhFH,EAAOI,MAAE,CAAA,CAAAC,uBAAa,IAAAA,CAA+B,GAA2BL,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAJ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAMzE,IAAMM,EAAyB,KAKrC,IAAMC,EAAWV,IACXW,EAAuBV,IAE7B,OAAO,MAAOW,EAAQC,EAAYC,KACjC,GAAI,CACH,OAAO,MAAMF,IACZ,MAAOG,EAAY,CACpB,GAAIA,AAAoB,oBAApBA,EAAMC,SAAS,CAAwB,CAC1C,GAAM,CAAEC,kBAAAA,CAAiB,CAAEC,gBAAAA,CAAAA,CAAiB,CAAGH,EAAMI,OAAO,CAEtDC,EAAgB,UACrB,MAAMR,EAAO,CAAA,GACbF,IACAI,GACD,EAEA,OAAOJ,EACNR,EAAAmB,aAAA,CAAClB,EAA8BJ,EAAA,CAAA,EAC1Bc,EAAU,CACdI,kBAAmBA,EACnBC,gBAAiBA,EACjBI,UAAWF,EACXG,SAAU,IAAYb,GAAW,KAIpCC,EAAqB,CAAEa,KAAM,QAASC,QAASV,CAAK,GAEtD,CACD"}