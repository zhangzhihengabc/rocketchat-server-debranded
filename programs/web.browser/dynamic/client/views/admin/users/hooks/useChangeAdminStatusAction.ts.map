)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/hooks/useChangeAdminStatusAction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useToastMessageDispatch, useMethod, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\nimport type { Action } from '../../../hooks/useActionSpread';\n\nexport const useChangeAdminStatusAction = (userId: IUser['_id'], isAdmin: boolean, onChange: () => void): Action | undefined => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setAdminStatus = useMethod('setAdminStatus');\n\tconst canAssignAdminRole = usePermission('assign-admin-role');\n\n\tconst changeAdminStatus = useCallback(async () => {\n\t\ttry {\n\t\t\tawait setAdminStatus(userId, !isAdmin);\n\t\t\tconst message = isAdmin ? 'User_is_no_longer_an_admin' : 'User_is_now_an_admin';\n\t\t\tdispatchToastMessage({ type: 'success', message: t(message) });\n\t\t\tonChange();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [userId, dispatchToastMessage, isAdmin, onChange, setAdminStatus, t]);\n\n\treturn canAssignAdminRole\n\t\t? {\n\t\t\t\ticon: 'key',\n\t\t\t\tlabel: isAdmin ? t('Remove_Admin') : t('Make_Admin'),\n\t\t\t\taction: changeAdminStatus,\n\t\t  }\n\t\t: undefined;\n};\n",null],"names":["useToastMessageDispatch","useMethod","useTranslation","usePermission","useCallback","module","export","useChangeAdminStatusAction","userId","isAdmin","onChange","t","dispatchToastMessage","setAdminStatus","canAssignAdminRole","changeAdminStatus","message","type","error","icon","label","action","undefined"],"mappings":"2BAC4EA,EAAMC,EAA2BC,EAAAC,EAAAC,EAA7GC,EAAOC,MAAE,CAAA,CAAAC,2BAAyB,IAAWA,CAAgB,GAAgDF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAL,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,QAAAA,CAAAD,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAKtG,IAAMG,EAA6B,CAACC,EAAsBC,EAAkBC,KAClF,IAAMC,EAAIT,IACJU,EAAuBZ,IACvBa,EAAiBZ,EAAU,kBAC3Ba,EAAqBX,EAAc,qBAEnCY,EAAoBX,EAAY,UACrC,GAAI,CACH,MAAMS,EAAeL,EAAQ,CAACC,GAC9B,IAAMO,EAAUP,EAAU,6BAA+B,uBACzDG,EAAqB,CAAEK,KAAM,UAAWD,QAASL,EAAEK,EAAQ,GAC3DN,IACC,MAAOQ,EAAO,CACfN,EAAqB,CAAEK,KAAM,QAASD,QAASE,CAAK,GAEtD,EAAG,CAACV,EAAQI,EAAsBH,EAASC,EAAUG,EAAgBF,EAAE,EAEvE,OAAOG,EACJ,CACAK,KAAM,MACNC,MAAOX,EAAUE,EAAE,gBAAkBA,EAAE,cACvCU,OAAQN,GAERO,KAAAA,CACJ"}