)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/groups/voip/VoipExtensionsPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Chip, Button, Pagination } from '@rocket.chat/fuselage';\nimport { useSetModal, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport GenericNoResults from '../../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeaderCell,\n\tGenericTableRow,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableBody,\n\tGenericTableLoadingRow,\n} from '../../../../../components/GenericTable';\nimport { usePagination } from '../../../../../components/GenericTable/hooks/usePagination';\nimport Page from '../../../../../components/Page';\nimport UserAvatar from '../../../../../components/avatar/UserAvatar';\nimport AssignAgentButton from './AssignAgentButton';\nimport AssignAgentModal from './AssignAgentModal';\nimport RemoveAgentButton from './RemoveAgentButton';\n\nconst VoipExtensionsPage = () => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t...(current && { offset: current }),\n\t\t}),\n\t\t[itemsPerPage, current],\n\t);\n\n\tconst getExtensions = useEndpoint('GET', '/v1/omnichannel/extensions');\n\tconst { data, isSuccess, isLoading, refetch } = useQuery(['omnichannel-extensions', query], async () => getExtensions(query));\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='extension-number' w='x156'>\n\t\t\t\t{t('Extension_Number')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='agent-name' w='x160'>\n\t\t\t\t{t('Agent_Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='extension-status' w='x120'>\n\t\t\t\t{t('Extension_Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='queues' w='x120'>\n\t\t\t\t{t('Queues')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='remove-add' w='x60' />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<Page.Content>\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center' justifyContent='space-between' mb={14}>\n\t\t\t\t<Box fontScale='p2' color='hint'>\n\t\t\t\t\t{data?.total} {t('Extensions')}\n\t\t\t\t</Box>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button primary onClick={(): void => setModal(<AssignAgentModal closeModal={(): void => setModal()} reload={refetch} />)}>\n\t\t\t\t\t\t{t('Associate_Agent')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.extensions.length === 0 && <GenericNoResults />}\n\t\t\t{isSuccess && data?.extensions.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.extensions.map(({ extension, username, name, state, queues }) => (\n\t\t\t\t\t\t\t\t<GenericTableRow key={extension} tabIndex={0}>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{extension}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>\n\t\t\t\t\t\t\t\t\t\t{username ? (\n\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar size='x28' username={username} />\n\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' mi={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignSelf='center'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box fontScale='p2m' color='default'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name || username}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\tt('Free')\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{state}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText maxHeight='x36'>\n\t\t\t\t\t\t\t\t\t\t<Box display='flex' flexDirection='row' alignItems='center' title={queues?.join(', ')}>\n\t\t\t\t\t\t\t\t\t\t\t{queues?.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(queue: string, index: number) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex <= 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Chip mie={4} key={queue} value={queue}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{queue}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Chip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{queues && queues?.length > 2 && `+${(queues.length - 2).toString()}`}\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t{username ? (\n\t\t\t\t\t\t\t\t\t\t<RemoveAgentButton username={username} reload={refetch} />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<AssignAgentButton extension={extension} reload={refetch} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Page.Content>\n\t);\n};\n\nexport default VoipExtensionsPage;\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","Box","Chip","Button","Pagination","useSetModal","useTranslation","useEndpoint","useQuery","React","useMemo","GenericNoResults","GenericTable","GenericTableHeaderCell","GenericTableRow","GenericTableCell","GenericTableHeader","GenericTableBody","GenericTableLoadingRow","usePagination","Page","UserAvatar","AssignAgentButton","AssignAgentModal","RemoveAgentButton","module","link","default","v","exportDefault","t","setModal","_usePagination","current","itemsPerPage","setItemsPerPage","onSetItemsPerPage","setCurrent","onSetCurrent","paginationProps","_excluded","query","count","offset","getExtensions","data","isSuccess","isLoading","refetch","headers","createElement","Fragment","key","w","Content","display","flexDirection","alignItems","justifyContent","mb","fontScale","color","total","primary","onClick","closeModal","reload","cols","extensions","length","map","_ref","extension","username","name","state","queues","tabIndex","withTruncatedText","size","mi","alignSelf","maxHeight","title","join","queue","index","mie","value","concat","toString","divider"],"mappings":"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"}