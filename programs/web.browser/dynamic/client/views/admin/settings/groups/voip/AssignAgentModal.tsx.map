)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/groups/voip/AssignAgentModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, Modal, Select, Field, FieldGroup, FieldLabel, FieldRow, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC } from 'react';\nimport React, { useState, useMemo } from 'react';\n\nimport AutoCompleteAgentWithoutExtension from '../../../../../components/AutoCompleteAgentWithoutExtension';\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\n\ntype AssignAgentModalParams = {\n\tcloseModal: () => void;\n\treload: () => void;\n\texistingExtension?: string;\n};\n\nconst AssignAgentModal: FC<AssignAgentModalParams> = ({ existingExtension, closeModal, reload }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst [agent, setAgent] = useState('');\n\tconst [extension, setExtension] = useState(existingExtension || '');\n\tconst query = useMemo(() => ({ type: 'available' as const, userId: agent }), [agent]);\n\n\tconst assignAgent = useEndpoint('POST', '/v1/omnichannel/agent/extension');\n\n\tconst handleAssignment = useMutableCallback(async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tawait assignAgent({ username: agent, extension });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t\treload();\n\t\tcloseModal();\n\t});\n\tconst handleAgentChange = useMutableCallback((e) => setAgent(e));\n\n\tconst { value: availableExtensions, phase: state } = useEndpointData('/v1/omnichannel/extension', { params: query });\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleAssignment} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Associate_Agent_to_Extension')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={closeModal} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Agent_Without_Extensions')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<AutoCompleteAgentWithoutExtension value={agent} onChange={handleAgentChange} currentExtension={extension} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Free_Extension_Numbers')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tdisabled={state === AsyncStatePhase.LOADING || agent === ''}\n\t\t\t\t\t\t\t\toptions={availableExtensions?.extensions?.map((extension) => [extension, extension]) || []}\n\t\t\t\t\t\t\t\tvalue={extension}\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tonChange={(value) => setExtension(String(value))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={closeModal}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!agent || !extension} type='submit'>\n\t\t\t\t\t\t{t('Associate')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default AssignAgentModal;\n",null],"names":["_extends","Button","Modal","Select","Field","FieldGroup","FieldLabel","FieldRow","Box","useMutableCallback","useToastMessageDispatch","useEndpoint","useTranslation","React","useState","useMemo","AutoCompleteAgentWithoutExtension","AsyncStatePhase","useEndpointData","module","link","default","v","exportDefault","_ref","_availableExtensions$","existingExtension","closeModal","reload","t","dispatchToastMessage","agent","setAgent","extension","setExtension","query","type","userId","assignAgent","handleAssignment","e","preventDefault","username","error","message","handleAgentChange","value","availableExtensions","phase","state","params","createElement","wrapperFunction","props","is","onSubmit","Header","Title","Close","onClick","Content","onChange","currentExtension","disabled","LOADING","options","extensions","map","placeholder","String","Footer","FooterControllers","primary"],"mappings":"2BAAAA,EAAAC,EAASC,EAAQC,EAAOC,EAAMC,EAASC,EAAYC,EAAUC,EAA+CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnGC,EAAQC,IAAO,CAAA,iCAA2B,CAAAC,QAAYC,CAAA,EAAAtB,EAAesB,CAAA,CAAA,EAAA,GAAfH,EAAQC,IAAK,CAAA,wBAAQ,CAAAnB,OAAwBqB,CAAA,EAAArB,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAV,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,8DAAAA,CAAAE,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAF,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAD,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA5GC,EAAOI,aAAU,CAgBoCC,IAA8C,IAAAC,EAAA,GAA7C,CAAEC,kBAAAA,CAAiB,CAAEC,WAAAA,CAAU,CAAEC,OAAAA,CAAAA,CAAQ,CAAAJ,EACxFK,EAAIjB,IACJkB,EAAuBpB,IACvB,CAACqB,EAAOC,EAAS,CAAGlB,EAAS,IAC7B,CAACmB,EAAWC,EAAa,CAAGpB,EAASY,GAAqB,IAC1DS,EAAQpB,EAAQ,IAAO,CAAA,CAAEqB,KAAM,YAAsBC,OAAQN,CAAK,CAAA,EAAK,CAACA,EAAM,EAE9EO,EAAc3B,EAAY,OAAQ,mCAElC4B,EAAmB9B,EAAmB,MAAO+B,IAClDA,EAAEC,cAAc,GAChB,GAAI,CACH,MAAMH,EAAY,CAAEI,SAAUX,EAAOE,UAAAA,CAAS,GAC7C,MAAOU,EAAO,CACfb,EAAqB,CAAEM,KAAM,QAASQ,QAASD,CAAK,GAErDf,IACAD,GACD,GACMkB,EAAoBpC,EAAoB+B,GAAMR,EAASQ,IAEvD,CAAEM,MAAOC,CAAmB,CAAEC,MAAOC,CAAAA,CAAO,CAAG/B,EAAgB,4BAA6B,CAAEgC,OAAQf,CAAK,GAEjH,OACCtB,EAAAsC,aAAA,CAACjD,EAAK,CAACkD,gBAAkBC,GAAUxC,EAAAsC,aAAA,CAAC3C,EAAGR,EAAA,CAACsD,GAAG,OAAOC,SAAUhB,CAAiB,EAAKc,GAAU,EAC3FxC,EAAAsC,aAAA,CAACjD,EAAMsD,MAAM,CAAA,KACZ3C,EAAAsC,aAAA,CAACjD,EAAMuD,KAAK,CAAA,KAAE5B,EAAE,iCAChBhB,EAAAsC,aAAA,CAACjD,EAAMwD,KAAK,CAAA,CAACC,QAAShC,CAAW,IAElCd,EAAAsC,aAAA,CAACjD,EAAM0D,OAAO,CAAA,KACb/C,EAAAsC,aAAA,CAAC9C,EAAU,KACVQ,EAAAsC,aAAA,CAAC/C,EAAK,KACLS,EAAAsC,aAAA,CAAC7C,EAAU,KAAEuB,EAAE,6BACfhB,EAAAsC,aAAA,CAAC5C,EAAQ,KACRM,EAAAsC,aAAA,CAACnC,EAAiC,CAAC8B,MAAOf,EAAO8B,SAAUhB,EAAmBiB,iBAAkB7B,CAAU,KAG5GpB,EAAAsC,aAAA,CAAC/C,EAAK,KACLS,EAAAsC,aAAA,CAAC7C,EAAU,KAAEuB,EAAE,2BACfhB,EAAAsC,aAAA,CAAC5C,EAAQ,KACRM,EAAAsC,aAAA,CAAChD,EAAM,CACN4D,SAAUd,IAAUhC,EAAgB+C,OAAO,EAAIjC,AAAU,KAAVA,EAC/CkC,QAAS,AAAAlB,CAAAA,MAAAA,EAAmB,KAAA,EAAA,AAAY,OAAZtB,CAAAA,EAAnBsB,EAAqBmB,UAAU,AAAVA,GAAUzC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA/BA,EAAiC0C,GAAG,CAAElC,GAAc,CAACA,EAAWA,EAAU,CAAA,GAAK,EAAG,CAC3Fa,MAAOb,EACPmC,YAAavC,EAAE,oBACfgC,SAAWf,GAAUZ,EAAamC,OAAOvB,GAAQ,OAMtDjC,EAAAsC,aAAA,CAACjD,EAAMoE,MAAM,CAAA,KACZzD,EAAAsC,aAAA,CAACjD,EAAMqE,iBAAiB,CAAA,KACvB1D,EAAAsC,aAAA,CAAClD,EAAM,CAAC0D,QAAShC,CAAW,EAAEE,EAAE,WAChChB,EAAAsC,aAAA,CAAClD,EAAM,CAACuE,QAAO,CAAA,EAACT,SAAU,CAAChC,GAAS,CAACE,EAAWG,KAAK,QAAQ,EAC3DP,EAAE,gBAMT"}