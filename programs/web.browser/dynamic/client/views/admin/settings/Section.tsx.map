)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/Section.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isSetting, isSettingColor } from '@rocket.chat/core-typings';\nimport { Accordion, Box, Button, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useEditableSettings, useEditableSettingsDispatch } from '../EditableSettingsContext';\nimport SectionSkeleton from './SectionSkeleton';\nimport Setting from './Setting';\n\ntype SectionProps = {\n\tgroupId: string;\n\thasReset?: boolean;\n\tsectionName: string;\n\ttabName?: string;\n\tsolo: boolean;\n\thelp?: ReactNode;\n\tchildren?: ReactNode;\n};\n\nfunction Section({ groupId, hasReset = true, sectionName, tabName = '', solo, help, children }: SectionProps): ReactElement {\n\tconst editableSettings = useEditableSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgroup: groupId,\n\t\t\t\tsection: sectionName,\n\t\t\t\ttab: tabName,\n\t\t\t}),\n\t\t\t[groupId, sectionName, tabName],\n\t\t),\n\t);\n\n\tconst changed = useMemo(() => editableSettings.some(({ changed }) => changed), [editableSettings]);\n\n\tconst canReset = useMemo(\n\t\t() => editableSettings.some(({ value, packageValue }) => JSON.stringify(value) !== JSON.stringify(packageValue)),\n\t\t[editableSettings],\n\t);\n\n\tconst dispatch = useEditableSettingsDispatch();\n\n\tconst reset = useMutableCallback(() => {\n\t\tdispatch(\n\t\t\teditableSettings\n\t\t\t\t.filter(({ disabled }) => !disabled)\n\t\t\t\t.map((setting) => {\n\t\t\t\t\tif (isSettingColor(setting)) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\t\tvalue: setting.packageValue,\n\t\t\t\t\t\t\teditor: setting.packageEditor,\n\t\t\t\t\t\t\tchanged:\n\t\t\t\t\t\t\t\tJSON.stringify(setting.value) !== JSON.stringify(setting.packageValue) ||\n\t\t\t\t\t\t\t\tJSON.stringify(setting.editor) !== JSON.stringify(setting.packageEditor),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\tvalue: setting.packageValue,\n\t\t\t\t\t\tchanged: JSON.stringify(setting.value) !== JSON.stringify(setting.packageValue),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t);\n\t});\n\n\tconst t = useTranslation();\n\n\tconst handleResetSectionClick = (): void => {\n\t\treset();\n\t};\n\n\treturn (\n\t\t<Accordion.Item\n\t\t\tdata-qa-section={sectionName}\n\t\t\tnoncollapsible={solo || !sectionName}\n\t\t\ttitle={sectionName && t(sectionName as TranslationKey)}\n\t\t>\n\t\t\t{help && (\n\t\t\t\t<Box is='p' color='hint' fontScale='p2'>\n\t\t\t\t\t{help}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t<FieldGroup>\n\t\t\t\t{editableSettings.map(\n\t\t\t\t\t(setting) => isSetting(setting) && <Setting key={setting._id} settingId={setting._id} sectionChanged={changed} />,\n\t\t\t\t)}\n\n\t\t\t\t{children}\n\t\t\t</FieldGroup>\n\t\t\t{hasReset && canReset && (\n\t\t\t\t<Button\n\t\t\t\t\tchildren={t('Reset_section_settings')}\n\t\t\t\t\tsecondary\n\t\t\t\t\tdanger\n\t\t\t\t\tmarginBlockStart={16}\n\t\t\t\t\tdata-section={sectionName}\n\t\t\t\t\tonClick={handleResetSectionClick}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Accordion.Item>\n\t);\n}\n\nexport default Object.assign(Section, {\n\tSkeleton: SectionSkeleton,\n});\n",null],"names":["isSetting","isSettingColor","Accordion","Box","Button","FieldGroup","useMutableCallback","useTranslation","React","useMemo","useEditableSettings","useEditableSettingsDispatch","SectionSkeleton","Setting","module","link","default","exportDefault","Object","assign","_ref","groupId","hasReset","sectionName","tabName","solo","help","children","editableSettings","group","section","tab","changed","some","_ref2","canReset","_ref3","value","packageValue","JSON","stringify","dispatch","reset","filter","_ref4","disabled","map","setting","_id","editor","packageEditor","t","createElement","Item","noncollapsible","title","is","color","fontScale","key","settingId","sectionChanged","secondary","danger","marginBlockStart","onClick","Skeleton"],"mappings":"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"}