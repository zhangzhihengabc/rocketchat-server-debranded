)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/hooks/useDismissUserAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEndpoint, useRouter, useSetModal, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport React from 'react';\n\nimport type { GenericMenuItemProps } from '../../../../components/GenericMenu/GenericMenuItem';\nimport GenericModal from '../../../../components/GenericModal';\n\nconst useDismissUserAction = (userId: string): GenericMenuItemProps => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst moderationRoute = useRouter();\n\tconst queryClient = useQueryClient();\n\n\tconst dismissUser = useEndpoint('POST', '/v1/moderation.dismissReports');\n\n\tconst handleDismissUser = useMutation({\n\t\tmutationFn: dismissUser,\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Moderation_Reports_dismissed_plural') });\n\t\t},\n\t});\n\n\tconst onDismissUser = async () => {\n\t\tawait handleDismissUser.mutateAsync({ userId });\n\t\tqueryClient.invalidateQueries({ queryKey: ['moderation.reports'] });\n\t\tsetModal();\n\t\tmoderationRoute.navigate('/admin/moderation', { replace: true });\n\t};\n\n\tconst confirmDismissUser = (): void => {\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Moderation_Dismiss_all_reports')}\n\t\t\t\tconfirmText={t('Moderation_Dismiss_all_reports')}\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={() => onDismissUser()}\n\t\t\t\tonCancel={() => setModal()}\n\t\t\t>\n\t\t\t\t{t('Moderation_Dismiss_all_reports_confirm')}\n\t\t\t</GenericModal>,\n\t\t);\n\t};\n\n\treturn {\n\t\tid: 'approve',\n\t\tcontent: t('Moderation_Dismiss_reports'),\n\t\ticon: 'circle-check',\n\t\tonClick: () => confirmDismissUser(),\n\t};\n};\n\nexport default useDismissUserAction;\n",null],"names":["useEndpoint","useRouter","useSetModal","useToastMessageDispatch","useTranslation","useMutation","useQueryClient","React","GenericModal","module","v","default","exportDefault","userId","t","setModal","dispatchToastMessage","moderationRoute","queryClient","dismissUser","handleDismissUser","mutationFn","onError","error","type","message","onSuccess","onDismissUser","mutateAsync","invalidateQueries","queryKey","navigate","replace","confirmDismissUser","createElement","title","confirmText","variant","onConfirm","onCancel","id","content","icon","onClick"],"mappings":"2BAAAA,EAASC,EAAaC,EAAWC,EAAaC,EAA0EC,EAAAC,EAAAC,EAAAC,EAAjDC,EAAAA,IAAgB,CAAA,2BAAM,CAAAT,YAA2BU,CAAA,EAAAV,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAJ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAxHC,EAAOG,aAAa,CAOUC,IAC7B,IAAMC,EAAIV,IACJW,EAAWb,IACXc,EAAuBb,IACvBc,EAAkBhB,IAClBiB,EAAcZ,IAEda,EAAcnB,EAAY,OAAQ,iCAElCoB,EAAoBf,EAAY,CACrCgB,WAAYF,EACZG,QAAUC,IACTP,EAAqB,CAAEQ,KAAM,QAASC,QAASF,CAAK,EACrD,EACAG,UAAW,KACVV,EAAqB,CAAEQ,KAAM,UAAWC,QAASX,EAAE,sCAAsC,EAC1F,IAGKa,EAAgB,UACrB,MAAMP,EAAkBQ,WAAW,CAAC,CAAEf,OAAAA,CAAM,GAC5CK,EAAYW,iBAAiB,CAAC,CAAEC,SAAU,CAAC,qBAAoB,AAAC,GAChEf,IACAE,EAAgBc,QAAQ,CAAC,oBAAqB,CAAEC,QAAS,CAAA,CAAI,EAC9D,EAEMC,EAAqB,KAC1BlB,EACCR,EAAA2B,aAAA,CAAC1B,EAAY,CACZ2B,MAAOrB,EAAE,kCACTsB,YAAatB,EAAE,kCACfuB,QAAQ,SACRC,UAAW,IAAMX,IACjBY,SAAU,IAAMxB,GAAW,EAE1BD,EAAE,2CAGN,EAEA,MAAO,CACN0B,GAAI,UACJC,QAAS3B,EAAE,8BACX4B,KAAM,eACNC,QAAS,IAAMV,IAEjB"}