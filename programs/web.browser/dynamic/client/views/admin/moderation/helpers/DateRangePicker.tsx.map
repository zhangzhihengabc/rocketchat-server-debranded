)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/helpers/DateRangePicker.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, InputBox, Menu, Margins, Option } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Moment } from 'moment';\nimport moment from 'moment';\nimport type { ComponentProps } from 'react';\nimport React, { useState, useMemo, useEffect } from 'react';\n\ntype DateRangePickerProps = Omit<ComponentProps<typeof Box>, 'onChange'> & {\n\tonChange(range: { start: string; end: string }): void;\n};\n\nconst formatToDateInput = (date: Moment) => date.locale('en').format('YYYY-MM-DD');\n\nconst todayDate = formatToDateInput(moment());\n\nconst getMonthRange = (monthsToSubtractFromToday: number) => ({\n\tstart: formatToDateInput(moment().subtract(monthsToSubtractFromToday, 'month').date(1)),\n\tend: formatToDateInput(monthsToSubtractFromToday === 0 ? moment() : moment().subtract(monthsToSubtractFromToday).date(0)),\n});\n\nconst getWeekRange = (daysToSubtractFromStart: number, daysToSubtractFromEnd: number) => ({\n\tstart: formatToDateInput(moment().subtract(daysToSubtractFromStart, 'day')),\n\tend: formatToDateInput(moment().subtract(daysToSubtractFromEnd, 'day')),\n});\n\nconst DateRangePicker = ({ onChange = () => undefined, ...props }: DateRangePickerProps) => {\n\tconst t = useTranslation();\n\tconst [range, setRange] = useState({ start: '', end: '' });\n\n\tconst { start, end } = range;\n\n\tconst handleStart = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tstart: currentTarget.value,\n\t\t\tend: range.end,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleEnd = useMutableCallback(({ currentTarget }) => {\n\t\tconst rangeObj = {\n\t\t\tend: currentTarget.value,\n\t\t\tstart: range.start,\n\t\t};\n\t\tsetRange(rangeObj);\n\t\tonChange(rangeObj);\n\t});\n\n\tconst handleRange = useMutableCallback((range) => {\n\t\tsetRange(range);\n\t\tonChange(range);\n\t});\n\n\tuseEffect(() => {\n\t\thandleRange({\n\t\t\tstart: formatToDateInput(moment().subtract(1, 'month')),\n\t\t\tend: todayDate,\n\t\t});\n\t}, [handleRange]);\n\n\tconst options = useMemo(\n\t\t() => ({\n\t\t\ttoday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Today'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(0, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tyesterday: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Yesterday'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(1, 1));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(7, 0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tpreviousWeek: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_week'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getWeekRange(14, 7));\n\t\t\t\t},\n\t\t\t},\n\t\t\tthisMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('This_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(0));\n\t\t\t\t},\n\t\t\t},\n\t\t\tlastMonth: {\n\t\t\t\ticon: 'history',\n\t\t\t\tlabel: t('Previous_month'),\n\t\t\t\taction: () => {\n\t\t\t\t\thandleRange(getMonthRange(1));\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t\t[handleRange, t],\n\t);\n\n\treturn (\n\t\t<Box marginInline={-4} {...props}>\n\t\t\t<Margins inline={4}>\n\t\t\t\t<InputBox type='date' value={start} max={todayDate} flexGrow={1} height={20} onChange={handleStart} />\n\t\t\t\t<InputBox type='date' min={start} value={end} max={todayDate} flexGrow={1} height={20} onChange={handleEnd} />\n\t\t\t\t<Menu\n\t\t\t\t\toptions={options}\n\t\t\t\t\trenderItem={(props: ComponentProps<typeof Option>) => <Option icon='history' {...props} />}\n\t\t\t\t\talignSelf='center'\n\t\t\t\t/>\n\t\t\t</Margins>\n\t\t</Box>\n\t);\n};\n\nexport default DateRangePicker;\n",null],"names":["_extends","_objectWithoutProperties","Box","InputBox","Menu","Margins","Option","useMutableCallback","useTranslation","moment","React","useState","useMemo","useEffect","module","link","default","v","formatToDateInput","date","locale","format","todayDate","getMonthRange","monthsToSubtractFromToday","start","subtract","end","getWeekRange","daysToSubtractFromStart","daysToSubtractFromEnd","exportDefault","_ref","onChange","undefined","props","_excluded","t","range","setRange","handleStart","_ref2","currentTarget","rangeObj","value","handleEnd","_ref3","handleRange","options","today","icon","label","action","yesterday","thisWeek","previousWeek","thisMonth","lastMonth","createElement","marginInline","inline","type","max","flexGrow","height","min","renderItem","alignSelf"],"mappings":"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"}