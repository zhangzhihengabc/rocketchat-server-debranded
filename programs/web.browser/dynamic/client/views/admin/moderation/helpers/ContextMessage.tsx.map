)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/moderation/helpers/ContextMessage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage, MessageReport } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport { Message, MessageName, MessageToolboxItem, MessageToolboxWrapper, MessageUsername } from '@rocket.chat/fuselage';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport MessageReportInfo from '../MessageReportInfo';\nimport useDeleteMessage from '../hooks/useDeleteMessage';\nimport { useDismissMessageAction } from '../hooks/useDismissMessageAction';\nimport ReportReasonCollapsible from './ReportReasonCollapsible';\n\nconst ContextMessage = ({\n\tmessage,\n\troom,\n\tdeleted,\n\tonRedirect,\n\tonChange,\n}: {\n\tmessage: any;\n\troom: MessageReport['room'];\n\tdeleted: boolean;\n\tonRedirect: (id: IMessage['_id']) => void;\n\tonChange: () => void;\n}): JSX.Element => {\n\tconst t = useTranslation();\n\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n\tconst dismissMsgReport = useDismissMessageAction(message._id);\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst formatTime = useFormatTime();\n\tconst formatDate = useFormatDate();\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst name = message.u.name || '';\n\tconst username = message.u.username || '';\n\n\tconst displayName = useUserDisplayName({ name, username });\n\n\treturn (\n\t\t<>\n\t\t\t<Message.Divider>{formatDate(message._updatedAt)}</Message.Divider>\n\t\t\t<Message>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t<UserAvatar username={message.u.username} />\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<MessageName>{displayName}</MessageName>\n\t\t\t\t\t\t<>{useRealName && <MessageUsername>&nbsp;{`@${message.u.username}`}</MessageUsername>}</>\n\t\t\t\t\t\t<Message.Timestamp title={formatDateAndTime(message._updatedAt)}>\n\t\t\t\t\t\t\t{formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts)}\n\t\t\t\t\t\t\t{message._updatedAt !== message.ts && ` (${t('edited')})`}\n\t\t\t\t\t\t</Message.Timestamp>\n\t\t\t\t\t\t<Message.Role>{room.name || room.fname || 'DM'}</Message.Role>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body>\n\t\t\t\t\t\t{!message.blocks?.length && !!message.md?.length ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{(!isEncryptedMessage || message.e2e === 'done') && (\n\t\t\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tmessage.msg\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t\t{message.attachments && <Attachments attachments={message.attachments} />}\n\t\t\t\t\t</Message.Body>\n\t\t\t\t\t<ReportReasonCollapsible>\n\t\t\t\t\t\t<MessageReportInfo msgId={message._id} />\n\t\t\t\t\t</ReportReasonCollapsible>\n\t\t\t\t</Message.Container>\n\t\t\t\t<MessageToolboxWrapper>\n\t\t\t\t\t<Message.Toolbox>\n\t\t\t\t\t\t<MessageToolboxItem\n\t\t\t\t\t\t\ticon='checkmark-circled'\n\t\t\t\t\t\t\ttitle={t('Moderation_Dismiss_reports')}\n\t\t\t\t\t\t\tonClick={() => dismissMsgReport.action()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MessageToolboxItem icon='arrow-forward' title={t('Moderation_Go_to_message')} onClick={() => onRedirect(message._id)} />\n\t\t\t\t\t\t<MessageToolboxItem disabled={deleted} icon='trash' title={t('Moderation_Delete_message')} onClick={() => deleteMessage()} />\n\t\t\t\t\t</Message.Toolbox>\n\t\t\t\t</MessageToolboxWrapper>\n\t\t\t</Message>\n\t\t</>\n\t);\n};\n\nexport default ContextMessage;\n",null],"names":["isE2EEMessage","Message","MessageName","MessageToolboxItem","MessageToolboxWrapper","MessageUsername","useSetting","useTranslation","React","UserAvatar","MessageContentBody","Attachments","UiKitMessageBlock","useFormatDate","useFormatDateAndTime","useFormatTime","useUserDisplayName","MessageReportInfo","useDeleteMessage","useDismissMessageAction","ReportReasonCollapsible","module","link","default","exportDefault","_ref","_message$blocks","_message$md","message","room","deleted","onRedirect","onChange","t","isEncryptedMessage","deleteMessage","_id","rid","dismissMsgReport","formatDateAndTime","formatTime","formatDate","useRealName","Boolean","name","u","username","displayName","createElement","Fragment","Divider","_updatedAt","LeftContainer","Container","Header","concat","Timestamp","title","ts","Role","fname","Body","blocks","length","md","e2e","mentions","channels","msg","mid","attachments","msgId","Toolbox","icon","onClick","action","disabled"],"mappings":"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"}