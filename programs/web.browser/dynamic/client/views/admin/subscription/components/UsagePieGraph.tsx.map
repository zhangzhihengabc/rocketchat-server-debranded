)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/subscription/components/UsagePieGraph.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { DatumId } from '@nivo/pie';\nimport { Pie } from '@nivo/pie';\nimport { Box, Palette } from '@rocket.chat/fuselage';\nimport type { ReactElement, CSSProperties, ReactNode } from 'react';\nimport React, { useMemo, useCallback, memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useLocalePercentage } from '../../../../hooks/useLocalePercentage';\n\ntype GraphColorsReturn = { [key: string]: string };\n\nconst graphColors = (color: CSSProperties['color']): GraphColorsReturn => ({\n\tused: color || Palette.statusColor['status-font-on-success'].toString(),\n\tfree: Palette.stroke['stroke-extra-light'].toString(),\n});\n\nexport type UsagePieGraphProps = {\n\tused: number;\n\ttotal: number;\n\tlabel?: ReactNode;\n\tcolor?: string;\n\tsize?: number;\n};\n\ntype GraphData = Array<{\n\tid: string;\n\tlabel: string;\n\tvalue: number;\n}>;\n\nconst UsagePieGraph = ({ used = 0, total = 0, label, color, size = 140 }: UsagePieGraphProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst parsedData = useMemo(\n\t\t(): GraphData => [\n\t\t\t{\n\t\t\t\tid: 'used',\n\t\t\t\tlabel: 'used',\n\t\t\t\tvalue: used,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'free',\n\t\t\t\tlabel: 'free',\n\t\t\t\tvalue: total - used,\n\t\t\t},\n\t\t],\n\t\t[total, used],\n\t);\n\n\tconst getColor = useCallback(\n\t\t(datum: { id: DatumId } | undefined) => {\n\t\t\tif (!datum || typeof datum.id !== 'string') {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn graphColors(color)[datum.id];\n\t\t},\n\t\t[color],\n\t);\n\n\tconst unlimited = total === 0;\n\n\tconst localePercentage = useLocalePercentage(total, used, 0);\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' alignItems='center'>\n\t\t\t<Box size={`x${size}`}>\n\t\t\t\t<Box position='relative'>\n\t\t\t\t\t<Pie\n\t\t\t\t\t\tdata={parsedData}\n\t\t\t\t\t\tmargin={{ top: 10, right: 10, bottom: 10, left: 10 }}\n\t\t\t\t\t\tinnerRadius={0.8}\n\t\t\t\t\t\tcolors={getColor}\n\t\t\t\t\t\twidth={size}\n\t\t\t\t\t\theight={size}\n\t\t\t\t\t\tenableArcLabels={false}\n\t\t\t\t\t\tenableArcLinkLabels={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tdisplay='flex'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tfontScale='p2m'\n\t\t\t\t\t\tstyle={{ left: 0, right: 0, top: 0, bottom: 0 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{unlimited ? 'âˆž' : localePercentage}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Box is='span' fontScale='p2' color='font-secondary-info'>\n\t\t\t\t{unlimited &&\n\t\t\t\t\tt('used_limit_infinite', {\n\t\t\t\t\t\tused,\n\t\t\t\t\t})}\n\t\t\t\t{!unlimited &&\n\t\t\t\t\tt('used_limit', {\n\t\t\t\t\t\tused,\n\t\t\t\t\t\tlimit: total,\n\t\t\t\t\t})}\n\t\t\t</Box>\n\t\t\t{label && (\n\t\t\t\t<Box is='span' mbs={4} color='font-secondary-info'>\n\t\t\t\t\t{label}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default memo(UsagePieGraph);\n",null],"names":["Pie","Box","Palette","React","useMemo","useCallback","memo","useTranslation","useLocalePercentage","module","link","default","graphColors","color","used","statusColor","toString","free","stroke","exportDefault","_ref","total","label","size","t","parsedData","id","value","getColor","datum","unlimited","localePercentage","createElement","display","flexDirection","alignItems","concat","position","data","margin","top","right","bottom","left","innerRadius","colors","width","height","enableArcLabels","enableArcLinkLabels","justifyContent","fontScale","style","is","limit","mbs"],"mappings":"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"}