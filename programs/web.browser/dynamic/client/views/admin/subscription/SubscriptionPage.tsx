function module(e,t,n){let a,l,i,r,s,o,c,u,m,d,p,k,g,E,v,f,C,S,b,h,A,L,x,w,I,y,_,U,M,P,R,B,D,F,G,O,T;n.link("@rocket.chat/fuselage",{Accordion(e){a=e},Box(e){l=e},Button(e){i=e},ButtonGroup(e){r=e},Callout(e){s=e},Grid(e){o=e}},0),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){c=e},useSessionStorage(e){u=e}},1),n.link("@rocket.chat/ui-contexts",{useSearchParameter(e){m=e},useRouter(e){d=e}},2),n.link("i18next",{t(e){p=e}},3),n.link("react",{default(e){k=e},memo(e){g=e},useCallback(e){E=e},useEffect(e){v=e}},4),n.link("tinykeys",{default(e){f=e}},5),n.link("../../../components/Page",{default(e){C=e}},6),n.link("../../../hooks/useIsEnterprise",{useIsEnterprise(e){S=e}},7),n.link("../../../hooks/useLicense",{useInvalidateLicense(e){b=e},useLicense(e){h=e}},8),n.link("../../../hooks/useRegistrationStatus",{useRegistrationStatus(e){A=e}},9),n.link("./SubscriptionCalloutLimits",{SubscriptionCalloutLimits(e){L=e}},10),n.link("./SubscriptionPageSkeleton",{default(e){x=e}},11),n.link("./components/UpgradeButton",{default(e){w=e}},12),n.link("./components/UpgradeToGetMore",{default(e){I=e}},13),n.link("./components/cards/ActiveSessionsCard",{default(e){y=e}},14),n.link("./components/cards/ActiveSessionsPeakCard",{default(e){_=e}},15),n.link("./components/cards/AppsUsageCard",{default(e){U=e}},16),n.link("./components/cards/CountMACCard",{default(e){M=e}},17),n.link("./components/cards/CountSeatsCard",{default(e){P=e}},18),n.link("./components/cards/FeaturesCard",{default(e){R=e}},19),n.link("./components/cards/MACCard",{default(e){B=e}},20),n.link("./components/cards/PlanCard",{default(e){D=e}},21),n.link("./components/cards/PlanCard/PlanCardCommunity",{default(e){F=e}},22),n.link("./components/cards/SeatsCard",{default(e){G=e}},23),n.link("./hooks/useRemoveLicense",{useRemoveLicense(e){O=e}},24),n.link("./hooks/useWorkspaceSync",{useWorkspaceSync(e){T=e}},25),n.exportDefault(g(()=>{var e;let t=function(){let[e,t]=u("admin:showLicenseTab",!1);return v(()=>{let e=f(window,{"ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a":()=>{t(e=>!e)}});return()=>{e()}}),e}(),n=d(),{data:g}=S(),{isRegistered:W}=A(),{data:j,isLoading:N}=h({loadValues:!0}),V=T(),H=b(),J=m("subscriptionSuccess"),q=c(J||V.isLoading,1e4),{license:z,limits:K,activeModules:Q=[]}=j||{},{isEnterprise:X=!0}=g||{},Y=e=>{let{max:t,value:n}=(null==K?void 0:K[e])||{};return{max:void 0!==t&&-1!==t?t:1/0,value:n}},Z=Y("monthlyActiveContacts"),$=Y("activeUsers"),ee=E(()=>{V.mutate(void 0,{onSuccess:()=>H(100)})},[H,V]);v(()=>{if(J&&V.isIdle){ee();return}J&&n.navigate({name:n.getRouteName(),params:Object.fromEntries(Object.entries(n.getSearchParameters()).filter(e=>{let[t]=e;return"subscriptionSuccess"!==t}))},{replace:!0})},[ee,n,J,V.isIdle]);let et=O();return k.createElement(C,{bg:"tint"},k.createElement(C.Header,{title:p("Subscription")},k.createElement(r,null,W&&k.createElement(i,{loading:V.isLoading,icon:"reload",onClick:()=>ee()},p("Sync_license_update")),k.createElement(w,{target:"subscription_header",action:X?"manage_subscription":"upgrade",primary:!0},p(X?"Manage_subscription":"Upgrade")))),k.createElement(C.ScrollableContentWithShadow,{p:16},(q||V.isLoading)&&k.createElement(s,{type:"info",title:p("Sync_license_update_Callout_Title"),m:8},p("Sync_license_update_Callout")),k.createElement(L,null),N&&k.createElement(x,null),!N&&k.createElement(k.Fragment,null,t&&k.createElement(a,null,k.createElement(a.Item,{title:p("License")},k.createElement("pre",null,JSON.stringify(j,null,2)))),k.createElement(l,{marginBlock:"none",marginInline:"auto",width:"full",color:"default"},k.createElement(o,{m:0},k.createElement(o.Item,{lg:4,xs:4,p:8},z&&k.createElement(D,{licenseInformation:z.information,licenseLimits:{activeUsers:$}}),!z&&k.createElement(F,null)),k.createElement(o.Item,{lg:8,xs:4,p:8},k.createElement(R,{activeModules:Q,isEnterprise:X})),void 0!==$.value&&k.createElement(o.Item,{lg:6,xs:4,p:8},$.max!==1/0?k.createElement(G,{value:$.value,max:$.max,hideManageSubscription:null==j?void 0:j.trial}):k.createElement(P,{activeUsers:null==$?void 0:$.value})),void 0!==Z.value&&k.createElement(o.Item,{lg:6,xs:4,p:8},Z.max!==1/0?k.createElement(B,{max:Z.max,value:Z.value,hideManageSubscription:null==j?void 0:j.trial}):k.createElement(M,{macsCount:Z.value})),!z&&k.createElement(k.Fragment,null,(null==K?void 0:K.marketplaceApps)!==void 0&&k.createElement(o.Item,{lg:4,xs:4,p:8},k.createElement(U,{privateAppsLimit:null==K?void 0:K.privateApps,marketplaceAppsLimit:K.marketplaceApps})),k.createElement(o.Item,{lg:4,xs:4,p:8},k.createElement(y,null)),k.createElement(o.Item,{lg:4,xs:4,p:8},k.createElement(_,null)))),k.createElement(I,{activeModules:Q,isEnterprise:X},!!(null==j?void 0:null===(e=j.license)||void 0===e?void 0:e.information.cancellable)&&k.createElement(i,{loading:et.isLoading,secondary:!0,danger:!0,onClick:()=>et.mutate()},p("Cancel_subscription")))))))}))}
//# sourceMappingURL=/dynamic/client/views/admin/subscription/74318b82bc5df5dbd5f53815dce8c486a4951377.map
