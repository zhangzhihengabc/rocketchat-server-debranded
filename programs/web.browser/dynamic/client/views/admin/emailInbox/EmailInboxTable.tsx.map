)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/emailInbox/EmailInboxTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useRoute, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport SendTestButton from './SendTestButton';\n\nconst EmailInboxTable = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst router = useRoute('admin-email-inboxes');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'email' | 'active'>('name');\n\n\tconst onClick = useCallback(\n\t\t(_id) => (): void => {\n\t\t\trouter.push({\n\t\t\t\tcontext: 'edit',\n\t\t\t\t_id,\n\t\t\t});\n\t\t},\n\t\t[router],\n\t);\n\n\tconst endpoint = useEndpoint('GET', '/v1/email-inbox.list');\n\n\tconst query = {\n\t\tsort: JSON.stringify({ [sortBy]: sortDirection === 'asc' ? 1 : -1 }),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tconst result = useQuery(['email-list', query], () => endpoint(query));\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort}>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='email' direction={sortDirection} active={sortBy === 'email'} onClick={setSort}>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='active' direction={sortDirection} active={sortBy === 'active'} onClick={setSort}>\n\t\t\t\t{t('Active')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='action'>{t('Action')}</GenericTableHeaderCell>,\n\t\t],\n\t\t[setSort, sortBy, sortDirection, t],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{result.isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{result.isSuccess && result.data.emailInboxes.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{result.data.emailInboxes.map((emailInbox) => (\n\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\tkey={emailInbox._id}\n\t\t\t\t\t\t\t\t\tonKeyDown={onClick(emailInbox._id)}\n\t\t\t\t\t\t\t\t\tonClick={onClick(emailInbox._id)}\n\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\twidth='full'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.name}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.email}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{emailInbox.active ? t('Yes') : t('No')}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t<SendTestButton id={emailInbox._id} />\n\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={result.data.count}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{result.isSuccess && result.data.emailInboxes.length === 0 && <GenericNoResults />}\n\t\t\t{result.isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => result.refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default EmailInboxTable;\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","Pagination","States","StatesAction","StatesActions","StatesIcon","StatesTitle","useRoute","useTranslation","useEndpoint","useQuery","React","useMemo","useCallback","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","SendTestButton","module","link","default","v","exportDefault","t","router","_usePagination","current","itemsPerPage","setItemsPerPage","onSetItemsPerPage","setCurrent","onSetCurrent","paginationProps","_excluded","sortBy","sortDirection","setSort","onClick","_id","push","context","endpoint","query","sort","JSON","stringify","count","offset","result","headers","createElement","key","direction","active","Fragment","isLoading","headerCells","isSuccess","data","emailInboxes","length","map","emailInbox","onKeyDown","tabIndex","role","action","width","withTruncatedText","name","email","id","divider","isError","variation","refetch"],"mappings":"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"}