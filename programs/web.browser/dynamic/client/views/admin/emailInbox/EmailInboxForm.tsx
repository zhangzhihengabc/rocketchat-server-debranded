function module(e,l,r){let t,n,a,i,m,o,s,d,u,c,p,E,v,f,_,g,h,w,S,P,b,x,k,C,q,y,I,U,M,T,R,D;r.link("@babel/runtime/helpers/extends",{default(e){t=e}},0),r.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},1),r.link("@rocket.chat/fuselage",{Accordion(e){a=e},Button(e){i=e},ButtonGroup(e){m=e},TextInput(e){o=e},TextAreaInput(e){s=e},Field(e){d=e},ToggleSwitch(e){u=e},FieldGroup(e){c=e},Box(e){p=e},Margins(e){E=e},NumberInput(e){v=e},PasswordInput(e){f=e},FieldLabel(e){_=e},FieldRow(e){g=e},FieldError(e){h=e},FieldHint(e){w=e}},0),r.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){S=e}},1),r.link("@rocket.chat/ui-contexts",{useSetModal(e){P=e},useToastMessageDispatch(e){b=e},useRoute(e){x=e},useEndpoint(e){k=e},useTranslation(e){C=e}},2),r.link("react",{default(e){q=e},useCallback(e){y=e}},3),r.link("react-hook-form",{useForm(e){I=e},Controller(e){U=e}},4),r.link("../../../../lib/emailValidator",{validateEmail(e){M=e}},5),r.link("../../../components/AutoCompleteDepartment",{default(e){T=e}},6),r.link("../../../components/GenericModal",{default(e){R=e}},7),r.link("../../../components/Page",{default(e){D=e}},8),r.exportDefault(e=>{var l,r,F,A,L,j,G,O,V,B,N,W,H,Y,z,J,K,Q,X,Z,$,ee,el,er,et,en,ea,ei,em;let{inboxData:eo}=e,es=C(),ed=b(),eu=P(),ec=x("admin-email-inboxes"),ep=y(()=>ec.push({}),[ec]),eE=k("POST","/v1/email-inbox"),ev=k("DELETE","/v1/email-inbox/:_id",{_id:null!==(l=null==eo?void 0:eo._id)&&void 0!==l?l:""}),ef=k("GET","/v1/email-inbox.search"),{register:e_,control:eg,handleSubmit:eh,formState:{errors:ew,isDirty:eS}}=I({defaultValues:{active:null===(r=null==eo?void 0:eo.active)||void 0===r||r,name:null==eo?void 0:eo.name,email:null==eo?void 0:eo.email,description:null==eo?void 0:eo.description,senderInfo:null==eo?void 0:eo.senderInfo,department:(null==eo?void 0:eo.department)||"",smtpServer:null==eo?void 0:eo.smtp.server,smtpPort:null!==(F=null==eo?void 0:eo.smtp.port)&&void 0!==F?F:587,smtpUsername:null==eo?void 0:eo.smtp.username,smtpPassword:null==eo?void 0:eo.smtp.password,smtpSecure:null!==(A=null==eo?void 0:eo.smtp.secure)&&void 0!==A&&A,imapServer:null==eo?void 0:eo.imap.server,imapPort:null!==(L=null==eo?void 0:eo.imap.port)&&void 0!==L?L:993,imapUsername:null==eo?void 0:eo.imap.username,imapPassword:null==eo?void 0:eo.imap.password,imapSecure:null!==(j=null==eo?void 0:eo.imap.secure)&&void 0!==j&&j,imapRetries:null!==(G=null==eo?void 0:eo.imap.maxRetries)&&void 0!==G?G:10}}),eP=S(()=>{let e=async()=>{try{await ev(),ed({type:"success",message:es("Email_Inbox_has_been_removed")}),ep()}catch(e){ed({type:"error",message:e})}finally{eu(null)}};eu(q.createElement(R,{variant:"danger",onConfirm:e,onCancel:()=>eu(null),confirmText:es("Delete")},es("You_will_not_be_able_to_recover_email_inbox")))}),eb=S(async e=>{let{active:l,name:r,email:t,description:a,senderInfo:i,department:m,smtpServer:o,smtpPort:s,smtpUsername:d,smtpPassword:u,smtpSecure:c,imapServer:p,imapPort:E,imapUsername:v,imapPassword:f,imapSecure:_,imapRetries:g}=e,h={server:o,port:parseInt(s),username:d,password:u,secure:c},w={server:p,port:parseInt(E),username:v,password:f,secure:_,maxRetries:parseInt(g)},S=n(n(n({},(null==eo?void 0:eo._id)&&{_id:null==eo?void 0:eo._id}),{},{active:l,name:r,email:t,description:a,senderInfo:i},m&&{department:"string"==typeof m?m:m.value}),{},{smtp:h,imap:w});try{await eE(S),ed({type:"success",message:es("Email_Inbox_has_been_added")}),ep()}catch(e){ed({type:"error",message:e})}}),ex=S(async e=>{if(!e)return;if(!M(e))return es("Validate_email_address");let{emailInbox:l}=await ef({email:e});if(l&&(null==eo||!eo._id||l._id!==(null==eo?void 0:eo._id)))return es("Email_already_exists")});return q.createElement(D.ScrollableContentWithShadow,null,q.createElement(p,{maxWidth:"x600",w:"full",alignSelf:"center"},q.createElement(a,null,q.createElement(a.Item,{defaultExpanded:!0,title:es("Inbox_Info")},q.createElement(c,null,q.createElement(d,null,q.createElement(_,{display:"flex",justifyContent:"space-between",w:"full"},es("Active"),q.createElement(U,{control:eg,name:"active",render:e=>{let{field:{onChange:l,value:r,ref:t}}=e;return q.createElement(u,{ref:t,checked:r,onChange:l})}}))),q.createElement(d,null,q.createElement(_,null,es("Name"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("name",{required:es("error-the-field-is-required",{field:es("Name")})}),{error:null===(O=ew.name)||void 0===O?void 0:O.message}))),ew.name&&q.createElement(h,null,null===(V=ew.name)||void 0===V?void 0:V.message)),q.createElement(d,null,q.createElement(_,null,es("Email"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("email",{required:es("error-the-field-is-required",{field:es("Email")}),validate:e=>ex(e)}),{error:null===(B=ew.email)||void 0===B?void 0:B.message}))),ew.email&&q.createElement(h,null,null===(N=ew.email)||void 0===N?void 0:N.message)),q.createElement(d,null,q.createElement(_,null,es("Description")),q.createElement(g,null,q.createElement(s,t({},e_("description"),{rows:4})))),q.createElement(d,null,q.createElement(_,null,es("Sender_Info")),q.createElement(g,null,q.createElement(o,t({},e_("senderInfo"),{placeholder:es("Optional")}))),q.createElement(w,null,es("Will_Appear_In_From"))),q.createElement(d,null,q.createElement(_,null,es("Department")),q.createElement(g,null,q.createElement(U,{control:eg,name:"department",render:e=>{let{field:{onChange:l,value:r}}=e;return q.createElement(T,{value:r,onChange:l})}})),q.createElement(w,null,es("Only_Members_Selected_Department_Can_View_Channel"))))),q.createElement(a.Item,{defaultExpanded:!(null!=eo&&eo._id),title:es("Configure_Outgoing_Mail_SMTP")},q.createElement(c,null,q.createElement(d,null,q.createElement(_,null,es("Server"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("smtpServer",{required:es("error-the-field-is-required",{field:es("Server")})}),{error:null===(W=ew.smtpServer)||void 0===W?void 0:W.message}))),ew.smtpServer&&q.createElement(h,null,null===(H=ew.smtpServer)||void 0===H?void 0:H.message)),q.createElement(d,null,q.createElement(_,null,es("Port"),"*"),q.createElement(g,null,q.createElement(v,t({},e_("smtpPort",{required:es("error-the-field-is-required",{field:es("Port")})}),{error:null===(Y=ew.smtpPort)||void 0===Y?void 0:Y.message}))),ew.smtpPort&&q.createElement(h,null,null===(z=ew.smtpPort)||void 0===z?void 0:z.message)),q.createElement(d,null,q.createElement(_,null,es("Username"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("smtpUsername",{required:es("error-the-field-is-required",{field:es("Username")})}),{error:null===(J=ew.smtpUsername)||void 0===J?void 0:J.message}))),ew.smtpUsername&&q.createElement(h,null,null===(K=ew.smtpUsername)||void 0===K?void 0:K.message)),q.createElement(d,null,q.createElement(_,null,es("Password"),"*"),q.createElement(g,null,q.createElement(f,t({},e_("smtpPassword",{required:es("error-the-field-is-required",{field:es("Password")})}),{error:null===(Q=ew.smtpPassword)||void 0===Q?void 0:Q.message}))),ew.smtpPassword&&q.createElement(h,null,null===(X=ew.smtpPassword)||void 0===X?void 0:X.message)),q.createElement(d,null,q.createElement(_,{display:"flex",justifyContent:"space-between",w:"full"},es("Connect_SSL_TLS"),q.createElement(U,{control:eg,name:"smtpSecure",render:e=>{let{field:{onChange:l,value:r,ref:t}}=e;return q.createElement(u,{ref:t,checked:r,onChange:l})}}))))),q.createElement(a.Item,{defaultExpanded:!(null!=eo&&eo._id),title:es("Configure_Incoming_Mail_IMAP")},q.createElement(c,null,q.createElement(d,null,q.createElement(_,null,es("Server"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("imapServer",{required:es("error-the-field-is-required",{field:es("Server")})}),{error:null===(Z=ew.imapServer)||void 0===Z?void 0:Z.message}))),ew.imapServer&&q.createElement(h,null,null===($=ew.imapServer)||void 0===$?void 0:$.message)),q.createElement(d,null,q.createElement(_,null,es("Port"),"*"),q.createElement(g,null,q.createElement(v,t({},e_("imapPort",{required:es("error-the-field-is-required",{field:es("Port")})}),{error:null===(ee=ew.imapPort)||void 0===ee?void 0:ee.message}))),ew.imapPort&&q.createElement(h,null,null===(el=ew.imapPort)||void 0===el?void 0:el.message)),q.createElement(d,null,q.createElement(_,null,es("Username"),"*"),q.createElement(g,null,q.createElement(o,t({},e_("imapUsername",{required:es("error-the-field-is-required",{field:es("Username")})}),{error:null===(er=ew.imapUsername)||void 0===er?void 0:er.message}))),ew.imapUsername&&q.createElement(h,null,null===(et=ew.imapUsername)||void 0===et?void 0:et.message)),q.createElement(d,null,q.createElement(_,null,es("Password"),"*"),q.createElement(g,null,q.createElement(f,t({},e_("imapPassword",{required:es("error-the-field-is-required",{field:es("Password")})}),{error:null===(en=ew.imapPassword)||void 0===en?void 0:en.message}))),ew.imapPassword&&q.createElement(h,null,null===(ea=ew.imapPassword)||void 0===ea?void 0:ea.message)),q.createElement(d,null,q.createElement(_,null,es("Max_Retry"),"*"),q.createElement(g,null,q.createElement(v,t({},e_("imapRetries",{required:es("error-the-field-is-required",{field:es("Max_Retry")})}),{error:null===(ei=ew.imapRetries)||void 0===ei?void 0:ei.message}))),ew.imapRetries&&q.createElement(h,null,null===(em=ew.imapRetries)||void 0===em?void 0:em.message)),q.createElement(d,null,q.createElement(_,{display:"flex",justifyContent:"space-between",w:"full"},es("Connect_SSL_TLS"),q.createElement(U,{control:eg,name:"imapSecure",render:e=>{let{field:{onChange:l,value:r,ref:t}}=e;return q.createElement(u,{ref:t,checked:r,onChange:l})}}))))),q.createElement(d,null,q.createElement(g,null,q.createElement(m,{stretch:!0,w:"full"},q.createElement(i,{onClick:ep},es("Cancel")),q.createElement(i,{disabled:!eS,primary:!0,onClick:eh(eb)},es("Save")))),q.createElement(g,null,q.createElement(E,{blockStart:16},q.createElement(m,{stretch:!0,w:"full"},(null==eo?void 0:eo._id)&&q.createElement(i,{danger:!0,onClick:eP},es("Delete")))))))))})}
//# sourceMappingURL=/dynamic/client/views/admin/emailInbox/847480bda1383d690a5ade348a7f1dc9e637903f.map
