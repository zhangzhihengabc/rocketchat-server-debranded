)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/import/PrepareUsers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { CheckBox, Table, Tag, Pagination, TableHead, TableRow, TableCell, TableBody } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { FC, Dispatch, SetStateAction, ChangeEvent } from 'react';\nimport React, { useState, useCallback } from 'react';\n\ntype UserDescriptor = {\n\tuser_id: string;\n\tusername: string;\n\temail: string;\n\tis_deleted: boolean;\n\tdo_import: boolean;\n};\n\ntype PrepareUsersProps = {\n\tusersCount: number;\n\tusers: UserDescriptor[];\n\tsetUsers: Dispatch<SetStateAction<UserDescriptor[]>>;\n};\n\nconst PrepareUsers: FC<PrepareUsersProps> = ({ usersCount, users, setUsers }) => {\n\tconst t = useTranslation();\n\tconst [current, setCurrent] = useState(0);\n\tconst [itemsPerPage, setItemsPerPage] = useState<25 | 50 | 100>(25);\n\tconst showingResultsLabel = useCallback(\n\t\t({ count, current, itemsPerPage }) => t('Showing_results_of', current + 1, Math.min(current + itemsPerPage, count), count),\n\t\t[t],\n\t);\n\tconst itemsPerPageLabel = useCallback(() => t('Items_per_page:'), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Table>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell width='x36'>\n\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\tchecked={usersCount > 0}\n\t\t\t\t\t\t\t\tindeterminate={usersCount > 0 && usersCount !== users.length}\n\t\t\t\t\t\t\t\tonChange={(): void => {\n\t\t\t\t\t\t\t\t\tsetUsers((users) => {\n\t\t\t\t\t\t\t\t\t\tconst hasCheckedDeletedUsers = users.some(({ is_deleted, do_import }) => is_deleted && do_import);\n\t\t\t\t\t\t\t\t\t\tconst isChecking = usersCount === 0;\n\n\t\t\t\t\t\t\t\t\t\tif (isChecking) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: true }));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (hasCheckedDeletedUsers) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => (user.is_deleted ? { ...user, do_import: false } : user));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: false }));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t<TableCell is='th'>{t('Username')}</TableCell>\n\t\t\t\t\t\t<TableCell is='th'>{t('Email')}</TableCell>\n\t\t\t\t\t\t<TableCell is='th'></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{users.slice(current, current + itemsPerPage).map((user) => (\n\t\t\t\t\t\t<TableRow key={user.user_id}>\n\t\t\t\t\t\t\t<TableCell width='x36'>\n\t\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\t\tchecked={user.do_import}\n\t\t\t\t\t\t\t\t\tonChange={(event: ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\t\t\t\t\t\tconst { checked } = event.currentTarget;\n\t\t\t\t\t\t\t\t\t\tsetUsers((users) => users.map((_user) => (_user === user ? { ..._user, do_import: checked } : _user)));\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>{user.username}</TableCell>\n\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n\t\t\t\t\t\t\t<TableCell align='end'>{user.is_deleted && <Tag variant='danger'>{t('Deleted')}</Tag>}</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t))}\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n\t\t\t<Pagination\n\t\t\t\tcurrent={current}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\tcount={users.length || 0}\n\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\titemsPerPageLabel={itemsPerPageLabel}\n\t\t\t\tshowingResultsLabel={showingResultsLabel}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default PrepareUsers;\n",null],"names":["_objectSpread","CheckBox","Table","Tag","TableHead","TableRow","TableCell","TableBody","useTranslation","React","useState","useCallback","module","link","default","v","Pagination","exportDefault","_ref","usersCount","users","setUsers","t","current","setCurrent","itemsPerPage","setItemsPerPage","showingResultsLabel","_ref2","count","Math","min","itemsPerPageLabel","createElement","Fragment","width","checked","indeterminate","length","onChange","hasCheckedDeletedUsers","some","_ref3","is_deleted","do_import","map","user","is","slice","key","user_id","event","currentTarget","_user","username","email","align","variant","onSetItemsPerPage","onSetCurrent"],"mappings":"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"}