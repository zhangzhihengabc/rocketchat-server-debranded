)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/invites/InvitesPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { States, StatesIcon, StatesTitle, StatesActions, StatesAction } from '@rocket.chat/fuselage';\nimport { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../components/GenericTable';\nimport Page from '../../../components/Page';\nimport InviteRow from './InviteRow';\n\nconst InvitesPage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst getInvites = useEndpoint('GET', '/v1/listInvites');\n\n\tconst { data, isLoading, refetch, isSuccess, isError } = useQuery(\n\t\t['invites'],\n\t\tasync () => {\n\t\t\tconst invites = await getInvites();\n\t\t\treturn invites;\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tconst onRemove = (removeInvite: () => Promise<boolean>): void => {\n\t\tconst confirmRemove = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait removeInvite();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Invite_removed') });\n\t\t\t\trefetch();\n\t\t\t} catch (error) {\n\t\t\t\tif (typeof error === 'string' || error instanceof Error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tsetModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Are_you_sure')}\n\t\t\t\tchildren={t('Are_you_sure_you_want_to_delete_this_record')}\n\t\t\t\tvariant='danger'\n\t\t\t\tconfirmText={t('Yes')}\n\t\t\t\tcancelText={t('No')}\n\t\t\t\tonClose={(): void => setModal()}\n\t\t\t\tonCancel={(): void => setModal()}\n\t\t\t\tonConfirm={confirmRemove}\n\t\t\t/>,\n\t\t);\n\t};\n\n\tconst notSmall = useMediaQuery('(min-width: 768px)');\n\n\tconst headers = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<GenericTableHeaderCell w={notSmall ? '20%' : '80%'}>{t('Token')}</GenericTableHeaderCell>\n\t\t\t\t{notSmall && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<GenericTableHeaderCell w='35%'>{t('Created_at')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='20%'>{t('Expiration')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='10%'>{t('Uses')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell w='10%'>{t('Uses_left')}</GenericTableHeaderCell>\n\t\t\t\t\t\t<GenericTableHeaderCell />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</>\n\t\t),\n\t\t[notSmall, t],\n\t);\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Invites')} />\n\t\t\t<Page.Content>\n\t\t\t\t<>\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={4} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data && data.length > 0 && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t{isLoading && <GenericTableLoadingTable headerCells={notSmall ? 4 : 1} />}\n\t\t\t\t\t\t\t\t{data.map((invite) => (\n\t\t\t\t\t\t\t\t\t<InviteRow key={invite._id} {...invite} onRemove={onRemove} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data && data.length === 0 && <GenericNoResults />}\n\t\t\t\t\t{isError && (\n\t\t\t\t\t\t<States>\n\t\t\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t\t</States>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t</Page.Content>\n\t\t</Page>\n\t);\n};\n\nexport default InvitesPage;\n",null],"names":["_extends","States","StatesIcon","StatesTitle","StatesActions","StatesAction","useMediaQuery","useSetModal","useToastMessageDispatch","useTranslation","useEndpoint","useQuery","React","useMemo","GenericModal","GenericNoResults","GenericTable","GenericTableBody","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","Page","InviteRow","module","link","default","v","exportDefault","t","dispatchToastMessage","setModal","getInvites","data","isLoading","refetch","isSuccess","isError","invites","onError","error","type","message","onRemove","removeInvite","confirmRemove","Error","createElement","title","children","variant","confirmText","cancelText","onClose","onCancel","onConfirm","notSmall","headers","Fragment","w","Header","Content","headerCells","length","map","invite","key","_id","name","variation","onClick"],"mappings":"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"}