function module(e,t,n){let l,a,r,o,u,s,c,i,d,m,p,h,f,g,E,y,C,k,b,S,_,x,F,v,D,M;let B=["close","onChange","data"];n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},1),n.link("@rocket.chat/fuselage",{Box(e){r=e},Button(e){o=e},ButtonGroup(e){u=e},Margins(e){s=e},TextInput(e){c=e},Field(e){i=e},FieldLabel(e){d=e},FieldRow(e){m=e},IconButton(e){p=e}},0),n.link("@rocket.chat/ui-contexts",{useSetModal(e){h=e},useToastMessageDispatch(e){f=e},useMethod(e){g=e},useTranslation(e){E=e}},1),n.link("react",{default(e){y=e},useCallback(e){C=e},useState(e){k=e},useMemo(e){b=e},useEffect(e){S=e}},2),n.link("../../../components/Contextualbar",{ContextualbarScrollableContent(e){_=e},ContextualbarFooter(e){x=e}},3),n.link("../../../components/GenericModal",{default(e){F=e}},4),n.link("../../../hooks/useFileInput",{useFileInput(e){v=e}},5),n.link("./lib",{validate(e){D=e},createSoundData(e){M=e}},6),n.exportDefault(function(e){let{close:t,onChange:n,data:w}=e,T=a(e,B),I=E(),j=f(),G=h(),{_id:N,name:R}=w||{},U=b(()=>w||{},[w]),[W,q]=k(()=>{var e;return null!==(e=null==w?void 0:w.name)&&void 0!==e?e:""}),[A,H]=k(()=>w);S(()=>{q(R||""),H(U||"")},[R,U,N]);let L=g("deleteCustomSound"),O=g("uploadCustomSound"),P=g("insertOrUpdateSound"),z=C(e=>{H(e)},[]),J=b(()=>R!==W||U!==A,[W,R,U,A]),K=C(async e=>{let t=M(e,W,{previousName:R,previousSound:U,_id:N,extension:e.extension}),n=D(t,e);if(0===n.length){let n;try{n=await P(t)}catch(e){j({type:"error",message:e});return}if(t._id=n,t.random=Math.round(1e3*Math.random()),e&&e!==U){j({type:"success",message:I("Uploading_file")});let a=new FileReader;a.readAsBinaryString(e),a.onloadend=()=>{try{return O(a.result,e.type,l(l({},t),{},{_id:n})),j({type:"success",message:I("File_uploaded")})}catch(e){j({type:"error",message:e})}}}}n.forEach(e=>j({type:"error",message:I("error-the-field-is-required",{field:I(e)})}))},[N,j,P,W,R,U,I,O]),Q=C(async()=>{K(A),n()},[K,A,n]),V=C(()=>{let e=async()=>{try{await L(N),j({type:"success",message:I("Custom_Sound_Has_Been_Deleted")})}catch(e){j({type:"error",message:e})}finally{G(null),null==t||t(),n()}},l=()=>G(null);G(()=>y.createElement(F,{variant:"danger",onConfirm:e,onCancel:l,onClose:l,confirmText:I("Delete")},I("Custom_Sound_Delete_Warning")))},[N,t,L,j,n,G,I]),[X]=v(z,"audio/mp3");return y.createElement(y.Fragment,null,y.createElement(_,T,y.createElement(i,null,y.createElement(d,null,I("Name")),y.createElement(m,null,y.createElement(c,{value:W,onChange:e=>q(e.currentTarget.value),placeholder:I("Name")}))),y.createElement(i,null,y.createElement(d,{alignSelf:"stretch"},I("Sound_File_mp3")),y.createElement(r,{display:"flex",flexDirection:"row",mbs:"none"},y.createElement(s,{inline:4},y.createElement(p,{icon:"upload",secondary:!0,onClick:X}),(null==A?void 0:A.name)||"none")))),y.createElement(x,null,y.createElement(u,{stretch:!0},y.createElement(o,{onClick:t},I("Cancel")),y.createElement(o,{primary:!0,onClick:Q,disabled:!J},I("Save"))),y.createElement(u,{mbs:8,stretch:!0},y.createElement(o,{icon:"trash",danger:!0,onClick:V},I("Delete")))))})}
//# sourceMappingURL=/dynamic/client/views/admin/customSounds/b0b2d7ff4d0c42c12f47941672416017d8ba29b4.map
