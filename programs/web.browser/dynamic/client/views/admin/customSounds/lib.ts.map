)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customSounds/lib.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ICustomSoundData } from '../../../../app/custom-sounds/server/methods/insertOrUpdateSound';\n\ntype ICustomSoundFile = {\n\tname: string;\n\ttype: string;\n\textension?: string;\n};\n\n// Here previousData will define if it is an update or a new entry\nexport function validate(soundData: ICustomSoundData, soundFile?: ICustomSoundFile): ('Name' | 'Sound File' | 'FileType')[] {\n\tconst errors: ('Name' | 'Sound File' | 'FileType')[] = [];\n\n\tif (!soundData.name) {\n\t\terrors.push('Name');\n\t}\n\n\tif (!soundData._id && !soundFile) {\n\t\terrors.push('Sound File');\n\t}\n\n\tif (soundFile) {\n\t\tif (!soundData.previousSound || soundData.previousSound !== soundFile) {\n\t\t\tif (!/audio\\/mp3/.test(soundFile.type) && !/audio\\/mpeg/.test(soundFile.type) && !/audio\\/x-mpeg/.test(soundFile.type)) {\n\t\t\t\terrors.push('FileType');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn errors;\n}\n\nexport const createSoundData = (\n\tsoundFile: ICustomSoundFile,\n\tname: string,\n\tpreviousData?: {\n\t\t_id: string;\n\t\textension: string;\n\t\tpreviousName: string;\n\t\tpreviousSound: {\n\t\t\textension?: string;\n\t\t};\n\t},\n): ICustomSoundData => {\n\tif (!previousData) {\n\t\treturn {\n\t\t\tname: name.trim(),\n\t\t\textension: soundFile?.name.split('.').pop() || '',\n\t\t\tnewFile: true,\n\t\t};\n\t}\n\n\treturn {\n\t\t_id: previousData._id,\n\t\tname,\n\t\textension: soundFile?.name.split('.').pop() || '',\n\t\tpreviousName: previousData.previousName,\n\t\tpreviousExtension: previousData.previousSound?.extension,\n\t\tpreviousSound: previousData.previousSound,\n\t\tnewFile: false,\n\t};\n};\n",null],"names":["validate","soundData","soundFile","errors","name","push","_id","previousSound","test","type","module","createSoundData","previousData","_previousData$previou","extension","split","pop","previousName","previousExtension","newFile","trim"],"mappings":"uBASM,SAAUA,EAASC,CAA2B,CAAEC,CAA4B,EACjF,IAAMC,EAAiD,EAAE,CAkBzD,OAhBKF,EAAUG,IAAI,EAClBD,EAAOE,IAAI,CAAC,QAGRJ,EAAUK,GAAG,EAAKJ,GACtBC,EAAOE,IAAI,CAAC,eAGTH,GACC,AAACD,EAAUM,aAAa,EAAIN,EAAUM,aAAa,GAAKL,GACvD,AAAC,aAAaM,IAAI,CAACN,EAAUO,IAAI,GAAM,cAAcD,IAAI,CAACN,EAAUO,IAAI,GAAM,gBAAgBD,IAAI,CAACN,EAAUO,IAAI,GACpHN,EAAOE,IAAI,CAAC,YAKRF,CACR,CArBAO,EAAAA,MAAAA,CAAAA,CAAAV,SAAAA,IAAAA,EAAAW,gBAAAA,IAAAA,CAAkE,GAuB3D,IAAMA,EAAkB,CAC9BT,EACAE,EACAQ,KAQqB,IAAAC,SACrB,AAAKD,EAQE,CACNN,IAAKM,EAAaN,GAAG,CACrBF,KAAAA,EACAU,UAAW,AAAAZ,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWE,IAAI,CAACW,KAAK,CAAC,KAAKC,GAAG,EAAA,GAAM,GAC/CC,aAAcL,EAAaK,YAAY,CACvCC,kBAAiB,AAA4B,OAA5BL,CAAAA,EAAED,EAAaL,aAAa,AAAbA,GAAaM,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA1BA,EAA4BC,SAAS,CACxDP,cAAeK,EAAaL,aAAa,CACzCY,QAAS,CAAA,GAdF,CACNf,KAAMA,EAAKgB,IAAI,GACfN,UAAW,AAAAZ,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWE,IAAI,CAACW,KAAK,CAAC,KAAKC,GAAG,EAAA,GAAM,GAC/CG,QAAS,CAAA,EAaZ"}