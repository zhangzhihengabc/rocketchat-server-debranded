function module(e,t,n){let a,r,i,o,l,s,u,c,d,m,y,g,f,k,p,h,b,E,P,C,H,D;n.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default(e){r=e}},1),n.link("@rocket.chat/fuselage",{Button(e){i=e},ButtonGroup(e){o=e},Pagination(e){l=e}},0),n.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){s=e},useRouteParameter(e){u=e},useMethod(e){c=e},useTranslation(e){d=e},useEndpoint(e){m=e},useRouter(e){y=e}},1),n.link("@tanstack/react-query",{useQuery(e){g=e},useQueryClient(e){f=e}},2),n.link("react",{default(e){k=e},useMemo(e){p=e},useState(e){h=e},useEffect(e){b=e}},3),n.link("../../../../../../app/utils/client/lib/SDKClient",{sdk(e){E=e}},4),n.link("../../../../../components/GenericTable/hooks/usePagination",{usePagination(e){P=e}},5),n.link("../../../../../components/Page",{default(e){C=e}},6),n.link("../../../../../components/ScrollableContentWrapper",{default(e){H=e}},7),n.link("./HistoryContent",{default(e){D=e}},8),n.exportDefault(e=>{let t=s(),n=d(),S=y(),{itemsPerPage:T,setItemsPerPage:_,current:v,setCurrent:x,itemsPerPageLabel:I,showingResultsLabel:Q}=P(),[B,G]=h(!1),[L,M]=h(0),R=c("clearIntegrationHistory"),j=u("id"),w=p(()=>({id:j,count:T,offset:v}),[j,T,v]),O=m("GET","/v1/integrations.history"),W=p(()=>["integrations/history",j,T,v],[j,T,v]),q=f(),{data:K,isLoading:z,refetch:A}=g(W,async()=>{let e=O(w);return G(!0),e},{cacheTime:99999,staleTime:99999}),F=async()=>{try{await R(j),t({type:"success",message:n("Integration_History_Cleared")}),A(),G(!1)}catch(e){t({type:"error",message:e})}};return b(()=>{if(B)return E.stream("integrationHistory",[j],e=>{if("inserted"===e.type&&(M(e=>e+1),q.setQueryData(W,t=>{if(t&&e.data)return r(r({},t),{},{history:[e.data].concat(t.history),total:t.total+1})})),"updated"===e.type){q.setQueryData(W,t=>{if(!t)return;let n=t.history.findIndex(e=>{let{_id:t}=e;return t===j});if(-1!==n)return Object.assign(t.history[n],e.diff),r({},t)});return}"removed"===e.type&&A()}).stop},[j,B,q,W,A]),k.createElement(C,a({flexDirection:"column"},e),k.createElement(C.Header,{title:n("Integration_Outgoing_WebHook_History")},k.createElement(o,null,k.createElement(i,{icon:"back",onClick:()=>S.navigate("/admin/integrations/edit/outgoing/".concat(j))},n("Back")),k.createElement(i,{icon:"trash",danger:!0,onClick:F,disabled:0===L},n("clear_history")))),k.createElement(C.Content,null,k.createElement(H,null,k.createElement(D,{key:"historyContent",data:(null==K?void 0:K.history)||[],isLoading:z})),k.createElement(l,{current:v,itemsPerPage:T,itemsPerPageLabel:I,showingResultsLabel:Q,count:(null==K?void 0:K.total)||0,onSetItemsPerPage:_,onSetCurrent:x})))})}
//# sourceMappingURL=/dynamic/client/views/admin/integrations/outgoing/history/9844d73029e241c9e1fc2b45b2c36567d8fea441.map
