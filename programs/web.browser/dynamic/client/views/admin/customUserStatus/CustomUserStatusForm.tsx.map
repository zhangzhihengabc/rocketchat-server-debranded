)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/CustomUserStatusForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUserStatus } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { FieldGroup, Button, ButtonGroup, TextInput, Field, FieldLabel, FieldRow, FieldError, Select } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useRoute, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../components/Contextualbar';\nimport GenericModal from '../../../components/GenericModal';\n\ntype CustomUserStatusFormProps = {\n\tonClose: () => void;\n\tonReload: () => void;\n\tstatus?: IUserStatus;\n};\n\nconst CustomUserStatusForm = ({ onClose, onReload, status }: CustomUserStatusFormProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { _id, name, statusType } = status || {};\n\tconst setModal = useSetModal();\n\tconst route = useRoute('user-status');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst formId = useUniqueId();\n\n\tconst {\n\t\tregister,\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { isDirty, errors },\n\t} = useForm({\n\t\tdefaultValues: { name: status?.name ?? '', statusType: status?.statusType ?? '' },\n\t});\n\n\tconst saveStatus = useEndpoint('POST', _id ? '/v1/custom-user-status.update' : '/v1/custom-user-status.create');\n\tconst deleteStatus = useEndpoint('POST', '/v1/custom-user-status.delete');\n\n\tconst handleSave = useCallback(\n\t\tasync (data) => {\n\t\t\ttry {\n\t\t\t\tawait saveStatus({ _id, name, statusType, ...data });\n\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: t('Custom_User_Status_Updated_Successfully'),\n\t\t\t\t});\n\n\t\t\t\tonReload();\n\t\t\t\troute.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[saveStatus, _id, name, statusType, route, dispatchToastMessage, t, onReload],\n\t);\n\n\tconst handleDeleteStatus = useCallback(() => {\n\t\tconst handleCancel = (): void => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tconst handleDelete = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait deleteStatus({ customUserStatusId: _id || '' });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_User_Status_Has_Been_Deleted') });\n\t\t\t\tonReload();\n\t\t\t\troute.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(() => (\n\t\t\t<GenericModal variant='danger' onConfirm={handleDelete} onCancel={handleCancel} onClose={handleCancel} confirmText={t('Delete')}>\n\t\t\t\t{t('Custom_User_Status_Delete_Warning')}\n\t\t\t</GenericModal>\n\t\t));\n\t}, [_id, route, deleteStatus, dispatchToastMessage, onReload, setModal, t]);\n\n\tconst presenceOptions: SelectOption[] = [\n\t\t['online', t('Online')],\n\t\t['busy', t('Busy')],\n\t\t['away', t('Away')],\n\t\t['offline', t('Offline')],\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FieldGroup id={formId} is='form' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Name')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput {...register('name', { required: true })} placeholder={t('Name')} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{errors?.name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Presence')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='statusType'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trules={{ required: true }}\n\t\t\t\t\t\t\t\trender={({ field }): ReactElement => <Select {...field} placeholder={t('Presence')} options={presenceOptions} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{errors?.statusType && <FieldError>{t('error-the-field-is-required', { field: t('Presence') })}</FieldError>}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit' disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{_id && (\n\t\t\t\t\t<ButtonGroup mbs={8} stretch>\n\t\t\t\t\t\t<Button icon='trash' danger onClick={handleDeleteStatus}>\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default CustomUserStatusForm;\n",null],"names":["_extends","_objectSpread","FieldGroup","Button","ButtonGroup","TextInput","Field","FieldLabel","FieldRow","FieldError","Select","useUniqueId","useSetModal","useRoute","useToastMessageDispatch","useTranslation","useEndpoint","React","useCallback","useForm","Controller","ContextualbarScrollableContent","ContextualbarFooter","GenericModal","module","link","default","v","exportDefault","_ref","_status$name","_status$statusType","onClose","onReload","status","t","_id","name","statusType","setModal","route","dispatchToastMessage","formId","register","control","handleSubmit","formState","isDirty","errors","defaultValues","saveStatus","deleteStatus","handleSave","data","type","message","push","error","handleDeleteStatus","handleCancel","handleDelete","customUserStatusId","createElement","variant","onConfirm","onCancel","confirmText","presenceOptions","Fragment","id","is","onSubmit","required","placeholder","field","rules","render","_ref2","options","stretch","onClick","form","primary","disabled","mbs","icon","danger"],"mappings":"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"}