)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/CustomUserStatusRoute.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useRoute, useRouteParameter, usePermission, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useRef, useEffect } from 'react';\n\nimport { Contextualbar, ContextualbarHeader, ContextualbarClose, ContextualbarTitle } from '../../../components/Contextualbar';\nimport Page from '../../../components/Page';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\nimport CustomUserActiveConnections from './CustomUserActiveConnections';\nimport CustomUserStatusFormWithData from './CustomUserStatusFormWithData';\nimport CustomUserStatusService from './CustomUserStatusService';\nimport CustomUserStatusTable from './CustomUserStatusTable';\n\nconst CustomUserStatusRoute = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst route = useRoute('user-status');\n\tconst context = useRouteParameter('context');\n\tconst id = useRouteParameter('id');\n\tconst canManageUserStatus = usePermission('manage-user-status');\n\tconst { data: license } = useIsEnterprise();\n\tconst presenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\n\n\tuseEffect(() => {\n\t\tpresenceDisabled && route.push({ context: 'presence-service' });\n\t}, [presenceDisabled, route]);\n\n\tconst handleItemClick = (id: string): void => {\n\t\troute.push({\n\t\t\tcontext: 'edit',\n\t\t\tid,\n\t\t});\n\t};\n\n\tconst handleNewButtonClick = useCallback(() => {\n\t\troute.push({ context: 'new' });\n\t}, [route]);\n\n\tconst handlePresenceServiceClick = useCallback(() => {\n\t\troute.push({ context: 'presence-service' });\n\t}, [route]);\n\n\tconst handleClose = useCallback(() => {\n\t\troute.push({});\n\t}, [route]);\n\n\tconst reload = useRef(() => null);\n\n\tconst handleReload = useCallback(() => {\n\t\treload.current();\n\t}, [reload]);\n\n\tif (!canManageUserStatus) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page name='admin-user-status'>\n\t\t\t\t<Page.Header title={t('User_Status')}>\n\t\t\t\t\t{!license?.isEnterprise && <CustomUserActiveConnections />}\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button onClick={handlePresenceServiceClick}>{t('Presence_service')}</Button>\n\t\t\t\t\t\t<Button onClick={handleNewButtonClick}>{t('New_custom_status')}</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Page.Header>\n\t\t\t\t<Page.Content>\n\t\t\t\t\t<CustomUserStatusTable reload={reload} onClick={handleItemClick} />\n\t\t\t\t</Page.Content>\n\t\t\t</Page>\n\t\t\t{context && (\n\t\t\t\t<Contextualbar bg='light' flexShrink={0}>\n\t\t\t\t\t<ContextualbarHeader>\n\t\t\t\t\t\t<ContextualbarTitle>\n\t\t\t\t\t\t\t{context === 'edit' && t('Custom_User_Status_Edit')}\n\t\t\t\t\t\t\t{context === 'new' && t('Custom_User_Status_Add')}\n\t\t\t\t\t\t\t{context === 'presence-service' && t('Presence_service_cap')}\n\t\t\t\t\t\t</ContextualbarTitle>\n\t\t\t\t\t\t<ContextualbarClose onClick={handleClose} />\n\t\t\t\t\t</ContextualbarHeader>\n\t\t\t\t\t{context === 'presence-service' && <CustomUserStatusService />}\n\t\t\t\t\t{(context === 'new' || context === 'edit') && (\n\t\t\t\t\t\t<CustomUserStatusFormWithData _id={id} onClose={handleClose} onReload={handleReload} />\n\t\t\t\t\t)}\n\t\t\t\t</Contextualbar>\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default CustomUserStatusRoute;\n",null],"names":["Button","ButtonGroup","useRoute","useRouteParameter","usePermission","useTranslation","useSetting","React","useCallback","useRef","useEffect","Contextualbar","ContextualbarHeader","ContextualbarClose","ContextualbarTitle","Page","useIsEnterprise","NotAuthorizedPage","CustomUserActiveConnections","CustomUserStatusFormWithData","CustomUserStatusService","CustomUserStatusTable","module","link","default","exportDefault","t","route","context","id","canManageUserStatus","data","license","presenceDisabled","push","handleNewButtonClick","handlePresenceServiceClick","handleClose","reload","handleReload","current","createElement","flexDirection","name","Header","title","isEnterprise","onClick","Content","bg","flexShrink","_id","onClose","onReload"],"mappings":"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"}