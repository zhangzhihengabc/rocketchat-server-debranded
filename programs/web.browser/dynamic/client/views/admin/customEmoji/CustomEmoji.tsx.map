)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customEmoji/CustomEmoji.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Pagination, States, StatesActions, StatesAction, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FC, MutableRefObject } from 'react';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport FilterByText from '../../../components/FilterByText';\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\n\ntype CustomEmojiProps = {\n\treload: MutableRefObject<() => void>;\n\tonClick: (emoji: string) => () => void;\n};\n\nconst CustomEmoji: FC<CustomEmojiProps> = ({ onClick, reload }) => {\n\tconst t = useTranslation();\n\n\tconst [text, setText] = useState('');\n\tconst { sortBy, sortDirection, setSort } = useSort<'name'>('name');\n\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tquery: JSON.stringify({ name: { $regex: escapeRegExp(text), $options: 'i' } }),\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\tcount: itemsPerPage,\n\t\t\t\toffset: current,\n\t\t\t}),\n\t\t\t[text, itemsPerPage, current, sortBy, sortDirection],\n\t\t),\n\t\t500,\n\t);\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name' w='x200'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='aliases' w='x200'>\n\t\t\t\t{t('Aliases')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t],\n\t\t[setSort, sortDirection, sortBy, t],\n\t);\n\n\tconst getEmojiList = useEndpoint('GET', '/v1/emoji-custom.all');\n\tconst { data, refetch, isSuccess, isLoading, isError } = useQuery(['getEmojiList', query], () => getEmojiList(query));\n\n\tuseEffect(() => {\n\t\treload.current = refetch;\n\t}, [reload, refetch]);\n\n\treturn (\n\t\t<>\n\t\t\t<FilterByText onChange={({ text }): void => setText(text)} />\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={2} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.emojis.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{isSuccess &&\n\t\t\t\t\t\t\t\tdata?.emojis.map((emojis) => (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\tkey={emojis._id}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={onClick(emojis._id)}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick(emojis._id)}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tqa-emoji-id={emojis._id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell color='default'>\n\t\t\t\t\t\t\t\t\t\t\t<Box withTruncatedText>{emojis.name}</Box>\n\t\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell color='default'>\n\t\t\t\t\t\t\t\t\t\t\t<Box withTruncatedText>{emojis.aliases}</Box>\n\t\t\t\t\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isSuccess && data && data.emojis.length === 0 && <GenericNoResults />}\n\t\t\t{isError && (\n\t\t\t\t<States>\n\t\t\t\t\t<StatesIcon name='warning' variation='danger' />\n\t\t\t\t\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\n\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\n\t\t\t\t\t</StatesActions>\n\t\t\t\t</States>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CustomEmoji;\n",null],"names":["_extends","_objectWithoutProperties","Box","Pagination","States","StatesActions","StatesAction","StatesIcon","StatesTitle","useDebouncedValue","escapeRegExp","useTranslation","useEndpoint","useQuery","React","useEffect","useMemo","useState","FilterByText","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","module","link","default","v","exportDefault","_ref","onClick","reload","t","text","setText","sortBy","sortDirection","setSort","_usePagination","current","itemsPerPage","setItemsPerPage","onSetItemsPerPage","setCurrent","onSetCurrent","paginationProps","_excluded","query","JSON","stringify","name","$regex","$options","sort","concat","count","offset","headers","createElement","key","direction","active","w","getEmojiList","data","refetch","isSuccess","isLoading","isError","Fragment","onChange","_ref2","headerCells","emojis","length","map","_id","onKeyDown","tabIndex","role","action","color","withTruncatedText","aliases","divider","total","variation"],"mappings":"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"}