)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/oauthApps/EditOauthApp.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IOAuthApps, Serialized } from '@rocket.chat/core-typings';\nimport {\n\tButton,\n\tButtonGroup,\n\tTextInput,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n\tFieldHint,\n\tTextAreaInput,\n\tToggleSwitch,\n\tFieldGroup,\n} from '@rocket.chat/fuselage';\nimport { useSetModal, useToastMessageDispatch, useRoute, useAbsoluteUrl, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ComponentProps } from 'react';\nimport React, { useCallback, useMemo } from 'react';\nimport type { SubmitHandler } from 'react-hook-form';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { ContextualbarScrollableContent } from '../../../components/Contextualbar';\nimport GenericModal from '../../../components/GenericModal';\n\ntype EditOAuthAddAppPayload = {\n\tname: string;\n\tactive: boolean;\n\tredirectUri: string;\n};\n\ntype EditOauthAppProps = {\n\tonChange: () => void;\n\tdata: Serialized<IOAuthApps>;\n} & Omit<ComponentProps<typeof ContextualbarScrollableContent>, 'data'>;\n\nconst EditOauthApp = ({ onChange, data, ...props }: EditOauthAppProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t\tcontrol,\n\t} = useForm<EditOAuthAddAppPayload>({\n\t\tdefaultValues: {\n\t\t\tname: data.name,\n\t\t\tactive: data.active,\n\t\t\tredirectUri: Array.isArray(data.redirectUri) ? data.redirectUri.join('\\n') : data.redirectUri,\n\t\t},\n\t});\n\n\tconst setModal = useSetModal();\n\n\tconst router = useRoute('admin-oauth-apps');\n\n\tconst close = useCallback(() => router.push({}), [router]);\n\n\tconst absoluteUrl = useAbsoluteUrl();\n\tconst authUrl = useMemo(() => absoluteUrl('oauth/authorize'), [absoluteUrl]);\n\tconst tokenUrl = useMemo(() => absoluteUrl('oauth/token'), [absoluteUrl]);\n\n\tconst saveApp = useEndpoint('POST', '/v1/oauth-apps.update');\n\tconst deleteApp = useEndpoint('POST', '/v1/oauth-apps.delete');\n\n\tconst onSubmit: SubmitHandler<EditOAuthAddAppPayload> = async (newData: EditOAuthAddAppPayload) => {\n\t\ttry {\n\t\t\tawait saveApp({ ...newData, appId: data._id });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Application_updated') });\n\t\t\tonChange();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst onDeleteConfirm = useCallback(async () => {\n\t\ttry {\n\t\t\tawait deleteApp({ appId: data._id });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Your_entry_has_been_deleted') });\n\t\t\tclose();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tsetModal(null);\n\t\t}\n\t}, [data._id, close, deleteApp, dispatchToastMessage, setModal, t]);\n\n\tconst openConfirmDelete = (): void =>\n\t\tsetModal(() => (\n\t\t\t<GenericModal\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={onDeleteConfirm}\n\t\t\t\tonCancel={(): void => setModal(null)}\n\t\t\t\tonClose={(): void => setModal(null)}\n\t\t\t\tconfirmText={t('Delete')}\n\t\t\t>\n\t\t\t\t{t('Application_delete_warning')}\n\t\t\t</GenericModal>\n\t\t));\n\n\treturn (\n\t\t<ContextualbarScrollableContent w='full' {...props}>\n\t\t\t<FieldGroup maxWidth='x600' alignSelf='center' w='full'>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t{t('Active')}\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='active'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\tdefaultValue={data.active}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => <ToggleSwitch onChange={field.onChange} checked={field.value} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldLabel>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Application_Name')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput {...register('name', { required: true })} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t<FieldHint>{t('Give_the_application_a_name_This_will_be_seen_by_your_users')}</FieldHint>\n\t\t\t\t\t{errors?.name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Redirect_URI')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextAreaInput rows={5} {...register('redirectUri', { required: true })} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t<FieldHint>{t('After_OAuth2_authentication_users_will_be_redirected_to_this_URL')}</FieldHint>\n\t\t\t\t\t{errors?.redirectUri && <FieldError>{t('error-the-field-is-required', { field: t('Redirect_URI') })}</FieldError>}\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Client_ID')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={data.clientId} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Client_Secret')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={data.clientSecret} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Authorization_URL')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={authUrl} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Access_Token_URL')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput value={tokenUrl} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t\t\t<Button primary onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t<Button icon='trash' danger onClick={openConfirmDelete}>\n\t\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t</ContextualbarScrollableContent>\n\t);\n};\n\nexport default EditOauthApp;\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","Button","ButtonGroup","TextInput","Field","FieldLabel","FieldRow","FieldError","FieldHint","TextAreaInput","ToggleSwitch","FieldGroup","useSetModal","useToastMessageDispatch","useRoute","useAbsoluteUrl","useTranslation","useEndpoint","React","useCallback","useMemo","useForm","Controller","ContextualbarScrollableContent","GenericModal","module","link","default","v","exportDefault","_ref","onChange","data","props","_excluded","t","dispatchToastMessage","register","handleSubmit","formState","errors","control","defaultValues","name","active","redirectUri","Array","isArray","join","setModal","router","close","push","absoluteUrl","authUrl","tokenUrl","saveApp","deleteApp","onSubmit","newData","appId","_id","type","message","error","onDeleteConfirm","createElement","w","maxWidth","alignSelf","display","justifyContent","defaultValue","render","_ref2","field","checked","value","required","rows","clientId","clientSecret","stretch","onClick","primary","icon","danger","variant","onConfirm","onCancel","onClose","confirmText"],"mappings":"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"}