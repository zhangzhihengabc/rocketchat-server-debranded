)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/ComposerUserActionIndicator/ComposerUserActionIndicator.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, Fragment } from 'react';\n\nimport { UserAction } from '../../../../../app/ui/client/lib/UserAction';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\nconst maxUsernames = 5;\n\nconst ComposerUserActionIndicator = ({ rid, tmid }: { rid: string; tmid?: string }): ReactElement => {\n\tconst t = useTranslation();\n\tconst actions = useReactiveValue(\n\t\tuseCallback(() => {\n\t\t\tconst roomAction = UserAction.get(tmid || rid) || {};\n\n\t\t\tconst activities = Object.entries(roomAction);\n\n\t\t\treturn activities\n\t\t\t\t.map(([key, _users]) => {\n\t\t\t\t\tconst action = key.split('-')[1];\n\n\t\t\t\t\tconst users = Object.keys(_users);\n\t\t\t\t\tif (users.length === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t\t.filter(Boolean) as {\n\t\t\t\taction: 'typing' | 'recording' | 'uploading' | 'playing';\n\t\t\t\tusers: string[];\n\t\t\t}[];\n\t\t}, [rid, tmid]),\n\t);\n\treturn (\n\t\t<Box h='24px' className='rc-message-box__activity-wrapper' fontScale='p2' color='annotation' aria-live='polite'>\n\t\t\t{actions.map(({ action, users }, index) => (\n\t\t\t\t<Fragment key={action}>\n\t\t\t\t\t{index > 0 && ', '}\n\t\t\t\t\t{users.length < maxUsernames\n\t\t\t\t\t\t? users.join(', ')\n\t\t\t\t\t\t: `${users.slice(0, maxUsernames - 1).join(', ')} ${t('and')} ${t('others')}`}{' '}\n\t\t\t\t\t{users.length > 1 ? t(`are_${action}`) : t(`is_${action}`)}\n\t\t\t\t</Fragment>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default ComposerUserActionIndicator;\n",null],"names":["Box","useTranslation","React","useCallback","Fragment","UserAction","useReactiveValue","module","link","default","exportDefault","_ref","rid","tmid","t","actions","roomAction","get","activities","Object","entries","map","_ref2","key","_users","action","split","users","keys","length","filter","Boolean","createElement","h","className","fontScale","color","_ref3","index","join","concat","slice","maxUsernames"],"mappings":"2BAAAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAR,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAF,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA5CC,EAAOG,aAAa,CAUgBC,IAAgE,GAA/D,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAAA,CAAsC,CAAAF,EAC3EG,EAAIb,IACJc,EAAUT,EACfH,EAAY,KACX,IAAMa,EAAaX,EAAWY,GAAG,CAACJ,GAAQD,IAAQ,CAAA,EAE5CM,EAAaC,OAAOC,OAAO,CAACJ,GAElC,OAAOE,EACLG,GAAG,CAACC,IAAkB,GAAjB,CAACC,EAAKC,EAAO,CAAAF,EACZG,EAASF,EAAIG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE1BC,EAAQR,OAAOS,IAAI,CAACJ,GAC1B,GAAIG,AAAiB,IAAjBA,EAAME,MAAM,CAIhB,MAAO,CACNJ,OAAAA,EACAE,MAAAA,EAEF,GACCG,MAAM,CAACC,QAIV,EAAG,CAACnB,EAAKC,EAAK,GAEf,OACCX,EAAA8B,aAAA,CAAChC,EAAG,CAACiC,EAAE,OAAOC,UAAU,mCAAmCC,UAAU,KAAKC,MAAM,aAAa,YAAU,QAAQ,EAC7GrB,EAAQM,GAAG,CAAC,CAAAgB,EAAoBC,KAAK,GAAxB,CAAEb,OAAAA,CAAM,CAAEE,MAAAA,CAAAA,CAAO,CAAAU,EAAA,OAC9BnC,EAAA8B,aAAA,CAAC5B,EAAQ,CAACmB,IAAKE,CAAO,EACpBa,EAAQ,GAAK,KACbX,EAAME,MAAM,CAnCG,EAoCbF,EAAMY,IAAI,CAAC,MAAK,GAAAC,MAAA,CACbb,EAAMc,KAAK,CAAC,EAAGC,GAAkBH,IAAI,CAAC,MAAK,KAAAC,MAAA,CAAI1B,EAAE,OAAM,KAAA0B,MAAA,CAAI1B,EAAE,WAAa,IAC/Ea,EAAME,MAAM,CAAG,EAAIf,EAAC,OAAA0B,MAAA,CAAQf,IAAYX,EAAC,MAAA0B,MAAA,CAAOf,IACvC,GAIf"}