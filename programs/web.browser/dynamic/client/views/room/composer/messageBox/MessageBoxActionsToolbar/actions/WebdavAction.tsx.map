)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/composer/messageBox/MessageBoxActionsToolbar/actions/WebdavAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IWebdavAccountIntegration } from '@rocket.chat/core-typings';\nimport { Option, OptionIcon, OptionContent } from '@rocket.chat/fuselage';\nimport { useTranslation, useSetting, useSetModal } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport { WebdavAccounts } from '../../../../../../../app/models/client';\nimport { useReactiveValue } from '../../../../../../hooks/useReactiveValue';\nimport type { ChatAPI } from '../../../../../../lib/chats/ChatAPI';\nimport { useChat } from '../../../../contexts/ChatContext';\nimport AddWebdavAccountModal from '../../../../webdav/AddWebdavAccountModal';\nimport WebdavFilePickerModal from '../../../../webdav/WebdavFilePickerModal';\n\nconst getWebdavAccounts = (): IWebdavAccountIntegration[] => WebdavAccounts.find().fetch();\n\nconst WebdavAction = ({ chatContext }: { chatContext?: ChatAPI }) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst webDavAccounts = useReactiveValue(getWebdavAccounts);\n\n\tconst webDavEnabled = useSetting('Webdav_Integration_Enabled');\n\n\tconst handleCreateWebDav = () => setModal(<AddWebdavAccountModal onClose={() => setModal(null)} onConfirm={() => setModal(null)} />);\n\n\tconst chat = useChat() ?? chatContext;\n\n\tconst handleUpload = async (file: File, description?: string) =>\n\t\tchat?.uploads.send(file, {\n\t\t\tdescription,\n\t\t});\n\n\tconst handleOpenWebdav = (account: IWebdavAccountIntegration) =>\n\t\tsetModal(<WebdavFilePickerModal account={account} onUpload={handleUpload} onClose={() => setModal(null)} />);\n\n\treturn (\n\t\t<>\n\t\t\t<Option\n\t\t\t\t{...(!webDavEnabled && { title: t('WebDAV_Integration_Not_Allowed') })}\n\t\t\t\tdisabled={!webDavEnabled}\n\t\t\t\tonClick={handleCreateWebDav}\n\t\t\t>\n\t\t\t\t<OptionIcon name='cloud-plus' />\n\t\t\t\t<OptionContent>{t('Add_Server')}</OptionContent>\n\t\t\t</Option>\n\t\t\t{webDavEnabled &&\n\t\t\t\twebDavAccounts.length > 0 &&\n\t\t\t\twebDavAccounts.map((account) => (\n\t\t\t\t\t<Option key={account._id} onClick={() => handleOpenWebdav(account)}>\n\t\t\t\t\t\t<OptionIcon name='cloud-plus' />\n\t\t\t\t\t\t<OptionContent>{account.name}</OptionContent>\n\t\t\t\t\t</Option>\n\t\t\t\t))}\n\t\t</>\n\t);\n};\n\nexport default WebdavAction;\n",null],"names":["_extends","Option","OptionIcon","OptionContent","useTranslation","useSetting","useSetModal","React","WebdavAccounts","useReactiveValue","useChat","AddWebdavAccountModal","WebdavFilePickerModal","module","link","default","v","getWebdavAccounts","find","fetch","exportDefault","_ref","_useChat","chatContext","t","setModal","webDavAccounts","webDavEnabled","chat","handleUpload","file","description","uploads","send","handleOpenWebdav","account","createElement","onUpload","onClose","Fragment","title","disabled","onClick","onConfirm","name","length","map","key","_id"],"mappings":"2BACAA,EAAAC,EAASC,EAAQC,EAAyDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjEC,EAAQC,IAAA,CAAA,iCAAiC,CAAAC,QAAAA,CAAAA,EAAAf,EAAwBgB,CAAA,CAAA,EAAA,GAA7CH,EAAaC,IAAE,CAAA,wBAAM,CAAuBb,OAACe,CAAA,EAAAf,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,yCAAAA,CAAAL,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAJ,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAH,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAW1E,IAAMK,EAAoB,IAAmCT,EAAeU,IAAI,GAAGC,KAAK,GAXxFN,EAAOO,aAAU,CAaIC,IAA+C,IAAAC,EAAA,GAA9C,CAAEC,YAAAA,CAAAA,CAAwC,CAAAF,EACzDG,EAAIpB,IACJqB,EAAWnB,IACXoB,EAAiBjB,EAAiBQ,GAElCU,EAAgBtB,EAAW,8BAI3BuB,EAAI,AAAY,OAAZN,CAAAA,EAAGZ,GAAO,GAAEY,AAAA,KAAA,IAAAA,EAAAA,EAAIC,EAEpBM,EAAe,MAAOC,EAAYC,IACvCH,MAAAA,EAAI,KAAA,EAAJA,EAAMI,OAAO,CAACC,IAAI,CAACH,EAAM,CACxBC,YAAAA,IAGIG,EAAoBC,GACzBV,EAASlB,EAAA6B,aAAA,CAACxB,EAAqB,CAACuB,QAASA,EAASE,SAAUR,EAAcS,QAAS,IAAMb,EAAS,KAAM,IAEzG,OACClB,EAAA6B,aAAA,CAAA7B,EAAAgC,QAAA,CAAA,KACChC,EAAA6B,aAAA,CAACnC,EAAMD,EAAA,CAAA,EACD,CAAC2B,GAAiB,CAAEa,MAAOhB,EAAE,iCAAiC,EAAE,CACrEiB,SAAU,CAACd,EACXe,QAjBwB,IAAMjB,EAASlB,EAAA6B,aAAA,CAACzB,EAAqB,CAAC2B,QAAS,IAAMb,EAAS,MAAOkB,UAAW,IAAMlB,EAAS,KAAM,GAiBjG,GAE5BlB,EAAA6B,aAAA,CAAClC,EAAU,CAAC0C,KAAK,YAAY,GAC7BrC,EAAA6B,aAAA,CAACjC,EAAa,KAAEqB,EAAE,gBAElBG,GACAD,EAAemB,MAAM,CAAG,GACxBnB,EAAeoB,GAAG,CAAEX,GACnB5B,EAAA6B,aAAA,CAACnC,EAAM,CAAC8C,IAAKZ,EAAQa,GAAI,CAACN,QAAS,IAAMR,EAAiBC,EAAS,EAClE5B,EAAA6B,aAAA,CAAClC,EAAU,CAAC0C,KAAK,YAAY,GAC7BrC,EAAA6B,aAAA,CAACjC,EAAa,KAAEgC,EAAQS,IAAI,IAKlC"}