function module(e,o,t){let n,i,a,s,r,l,c,d,u,m;t.link("@rocket.chat/ui-contexts",{useEndpoint(e){n=e},useTranslation(e){i=e},useToastMessageDispatch(e){a=e}},0),t.link("@tanstack/react-query",{useQuery(e){s=e},useQueryClient(e){r=e}},1),t.link("react",{default(e){l=e}},2),t.link("../../../components/GenericModal",{default(e){c=e}},3),t.link("../../../components/message/content/location/MapView",{default(e){d=e}},4),t.link("./getGeolocationPermission",{getGeolocationPermission(e){u=e}},5),t.link("./getGeolocationPosition",{getGeolocationPosition(e){m=e}},6),t.exportDefault(e=>{let{rid:o,tmid:t,onClose:g}=e,_=i(),f=a(),{data:p,isLoading:y}=s(["geolocationPermission"],u),{data:h}=s(["geolocationPosition",p],async()=>{if(!y&&"prompt"!==p&&"denied"!==p)return m()}),k=r(),C=n("POST","/v1/chat.sendMessage"),P=async()=>{try{let e=await m();k.setQueryData(["geolocationPosition","granted"],e),k.setQueryData(["geolocationPermission"],"granted")}catch(e){k.setQueryData(["geolocationPermission"],()=>u)}};return y||"prompt"===p?l.createElement(c,{title:_("You_will_be_asked_for_permissions"),confirmText:_("Continue"),onConfirm:P,onClose:g,onCancel:g}):"denied"!==p&&h?l.createElement(c,{title:_("Share_Location_Title"),confirmText:_("Share"),onConfirm:()=>{if(!h)throw Error("Failed to load position");try{C({message:{rid:o,tmid:t,location:{type:"Point",coordinates:[h.coords.longitude,h.coords.latitude]}}})}catch(e){f({type:"error",message:e})}finally{g()}},onClose:g,onCancel:g},l.createElement(d,{latitude:h.coords.latitude,longitude:h.coords.longitude})):l.createElement(c,{title:_("Cannot_share_your_location"),confirmText:_("Ok"),onConfirm:g,onClose:g},_("The_necessary_browser_permissions_for_location_sharing_are_not_granted"))})}
//# sourceMappingURL=/dynamic/client/views/room/ShareLocation/82ae27909a3395384b662c88357bac6a85d11fc3.map
