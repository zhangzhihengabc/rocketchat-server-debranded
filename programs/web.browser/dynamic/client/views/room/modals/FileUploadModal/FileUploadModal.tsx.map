)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\nimport React, { memo, useState, useEffect } from 'react';\n\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tfileDescription?: string;\n\tinvalidContentType: boolean;\n\tshowDescription?: boolean;\n};\n\nconst FileUploadModal = ({\n\tonClose,\n\tfile,\n\tfileName,\n\tfileDescription,\n\tonSubmit,\n\tinvalidContentType,\n\tshowDescription = true,\n}: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>(fileDescription || '');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\n\t\t\t<Box display='flex' flexDirection='column' height='100%'>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{!name && <FieldError>{t('error-the-field-is-required', { field: t('Name') })}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{showDescription && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button secondary onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit' disabled={!name}>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n",null],"names":["_extends","Modal","Box","Field","FieldGroup","FieldLabel","FieldRow","FieldError","TextInput","Button","useAutoFocus","useToastMessageDispatch","useTranslation","React","memo","useState","useEffect","FilePreview","module","link","default","v","exportDefault","_ref","onClose","file","fileName","fileDescription","onSubmit","invalidContentType","showDescription","name","setName","description","setDescription","t","dispatchToastMessage","ref","handleSubmit","e","preventDefault","type","message","field","size","createElement","wrapperFunction","props","is","display","flexDirection","height","Header","Title","Close","onClick","Content","maxHeight","w","justifyContent","alignContent","mbe","value","onChange","currentTarget","placeholder","Footer","FooterControllers","secondary","primary","disabled"],"mappings":"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"}