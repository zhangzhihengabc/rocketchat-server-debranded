)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { Icon } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport { useMemo } from 'react';\n\nimport type { GenericMenuItemProps } from '../../../../components/GenericMenu/GenericMenuItem';\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\nimport { useBlockUserAction } from './actions/useBlockUserAction';\nimport { useCallAction } from './actions/useCallAction';\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\nimport { useMuteUserAction } from './actions/useMuteUserAction';\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\nimport { useReportUser } from './actions/useReportUser';\n\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\n\nexport type UserInfoAction = {\n\tcontent: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\tonClick: () => void;\n\ttype?: UserInfoActionType;\n\tvariant?: 'danger';\n};\n\ntype UserMenuAction = {\n\tid: string;\n\ttitle: string;\n\titems: GenericMenuItemProps[];\n}[];\n\nexport const useUserInfoActions = (\n\tuser: Pick<IUser, '_id' | 'username' | 'name'>,\n\trid: IRoom['_id'],\n\treload?: () => void,\n\tsize = 2,\n): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\n\tconst blockUser = useBlockUserAction(user, rid);\n\tconst changeLeader = useChangeLeaderAction(user, rid);\n\tconst changeModerator = useChangeModeratorAction(user, rid);\n\tconst openModerationConsole = useRedirectModerationConsole(user._id);\n\tconst changeOwner = useChangeOwnerAction(user, rid);\n\tconst openDirectMessage = useDirectMessageAction(user, rid);\n\tconst ignoreUser = useIgnoreUserAction(user, rid);\n\tconst muteUser = useMuteUserAction(user, rid);\n\tconst removeUser = useRemoveUserAction(user, rid, reload);\n\tconst call = useCallAction(user);\n\tconst reportUserOption = useReportUser(user);\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\n\tconst userinfoActions = useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\n\t\t\t...(call && { call }),\n\t\t\t...(changeOwner && { changeOwner }),\n\t\t\t...(changeLeader && { changeLeader }),\n\t\t\t...(changeModerator && { changeModerator }),\n\t\t\t...(openModerationConsole && { openModerationConsole }),\n\t\t\t...(ignoreUser && { ignoreUser }),\n\t\t\t...(muteUser && { muteUser }),\n\t\t\t...(blockUser && { toggleBlock: blockUser }),\n\t\t\t...(reportUserOption && { reportUser: reportUserOption }),\n\t\t\t...(removeUser && { removeUser }),\n\t\t}),\n\t\t[\n\t\t\topenDirectMessage,\n\t\t\tisLayoutEmbedded,\n\t\t\tcall,\n\t\t\tchangeOwner,\n\t\t\tchangeLeader,\n\t\t\tchangeModerator,\n\t\t\tignoreUser,\n\t\t\tmuteUser,\n\t\t\tblockUser,\n\t\t\tremoveUser,\n\t\t\treportUserOption,\n\t\t\topenModerationConsole,\n\t\t],\n\t);\n\n\tconst actionSpread = useMemo(() => {\n\t\tconst entries = Object.entries(userinfoActions);\n\n\t\tconst options = entries.slice(0, size);\n\t\tconst slicedOptions = entries.slice(size, entries.length);\n\n\t\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\n\t\t\tconst newItem = { ...item, id: item.content };\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(newItem);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, title: '', items: [newItem] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as UserMenuAction);\n\n\t\treturn { actions: options, menuActions };\n\t}, [size, userinfoActions]);\n\n\treturn actionSpread;\n};\n",null],"names":["_objectSpread","useMemo","useEmbeddedLayout","useBlockUserAction","useCallAction","useChangeLeaderAction","useChangeModeratorAction","useChangeOwnerAction","useDirectMessageAction","useIgnoreUserAction","useMuteUserAction","useRedirectModerationConsole","useRemoveUserAction","useReportUser","module","link","default","export","useUserInfoActions","user","rid","reload","size","arguments","length","undefined","blockUser","changeLeader","changeModerator","openModerationConsole","_id","changeOwner","openDirectMessage","ignoreUser","muteUser","removeUser","call","reportUserOption","isLayoutEmbedded","userinfoActions","toggleBlock","reportUser","actionSpread","entries","Object","options","slice","slicedOptions","menuActions","reduce","acc","_ref","_key","item","group","type","section","find","id","newItem","content","items","push","title","actions"],"mappings":"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"}