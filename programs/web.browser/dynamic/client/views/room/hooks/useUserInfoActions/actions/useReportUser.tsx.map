)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions/actions/useReportUser.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { useEndpoint, useSetModal, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useUserDisplayName } from '../../../../../hooks/useUserDisplayName';\nimport ReportUserModal from '../../../contextualBar/UserInfo/ReportUserModal';\nimport type { UserInfoAction } from '../useUserInfoActions';\n\nexport const useReportUser = (user: Pick<IUser, '_id' | 'username' | 'name'>): UserInfoAction | undefined => {\n\tconst { _id: uid, username, name } = user;\n\tconst ownUserId = useUserId();\n\tconst setModal = useSetModal();\n\n\tconst { t } = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst displayName = useUserDisplayName({ username, name });\n\n\tconst reportUser = useEndpoint('POST', '/v1/moderation.reportUser');\n\tconst reportUserMutation = useMutation(\n\t\t['reportUser', uid],\n\t\tasync (description: string) => {\n\t\t\treportUser({ description, userId: uid });\n\t\t},\n\t\t{\n\t\t\tonSuccess: () => dispatchToastMessage({ type: 'success', message: t('Report_has_been_sent') }),\n\t\t\tonError: (error) => dispatchToastMessage({ type: 'error', message: error }),\n\t\t\tonSettled: () => setModal(),\n\t\t},\n\t);\n\n\tconst openReportUserModal = useMemo(() => {\n\t\tconst action = () =>\n\t\t\tsetModal(\n\t\t\t\t<ReportUserModal\n\t\t\t\t\tonConfirm={reportUserMutation.mutate}\n\t\t\t\t\tonClose={() => setModal()}\n\t\t\t\t\tdisplayName={displayName || ''}\n\t\t\t\t\tusername={username || ''}\n\t\t\t\t/>,\n\t\t\t);\n\n\t\treturn ownUserId !== uid\n\t\t\t? {\n\t\t\t\t\ticon: 'warning' as const,\n\t\t\t\t\tcontent: t('Report'),\n\t\t\t\t\tonClick: action,\n\t\t\t\t\ttype: 'moderation' as const,\n\t\t\t\t\tvariant: 'danger' as const,\n\t\t\t  }\n\t\t\t: undefined;\n\t}, [ownUserId, uid, t, setModal, username, reportUserMutation.mutate, displayName]);\n\n\treturn openReportUserModal;\n};\n",null],"names":["useEndpoint","useSetModal","useToastMessageDispatch","useMutation","React","useMemo","useTranslation","useUserDisplayName","ReportUserModal","module","export","useReportUser","useUserId","default","user","_id","uid","username","name","ownUserId","setModal","t","dispatchToastMessage","displayName","reportUser","reportUserMutation","description","userId","onSuccess","type","message","onError","error","onSettled","openReportUserModal","icon","content","onClick","createElement","onConfirm","mutate","onClose","variant","undefined"],"mappings":"2BACmCA,EAAyBC,EAAiBC,EAAAA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxGC,EAAOC,MAAE,CAAA,CAAAC,cAAa,IAAWA,CAAE,GAAqEF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAU,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAH,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAI,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAF,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kDAAAA,CAAAI,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GASjG,IAAMG,EAAiBG,IAC7B,GAAM,CAAEC,IAAKC,CAAG,CAAEC,SAAAA,CAAQ,CAAEC,KAAAA,CAAAA,CAAM,CAAGJ,EAC/BK,EAAYP,IACZQ,EAAWnB,IAEX,CAAEoB,EAAAA,CAAAA,CAAG,CAAGf,IACRgB,EAAuBpB,IACvBqB,EAAchB,EAAmB,CAAEU,SAAAA,EAAUC,KAAAA,CAAI,GAEjDM,EAAaxB,EAAY,OAAQ,6BACjCyB,EAAqBtB,EAC1B,CAAC,aAAca,EAAI,CACnB,MAAOU,IACNF,EAAW,CAAEE,YAAAA,EAAaC,OAAQX,CAAG,EACtC,EACA,CACCY,UAAW,IAAMN,EAAqB,CAAEO,KAAM,UAAWC,QAAST,EAAE,uBAAuB,GAC3FU,QAAUC,GAAUV,EAAqB,CAAEO,KAAM,QAASC,QAASE,CAAK,GACxEC,UAAW,IAAMb,MAIbc,EAAsB7B,EAAQ,IAW5Bc,IAAcH,EAClB,CACAmB,KAAM,UACNC,QAASf,EAAE,UACXgB,QAdY,IACdjB,EACChB,EAAAkC,aAAA,CAAC9B,EAAe,CACf+B,UAAWd,EAAmBe,MAAO,CACrCC,QAAS,IAAMrB,IACfG,YAAaA,GAAe,GAC5BN,SAAUA,GAAY,EAAG,IASzBY,KAAM,aACNa,QAAS,UAETC,KAAAA,EACD,CAACxB,EAAWH,EAAKK,EAAGD,EAAUH,EAAUQ,EAAmBe,MAAM,CAAEjB,EAAY,EAElF,OAAOW,CACR"}