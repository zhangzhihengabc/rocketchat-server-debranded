)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/body/hooks/useGoToHomeOnRemoved.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isOmnichannelRoom, type IRoom } from '@rocket.chat/core-typings';\nimport { useRouter, useStream, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { useOmnichannelCloseRoute } from '../../../../hooks/omnichannel/useOmnichannelCloseRoute';\n\nexport function useGoToHomeOnRemoved(room: IRoom, userId?: string): void {\n\tconst router = useRouter();\n\tconst queryClient = useQueryClient();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst subscribeToNotifyUser = useStream('notify-user');\n\tconst t = useTranslation();\n\tconst { navigateHome } = useOmnichannelCloseRoute();\n\n\tuseEffect(() => {\n\t\tif (!userId) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn subscribeToNotifyUser(`${userId}/subscriptions-changed`, (event, subscription) => {\n\t\t\tif (event === 'removed' && subscription.rid === room._id) {\n\t\t\t\tqueryClient.invalidateQueries(['rooms', room._id]);\n\n\t\t\t\tif (isOmnichannelRoom({ t: room.t })) {\n\t\t\t\t\tnavigateHome();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: t('You_have_been_removed_from__roomName_', {\n\t\t\t\t\t\troomName: room?.fname || room?.name || '',\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\trouter.navigate('/home');\n\t\t\t}\n\t\t});\n\t}, [\n\t\tuserId,\n\t\trouter,\n\t\tsubscribeToNotifyUser,\n\t\troom._id,\n\t\troom.t,\n\t\troom?.fname,\n\t\troom?.name,\n\t\tt,\n\t\tdispatchToastMessage,\n\t\tqueryClient,\n\t\tnavigateHome,\n\t]);\n}\n",null],"names":["isOmnichannelRoom","useRouter","useStream","useToastMessageDispatch","useTranslation","useQueryClient","useEffect","useOmnichannelCloseRoute","useGoToHomeOnRemoved","room","userId","router","queryClient","dispatchToastMessage","subscribeToNotifyUser","t","navigateHome","concat","event","subscription","rid","_id","invalidateQueries","type","message","roomName","fname","name","navigate","module","export"],"mappings":"2BAA0EA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAOpE,SAAUC,EAAqBC,CAAW,CAAEC,CAAe,EAChE,IAAMC,EAASV,IACTW,EAAcP,IACdQ,EAAuBV,IACvBW,EAAwBZ,EAAU,eAClCa,EAAIX,IACJ,CAAEY,aAAAA,CAAAA,CAAc,CAAGT,IAEzBD,EAAU,KACT,GAAKI,EAIL,OAAOI,EAAqB,GAAAG,MAAA,CAAIP,EAAM,0BAA0B,CAACQ,EAAOC,KACvE,GAAID,AAAU,YAAVA,GAAuBC,EAAaC,GAAG,GAAKX,EAAKY,GAAG,CAAE,CAGzD,GAFAT,EAAYU,iBAAiB,CAAC,CAAC,QAASb,EAAKY,GAAG,CAAC,EAE7CrB,EAAkB,CAAEe,EAAGN,EAAKM,CAAAA,AAAC,GAAK,CACrCC,IACA,OAGDH,EAAqB,CACpBU,KAAM,OACNC,QAAST,EAAE,wCAAyC,CACnDU,SAAU,AAAAhB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,AAALA,GAASjB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,AAAJA,GAAQ,OAIzChB,EAAOiB,QAAQ,CAAC,SAElB,EACD,EAAG,CACFlB,EACAC,EACAG,EACAL,EAAKY,GAAG,CACRZ,EAAKM,CAAC,CACNN,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,CACXjB,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,CACVZ,EACAF,EACAD,EACAI,EACA,CACF,CApDAa,EAAOC,MAAE,CAAA,CAAAtB,qBAAqC,IAAAA,CAAA,GAA4BqB,EAAAA,IAAAA,CAAAA,4BAAAA,CAAA7B,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAA6B,EAAAA,IAAAA,CAAAA,2BAAAA,CAAA5B,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAyB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAxB,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAwB,EAAAA,IAAAA,CAAAA,QAAAA,CAAAvB,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAuB,EAAAA,IAAAA,CAAAA,yDAAAA,CAAAtB,yBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}