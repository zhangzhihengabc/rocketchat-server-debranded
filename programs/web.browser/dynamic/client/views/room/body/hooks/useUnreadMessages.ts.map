)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/body/hooks/useUnreadMessages.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { Dispatch, SetStateAction } from 'react';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { LegacyRoomManager, RoomHistoryManager } from '../../../../../app/ui-utils/client';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\ninterface IUnreadMessages {\n\tcount: number;\n\tsince: Date;\n}\n\nexport const useUnreadMessages = (\n\troom: IRoom,\n): readonly [data: IUnreadMessages | undefined, setUnreadCount: Dispatch<SetStateAction<number>>] => {\n\tconst notLoadedCount = useReactiveValue(useCallback(() => RoomHistoryManager.getRoom(room._id).unreadNotLoaded.get(), [room._id]));\n\tconst [loadedCount, setLoadedCount] = useState(0);\n\n\tconst count = useMemo(() => notLoadedCount + loadedCount, [notLoadedCount, loadedCount]);\n\n\tconst since = useReactiveValue(useCallback(() => LegacyRoomManager.getOpenedRoomByRid(room._id)?.unreadSince.get(), [room._id]));\n\n\treturn useMemo(() => {\n\t\tif (count && since) {\n\t\t\treturn [{ count, since }, setLoadedCount];\n\t\t}\n\n\t\treturn [undefined, setLoadedCount];\n\t}, [count, since]);\n};\n",null],"names":["useCallback","useMemo","useState","LegacyRoomManager","RoomHistoryManager","useReactiveValue","module","export","useUnreadMessages","room","notLoadedCount","getRoom","_id","unreadNotLoaded","get","loadedCount","setLoadedCount","count","since","_LegacyRoomManager$ge","getOpenedRoomByRid","unreadSince","undefined"],"mappings":"2BAEuDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,kBAAsB,IAAAA,CAAuB,GAACF,EAAAA,IAAAA,CAAAA,QAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAH,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAUhD,IAAMG,EACZC,IAEA,IAAMC,EAAiBL,EAAiBL,EAAY,IAAMI,EAAmBO,OAAO,CAACF,EAAKG,GAAG,EAAEC,eAAe,CAACC,GAAG,GAAI,CAACL,EAAKG,GAAG,CAAC,GAC1H,CAACG,EAAaC,EAAe,CAAGd,EAAS,GAEzCe,EAAQhB,EAAQ,IAAMS,EAAiBK,EAAa,CAACL,EAAgBK,EAAY,EAEjFG,EAAQb,EAAiBL,EAAY,KAAA,IAAAmB,EAAA,OAAA,AAAoD,OAApDA,CAAAA,EAAMhB,EAAkBiB,kBAAkB,CAACX,EAAKG,GAAG,CAAA,GAACO,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA9CA,EAAgDE,WAAW,CAACP,GAAG,EAAE,EAAE,CAACL,EAAKG,GAAG,CAAC,GAE9H,OAAOX,EAAQ,IACd,AAAIgB,GAASC,EACL,CAAC,CAAED,MAAAA,EAAOC,MAAAA,CAAK,EAAIF,EAAe,CAGnC,CAACM,KAAAA,EAAWN,EAAe,CAChC,CAACC,EAAOC,EAAM,CAClB"}