)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/MessageSearchTab/components/MessageSearchForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessageSearchProvider } from '@rocket.chat/core-typings';\nimport { Box, Field, FieldLabel, FieldRow, FieldHint, Icon, TextInput, ToggleSwitch } from '@rocket.chat/fuselage';\nimport { useDebouncedCallback, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useEffect } from 'react';\nimport { useForm, useWatch } from 'react-hook-form';\n\ntype MessageSearchFormProps = {\n\tprovider: IMessageSearchProvider;\n\tonSearch: (params: { searchText: string; globalSearch: boolean }) => void;\n};\n\nconst MessageSearchForm = ({ provider, onSearch }: MessageSearchFormProps) => {\n\tconst { handleSubmit, register, setFocus, control } = useForm({\n\t\tdefaultValues: {\n\t\t\tsearchText: '',\n\t\t\tglobalSearch: false,\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetFocus('searchText');\n\t}, [setFocus]);\n\n\tconst debouncedOnSearch = useDebouncedCallback(useMutableCallback(onSearch), 300);\n\n\tconst submitHandler = handleSubmit(({ searchText, globalSearch }) => {\n\t\tdebouncedOnSearch.cancel();\n\t\tonSearch({ searchText, globalSearch });\n\t});\n\n\tconst searchText = useWatch({ control, name: 'searchText' });\n\tconst globalSearch = useWatch({ control, name: 'globalSearch' });\n\n\tuseEffect(() => {\n\t\tdebouncedOnSearch({ searchText, globalSearch });\n\t}, [debouncedOnSearch, searchText, globalSearch]);\n\n\tconst globalSearchEnabled = provider.settings.GlobalSearchEnabled;\n\tconst globalSearchToggleId = useUniqueId();\n\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<Box\n\t\t\tdisplay='flex'\n\t\t\tflexGrow={0}\n\t\t\tflexShrink={1}\n\t\t\tflexDirection='column'\n\t\t\tp={24}\n\t\t\tborderBlockEndWidth={2}\n\t\t\tborderBlockEndStyle='solid'\n\t\t\tborderBlockEndColor='extra-light'\n\t\t>\n\t\t\t<Box is='form' onSubmit={submitHandler}>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\taria-label={t('Search_Messages')}\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\t{...register('searchText')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t\t{provider.description && <FieldHint dangerouslySetInnerHTML={{ __html: t(provider.description as TranslationKey) }} />}\n\t\t\t\t</Field>\n\t\t\t\t{globalSearchEnabled && (\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<ToggleSwitch id={globalSearchToggleId} {...register('globalSearch')} />\n\t\t\t\t\t\t\t<FieldLabel htmlFor={globalSearchToggleId}>{t('Global_Search')}</FieldLabel>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default MessageSearchForm;\n",null],"names":["_extends","Box","Field","FieldLabel","FieldRow","FieldHint","Icon","TextInput","ToggleSwitch","useDebouncedCallback","useMutableCallback","useUniqueId","useTranslation","React","useEffect","useForm","useWatch","module","link","default","v","exportDefault","_ref","provider","onSearch","handleSubmit","register","setFocus","control","defaultValues","searchText","globalSearch","debouncedOnSearch","submitHandler","_ref2","cancel","name","globalSearchEnabled","settings","GlobalSearchEnabled","globalSearchToggleId","t","createElement","display","flexGrow","flexShrink","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","is","onSubmit","addon","size","placeholder","autoComplete","description","dangerouslySetInnerHTML","__html","id","htmlFor"],"mappings":"2BACAA,EAAAC,EAAOC,EAAOC,EAAOC,EAAYC,EAAUC,EAAAC,EAAeC,EAAyDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvGC,EAAOC,IAAE,CAAA,iCAAqC,CAAAC,QAAEC,CAAA,EAASpB,EAAEoB,CAAA,CAAA,EAAY,GAAZH,EAAAA,IAAY,CAAA,wBAAQ,CAAAhB,IAAAA,CAAuB,EAACA,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAR,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAL,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAF,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAnHC,EAAOI,aAAY,CAYOC,IAAmD,GAAlD,CAAEC,SAAAA,CAAQ,CAAEC,SAAAA,CAAAA,CAAkC,CAAAF,EAClE,CAAEG,aAAAA,CAAY,CAAEC,SAAAA,CAAQ,CAAEC,SAAAA,CAAQ,CAAEC,QAAAA,CAAAA,CAAS,CAAGb,EAAQ,CAC7Dc,cAAe,CACdC,WAAY,GACZC,aAAc,CAAA,KAIhBjB,EAAU,KACTa,EAAS,aACV,EAAG,CAACA,EAAS,EAEb,IAAMK,EAAoBvB,EAAqBC,EAAmBc,GAAW,KAEvES,EAAgBR,EAAaS,IAAiC,GAAhC,CAAEJ,WAAAA,CAAU,CAAEC,aAAAA,CAAAA,CAAc,CAAAG,EAC/DF,EAAkBG,MAAM,GACxBX,EAAS,CAAEM,WAAAA,EAAYC,aAAAA,CAAY,EACpC,GAEMD,EAAad,EAAS,CAAEY,QAAAA,EAASQ,KAAM,YAAY,GACnDL,EAAef,EAAS,CAAEY,QAAAA,EAASQ,KAAM,cAAc,GAE7DtB,EAAU,KACTkB,EAAkB,CAAEF,WAAAA,EAAYC,aAAAA,CAAY,EAC7C,EAAG,CAACC,EAAmBF,EAAYC,EAAa,EAEhD,IAAMM,EAAsBd,EAASe,QAAQ,CAACC,mBAAmB,CAC3DC,EAAuB7B,IAEvB8B,EAAI7B,IAEV,OACCC,EAAA6B,aAAA,CAACzC,EAAG,CACH0C,QAAQ,OACRC,SAAU,EACVC,WAAY,EACZC,cAAc,SACdC,EAAG,GACHC,oBAAqB,EACrBC,oBAAoB,QACpBC,oBAAoB,aAAa,EAEjCrC,EAAA6B,aAAA,CAACzC,EAAG,CAACkD,GAAG,OAAOC,SAAUnB,CAAc,EACtCpB,EAAA6B,aAAA,CAACxC,EAAK,KACLW,EAAA6B,aAAA,CAACtC,EAAQ,KACRS,EAAA6B,aAAA,CAACnC,EAASP,EAAA,CACTqD,MAAOxC,EAAA6B,aAAA,CAACpC,EAAI,CAAC8B,KAAK,YAAYkB,KAAK,KAAK,GACxCC,YAAad,EAAE,mBACf,aAAYA,EAAE,mBACde,aAAa,KAAK,EACd9B,EAAS,iBAGdH,EAASkC,WAAW,EAAI5C,EAAA6B,aAAA,CAACrC,EAAS,CAACqD,wBAAyB,CAAEC,OAAQlB,EAAElB,EAASkC,WAA6B,CAAC,CAAG,IAEnHpB,GACAxB,EAAA6B,aAAA,CAACxC,EAAK,KACLW,EAAA6B,aAAA,CAACtC,EAAQ,KACRS,EAAA6B,aAAA,CAAClC,EAAYR,EAAA,CAAC4D,GAAIpB,CAAqB,EAAKd,EAAS,kBACrDb,EAAA6B,aAAA,CAACvC,EAAU,CAAC0D,QAASrB,CAAqB,EAAEC,EAAE,qBAOrD"}