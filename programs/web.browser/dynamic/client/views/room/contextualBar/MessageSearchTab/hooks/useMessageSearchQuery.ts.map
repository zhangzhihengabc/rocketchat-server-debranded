)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/MessageSearchTab/hooks/useMessageSearchQuery.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMethod, useToastMessageDispatch, useTranslation, useUserId } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\n\nimport { useRoom } from '../../../contexts/RoomContext';\n\nexport const useMessageSearchQuery = ({\n\tsearchText,\n\tlimit,\n\tglobalSearch,\n}: {\n\tsearchText: string;\n\tlimit: number;\n\tglobalSearch: boolean;\n}) => {\n\tconst uid = useUserId() ?? undefined;\n\tconst room = useRoom();\n\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst searchMessages = useMethod('rocketchatSearch.search');\n\treturn useQuery(\n\t\t['rooms', room._id, 'message-search', { uid, rid: room._id, searchText, limit, globalSearch }] as const,\n\t\tasync () => {\n\t\t\tconst result = await searchMessages(searchText, { uid, rid: room._id }, { limit, searchAll: globalSearch });\n\t\t\treturn result.message?.docs ?? [];\n\t\t},\n\t\t{\n\t\t\tkeepPreviousData: true,\n\t\t\tonError: () => {\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('Search_message_search_failed'),\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t);\n};\n",null],"names":["useMethod","useToastMessageDispatch","useTranslation","useUserId","useQuery","useRoom","module","export","useMessageSearchQuery","_ref","_useUserId","searchText","limit","globalSearch","uid","undefined","room","t","dispatchToastMessage","searchMessages","_id","rid","_result$message$docs","_result$message","result","searchAll","message","docs","keepPreviousData","onError","type"],"mappings":"2BAA6DA,EAAiBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAzGC,EAAOC,MAAE,CAAA,CAAAC,sBAAW,IAAAA,CAAyC,GAA4CF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAD,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAKlG,IAAMG,EAAwBC,IAQhC,IAAAC,EAAA,GARiC,CACrCC,WAAAA,CAAU,CACVC,MAAAA,CAAK,CACLC,aAAAA,CAAAA,CAKA,CAAAJ,EACMK,EAAG,AAAc,OAAdJ,CAAAA,EAAGP,GAAS,GAAEO,AAAA,KAAA,IAAAA,EAAAA,EAAIK,KAAAA,EACrBC,EAAOX,IAEPY,EAAIf,IACJgB,EAAuBjB,IAEvBkB,EAAiBnB,EAAU,2BACjC,OAAOI,EACN,CAAC,QAASY,EAAKI,GAAG,CAAE,iBAAkB,CAAEN,IAAAA,EAAKO,IAAKL,EAAKI,GAAG,CAAET,WAAAA,EAAYC,MAAAA,EAAOC,aAAAA,CAAY,EAAY,CACvG,UAAW,IAAAS,EAAAC,EACV,IAAMC,EAAS,MAAML,EAAeR,EAAY,CAAEG,IAAAA,EAAKO,IAAKL,EAAKI,GAAAA,AAAG,EAAI,CAAER,MAAAA,EAAOa,UAAWZ,CAAY,GACxG,OAAA,AAA2B,OAA3BS,CAAAA,EAAA,AAAqB,OAArBC,CAAAA,EAAOC,EAAOE,OAAO,AAAPA,GAAOH,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBI,IAAI,AAAJA,GAAIL,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,AAClC,EACA,CACCM,iBAAkB,CAAA,EAClBC,QAAS,KACRX,EAAqB,CACpBY,KAAM,QACNJ,QAAST,EAAE,iCAEb,GAGH"}