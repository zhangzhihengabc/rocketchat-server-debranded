)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/EditRoomInfo/useEditRoomInitialValues.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoomWithRetentionPolicy } from '@rocket.chat/core-typings';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport { roomCoordinator } from '../../../../../lib/rooms/roomCoordinator';\n\nconst getPolicyRoomType = (roomType: IRoomWithRetentionPolicy['t']) => {\n\tswitch (roomType) {\n\t\tcase 'c':\n\t\t\treturn 'Channels';\n\t\tcase 'p':\n\t\t\treturn 'Groups';\n\t\tcase 'd':\n\t\t\treturn 'DMs';\n\t}\n};\n\nexport const useEditRoomInitialValues = (room: IRoomWithRetentionPolicy) => {\n\tconst { t, ro, archived, topic, description, announcement, joinCodeRequired, sysMes, encrypted, retention, reactWhenReadOnly } = room;\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst maxAgeDefault = useSetting<number>(`RetentionPolicy_MaxAge_${getPolicyRoomType(room.t)}`) || 30;\n\tconst retentionEnabledDefault = useSetting<boolean>(`RetentionPolicy_AppliesTo${getPolicyRoomType(room.t)}`);\n\tconst excludePinnedDefault = useSetting('RetentionPolicy_DoNotPrunePinned');\n\tconst filesOnlyDefault = useSetting('RetentionPolicy_FilesOnly');\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\troomName: t === 'd' && room.usernames ? room.usernames.join(' x ') : roomCoordinator.getRoomName(t, room),\n\t\t\troomType: t,\n\t\t\treadOnly: !!ro,\n\t\t\treactWhenReadOnly,\n\t\t\tarchived: !!archived,\n\t\t\troomTopic: topic ?? '',\n\t\t\troomDescription: description ?? '',\n\t\t\troomAnnouncement: announcement ?? '',\n\t\t\troomAvatar: undefined,\n\t\t\tjoinCode: '',\n\t\t\tjoinCodeRequired: !!joinCodeRequired,\n\t\t\tsystemMessages: Array.isArray(sysMes) ? sysMes : [],\n\t\t\thideSysMes: Array.isArray(sysMes) ? !!sysMes?.length : !!sysMes,\n\t\t\tencrypted,\n\t\t\t...(retentionPolicyEnabled && {\n\t\t\t\tretentionEnabled: retention?.enabled ?? retentionEnabledDefault,\n\t\t\t\tretentionOverrideGlobal: !!retention?.overrideGlobal,\n\t\t\t\tretentionMaxAge: Math.min(retention?.maxAge, maxAgeDefault) || maxAgeDefault,\n\t\t\t\tretentionExcludePinned: retention?.excludePinned ?? excludePinnedDefault,\n\t\t\t\tretentionFilesOnly: retention?.filesOnly ?? filesOnlyDefault,\n\t\t\t}),\n\t\t}),\n\t\t[\n\t\t\tannouncement,\n\t\t\tarchived,\n\t\t\tdescription,\n\t\t\texcludePinnedDefault,\n\t\t\tfilesOnlyDefault,\n\t\t\tjoinCodeRequired,\n\t\t\tmaxAgeDefault,\n\t\t\tretention,\n\t\t\tretentionEnabledDefault,\n\t\t\tretentionPolicyEnabled,\n\t\t\tro,\n\t\t\troom,\n\t\t\tsysMes,\n\t\t\tt,\n\t\t\ttopic,\n\t\t\tencrypted,\n\t\t\treactWhenReadOnly,\n\t\t],\n\t);\n};\n",null],"names":["_objectSpread","useSetting","useMemo","roomCoordinator","module","link","default","export","useEditRoomInitialValues","getPolicyRoomType","roomType","room","t","ro","archived","topic","description","announcement","joinCodeRequired","sysMes","encrypted","retention","reactWhenReadOnly","retentionPolicyEnabled","maxAgeDefault","concat","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","_retention$enabled","_retention$excludePin","_retention$filesOnly","roomName","usernames","join","getRoomName","readOnly","roomTopic","roomDescription","roomAnnouncement","roomAvatar","undefined","joinCode","systemMessages","Array","isArray","hideSysMes","length","retentionEnabled","enabled","retentionOverrideGlobal","overrideGlobal","retentionMaxAge","Math","min","maxAge","retentionExcludePinned","excludePinned","retentionFilesOnly","filesOnly"],"mappings":"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"}