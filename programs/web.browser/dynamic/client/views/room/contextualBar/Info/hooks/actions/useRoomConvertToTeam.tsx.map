)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/hooks/actions/useRoomConvertToTeam.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isRoomFederated } from '@rocket.chat/core-typings';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\nimport React from 'react';\n\nimport GenericModal from '../../../../../../components/GenericModal';\nimport { useCanEditRoom } from '../useCanEditRoom';\n\nexport const useRoomConvertToTeam = (room: IRoom) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst canEdit = useCanEditRoom(room);\n\tconst hasPermissionToConvertRoomToTeam = usePermission('create-team');\n\tconst canConvertRoomToTeam = isRoomFederated(room) ? false : hasPermissionToConvertRoomToTeam;\n\tconst allowConvertToTeam = !room.teamId && !room.prid && canConvertRoomToTeam && canEdit;\n\n\tconst convertRoomToTeam = useEndpoint('POST', room.t === 'c' ? '/v1/channels.convertToTeam' : '/v1/groups.convertToTeam');\n\n\tconst handleConvertToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait convertRoomToTeam(room.t === 'c' ? { channelId: room._id } : { roomId: room._id });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_converted') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Confirmation')}\n\t\t\t\tvariant='warning'\n\t\t\t\tonClose={() => setModal(null)}\n\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmText={t('Convert')}\n\t\t\t>\n\t\t\t\t{t('Converting_channel_to_a_team')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn allowConvertToTeam ? handleConvertToTeam : null;\n};\n",null],"names":["isRoomFederated","useMutableCallback","useSetModal","useToastMessageDispatch","useTranslation","useEndpoint","usePermission","React","GenericModal","useCanEditRoom","module","export","useRoomConvertToTeam","default","room","t","setModal","dispatchToastMessage","canEdit","hasPermissionToConvertRoomToTeam","canConvertRoomToTeam","allowConvertToTeam","teamId","prid","convertRoomToTeam","handleConvertToTeam","onConfirm","channelId","_id","roomId","type","message","error","createElement","title","variant","onClose","onCancel","confirmText"],"mappings":"2BAA4DA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAOC,MAAE,CAAA,CAAAC,qBAAuB,IAAAA,CAA4B,GAAAF,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAV,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAT,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,4CAAAA,CAAAG,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,oBAAAA,CAAAD,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASrD,IAAMG,EAAwBE,IACpC,IAAMC,EAAIX,IACJY,EAAWd,IACXe,EAAuBd,IAEvBe,EAAUT,EAAeK,GACzBK,EAAmCb,EAAc,eACjDc,EAAuBpB,CAAAA,EAAgBc,IAAgBK,EACvDE,EAAqB,CAACP,EAAKQ,MAAM,EAAI,CAACR,EAAKS,IAAI,EAAIH,GAAwBF,EAE3EM,EAAoBnB,EAAY,OAAQS,AAAW,MAAXA,EAAKC,CAAC,CAAW,6BAA+B,4BAExFU,EAAsBxB,EAAmB,UAC9C,IAAMyB,EAAY,UACjB,GAAI,CACH,MAAMF,EAAkBV,AAAW,MAAXA,EAAKC,CAAC,CAAW,CAAEY,UAAWb,EAAKc,GAAAA,AAAG,EAAK,CAAEC,OAAQf,EAAKc,GAAAA,AAAG,GACrFX,EAAqB,CAAEa,KAAM,UAAWC,QAAShB,EAAE,0BAA0B,GAC5E,MAAOiB,EAAO,CACff,EAAqB,CAAEa,KAAM,QAASC,QAASC,CAAK,UAC3C,CACThB,EAAS,MAEX,EAEAA,EACCT,EAAA0B,aAAA,CAACzB,EAAY,CACZ0B,MAAOnB,EAAE,gBACToB,QAAQ,UACRC,QAAS,IAAMpB,EAAS,MACxBqB,SAAU,IAAMrB,EAAS,MACzBU,UAAWA,EACXY,YAAavB,EAAE,UAAW,EAEzBA,EAAE,iCAGN,GAEA,OAAOM,EAAqBI,EAAsB,IACnD"}