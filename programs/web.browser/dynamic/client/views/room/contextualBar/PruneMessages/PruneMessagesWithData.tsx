function module(e,t,n){let o,s,a,r,i,c,l,u,m,f,d,p,_,g,h,k,T;n.export({initialValues:()=>x}),n.link("@rocket.chat/core-typings",{isDirectMessageRoom(e){o=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){s=e}},1),n.link("@rocket.chat/ui-contexts",{useSetModal(e){a=e},useToastMessageDispatch(e){r=e},useEndpoint(e){i=e},useTranslation(e){c=e}},2),n.link("moment",{default(e){l=e}},3),n.link("react",{default(e){u=e},useCallback(e){m=e},useMemo(e){f=e},useState(e){d=e}},4),n.link("react-hook-form",{useForm(e){p=e},FormProvider(e){_=e}},5),n.link("../../../../components/GenericModal",{default(e){g=e}},6),n.link("../../contexts/RoomContext",{useRoom(e){h=e}},7),n.link("../../contexts/RoomToolboxContext",{useRoomToolbox(e){k=e}},8),n.link("./PruneMessages",{default(e){T=e}},9);let P=()=>{let e=new Date().getTimezoneOffset(),t=Math.abs(e);return"".concat(e<0?"+":"-").concat("00".concat(Math.floor(t/60)).slice(-2),":").concat("00".concat(t%60).slice(-2))},x={newer:{date:"",time:""},older:{date:"",time:""},users:[],inclusive:!1,pinned:!1,discussion:!1,threads:!1,attached:!1};n.exportDefault(()=>{let e=c(),t=h(),n=a(),{closeTab:v}=k(),w=m(()=>n(null),[n]),y=r(),C=i("POST","/v1/rooms.cleanHistory"),[M,b]=d(0),L=p({defaultValues:x}),{newer:{date:D,time:O},older:{date:S,time:N},users:E,inclusive:R,pinned:W,discussion:I,threads:j,attached:F}=L.watch(),V=f(()=>new Date("".concat(D||"0001-01-01","T").concat(O||"00:00",":00").concat(P())),[D,O]),z=f(()=>new Date("".concat(S||"9999-12-31","T").concat(N||"23:59",":59").concat(P())),[S,N]),G=s(()=>{let o=async()=>{try{if(2e3===M)return;let{count:n}=await C({roomId:t._id,latest:z.toISOString(),oldest:V.toISOString(),inclusive:R,limit:2e3,excludePinned:W,filesOnly:F,ignoreDiscussion:I,ignoreThreads:j,users:E});if(b(n),n<1)throw Error(e("No_messages_found_to_prune"));y({type:"success",message:e("__count__message_pruned",{count:n})}),L.reset()}catch(e){y({type:"error",message:e})}finally{w()}};return n(u.createElement(g,{variant:"danger",onClose:w,onCancel:w,onConfirm:o,confirmText:e("Yes_prune_them")},e("Prune_Modal")))}),H=f(()=>{var n;let s=W?" ".concat(e("except_pinned",{})):"",a=E.length?" ".concat(e("if_they_are_from",{postProcess:"sprintf",sprintf:[E.map(e=>e).join(", ")]})):"",r=e(F?"files":"messages",{});return D&&S?e("Prune_Warning_between",{postProcess:"sprintf",sprintf:[r,name,l(V).format("L LT"),l(z).format("L LT")]})+s+a:D?e("Prune_Warning_after",{postProcess:"sprintf",sprintf:[r,name,l(V).format("L LT")]})+s+a:S?e("Prune_Warning_before",{postProcess:"sprintf",sprintf:[r,name,l(z).format("L LT")]})+s+a:e("Prune_Warning_all",{postProcess:"sprintf",sprintf:[r,t&&(o(t)&&(null===(n=t.usernames)||void 0===n?void 0:n.join(" x "))||t.fname||t.name)]})+s+a},[F,V,D,S,W,t,e,z,E]),Y=f(()=>V>z?e("Newer_than_may_not_exceed_Older_than",{postProcess:"sprintf",sprintf:[]}):isNaN(V.getTime())||isNaN(z.getTime())?e("error-invalid-date",{postProcess:"sprintf",sprintf:[]}):void 0,[V,e,z]);return u.createElement(_,L,u.createElement(T,{callOutText:H,validateText:Y,users:E,onClickClose:v,onClickPrune:G}))})}
//# sourceMappingURL=/dynamic/client/views/room/contextualBar/PruneMessages/8ab5aa1dd5f6ac5fbe766991267bcef91c7167a0.map
