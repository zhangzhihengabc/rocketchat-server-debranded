)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Discussions/DiscussionsList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IDiscussionMessage, IUser } from '@rocket.chat/core-typings';\nimport { Box, Icon, TextInput, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { RefObject } from 'react';\nimport React, { useCallback } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarIcon,\n\tContextualbarContent,\n\tContextualbarClose,\n\tContextualbarEmptyContent,\n} from '../../../../components/Contextualbar';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport { goToRoomById } from '../../../../lib/utils/goToRoomById';\nimport DiscussionsListRow from './DiscussionsListRow';\n\ntype DiscussionsListProps = {\n\ttotal: number;\n\tdiscussions: Array<IDiscussionMessage>;\n\tloadMoreItems: (start: number, end: number) => void;\n\tloading: boolean;\n\tonClose: () => void;\n\terror: unknown;\n\tuserId: IUser['_id'];\n\ttext: string;\n\tonChangeFilter: (e: unknown) => void;\n};\n\nfunction DiscussionsList({\n\ttotal = 10,\n\tdiscussions = [],\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId,\n\ttext,\n\tonChangeFilter,\n}: DiscussionsListProps) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus(true);\n\tconst onClick = useCallback((e) => {\n\t\tconst { drid } = e.currentTarget.dataset;\n\t\tgoToRoomById(drid);\n\t}, []);\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='discussion' />\n\t\t\t\t<Box flexShrink={1} flexGrow={1} withTruncatedText mi={8}>\n\t\t\t\t\t{t('Discussions')}\n\t\t\t\t</Box>\n\t\t\t\t<ContextualbarClose onClick={onClose} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp={24}\n\t\t\t\t\tborderBlockEndWidth='default'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='extra-light'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\tonChange={onChangeFilter}\n\t\t\t\t\t\tref={inputRef as RefObject<HTMLInputElement>}\n\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error instanceof Error && (\n\t\t\t\t\t<Callout mi={24} type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && <ContextualbarEmptyContent title={t('No_Discussions_found')} />}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && discussions.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? () => undefined : (start) => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={discussions}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper }}\n\t\t\t\t\t\t\titemContent={(_, data) => (\n\t\t\t\t\t\t\t\t<DiscussionsListRow discussion={data} showRealNames={showRealNames} userId={userId} onClick={onClick} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</ContextualbarContent>\n\t\t</>\n\t);\n}\n\nexport default DiscussionsList;\n",null],"names":["Box","Icon","TextInput","Callout","Throbber","useResizeObserver","useAutoFocus","useSetting","useTranslation","React","useCallback","Virtuoso","ContextualbarHeader","ContextualbarIcon","ContextualbarContent","ContextualbarClose","ContextualbarEmptyContent","ScrollableContentWrapper","goToRoomById","DiscussionsListRow","module","v","default","exportDefault","_ref","total","discussions","loadMoreItems","loading","onClose","error","userId","text","onChangeFilter","showRealNames","Boolean","t","inputRef","onClick","e","drid","currentTarget","dataset","ref","contentBoxSize","inlineSize","blockSize","debounceDelay","createElement","Fragment","name","flexShrink","flexGrow","withTruncatedText","mi","paddingInline","display","flexDirection","p","borderBlockEndWidth","borderBlockEndStyle","borderBlockEndColor","placeholder","value","onChange","addon","size","pi","pb","Error","type","toString","title","overflow","length","style","height","width","totalCount","endReached","undefined","start","Math","min","overscan","data","components","Scroller","itemContent","_","discussion"],"mappings":"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"}