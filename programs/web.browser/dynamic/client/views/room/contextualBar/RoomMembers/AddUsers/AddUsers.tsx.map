)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/RoomMembers/AddUsers/AddUsers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { Field, FieldLabel, Button, ButtonGroup, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarBack,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n} from '../../../../../components/Contextualbar';\nimport UserAutoCompleteMultiple from '../../../../../components/UserAutoCompleteMultiple';\nimport UserAutoCompleteMultipleFederated from '../../../../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated';\nimport { useRoom } from '../../../contexts/RoomContext';\nimport { useRoomToolbox } from '../../../contexts/RoomToolboxContext';\nimport { useAddMatrixUsers } from './AddMatrixUsers/useAddMatrixUsers';\n\ntype AddUsersProps = {\n\trid: IRoom['_id'];\n\tonClickBack: () => void;\n\treload: () => void;\n};\n\nconst AddUsers = ({ rid, onClickBack, reload }: AddUsersProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst room = useRoom();\n\n\tconst { closeTab } = useRoomToolbox();\n\tconst saveAction = useMethod('addUsersToRoom');\n\n\tconst {\n\t\thandleSubmit,\n\t\tcontrol,\n\t\tgetValues,\n\t\tformState: { isDirty, isSubmitting },\n\t} = useForm({ defaultValues: { users: [] } });\n\n\tconst handleSave = useMutableCallback(async ({ users }) => {\n\t\ttry {\n\t\t\tawait saveAction({ rid, users });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Users_added') });\n\t\t\tonClickBack();\n\t\t\treload();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error as Error });\n\t\t}\n\t});\n\n\tconst addClickHandler = useAddMatrixUsers();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t{onClickBack && <ContextualbarBack onClick={onClickBack} />}\n\t\t\t\t<ContextualbarTitle>{t('Add_users')}</ContextualbarTitle>\n\t\t\t\t{closeTab && <ContextualbarClose onClick={closeTab} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel flexGrow={0}>{t('Choose_users')}</FieldLabel>\n\t\t\t\t\t\t{isRoomFederated(room) ? (\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='users'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => <UserAutoCompleteMultipleFederated {...field} placeholder={t('Choose_users')} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='users'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field }) => <UserAutoCompleteMultiple {...field} placeholder={t('Choose_users')} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{isRoomFederated(room) ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tprimary\n\t\t\t\t\t\t\tdisabled={addClickHandler.isLoading}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\taddClickHandler.mutate({\n\t\t\t\t\t\t\t\t\tusers: getValues('users'),\n\t\t\t\t\t\t\t\t\thandleSave,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Add_users')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Button primary loading={isSubmitting} disabled={!isDirty} onClick={handleSubmit(handleSave)}>\n\t\t\t\t\t\t\t{t('Add_users')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default AddUsers;\n",null],"names":["_extends","isRoomFederated","Field","FieldLabel","Button","ButtonGroup","FieldGroup","useMutableCallback","useToastMessageDispatch","useMethod","useTranslation","React","Controller","useForm","ContextualbarHeader","ContextualbarBack","ContextualbarTitle","ContextualbarClose","ContextualbarScrollableContent","ContextualbarFooter","UserAutoCompleteMultiple","UserAutoCompleteMultipleFederated","useRoom","useRoomToolbox","useAddMatrixUsers","module","default","v","link","exportDefault","_ref","rid","onClickBack","reload","t","dispatchToastMessage","room","closeTab","saveAction","handleSubmit","control","getValues","formState","isDirty","isSubmitting","defaultValues","users","handleSave","_ref2","type","message","error","addClickHandler","createElement","Fragment","onClick","flexGrow","name","render","_ref3","field","placeholder","_ref4","stretch","primary","disabled","isLoading","mutate","loading"],"mappings":"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"}