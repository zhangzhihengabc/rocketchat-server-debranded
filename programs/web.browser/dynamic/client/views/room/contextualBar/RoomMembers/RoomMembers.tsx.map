)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/RoomMembers/RoomMembers.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Box, Icon, TextInput, Select, Throbber, ButtonGroup, Button, Callout } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, FormEventHandler, ComponentProps, MouseEvent } from 'react';\nimport React, { useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarIcon,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n\tContextualbarFooter,\n\tContextualbarEmptyContent,\n} from '../../../../components/Contextualbar';\nimport InfiniteListAnchor from '../../../../components/InfiniteListAnchor';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport RoomMembersRow from './RoomMembersRow';\n\ntype RoomMemberUser = Pick<IUser, 'username' | '_id' | 'name' | 'status'>;\n\ntype RoomMembersProps = {\n\trid: IRoom['_id'];\n\tisTeam?: boolean;\n\tisDirect?: boolean;\n\tloading: boolean;\n\ttext: string;\n\ttype: string;\n\tsetText: FormEventHandler<HTMLElement>;\n\tsetType: (type: 'online' | 'all') => void;\n\tmembers: RoomMemberUser[];\n\ttotal: number;\n\terror?: Error;\n\tonClickClose: () => void;\n\tonClickView: (e: MouseEvent<HTMLElement>) => void;\n\tonClickAdd?: () => void;\n\tonClickInvite?: () => void;\n\tloadMoreItems: () => void;\n\trenderRow?: (props: ComponentProps<typeof RoomMembersRow>) => ReactElement | null;\n\treload: () => void;\n};\n\nconst RoomMembers = ({\n\tloading,\n\tmembers = [],\n\ttext,\n\ttype,\n\tsetText,\n\tsetType,\n\tonClickClose,\n\tonClickView,\n\tonClickAdd,\n\tonClickInvite,\n\ttotal,\n\terror,\n\tloadMoreItems,\n\trenderRow: RowComponent = RoomMembersRow,\n\trid,\n\tisTeam,\n\tisDirect,\n\treload,\n}: RoomMembersProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\tconst itemData = useMemo(() => ({ onClickView, rid }), [onClickView, rid]);\n\n\tconst options: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['online', t('Online')],\n\t\t\t['all', t('All')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst loadMoreMembers = useDebouncedCallback(\n\t\t() => {\n\t\t\tloadMoreItems();\n\t\t},\n\t\t300,\n\t\t[loadMoreItems, members],\n\t);\n\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader data-qa-id='RoomHeader-Members'>\n\t\t\t\t<ContextualbarIcon name='members' />\n\t\t\t\t<ContextualbarTitle>{isTeam ? t('Teams_members') : t('Members')}</ContextualbarTitle>\n\t\t\t\t{onClickClose && <ContextualbarClose onClick={onClickClose} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarContent p={12}>\n\t\t\t\t<Box display='flex' flexDirection='row' p={12} flexShrink={0}>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Search_by_username')}\n\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\tonChange={setText}\n\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box w='x144' mis={8}>\n\t\t\t\t\t\t<Select onChange={(value): void => setType(value as 'online' | 'all')} value={type} options={options} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi={24} pb={12}>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Box pi={12} pb={12}>\n\t\t\t\t\t\t<Callout type='danger'>{error.message}</Callout>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && members.length <= 0 && <ContextualbarEmptyContent title={t('No_members_found')} />}\n\n\t\t\t\t{!loading && members.length > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Box pi={18} pb={12}>\n\t\t\t\t\t\t\t<Box is='span' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t('Showing_current_of_total', { current: members.length, total })}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t<Box w='full' h='full' overflow='hidden' flexShrink={1}>\n\t\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\t\toverscan={50}\n\t\t\t\t\t\t\t\tdata={members}\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper, Footer: () => <InfiniteListAnchor loadMore={loadMoreMembers} /> }}\n\t\t\t\t\t\t\t\titemContent={(index, data): ReactElement => (\n\t\t\t\t\t\t\t\t\t<RowComponent useRealName={useRealName} data={itemData} user={data} index={index} reload={reload} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</ContextualbarContent>\n\t\t\t{!isDirect && (onClickInvite || onClickAdd) && (\n\t\t\t\t<ContextualbarFooter>\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t{onClickInvite && (\n\t\t\t\t\t\t\t<Button icon='link' onClick={onClickInvite} width='50%'>\n\t\t\t\t\t\t\t\t{t('Invite_Link')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{onClickAdd && (\n\t\t\t\t\t\t\t<Button icon='user-plus' onClick={onClickAdd} width='50%' primary>\n\t\t\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</ContextualbarFooter>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default RoomMembers;\n",null],"names":["Box","Icon","TextInput","Select","Throbber","ButtonGroup","Button","Callout","useAutoFocus","useDebouncedCallback","useTranslation","useSetting","React","useMemo","Virtuoso","ContextualbarHeader","ContextualbarIcon","ContextualbarTitle","ContextualbarClose","ContextualbarContent","ContextualbarFooter","ContextualbarEmptyContent","InfiniteListAnchor","ScrollableContentWrapper","RoomMembersRow","module","link","default","exportDefault","_ref","loading","members","text","type","setText","setType","onClickClose","onClickView","onClickAdd","onClickInvite","total","error","loadMoreItems","renderRow","RowComponent","rid","isTeam","isDirect","reload","t","inputRef","itemData","options","loadMoreMembers","useRealName","Boolean","createElement","Fragment","name","onClick","p","display","flexDirection","flexShrink","placeholder","value","ref","onChange","addon","size","w","mis","pi","pb","message","length","title","is","color","fontScale","current","h","overflow","style","height","width","totalCount","overscan","data","components","Scroller","Footer","loadMore","itemContent","index","user","stretch","icon","primary"],"mappings":"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"}