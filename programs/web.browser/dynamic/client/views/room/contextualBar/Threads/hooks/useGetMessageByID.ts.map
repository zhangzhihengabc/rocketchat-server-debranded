)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/hooks/useGetMessageByID.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\nimport { Messages } from '../../../../../../app/models/client';\nimport { onClientMessageReceived } from '../../../../../lib/onClientMessageReceived';\nimport { mapMessageFromApi } from '../../../../../lib/utils/mapMessageFromApi';\n\nexport const useGetMessageByID = () => {\n\tconst getMessage = useEndpoint('GET', '/v1/chat.getMessage');\n\n\treturn useCallback(\n\t\tasync (mid: IMessage['_id']) => {\n\t\t\ttry {\n\t\t\t\tconst { message: rawMessage } = await getMessage({ msgId: mid });\n\t\t\t\tconst mappedMessage = mapMessageFromApi(rawMessage);\n\t\t\t\tconst message = (await onClientMessageReceived(mappedMessage)) || mappedMessage;\n\t\t\t\tMessages.upsert({ _id: message._id }, { $set: message as any });\n\t\t\t\treturn message;\n\t\t\t} catch (error) {\n\t\t\t\tif (typeof error === 'object' && error !== null && 'success' in error) {\n\t\t\t\t\tthrow new Error('Message not found');\n\t\t\t\t}\n\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[getMessage],\n\t);\n};\n",null],"names":["useEndpoint","useCallback","Messages","onClientMessageReceived","mapMessageFromApi","module","export","useGetMessageByID","getMessage","mid","message","rawMessage","msgId","mappedMessage","upsert","_id","$set","error","Error"],"mappings":"2BACuDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,kBAAmB,IAAAA,CAA0B,GAACF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAL,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAJ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAH,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAF,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAD,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOhD,IAAMG,EAAoB,KAChC,IAAMC,EAAaR,EAAY,MAAO,uBAEtC,OAAOC,EACN,MAAOQ,IACN,GAAI,CACH,GAAM,CAAEC,QAASC,CAAAA,CAAY,CAAG,MAAMH,EAAW,CAAEI,MAAOH,CAAG,GACvDI,EAAgBT,EAAkBO,GAClCD,EAAU,AAAC,MAAMP,EAAwBU,IAAmBA,EAElE,OADAX,EAASY,MAAM,CAAC,CAAEC,IAAKL,EAAQK,GAAAA,AAAG,EAAI,CAAEC,KAAMN,CAAc,GACrDA,EACN,MAAOO,EAAO,CACf,GAAI,AAAiB,UAAjB,OAAOA,GAAsBA,AAAU,OAAVA,GAAkB,YAAaA,EAC/D,MAAM,AAAIC,MAAM,oBAGjB,OAAMD,EAER,EACA,CAACT,EAAW,CAEd"}