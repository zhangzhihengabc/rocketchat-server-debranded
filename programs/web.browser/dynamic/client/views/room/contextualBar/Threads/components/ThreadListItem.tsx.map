)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/components/ThreadListItem.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Palette } from '@rocket.chat/fuselage';\nimport { useMethod, useSetting, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\nimport type { MouseEvent, ReactElement } from 'react';\nimport React, { useCallback, memo } from 'react';\n\nimport { useDecryptedMessage } from '../../../../../hooks/useDecryptedMessage';\nimport { normalizeThreadMessage } from '../../../../../lib/normalizeThreadMessage';\nimport ThreadListMessage from './ThreadListMessage';\n\ntype ThreadListItemProps = {\n\tthread: IMessage;\n\tunread: string[];\n\tunreadUser: string[];\n\tunreadGroup: string[];\n\tonClick: (tmid: IMessage['_id']) => void;\n};\n\nconst ThreadListItem = ({ thread, unread, unreadUser, unreadGroup, onClick }: ThreadListItemProps): ReactElement => {\n\tconst uid = useUserId() ?? undefined;\n\tconst decryptedMsg = useDecryptedMessage(thread);\n\tconst msg = normalizeThreadMessage({ ...thread, msg: decryptedMsg });\n\n\tconst { name = thread.u.username } = thread.u;\n\n\tconst following = !!uid && (thread.replies?.includes(uid) ?? false);\n\n\tconst followMessage = useMethod('followMessage');\n\tconst unfollowMessage = useMethod('unfollowMessage');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst toggleFollowMessage = useCallback(async (): Promise<void> => {\n\t\ttry {\n\t\t\tif (following) {\n\t\t\t\tawait unfollowMessage({ mid: thread._id });\n\t\t\t} else {\n\t\t\t\tawait followMessage({ mid: thread._id });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [following, unfollowMessage, thread._id, followMessage, dispatchToastMessage]);\n\n\tconst handleToggleFollowButtonClick = useCallback(\n\t\t(event: MouseEvent<HTMLElement>): void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\ttoggleFollowMessage();\n\t\t},\n\t\t[toggleFollowMessage],\n\t);\n\n\tconst showRealNames = (useSetting('UI_Use_Real_Name') as boolean | undefined) ?? false;\n\n\tconst handleListItemClick = useCallback(\n\t\t(event: MouseEvent<HTMLElement>): void => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tonClick(thread._id);\n\t\t},\n\t\t[onClick, thread._id],\n\t);\n\n\treturn (\n\t\t<ThreadListMessage\n\t\t\tclassName={css`\n\t\t\t\tcursor: pointer;\n\t\t\t\t&:hover,\n\t\t\t\t&:focus {\n\t\t\t\t\tbackground: ${Palette.surface['surface-hover']};\n\t\t\t\t}\n\t\t\t\tborder-bottom: 1px solid ${Palette.stroke['stroke-extra-light']} !important;\n\t\t\t`}\n\t\t\ttabIndex={0}\n\t\t\t_id={thread._id}\n\t\t\treplies={thread.tcount ?? 0}\n\t\t\ttlm={thread.tlm}\n\t\t\tts={thread.ts}\n\t\t\tparticipants={thread.replies?.length}\n\t\t\tname={showRealNames ? name : thread.u.username}\n\t\t\tusername={thread.u.username}\n\t\t\tunread={unread.includes(thread._id)}\n\t\t\tmention={unreadUser.includes(thread._id)}\n\t\t\tall={unreadGroup.includes(thread._id)}\n\t\t\tfollowing={following}\n\t\t\tdata-id={thread._id}\n\t\t\tmsg={msg ?? ''}\n\t\t\thandleFollowButton={handleToggleFollowButtonClick}\n\t\t\tonClick={handleListItemClick}\n\t\t\temoji={thread?.emoji}\n\t\t/>\n\t);\n};\n\nexport default memo(ThreadListItem);\n",null],"names":["_taggedTemplateLiteral","_objectSpread","css","Palette","useMethod","useSetting","useToastMessageDispatch","useUserId","React","useCallback","memo","useDecryptedMessage","normalizeThreadMessage","ThreadListMessage","module","default","link","exportDefault","_ref","_useUserId","_thread$replies$inclu","_thread$replies","_useSetting","_thread$tcount","_thread$replies2","thread","unread","unreadUser","unreadGroup","onClick","uid","undefined","decryptedMsg","msg","name","u","username","following","replies","includes","followMessage","unfollowMessage","dispatchToastMessage","toggleFollowMessage","mid","_id","error","type","message","handleToggleFollowButtonClick","event","preventDefault","stopPropagation","showRealNames","handleListItemClick","createElement","className","_templateObject","surface","stroke","tabIndex","tcount","tlm","ts","participants","length","mention","all","handleFollowButton","emoji"],"mappings":"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"}