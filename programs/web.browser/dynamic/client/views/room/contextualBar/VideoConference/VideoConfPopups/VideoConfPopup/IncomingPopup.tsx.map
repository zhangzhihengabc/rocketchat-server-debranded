)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/IncomingPopup.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { Skeleton } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport {\n\tVideoConfPopup,\n\tVideoConfPopupContent,\n\tVideoConfPopupControllers,\n\tVideoConfController,\n\tuseVideoConfControllers,\n\tVideoConfButton,\n\tVideoConfPopupFooter,\n\tVideoConfPopupFooterButtons,\n\tVideoConfPopupTitle,\n\tVideoConfPopupHeader,\n} from '@rocket.chat/ui-video-conf';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useVideoConfSetPreferences } from '../../../../../../contexts/VideoConfContext';\nimport { AsyncStatePhase } from '../../../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../../../hooks/useEndpointData';\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\n\ntype IncomingPopupProps = {\n\tid: string;\n\troom: IRoom;\n\tposition: number;\n\tonClose: (id: string) => void;\n\tonMute: (id: string) => void;\n\tonConfirm: () => void;\n};\n\nconst IncomingPopup = ({ id, room, position, onClose, onMute, onConfirm }: IncomingPopupProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers();\n\tconst setPreferences = useVideoConfSetPreferences();\n\n\tconst params = useMemo(() => ({ callId: id }), [id]);\n\tconst { phase, value } = useEndpointData('/v1/video-conference.info', { params });\n\tconst showMic = Boolean(value?.capabilities?.mic);\n\tconst showCam = Boolean(value?.capabilities?.cam);\n\n\tconst handleJoinCall = useMutableCallback(() => {\n\t\tsetPreferences(controllersConfig);\n\t\tonConfirm();\n\t});\n\n\treturn (\n\t\t<VideoConfPopup position={position}>\n\t\t\t<VideoConfPopupHeader>\n\t\t\t\t<VideoConfPopupTitle text={t('Incoming_call_from')} />\n\t\t\t\t{phase === AsyncStatePhase.LOADING && <Skeleton />}\n\t\t\t\t{phase === AsyncStatePhase.RESOLVED && (showMic || showCam) && (\n\t\t\t\t\t<VideoConfPopupControllers>\n\t\t\t\t\t\t{showCam && (\n\t\t\t\t\t\t\t<VideoConfController\n\t\t\t\t\t\t\t\tactive={controllersConfig.cam}\n\t\t\t\t\t\t\t\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\n\t\t\t\t\t\t\t\ticon={controllersConfig.cam ? 'video' : 'video-off'}\n\t\t\t\t\t\t\t\tonClick={handleToggleCam}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showMic && (\n\t\t\t\t\t\t\t<VideoConfController\n\t\t\t\t\t\t\t\tactive={controllersConfig.mic}\n\t\t\t\t\t\t\t\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\n\t\t\t\t\t\t\t\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\n\t\t\t\t\t\t\t\tonClick={handleToggleMic}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</VideoConfPopupControllers>\n\t\t\t\t)}\n\t\t\t</VideoConfPopupHeader>\n\t\t\t<VideoConfPopupContent>\n\t\t\t\t<VideoConfPopupRoomInfo room={room} />\n\t\t\t</VideoConfPopupContent>\n\t\t\t<VideoConfPopupFooter>\n\t\t\t\t<VideoConfPopupFooterButtons>\n\t\t\t\t\t<VideoConfButton primary onClick={handleJoinCall}>\n\t\t\t\t\t\t{t('Accept')}\n\t\t\t\t\t</VideoConfButton>\n\t\t\t\t\t{onClose && (\n\t\t\t\t\t\t<VideoConfButton danger secondary onClick={(): void => onClose(id)}>\n\t\t\t\t\t\t\t{t('Decline')}\n\t\t\t\t\t\t</VideoConfButton>\n\t\t\t\t\t)}\n\t\t\t\t\t<VideoConfController small={false} secondary title={t('Mute_and_dismiss')} icon='cross' onClick={(): void => onMute(id)} />\n\t\t\t\t</VideoConfPopupFooterButtons>\n\t\t\t</VideoConfPopupFooter>\n\t\t</VideoConfPopup>\n\t);\n};\n\nexport default IncomingPopup;\n",null],"names":["Skeleton","useMutableCallback","useTranslation","VideoConfPopup","VideoConfPopupContent","VideoConfPopupControllers","VideoConfController","useVideoConfControllers","VideoConfButton","VideoConfPopupFooter","VideoConfPopupFooterButtons","VideoConfPopupTitle","VideoConfPopupHeader","React","useMemo","useVideoConfSetPreferences","AsyncStatePhase","useEndpointData","VideoConfPopupRoomInfo","module","link","default","exportDefault","_ref","_value$capabilities","_value$capabilities2","id","room","position","onClose","onMute","onConfirm","t","controllersConfig","handleToggleMic","handleToggleCam","setPreferences","params","callId","phase","value","showMic","Boolean","capabilities","mic","showCam","cam","handleJoinCall","createElement","text","LOADING","RESOLVED","active","title","icon","onClick","primary","danger","secondary","small"],"mappings":"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"}