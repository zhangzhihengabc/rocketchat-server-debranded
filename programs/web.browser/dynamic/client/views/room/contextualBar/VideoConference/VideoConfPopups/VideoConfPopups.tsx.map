)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopups.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useCustomSound } from '@rocket.chat/ui-contexts';\nimport { VideoConfPopupBackdrop } from '@rocket.chat/ui-video-conf';\nimport type { ReactElement } from 'react';\nimport React, { useEffect, useMemo } from 'react';\n\nimport type { VideoConfPopupPayload } from '../../../../../contexts/VideoConfContext';\nimport { useVideoConfIsCalling, useVideoConfIsRinging, useVideoConfIncomingCalls } from '../../../../../contexts/VideoConfContext';\nimport VideoConfPopupPortal from '../../../../../portals/VideoConfPopupPortal';\nimport VideoConfPopup from './VideoConfPopup';\n\nconst VideoConfPopups = ({ children }: { children?: VideoConfPopupPayload }): ReactElement => {\n\tconst customSound = useCustomSound();\n\tconst incomingCalls = useVideoConfIncomingCalls();\n\tconst isRinging = useVideoConfIsRinging();\n\tconst isCalling = useVideoConfIsCalling();\n\n\tconst popups = useMemo(\n\t\t() =>\n\t\t\tincomingCalls\n\t\t\t\t.filter((incomingCall) => !incomingCall.dismissed)\n\t\t\t\t.map((incomingCall) => ({ id: incomingCall.callId, rid: incomingCall.rid, isReceiving: true })),\n\t\t[incomingCalls],\n\t);\n\n\tuseEffect(() => {\n\t\tif (isRinging) {\n\t\t\tcustomSound.play('ringtone', { loop: true });\n\t\t}\n\n\t\tif (isCalling) {\n\t\t\tcustomSound.play('dialtone', { loop: true });\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tcustomSound.stop('ringtone');\n\t\t\tcustomSound.stop('dialtone');\n\t\t};\n\t}, [customSound, isRinging, isCalling]);\n\n\treturn (\n\t\t<>\n\t\t\t{(children || popups?.length > 0) && (\n\t\t\t\t<VideoConfPopupPortal>\n\t\t\t\t\t<VideoConfPopupBackdrop>\n\t\t\t\t\t\t{(children ? [children, ...popups] : popups).map(({ id, rid, isReceiving }, index = 1) => (\n\t\t\t\t\t\t\t<VideoConfPopup key={id} id={id} rid={rid} isReceiving={isReceiving} isCalling={isCalling} position={index * 10} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</VideoConfPopupBackdrop>\n\t\t\t\t</VideoConfPopupPortal>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default VideoConfPopups;\n",null],"names":["useCustomSound","VideoConfPopupBackdrop","React","useEffect","useMemo","useVideoConfIsCalling","useVideoConfIsRinging","useVideoConfIncomingCalls","VideoConfPopupPortal","VideoConfPopup","module","link","default","exportDefault","_ref","children","customSound","incomingCalls","isRinging","isCalling","popups","filter","incomingCall","dismissed","map","id","callId","rid","isReceiving","play","loop","stop","createElement","Fragment","length","_ref2","index","arguments","undefined","key","position"],"mappings":"2BAAAA,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjDC,EAAgBC,IAAA,CAAM,2BAA2B,CAAAX,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAT,uBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAL,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,0BAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,mBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAA1DC,EAAOG,aAAE,CAUeC,IAAqE,GAApE,CAAEC,SAAAA,CAAAA,CAAgD,CAAAD,EACpEE,EAAchB,IACdiB,EAAgBV,IAChBW,EAAYZ,IACZa,EAAYd,IAEZe,EAAShB,EACd,IACCa,EACEI,MAAM,CAAEC,GAAiB,CAACA,EAAaC,SAAS,EAChDC,GAAG,CAAEF,GAAkB,CAAA,CAAEG,GAAIH,EAAaI,MAAM,CAAEC,IAAKL,EAAaK,GAAG,CAAEC,YAAa,CAAA,CAAI,CAAA,GAC7F,CAACX,EAAc,EAkBhB,OAfAd,EAAU,KACLe,GACHF,EAAYa,IAAI,CAAC,WAAY,CAAEC,KAAM,CAAA,CAAI,GAGtCX,GACHH,EAAYa,IAAI,CAAC,WAAY,CAAEC,KAAM,CAAA,CAAI,GAGnC,KACNd,EAAYe,IAAI,CAAC,YACjBf,EAAYe,IAAI,CAAC,WAClB,GACE,CAACf,EAAaE,EAAWC,EAAU,EAGrCjB,EAAA8B,aAAA,CAAA9B,EAAA+B,QAAA,CAAA,KACE,AAAClB,CAAAA,GAAY,AAAAK,CAAAA,MAAAA,EAAM,KAAA,EAANA,EAAQc,MAAM,AAANA,EAAS,CAAA,GAC9BhC,EAAA8B,aAAA,CAACxB,EAAoB,KACpBN,EAAA8B,aAAA,CAAC/B,EAAsB,KACrB,AAACc,CAAAA,EAAW,CAACA,KAAaK,EAAO,CAAGA,CAAAA,EAAQI,GAAG,CAAC,SAAAW,CAAA,EAAA,GAAC,CAAEV,GAAAA,CAAE,CAAEE,IAAAA,CAAG,CAAEC,YAAAA,CAAAA,CAAa,CAAAO,EAAEC,EAAKC,UAAAH,MAAA,CAAA,GAAAG,AAAAC,KAAAA,IAAAD,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,EAAC,OACpFnC,EAAA8B,aAAA,CAACvB,EAAc,CAAC8B,IAAKd,EAAIA,GAAIA,EAAIE,IAAKA,EAAKC,YAAaA,EAAaT,UAAWA,EAAWqB,SAAUJ,AAAQ,GAARA,CAAW,EAAG,KAO1H"}