)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/ExportMessages/ExportMessages.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { SelectOption } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useMemo } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { ContextualbarHeader, ContextualbarIcon, ContextualbarTitle, ContextualbarClose } from '../../../../components/Contextualbar';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport { useRoom } from '../../contexts/RoomContext';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\nimport FileExport from './FileExport';\nimport MailExportForm from './MailExportForm';\n\nexport type MailExportFormValues = {\n\ttype: 'email' | 'file';\n\tdateFrom: string;\n\tdateTo: string;\n\tformat: 'html' | 'json';\n\ttoUsers: string[];\n\tadditionalEmails: string;\n\tmessagesCount: number;\n\tsubject: string;\n};\n\nconst ExportMessages = () => {\n\tconst t = useTranslation();\n\tconst room = useRoom();\n\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst roomName = room?.t && roomCoordinator.getRoomName(room.t, room);\n\n\tconst methods = useForm<MailExportFormValues>({\n\t\tmode: 'onBlur',\n\t\tdefaultValues: {\n\t\t\ttype: 'email',\n\t\t\tdateFrom: '',\n\t\t\tdateTo: '',\n\t\t\ttoUsers: [],\n\t\t\tadditionalEmails: '',\n\t\t\tmessagesCount: 0,\n\t\t\tsubject: t('Mail_Messages_Subject', roomName),\n\t\t\tformat: 'html',\n\t\t},\n\t});\n\n\tconst exportOptions = useMemo<SelectOption[]>(\n\t\t() => [\n\t\t\t['email', t('Send_via_email')],\n\t\t\t['file', t('Export_as_file')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst formId = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarIcon name='mail' />\n\t\t\t\t<ContextualbarTitle id={`${formId}-title`}>{t('Export_Messages')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={closeTab} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<FormProvider {...methods}>\n\t\t\t\t{methods.watch('type') === 'email' && (\n\t\t\t\t\t<MailExportForm formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\n\t\t\t\t)}\n\t\t\t\t{methods.watch('type') === 'file' && (\n\t\t\t\t\t<FileExport formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\n\t\t\t\t)}\n\t\t\t</FormProvider>\n\t\t</>\n\t);\n};\n\nexport default ExportMessages;\n",null],"names":["useUniqueId","useTranslation","React","useMemo","FormProvider","useForm","ContextualbarHeader","ContextualbarIcon","ContextualbarTitle","ContextualbarClose","roomCoordinator","useRoom","useRoomToolbox","FileExport","MailExportForm","module","link","default","exportDefault","t","room","closeTab","roomName","getRoomName","methods","mode","defaultValues","type","dateFrom","dateTo","toUsers","additionalEmails","messagesCount","subject","format","exportOptions","formId","createElement","Fragment","name","id","concat","onClick","watch","rid","_id","onCancel"],"mappings":"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"}