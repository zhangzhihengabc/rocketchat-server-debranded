)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/ExportMessages/FileExport.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Field, FieldLabel, FieldRow, Select, ButtonGroup, Button, FieldGroup, InputBox } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useMemo } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\nimport type { MailExportFormValues } from './ExportMessages';\nimport { useRoomExportMutation } from './useRoomExportMutation';\n\ntype FileExportProps = {\n\tformId: string;\n\trid: IRoom['_id'];\n\tonCancel: () => void;\n\texportOptions: SelectOption[];\n};\n\nconst FileExport = ({ formId, rid, exportOptions, onCancel }: FileExportProps) => {\n\tconst t = useTranslation();\n\tconst { control, handleSubmit } = useFormContext<MailExportFormValues>();\n\tconst roomExportMutation = useRoomExportMutation();\n\tconst formFocus = useAutoFocus<HTMLFormElement>();\n\n\tconst outputOptions = useMemo<SelectOption[]>(\n\t\t() => [\n\t\t\t['html', t('HTML')],\n\t\t\t['json', t('JSON')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst handleExport = ({ type, dateFrom, dateTo, format }: MailExportFormValues) => {\n\t\troomExportMutation.mutateAsync({\n\t\t\trid,\n\t\t\ttype,\n\t\t\tdateFrom,\n\t\t\tdateTo,\n\t\t\tformat,\n\t\t});\n\t};\n\n\tconst typeField = useUniqueId();\n\tconst dateFromField = useUniqueId();\n\tconst dateToField = useUniqueId();\n\tconst formatField = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={typeField}>{t('Method')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={typeField} {...field} placeholder={t('Type')} options={exportOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={dateFromField}>{t('Date_From')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='dateFrom'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <InputBox id={dateFromField} type='date' {...field} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={dateToField}>{t('Date_to')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller name='dateTo' control={control} render={({ field }) => <InputBox id={dateToField} {...field} type='date' />} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={formatField}>{t('Output_format')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='format'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select {...field} id={formatField} placeholder={t('Format')} options={outputOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit'>\n\t\t\t\t\t\t{t('Export')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default FileExport;\n",null],"names":["_extends","Field","FieldLabel","FieldRow","Select","ButtonGroup","Button","FieldGroup","InputBox","useAutoFocus","useUniqueId","useTranslation","React","useMemo","Controller","useFormContext","ContextualbarScrollableContent","ContextualbarFooter","useRoomExportMutation","module","link","default","v","exportDefault","_ref","formId","rid","exportOptions","onCancel","t","control","handleSubmit","roomExportMutation","formFocus","outputOptions","typeField","dateFromField","dateToField","formatField","createElement","Fragment","ref","tabIndex","concat","id","onSubmit","_ref2","type","dateFrom","dateTo","format","mutateAsync","htmlFor","name","render","_ref3","field","placeholder","options","_ref4","_ref5","_ref6","stretch","onClick","form","primary"],"mappings":"2BAEAA,EAAAC,EAASC,EAAOC,EAAYC,EAAQC,EAAUC,EAAAC,EAAqBC,EAAoDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9GC,EAAOC,IAAA,CAAA,iCAAyC,CAAEC,QAAQC,CAAAA,EAAAtB,EAAYsB,CAAA,CAAA,EAAA,GAAZH,EAAYC,IAAQ,CAAA,wBAAQ,CAAAnB,MAAwBqB,CAAAA,EAAArB,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAV,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAL,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAH,+BAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAD,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAvHC,EAAOI,aAAS,CAiBGC,IAA8D,GAA7D,CAAEC,OAAAA,CAAM,CAAEC,IAAAA,CAAG,CAAEC,cAAAA,CAAa,CAAEC,SAAAA,CAAAA,CAA2B,CAAAJ,EACtEK,EAAIlB,IACJ,CAAEmB,QAAAA,CAAO,CAAEC,aAAAA,CAAAA,CAAc,CAAGhB,IAC5BiB,EAAqBd,IACrBe,EAAYxB,IAEZyB,EAAgBrB,EACrB,IAAM,CACL,CAAC,OAAQgB,EAAE,QAAQ,CACnB,CAAC,OAAQA,EAAE,QAAQ,CACnB,CACD,CAACA,EAAE,EAaEM,EAAYzB,IACZ0B,EAAgB1B,IAChB2B,EAAc3B,IACd4B,EAAc5B,IAEpB,OACCE,EAAA2B,aAAA,CAAA3B,EAAA4B,QAAA,CAAA,KACC5B,EAAA2B,aAAA,CAACvB,EAA8B,KAC9BJ,EAAA2B,aAAA,CAAA,OAAA,CAAME,IAAKR,EAAWS,SAAU,GAAI,kBAAA,GAAAC,MAAA,CAAoBlB,EAAM,UAAUmB,GAAInB,EAAQoB,SAAUd,EAlB5Ee,IAA6D,GAA5D,CAAEC,KAAAA,CAAI,CAAEC,SAAAA,CAAQ,CAAEC,OAAAA,CAAM,CAAEC,OAAAA,CAAAA,CAA8B,CAAAJ,EAC7Ed,EAAmBmB,WAAW,CAAC,CAC9BzB,IAAAA,EACAqB,KAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,OAAAA,GAEF,EAU4H,EACxHtC,EAAA2B,aAAA,CAAChC,EAAU,KACVK,EAAA2B,aAAA,CAACtC,EAAK,KACLW,EAAA2B,aAAA,CAACrC,EAAU,CAACkD,QAASjB,CAAU,EAAEN,EAAE,WACnCjB,EAAA2B,aAAA,CAACpC,EAAQ,KACRS,EAAA2B,aAAA,CAACzB,EAAU,CACVuC,KAAK,OACLvB,QAASA,EACTwB,OAAQC,IAAA,GAAC,CAAEC,MAAAA,CAAAA,CAAO,CAAAD,EAAA,OAAK3C,EAAA2B,aAAA,CAACnC,EAAMJ,EAAA,CAAC4C,GAAIT,CAAU,EAAKqB,EAAK,CAAEC,YAAa5B,EAAE,QAAS6B,QAAS/B,CAAc,GAAG,CAAC,KAI/Gf,EAAA2B,aAAA,CAACtC,EAAK,KACLW,EAAA2B,aAAA,CAACrC,EAAU,CAACkD,QAAShB,CAAc,EAAEP,EAAE,cACvCjB,EAAA2B,aAAA,CAACpC,EAAQ,KACRS,EAAA2B,aAAA,CAACzB,EAAU,CACVuC,KAAK,WACLvB,QAASA,EACTwB,OAAQK,IAAA,GAAC,CAAEH,MAAAA,CAAAA,CAAO,CAAAG,EAAA,OAAK/C,EAAA2B,aAAA,CAAC/B,EAAQR,EAAA,CAAC4C,GAAIR,EAAeW,KAAK,MAAM,EAAKS,GAAS,CAAC,KAIjF5C,EAAA2B,aAAA,CAACtC,EAAK,KACLW,EAAA2B,aAAA,CAACrC,EAAU,CAACkD,QAASf,CAAY,EAAER,EAAE,YACrCjB,EAAA2B,aAAA,CAACpC,EAAQ,KACRS,EAAA2B,aAAA,CAACzB,EAAU,CAACuC,KAAK,SAASvB,QAASA,EAASwB,OAAQM,IAAA,GAAC,CAAEJ,MAAAA,CAAAA,CAAO,CAAAI,EAAA,OAAKhD,EAAA2B,aAAA,CAAC/B,EAAQR,EAAA,CAAC4C,GAAIP,CAAY,EAAKmB,EAAK,CAAET,KAAK,MAAM,GAAG,CAAC,KAG1HnC,EAAA2B,aAAA,CAACtC,EAAK,KACLW,EAAA2B,aAAA,CAACrC,EAAU,CAACkD,QAASd,CAAY,EAAET,EAAE,kBACrCjB,EAAA2B,aAAA,CAACpC,EAAQ,KACRS,EAAA2B,aAAA,CAACzB,EAAU,CACVuC,KAAK,SACLvB,QAASA,EACTwB,OAAQO,IAAA,GAAC,CAAEL,MAAAA,CAAAA,CAAO,CAAAK,EAAA,OAAKjD,EAAA2B,aAAA,CAACnC,EAAMJ,EAAA,CAAA,EAAKwD,EAAK,CAAEZ,GAAIN,EAAamB,YAAa5B,EAAE,UAAW6B,QAASxB,CAAc,GAAG,CAAC,QAOtHtB,EAAA2B,aAAA,CAACtB,EAAmB,KACnBL,EAAA2B,aAAA,CAAClC,EAAW,CAACyD,QAAO,CAAA,CAAA,EACnBlD,EAAA2B,aAAA,CAACjC,EAAM,CAACyD,QAASnC,CAAS,EAAEC,EAAE,WAC9BjB,EAAA2B,aAAA,CAACjC,EAAM,CAAC0D,KAAMvC,EAAQwC,QAAO,CAAA,EAAClB,KAAK,QAAQ,EACzClB,EAAE,aAMT"}