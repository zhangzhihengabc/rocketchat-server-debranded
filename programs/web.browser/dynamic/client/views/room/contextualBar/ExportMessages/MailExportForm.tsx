function module(e,t,l){var a;let n,r,o,i,s,c,m,u,d,E,g,_,p,h,k,v,b,C,f,x,M,y,F,S,T,I,A,B,U,j,w,L;l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@babel/runtime/helpers/taggedTemplateLiteral",{default(e){r=e}},1),l.link("@rocket.chat/css-in-js",{css(e){o=e}},0),l.link("@rocket.chat/fuselage",{FieldError(e){i=e},Field(e){s=e},FieldLabel(e){c=e},FieldRow(e){m=e},TextAreaInput(e){u=e},TextInput(e){d=e},ButtonGroup(e){E=e},Button(e){g=e},Box(e){_=e},Icon(e){p=e},Callout(e){h=e},FieldGroup(e){k=e},Select(e){v=e}},1),l.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){b=e},useMutableCallback(e){C=e},useUniqueId(e){f=e}},2),l.link("@rocket.chat/ui-contexts",{useTranslation(e){x=e}},3),l.link("react",{default(e){M=e},useEffect(e){y=e},useContext(e){F=e}},4),l.link("react-hook-form",{Controller(e){S=e},useFormContext(e){T=e}},5),l.link("../../../../../lib/emailValidator",{validateEmail(e){I=e}},6),l.link("../../../../components/Contextualbar",{ContextualbarScrollableContent(e){A=e},ContextualbarFooter(e){B=e}},7),l.link("../../../../components/UserAutoCompleteMultiple",{default(e){U=e}},8),l.link("../../MessageList/contexts/SelectedMessagesContext",{SelectedMessageContext(e){j=e},useCountSelected(e){w=e}},9),l.link("./useRoomExportMutation",{useRoomExportMutation(e){L=e}},10),l.exportDefault(e=>{let{formId:t,rid:l,onCancel:R,exportOptions:z}=e,G=x(),N=b(),{watch:q,setValue:D,control:P,register:V,formState:{errors:H,isDirty:J,isSubmitting:K},handleSubmit:O,clearErrors:Q}=T(),W=L(),{selectedMessageStore:X}=F(j),Y=X.getSelectedMessages(),Z=w(),$=C(()=>{X.clearStore()});y(()=>(X.setIsSelecting(!0),()=>{X.reset()}),[X]);let{toUsers:ee}=q();y(()=>{D("messagesCount",Y.length)},[D,Y.length]);let et=async e=>{let{type:t,toUsers:a,subject:n,additionalEmails:r}=e;W.mutateAsync({rid:l,type:t,toUsers:a,toEmails:null==r?void 0:r.split(","),subject:n,messages:Y})},el=o(a||(a=r(["\n		cursor: pointer;\n	"]))),ea=f(),en=f(),er=f(),eo=f();return M.createElement(M.Fragment,null,M.createElement(A,null,M.createElement("form",{ref:N,tabIndex:-1,"aria-labelledby":"".concat(t,"-title"),id:t,onSubmit:O(et)},M.createElement(k,null,M.createElement(s,null,M.createElement(c,{htmlFor:ea},G("Method")),M.createElement(m,null,M.createElement(S,{name:"type",control:P,render:e=>{let{field:t}=e;return M.createElement(v,n({id:ea},t,{placeholder:G("Type"),options:z}))}}))),M.createElement(s,null,M.createElement(h,{onClick:$,title:G("Messages_selected"),type:Z>0?"success":"info"},M.createElement("p",null,"".concat(Z," Messages selected")),Z>0&&M.createElement(_,{is:"p",className:el},G("Click_here_to_clear_the_selection")),0===Z&&M.createElement(_,{is:"p"},G("Click_the_messages_you_would_like_to_send_by_email"))),M.createElement("input",n({type:"hidden"},V("messagesCount",{validate:e=>e>0?void 0:G("Mail_Message_No_messages_selected_select_all")}))),H.messagesCount&&M.createElement(i,{"aria-live":"assertive"},H.messagesCount.message)),M.createElement(s,null,M.createElement(c,{htmlFor:en},G("To_users")),M.createElement(m,null,M.createElement(S,{name:"toUsers",control:P,render:e=>{let{field:{value:t,onChange:l,onBlur:a,name:n}}=e;return M.createElement(U,{id:en,value:t,onChange:e=>{l(e),Q("additionalEmails")},onBlur:a,name:n})}}))),M.createElement(s,null,M.createElement(c,{htmlFor:er},G("To_additional_emails")),M.createElement(m,null,M.createElement(S,{name:"additionalEmails",control:P,rules:{validate:{validateEmail:e=>{if(!(""===e||""!==e&&I(e)))return G("Mail_Message_Invalid_emails",e)},validateToUsers:e=>{if(""===e&&!((null==ee?void 0:ee.length)>0))return G("Mail_Message_Missing_to")}}},render:e=>{var t,l;let{field:a}=e;return M.createElement(d,n({id:er},a,{placeholder:G("Email_Placeholder_any"),addon:M.createElement(p,{name:"mail",size:"x20"}),"aria-describedby":"".concat(er,"-error"),"aria-invalid":!!(null==H?void 0:null===(t=H.additionalEmails)||void 0===t?void 0:t.message),error:null==H?void 0:null===(l=H.additionalEmails)||void 0===l?void 0:l.message}))}})),(null==H?void 0:H.additionalEmails)&&M.createElement(i,{"aria-live":"assertive",id:"".concat(er,"-error")},H.additionalEmails.message)),M.createElement(s,null,M.createElement(c,{htmlFor:eo},G("Subject")),M.createElement(m,null,M.createElement(S,{name:"subject",control:P,render:e=>{let{field:t}=e;return M.createElement(u,n({rows:3,id:eo},t,{addon:M.createElement(p,{name:"edit",size:"x20"})}))}})))))),M.createElement(B,null,M.createElement(E,{stretch:!0},M.createElement(g,{onClick:R},G("Cancel")),M.createElement(g,{loading:K,disabled:!J,form:t,primary:!0,type:"submit"},G("Send")))))})}
//# sourceMappingURL=/dynamic/client/views/room/contextualBar/ExportMessages/4cc2296036bced05b3317f6de901ed2946cbd199.map
