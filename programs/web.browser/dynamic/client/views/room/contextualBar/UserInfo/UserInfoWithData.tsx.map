)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/UserInfo/UserInfoWithData.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser, IRoom } from '@rocket.chat/core-typings';\nimport { Callout } from '@rocket.chat/fuselage';\nimport { useRolesDescription, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { getUserEmailAddress } from '../../../../../lib/getUserEmailAddress';\nimport {\n\tContextualbarHeader,\n\tContextualbarBack,\n\tContextualbarIcon,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n} from '../../../../components/Contextualbar';\nimport { FormSkeleton } from '../../../../components/Skeleton';\nimport UserCard from '../../../../components/UserCard';\nimport UserInfo from '../../../../components/UserInfo';\nimport { ReactiveUserStatus } from '../../../../components/UserStatus';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport { getUserEmailVerified } from '../../../../lib/utils/getUserEmailVerified';\nimport UserInfoActions from './UserInfoActions';\n\ntype UserInfoWithDataProps = {\n\tuid: IUser['_id'];\n\tusername?: IUser['username'];\n\trid: IRoom['_id'];\n\tonClose: () => void;\n\tonClickBack: () => void;\n};\n\nconst UserInfoWithData = ({ uid, username, rid, onClose, onClickBack }: UserInfoWithDataProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst getRoles = useRolesDescription();\n\n\tconst {\n\t\tvalue: data,\n\t\tphase: state,\n\t\terror,\n\t} = useEndpointData('/v1/users.info', { params: useMemo(() => ({ userId: uid, username }), [uid, username]) });\n\n\tconst isLoading = state === AsyncStatePhase.LOADING;\n\n\tconst user = useMemo(() => {\n\t\tif (!data?.user) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\t_id,\n\t\t\tname,\n\t\t\tusername,\n\t\t\troles = [],\n\t\t\tstatusText,\n\t\t\tbio,\n\t\t\tutcOffset,\n\t\t\tlastLogin,\n\t\t\tcustomFields,\n\t\t\tphone,\n\t\t\tnickname,\n\t\t\tcreatedAt,\n\t\t\tcanViewAllInfo,\n\t\t} = data.user;\n\n\t\treturn {\n\t\t\t_id,\n\t\t\tname,\n\t\t\tusername,\n\t\t\tlastLogin,\n\t\t\troles: roles && getRoles(roles).map((role, index) => <UserCard.Role key={index}>{role}</UserCard.Role>),\n\t\t\tbio,\n\t\t\tcanViewAllInfo,\n\t\t\tphone,\n\t\t\tcustomFields,\n\t\t\tverified: getUserEmailVerified(data.user),\n\t\t\temail: getUserEmailAddress(data.user),\n\t\t\tutcOffset,\n\t\t\tcreatedAt,\n\t\t\tstatus: <ReactiveUserStatus uid={_id} />,\n\t\t\tstatusText,\n\t\t\tnickname,\n\t\t};\n\t}, [data, getRoles]);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t{onClickBack && <ContextualbarBack onClick={onClickBack} />}\n\t\t\t\t{!onClickBack && <ContextualbarIcon name='user' />}\n\t\t\t\t<ContextualbarTitle>{t('User_Info')}</ContextualbarTitle>\n\t\t\t\t{onClose && <ContextualbarClose onClick={onClose} />}\n\t\t\t</ContextualbarHeader>\n\n\t\t\t{isLoading && (\n\t\t\t\t<ContextualbarContent>\n\t\t\t\t\t<FormSkeleton />\n\t\t\t\t</ContextualbarContent>\n\t\t\t)}\n\n\t\t\t{error && !user && (\n\t\t\t\t<ContextualbarContent pb={16}>\n\t\t\t\t\t<Callout type='danger'>{t('User_not_found')}</Callout>\n\t\t\t\t</ContextualbarContent>\n\t\t\t)}\n\n\t\t\t{!isLoading && user && <UserInfo {...user} actions={<UserInfoActions user={user} rid={rid} backToList={onClickBack} />} />}\n\t\t</>\n\t);\n};\n\nexport default UserInfoWithData;\n",null],"names":["_extends","Callout","useRolesDescription","useTranslation","React","useMemo","getUserEmailAddress","ContextualbarHeader","ContextualbarBack","ContextualbarIcon","ContextualbarTitle","ContextualbarClose","ContextualbarContent","FormSkeleton","UserCard","UserInfo","ReactiveUserStatus","AsyncStatePhase","useEndpointData","getUserEmailVerified","UserInfoActions","module","link","default","exportDefault","_ref","uid","username","rid","onClose","onClickBack","t","getRoles","value","data","phase","state","error","params","userId","isLoading","LOADING","user","_id","name","roles","statusText","bio","utcOffset","lastLogin","customFields","phone","nickname","createdAt","canViewAllInfo","map","role","index","createElement","Role","key","verified","email","status","Fragment","onClick","pb","type","actions","backToList"],"mappings":"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"}