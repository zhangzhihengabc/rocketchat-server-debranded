)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/MessageList/hooks/useLoadSurroundingMessages.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { legacyJumpToMessage } from '../../../../lib/utils/legacyJumpToMessage';\n\nexport const useLoadSurroundingMessages = (msgId?: IMessage['_id']) => {\n\tconst queryClient = useQueryClient();\n\tconst getMessage = useEndpoint('GET', '/v1/chat.getMessage');\n\n\tuseEffect(() => {\n\t\tif (!msgId) {\n\t\t\treturn;\n\t\t}\n\t\tconst abort = new AbortController();\n\n\t\tqueryClient\n\t\t\t.fetchQuery({\n\t\t\t\tqueryKey: ['chat.getMessage', msgId],\n\t\t\t\tqueryFn: () => {\n\t\t\t\t\treturn getMessage({ msgId });\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then(({ message }) => {\n\t\t\t\tif (abort.signal.aborted) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Serialized IMessage dates are strings. For this function, only ts is needed\n\t\t\t\tlegacyJumpToMessage({ ...message, ts: new Date(message.ts) } as any as IMessage);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.warn(error);\n\t\t\t});\n\t\treturn () => {\n\t\t\tabort.abort();\n\t\t};\n\t}, [msgId, queryClient, getMessage]);\n};\n",null],"names":["_objectSpread","useEndpoint","useQueryClient","useEffect","legacyJumpToMessage","module","link","default","export","useLoadSurroundingMessages","msgId","queryClient","getMessage","abort","AbortController","fetchQuery","queryKey","queryFn","then","_ref","message","signal","aborted","ts","Date","catch","error","console","warn"],"mappings":"2BACAA,EAAuDC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAvDK,EAAOG,MAAE,CAAA,CAAAC,2BAAmB,IAAAA,CAA2B,GAAAJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAJ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,4CAAAA,CAAAD,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMhD,IAAMK,EAA8BC,IAC1C,IAAMC,EAAcT,IACdU,EAAaX,EAAY,MAAO,uBAEtCE,EAAU,KACT,GAAI,CAACO,EACJ,OAED,IAAMG,EAAQ,IAAIC,gBAmBlB,OAjBAH,EACEI,UAAU,CAAC,CACXC,SAAU,CAAC,kBAAmBN,EAAM,CACpCO,QAAS,IACDL,EAAW,CAAEF,MAAAA,CAAK,KAG1BQ,IAAI,CAACC,IAAgB,GAAf,CAAEC,QAAAA,CAAAA,CAAS,CAAAD,CACbN,CAAAA,EAAMQ,MAAM,CAACC,OAAO,EAIxBlB,EAAmBJ,EAAAA,EAAA,CAAA,EAAMoB,GAAO,CAAA,EAAA,CAAEG,GAAI,IAAIC,KAAKJ,EAAQG,EAAE,CAAC,GAC3D,GACCE,KAAK,CAAEC,IACPC,QAAQC,IAAI,CAACF,EACd,GACM,KACNb,EAAMA,KAAK,EACZ,CACD,EAAG,CAACH,EAAOC,EAAaC,EAAW,CACpC"}