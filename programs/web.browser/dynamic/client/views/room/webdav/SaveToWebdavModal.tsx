function module(e,t,l){let r,n,a,o,u,c,i,s,d,m,p,E,f,b,v,h,k,g,y,F,_,S,w,C,T;let x=["_id"];l.link("@babel/runtime/helpers/extends",{default(e){r=e}},0),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),l.link("@rocket.chat/fuselage",{Modal(e){a=e},Box(e){o=e},Button(e){u=e},FieldGroup(e){c=e},Field(e){i=e},FieldLabel(e){s=e},FieldRow(e){d=e},FieldError(e){m=e},Select(e){p=e},Throbber(e){E=e}},0),l.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){f=e}},1),l.link("@rocket.chat/ui-contexts",{useMethod(e){b=e},useToastMessageDispatch(e){v=e},useTranslation(e){h=e}},2),l.link("react",{default(e){k=e},useState(e){g=e},useMemo(e){y=e},useEffect(e){F=e},useRef(e){_=e}},3),l.link("react-hook-form",{useForm(e){S=e},Controller(e){w=e}},4),l.link("../../../hooks/useEndpointData",{useEndpointData(e){C=e}},5),l.link("../../../lib/getWebdavServerName",{getWebdavServerName(e){T=e}},6),l.exportDefault(e=>{let{onClose:t,data:l}=e,M=h(),[W,q]=g(!1),D=v(),I=b("uploadFileToWebdav"),H=_(null),R=f(),{control:j,handleSubmit:A,formState:{errors:B}}=S(),{value:G}=C("/v1/webdav.getMyAccounts"),L=y(()=>null!=G&&G.accounts?G.accounts.map(e=>{let{_id:t}=e;return[t,T(n(e,x))]}):[],[null==G?void 0:G.accounts]);F(()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.abort},[]);let N=e=>{let{accountId:r}=e;q(!0);let{url:n,attachment:{title:a}}=l;H.current=new XMLHttpRequest,H.current.open("GET",n,!0),H.current.responseType="arraybuffer",H.current.onload=async()=>{var e;let l=null===(e=H.current)||void 0===e?void 0:e.response;if(l){let e=new Uint8Array(l);try{if(!a)throw Error("File name is required");let t=await I(r,e,a);if(!t.success)throw Error(t.message?M(t.message):"Error uploading file");return D({type:"success",message:M("File_uploaded")})}catch(e){return D({type:"error",message:e})}finally{q(!1),t()}}},H.current.send(null)};return k.createElement(a,{wrapperFunction:e=>k.createElement(o,r({is:"form",onSubmit:A(N)},e))},k.createElement(a.Header,null,k.createElement(a.Title,null,M("Save_To_Webdav")),k.createElement(a.Close,{title:M("Close"),onClick:t})),k.createElement(a.Content,null,W&&k.createElement(o,{alignItems:"center",display:"flex",justifyContent:"center",minHeight:"x32"},k.createElement(E,null)),!W&&k.createElement(c,null,k.createElement(i,null,k.createElement(s,null,M("Select_a_webdav_server")),k.createElement(d,null,k.createElement(w,{name:"accountId",control:j,rules:{required:!0},render:e=>{let{field:t}=e;return k.createElement(p,r({},t,{options:L,id:R,placeholder:M("Select_an_option")}))}})),B.accountId&&k.createElement(m,null,M("Field_required"))))),k.createElement(a.Footer,null,k.createElement(a.FooterControllers,null,k.createElement(u,{onClick:t},M("Cancel")),k.createElement(u,{primary:!0,type:"submit",loading:W},M("Save_To_Webdav")))))})}
//# sourceMappingURL=/dynamic/client/views/room/webdav/3d72119f64bf925242b02a2a6a7c67ddfca232b5.map
