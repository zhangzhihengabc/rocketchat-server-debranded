)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/ComposerPopupProvider.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { isOmnichannelRoom } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useMethod, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport React, { useMemo } from 'react';\nimport type { ReactNode } from 'react';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { emoji } from '../../../../app/emoji/client';\nimport { Subscriptions } from '../../../../app/models/client';\nimport ComposerPopupCannedResponse from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupCannedResponse';\nimport type { ComposerBoxPopupEmojiProps } from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupEmoji';\nimport ComposerPopupEmoji from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupEmoji';\nimport type { ComposerBoxPopupRoomProps } from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupRoom';\nimport ComposerBoxPopupRoom from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupRoom';\nimport type { ComposerBoxPopupSlashCommandProps } from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupSlashCommand';\nimport ComposerPopupSlashCommand from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupSlashCommand';\nimport ComposerBoxPopupUser from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupUser';\nimport type { ComposerBoxPopupUserProps } from '../../../../app/ui-message/client/popup/components/composerBoxPopup/ComposerBoxPopupUser';\nimport { usersFromRoomMessages } from '../../../../app/ui-message/client/popup/messagePopupConfig';\nimport { slashCommands } from '../../../../app/utils/client';\nimport { CannedResponse } from '../../../../ee/app/canned-responses/client/collections/CannedResponse';\nimport type { ComposerPopupContextValue } from '../contexts/ComposerPopupContext';\nimport { ComposerPopupContext, createMessageBoxPopupConfig } from '../contexts/ComposerPopupContext';\n\nconst ComposerPopupProvider = ({ children, room }: { children: ReactNode; room: IRoom }) => {\n\tconst { _id: rid } = room;\n\tconst userSpotlight = useMethod('spotlight');\n\tconst suggestionsCount = useSetting<number>('Number_of_users_autocomplete_suggestions');\n\tconst cannedResponseEnabled = useSetting<boolean>('Canned_Responses_Enable');\n\tconst [recentEmojis] = useLocalStorage('emoji.recent', []);\n\tconst isOmnichannel = isOmnichannelRoom(room);\n\tconst useEmoji = useUserPreference('useEmojis');\n\tconst t = useTranslation();\n\n\tconst call = useMethod('getSlashCommandPreviews');\n\tconst value: ComposerPopupContextValue = useMemo(() => {\n\t\treturn [\n\t\t\tcreateMessageBoxPopupConfig({\n\t\t\t\ttrigger: '@',\n\t\t\t\ttitle: t('People'),\n\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\n\t\t\t\t\tconst items: ComposerBoxPopupUserProps[] = [];\n\n\t\t\t\t\tconst users = usersFromRoomMessages\n\t\t\t\t\t\t.find(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tts: { $exists: true },\n\t\t\t\t\t\t\t\t...(filter && {\n\t\t\t\t\t\t\t\t\t$or: [{ username: filterRegex }, { name: filterRegex }],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlimit: suggestionsCount ?? 5,\n\t\t\t\t\t\t\t\tsort: { ts: -1 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.fetch()\n\t\t\t\t\t\t.map((u) => {\n\t\t\t\t\t\t\tu.suggestion = true;\n\t\t\t\t\t\t\treturn u;\n\t\t\t\t\t\t});\n\t\t\t\t\tif (!filterRegex || filterRegex.test('all')) {\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t_id: 'all',\n\t\t\t\t\t\t\tusername: 'all',\n\t\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\t\tname: t('Notify_all_in_this_room'),\n\t\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!filterRegex || filterRegex.test('here')) {\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t_id: 'here',\n\t\t\t\t\t\t\tusername: 'here',\n\t\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\t\tname: t('Notify_active_in_this_room'),\n\t\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [...users, ...items];\n\t\t\t\t},\n\t\t\t\tgetItemsFromServer: async (filter: string) => {\n\t\t\t\t\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\n\t\t\t\t\tconst usernames = usersFromRoomMessages\n\t\t\t\t\t\t.find(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tts: { $exists: true },\n\t\t\t\t\t\t\t\t...(filter && {\n\t\t\t\t\t\t\t\t\t$or: [{ username: filterRegex }, { name: filterRegex }],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlimit: suggestionsCount ?? 5,\n\t\t\t\t\t\t\t\tsort: { ts: -1 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.fetch()\n\t\t\t\t\t\t.map((u) => {\n\t\t\t\t\t\t\treturn u.username;\n\t\t\t\t\t\t});\n\t\t\t\t\tconst { users = [] } = await userSpotlight(filter, usernames, { users: true, mentions: true }, rid);\n\n\t\t\t\t\treturn users.map(({ _id, username, nickname, name, status, avatarETag, outside }) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_id,\n\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\tnickname,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tavatarETag,\n\t\t\t\t\t\t\toutside,\n\t\t\t\t\t\t\tsort: 3,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tgetValue: (item) => item.username,\n\t\t\t\trenderItem: ({ item }) => <ComposerBoxPopupUser {...item} />,\n\t\t\t}),\n\t\t\tcreateMessageBoxPopupConfig<ComposerBoxPopupRoomProps>({\n\t\t\t\ttrigger: '#',\n\t\t\t\ttitle: t('Channels'),\n\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\n\t\t\t\t\tconst records = Subscriptions.find(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: filterRegex,\n\t\t\t\t\t\t\t$or: [{ federated: { $exists: false } }, { federated: false }],\n\t\t\t\t\t\t\tt: {\n\t\t\t\t\t\t\t\t$in: ['c', 'p'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlimit: suggestionsCount ?? 5,\n\t\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\t\tls: -1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t).fetch();\n\t\t\t\t\treturn records;\n\t\t\t\t},\n\t\t\t\tgetItemsFromServer: async (filter: string) => {\n\t\t\t\t\tconst { rooms = [] } = await userSpotlight(filter, [], { rooms: true, mentions: true }, rid);\n\t\t\t\t\treturn rooms as unknown as ComposerBoxPopupRoomProps[];\n\t\t\t\t},\n\t\t\t\tgetValue: (item) => `${item.name || item.fname}`,\n\t\t\t\trenderItem: ({ item }) => <ComposerBoxPopupRoom {...item} />,\n\t\t\t}) as any,\n\t\t\tuseEmoji &&\n\t\t\t\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\n\t\t\t\t\ttrigger: ':',\n\t\t\t\t\ttitle: t('Emoji'),\n\t\t\t\t\ttriggerLength: 2,\n\t\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\t\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\n\t\t\t\t\t\tconst colorBlind = new RegExp('tone[1-5]:*$');\n\t\t\t\t\t\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\n\n\t\t\t\t\t\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\n\t\t\t\t\t\t\tconst aExact = a._id === key ? 2 : 0;\n\t\t\t\t\t\t\tconst bExact = b._id === key ? 2 : 0;\n\t\t\t\t\t\t\tconst aPartial = a._id.startsWith(key) ? 1 : 0;\n\t\t\t\t\t\t\tconst bPartial = b._id.startsWith(key) ? 1 : 0;\n\n\t\t\t\t\t\t\tlet aScore = aExact + aPartial;\n\t\t\t\t\t\t\tlet bScore = bExact + bPartial;\n\n\t\t\t\t\t\t\tif (recents.includes(a._id)) {\n\t\t\t\t\t\t\t\taScore += recents.indexOf(a._id) + 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (recents.includes(b._id)) {\n\t\t\t\t\t\t\t\tbScore += recents.indexOf(b._id) + 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (aScore > bScore) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (aScore < bScore) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\n\t\t\t\t\t\tconst key = `:${filter}`;\n\n\t\t\t\t\t\tconst recents = recentEmojis.map((item) => `:${item}:`);\n\n\t\t\t\t\t\tconst collection = emoji.list;\n\n\t\t\t\t\t\treturn Object.keys(collection)\n\t\t\t\t\t\t\t.map((_id) => {\n\t\t\t\t\t\t\t\tconst data = collection[key];\n\t\t\t\t\t\t\t\treturn { _id, data };\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t({ _id }) =>\n\t\t\t\t\t\t\t\t\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.sort(emojiSort(recents))\n\t\t\t\t\t\t\t.slice(0, 10);\n\t\t\t\t\t},\n\t\t\t\t\tgetItemsFromServer: async () => {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t},\n\t\t\t\t\tgetValue: (item) => `${item._id.substring(1)}`,\n\t\t\t\t\trenderItem: ({ item }) => <ComposerPopupEmoji {...item} />,\n\t\t\t\t}),\n\t\t\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\n\t\t\t\ttitle: t('Emoji'),\n\t\t\t\ttrigger: '\\\\+:',\n\t\t\t\tprefix: '+',\n\t\t\t\tsuffix: ' ',\n\t\t\t\ttriggerAnywhere: false,\n\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\n\t\t\t\t\tconst colorBlind = new RegExp('tone[1-5]:*$');\n\t\t\t\t\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\n\n\t\t\t\t\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\n\t\t\t\t\t\tlet idA = a._id;\n\t\t\t\t\t\tlet idB = a._id;\n\n\t\t\t\t\t\tif (recents.includes(a._id)) {\n\t\t\t\t\t\t\tidA = recents.indexOf(a._id) + idA;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (recents.includes(b._id)) {\n\t\t\t\t\t\t\tidB = recents.indexOf(b._id) + idB;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (idA < idB) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (idA > idB) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\n\t\t\t\t\tconst key = `:${filter}`;\n\n\t\t\t\t\tconst recents = recentEmojis.map((item) => `:${item}:`);\n\n\t\t\t\t\tconst collection = emoji.list;\n\n\t\t\t\t\treturn Object.keys(collection)\n\t\t\t\t\t\t.map((_id) => {\n\t\t\t\t\t\t\tconst data = collection[key];\n\t\t\t\t\t\t\treturn { _id, data };\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t({ _id }) =>\n\t\t\t\t\t\t\t\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.sort(emojiSort(recents))\n\t\t\t\t\t\t.slice(0, 10);\n\t\t\t\t},\n\t\t\t\tgetItemsFromServer: async () => {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t\tgetValue: (item) => `${item._id}`,\n\t\t\t\trenderItem: ({ item }) => <ComposerPopupEmoji {...item} />,\n\t\t\t}),\n\n\t\t\tcreateMessageBoxPopupConfig<ComposerBoxPopupSlashCommandProps>({\n\t\t\t\ttitle: t('Commands'),\n\t\t\t\ttrigger: '/',\n\t\t\t\tsuffix: ' ',\n\t\t\t\ttriggerAnywhere: false,\n\t\t\t\trenderItem: ({ item }) => <ComposerPopupSlashCommand {...item} />,\n\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\treturn Object.keys(slashCommands.commands)\n\t\t\t\t\t\t.map((command) => {\n\t\t\t\t\t\t\tconst item = slashCommands.commands[command];\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t_id: command,\n\t\t\t\t\t\t\t\tparams: item.params && t.has(item.params) ? t(item.params) : item.params ?? '',\n\t\t\t\t\t\t\t\tdescription: item.description && t.has(item.description) ? t(item.description) : item.description,\n\t\t\t\t\t\t\t\tpermission: item.permission,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter((command) => {\n\t\t\t\t\t\t\tconst isMatch = command._id.indexOf(filter) > -1;\n\n\t\t\t\t\t\t\tif (!isMatch) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!command.permission) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn hasAtLeastOnePermission(command.permission, rid);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.sort((a, b) => a._id.localeCompare(b._id))\n\t\t\t\t\t\t.slice(0, 11);\n\t\t\t\t},\n\t\t\t\tgetItemsFromServer: async () => [],\n\t\t\t}),\n\t\t\tcannedResponseEnabled &&\n\t\t\t\tisOmnichannel &&\n\t\t\t\tcreateMessageBoxPopupConfig<{\n\t\t\t\t\t_id: string;\n\t\t\t\t\ttext: string;\n\t\t\t\t\tshortcut: string;\n\t\t\t\t}>({\n\t\t\t\t\ttitle: t('Canned_Responses'),\n\t\t\t\t\ttrigger: '!',\n\t\t\t\t\tprefix: '',\n\t\t\t\t\ttriggerAnywhere: true,\n\t\t\t\t\trenderItem: ({ item }) => <ComposerPopupCannedResponse {...item} />,\n\t\t\t\t\tgetItemsFromLocal: async (filter: string) => {\n\t\t\t\t\t\tconst exp = new RegExp(filter, 'i');\n\t\t\t\t\t\treturn CannedResponse.find(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshortcut: exp,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlimit: 12,\n\t\t\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\t\t\tshortcut: -1,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.fetch()\n\t\t\t\t\t\t\t.map((record) => ({\n\t\t\t\t\t\t\t\t_id: record._id,\n\t\t\t\t\t\t\t\ttext: record.text,\n\t\t\t\t\t\t\t\tshortcut: record.shortcut,\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\t\t\t\t\tgetItemsFromServer: async () => [],\n\t\t\t\t\tgetValue: (item) => {\n\t\t\t\t\t\treturn item.text;\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\tcreateMessageBoxPopupConfig({\n\t\t\t\tmatchSelectorRegex: /(?:^)(\\/[\\w\\d\\S]+ )[^]*$/,\n\t\t\t\tpreview: true,\n\t\t\t\tgetItemsFromLocal: async ({ cmd, params, tmid }: { cmd: string; params: string; tmid: string }) => {\n\t\t\t\t\tconst result = await call({ cmd, params, msg: { rid, tmid } });\n\t\t\t\t\treturn (\n\t\t\t\t\t\tresult?.items.map((item) => ({\n\t\t\t\t\t\t\t_id: item.id,\n\t\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\t\ttype: item.type,\n\t\t\t\t\t\t})) ?? []\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t}),\n\t\t].filter(Boolean);\n\t}, [t, cannedResponseEnabled, isOmnichannel, recentEmojis, suggestionsCount, userSpotlight, rid, call, useEmoji]);\n\n\treturn <ComposerPopupContext.Provider value={value} children={children} />;\n};\n\nexport default ComposerPopupProvider;\n",null],"names":["_objectSpread","isOmnichannelRoom","useLocalStorage","escapeRegExp","useMethod","useSetting","useTranslation","useUserPreference","React","useMemo","hasAtLeastOnePermission","emoji","Subscriptions","ComposerPopupCannedResponse","ComposerPopupEmoji","ComposerBoxPopupRoom","ComposerPopupSlashCommand","ComposerBoxPopupUser","usersFromRoomMessages","slashCommands","CannedResponse","ComposerPopupContext","createMessageBoxPopupConfig","module","default","link","exportDefault","_ref","children","room","_id","rid","userSpotlight","suggestionsCount","cannedResponseEnabled","recentEmojis","isOmnichannel","useEmoji","t","call","value","trigger","title","getItemsFromLocal","filter","filterRegex","RegExp","items","users","find","ts","$exists","$or","username","name","limit","sort","fetch","map","u","suggestion","test","push","system","getItemsFromServer","usernames","mentions","_ref2","nickname","status","avatarETag","outside","getValue","item","renderItem","_ref3","createElement","records","federated","$in","ls","rooms","concat","fname","_ref4","triggerLength","exactFinalTone","colorBlind","seeColor","key","recents","collection","list","Object","keys","data","_ref5","substring","length","a","b","aExact","bExact","aPartial","startsWith","bPartial","aScore","bScore","includes","indexOf","slice","_ref6","prefix","suffix","triggerAnywhere","_ref7","idA","idB","_ref8","_ref9","commands","command","_item$params","params","has","description","permission","isMatch","localeCompare","_ref10","exp","shortcut","record","text","matchSelectorRegex","preview","_ref11","_result$items$map","cmd","tmid","result","msg","id","type","Boolean","Provider"],"mappings":"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"}