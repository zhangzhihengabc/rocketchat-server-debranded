)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/hooks/useRoomQuery.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport type { UseQueryOptions, UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { ChatRoom } from '../../../../../app/models/client';\nimport { queueMicrotask } from '../../../../lib/utils/queueMicrotask';\n\nexport function useRoomQuery(\n\trid: IRoom['_id'],\n\toptions?: UseQueryOptions<IRoom | null, Error, IRoom | null, readonly ['rooms', IRoom['_id']]>,\n): UseQueryResult<IRoom | null, Error> {\n\tconst queryKey = ['rooms', rid] as const;\n\n\tconst queryResult = useQuery(queryKey, async (): Promise<IRoom | null> => ChatRoom.findOne({ _id: rid }, { reactive: false }) ?? null, {\n\t\tstaleTime: Infinity,\n\t\t...options,\n\t});\n\n\tconst { refetch } = queryResult;\n\n\tuseEffect(() => {\n\t\tconst liveQueryHandle = ChatRoom.find({ _id: rid }).observe({\n\t\t\tadded: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t\tchanged: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t\tremoved: () => queueMicrotask(() => refetch({ exact: false })),\n\t\t});\n\n\t\treturn () => {\n\t\t\tliveQueryHandle.stop();\n\t\t};\n\t}, [refetch, rid]);\n\n\treturn queryResult;\n}\n",null],"names":["_objectSpread","useQuery","useEffect","ChatRoom","queueMicrotask","useRoomQuery","rid","options","queryKey","queryResult","_ChatRoom$findOne","findOne","_id","reactive","staleTime","Infinity","refetch","liveQueryHandle","find","observe","added","exact","changed","removed","stop","module","link","default","export"],"mappings":"2BAEAA,EAAiDC,EAAAC,EAAAC,EAAAC,EAM3C,SAAUC,EACfC,CAAiB,CACjBC,CAA8F,EAE9F,IAAMC,EAAW,CAAC,QAASF,EAAa,CAElCG,EAAcR,EAASO,EAAU,UAAA,IAAAE,EAAA,OAAA,AAAsF,OAAtFA,CAAAA,EAAmCP,EAASQ,OAAO,CAAC,CAAEC,IAAKN,CAAG,EAAI,CAAEO,SAAU,CAAA,CAAK,EAAE,GAACH,AAAA,KAAA,IAAAA,EAAAA,EAAI,IAAI,EAAAV,EAAA,CACpIc,UAAWC,GAAQ,EAChBR,IAGE,CAAES,QAAAA,CAAAA,CAAS,CAAGP,EAcpB,OAZAP,EAAU,KACT,IAAMe,EAAkBd,EAASe,IAAI,CAAC,CAAEN,IAAKN,CAAG,GAAIa,OAAO,CAAC,CAC3DC,MAAO,IAAMhB,EAAe,IAAMY,EAAQ,CAAEK,MAAO,CAAA,CAAK,IACxDC,QAAS,IAAMlB,EAAe,IAAMY,EAAQ,CAAEK,MAAO,CAAA,CAAK,IAC1DE,QAAS,IAAMnB,EAAe,IAAMY,EAAQ,CAAEK,MAAO,CAAA,CAAK,MAG3D,MAAO,KACNJ,EAAgBO,IAAI,EACrB,CACD,EAAG,CAACR,EAASV,EAAI,EAEVG,CACR,CAhCiBgB,EAAQC,IAAAA,CAAAA,uCAAwB,CAAAC,QAAAA,CAAAA,EAAA3B,EAAAA,CAAA,CAAA,EAAA,GAAjDyB,EAAOG,MAAE,CAAA,CAAAvB,aAAgB,IAAAA,CAAA,GAAwBoB,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAxB,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAwB,EAAAA,IAAAA,CAAAA,QAAAA,CAAAvB,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAuB,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAtB,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAsB,EAAAA,IAAAA,CAAAA,uCAAAA,CAAArB,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}