)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/hooks/useChatMessagesInstance.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage, IRoom } from '@rocket.chat/core-typings';\nimport { useUserId } from '@rocket.chat/ui-contexts';\nimport { useEffect } from 'react';\n\nimport { ChatMessages } from '../../../../../app/ui/client/lib/ChatMessages';\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\nimport type { ChatAPI } from '../../../../lib/chats/ChatAPI';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useRoomSubscription } from '../../contexts/RoomContext';\nimport { useInstance } from './useInstance';\nimport { useUserCard } from './useUserCard';\n\nexport function useChatMessagesInstance({ rid, tmid }: { rid: IRoom['_id']; tmid?: IMessage['_id'] }): ChatAPI {\n\tconst uid = useUserId();\n\tconst subscription = useRoomSubscription();\n\tconst actionManager = useUiKitActionManager();\n\tconst chatMessages = useInstance(() => {\n\t\tconst instance = new ChatMessages({ rid, tmid, uid, actionManager });\n\n\t\treturn [instance, () => instance.release()];\n\t}, [rid, tmid, uid]);\n\n\tuseEffect(() => {\n\t\tif (subscription) {\n\t\t\tchatMessages?.readStateManager.updateSubscription(subscription);\n\t\t}\n\t}, [subscription, chatMessages?.readStateManager]);\n\n\tchatMessages.userCard = useUserCard();\n\tchatMessages.emojiPicker = useEmojiPicker();\n\n\treturn chatMessages;\n}\n",null],"names":["useUserId","useEffect","ChatMessages","useEmojiPicker","useUiKitActionManager","useRoomSubscription","useInstance","useUserCard","useChatMessagesInstance","_ref","rid","tmid","uid","subscription","actionManager","chatMessages","instance","release","readStateManager","updateSubscription","userCard","emojiPicker","module","export"],"mappings":"2BACqDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAW/C,SAAUC,EAAuBC,CAAA,EAA6D,GAA5D,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAAA,CAAqD,CAAAF,EAC7FG,EAAMZ,IACNa,EAAeR,IACfS,EAAgBV,IAChBW,EAAeT,EAAY,KAChC,IAAMU,EAAW,IAAId,EAAa,CAAEQ,IAAAA,EAAKC,KAAAA,EAAMC,IAAAA,EAAKE,cAAAA,CAAa,GAEjE,MAAO,CAACE,EAAU,IAAMA,EAASC,OAAO,GAAG,AAC5C,EAAG,CAACP,EAAKC,EAAMC,EAAI,EAWnB,OATAX,EAAU,KACLY,GACHE,CAAAA,MAAAA,GAAAA,EAAcG,gBAAgB,CAACC,kBAAkB,CAACN,EAAY,CAEhE,EAAG,CAACA,EAAcE,MAAAA,EAAY,KAAA,EAAZA,EAAcG,gBAAgB,CAAC,EAEjDH,EAAaK,QAAQ,CAAGb,IACxBQ,EAAaM,WAAW,CAAGlB,IAEpBY,CACR,CA/BAO,EAAOC,MAAE,CAAA,CAAAf,wBAAiB,IAAAA,CAA2B,GAAAc,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAtB,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAsB,EAAAA,IAAAA,CAAAA,QAAAA,CAAArB,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAqB,EAAAA,IAAAA,CAAAA,gDAAAA,CAAApB,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAoB,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAnB,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAmB,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAlB,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAkB,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAjB,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAiB,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAhB,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAgB,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAf,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}