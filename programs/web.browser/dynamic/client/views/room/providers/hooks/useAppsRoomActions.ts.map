)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/providers/hooks/useAppsRoomActions.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { UiKitTriggerTimeoutError } from '../../../../../app/ui-message/client/UiKitTriggerTimeoutError';\nimport { Utilities } from '../../../../../ee/lib/misc/Utilities';\nimport { useAppActionButtons } from '../../../../hooks/useAppActionButtons';\nimport { useApplyButtonFilters } from '../../../../hooks/useApplyButtonFilters';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useRoom } from '../../contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../contexts/RoomToolboxContext';\n\nexport const useAppsRoomActions = () => {\n\tconst result = useAppActionButtons('roomAction');\n\tconst actionManager = useUiKitActionManager();\n\tconst applyButtonFilters = useApplyButtonFilters();\n\tconst room = useRoom();\n\tconst { t } = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tresult.data?.filter(applyButtonFilters).map(\n\t\t\t\t(action): RoomToolboxActionConfig => ({\n\t\t\t\t\tid: action.actionId,\n\t\t\t\t\ticon: undefined,\n\t\t\t\t\tvariant: action.variant,\n\t\t\t\t\torder: 300,\n\t\t\t\t\ttitle: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\n\t\t\t\t\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\n\t\t\t\t\t// Filters were applied in the applyButtonFilters function\n\t\t\t\t\t// if the code made it this far, the button should be shown\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tvoid actionManager\n\t\t\t\t\t\t\t.emitInteraction(action.appId, {\n\t\t\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\t\t\tactionId: action.actionId,\n\t\t\t\t\t\t\t\trid: room._id,\n\t\t\t\t\t\t\t\tpayload: { context: action.context },\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(async (reason) => {\n\t\t\t\t\t\t\t\tif (reason instanceof UiKitTriggerTimeoutError) {\n\t\t\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn reason;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'apps',\n\t\t\t\t}),\n\t\t\t) ?? [],\n\t\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, room._id, t],\n\t);\n};\n",null],"names":["useToastMessageDispatch","useMemo","useTranslation","UiKitTriggerTimeoutError","Utilities","useAppActionButtons","useApplyButtonFilters","useUiKitActionManager","useRoom","module","export","useAppsRoomActions","result","actionManager","applyButtonFilters","room","t","dispatchToastMessage","_result$data$filter$m","_result$data","data","filter","map","action","id","actionId","icon","undefined","variant","order","title","getI18nKeyForApp","labelI18n","appId","groups","emitInteraction","type","rid","_id","payload","context","catch","reason","message"],"mappings":"2BAAwCA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,mBAAyB,IAAAA,CAAM,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAR,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAP,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,gEAAAA,CAAAN,yBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAL,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAJ,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAH,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAF,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAD,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAY5D,IAAMG,EAAqB,KACjC,IAAMC,EAASP,EAAoB,cAC7BQ,EAAgBN,IAChBO,EAAqBR,IACrBS,EAAOP,IACP,CAAEQ,EAAAA,CAAAA,CAAG,CAAGd,IACRe,EAAuBjB,IAE7B,OAAOC,EACN,KAAA,IAAAiB,EAAAC,EAAA,OAAA,AAiCE,OAjCFD,CAAAA,EAAA,AACY,OADZC,CAAAA,EACCP,EAAOQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAXA,EAAaE,MAAM,CAACP,GAAoBQ,GAAG,CACzCC,GAAqC,CAAA,CACrCC,GAAID,EAAOE,QAAQ,CACnBC,KAAMC,KAAAA,EACNC,QAASL,EAAOK,OAAO,CACvBC,MAAO,IACPC,MAAO1B,EAAU2B,gBAAgB,CAACR,EAAOS,SAAS,CAAET,EAAOU,KAAK,EAChEC,OAAQ,CAAC,QAAS,UAAW,OAAQ,OAAQ,SAAU,kBAAkB,CAGzEX,OAAQ,KACFV,EACHsB,eAAe,CAACZ,EAAOU,KAAK,CAAE,CAC9BG,KAAM,eACNX,SAAUF,EAAOE,QAAQ,CACzBY,IAAKtB,EAAKuB,GAAG,CACbC,QAAS,CAAEC,QAASjB,EAAOiB,OAAAA,AAAO,IAElCC,KAAK,CAAC,MAAOC,IACb,GAAIA,aAAkBvC,EAA0B,CAC/Cc,EAAqB,CACpBmB,KAAM,QACNO,QAAS3B,EAAE,+BAEZ,OAGD,OAAO0B,CACR,EACF,EACAN,KAAM,SACL,GACFlB,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EACR,CAACL,EAAeC,EAAoBG,EAAsBL,EAAOQ,IAAI,CAAEL,EAAKuB,GAAG,CAAEtB,EAAE,CAErF"}