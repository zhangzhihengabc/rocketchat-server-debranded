)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/Header/ParentTeam.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { TEAM_TYPE } from '@rocket.chat/core-typings';\nimport { HeaderTag, HeaderTagIcon, HeaderTagSkeleton } from '@rocket.chat/ui-client';\nimport { useUserId, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport { goToRoomById } from '../../../lib/utils/goToRoomById';\n\ntype APIErrorResult = { success: boolean; error: string };\n\nconst ParentTeam = ({ room }: { room: IRoom }): ReactElement | null => {\n\tconst { teamId } = room;\n\tconst userId = useUserId();\n\n\tif (!teamId) {\n\t\tthrow new Error('invalid rid');\n\t}\n\n\tif (!userId) {\n\t\tthrow new Error('invalid uid');\n\t}\n\n\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n\tconst userTeamsListEndpoint = useEndpoint('GET', '/v1/users.listTeams');\n\n\tconst {\n\t\tdata: teamInfoData,\n\t\tisLoading: teamInfoLoading,\n\t\tisError: teamInfoError,\n\t} = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\n\t\tkeepPreviousData: true,\n\t\tretry: (_, error) => (error as APIErrorResult)?.error === 'unauthorized' && false,\n\t});\n\n\tconst { data: userTeams, isLoading: userTeamsLoading } = useQuery(['userId', userId], async () => userTeamsListEndpoint({ userId }));\n\n\tconst userBelongsToTeam = userTeams?.teams?.find((team) => team._id === teamId) || false;\n\tconst isTeamPublic = teamInfoData?.teamInfo.type === TEAM_TYPE.PUBLIC;\n\n\tconst redirectToMainRoom = (): void => {\n\t\tconst rid = teamInfoData?.teamInfo.roomId;\n\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tgoToRoomById(rid);\n\t};\n\n\tif (teamInfoLoading || userTeamsLoading) {\n\t\treturn <HeaderTagSkeleton />;\n\t}\n\n\tif (teamInfoError) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<HeaderTag onClick={isTeamPublic || userBelongsToTeam ? redirectToMainRoom : undefined}>\n\t\t\t<HeaderTagIcon icon={{ name: isTeamPublic ? 'team' : 'team-lock' }} />\n\t\t\t{teamInfoData?.teamInfo.name}\n\t\t</HeaderTag>\n\t);\n};\n\nexport default ParentTeam;\n",null],"names":["TEAM_TYPE","HeaderTag","HeaderTagIcon","HeaderTagSkeleton","useUserId","useEndpoint","useQuery","React","goToRoomById","module","link","default","exportDefault","_ref","_userTeams$teams","room","teamId","userId","Error","teamsInfoEndpoint","userTeamsListEndpoint","data","teamInfoData","isLoading","teamInfoLoading","isError","teamInfoError","keepPreviousData","retry","_","error","userTeams","userTeamsLoading","userBelongsToTeam","teams","find","team","_id","isTeamPublic","teamInfo","type","PUBLIC","createElement","onClick","rid","roomId","undefined","icon","name"],"mappings":"2BACAA,EAAsDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAWC,IAAA,CAAM,4BAA4B,CAAAV,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAR,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAL,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAD,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAtDC,EAAOG,aAAa,CAWDC,IAAmD,IAAAC,EAAA,GAAlD,CAAEC,KAAAA,CAAAA,CAAuB,CAAAF,EACtC,CAAEG,OAAAA,CAAAA,CAAQ,CAAGD,EACbE,EAASb,IAEf,GAAI,CAACY,EACJ,MAAM,AAAIE,MAAM,eAGjB,GAAI,CAACD,EACJ,MAAM,AAAIC,MAAM,eAGjB,IAAMC,EAAoBd,EAAY,MAAO,kBACvCe,EAAwBf,EAAY,MAAO,uBAE3C,CACLgB,KAAMC,CAAY,CAClBC,UAAWC,CAAe,CAC1BC,QAASC,CAAAA,CACT,CAAGpB,EAAS,CAAC,SAAUU,EAAO,CAAE,SAAYG,EAAkB,CAAEH,OAAAA,CAAM,GAAK,CAC3EW,iBAAkB,CAAA,EAClBC,MAAO,CAACC,EAAGC,IAAW,AAAAA,CAAAA,MAAAA,EAAwB,KAAA,EAAxBA,EAA0BA,KAAK,AAALA,IAAU,gBAAkB,CAAA,IAGvE,CAAET,KAAMU,CAAS,CAAER,UAAWS,CAAAA,CAAkB,CAAG1B,EAAS,CAAC,SAAUW,EAAO,CAAE,SAAYG,EAAsB,CAAEH,OAAAA,CAAM,IAE1HgB,EAAoB,AAAAF,CAAAA,MAAAA,EAAS,KAAA,EAAA,AAAO,OAAPjB,CAAAA,EAATiB,EAAWG,KAAK,AAALA,GAAKpB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAkBqB,IAAI,CAAEC,GAASA,EAAKC,GAAG,GAAKrB,EAAM,GAAK,CAAA,EAC7EsB,EAAe,AAAAhB,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACC,IAAI,AAAJA,IAASxC,EAAUyC,MAAM,QAYrE,AAAIjB,GAAmBQ,EACfzB,EAAAmC,aAAA,CAACvC,EAAiB,MAGtBuB,EACI,KAIPnB,EAAAmC,aAAA,CAACzC,EAAS,CAAC0C,QAASL,GAAgBL,EAnBV,KAC1B,IAAMW,EAAMtB,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACM,MAAM,CAEpCD,GAILpC,EAAaoC,EACd,EAW8EE,KAAAA,CAAU,EACtFvC,EAAAmC,aAAA,CAACxC,EAAa,CAAC6C,KAAM,CAAEC,KAAMV,EAAe,OAAS,WAAW,CAAG,GAClEhB,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACS,IAAI,CAG/B"}