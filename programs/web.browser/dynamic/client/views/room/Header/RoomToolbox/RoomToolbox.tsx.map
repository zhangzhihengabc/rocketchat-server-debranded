)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/Header/RoomToolbox/RoomToolbox.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { HeaderToolboxAction, HeaderToolboxDivider } from '@rocket.chat/ui-client';\nimport { useLayout, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo } from 'react';\n\nimport GenericMenu from '../../../../components/GenericMenu/GenericMenu';\nimport type { GenericMenuItemProps } from '../../../../components/GenericMenu/GenericMenuItem';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\nimport type { RoomToolboxActionConfig } from '../../contexts/RoomToolboxContext';\n\ntype RoomToolboxProps = {\n\tclassName?: ComponentProps<typeof Box>['className'];\n};\n\ntype MenuActionsProps = {\n\tid: string;\n\titems: GenericMenuItemProps[];\n}[];\n\nconst RoomToolbox = ({ className }: RoomToolboxProps) => {\n\tconst t = useTranslation();\n\tconst { roomToolboxExpanded } = useLayout();\n\n\tconst toolbox = useRoomToolbox();\n\tconst { actions, openTab } = toolbox;\n\n\tconst featuredActions = actions.filter((action) => action.featured);\n\tconst normalActions = actions.filter((action) => !action.featured);\n\tconst visibleActions = !roomToolboxExpanded ? [] : normalActions.slice(0, 6);\n\n\tconst hiddenActions = (!roomToolboxExpanded ? actions : normalActions.slice(6))\n\t\t.filter((item) => !item.disabled && !item.featured)\n\t\t.map((item) => ({\n\t\t\t'key': item.id,\n\t\t\t'content': t(item.title),\n\t\t\t'onClick':\n\t\t\t\titem.action ??\n\t\t\t\t((): void => {\n\t\t\t\t\topenTab(item.id);\n\t\t\t\t}),\n\t\t\t'data-qa-id': `ToolBoxAction-${item.icon}`,\n\t\t\t...item,\n\t\t}))\n\t\t.reduce((acc, item) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(item);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, key: item.key, title: group === 'apps' ? t('Apps') : '', items: [item] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as MenuActionsProps);\n\n\tconst renderDefaultToolboxItem: RoomToolboxActionConfig['renderToolboxItem'] = useMutableCallback(\n\t\t({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => {\n\t\t\treturn (\n\t\t\t\t<HeaderToolboxAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t/>\n\t\t\t);\n\t\t},\n\t);\n\n\tconst mapToToolboxItem = (action: RoomToolboxActionConfig, index: number) => {\n\t\treturn (action.renderToolboxItem ?? renderDefaultToolboxItem)?.({\n\t\t\t...action,\n\t\t\taction: action.action ?? (() => toolbox.openTab(action.id)),\n\t\t\tclassName,\n\t\t\tindex,\n\t\t\ttoolbox,\n\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{featuredActions.map(mapToToolboxItem)}\n\t\t\t{featuredActions.length > 0 && <HeaderToolboxDivider />}\n\t\t\t{visibleActions.map(mapToToolboxItem)}\n\t\t\t{(normalActions.length > 6 || roomToolboxExpanded) && (\n\t\t\t\t<GenericMenu title={t('Options')} data-qa-id='ToolBox-Menu' sections={hiddenActions} placement='bottom-end' />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default memo(RoomToolbox);\n",null],"names":["_objectSpread","useMutableCallback","HeaderToolboxAction","HeaderToolboxDivider","useLayout","useTranslation","React","memo","GenericMenu","useRoomToolbox","module","default","link","exportDefault","_ref","className","t","roomToolboxExpanded","toolbox","actions","openTab","featuredActions","filter","action","featured","normalActions","visibleActions","slice","hiddenActions","item","disabled","map","_item$action","id","title","concat","icon","reduce","acc","group","type","section","find","items","push","newSection","key","renderDefaultToolboxItem","_ref2","index","tab","tooltip","createElement","pressed","mapToToolboxItem","_ref3","_action$renderToolbox","_action$action","renderToolboxItem","Fragment","length","sections","placement"],"mappings":"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"}