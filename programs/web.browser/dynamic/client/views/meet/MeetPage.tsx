function module(e,t,o){let l,n,r,a,i,s,d,u,m,c,v,k,f,y,g,p,E;o.link("@rocket.chat/fuselage",{Button(e){l=e},Box(e){n=e},Flex(e){r=e}},0),o.link("@rocket.chat/ui-contexts",{useRouteParameter(e){a=e},useSearchParameter(e){i=e},useTranslation(e){s=e}},1),o.link("meteor/meteor",{Meteor(e){d=e}},2),o.link("react",{default(e){u=e},useEffect(e){m=e},useState(e){c=e},useCallback(e){v=e}},3),o.link("../../../app/utils/client/lib/SDKClient",{sdk(e){k=e}},4),o.link("../../components/avatar/UserAvatar",{default(e){f=e}},5),o.link("../../hooks/useEmbeddedLayout",{useEmbeddedLayout(e){y=e}},6),o.link("../notFound/NotFoundPage",{default(e){g=e}},7),o.link("../root/PageLoading",{default(e){p=e}},8),o.link("./CallPage",{default(e){E=e}},9),o.link("./styles.css"),o.exportDefault(()=>{let e=s(),[t,o]=c(!1),[w,b]=c(null),[h,C]=c(null),x=a("rid"),S=i("token"),B=y(),[I,_]=c(""),[N,z]=c(""),[P,T]=c(void 0),L=v(async()=>{var e,t,l,n,r;if(!S||!x)throw Error("Missing parameters");let a=await k.rest.get("/v1/livechat/room",{token:S,rid:x});if((null==a?void 0:null===(e=a.room)||void 0===e?void 0:null===(t=e.v)||void 0===t?void 0:t.token)===S)return C(a.room.v._id),_(a.room.fname),null!=a&&null!==(l=a.room)&&void 0!==l&&null!==(n=l.responseBy)&&void 0!==n&&n.username?z(a.room.responseBy.username):z(a.room.servedBy.username),b((null==a?void 0:null===(r=a.room)||void 0===r?void 0:r.callStatus)||"ended"),T(a.room.webRtcCallStartTime),o(!0)},[S,x]),W=v(async()=>{var e,t,l,n,r;if(!x)throw Error("Missing parameters");let a=await k.rest.get("/v1/rooms.info",{roomId:x});if((null==a?void 0:null===(e=a.room)||void 0===e?void 0:null===(t=e.servedBy)||void 0===t?void 0:t._id)===d.userId())return _(a.room.fname),null!=a&&null!==(l=a.room)&&void 0!==l&&null!==(n=l.responseBy)&&void 0!==n&&n.username?z(a.room.responseBy.username):z(a.room.servedBy.username),b((null==a?void 0:null===(r=a.room)||void 0===r?void 0:r.callStatus)||"ended"),T(a.room.webRtcCallStartTime),o(!0)},[x]);return(m(()=>{if(S){L();return}W()},[W,L,S]),null===w)?u.createElement(p,null):t?"ended"===w?u.createElement(r.Container,{direction:"column",justifyContent:"center"},u.createElement(n,{width:"full",minHeight:"sh",alignItems:"center",backgroundColor:"dark",overflow:"hidden",position:"relative"},u.createElement(n,{position:"absolute",style:{top:"5%",right:"2%"},className:"Self_Video",backgroundColor:"dark",alignItems:"center"},u.createElement(f,{style:{display:"block",margin:"auto"},username:S?I:N,className:"rcx-message__avatar",size:window.innerWidth<=450?"x32":"x48"})),u.createElement(n,{position:"absolute",zIndex:1,style:{top:window.innerWidth<=450?"30%":"20%",display:"flex",justifyContent:"center",flexDirection:"column"},alignItems:"center"},u.createElement(f,{style:{display:"block",margin:"auto"},username:S?N:I,className:"rcx-message__avatar",size:"x124"}),u.createElement("p",{style:{color:"white",fontSize:16,margin:15}},"Call Ended!"),u.createElement("p",{style:{color:"white",fontSize:window.innerWidth<=450?15:22}},S?N:I)),u.createElement(n,{position:"absolute",alignItems:"center",style:{bottom:"20%"}},u.createElement(l,{icon:"cross",square:!0,title:e("Close_Window"),onClick:()=>window.close(),backgroundColor:"dark",borderColor:"extra-dark"})))):u.createElement(E,{roomId:x,status:w,visitorToken:S,visitorId:h,setStatus:b,visitorName:I,agentName:N,isLayoutEmbedded:B,callStartTime:P}):u.createElement(g,null)})}
//# sourceMappingURL=/dynamic/client/views/meet/dea796915d96b3cbd4340f776cd0e35e557e585a.map
