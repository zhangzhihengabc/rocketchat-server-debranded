)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/meet/CallPage.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { FC } from 'react';\nimport React, { useEffect, useState } from 'react';\n\nimport { Notifications } from '../../../app/notifications/client';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport UserAvatar from '../../components/avatar/UserAvatar';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId: any;\n\tvisitorToken: any;\n\tvisitorId: any;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage: FC<CallPageProps> = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}) => {\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tNotifications.onVisitor(WEB_RTC_EVENTS.WEB_RTC, visitorId, (type: any, data: any) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t});\n\n\t\t\tNotifications.onRoom(roomId, 'webrtc' as any, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'deviceType', {\n\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t});\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'deviceType', {\n\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'callStatus', { callStatus: 'inProgress' });\n\t\t} else if (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'getDeviceType');\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tNotifications.onRoom(roomId, 'webrtc' as any, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetIsAgentActive(true);\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tNotifications.notifyRoom(roomId, 'webrtc' as any, 'cameraStatus', { isCameraOn: !isCameraOn });\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={localAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t\t<ButtonGroup\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t></video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={remoteAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={!callInIframe ? 'x124' : avatarSize}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={agentName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize={isLocalMobileDevice ? 'x32' : 'x48'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={visitorName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize='x124'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n",null],"names":["_objectSpread","Box","Flex","ButtonGroup","Button","Icon","useTranslation","moment","React","useEffect","useState","Notifications","WebRTC","WEB_RTC_EVENTS","UserAvatar","OngoingCallDuration","module","link","default","v","exportDefault","_ref","roomId","visitorToken","visitorId","status","setStatus","isLayoutEmbedded","visitorName","agentName","callStartTime","isAgentActive","setIsAgentActive","isMicOn","setIsMicOn","isCameraOn","setIsCameraOn","isRemoteMobileDevice","setIsRemoteMobileDevice","callInIframe","setCallInIframe","isRemoteCameraOn","setIsRemoteCameraOn","isLocalMobileDevice","setIsLocalMobileDevice","iconSize","buttonSize","t","webrtcInstance","getInstanceByRoomId","isMobileDevice","window","innerWidth","innerHeight","media","audio","video","width","ideal","height","onVisitor","WEB_RTC","type","data","room","onUserStream","onRoom","callStatus","stop","notifyRoom","startCall","toggleButton","control","toggleAudio","toggleVideo","closeWindow","_parent","parent","handleIframeClose","close","getCallDuration","duration","Date","diff","asSeconds","showCallPage","localAvatar","remoteAvatar","createElement","Container","direction","justifyContent","minHeight","alignItems","backgroundColor","overflow","position","zIndex","style","top","right","className","id","autoPlay","playsInline","muted","transform","display","margin","username","size","bottom","square","title","onClick","Number","name","parseInt","borderColor","_parent2","expandCall","color","danger","flexDirection","fontSize","textAlign","counter","marginTop","Fragment"],"mappings":"2BAAAA,EAAAC,EAAOC,EAAKC,EAAQC,EAAWC,EAA8CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3DC,EAAEC,IAAA,CAAA,uCAAiC,CAAAC,QAAwBC,CAAA,EAAAnB,EAAAA,CAAA,CAAA,EAAA,GAA5CgB,EAAQC,IAAM,CAAA,wBAAM,CAAAhB,IAAwBkB,CAAA,EAAAlB,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAV,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,SAAAA,CAAAE,QAAAA,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAL,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAJ,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAAC,EAAAA,IAAAA,CAAAA,gBAA7EA,EAAOI,aAAa,CAyBgBC,IAU/B,GAVgC,CACpCC,OAAAA,CAAM,CACNC,aAAAA,CAAY,CACZC,UAAAA,CAAS,CACTC,OAAAA,CAAM,CACNC,UAAAA,CAAS,CACTC,iBAAAA,CAAgB,CAChBC,YAAAA,CAAW,CACXC,UAAAA,CAAS,CACTC,cAAAA,CAAAA,CACA,CAAAT,EACM,CAACU,EAAeC,EAAiB,CAAGtB,EAAS,CAAA,GAC7C,CAACuB,EAASC,EAAW,CAAGxB,EAAS,CAAA,GACjC,CAACyB,EAAYC,EAAc,CAAG1B,EAAS,CAAA,GACvC,CAAC2B,EAAsBC,EAAwB,CAAG5B,EAAS,CAAA,GAC3D,CAAC6B,EAAcC,EAAgB,CAAG9B,EAAS,CAAA,GAC3C,CAAC+B,EAAkBC,EAAoB,CAAGhC,EAAS,CAAA,GACnD,CAACiC,EAAqBC,EAAuB,CAAGlC,EAAS,CAAA,GAE3DmC,EAAW,MACXC,EAAa,MAEbnB,IACHkB,EAAW,MACXC,EAAa,OAGd,IAAMC,EAAIzC,IACVG,EAAU,KACT,GAAIc,EAAc,CACjB,IAAMyB,EAAiBpC,EAAOqC,mBAAmB,CAAC3B,EAAQE,GACpD0B,EAAiB,IAItB,CAAA,AAHIvB,GACHa,EAAgB,CAAA,GAEbW,OAAOC,UAAU,EAAI,KAAOD,OAAOE,WAAW,EAAI,KAAOF,OAAOE,WAAW,EAAI,MAClFT,EAAuB,CAAA,GACvBI,EAAeM,KAAK,CAAG,CACtBC,MAAO,CAAA,EACPC,MAAO,CACNC,MAAO,CAAEC,MAAO,GAAG,EACnBC,OAAQ,CAAED,MAAO,GAAG,IAGf,CAAA,IAIT/C,EAAciD,SAAS,CAAC/C,EAAegD,OAAO,CAAErC,EAAW,CAACsC,EAAWC,KACrD,MAAbA,EAAKC,IAAI,EAGbhB,EAAeiB,YAAY,CAACH,EAAMC,EACnC,GAEApD,EAAcuD,MAAM,CAAC5C,EAAQ,SAAiB,CAACwC,EAAWC,KACrDD,AAAS,eAATA,GAAyBC,AAAoB,UAApBA,EAAKI,UAAU,EAC3CnB,EAAeoB,IAAI,GACnB1C,EAAUqC,EAAKI,UAAU,GACfL,AAAS,kBAATA,EACVnD,EAAc0D,UAAU,CAAC/C,EAAQ,SAAiB,aAAc,CAC/D4B,eAAgBA,MAEE,iBAATY,GACVpB,EAAoBqB,EAAK5B,UAAU,CAErC,GACAxB,EAAc0D,UAAU,CAAC/C,EAAQ,SAAiB,aAAc,CAC/D4B,eAAgBA,MAEjBvC,EAAc0D,UAAU,CAAC/C,EAAQ,SAAiB,aAAc,CAAE6C,WAAY,YAAY,QACpF,GAAI,CAACpC,EAAe,CAC1B,IAAMiB,EAAiBpC,EAAOqC,mBAAmB,CAAC3B,EACnC,CAAA,eAAXG,IACHd,EAAc0D,UAAU,CAAC/C,EAAQ,SAAiB,iBAClD0B,EAAesB,SAAS,CAAC,CACxBf,MAAO,CAAA,EACPC,MAAO,CACNC,MAAO,CAAEC,MAAO,IAAI,EACpBC,OAAQ,CAAED,MAAO,IAAI,MAIxB/C,EAAcuD,MAAM,CAAC5C,EAAQ,SAAiB,CAACwC,EAAWC,KACzD,GAAID,AAAS,eAATA,EAAuB,CAC1B,OAAQC,EAAKI,UAAU,EACtB,IAAK,QACJnB,EAAeoB,IAAI,GACnB,KACD,KAAK,aACJpB,EAAesB,SAAS,CAAC,CACxBf,MAAO,CAAA,EACPC,MAAO,CACNC,MAAO,CAAEC,MAAO,IAAI,EACpBC,OAAQ,CAAED,MAAO,IAAI,IAEpB,CAELhC,EAAUqC,EAAKI,UAAU,MACfL,AAAS,eAATA,GAAyBC,EAAKb,cAAc,CACtDZ,EAAwB,CAAA,GACL,iBAATwB,GACVpB,EAAoBqB,EAAK5B,UAAU,CAErC,GACAH,EAAiB,CAAA,GAEnB,EAAG,CAACD,EAAeN,EAAQC,EAAWF,EAAWF,EAAQC,EAAcI,EAAiB,EAExF,IAAM4C,EAAgBC,IACrB,GAAIA,AAAY,QAAZA,EAEH,OADA5D,EAAOqC,mBAAmB,CAAC3B,EAAQC,GAAckD,WAAW,GACrDvC,EAAW,CAACD,GAEpBrB,EAAOqC,mBAAmB,CAAC3B,EAAQC,GAAcmD,WAAW,GAC5DtC,EAAc,CAACD,GACfxB,EAAc0D,UAAU,CAAC/C,EAAQ,SAAiB,eAAgB,CAAEa,WAAY,CAACA,CAAU,EAC5F,EAEMwC,EAAc,KACnB,GAAIhD,EAAkB,CAAA,IAAAiD,EACrB,OAAA,AAAsB,OAAtBA,CAAAA,EAAQC,MAAAA,GAAcD,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBE,iBAAiB,GAE1C,OAAO3B,OAAO4B,KAAK,EACpB,EAEMC,EAAmBlD,GAA4BvB,EAAO0E,QAAQ,CAAC1E,EAAO,IAAI2E,MAAQC,IAAI,CAAC5E,EAAOuB,KAAiBsD,SAAS,GAExHC,EAAe,CAACC,EAAkBC,IACvC/E,EAAAgF,aAAA,CAACtF,EAAKuF,SAAS,CAAA,CAACC,UAAU,SAASC,eAAe,QAAQ,EACzDnF,EAAAgF,aAAA,CAACvF,EAAG,CAACwD,MAAM,OAAOmC,UAAU,KAAKC,WAAW,SAASC,gBAAgB,OAAOC,SAAS,SAASC,SAAS,UAAU,EAChHxF,EAAAgF,aAAA,CAACvF,EAAG,CACH+F,SAAS,WACTC,OAAQ,EACRC,MAAO,CACNC,IAAK,KACLC,MAAO,MAERC,UAAU,aACVR,WAAW,SACXC,gBAAgB,MAAM,EAEtBtF,EAAAgF,aAAA,CAAA,QAAA,CACCc,GAAG,aACHC,SAAQ,CAAA,EACRC,YAAW,CAAA,EACXC,MAAK,CAAA,EACLP,MAAO,CACNzC,MAAO,OACPiD,UAAW,aACXC,QAASxE,EAAa,QAAU,OAC/B,GAEH3B,EAAAgF,aAAA,CAAC1E,EAAU,CACVoF,MAAO,CACNS,QAASxE,EAAa,OAAS,QAC/ByE,OAAQ,QAETC,SAAUvB,EACVe,UAAU,sBACVS,KAAMnE,GAAuBJ,EAAe,MAAQ,KAAM,IAG5D/B,EAAAgF,aAAA,CAACrF,EAAW,CACX6F,SAAS,WACTC,OAAQ,EACRC,MAAO,CACNa,OAAQ,KACP,EAEFvG,EAAAgF,aAAA,CAACpF,EAAM,CACNkG,GAAG,MACHU,OAAM,CAAA,EACNC,MAAOhF,EAAUc,EAAE,mBAAqBA,EAAE,qBAC1CmE,QAAS,IAAW3C,EAAa,OACjC8B,UAAWpE,EAAU,KAAO,MAC5B6E,KAAMK,OAAOrE,EAAY,EAExBb,EAAUzB,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,MAAMN,KAAMjE,CAAS,GAAMrC,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,UAAUN,KAAMjE,CAAS,IAEtFrC,EAAAgF,aAAA,CAACpF,EAAM,CACNkG,GAAG,SACHU,OAAM,CAAA,EACNC,MAAO9E,EAAaY,EAAE,kBAAoBA,EAAE,iBAC5CmE,QAAS,IAAY3C,EAAa,UAClC8B,UAAWlE,EAAa,KAAO,MAC/B2E,KAAMO,SAASvE,EAAY,EAE1BX,EAAa3B,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,QAAQN,KAAMjE,CAAS,GAAMrC,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,YAAYN,KAAMjE,CAAS,IAE5FlB,GACAnB,EAAAgF,aAAA,CAACpF,EAAM,CACN4G,OAAM,CAAA,EACNlB,gBAAgB,OAChBwB,YAAY,oBACZ,aAAYvE,EAAE,eACdmE,QAAS,KAAA,IAAAK,EAAA,OAAA,AAA2B,OAA3BA,CAAAA,EAAa1C,MAAAA,GAAc0C,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBC,UAAU,EAAE,EAClDV,KAAMO,SAASvE,EAAY,EAE3BtC,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,eAAeN,KAAMjE,EAAU4E,MAAM,OAAO,IAGzDjH,EAAAgF,aAAA,CAACpF,EAAM,CAAC4G,OAAM,CAAA,EAACU,OAAM,CAAA,EAACT,MAAOlE,EAAE,YAAamE,QAASvC,EAAamC,KAAMO,SAASvE,EAAY,EAC5FtC,EAAAgF,aAAA,CAACnF,EAAI,CAAC+G,KAAK,YAAYN,KAAMjE,EAAU4E,MAAM,OAAO,KAGtDjH,EAAAgF,aAAA,CAAA,QAAA,CACCc,GAAG,cACHC,SAAQ,CAAA,EACRC,YAAW,CAAA,EACXN,MAAO,CACNzC,MAAOpB,EAAuB,MAAQ,OACtCqE,UAAW,aACXC,QAASlE,EAAmB,QAAU,OACrC,GAEHjC,EAAAgF,aAAA,CAACvF,EAAG,CACH+F,SAAS,WACTC,OAAQ,EACRU,QAASlE,EAAmB,OAAS,OACrCkD,eAAe,SACfgC,cAAc,SACd9B,WAAW,SACXK,MAAO,CACNC,IAAK9D,GAAwBM,EAAsB,MAAQ,MAC1D,EAEFnC,EAAAgF,aAAA,CAAC1E,EAAU,CACVoF,MAAO,CACNS,QAAS,QACTC,OAAQ,QAETC,SAAUtB,EACVc,UAAU,sBACVS,KAAM,AAACvE,EArNO,MAqNQ,MAAoB,GAE3C/B,EAAAgF,aAAA,CAACvF,EAAG,CAACwH,MAAM,QAAQG,SAAUrF,EAAe,GAAK,GAAIsF,UAAU,SAASjB,OAAQ,CAAE,EACjFpG,EAAAgF,aAAA,CAACzE,EAAmB,CAAC+G,QAAS9C,EAAgBlD,EAAe,IAE9DtB,EAAAgF,aAAA,CAACvF,EAAG,CACHiG,MAAKlG,EAAA,CACJyH,MAAO,QACPG,SAAUrF,EAAe,GAAK,GAC9BqE,OAAQrE,EAAe,EAAI,CAAC,EACxBA,GAAgB,CAAEwF,UAAW,CAAC,EACjC,EAEDxC,MAON,OACC/E,EAAAgF,aAAA,CAAAhF,EAAAwH,QAAA,CAAA,KACEvG,AAAW,YAAXA,GACAjB,EAAAgF,aAAA,CAACtF,EAAKuF,SAAS,CAAA,CAACC,UAAU,SAASC,eAAe,QAAQ,EACzDnF,EAAAgF,aAAA,CAACvF,EAAG,CAACwD,MAAM,OAAOmC,UAAU,KAAKC,WAAW,SAASC,gBAAgB,OAAOC,SAAS,SAASC,SAAS,UAAU,EAChHxF,EAAAgF,aAAA,CAACvF,EAAG,CACH+F,SAAS,WACTC,OAAQ,EACRC,MAAO,CACNC,IAAK,KACLC,MAAO,MAERC,UAAU,aACVP,gBAAgB,OAChBD,WAAW,QAAQ,EAEnBrF,EAAAgF,aAAA,CAAC1E,EAAU,CACVoF,MAAO,CACNS,QAAS,QACTC,OAAQ,QAETC,SAAUhF,EACVwE,UAAU,sBACVS,KAAMnE,EAAsB,MAAQ,KAAM,IAG5CnC,EAAAgF,aAAA,CAACvF,EAAG,CACH+F,SAAS,WACTC,OAAQ,EACRC,MAAO,CACNC,IAAK,MACLQ,QAAS,OACThB,eAAgB,SAChBgC,cAAe,UAEhB9B,WAAW,QAAQ,EAEnBrF,EAAAgF,aAAA,CAAC1E,EAAU,CACVoF,MAAO,CACNS,QAAS,QACTC,OAAQ,QAETC,SAAUjF,EACVyE,UAAU,sBACVS,KAAK,MAAM,GAEZtG,EAAAgF,aAAA,CAACvF,EAAG,CAACwH,MAAM,QAAQG,SAAU,GAAIhB,OAAQ,EAAG,EAC3C,cAEDpG,EAAAgF,aAAA,CAACvF,EAAG,CACHiG,MAAO,CACNuB,MAAO,QACPG,SAAUjF,EAAsB,GAAK,GACpC,EAEDf,MAMLH,AAAW,aAAXA,GACAjB,EAAAgF,aAAA,CAACvF,EAAG,CAAC2F,UAAU,MAAMe,QAAQ,OAAOhB,eAAe,SAASE,WAAW,SAAS4B,MAAM,QAAQG,SAAS,IAAI,EACzG7E,EAAE,kBAGJtB,AAAW,eAAXA,GACAjB,EAAAgF,aAAA,CAACtF,EAAKuF,SAAS,CAAA,CAACC,UAAU,SAASC,eAAe,QAAQ,EACxDpE,EAAe8D,EAAazD,EAAaC,GAAawD,EAAaxD,EAAWD,IAKpF"}