)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/home/cards/CustomContentCard.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Button, Icon, Tag } from '@rocket.chat/fuselage';\nimport { Card, CardFooter, CardFooterWrapper } from '@rocket.chat/ui-client';\nimport { useRole, useSettingSetValue, useSetting, useToastMessageDispatch, useTranslation, useRoute } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport CustomHomepageContent from '../CustomHomePageContent';\n\nconst CustomContentCard = (): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { data } = useIsEnterprise();\n\tconst isAdmin = useRole('admin');\n\tconst customContentBody = String(useSetting('Layout_Home_Body'));\n\tconst isCustomContentBodyEmpty = customContentBody === '';\n\tconst isCustomContentVisible = Boolean(useSetting('Layout_Home_Custom_Block_Visible'));\n\tconst isCustomContentOnly = Boolean(useSetting('Layout_Custom_Body_Only'));\n\n\tconst settingsRoute = useRoute('admin-settings');\n\n\tconst setCustomContentVisible = useSettingSetValue('Layout_Home_Custom_Block_Visible');\n\tconst setCustomContentOnly = useSettingSetValue('Layout_Custom_Body_Only');\n\n\tconst handleChangeCustomContentVisibility = async () => {\n\t\ttry {\n\t\t\tawait setCustomContentVisible(!isCustomContentVisible);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleOnlyShowCustomContent = async () => {\n\t\ttry {\n\t\t\tawait setCustomContentOnly(!isCustomContentOnly);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst isEnterprise = data?.isEnterprise;\n\tconst willNotShowCustomContent = isCustomContentBodyEmpty || !isCustomContentVisible;\n\n\tconst userVisibilityTooltipText = isCustomContentVisible ? t('Now_Its_Visible_For_Everyone') : t('Now_Its_Visible_Only_For_Admins');\n\n\tlet customContentOnlyTooltipText = t('It_Will_Hide_All_Other_Content_Blocks_In_The_Homepage');\n\tif (willNotShowCustomContent) {\n\t\tcustomContentOnlyTooltipText = t('Action_Available_After_Custom_Content_Added_And_Visible');\n\t} else if (isCustomContentOnly) {\n\t\tcustomContentOnlyTooltipText = t('It_Will_Show_All_Other_Content_Blocks_In_The_Homepage');\n\t}\n\n\tif (isAdmin) {\n\t\treturn (\n\t\t\t<Card data-qa-id='homepage-custom-card'>\n\t\t\t\t<Box display='flex' mbe={12}>\n\t\t\t\t\t<Tag role='status' aria-label={willNotShowCustomContent ? t('Not_Visible_To_Workspace') : t('Visible_To_Workspace')}>\n\t\t\t\t\t\t<Icon mie={4} name={willNotShowCustomContent ? 'eye-off' : 'eye'} size='x12' />\n\t\t\t\t\t\t{willNotShowCustomContent ? t('Not_Visible_To_Workspace') : t('Visible_To_Workspace')}\n\t\t\t\t\t</Tag>\n\t\t\t\t</Box>\n\t\t\t\t<Box mb={8} role='status' aria-label={isCustomContentBodyEmpty ? t('Homepage_Custom_Content_Default_Message') : customContentBody}>\n\t\t\t\t\t{isCustomContentBodyEmpty ? t('Homepage_Custom_Content_Default_Message') : <CustomHomepageContent />}\n\t\t\t\t</Box>\n\t\t\t\t<CardFooterWrapper>\n\t\t\t\t\t<CardFooter>\n\t\t\t\t\t\t<Button onClick={() => settingsRoute.push({ group: 'Layout' })} title={t('Layout_Home_Page_Content')}>\n\t\t\t\t\t\t\t{t('Customize_Content')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={willNotShowCustomContent ? 'eye' : 'eye-off'}\n\t\t\t\t\t\t\tdisabled={isCustomContentBodyEmpty || (isCustomContentVisible && isCustomContentOnly)}\n\t\t\t\t\t\t\ttitle={isCustomContentBodyEmpty ? t('Action_Available_After_Custom_Content_Added') : userVisibilityTooltipText}\n\t\t\t\t\t\t\tonClick={handleChangeCustomContentVisibility}\n\t\t\t\t\t\t\trole='button'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{willNotShowCustomContent ? t('Show_To_Workspace') : t('Hide_On_Workspace')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon='lightning'\n\t\t\t\t\t\t\tdisabled={willNotShowCustomContent || !isEnterprise}\n\t\t\t\t\t\t\ttitle={!isEnterprise ? t('Premium_only') : customContentOnlyTooltipText}\n\t\t\t\t\t\t\tonClick={handleOnlyShowCustomContent}\n\t\t\t\t\t\t\trole='button'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!isCustomContentOnly ? t('Show_Only_This_Content') : t('Show_default_content')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</CardFooter>\n\t\t\t\t</CardFooterWrapper>\n\t\t\t</Card>\n\t\t);\n\t}\n\n\tif (!willNotShowCustomContent && !isCustomContentOnly) {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<Box mb={8}>\n\t\t\t\t\t<CustomHomepageContent role='status' aria-label={customContentBody} />\n\t\t\t\t</Box>\n\t\t\t</Card>\n\t\t);\n\t}\n\treturn <CustomHomepageContent role='status' aria-label={customContentBody} />;\n};\n\nexport default CustomContentCard;\n",null],"names":["Box","Button","Icon","Tag","Card","CardFooter","CardFooterWrapper","useRole","useSettingSetValue","useSetting","useToastMessageDispatch","useTranslation","useRoute","React","useIsEnterprise","CustomHomepageContent","module","link","v","default","exportDefault","t","dispatchToastMessage","data","isAdmin","customContentBody","String","isCustomContentBodyEmpty","isCustomContentVisible","Boolean","isCustomContentOnly","settingsRoute","setCustomContentVisible","setCustomContentOnly","handleChangeCustomContentVisibility","error","type","message","handleOnlyShowCustomContent","isEnterprise","willNotShowCustomContent","userVisibilityTooltipText","customContentOnlyTooltipText","createElement","display","mbe","role","mie","name","size","mb","onClick","push","group","title","icon","disabled"],"mappings":"2BAAAA,EAAOC,EAAOC,EAAMC,EAA2CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzCC,EAASC,IAAE,CAAA,wBAAM,CAAAjB,IAAwBkB,CAAA,EAAAlB,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAZ,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,iCAAAA,CAAAF,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAG,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA/DC,EAAOI,aAAa,CASM,KACzB,IAAMC,EAAIV,IACJW,EAAuBZ,IAEvB,CAAEa,KAAAA,CAAAA,CAAM,CAAGT,IACXU,EAAUjB,EAAQ,SAClBkB,EAAoBC,OAAOjB,EAAW,qBACtCkB,EAA2BF,AAAsB,KAAtBA,EAC3BG,EAAyBC,CAAAA,CAAQpB,EAAW,oCAC5CqB,EAAsBD,CAAAA,CAAQpB,EAAW,2BAEzCsB,EAAgBnB,EAAS,kBAEzBoB,EAA0BxB,EAAmB,oCAC7CyB,EAAuBzB,EAAmB,2BAE1C0B,EAAsC,UAC3C,GAAI,CACH,MAAMF,EAAwB,CAACJ,GAC9B,MAAOO,EAAO,CACfb,EAAqB,CAAEc,KAAM,QAASC,QAASF,CAAK,GAEtD,EAEMG,EAA8B,UACnC,GAAI,CACH,MAAML,EAAqB,CAACH,GAC3B,MAAOK,EAAO,CACfb,EAAqB,CAAEc,KAAM,QAASC,QAASF,CAAK,GAEtD,EAEMI,EAAehB,MAAAA,EAAI,KAAA,EAAJA,EAAMgB,YAAY,CACjCC,EAA2Bb,GAA4B,CAACC,EAExDa,EAAqDpB,EAAE,AAA3BO,EAA2B,+BAAoC,mCAE7Fc,EAA+BrB,EAAE,+DAOrC,CANImB,EACHE,EAA+BrB,EAAE,2DACvBS,GACVY,CAAAA,EAA+BrB,EAAE,wDAAuD,EAGrFG,GAEFX,EAAA8B,aAAA,CAACvC,EAAI,CAAC,aAAW,sBAAsB,EACtCS,EAAA8B,aAAA,CAAC3C,EAAG,CAAC4C,QAAQ,OAAOC,IAAK,EAAG,EAC3BhC,EAAA8B,aAAA,CAACxC,EAAG,CAAC2C,KAAK,SAAS,YAAA,CAAuCzB,EAAE,AAA7BmB,EAA6B,2BAAgC,uBAAwB,EACnH3B,EAAA8B,aAAA,CAACzC,EAAI,CAAC6C,IAAK,EAAGC,KAAMR,EAA2B,UAAY,MAAOS,KAAK,KAAK,GAChD5B,EAAE,AAA7BmB,EAA6B,2BAAgC,0BAGhE3B,EAAA8B,aAAA,CAAC3C,EAAG,CAACkD,GAAI,EAAGJ,KAAK,SAAS,aAAYnB,EAA2BN,EAAE,2CAA6CI,CAAkB,EAChIE,EAA2BN,EAAE,2CAA6CR,EAAA8B,aAAA,CAAC5B,EAAqB,OAElGF,EAAA8B,aAAA,CAACrC,EAAiB,KACjBO,EAAA8B,aAAA,CAACtC,EAAU,KACVQ,EAAA8B,aAAA,CAAC1C,EAAM,CAACkD,QAAS,IAAMpB,EAAcqB,IAAI,CAAC,CAAEC,MAAO,QAAQ,GAAKC,MAAOjC,EAAE,2BAA4B,EACnGA,EAAE,sBAEJR,EAAA8B,aAAA,CAAC1C,EAAM,CACNsD,KAAMf,EAA2B,MAAQ,UACzCgB,SAAU7B,GAA6BC,GAA0BE,EACjEwB,MAAO3B,EAA2BN,EAAE,+CAAiDoB,EACrFU,QAASjB,EACTY,KAAK,QAAQ,EAEezB,EAAE,AAA7BmB,EAA6B,oBAAyB,sBAExD3B,EAAA8B,aAAA,CAAC1C,EAAM,CACNsD,KAAK,YACLC,SAAUhB,GAA4B,CAACD,EACvCe,MAAO,AAACf,EAAmCG,EAApBrB,EAAE,gBACzB8B,QAASb,EACTQ,KAAK,QAAQ,EAEyCzB,EAAE,AAAtDS,EAAsD,uBAA9B,8BAQ5B,AAACU,GAA6BV,EAS3BjB,EAAA8B,aAAA,CAAC5B,EAAqB,CAAC+B,KAAK,SAAS,aAAYrB,CAAkB,GAPxEZ,EAAA8B,aAAA,CAACvC,EAAI,KACJS,EAAA8B,aAAA,CAAC3C,EAAG,CAACkD,GAAI,CAAE,EACVrC,EAAA8B,aAAA,CAAC5B,EAAqB,CAAC+B,KAAK,SAAS,aAAYrB,CAAkB,IAMxE"}