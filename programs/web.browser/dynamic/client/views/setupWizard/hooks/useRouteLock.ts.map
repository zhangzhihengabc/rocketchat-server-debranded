)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/hooks/useRouteLock.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useUserId, useUser, useSetting, useRole, useRouter } from '@rocket.chat/ui-contexts';\nimport { useEffect, useState } from 'react';\n\nexport const useRouteLock = (): boolean => {\n\tconst [locked, setLocked] = useState(true);\n\tconst setupWizardState = useSetting('Show_Setup_Wizard');\n\tconst userId = useUserId();\n\tconst user = useDebouncedValue(useUser(), 100);\n\tconst hasAdminRole = useRole('admin');\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tif (!setupWizardState) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (userId && !user?.status) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isComplete = setupWizardState === 'completed';\n\t\tconst noUserLoggedInAndIsNotPending = locked && !user && setupWizardState !== 'pending';\n\t\tconst userIsLoggedInButIsNotAdmin = !!user && !hasAdminRole;\n\n\t\tconst mustRedirect = isComplete || noUserLoggedInAndIsNotPending || userIsLoggedInButIsNotAdmin;\n\n\t\tif (mustRedirect) {\n\t\t\trouter.navigate('/home');\n\t\t\treturn;\n\t\t}\n\n\t\tsetLocked(false);\n\t}, [router, setupWizardState, userId, user, hasAdminRole, locked]);\n\n\treturn locked;\n};\n",null],"names":["useDebouncedValue","useUserId","useUser","useSetting","useRole","useRouter","useEffect","useState","module","export","useRouteLock","locked","setLocked","setupWizardState","userId","user","hasAdminRole","router","status","isComplete","noUserLoggedInAndIsNotPending","userIsLoggedInButIsNotAdmin","navigate"],"mappings":"2BAAkCA,EAA8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhEC,EAAOC,MAAE,CAAA,CAAAC,aAAmB,IAAAA,CAAM,GAA8BF,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAR,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAP,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAIzD,IAAMG,EAAe,KAC3B,GAAM,CAACC,EAAQC,EAAU,CAAGL,EAAS,CAAA,GAC/BM,EAAmBV,EAAW,qBAC9BW,EAASb,IACTc,EAAOf,EAAkBE,IAAW,KACpCc,EAAeZ,EAAQ,SACvBa,EAASZ,IAyBf,OAvBAC,EAAU,KACT,GAAI,CAACO,GAIDC,GAAU,CAACC,CAAAA,MAAAA,GAAAA,EAAMG,MAAM,AAANA,EAHpB,OAOD,IAAMC,EAAaN,AAAqB,cAArBA,EACbO,EAAgCT,GAAU,CAACI,GAAQF,AAAqB,YAArBA,EACnDQ,EAA8B,CAAC,CAACN,GAAQ,CAACC,EAI/C,GAFqBG,GAAcC,GAAiCC,EAElD,CACjBJ,EAAOK,QAAQ,CAAC,SAChB,OAGDV,EAAU,CAAA,EACX,EAAG,CAACK,EAAQJ,EAAkBC,EAAQC,EAAMC,EAAcL,EAAO,EAE1DA,CACR"}