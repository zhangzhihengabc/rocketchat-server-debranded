)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/hooks/useStepRouting.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useRouteParameter, useRouter, useRole, useSetting } from '@rocket.chat/ui-contexts';\nimport type { Dispatch, SetStateAction } from 'react';\nimport { useState, useEffect } from 'react';\n\nexport const useStepRouting = (): [number, Dispatch<SetStateAction<number>>] => {\n\tconst param = useRouteParameter('step');\n\tconst router = useRouter();\n\tconst hasAdminRole = useRole('admin');\n\tconst hasOrganizationData = !!useSetting('Organization_Name');\n\n\tconst [currentStep, setCurrentStep] = useState<number>(() => {\n\t\tconst initialStep = (() => {\n\t\t\tswitch (true) {\n\t\t\t\tcase hasOrganizationData: {\n\t\t\t\t\treturn 3;\n\t\t\t\t}\n\t\t\t\tcase hasAdminRole: {\n\t\t\t\t\treturn 2;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\n\t\tif (!param) {\n\t\t\treturn initialStep;\n\t\t}\n\n\t\tconst step = parseInt(param, 10);\n\t\tif (step && Number.isFinite(step) && step >= 1) {\n\t\t\treturn step;\n\t\t}\n\n\t\treturn initialStep;\n\t});\n\n\tuseEffect(() => {\n\t\tswitch (true) {\n\t\t\tcase (currentStep === 1 || currentStep === 2) && hasOrganizationData: {\n\t\t\t\tsetCurrentStep(3);\n\t\t\t\trouter.navigate(`/setup-wizard/3`);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase currentStep === 1 && hasAdminRole: {\n\t\t\t\tsetCurrentStep(2);\n\t\t\t\trouter.navigate(`/setup-wizard/2`);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\trouter.navigate(`/setup-wizard/${currentStep}`);\n\t\t\t}\n\t\t}\n\t}, [router, currentStep, hasAdminRole, hasOrganizationData]);\n\n\treturn [currentStep, setCurrentStep];\n};\n",null],"names":["useRouteParameter","useRouter","useRole","useSetting","useState","useEffect","module","export","useStepRouting","param","router","hasAdminRole","hasOrganizationData","currentStep","setCurrentStep","initialStep","step","parseInt","Number","isFinite","navigate","concat"],"mappings":"2BAAgDA,EAAkBC,EAAAC,EAAAC,EAA2BC,EAAAC,EAA7FC,EAAOC,MAAE,CAAA,CAAAC,eAAmB,IAAAA,CAAoB,GAA6CF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAItF,IAAMG,EAAiB,KAC7B,IAAMC,EAAQT,EAAkB,QAC1BU,EAAST,IACTU,EAAeT,EAAQ,SACvBU,EAAsB,CAAC,CAACT,EAAW,qBAEnC,CAACU,EAAaC,EAAe,CAAGV,EAAiB,KACtD,IAAMW,EAAc,AAAC,CAAA,KACpB,OAAQ,CAAA,GACP,KAAKH,EACJ,OAAO,CAER,MAAKD,EACJ,OAAO,CAER,SACC,OAAO,CACP,CAEH,CAAA,IAEA,GAAI,CAACF,EACJ,OAAOM,EAGR,IAAMC,EAAOC,SAASR,EAAO,WAC7B,AAAIO,GAAQE,OAAOC,QAAQ,CAACH,IAASA,GAAQ,EACrCA,EAGDD,CACR,GAsBA,OApBAV,EAAU,KACT,OAAQ,CAAA,GACP,IAAK,AAACQ,CAAAA,AAAgB,IAAhBA,GAAqBA,AAAgB,IAAhBA,CAAgB,GAAMD,EAChDE,EAAe,GACfJ,EAAOU,QAAQ,CAAA,mBACf,KAGD,MAAKP,AAAgB,IAAhBA,GAAqBF,EACzBG,EAAe,GACfJ,EAAOU,QAAQ,CAAA,mBACf,KAGD,SACCV,EAAOU,QAAQ,CAAA,iBAAAC,MAAA,CAAkBR,GACjC,CAEH,EAAG,CAACH,EAAQG,EAAaF,EAAcC,EAAoB,EAEpD,CAACC,EAAaC,EAAe,AACrC"}