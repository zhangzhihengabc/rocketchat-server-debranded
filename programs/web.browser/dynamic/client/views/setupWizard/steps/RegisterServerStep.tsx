function module(e,t,a){let r,n,s,i,o,c,l,u,d,p,E,k,f;a.link("@babel/runtime/helpers/objectSpread2",{default(e){r=e}},0),a.link("@rocket.chat/onboarding-ui",{RegisterServerPage(e){n=e},RegisterOfflinePage(e){s=e}},0),a.link("@rocket.chat/ui-contexts",{useEndpoint(e){i=e},useMethod(e){o=e},useTranslation(e){c=e}},1),a.link("@tanstack/react-query",{useMutation(e){l=e},useQuery(e){u=e}},2),a.link("react",{default(e){d=e},useState(e){p=e}},3),a.link("../../../hooks/useLicense",{useInvalidateLicense(e){E=e}},4),a.link("../../../lib/toast",{dispatchToastMessage(e){k=e}},5),a.link("../contexts/SetupWizardContext",{useSetupWizardContext(e){f=e}},6);let g={REGISTERED:"REGISTERED",OFFLINE:"OFFLINE"};a.exportDefault(()=>{let e=c(),{currentStep:t,goToNextStep:a,setSetupWizardData:S,registerServer:y,maxSteps:m,completeSetupWizard:R,saveAgreementData:I}=f(),[h,T]=p(g.REGISTERED),C=E(),O=async e=>{a(),S(t=>r(r({},t),{},{serverData:e})),await y(e)},b=i("POST","/v1/cloud.manualRegister"),F=i("POST","/v1/cloud.registerPreIntent"),D=o("cloud:getWorkspaceRegisterData"),{data:v}=u(["setupWizard/clientKey"],async()=>D(),{staleTime:1/0}),{data:L,isLoading:W,isError:x}=u(["setupWizard/registerIntent"],async()=>F(),{staleTime:1/0,select:e=>e.offline}),{mutate:z}=l(["setupWizard/confirmOfflineRegistration"],async e=>b({cloudBlob:e}),{onSuccess:()=>{C(100),R()},onError:()=>{k({type:"error",message:e("Cloud_register_error")})}}),P=async e=>{let{token:t,agreement:a}=e;await I(a),z(t)};return h===g.OFFLINE?d.createElement(s,{termsHref:"https://rocket.chat/terms",policyHref:"https://rocket.chat/privacy",clientKey:v||"",onCopySecurityCode:()=>k({type:"success",message:e("Copied")}),onBackButtonClick:()=>T(g.REGISTERED),onSubmit:P}):d.createElement(n,{onClickRegisterOffline:()=>T(g.OFFLINE),stepCount:m,onSubmit:O,currentStep:t,offline:x||!W&&L})})}
//# sourceMappingURL=/dynamic/client/views/setupWizard/steps/eacf72eca2b3464b2d6ffe6597b1fde2a196102b.map
