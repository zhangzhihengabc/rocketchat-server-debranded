)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { FC } from 'react';\nimport React, { useState, useCallback } from 'react';\n\nimport FirstStep from './ModalSteps/FirstStep';\nimport SecondStep from './ModalSteps/SecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_CONVERT: 'CONFIRM_CONVERT',\n};\n\ntype BaseConvertToChannelModalProps = {\n\tonClose: () => void;\n\tonCancel: () => void;\n\tonConfirm: () => Serialized<IRoom>[];\n\tcurrentStep?: string;\n\trooms?: (Serialized<IRoom> & { isLastOwner?: boolean })[];\n};\n\nconst BaseConvertToChannelModal: FC<BaseConvertToChannelModalProps> = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_CONVERT : STEPS.LIST_ROOMS,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_CONVERT));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst eligibleRooms = rooms;\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0 && eligibleRooms) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_CONVERT) {\n\t\treturn (\n\t\t\t<SecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms && rooms.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<FirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms?.length}\n\t\t/>\n\t);\n};\n\nexport default BaseConvertToChannelModal;\n",null],"names":["_objectSpread","useMutableCallback","React","useState","useCallback","FirstStep","SecondStep","module","default","link","STEPS","LIST_ROOMS","CONFIRM_CONVERT","exportDefault","_ref","onClose","onCancel","onConfirm","rooms","currentStep","length","step","setStep","selectedRooms","setSelectedRooms","onContinue","onReturn","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","filter","Boolean","fromEntries","eligibleRooms","map","createElement","deletedRooms","eligibleRoomsLength"],"mappings":"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAA,IAAoB,CAAA,uCAAoC,CAAAC,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAAxDO,EAAoBE,IAAA,CAAM,8BAA8B,CAAAR,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAC,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAC,QAAAA,CAAAA,EAAAF,EAAAA,CAAA,CAAA,EAAA,GAOjE,IAAMI,EAAQ,CACbC,WAAY,aACZC,gBAAiB,mBATlBL,EAAOM,aAAE,CAoB6DC,IAMjE,GANkE,CACtEC,QAAAA,CAAO,CACPC,SAAAA,CAAQ,CACRC,UAAAA,CAAS,CACTC,MAAAA,CAAK,CACLC,YAAAA,EAAc,AAAAD,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOE,MAAM,AAANA,IAAW,EAAIV,EAAME,eAAe,CAAGF,EAAMC,UAAAA,CAClE,CAAAG,EACM,CAACO,EAAMC,EAAQ,CAAGnB,EAASgB,GAC3B,CAACI,EAAeC,EAAiB,CAAGrB,EAA+C,CAAA,GAEnFsB,EAAaxB,EAAmB,IAAMqB,EAAQZ,EAAME,eAAe,GACnEc,EAAWzB,EAAmB,IAAMqB,EAAQZ,EAAMC,UAAU,GAI5DgB,EAAwBvB,EAAawB,IAC1CJ,EAAkBD,GACjB,AAAIA,CAAa,CAACK,EAAKC,GAAG,CAAC,EAC1B,OAAON,CAAa,CAACK,EAAKC,GAAG,CAAC,CAC9B7B,EAAA,CAAA,EAAYuB,IAEbvB,EAAAA,EAAA,CAAA,EAAYuB,GAAa,CAAA,EAAA,CAAE,CAACK,EAAKC,GAAG,CAAA,CAAGD,CAAI,GAE7C,EAAG,EAAE,EAECE,EAAmB7B,EAAmB,KAC3C,GAAI8B,AAAwD,IAAxDA,OAAOC,MAAM,CAACT,GAAeU,MAAM,CAACC,SAASd,MAAM,EAblCF,EAcpB,OAAOM,EAAiBO,OAAOI,WAAW,CAACC,AAdvBlB,EAcqCmB,GAAG,CAAET,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,IAExFJ,EAAiB,CAAA,EAClB,UAEA,AAAIH,IAASX,EAAME,eAAe,CAEhCV,EAAAoC,aAAA,CAAChC,EAAU,CACVW,UAAWA,EACXF,QAASA,EACTC,SAAUE,GAASA,EAAME,MAAM,CAAG,EAAIM,EAAWV,EACjDuB,aAAchB,EACdL,MAAOA,CAAM,GAMfhB,EAAAoC,aAAA,CAACjC,EAAS,CACTY,UAAWQ,EACXV,QAASA,EACTC,SAAUA,EACVE,MAAOA,EACPK,cAAeA,EACfO,iBAAkBA,EAClBH,sBAAuBA,EACvBa,oBAAqBJ,MAxCDlB,EAwCc,KAAA,EAAbkB,AAxCDlB,EAwCgBE,MAAAA,AAAO,EAG9C"}