)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/DeleteTeam/DeleteTeamModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState } from 'react';\n\nimport DeleteTeamChannels from './DeleteTeamChannels';\nimport DeleteTeamConfirmation from './DeleteTeamConfirmation';\n\nconst STEPS = { LIST_ROOMS: 'LIST_ROOMS', CONFIRM_DELETE: 'CONFIRM_DELETE' };\n\ntype DeleteTeamModalProps = {\n\tonCancel: () => void;\n\tonConfirm: (roomsToDelete: IRoom['_id'][]) => void;\n\trooms: Serialized<IRoom>[];\n};\n\nconst DeleteTeamModal = ({ onCancel, onConfirm, rooms }: DeleteTeamModalProps) => {\n\tconst hasRooms = rooms && rooms.length > 0;\n\n\tconst [step, setStep] = useState(hasRooms ? STEPS.LIST_ROOMS : STEPS.CONFIRM_DELETE);\n\tconst [deletedRooms, setDeletedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\tconst [keptRooms, setKeptRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\n\tconst onChangeRoomSelection = useMutableCallback((room) => {\n\t\tif (deletedRooms[room._id]) {\n\t\t\tsetDeletedRooms((deletedRooms) => {\n\t\t\t\tdelete deletedRooms[room._id];\n\t\t\t\treturn { ...deletedRooms };\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetDeletedRooms((deletedRooms) => ({ ...deletedRooms, [room._id]: room }));\n\t});\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(deletedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setDeletedRooms(Object.fromEntries(rooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetDeletedRooms({});\n\t});\n\n\tconst onSelectRooms = useMutableCallback(() => {\n\t\tconst keptRooms = Object.fromEntries(rooms.filter((room) => !deletedRooms[room._id]).map((room) => [room._id, room]));\n\t\tsetKeptRooms(keptRooms);\n\t\tsetStep(STEPS.CONFIRM_DELETE);\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE) {\n\t\treturn (\n\t\t\t<DeleteTeamConfirmation\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonReturn={hasRooms ? () => setStep(STEPS.LIST_ROOMS) : undefined}\n\t\t\t\tonCancel={onCancel}\n\t\t\t\tdeletedRooms={deletedRooms}\n\t\t\t\tkeptRooms={keptRooms}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<DeleteTeamChannels\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\tselectedRooms={deletedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonConfirm={onSelectRooms}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default DeleteTeamModal;\n",null],"names":["_objectSpread","useMutableCallback","React","useState","DeleteTeamChannels","DeleteTeamConfirmation","module","default","link","STEPS","LIST_ROOMS","CONFIRM_DELETE","exportDefault","_ref","onCancel","onConfirm","rooms","hasRooms","length","step","setStep","deletedRooms","setDeletedRooms","keptRooms","setKeptRooms","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","filter","Boolean","fromEntries","map","onSelectRooms","createElement","onReturn","undefined","selectedRooms"],"mappings":"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAA,IAAoB,CAAA,uCAAoC,CAAAC,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAxDM,EAAoBE,IAAA,CAAM,8BAA8B,CAAAP,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,uBAAAA,CAAAC,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAC,QAAAA,CAAAA,EAAAF,EAAAA,CAAA,CAAA,EAAA,GAMjE,IAAMI,EAAQ,CAAEC,WAAY,aAAcC,eAAgB,gBAAgB,EAN1EL,EAAOM,aAAE,CAceC,IAAyD,GAAxD,CAAEC,SAAAA,CAAQ,CAAEC,UAAAA,CAAS,CAAEC,MAAAA,CAAAA,CAA6B,CAAAH,EACtEI,EAAWD,GAASA,EAAME,MAAM,CAAG,EAEnC,CAACC,EAAMC,EAAQ,CAAGjB,EAASc,EAAWR,EAAMC,UAAU,CAAGD,EAAME,cAAc,EAC7E,CAACU,EAAcC,EAAgB,CAAGnB,EAA+C,CAAA,GACjF,CAACoB,EAAWC,EAAa,CAAGrB,EAA+C,CAAA,GAE3EsB,EAAwBxB,EAAoByB,IACjD,GAAIL,CAAY,CAACK,EAAKC,GAAG,CAAC,CAAE,CAC3BL,EAAiBD,IAChB,OAAOA,CAAY,CAACK,EAAKC,GAAG,CAAC,CAC7B3B,EAAA,CAAA,EAAYqB,KAEb,OAEDC,EAAiBD,GAAYrB,EAAAA,EAAA,CAAA,EAAWqB,GAAY,CAAA,EAAA,CAAE,CAACK,EAAKC,GAAG,CAAA,CAAGD,CAAI,GACvE,GAEME,EAAmB3B,EAAmB,KAC3C,GAAI4B,AAAuD,IAAvDA,OAAOC,MAAM,CAACT,GAAcU,MAAM,CAACC,SAASd,MAAM,CACrD,OAAOI,EAAgBO,OAAOI,WAAW,CAACjB,EAAMkB,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,IAE/EJ,EAAgB,CAAA,EACjB,GAEMa,EAAgBlC,EAAmB,KACxC,IAAMsB,EAAYM,OAAOI,WAAW,CAACjB,EAAMe,MAAM,CAAEL,GAAS,CAACL,CAAY,CAACK,EAAKC,GAAG,CAAC,EAAEO,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,GACnHF,EAAaD,GACbH,EAAQX,EAAME,cAAc,CAC7B,UAEA,AAAIQ,IAASV,EAAME,cAAc,CAE/BT,EAAAkC,aAAA,CAAC/B,EAAsB,CACtBU,UAAWA,EACXsB,SAAUpB,EAAW,IAAMG,EAAQX,EAAMC,UAAU,EAAI4B,KAAAA,EACvDxB,SAAUA,EACVO,aAAcA,EACdE,UAAWA,CAAU,GAMvBrB,EAAAkC,aAAA,CAAChC,EAAkB,CAClBY,MAAOA,EACPF,SAAUA,EACVyB,cAAelB,EACfO,iBAAkBA,EAClBb,UAAWoB,EACXV,sBAAuBA,CAAsB,EAGhD"}