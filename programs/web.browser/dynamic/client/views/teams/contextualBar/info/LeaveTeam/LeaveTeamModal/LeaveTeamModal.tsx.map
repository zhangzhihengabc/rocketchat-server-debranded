)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/LeaveTeam/LeaveTeamModal/LeaveTeamModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback, useMemo } from 'react';\n\nimport LeaveTeamModalChannels from './LeaveTeamModalChannels';\nimport LeaveTeamModalConfirmation from './LeaveTeamModalConfirmation';\n\nconst LEAVE_TEAM_STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\n} as const;\n\ntype LeaveTeamModalProps = {\n\trooms: (Serialized<IRoom> & { isLastOwner?: boolean })[];\n\tonCancel: () => void;\n\tonConfirm: () => void;\n};\n\nconst LeaveTeamModal = ({ rooms, onCancel, onConfirm }: LeaveTeamModalProps): ReactElement => {\n\tconst memoizedRooms = useMemo(() => rooms, [rooms]);\n\tconst [step, setStep] = useState(memoizedRooms.length === 0 ? LEAVE_TEAM_STEPS.CONFIRM_LEAVE : LEAVE_TEAM_STEPS.LIST_ROOMS);\n\n\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } }>({});\n\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\n\n\tconst handleContinue = useCallback(() => setStep(LEAVE_TEAM_STEPS.CONFIRM_LEAVE), []);\n\tconst handleReturn = useCallback(() => setStep(LEAVE_TEAM_STEPS.LIST_ROOMS), []);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\t\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\n\t\t\t}\n\n\t\t\treturn {};\n\t\t});\n\t});\n\n\tif (step === LEAVE_TEAM_STEPS.CONFIRM_LEAVE) {\n\t\treturn (\n\t\t\t<LeaveTeamModalConfirmation\n\t\t\t\tselectedRooms={selectedRooms}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onCancel}\n\t\t\t\tonCancel={rooms.length > 0 ? handleReturn : undefined}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<LeaveTeamModalChannels\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonConfirm={handleContinue}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default LeaveTeamModal;\n",null],"names":["_objectSpread","useMutableCallback","React","useState","useCallback","useMemo","LeaveTeamModalChannels","LeaveTeamModalConfirmation","module","default","link","LEAVE_TEAM_STEPS","LIST_ROOMS","CONFIRM_LEAVE","exportDefault","_ref","rooms","onCancel","onConfirm","memoizedRooms","step","setStep","length","selectedRooms","setSelectedRooms","lastOwnerRooms","filter","_ref2","isLastOwner","handleContinue","handleReturn","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","_ref3","map","createElement","onClose","undefined","eligibleRoomsLength"],"mappings":"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAA,IAAoB,CAAA,uCAAoC,CAAAC,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAxDQ,EAAoBE,IAAA,CAAM,8BAA8B,CAAAT,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAC,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAC,QAAAA,CAAAA,EAAAF,EAAAA,CAAA,CAAA,EAAA,GAOjE,IAAMI,EAAmB,CACxBC,WAAY,aACZC,cAAe,iBAThBL,EAAOM,aAAE,CAkBcC,IAAsE,GAArE,CAAEC,MAAAA,CAAK,CAAEC,SAAAA,CAAQ,CAAEC,UAAAA,CAAAA,CAAgC,CAAAH,EACpEI,EAAgBd,EAAQ,IAAMW,EAAO,CAACA,EAAM,EAC5C,CAACI,EAAMC,EAAQ,CAAGlB,EAASgB,AAAyB,IAAzBA,EAAcG,MAAM,CAASX,EAAiBE,aAAa,CAAGF,EAAiBC,UAAU,EAEpH,CAACW,EAAeC,EAAiB,CAAGrB,EAA2E,CAAA,GAC/GsB,EAAiBT,EAAMU,MAAM,CAACC,IAAA,GAAC,CAAEC,YAAAA,CAAAA,CAAa,CAAAD,EAAA,OAAKC,CAAW,GAE9DC,EAAiBzB,EAAY,IAAMiB,EAAQV,EAAiBE,aAAa,EAAG,EAAE,EAC9EiB,EAAe1B,EAAY,IAAMiB,EAAQV,EAAiBC,UAAU,EAAG,EAAE,EAEzEmB,EAAwB3B,EAAa4B,IAC1CR,EAAkBD,GACjB,AAAIA,CAAa,CAACS,EAAKC,GAAG,CAAC,EAC1B,OAAOV,CAAa,CAACS,EAAKC,GAAG,CAAC,CAC9BjC,EAAA,CAAA,EAAYuB,IAEbvB,EAAAA,EAAA,CAAA,EAAYuB,GAAa,CAAA,EAAA,CAAE,CAACS,EAAKC,GAAG,CAAA,CAAGD,CAAI,GAE7C,EAAG,EAAE,EAECE,EAAmBjC,EAAmB,KAC3CuB,EAAkBD,GACjB,AAAIY,AAAwD,IAAxDA,OAAOC,MAAM,CAACb,GAAeG,MAAM,CAACW,SAASf,MAAM,CAC/Ca,OAAOG,WAAW,CAACtB,EAAMU,MAAM,CAACa,IAAA,GAAC,CAAEX,YAAAA,CAAAA,CAAa,CAAAW,EAAA,MAAK,CAACX,CAAW,GAAEY,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,GAGlG,CAAA,EAET,UAEA,AAAIZ,IAAST,EAAiBE,aAAa,CAEzCX,EAAAuC,aAAA,CAAClC,EAA0B,CAC1BgB,cAAeA,EACfL,UAAWA,EACXwB,QAASzB,EACTA,SAAUD,EAAMM,MAAM,CAAG,EAAIQ,EAAea,KAAAA,CAAU,GAMxDzC,EAAAuC,aAAA,CAACnC,EAAsB,CACtBU,MAAOA,EACPC,SAAUA,EACV2B,oBAAqB5B,EAAMM,MAAM,CAAGG,EAAeH,MAAO,CAC1DC,cAAeA,EACfW,iBAAkBA,EAClBhB,UAAWW,EACXE,sBAAuBA,CAAsB,EAGhD"}