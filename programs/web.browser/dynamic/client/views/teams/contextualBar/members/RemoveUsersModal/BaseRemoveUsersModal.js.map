)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { usePermission } from '@rocket.chat/ui-contexts';\nimport React, { useState, useCallback } from 'react';\n\nimport RemoveUsersFirstStep from './RemoveUsersFirstStep';\nimport RemoveUsersSecondStep from './RemoveUsersSecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_DELETE: 'CONFIRM_DELETE',\n};\n\nconst BaseRemoveUsersModal = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_DELETE : STEPS.LIST_ROOMS,\n\tusername,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_DELETE));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst canViewUserRooms = usePermission('view-all-team-channels');\n\n\tconst eligibleRooms = rooms.filter(({ isLastOwner }) => !isLastOwner);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE || !canViewUserRooms) {\n\t\treturn (\n\t\t\t<RemoveUsersSecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms?.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t\tusername={username}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RemoveUsersFirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tparams={{}}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\t// onChangeParams={(...args) => console.log(args)}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms.length}\n\t\t/>\n\t);\n};\n\nexport default BaseRemoveUsersModal;\n",null],"names":["_objectSpread","useMutableCallback","usePermission","React","useState","useCallback","RemoveUsersFirstStep","RemoveUsersSecondStep","module","link","default","v","STEPS","LIST_ROOMS","CONFIRM_DELETE","exportDefault","_ref","onClose","onCancel","onConfirm","rooms","currentStep","length","username","step","setStep","selectedRooms","setSelectedRooms","onContinue","onReturn","canViewUserRooms","eligibleRooms","filter","_ref2","isLastOwner","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","createElement","params","eligibleRoomsLength","deletedRooms"],"mappings":"2BAAIA,EAAAC,EAAkHC,EAAgGC,EAAMC,EAASC,EAAmHC,EAAsGC,EAA5aC,EAAOC,IAAI,CAAC,uCAAuC,CAACC,QAAQC,CAAC,EAAEX,EAAcW,CAAC,CAAC,EAAE,GAA5EH,EAAOC,IAAI,CAAC,8BAA8B,CAACR,mBAAmBU,CAAC,EAAEV,EAAmBU,CAAC,CAAC,EAAE,GAAqBH,EAAOC,IAAI,CAAC,2BAA2B,CAACP,cAAcS,CAAC,EAAET,EAAcS,CAAC,CAAC,EAAE,GAAkCH,EAAOC,IAAI,CAAC,QAAQ,CAACC,QAAQC,CAAC,EAAER,EAAMQ,CAAC,EAAEP,SAASO,CAAC,EAAEP,EAASO,CAAC,EAAEN,YAAYM,CAAC,EAAEN,EAAYM,CAAC,CAAC,EAAE,GAA4BH,EAAOC,IAAI,CAAC,yBAAyB,CAACC,QAAQC,CAAC,EAAEL,EAAqBK,CAAC,CAAC,EAAE,GAA6BH,EAAOC,IAAI,CAAC,0BAA0B,CAACC,QAAQC,CAAC,EAAEJ,EAAsBI,CAAC,CAAC,EAAE,GAOhiB,IAAMC,EAAQ,CACbC,WAAY,aACZC,eAAgB,gBACjB,EAVAN,EAAOO,aAAa,CAYSC,IAOvB,GAPwB,CAC7BC,QAAAA,CAAO,CACPC,SAAAA,CAAQ,CACRC,UAAAA,CAAS,CACTC,MAAAA,CAAK,CACLC,YAAAA,EAAc,AAAAD,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOE,MAAM,AAANA,IAAW,EAAIV,EAAME,cAAc,CAAGF,EAAMC,UAAU,CAC3EU,SAAAA,CAAAA,CACA,CAAAP,EACM,CAACQ,EAAMC,EAAQ,CAAGrB,EAASiB,GAE3B,CAACK,EAAeC,EAAiB,CAAGvB,EAAS,CAAC,GAE9CwB,EAAa3B,EAAmB,IAAMwB,EAAQb,EAAME,cAAc,GAClEe,EAAW5B,EAAmB,IAAMwB,EAAQb,EAAMC,UAAU,GAE5DiB,EAAmB5B,EAAc,0BAEjC6B,EAAgBX,EAAMY,MAAM,CAACC,IAAA,GAAC,CAAEC,YAAAA,CAAAA,CAAa,CAAAD,EAAA,MAAK,CAACC,CAAW,GAE9DC,EAAwB9B,EAAa+B,IAC1CT,EAAkBD,GACjB,AAAIA,CAAa,CAACU,EAAKC,GAAG,CAAC,EAC1B,OAAOX,CAAa,CAACU,EAAKC,GAAG,CAAC,CAC9BrC,EAAA,CAAA,EAAY0B,IAEb1B,EAAAA,EAAA,CAAA,EAAY0B,GAAa,CAAA,EAAA,CAAE,CAACU,EAAKC,GAAG,CAAA,CAAGD,CAAI,GAE7C,EAAG,EAAE,EAECE,EAAmBrC,EAAmB,KAC3C,GAAIsC,AAAwD,IAAxDA,OAAOC,MAAM,CAACd,GAAeM,MAAM,CAACS,SAASnB,MAAM,CACtD,OAAOK,EAAiBY,OAAOG,WAAW,CAACX,EAAcY,GAAG,CAAEP,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,IAExFT,EAAiB,CAAC,EACnB,UAEA,AAAIH,IAASZ,EAAME,cAAc,EAAKgB,EAcrC3B,EAAAyC,aAAA,CAACtC,EAAoB,CACpBa,UAAWS,EACXX,QAASA,EACTC,SAAUA,EACVE,MAAOA,EACPyB,OAAQ,CAAC,EACTnB,cAAeA,EACfY,iBAAkBA,EAElBH,sBAAuBA,EACvBW,oBAAqBf,EAAcT,MAAAA,AAAO,GAtB1CnB,EAAAyC,aAAA,CAACrC,EAAqB,CACrBY,UAAWA,EACXF,QAASA,EACTC,SAAU,AAAAE,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOE,MAAM,AAANA,EAAS,EAAIO,EAAWX,EACzC6B,aAAcrB,EACdN,MAAOA,EACPG,SAAUA,CAAS,EAmBvB"}