)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/TeamsChannels.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useMutableCallback, useLocalStorage, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, usePermission } from '@rocket.chat/ui-contexts';\nimport type { FC, SyntheticEvent } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannel';\nimport { useRoom } from '../../../room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\nimport RoomInfo from '../../../room/contextualBar/Info';\nimport AddExistingModal from './AddExistingModal';\nimport BaseTeamsChannels from './BaseTeamsChannels';\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\n\nconst useReactModal = (Component: FC<any>, teamId: string, reload: () => void) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e: SyntheticEvent) => {\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t\treload();\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} teamId={teamId} />);\n\t});\n};\n\nconst TeamsChannels = () => {\n\tconst room = useRoom();\n\tconst { teamId } = room;\n\n\tif (!teamId) {\n\t\tthrow new Error('Invalid teamId');\n\t}\n\n\tconst [state, setState] = useState<{ tab?: string; rid?: string }>({});\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst [type, setType] = useLocalStorage<'all' | 'autoJoin'>('channels-list-type', 'all');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\n\t\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst canAddExistingTeam = usePermission('add-team-channel', room._id);\n\tconst addExisting = useReactModal(AddExistingModal, teamId, reload);\n\tconst createNew = useReactModal(CreateChannelWithData, teamId, reload);\n\n\tconst goToRoom = useCallback((room) => roomCoordinator.openRouteLink(room.t, room), []);\n\tconst handleBack = useCallback(() => setState({}), [setState]);\n\tconst viewRoom = useMutableCallback((room: IRoom) => {\n\t\tgoToRoom(room);\n\t});\n\n\tif (state?.tab === 'RoomInfo' && state?.rid) {\n\t\treturn <RoomInfo onClickBack={handleBack} onEnterRoom={goToRoom} resetState={() => setState({})} />;\n\t}\n\n\treturn (\n\t\t<BaseTeamsChannels\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tchannels={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={closeTab}\n\t\t\tonClickAddExisting={canAddExistingTeam && addExisting}\n\t\t\tonClickCreateNew={canAddExistingTeam && createNew}\n\t\t\tonClickView={viewRoom}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default TeamsChannels;\n",null],"names":["useMutableCallback","useLocalStorage","useDebouncedValue","useSetModal","usePermission","React","useCallback","useMemo","useState","useRecordList","AsyncStatePhase","roomCoordinator","CreateChannelWithData","useRoom","useRoomToolbox","RoomInfo","AddExistingModal","BaseTeamsChannels","useTeamsChannelList","module","link","v","default","useReactModal","Component","teamId","reload","setModal","e","preventDefault","handleClose","createElement","onClose","exportDefault","room","Error","state","setState","closeTab","type","setType","text","setText","debouncedText","teamsChannelList","loadMoreItems","phase","items","itemCount","total","handleTextChange","event","currentTarget","value","canAddExistingTeam","_id","addExisting","createNew","goToRoom","openRouteLink","t","handleBack","viewRoom","tab","rid","onClickBack","onEnterRoom","resetState","loading","LOADING","channels","onClickClose","onClickAddExisting","onClickCreateNew","onClickView"],"mappings":"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"}