function module(e,t,l){let r,i,n,o,a,c,u,s,m,d,k,E,f,g,h,p,j,v,P,y,x,b,w,C,S,T,I,L,R,D,_,B,O,A;l.link("@babel/runtime/helpers/extends",{default(e){r=e}},0),l.link("@rocket.chat/fuselage",{TextInput(e){i=e},Icon(e){n=e},Button(e){o=e},Divider(e){a=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMediaQuery(e){c=e},useOutsideClick(e){u=e}},1),l.link("@rocket.chat/ui-client",{EmojiPickerCategoryHeader(e){s=e},EmojiPickerContainer(e){m=e},EmojiPickerFooter(e){d=e},EmojiPickerPreviewArea(e){k=e},EmojiPickerHeader(e){E=e},EmojiPickerListArea(e){f=e},EmojiPickerPreview(e){g=e}},2),l.link("@rocket.chat/ui-contexts",{useTranslation(e){h=e},usePermission(e){p=e},useRoute(e){j=e}},3),l.link("react",{default(e){v=e},useLayoutEffect(e){P=e},useState(e){y=e},useEffect(e){x=e},useRef(e){b=e}},4),l.link("../../../../app/emoji/client",{emoji(e){w=e},getCategoriesList(e){C=e},getEmojisBySearchTerm(e){S=e}},5),l.link("../../../contexts/EmojiPickerContext",{usePreviewEmoji(e){T=e},useEmojiPickerData(e){I=e}},6),l.link("../../room/hooks/useIsVisible",{useIsVisible(e){L=e}},7),l.link("./CategoriesResult",{default(e){R=e}},8),l.link("./EmojiPickerCategoryItem",{default(e){D=e}},9),l.link("./EmojiPickerDropDown",{default(e){_=e}},10),l.link("./SearchingResult",{default(e){B=e}},11),l.link("./ToneSelector",{default(e){O=e}},12),l.link("./ToneSelector/ToneSelectorWrapper",{default(e){A=e}},13),l.exportDefault(e=>{let{reference:t,onClose:l,onPickEmoji:z}=e,F=h(),H=b(t),M=b([]),V=b(null),G=b(null),J=b(null),K=L(V),Q=C(),W=p("manage-emoji"),X=j("emoji-custom"),[q,N]=y(!1),[U,Y]=y(""),[Z,$]=y([]),{emojiToPreview:ee,handleRemovePreview:et}=T(),{recentEmojis:el,setCurrentCategory:er,addRecentEmoji:ei,setRecentEmojis:en,actualTone:eo,currentCategory:ea,getEmojiListsByCategory:ec,customItemsLimit:eu,setActualTone:es,setCustomItemsLimit:em}=I();x(()=>()=>et(),[et]);let ed=c("(width < 340px)");u([J],l),P(()=>{if(!t)return;let e=new ResizeObserver(()=>{let e=t.getBoundingClientRect();if(0===e.width&&0===e.height){H.current=null;return}H.current=t});return e.observe(t),()=>{e.disconnect()}},[t]),x(()=>{V.current&&K&&V.current.focus()},[K]);let ek=e=>{var t;e.stopPropagation();let r=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.emoji;if(!r)return;let i="";for(let e in w.packages)w.packages.hasOwnProperty(e)&&eo>0&&w.packages[e].toneList.hasOwnProperty(r)&&(i="_tone".concat(eo));Y(""),z(r+i),ei(r+i),l()};x(()=>{if(0===el.length&&"recent"===ea){let e=ec().filter(e=>{let{key:t}=e;return"rocket"===t});eE(e.length>0?0:1)}},[eo,el,ec,ea,en]);let eE=e=>{var t;N(!1),null===(t=G.current)||void 0===t||t.scrollToIndex({index:e})};return v.createElement(_,{reference:H,ref:J},v.createElement(m,{role:"dialog","aria-label":F("Emoji_picker"),onKeyDown:e=>{"Escape"===e.key&&l()}},v.createElement(E,null,v.createElement(i,{autoFocus:!0,ref:V,value:U,onChange:e=>{Y(e.target.value),er(""),N(""!==e.target.value);let t=S(e.target.value,eo,el,en);0===t.filter(e=>e.image).length&&er("no-results"),$(t)},addon:v.createElement(n,{name:"magnifier",size:"x20"}),placeholder:F("Search"),"aria-label":F("Search")})),v.createElement(s,r({role:"tablist"},ed&&{overflowX:"scroll",h:"x64"}),Q.map((e,t)=>v.createElement(D,{key:e.key,index:t,category:e,active:e.key===ea,handleGoToCategory:eE}))),v.createElement(a,{mb:12}),v.createElement(f,{role:"tabpanel"},q&&v.createElement(B,{searchResults:Z,handleSelectEmoji:ek}),!q&&v.createElement(R,{ref:G,emojiListByCategory:ec(),categoriesPosition:M,customItemsLimit:eu,handleLoadMore:()=>{em(eu+90)},handleSelectEmoji:ek,handleScroll:e=>{var t;let l=null==e?void 0:e.scrollTop,r=null===(t=M.current)||void 0===t?void 0:t.filter(e=>e.top<=l).pop();if(!r)return;let{el:i}=r,n=i.id.replace("emoji-list-category-","");er(n)}})),v.createElement(k,null,v.createElement("div",null,ee&&v.createElement(g,{emoji:ee.emoji,name:ee.name}),W&&null===ee&&v.createElement(o,{small:!0,onClick:()=>{X.push(),l()}},F("Add_emoji"))),v.createElement(A,{caption:F("Skin_tone")},v.createElement(O,{tone:eo,setTone:es}))),v.createElement(d,null,F("Powered_by_JoyPixels"))))})}
//# sourceMappingURL=/dynamic/client/views/composer/EmojiPicker/9f87447901b24c37b37731e29b1a2fcafd58da94.map
