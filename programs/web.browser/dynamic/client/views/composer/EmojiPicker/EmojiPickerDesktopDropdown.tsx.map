)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/views/composer/EmojiPicker/EmojiPickerDesktopDropdown.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Box, Tile } from '@rocket.chat/fuselage';\nimport { useMergedRefs, usePosition } from '@rocket.chat/fuselage-hooks';\nimport type { ReactNode, Ref, RefObject } from 'react';\nimport React, { useMemo, useRef, forwardRef } from 'react';\n\nconst getDropdownContainer = (descendant: HTMLElement | null) => {\n\tfor (let element = descendant ?? document.body; element !== document.body; element = element.parentElement ?? document.body) {\n\t\tif (\n\t\t\tgetComputedStyle(element).transform !== 'none' ||\n\t\t\tgetComputedStyle(element).position === 'fixed' ||\n\t\t\tgetComputedStyle(element).willChange === 'transform'\n\t\t) {\n\t\t\treturn element;\n\t\t}\n\t}\n\n\treturn document.body;\n};\n\nconst useDropdownPosition = (reference: RefObject<HTMLElement>, target: RefObject<HTMLElement>) => {\n\tconst innerContainer = getDropdownContainer(reference.current);\n\tconst boundingRect = innerContainer.getBoundingClientRect();\n\n\tconst viewHeight = document.body.getBoundingClientRect().height;\n\tconst refTop = reference.current?.getBoundingClientRect().top ?? 0;\n\tconst targetHeight = target.current?.getBoundingClientRect().height || 0;\n\n\tconst placement = useMemo(() => {\n\t\tif (boundingRect.top === 0) {\n\t\t\treturn 'top-start';\n\t\t}\n\t\tif (refTop >= viewHeight / 2) {\n\t\t\treturn 'top-end';\n\t\t}\n\t\treturn 'bottom-end';\n\t}, [targetHeight, refTop]);\n\n\tconst maxHeight = useMemo(() => (placement === 'bottom-end' ? '482px' : `${refTop - 12}px`), [placement, refTop]);\n\n\tconst { style } = usePosition(reference, target, {\n\t\tplacement,\n\t\tcontainer: innerContainer,\n\t});\n\n\treturn useMemo(() => {\n\t\treturn { ...style, maxHeight };\n\t}, [style]);\n};\n\ntype EmojiPickerDesktopDropdownProps = {\n\tchildren: ReactNode;\n\treference: RefObject<HTMLElement>;\n};\n\nconst EmojiPickerDesktopDropdown = forwardRef(function ToolboxDropdownDesktop(\n\t{ reference, children }: EmojiPickerDesktopDropdownProps,\n\tref: Ref<HTMLElement>,\n) {\n\tconst targetRef = useRef<HTMLElement>(null);\n\tconst mergedRef = useMergedRefs(ref, targetRef);\n\n\tconst style = useDropdownPosition(reference, targetRef);\n\n\treturn (\n\t\t<Tile style={style} ref={mergedRef} elevation='2' pi='0' pb='0' display='flex' flexDirection='column' overflow='auto'>\n\t\t\t<Box flexShrink={1} pb={12}>\n\t\t\t\t{children}\n\t\t\t</Box>\n\t\t</Tile>\n\t);\n});\n\nexport default EmojiPickerDesktopDropdown;\n",null],"names":["_objectSpread","Box","Tile","useMergedRefs","usePosition","React","useMemo","useRef","forwardRef","module","link","default","getDropdownContainer","descendant","element","document","body","_element$parentElemen","parentElement","getComputedStyle","transform","position","willChange","useDropdownPosition","reference","target","_reference$current$ge","_reference$current","_target$current","innerContainer","current","boundingRect","getBoundingClientRect","viewHeight","height","refTop","top","targetHeight","placement","maxHeight","concat","style","container","EmojiPickerDesktopDropdown","ToolboxDropdownDesktop","_ref","ref","children","targetRef","mergedRef","createElement","elevation","pi","pb","display","flexDirection","overflow","flexShrink","exportDefault"],"mappings":"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"}