function module(e,u,t){t.export({QueueAggregator:()=>r});class r{constructor(){this.sessionQueueCallServingHistory=void 0,this.currentlyServing=void 0,this.currentQueueMembershipStatus=void 0,this.extension=void 0,this.sessionQueueCallServingHistory=[],this.currentQueueMembershipStatus={}}updateQueueInfo(e,u){var t;null!==(t=this.currentQueueMembershipStatus)&&void 0!==t&&t[e]&&(this.currentQueueMembershipStatus[e].callsInQueue=u)}setMembership(e){this.extension=e.extension,e.queues.forEach(e=>{let u={queueName:e.name,callsInQueue:0};this.currentQueueMembershipStatus[e.name]=u})}queueJoined(e){this.updateQueueInfo(e.queuename,Number(e.queuedcalls))}callPickedup(e){this.updateQueueInfo(e.queuename,Number(e.queuedcalls))}memberAdded(e){let u={queueName:e.queuename,callsInQueue:Number(e.queuedcalls)};this.currentQueueMembershipStatus[e.queuename]=u}memberRemoved(e){var u;null!==(u=this.currentQueueMembershipStatus)&&void 0!==u&&u[e.queuename]&&delete this.currentQueueMembershipStatus[e.queuename]}queueAbandoned(e){this.updateQueueInfo(e.queuename,Number(e.queuedcallafterabandon))}getCallWaitingCount(){return Object.entries(this.currentQueueMembershipStatus).reduce((e,u)=>{let[t,r]=u;return e+r.callsInQueue},0)}getCurrentQueueName(){var e;return null!==(e=this.currentlyServing)&&void 0!==e&&e.queueInfo?this.currentlyServing.queueInfo.queueName:""}callRinging(e){var u;if(!(null!==(u=this.currentQueueMembershipStatus)&&void 0!==u&&u[e.queuename]))return;let t={queueInfo:this.currentQueueMembershipStatus[e.queuename],callerId:{callerId:e.callerid.id,callerName:e.callerid.name},callStarted:void 0,callEnded:void 0,agentExtension:this.extension};this.currentlyServing=t}callStarted(){this.currentlyServing&&(this.currentlyServing.callStarted=new Date)}callEnded(){this.currentlyServing&&(this.currentlyServing.callEnded=new Date,this.sessionQueueCallServingHistory.unshift(this.currentlyServing))}}}
//# sourceMappingURL=/dynamic/client/lib/voip/6e3f2b1a96aa9c47529c94e177b63e7020bc4d02.map
