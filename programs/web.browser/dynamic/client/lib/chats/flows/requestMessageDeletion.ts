function module(e,t,i){let s,a,o,n;i.export({requestMessageDeletion:()=>r}),i.link("../../../../app/utils/lib/i18n",{t(e){s=e}},0),i.link("../../../components/GenericModal",{default(e){a=e}},1),i.link("../../imperativeModal",{imperativeModal(e){o=e}},2),i.link("../../toast",{dispatchToastMessage(e){n=e}},3);let r=async(e,t)=>{if(!await e.data.canDeleteMessage(t)){n({type:"error",message:s("Message_deleting_blocked")});return}let i=t.drid?await e.data.getDiscussionByID(t.drid):void 0;await new Promise((r,l)=>{let d=async()=>{try{var i,a;if(!await e.data.canDeleteMessage(t)){n({type:"error",message:s("Message_deleting_blocked")});return}await e.data.deleteMessage(t._id),o.close(),(null===(i=e.currentEditing)||void 0===i?void 0:i.mid)===t._id&&e.currentEditing.stop(),null===(a=e.composer)||void 0===a||a.focus(),n({type:"success",message:s("Your_entry_has_been_deleted")}),r()}catch(e){n({type:"error",message:e}),l(e)}},c=async()=>{var i,s;o.close(),(null===(i=e.currentEditing)||void 0===i?void 0:i.mid)===t._id&&e.currentEditing.stop(),null===(s=e.composer)||void 0===s||s.focus(),r()};o.open({component:a,props:{title:s("Are_you_sure"),children:i?s("The_message_is_a_discussion_you_will_not_be_able_to_recover"):s("You_will_not_be_able_to_recover"),variant:"danger",confirmText:s("Yes_delete_it"),onConfirm:d,onClose:c,onCancel:c}})})}}
//# sourceMappingURL=/dynamic/client/lib/chats/flows/2982ab91b37fec3001c3e1b759c5dae5cd57c7f9.map
