)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/chats/flows/processMessageEditing.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\nimport { dispatchToastMessage } from '../../toast';\nimport type { ChatAPI } from '../ChatAPI';\n\nexport const processMessageEditing = async (\n\tchat: ChatAPI,\n\tmessage: Pick<IMessage, '_id' | 't'> & Partial<Omit<IMessage, '_id' | 't'>>,\n\tpreviewUrls?: string[],\n): Promise<boolean> => {\n\tif (!chat.currentEditing) {\n\t\treturn false;\n\t}\n\n\tif (MessageTypes.isSystemMessage(message)) {\n\t\treturn false;\n\t}\n\n\tif (!message.msg && !message.attachments?.length) {\n\t\treturn false;\n\t}\n\n\ttry {\n\t\tawait chat.data.updateMessage({ ...message, _id: chat.currentEditing.mid }, previewUrls);\n\t} catch (error) {\n\t\tdispatchToastMessage({ type: 'error', message: error });\n\t}\n\n\tchat.currentEditing.stop();\n\n\treturn true;\n};\n",null],"names":["_objectSpread","MessageTypes","dispatchToastMessage","module","link","default","export","processMessageEditing","chat","message","previewUrls","_message$attachments","currentEditing","isSystemMessage","msg","attachments","length","data","updateMessage","_id","mid","error","type","stop"],"mappings":"2BAEAA,EAA+DC,EAAAC,EAAtDC,EAAcC,IAAM,CAAA,uCAAkC,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAA/DG,EAAOG,MAAE,CAAA,CAAAC,sBAAoB,IAAAA,CAAiC,GAACJ,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAF,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,cAAAA,CAAAD,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAIxD,IAAMK,EAAwB,MACpCC,EACAC,EACAC,KACqB,IAAAC,EACrB,GAAI,CAACH,EAAKI,cAAc,EAIpBX,EAAaY,eAAe,CAACJ,IAI7B,CAACA,EAAQK,GAAG,EAAI,CAAA,CAAA,AAAoB,OAApBH,CAAAA,EAACF,EAAQM,WAAW,AAAXA,GAAWJ,AAAA,KAAA,IAAAA,GAAnBA,EAAqBK,MAAM,AAANA,EAPzC,MAAO,CAAA,EAWR,GAAI,CACH,MAAMR,EAAKS,IAAI,CAACC,aAAa,CAAAlB,EAAAA,EAAA,CAAA,EAAMS,GAAO,CAAA,EAAA,CAAEU,IAAKX,EAAKI,cAAc,CAACQ,GAAAA,AAAG,GAAIV,GAC3E,MAAOW,EAAO,CACfnB,EAAqB,CAAEoB,KAAM,QAASb,QAASY,CAAK,GAKrD,OAFAb,EAAKI,cAAc,CAACW,IAAI,GAEjB,CAAA,CACR"}