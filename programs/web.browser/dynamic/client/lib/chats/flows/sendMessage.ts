function module(e,a,t){let i,s,n,r,o,d,l,c,g;t.link("@babel/runtime/helpers/objectSpread2",{default(e){i=e}},0),t.export({sendMessage:()=>p}),t.link("../../../../app/ui/client/lib/KonchatNotification",{KonchatNotification(e){s=e}},0),t.link("../../../../app/utils/client/lib/SDKClient",{sdk(e){n=e}},1),t.link("../../../../app/utils/lib/i18n",{t(e){r=e}},2),t.link("../../toast",{dispatchToastMessage(e){o=e}},3),t.link("./processMessageEditing",{processMessageEditing(e){d=e}},4),t.link("./processSetReaction",{processSetReaction(e){l=e}},5),t.link("./processSlashCommand",{processSlashCommand(e){c=e}},6),t.link("./processTooLongMessage",{processTooLongMessage(e){g=e}},7);let u=async(e,a,t)=>{s.removeRoomNotification(a.rid),await l(e,a)||await g(e,a)||await d(e,a,t)||await c(e,a)||await n.call("sendMessage",a,t)},p=async(e,a)=>{var t,s,n,d;let{text:l,tshow:c,previewUrls:g}=a;if(!await e.data.isSubscribedToRoom())try{await e.data.joinRoom()}catch(e){return o({type:"error",message:e}),!1}if(e.readStateManager.clearUnreadMark(),await e.readStateManager.debouncedMarkAsRead(),!(l=l.trim())&&!e.currentEditing)return!1;if(l){let a=await e.data.composeMessage(l,{sendToChannel:c,quotedMessages:null!==(t=null===(s=e.composer)||void 0===s?void 0:s.quotedMessages.get())&&void 0!==t?t:[],originalMessage:e.currentEditing?await e.data.findMessageByID(e.currentEditing.mid):null});try{await u(e,a,g),null===(n=e.composer)||void 0===n||n.dismissAllQuotedMessages()}catch(e){o({type:"error",message:e})}return!0}if(e.currentEditing){let a=await e.data.findMessageByID(e.currentEditing.mid);if(!a)return o({type:"warning",message:r("Message_not_found")}),!1;try{if(await e.flows.processMessageEditing(i(i({},a),{},{msg:""}),g))return e.currentEditing.stop(),!1;await (null===(d=e.currentEditing)||void 0===d?void 0:d.reset()),await e.flows.requestMessageDeletion(a)}catch(e){o({type:"error",message:e})}}return!1}}
//# sourceMappingURL=/dynamic/client/lib/chats/flows/b1832e497787a44e0087971e41789d93ccaf36d0.map
