)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/actionLinks.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\n\nimport { fireGlobalEvent } from './utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from './utils/isLayoutEmbedded';\n\n// Action Links namespace creation.\nexport const actionLinks = {\n\tactions: new Map<string, (message: IMessage, params: string) => void>(),\n\tregister(name: string, fn: (message: IMessage, params: string) => void): void {\n\t\tactionLinks.actions.set(name, fn);\n\t},\n\trun(actionMethodId: string, message: IMessage): void {\n\t\tconst embedded = isLayoutEmbedded();\n\n\t\tif (embedded) {\n\t\t\tfireGlobalEvent('click-action-link', {\n\t\t\t\tactionlink: actionMethodId,\n\t\t\t\tvalue: message._id,\n\t\t\t\tmessage,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionLink = message.actionLinks?.find((action) => action.method_id === actionMethodId);\n\n\t\tif (!actionLink) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\n\t\t}\n\n\t\tif (!actionLinks.actions.has(actionLink.method_id)) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\n\t\t}\n\n\t\tconst fn = actionLinks.actions.get(actionLink.method_id);\n\t\tfn?.(message, actionLink.params);\n\t},\n};\n",null],"names":["Meteor","fireGlobalEvent","isLayoutEmbedded","module","export","actionLinks","actions","Map","register","name","fn","set","run","actionMethodId","message","_message$actionLinks","embedded","actionlink","value","_id","actionLink","find","action","method_id","has","Error","get","params"],"mappings":"2BACuCA,EAAAC,EAAAC,EAAvCC,EAAOC,MAAE,CAAA,CAAMC,YAAQ,IAAAA,CAAgB,GAAAF,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAH,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAF,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAD,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMhC,IAAMG,EAAc,CAC1BC,QAAS,IAAIC,IACbC,SAASC,CAAY,CAAEC,CAA+C,EACrEL,EAAYC,OAAO,CAACK,GAAG,CAACF,EAAMC,EAC/B,EACAE,IAAIC,CAAsB,CAAEC,CAAiB,EAAA,IAAAC,EAC5C,IAAMC,EAAWd,IAEjB,GAAIc,EAAU,CACbf,EAAgB,oBAAqB,CACpCgB,WAAYJ,EACZK,MAAOJ,EAAQK,GAAG,CAClBL,QAAAA,IAED,OAGD,IAAMM,EAAU,AAAsB,OAAtBL,CAAAA,EAAGD,EAAQT,WAAW,AAAXA,GAAWU,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBM,IAAI,CAAEC,GAAWA,EAAOC,SAAS,GAAKV,GAE9E,GAAI,CAACO,GAID,CAACf,EAAYC,OAAO,CAACkB,GAAG,CAACJ,EAAWG,SAAS,EAHhD,MAAM,IAAIvB,EAAOyB,KAAK,CAAC,2BAA4B,uBAOpD,IAAMf,EAAKL,EAAYC,OAAO,CAACoB,GAAG,CAACN,EAAWG,SAAS,CACvDb,OAAAA,GAAAA,EAAKI,EAASM,EAAWO,MAAM,CAChC"}