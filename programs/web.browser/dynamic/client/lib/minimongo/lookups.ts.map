)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/minimongo/lookups.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isEmptyArray } from './comparisons';\n\nconst isNullDocument = (doc: unknown): doc is undefined | null => doc === undefined || doc === null;\n\nconst isRecordDocument = (doc: unknown): doc is Record<string, unknown> =>\n\tdoc !== undefined && doc !== null && (typeof doc === 'object' || typeof doc === 'function');\n\nconst isIndexedByNumber = <T>(value: unknown, isIndexedByNumber: boolean): value is T[] => Array.isArray(value) || isIndexedByNumber;\n\nexport const createLookupFunction = <T>(key: string): ((doc: T) => unknown[]) => {\n\tconst [first, rest] = key.split(/\\.(.+)/);\n\n\tif (!rest) {\n\t\treturn <T>(doc: T): unknown[] => {\n\t\t\tif (isNullDocument(doc) || !isRecordDocument(doc)) {\n\t\t\t\treturn [undefined];\n\t\t\t}\n\n\t\t\treturn [doc[first]];\n\t\t};\n\t}\n\n\tconst lookupRest = createLookupFunction(rest);\n\tconst nextIsNumeric = /^\\d+(\\.|$)/.test(rest);\n\n\treturn <T>(doc: T): unknown[] => {\n\t\tif (isNullDocument(doc) || !isRecordDocument(doc)) {\n\t\t\treturn [undefined];\n\t\t}\n\n\t\tconst firstLevel = doc[first];\n\n\t\tif (isEmptyArray(firstLevel)) {\n\t\t\treturn [undefined];\n\t\t}\n\n\t\tconst docs = isIndexedByNumber(firstLevel, nextIsNumeric) ? firstLevel : [firstLevel as T];\n\t\treturn Array.prototype.concat.apply([], docs.map(lookupRest));\n\t};\n};\n",null],"names":["isEmptyArray","module","export","createLookupFunction","isNullDocument","doc","isRecordDocument","isIndexedByNumber","value","Array","isArray","key","first","rest","split","undefined","lookupRest","nextIsNumeric","test","firstLevel","docs","prototype","concat","apply","map"],"mappings":"2BAA6CA,EAA7CC,EAAOC,MAAE,CAAA,CAAAC,qBAAoB,IAAAA,CAAgB,GAAAF,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAD,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAE7C,IAAMI,EAAkBC,GAA0CA,MAAAA,EAE5DC,EAAoBD,GACzBA,MAAAA,GAAsC,CAAA,AAAe,UAAf,OAAOA,GAAoB,AAAe,YAAf,OAAOA,CAAQ,EAE3EE,EAAoB,CAAIC,EAAgBD,IAA6CE,MAAMC,OAAO,CAACF,IAAUD,EAEtGJ,EAA2BQ,IACvC,GAAM,CAACC,EAAOC,EAAK,CAAGF,EAAIG,KAAK,CAAC,UAEhC,GAAI,CAACD,EACJ,OAAWR,GACV,AAAID,EAAeC,IAAQ,CAACC,EAAiBD,GACrC,CAACU,KAAAA,EAAU,CAGZ,CAACV,CAAG,CAACO,EAAM,CAAC,CAIrB,IAAMI,EAAab,EAAqBU,GAClCI,EAAgB,aAAaC,IAAI,CAACL,GAExC,OAAWR,IACV,GAAID,EAAeC,IAAQ,CAACC,EAAiBD,GAC5C,MAAO,CAACU,KAAAA,EAAU,CAGnB,IAAMI,EAAad,CAAG,CAACO,EAAM,CAE7B,GAAIZ,EAAamB,GAChB,MAAO,CAACJ,KAAAA,EAAU,CAGnB,IAAMK,EAAOb,EAAkBY,EAAYF,GAAiBE,EAAa,CAACA,EAAgB,CAC1F,OAAOV,MAAMY,SAAS,CAACC,MAAM,CAACC,KAAK,CAAC,EAAE,CAAEH,EAAKI,GAAG,CAACR,GAClD,CACD"}