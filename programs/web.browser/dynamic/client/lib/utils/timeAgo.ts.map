)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/lib/utils/timeAgo.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport type { Moment, MomentInput } from 'moment';\nimport moment from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { t } from '../../../app/utils/lib/i18n';\n\nconst dayFormat = ['h:mm A', 'H:mm'];\n\nexport const timeAgo = async (date: MomentInput): Promise<string> => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false) as number | boolean);\n\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\n\tconst sameDay = (typeof clockMode === 'number' ? dayFormat[clockMode - 1] : undefined) || messageTimeFormat;\n\n\treturn moment(date).calendar(null, {\n\t\tlastDay: `[${t('yesterday')}]`,\n\t\tsameDay,\n\t\tlastWeek: 'dddd',\n\t\tsameElse(this: Moment, now) {\n\t\t\tconst diff = Math.ceil(this.diff(now, 'years', true));\n\t\t\treturn diff < 0 ? 'MMM D YYYY' : 'MMM D';\n\t\t},\n\t});\n};\n",null],"names":["Meteor","Tracker","moment","settings","getUserPreference","t","module","export","timeAgo","default","dayFormat","date","clockMode","nonreactive","userId","messageTimeFormat","get","sameDay","undefined","calendar","lastDay","concat","lastWeek","sameElse","now","diff","Math","ceil"],"mappings":"2BAAuCA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvCC,EAAOC,MAAE,CAAA,CAAMC,QAAQ,IAAAA,CAAA,GAAgBF,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAN,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAL,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,SAAAA,CAAAG,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAH,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAF,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAD,EAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASvC,IAAMK,EAAY,CAAC,SAAU,OAAO,CAEvBF,EAAU,MAAOG,IAC7B,IAAMC,EAAYX,EAAQY,WAAW,CAAC,IAAMT,EAAkBJ,EAAOc,MAAM,GAAI,YAAa,CAAA,IACtFC,EAAoBd,EAAQY,WAAW,CAAC,IAAMV,EAASa,GAAG,CAAC,uBAC3DC,EAAU,AAAC,CAAA,AAAqB,UAArB,OAAOL,EAAyBF,CAAS,CAACE,EAAY,EAAE,CAAGM,KAAAA,CAAAA,GAAcH,EAE1F,OAAOb,EAAOS,GAAMQ,QAAQ,CAAC,KAAM,CAClCC,QAAO,IAAAC,MAAA,CAAMhB,EAAE,aAAY,KAC3BY,QAAAA,EACAK,SAAU,OACVC,SAAuBC,CAAG,EACzB,IAAMC,EAAOC,KAAKC,IAAI,CAAC,IAAI,CAACF,IAAI,CAACD,EAAK,QAAS,CAAA,IAC/C,OAAOC,EAAO,EAAI,aAAe,OAClC,GAEF"}