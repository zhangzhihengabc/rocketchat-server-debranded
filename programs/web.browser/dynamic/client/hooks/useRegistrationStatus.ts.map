)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useRegistrationStatus.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { OperationResult } from '@rocket.chat/rest-typings';\nimport { useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\n\ntype useRegistrationStatusReturnType = {\n\tisRegistered?: boolean;\n} & UseQueryResult<OperationResult<'GET', '/v1/cloud.registrationStatus'>>;\n\nexport const useRegistrationStatus = (): useRegistrationStatusReturnType => {\n\tconst getRegistrationStatus = useEndpoint('GET', '/v1/cloud.registrationStatus');\n\tconst canViewregistrationStatus = usePermission('manage-cloud');\n\n\tconst queryResult = useQuery(\n\t\t['getRegistrationStatus'],\n\t\t() => {\n\t\t\tif (!canViewregistrationStatus) {\n\t\t\t\tthrow new Error('unauthorized api call');\n\t\t\t}\n\t\t\treturn getRegistrationStatus();\n\t\t},\n\t\t{\n\t\t\tkeepPreviousData: true,\n\t\t\tstaleTime: Infinity,\n\t\t},\n\t);\n\n\treturn { isRegistered: !queryResult.isLoading && queryResult.data?.registrationStatus?.workspaceRegistered, ...queryResult };\n};\n",null],"names":["_objectSpread","useEndpoint","usePermission","useQuery","module","link","default","export","useRegistrationStatus","_queryResult$data","_queryResult$data$reg","getRegistrationStatus","canViewregistrationStatus","queryResult","Error","keepPreviousData","staleTime","Infinity","isRegistered","isLoading","data","registrationStatus","workspaceRegistered"],"mappings":"2BACAA,EAAqEC,EAACC,EAAAC,EAA7DC,EAAaC,IAAA,CAAA,uCAA+C,CAACC,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAtEI,EAAOG,MAAE,CAAA,CAAAC,sBAA4B,IAAAA,CAAM,GAA2BJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAH,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAD,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAQ/D,IAAMK,EAAwB,KAAsC,IAAAC,EAAAC,EAC1E,IAAMC,EAAwBV,EAAY,MAAO,gCAC3CW,EAA4BV,EAAc,gBAE1CW,EAAcV,EACnB,CAAC,wBAAwB,CACzB,KACC,GAAI,CAACS,EACJ,MAAM,AAAIE,MAAM,yBAEjB,OAAOH,GACR,EACA,CACCI,iBAAkB,CAAA,EAClBC,UAAWC,MAIb,OAAAjB,EAAA,CAASkB,aAAc,CAACL,EAAYM,SAAS,EAAA,CAAA,AAAoB,OAApBV,CAAAA,EAAII,EAAYO,IAAI,AAAJA,GAAIX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAoB,OAApBC,CAAAA,EAAhBD,EAAkBY,kBAAkB,AAAlBA,GAAkBX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCY,mBAAmB,AAAnBA,CAAmB,EAAKT,EAChH"}