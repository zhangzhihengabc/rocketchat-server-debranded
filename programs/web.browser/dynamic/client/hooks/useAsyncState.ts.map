)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useAsyncState.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\n\ntype AsyncStateObject<T> = AsyncState<T> & {\n\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\n\treject: (error: Error) => void;\n\treset: () => void;\n\tupdate: () => void;\n};\n\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\n\tconst [state, setState] = useSafely(\n\t\tuseState<AsyncState<T>>(() => {\n\t\t\tif (typeof initialValue === 'undefined') {\n\t\t\t\treturn asyncState.loading<T>();\n\t\t\t}\n\n\t\t\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\n\t\t}),\n\t);\n\n\tconst resolve = useCallback(\n\t\t(value: T | ((prev: T | undefined) => T)) => {\n\t\t\tsetState((state) => {\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\n\t\t\t\t}\n\n\t\t\t\treturn asyncState.resolve(state, value);\n\t\t\t});\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst reject = useCallback(\n\t\t(error: Error) => {\n\t\t\tsetState((state) => asyncState.reject(state, error));\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst update = useCallback(() => {\n\t\tsetState((state) => asyncState.update(state));\n\t}, [setState]);\n\n\tconst reset = useCallback(() => {\n\t\tsetState((state) => asyncState.reload(state));\n\t}, [setState]);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...state,\n\t\t\tresolve,\n\t\t\treject,\n\t\t\treset,\n\t\t\tupdate,\n\t\t}),\n\t\t[state, resolve, reject, reset, update],\n\t);\n};\n\nexport { AsyncStatePhase, AsyncState };\n",null],"names":["_objectSpread","useSafely","useCallback","useMemo","useState","AsyncStatePhase","AsyncState","asyncState","module","link","default","export","useAsyncState","initialValue","state","setState","loading","resolved","resolve","value","reject","error","update","reset","reload"],"mappings":"2BAAAA,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtCC,EAAEC,IAAM,CAAA,uCAA8B,CAAAC,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAxDQ,EAAOG,MAAE,CAAA,CAAAC,cAAiB,IAAAA,EAAAP,gBAA8B,IAAAA,EAAAC,WAAAA,IAAAA,CAAA,GAAAE,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAP,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,QAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,oBAAAA,CAAAH,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAYjD,IAAMK,EAAoBC,IAChC,GAAM,CAACC,EAAOC,EAAS,CAAGd,EACzBG,EAAwB,IACvB,AAAI,AAAwB,KAAA,IAAjBS,EACHN,EAAWS,OAAO,GAGnBT,EAAWU,QAAQ,CAAI,AAAwB,YAAxB,OAAOJ,EAA+BA,IAA6BA,KAI7FK,EAAUhB,EACdiB,IACAJ,EAAUD,GACT,AAAI,AAAiB,YAAjB,OAAOK,EACHZ,EAAWW,OAAO,CAACJ,EAAQK,EAAqCL,EAAMK,KAAK,GAG5EZ,EAAWW,OAAO,CAACJ,EAAOK,GAEnC,EACA,CAACJ,EAAS,EAGLK,EAASlB,EACbmB,IACAN,EAAUD,GAAUP,EAAWa,MAAM,CAACN,EAAOO,GAC9C,EACA,CAACN,EAAS,EAGLO,EAASpB,EAAY,KAC1Ba,EAAUD,GAAUP,EAAWe,MAAM,CAACR,GACvC,EAAG,CAACC,EAAS,EAEPQ,EAAQrB,EAAY,KACzBa,EAAUD,GAAUP,EAAWiB,MAAM,CAACV,GACvC,EAAG,CAACC,EAAS,EAEb,OAAOZ,EACN,IAAAH,EAAAA,EAAA,CAAA,EACIc,GAAK,CAAA,EAAA,CACRI,QAAAA,EACAE,OAAAA,EACAG,MAAAA,EACAD,OAAAA,CAAM,GAEP,CAACR,EAAOI,EAASE,EAAQG,EAAOD,EAAO,CAEzC"}