)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useDecryptedMessage.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport { useState, useEffect } from 'react';\n\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\n\nexport const useDecryptedMessage = (message: IMessage): string => {\n\tconst t = useTranslation();\n\tconst [decryptedMessage, setDecryptedMessage] = useSafely(useState(t('E2E_message_encrypted_placeholder')));\n\n\tuseEffect(() => {\n\t\tif (!isE2EEMessage(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\te2e.decryptMessage(message).then((decryptedMsg) => {\n\t\t\tif (decryptedMsg.msg) {\n\t\t\t\tsetDecryptedMessage(decryptedMsg.msg);\n\t\t\t}\n\t\t});\n\t}, [message, t, setDecryptedMessage]);\n\n\treturn isE2EEMessage(message) ? decryptedMessage : message.msg;\n};\n",null],"names":["isE2EEMessage","useSafely","useTranslation","useState","useEffect","e2e","module","export","useDecryptedMessage","message","t","decryptedMessage","setDecryptedMessage","decryptMessage","then","decryptedMsg","msg"],"mappings":"2BAC0DA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA1DC,EAAOC,MAAE,CAAA,CAAAC,oBAAqB,IAAAA,CAA4B,GAAAF,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAN,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAL,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAJ,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,QAAAA,CAAAH,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAD,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAOnD,IAAMG,EAAuBC,IACnC,IAAMC,EAAIR,IACJ,CAACS,EAAkBC,EAAoB,CAAGX,EAAUE,EAASO,EAAE,uCAcrE,OAZAN,EAAU,KACJJ,EAAcS,IAInBJ,EAAIQ,cAAc,CAACJ,GAASK,IAAI,CAAEC,IAC7BA,EAAaC,GAAG,EACnBJ,EAAoBG,EAAaC,GAAG,CAEtC,EACD,EAAG,CAACP,EAASC,EAAGE,EAAoB,EAE7BZ,EAAcS,GAAWE,EAAmBF,EAAQO,GAAG,AAC/D"}