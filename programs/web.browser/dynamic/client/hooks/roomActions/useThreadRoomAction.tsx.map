)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/roomActions/useThreadRoomAction.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { HeaderToolboxAction, HeaderToolboxActionBadge } from '@rocket.chat/ui-client';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolboxAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolboxActionBadge variant={variant}>{unread}</HeaderToolboxActionBadge>}\n\t\t\t\t</HeaderToolboxAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n",null],"names":["HeaderToolboxAction","useSetting","React","lazy","useMemo","useTranslation","useRoomSubscription","module","export","useThreadRoomAction","HeaderToolboxActionBadge","default","getVariant","tunreadUser","tunreadGroup","Threads","dynamicImport","_subscription$tunread","_subscription$tunread2","_subscription$tunread3","_subscription$tunread4","_subscription$tunread5","_subscription$tunread6","enabled","subscription","tunread","length","unread","variant","t","id","groups","full","title","icon","tabComponent","order","renderToolboxItem","_ref","className","index","toolbox","tab","action","disabled","tooltip","createElement","key","pressed"],"mappings":"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"}