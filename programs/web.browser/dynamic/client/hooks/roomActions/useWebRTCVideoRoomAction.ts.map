)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/roomActions/useWebRTCVideoRoomAction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { isRoomFederated } from '@rocket.chat/core-typings';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { useRoom } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nexport const useWebRTCVideoRoomAction = () => {\n\tconst enabled = useSetting('WebRTC_Enabled', false);\n\tconst room = useRoom();\n\tconst federated = isRoomFederated(room);\n\tconst callProvider = useSetting<string>('Omnichannel_call_provider', 'default-provider');\n\n\tconst allowed = enabled && callProvider === 'WebRTC' && room.servedBy;\n\n\tconst { t } = useTranslation();\n\n\tconst handleClick = useCallback(async () => {\n\t\tif (!room.callStatus || room.callStatus === 'declined' || room.callStatus === 'ended') {\n\t\t\tawait sdk.rest.get('/v1/livechat/webrtc.call', { rid: room._id });\n\t\t}\n\t\twindow.open(`/meet/${room._id}`, room._id);\n\t}, [room._id, room.callStatus]);\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!allowed) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'webRTCVideo',\n\t\t\tgroups: ['live'],\n\t\t\ttitle: 'WebRTC_Call',\n\t\t\ticon: 'phone',\n\t\t\t...(federated && {\n\t\t\t\ttooltip: t('core.Call_unavailable_for_federation'),\n\t\t\t\tdisabled: true,\n\t\t\t}),\n\t\t\taction: () => void handleClick(),\n\t\t\tfull: true,\n\t\t\torder: 4,\n\t\t};\n\t}, [allowed, federated, handleClick, t]);\n};\n",null],"names":["_objectSpread","isRoomFederated","useSetting","useCallback","useMemo","useTranslation","sdk","useRoom","module","link","default","export","useWebRTCVideoRoomAction","enabled","room","federated","callProvider","allowed","servedBy","t","handleClick","callStatus","rest","get","rid","_id","window","open","concat","id","groups","title","icon","tooltip","disabled","action","full","order"],"mappings":"2BAAAA,EAA4DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnDC,EAAeC,IAAE,CAAA,uCAAkC,CAAAC,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAA5DQ,EAAOG,MAAE,CAAA,CAAAC,yBAAuB,IAAAA,CAA4B,GAAAJ,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAP,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAL,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAF,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAD,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASrD,IAAMK,EAA2B,KACvC,IAAMC,EAAUX,EAAW,iBAAkB,CAAA,GACvCY,EAAOP,IACPQ,EAAYd,EAAgBa,GAC5BE,EAAed,EAAmB,4BAA6B,oBAE/De,EAAUJ,GAAWG,AAAiB,WAAjBA,GAA6BF,EAAKI,QAAQ,CAE/D,CAAEC,EAAAA,CAAAA,CAAG,CAAGd,IAERe,EAAcjB,EAAY,UAC1BW,EAAKO,UAAU,EAAIP,AAAoB,aAApBA,EAAKO,UAAU,EAAmBP,AAAoB,UAApBA,EAAKO,UAAU,EACxE,MAAMf,EAAIgB,IAAI,CAACC,GAAG,CAAC,2BAA4B,CAAEC,IAAKV,EAAKW,GAAAA,AAAG,GAE/DC,OAAOC,IAAI,CAAA,SAAAC,MAAA,CAAUd,EAAKW,GAAG,EAAIX,EAAKW,GAAG,CAC1C,EAAG,CAACX,EAAKW,GAAG,CAAEX,EAAKO,UAAU,CAAC,EAE9B,OAAOjB,EAAQ,KACd,GAAKa,EAIL,OAAAjB,EAAAA,EAAA,CACC6B,GAAI,cACJC,OAAQ,CAAC,OAAO,CAChBC,MAAO,cACPC,KAAM,OAAO,EACTjB,GAAa,CAChBkB,QAASd,EAAE,wCACXe,SAAU,CAAA,IACV,CAAA,EAAA,CACDC,OAAQ,IAAM,KAAKf,IACnBgB,KAAM,CAAA,EACNC,MAAO,CAAC,EAEV,EAAG,CAACpB,EAASF,EAAWK,EAAaD,EAAE,CACxC"}