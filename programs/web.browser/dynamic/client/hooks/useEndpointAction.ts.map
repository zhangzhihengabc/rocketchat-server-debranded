)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useEndpointAction.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Method, OperationParams, PathPattern, UrlParams } from '@rocket.chat/rest-typings';\nimport type { EndpointFunction } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\ntype UseEndpointActionOptions<TPathPattern extends PathPattern> = (undefined extends UrlParams<TPathPattern>\n\t? {\n\t\t\tkeys?: UrlParams<TPathPattern>;\n\t  }\n\t: {\n\t\t\tkeys: UrlParams<TPathPattern>;\n\t  }) & {\n\tsuccessMessage?: string;\n};\nexport function useEndpointAction<TMethod extends Method, TPathPattern extends PathPattern>(\n\tmethod: TMethod,\n\tpathPattern: TPathPattern,\n\toptions: UseEndpointActionOptions<TPathPattern> = { keys: {} as UrlParams<TPathPattern> },\n): EndpointFunction<TMethod, TPathPattern> {\n\tconst sendData = useEndpoint(method, pathPattern, options.keys as UrlParams<TPathPattern>);\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (params: OperationParams<TMethod, TPathPattern> | undefined) => {\n\t\t\ttry {\n\t\t\t\tconst data = await sendData(params as OperationParams<TMethod, TPathPattern>);\n\n\t\t\t\tif (options.successMessage) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: options.successMessage });\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, options.successMessage],\n\t);\n}\n",null],"names":["useToastMessageDispatch","useEndpoint","useCallback","useEndpointAction","method","pathPattern","options","keys","sendData","dispatchToastMessage","params","data","successMessage","type","message","error","module","export"],"mappings":"2BAEqDA,EAA2BC,EAAAC,EAY1E,SAAUC,EACfC,CAAe,CACfC,CAAyB,EACgE,IAAzFC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,CAAAA,SAAAA,CAAAA,EAAAA,CAAkD,CAAEC,KAAM,CAAA,CAA6B,EAEjFC,EAAWP,EAAYG,EAAQC,EAAaC,EAAQC,IAA+B,EAEnFE,EAAuBT,IAE7B,OAAOE,EACN,MAAOQ,IACN,GAAI,CACH,IAAMC,EAAO,MAAMH,EAASE,GAM5B,OAJIJ,EAAQM,cAAc,EACzBH,EAAqB,CAAEI,KAAM,UAAWC,QAASR,EAAQM,cAAAA,AAAc,GAGjED,EACN,MAAOI,EAAO,CAEf,MADAN,EAAqB,CAAEI,KAAM,QAASC,QAASC,CAAK,GAC9CA,EAER,EACA,CAACN,EAAsBD,EAAUF,EAAQM,cAAc,CAAC,CAE1D,CAtCAI,EAAOC,MAAE,CAAA,CAAAd,kBAAuB,IAAEA,CAAmB,GAA2Ba,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAhB,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,QAAAA,CAAAd,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA"}