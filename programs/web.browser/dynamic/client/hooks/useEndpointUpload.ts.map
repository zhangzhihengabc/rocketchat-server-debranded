)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useEndpointUpload.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { UploadResult } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useUpload } from '@rocket.chat/ui-contexts';\nimport { useCallback } from 'react';\n\nexport const useEndpointUpload = (\n\tendpoint: Parameters<typeof useUpload>[0],\n\tsuccessMessage: string,\n): ((formData: FormData) => Promise<{ success: boolean }>) => {\n\tconst sendData = useUpload(endpoint);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (formData: FormData) => {\n\t\t\ttry {\n\t\t\t\tconst data = sendData(formData);\n\n\t\t\t\tconst promise = data instanceof Promise ? data : data.promise;\n\n\t\t\t\tconst result = await (promise as unknown as Promise<UploadResult>);\n\n\t\t\t\tif (!result.success) {\n\t\t\t\t\tthrow new Error(String(result.status));\n\t\t\t\t}\n\n\t\t\t\tsuccessMessage && dispatchToastMessage({ type: 'success', message: successMessage });\n\n\t\t\t\treturn result as any;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treturn { success: false };\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, successMessage],\n\t);\n};\n",null],"names":["useToastMessageDispatch","useUpload","useCallback","module","export","useEndpointUpload","endpoint","successMessage","sendData","dispatchToastMessage","formData","data","promise","Promise","result","success","Error","String","status","type","message","error"],"mappings":"2BACmDA,EAA2BC,EAAAC,EAA9EC,EAAOC,MAAE,CAAA,CAAAC,kBAAuB,IAAEA,CAAiB,GAA2BF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAH,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,QAAAA,CAAAD,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAGvE,IAAMG,EAAoB,CAChCC,EACAC,KAEA,IAAMC,EAAWP,EAAUK,GACrBG,EAAuBT,IAE7B,OAAOE,EACN,MAAOQ,IACN,GAAI,CACH,IAAMC,EAAOH,EAASE,GAEhBE,EAAUD,aAAgBE,QAAUF,EAAOA,EAAKC,OAAO,CAEvDE,EAAS,MAAOF,EAEtB,GAAI,CAACE,EAAOC,OAAO,CAClB,MAAM,AAAIC,MAAMC,OAAOH,EAAOI,MAAM,GAKrC,OAFAX,GAAkBE,EAAqB,CAAEU,KAAM,UAAWC,QAASb,CAAc,GAE1EO,EACN,MAAOO,EAAO,CAEf,OADAZ,EAAqB,CAAEU,KAAM,QAASC,QAASC,CAAK,GAC7C,CAAEN,QAAS,CAAA,CAAK,EAEzB,EACA,CAACN,EAAsBD,EAAUD,EAAe,CAElD"}