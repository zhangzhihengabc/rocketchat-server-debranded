)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useEndpointData.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Serialized } from '@rocket.chat/core-typings';\nimport type { OperationParams, OperationResult, PathPattern, UrlParams } from '@rocket.chat/rest-typings';\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useCallback, useEffect } from 'react';\n\nimport { getConfig } from '../lib/utils/getConfig';\nimport type { AsyncState } from './useAsyncState';\nimport { useAsyncState } from './useAsyncState';\n\nconst log = (name: string): Console['log'] =>\n\tprocess.env.NODE_ENV !== 'production' || getConfig('debug') === 'true'\n\t\t? (...args): void => console.warn(name, ...args)\n\t\t: (): void => undefined;\n\nconst deprecationWarning = log('useEndpointData is deprecated, use @tanstack/react-query instead');\n\n/**\n * use @tanstack/react-query with useEndpoint instead\n * @deprecated\n */\nexport const useEndpointData = <TPathPattern extends PathPattern>(\n\tendpoint: TPathPattern,\n\toptions: {\n\t\tkeys?: UrlParams<TPathPattern>;\n\t\tparams?: OperationParams<'GET', TPathPattern>;\n\t\tinitialValue?: Serialized<OperationResult<'GET', TPathPattern>> | (() => Serialized<OperationResult<'GET', TPathPattern>>);\n\t} = {},\n): AsyncState<Serialized<OperationResult<'GET', TPathPattern>>> & {\n\treload: () => void;\n} => {\n\tdeprecationWarning({ endpoint, ...options });\n\tconst { resolve, reject, reset, ...state } = useAsyncState(options.initialValue);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst getData = useEndpoint('GET', endpoint, options.keys as UrlParams<TPathPattern>);\n\n\tconst fetchData = useCallback(() => {\n\t\treset();\n\t\tgetData(options.params as OperationParams<'GET', TPathPattern>)\n\t\t\t.then(resolve)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: error,\n\t\t\t\t});\n\t\t\t\treject(error);\n\t\t\t});\n\t}, [reset, getData, options.params, resolve, dispatchToastMessage, reject]);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, [fetchData]);\n\n\treturn {\n\t\t...state,\n\t\treload: fetchData,\n\t};\n};\n",null],"names":["_objectWithoutProperties","_objectSpread","useToastMessageDispatch","useEndpoint","useCallback","useEffect","getConfig","useAsyncState","module","link","default","export","useEndpointData","deprecationWarning","process","_len","arguments","length","args","Array","_key","console","warn","undefined","endpoint","options","_useAsyncState","initialValue","resolve","reject","reset","state","_excluded","dispatchToastMessage","getData","keys","fetchData","params","then","catch","error","type","message","reload"],"mappings":"2BAEAA,EAAgFC,EAA3BC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,qCAAvEC,EAAyBC,IAAA,CAAA,iDAA8C,CAAAC,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAE,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAhFO,EAAOG,MAAE,CAAA,CAAAC,gBAAAA,IAAyBA,CAAa,GAAiCJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAJ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAF,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAD,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAYhF,IAAMM,EAJLC,AAAyCR,AAAuB,SAAvBA,EAAU,SAChD,WAAA,IAAA,IAAAS,EAAAC,UAAAC,MAAA,CAAIC,EAAI,AAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,CAAI,CAAAE,EAAA,CAAAJ,SAAA,CAAAI,EAAA,CAAA,OAAWC,QAAQC,IAAI,CAGJ,sEAHcJ,EAAK,EAC9C,IAAYK,KAAAA,EAQHX,EAAkB,SAC9BY,CAAsB,EAQnB,IAPHC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,CAAAA,SAAAA,CAAAA,EAAAA,CAII,CAAA,EAIJZ,EAAkBZ,EAAA,CAAGuB,SAAAA,CAAQ,EAAKC,IAClC,IAAAC,EAA6CnB,EAAckB,EAAQE,YAAY,EAAzE,CAAEC,QAAAA,CAAO,CAAEC,OAAAA,CAAM,CAAEC,MAAAA,CAAAA,CAAiB,CAAAJ,EAAPK,EAAK/B,EAAA0B,EAAAM,GAClCC,EAAuB/B,IACvBgC,EAAU/B,EAAY,MAAOqB,EAAUC,EAAQU,IAA+B,EAE9EC,EAAYhC,EAAY,KAC7B0B,IACAI,EAAQT,EAAQY,MAA8C,EAC5DC,IAAI,CAACV,GACLW,KAAK,CAAEC,IACPnB,QAAQmB,KAAK,CAACA,GACdP,EAAqB,CACpBQ,KAAM,QACNC,QAASF,IAEVX,EAAOW,EACR,EACF,EAAG,CAACV,EAAOI,EAAST,EAAQY,MAAM,CAAET,EAASK,EAAsBJ,EAAO,EAM1E,OAJAxB,EAAU,KACT+B,GACD,EAAG,CAACA,EAAU,EAEdnC,EAAAA,EAAA,CAAA,EACI8B,GAAK,CAAA,EAAA,CACRY,OAAQP,CAAS,EAEnB"}