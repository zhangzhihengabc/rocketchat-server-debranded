)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/lists/useRecordList.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport type { AsyncStatePhase } from '../../lib/asyncState';\nimport type { RecordList } from '../../lib/lists/RecordList';\n\ntype RecordListValue<T> = {\n\tphase: AsyncStatePhase;\n\titems: T[];\n\titemCount: number;\n\terror: Error | undefined;\n};\n\nexport const useRecordList = <T extends { _id: string; _updatedAt?: Date }>(recordList: RecordList<T>): RecordListValue<T> => {\n\tconst [state, setState] = useState<RecordListValue<T>>(() => ({\n\t\tphase: recordList.phase,\n\t\titems: recordList.items,\n\t\titemCount: recordList.itemCount,\n\t\terror: undefined,\n\t}));\n\n\tuseEffect(() => {\n\t\tconst disconnectMutatingEvent = recordList.on('mutating', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectMutatedEvent = recordList.on('mutated', () => {\n\t\t\tsetState((prevState) => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: prevState.error,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectClearedEvent = recordList.on('cleared', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectErroredEvent = recordList.on('errored', (error) => {\n\t\t\tsetState((state) => ({ ...state, error }));\n\t\t});\n\n\t\treturn (): void => {\n\t\t\tdisconnectMutatingEvent();\n\t\t\tdisconnectMutatedEvent();\n\t\t\tdisconnectClearedEvent();\n\t\t\tdisconnectErroredEvent();\n\t\t};\n\t}, [recordList]);\n\n\treturn state;\n};\n",null],"names":["_objectSpread","useEffect","useState","module","link","default","export","useRecordList","recordList","state","setState","phase","items","itemCount","error","undefined","disconnectMutatingEvent","on","disconnectMutatedEvent","prevState","disconnectClearedEvent","disconnectErroredEvent"],"mappings":"2BAAAA,EAA4CC,EAAAC,EAA1BC,EAAEC,IAAQ,CAAE,uCAAc,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAA5CG,EAAOG,MAAE,CAAA,CAAAC,cAAmB,IAAEA,CAAc,GAAAJ,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAYrC,IAAMK,EAA+DC,IAC3E,GAAM,CAACC,EAAOC,EAAS,CAAGR,EAA6B,IAAO,CAAA,CAC7DS,MAAOH,EAAWG,KAAK,CACvBC,MAAOJ,EAAWI,KAAK,CACvBC,UAAWL,EAAWK,SAAS,CAC/BC,MAAOC,KAAAA,KA2CR,OAxCAd,EAAU,KACT,IAAMe,EAA0BR,EAAWS,EAAE,CAAC,WAAY,KACzDP,EAAS,IAAO,CAAA,CACfC,MAAOH,EAAWG,KAAK,CACvBC,MAAOJ,EAAWI,KAAK,CACvBC,UAAWL,EAAWK,SAAS,CAC/BC,MAAOC,KAAAA,IAET,GAEMG,EAAyBV,EAAWS,EAAE,CAAC,UAAW,KACvDP,EAAUS,GAAe,CAAA,CACxBR,MAAOH,EAAWG,KAAK,CACvBC,MAAOJ,EAAWI,KAAK,CACvBC,UAAWL,EAAWK,SAAS,CAC/BC,MAAOK,EAAUL,KAAAA,GAEnB,GAEMM,EAAyBZ,EAAWS,EAAE,CAAC,UAAW,KACvDP,EAAS,IAAO,CAAA,CACfC,MAAOH,EAAWG,KAAK,CACvBC,MAAOJ,EAAWI,KAAK,CACvBC,UAAWL,EAAWK,SAAS,CAC/BC,MAAOC,KAAAA,IAET,GAEMM,EAAyBb,EAAWS,EAAE,CAAC,UAAYH,IACxDJ,EAAUD,GAAKT,EAAAA,EAAA,CAAA,EAAWS,GAAK,CAAA,EAAA,CAAEK,MAAAA,CAAK,GACvC,GAEA,MAAO,KACNE,IACAE,IACAE,IACAC,GACD,CACD,EAAG,CAACb,EAAW,EAERC,CACR"}