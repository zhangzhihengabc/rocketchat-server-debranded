)]}'
{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/useAppSlashCommands.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSingleStream, useUserId } from '@rocket.chat/ui-contexts';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useEffect } from 'react';\n\nimport { slashCommands } from '../../app/utils/lib/slashCommand';\n\nexport const useAppSlashCommands = () => {\n\tconst queryClient = useQueryClient();\n\n\tconst apps = useSingleStream('apps');\n\tconst uid = useUserId();\n\n\tconst invalidate = useDebouncedCallback(\n\t\t() => {\n\t\t\tqueryClient.invalidateQueries(['apps', 'slashCommands']);\n\t\t},\n\t\t100,\n\t\t[],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\t\treturn apps('apps', ([key, [command]]) => {\n\t\t\tif (['command/added', 'command/updated', 'command/disabled', 'command/removed'].includes(key)) {\n\t\t\t\tif (typeof command === 'string') {\n\t\t\t\t\tdelete slashCommands.commands[command];\n\t\t\t\t}\n\t\t\t\tinvalidate();\n\t\t\t}\n\t\t});\n\t}, [apps, uid, invalidate]);\n\n\tconst getSlashCommands = useEndpoint('GET', '/v1/commands.list');\n\n\tuseQuery(['apps', 'slashCommands'], () => getSlashCommands(), {\n\t\tenabled: !!uid,\n\t\tonSuccess(data) {\n\t\t\tdata.commands.forEach((command) => slashCommands.add(command));\n\t\t},\n\t});\n};\n",null],"names":["useDebouncedCallback","useEndpoint","useSingleStream","useUserId","useQuery","useQueryClient","useEffect","slashCommands","module","export","useAppSlashCommands","queryClient","apps","uid","invalidate","invalidateQueries","_ref","key","command","includes","commands","getSlashCommands","enabled","onSuccess","data","forEach","add"],"mappings":"2BAAqCA,EAA8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,oBAAsB,IAAMA,CAAA,GAA8BF,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAR,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAP,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAJ,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAF,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAD,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAO5D,IAAMG,EAAsB,KAClC,IAAMC,EAAcN,IAEdO,EAAOV,EAAgB,QACvBW,EAAMV,IAENW,EAAad,EAClB,KACCW,EAAYI,iBAAiB,CAAC,CAAC,OAAQ,gBAAgB,CACxD,EACA,IACA,EAAE,EAGHT,EAAU,KACT,GAAKO,EAGL,OAAOD,EAAK,OAAQI,IAAqB,GAApB,CAACC,EAAK,CAACC,EAAQ,CAAC,CAAAF,EAChC,CAAC,gBAAiB,kBAAmB,mBAAoB,kBAAkB,CAACG,QAAQ,CAACF,KACjE,UAAnB,OAAOC,GACV,OAAOX,EAAca,QAAQ,CAACF,EAAQ,CAEvCJ,IAEF,EACD,EAAG,CAACF,EAAMC,EAAKC,EAAW,EAE1B,IAAMO,EAAmBpB,EAAY,MAAO,qBAE5CG,EAAS,CAAC,OAAQ,gBAAgB,CAAE,IAAMiB,IAAoB,CAC7DC,QAAS,CAAC,CAACT,EACXU,UAAUC,CAAI,EACbA,EAAKJ,QAAQ,CAACK,OAAO,CAAEP,GAAYX,EAAcmB,GAAG,CAACR,GACtD,GAEF"}