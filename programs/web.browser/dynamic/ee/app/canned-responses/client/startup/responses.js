function module(e,n,t){let s,r,i,a,l,o,c;let p=["type"];t.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){s=e}},0),t.link("meteor/meteor",{Meteor(e){r=e}},0),t.link("meteor/tracker",{Tracker(e){i=e}},1),t.link("../../../../../app/authorization/client",{hasPermission(e){a=e}},2),t.link("../../../../../app/settings/client",{settings(e){l=e}},3),t.link("../../../../../app/utils/client/lib/SDKClient",{sdk(e){o=e}},4),t.link("../collections/CannedResponse",{CannedResponse(e){c=e}},5);let d={changed:e=>{let{type:n}=e,t=s(e,p);c.upsert({_id:t._id},t)},removed:e=>c.remove({_id:e._id})};r.startup(()=>{i.autorun(async e=>{if(!r.userId()||!l.get("Canned_Responses_Enable")||!a("view-canned-responses"))return;i.afterFlush(()=>{try{o.stream("canned-responses",["canned-responses"],(e,n)=>{let{agentsId:t}=n||{};(!Array.isArray(t)||t.includes(r.userId()))&&d[e.type](e)})}catch(e){console.log(e)}});let{responses:n}=await o.rest.get("/v1/canned-responses.get");n.forEach(e=>c.insert(e)),e.stop()})})}
//# sourceMappingURL=/dynamic/ee/app/canned-responses/client/startup/cdee1bd35a6a4b1bb97fa8ea41cc35b515dcc74d.map
