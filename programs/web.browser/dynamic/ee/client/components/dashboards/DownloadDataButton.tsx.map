)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/components/dashboards/DownloadDataButton.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { Box } from '@rocket.chat/fuselage';\nimport { IconButton } from '@rocket.chat/fuselage';\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React from 'react';\n\nimport { downloadCsvAs } from '../../../../client/lib/download';\n\ntype RowFor<THeaders extends readonly string[]> = readonly unknown[] & {\n\tlength: THeaders['length'];\n};\n\ntype DownloadDataButtonProps<THeaders extends readonly string[]> = {\n\tattachmentName: string;\n\theaders: RowFor<THeaders>;\n\tdataAvailable: boolean;\n\tdataExtractor: () => Promise<RowFor<THeaders>[] | undefined> | RowFor<THeaders>[] | undefined;\n} & Omit<ComponentProps<typeof Box>, 'attachmentName' | 'headers' | 'data'>;\n\nconst DownloadDataButton = <H extends readonly string[]>({\n\tattachmentName,\n\theaders,\n\tdataAvailable,\n\tdataExtractor,\n\t...props\n}: DownloadDataButtonProps<H>): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleClick = (): void => {\n\t\tif (!dataAvailable) {\n\t\t\treturn;\n\t\t}\n\n\t\tPromise.resolve(dataExtractor())\n\t\t\t.then((data) => {\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdownloadCsvAs([headers, ...data], attachmentName);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<IconButton\n\t\t\tsecondary\n\t\t\tsmall\n\t\t\tmis={16}\n\t\t\tdisabled={!dataAvailable}\n\t\t\tonClick={handleClick}\n\t\t\taria-label={t('Download_Info')}\n\t\t\ticon='download'\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nexport default DownloadDataButton;\n",null],"names":["_extends","_objectWithoutProperties","IconButton","useToastMessageDispatch","useTranslation","React","downloadCsvAs","module","link","default","exportDefault","_ref","attachmentName","headers","dataAvailable","dataExtractor","props","_excluded","t","dispatchToastMessage","createElement","secondary","small","mis","disabled","onClick","Promise","resolve","then","data","catch","error","type","message","icon"],"mappings":"2BACAA,EAAmDC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,qEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAE,QAAAA,CAAAA,EAAAR,EAAAA,CAAA,CAAA,EAAA,GAA1CM,EAAYC,IAAA,CAAM,wBAAwB,CAAAN,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAJ,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kCAAAA,CAAAD,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAnDC,EAAOG,aAAY,CAkBQC,IAMoB,GANU,CACxDC,eAAAA,CAAc,CACdC,QAAAA,CAAO,CACPC,cAAAA,CAAa,CACbC,cAAAA,CAAAA,CAE4B,CAAAJ,EADzBK,EAAKf,EAAAU,EAAAM,GAEFC,EAAId,IACJe,EAAuBhB,IAoB7B,OACCE,EAAAe,aAAA,CAAClB,EAAUF,EAAA,CACVqB,UAAS,CAAA,EACTC,MAAK,CAAA,EACLC,IAAK,GACLC,SAAU,CAACV,EACXW,QAxBkB,KACdX,GAILY,QAAQC,OAAO,CAACZ,KACda,IAAI,CAAEC,IACDA,GAILvB,EAAc,CAACO,KAAYgB,EAAK,CAAEjB,EACnC,GACCkB,KAAK,CAAEC,IACPZ,EAAqB,CAAEa,KAAM,QAASC,QAASF,CAAK,EACrD,EACF,EASE,aAAYb,EAAE,iBACdgB,KAAK,UAAU,EACXlB,GAGP"}