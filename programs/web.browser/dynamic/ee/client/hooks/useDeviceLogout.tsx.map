)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/hooks/useDeviceLogout.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useSetModal, useTranslation, useToastMessageDispatch, useRoute, useRouteParameter } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\n\nimport GenericModal from '../../../client/components/GenericModal';\nimport { useEndpointAction } from '../../../client/hooks/useEndpointAction';\n\nexport const useDeviceLogout = (\n\tsessionId: string,\n\tendpoint: '/v1/sessions/logout' | '/v1/sessions/logout.me',\n): ((onReload: () => void) => void) => {\n\tconst t = useTranslation();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst deviceManagementRouter = useRoute('device-management');\n\tconst routeId = useRouteParameter('id');\n\n\tconst logoutDevice = useEndpointAction('POST', endpoint);\n\n\tconst handleCloseContextualBar = useCallback((): void => deviceManagementRouter.push({}), [deviceManagementRouter]);\n\n\tconst isContextualBarOpen = routeId === sessionId;\n\n\tconst handleLogoutDeviceModal = useCallback(\n\t\t(onReload: () => void) => {\n\t\t\tconst closeModal = (): void => setModal(null);\n\n\t\t\tconst handleLogoutDevice = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait logoutDevice({ sessionId });\n\t\t\t\t\tonReload();\n\t\t\t\t\tisContextualBarOpen && handleCloseContextualBar();\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Device_Logged_Out') });\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tcloseModal();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<GenericModal\n\t\t\t\t\ttitle={t('Logout_Device')}\n\t\t\t\t\tvariant='danger'\n\t\t\t\t\tconfirmText={t('Logout_Device')}\n\t\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\t\tonConfirm={handleLogoutDevice}\n\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t>\n\t\t\t\t\t{t('Device_Logout_Text')}\n\t\t\t\t</GenericModal>,\n\t\t\t);\n\t\t},\n\t\t[setModal, t, logoutDevice, sessionId, isContextualBarOpen, handleCloseContextualBar, dispatchToastMessage],\n\t);\n\n\treturn handleLogoutDeviceModal;\n};\n",null],"names":["useSetModal","useTranslation","useToastMessageDispatch","useRoute","useRouteParameter","React","useCallback","GenericModal","useEndpointAction","module","export","useDeviceLogout","default","sessionId","endpoint","t","setModal","dispatchToastMessage","deviceManagementRouter","routeId","logoutDevice","handleCloseContextualBar","push","isContextualBarOpen","handleLogoutDeviceModal","onReload","closeModal","handleLogoutDevice","type","message","error","createElement","title","variant","confirmText","cancelText","onConfirm","onCancel","onClose"],"mappings":"2BAAsCA,EAAyBC,EAAUC,EAAyBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAA7HC,EAAOC,MAAE,CAAA,CAAAC,gBAAa,IAAAA,CAAgB,GAAuFF,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAG,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAG,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,0CAAAA,CAAAD,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAMtH,IAAMG,EAAkB,CAC9BE,EACAC,KAEA,IAAMC,EAAId,IACJe,EAAWhB,IACXiB,EAAuBf,IACvBgB,EAAyBf,EAAS,qBAClCgB,EAAUf,EAAkB,MAE5BgB,EAAeZ,EAAkB,OAAQM,GAEzCO,EAA2Bf,EAAY,IAAYY,EAAuBI,IAAI,CAAC,CAAA,GAAK,CAACJ,EAAuB,EAE5GK,EAAsBJ,IAAYN,EAElCW,EAA0BlB,EAC9BmB,IACA,IAAMC,EAAa,IAAYV,EAAS,MAElCW,EAAqB,UAC1B,GAAI,CACH,MAAMP,EAAa,CAAEP,UAAAA,CAAS,GAC9BY,IACAF,GAAuBF,IACvBJ,EAAqB,CAAEW,KAAM,UAAWC,QAASd,EAAE,oBAAoB,GACtE,MAAOe,EAAO,CACfb,EAAqB,CAAEW,KAAM,QAASC,QAASC,CAAK,UAC3C,CACTJ,IAEF,EAEAV,EACCX,EAAA0B,aAAA,CAACxB,EAAY,CACZyB,MAAOjB,EAAE,iBACTkB,QAAQ,SACRC,YAAanB,EAAE,iBACfoB,WAAYpB,EAAE,UACdqB,UAAWT,EACXU,SAAUX,EACVY,QAASZ,CAAW,EAEnBX,EAAE,uBAGN,EACA,CAACC,EAAUD,EAAGK,EAAcP,EAAWU,EAAqBF,EAA0BJ,EAAqB,EAG5G,OAAOO,CACR"}