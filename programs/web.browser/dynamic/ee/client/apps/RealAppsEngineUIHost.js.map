)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/apps/RealAppsEngineUIHost.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AppsEngineUIHost } from '@rocket.chat/apps-engine/client/AppsEngineUIHost';\nimport { Meteor } from 'meteor/meteor';\n\nimport { ChatRoom } from '../../../app/models/client';\nimport { getUserAvatarURL } from '../../../app/utils/client/getUserAvatarURL';\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { RoomManager } from '../../../client/lib/RoomManager';\nimport { baseURI } from '../../../client/lib/baseURI';\n\nexport class RealAppsEngineUIHost extends AppsEngineUIHost {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._baseURL = baseURI.replace(/\\/$/, '');\n\t}\n\n\tgetUserAvatarUrl(username) {\n\t\tconst avatarUrl = getUserAvatarURL(username);\n\n\t\tif (!avatarUrl.startsWith('http') && !avatarUrl.startsWith('data')) {\n\t\t\treturn `${this._baseURL}${avatarUrl}`;\n\t\t}\n\n\t\treturn avatarUrl;\n\t}\n\n\tasync getClientRoomInfo() {\n\t\tconst { name: slugifiedName, _id: id } = ChatRoom.findOne(RoomManager.opened);\n\n\t\tlet cachedMembers = [];\n\t\ttry {\n\t\t\tconst { members } = await sdk.rest.get('/v1/groups.members', { roomId: id });\n\n\t\t\tcachedMembers = members.map(({ _id, username }) => ({\n\t\t\t\tid: _id,\n\t\t\t\tusername,\n\t\t\t\tavatarUrl: this.getUserAvatarUrl(username),\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\n\t\treturn {\n\t\t\tid,\n\t\t\tslugifiedName,\n\t\t\tmembers: cachedMembers,\n\t\t};\n\t}\n\n\tasync getClientUserInfo() {\n\t\tconst { username, _id } = Meteor.user();\n\n\t\treturn {\n\t\t\tid: _id,\n\t\t\tusername,\n\t\t\tavatarUrl: this.getUserAvatarUrl(username) || '',\n\t\t};\n\t}\n}\n",null],"names":["AppsEngineUIHost","Meteor","ChatRoom","getUserAvatarURL","sdk","RoomManager","baseURI","module","export","RealAppsEngineUIHost","link","v","constructor","_baseURL","replace","getUserAvatarUrl","username","avatarUrl","startsWith","concat","getClientRoomInfo","name","slugifiedName","_id","id","findOne","opened","cachedMembers","members","rest","get","roomId","map","_ref","error","console","warn","getClientUserInfo","user"],"mappings":"2BAAmEA,EAAiIC,EAAgEC,EAAmFC,EAA2HC,EAAiFC,EAAiGC,EAApoBC,EAAOC,MAAM,CAAC,CAACC,qBAAqB,IAAIA,CAAoB,GAAwBF,EAAOG,IAAI,CAAC,mDAAmD,CAACV,iBAAiBW,CAAC,EAAEX,EAAiBW,CAAC,CAAC,EAAE,GAAcJ,EAAOG,IAAI,CAAC,gBAAgB,CAACT,OAAOU,CAAC,EAAEV,EAAOU,CAAC,CAAC,EAAE,GAAgBJ,EAAOG,IAAI,CAAC,6BAA6B,CAACR,SAASS,CAAC,EAAET,EAASS,CAAC,CAAC,EAAE,GAAwBJ,EAAOG,IAAI,CAAC,6CAA6C,CAACP,iBAAiBQ,CAAC,EAAER,EAAiBQ,CAAC,CAAC,EAAE,GAAWJ,EAAOG,IAAI,CAAC,0CAA0C,CAACN,IAAIO,CAAC,EAAEP,EAAIO,CAAC,CAAC,EAAE,GAAmBJ,EAAOG,IAAI,CAAC,kCAAkC,CAACL,YAAYM,CAAC,EAAEN,EAAYM,CAAC,CAAC,EAAE,GAAeJ,EAAOG,IAAI,CAAC,8BAA8B,CAACJ,QAAQK,CAAC,EAAEL,EAAQK,CAAC,CAAC,EAAE,EASvsB,OAAMF,UAA6BT,EACzCY,aAAc,CACb,KAAK,GAEL,IAAI,CAACC,QAAQ,CAAGP,EAAQQ,OAAO,CAAC,MAAO,GACxC,CAEAC,iBAAiBC,CAAQ,CAAE,CAC1B,IAAMC,EAAYd,EAAiBa,UAEnC,AAAI,AAACC,EAAUC,UAAU,CAAC,SAAYD,EAAUC,UAAU,CAAC,QAIpDD,EAHN,GAAAE,MAAA,CAAU,IAAI,CAACN,QAAQ,EAAAM,MAAA,CAAGF,EAI5B,CAEA,MAAMG,mBAAoB,CACzB,GAAM,CAAEC,KAAMC,CAAa,CAAEC,IAAKC,CAAAA,CAAI,CAAGtB,EAASuB,OAAO,CAACpB,EAAYqB,MAAM,EAExEC,EAAgB,EAAE,CACtB,GAAI,CACH,GAAM,CAAEC,QAAAA,CAAAA,CAAS,CAAG,MAAMxB,EAAIyB,IAAI,CAACC,GAAG,CAAC,qBAAsB,CAAEC,OAAQP,CAAG,GAE1EG,EAAgBC,EAAQI,GAAG,CAACC,IAAA,GAAC,CAAEV,IAAAA,CAAG,CAAEP,SAAAA,CAAAA,CAAU,CAAAiB,EAAA,MAAM,CACnDT,GAAID,EACJP,SAAAA,EACAC,UAAW,IAAI,CAACF,gBAAgB,CAACC,EAClC,CAAC,EACF,CAAE,MAAOkB,EAAO,CACfC,QAAQC,IAAI,CAACF,EACd,CAEA,MAAO,CACNV,GAAAA,EACAF,cAAAA,EACAM,QAASD,CACV,CACD,CAEA,MAAMU,mBAAoB,CACzB,GAAM,CAAErB,SAAAA,CAAQ,CAAEO,IAAAA,CAAAA,CAAK,CAAGtB,EAAOqC,IAAI,GAErC,MAAO,CACNd,GAAID,EACJP,SAAAA,EACAC,UAAW,IAAI,CAACF,gBAAgB,CAACC,IAAa,EAC/C,CACD,CACD"}