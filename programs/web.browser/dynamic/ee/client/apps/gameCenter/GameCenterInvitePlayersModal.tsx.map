)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/apps/gameCenter/GameCenterInvitePlayersModal.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState } from 'react';\n\nimport GenericModal from '../../../../client/components/GenericModal';\nimport UserAutoCompleteMultipleFederated from '../../../../client/components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated';\nimport { useOpenedRoom } from '../../../../client/lib/RoomManager';\nimport { roomCoordinator } from '../../../../client/lib/rooms/roomCoordinator';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport type { IGame } from './GameCenter';\n\ntype Username = Exclude<IUser['username'], undefined>;\n\ninterface IGameCenterInvitePlayersModalProps {\n\tgame: IGame;\n\tonClose: () => void;\n}\n\nconst GameCenterInvitePlayersModal = ({ game, onClose }: IGameCenterInvitePlayersModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [users, setUsers] = useState<Array<Username>>([]);\n\tconst { name } = game;\n\n\tconst openedRoom = useOpenedRoom();\n\n\tconst sendInvite = async () => {\n\t\tconst privateGroupName = `${name.replace(/\\s/g, '-')}-${Random.id(10)}`;\n\n\t\ttry {\n\t\t\tconst result = await callWithErrorHandling('createPrivateGroup' as any, privateGroupName, users);\n\n\t\t\troomCoordinator.openRouteLink(result.t, result);\n\n\t\t\tTracker.autorun((c) => {\n\t\t\t\tif (openedRoom !== result.rid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcallWithErrorHandling('sendMessage', {\n\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\trid: result.rid,\n\t\t\t\t\tmsg: t('Apps_Game_Center_Play_Game_Together', { name }),\n\t\t\t\t});\n\n\t\t\t\tc.stop();\n\t\t\t});\n\t\t\tonClose();\n\t\t} catch (err) {\n\t\t\tconsole.warn(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<GenericModal onClose={onClose} onCancel={onClose} onConfirm={sendInvite} title={t('Apps_Game_Center_Invite_Friends')}>\n\t\t\t\t<Box mbe={16}>{t('Invite_Users')}</Box>\n\t\t\t\t<Box mbe={16} display='flex' justifyContent='stretch'>\n\t\t\t\t\t<UserAutoCompleteMultipleFederated value={users} onChange={setUsers} />\n\t\t\t\t</Box>\n\t\t\t</GenericModal>\n\t\t</>\n\t);\n};\n\nexport default GameCenterInvitePlayersModal;\n",null],"names":["Box","useTranslation","React","useState","GenericModal","UserAutoCompleteMultipleFederated","useOpenedRoom","roomCoordinator","callWithErrorHandling","module","link","default","exportDefault","_ref","game","onClose","t","users","setUsers","name","openedRoom","sendInvite","privateGroupName","concat","replace","Random","id","result","openRouteLink","Tracker","autorun","c","rid","_id","msg","stop","err","console","warn","createElement","Fragment","onCancel","onConfirm","title","mbe","display","justifyContent","value","onChange"],"mappings":"2BACAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAV,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAR,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAT,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,6CAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,2FAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAH,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,+CAAAA,CAAAF,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qDAAAA,CAAAD,sBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA5CC,EAAOG,aAAa,CAmBiBC,IAAwE,GAAvE,CAAEC,KAAAA,CAAI,CAAEC,QAAAA,CAAAA,CAA6C,CAAAF,EACpFG,EAAIf,IACJ,CAACgB,EAAOC,EAAS,CAAGf,EAA0B,EAAE,EAChD,CAAEgB,KAAAA,CAAAA,CAAM,CAAGL,EAEXM,EAAad,IAEbe,EAAa,UAClB,IAAMC,EAAgB,GAAAC,MAAA,CAAMJ,EAAKK,OAAO,CAAC,MAAO,KAAI,KAAAD,MAAA,CAAIE,OAAOC,EAAE,CAAC,KAElE,GAAI,CACH,IAAMC,EAAS,MAAMnB,EAAsB,qBAA6Bc,EAAkBL,GAE1FV,EAAgBqB,aAAa,CAACD,EAAOX,CAAC,CAAEW,GAExCE,QAAQC,OAAO,CAAEC,IACZX,IAAeO,EAAOK,GAAG,GAI7BxB,EAAsB,cAAe,CACpCyB,IAAKR,OAAOC,EAAE,GACdM,IAAKL,EAAOK,GAAG,CACfE,IAAKlB,EAAE,sCAAuC,CAAEG,KAAAA,CAAI,KAGrDY,EAAEI,IAAI,GACP,GACApB,IACC,MAAOqB,EAAK,CACbC,QAAQC,IAAI,CAACF,GAEf,EAEA,OACClC,EAAAqC,aAAA,CAAArC,EAAAsC,QAAA,CAAA,KACCtC,EAAAqC,aAAA,CAACnC,EAAY,CAACW,QAASA,EAAS0B,SAAU1B,EAAS2B,UAAWrB,EAAYsB,MAAO3B,EAAE,kCAAmC,EACrHd,EAAAqC,aAAA,CAACvC,EAAG,CAAC4C,IAAK,EAAG,EAAE5B,EAAE,iBACjBd,EAAAqC,aAAA,CAACvC,EAAG,CAAC4C,IAAK,GAAIC,QAAQ,OAAOC,eAAe,SAAS,EACpD5C,EAAAqC,aAAA,CAAClC,EAAiC,CAAC0C,MAAO9B,EAAO+B,SAAU9B,CAAS,KAKzE"}