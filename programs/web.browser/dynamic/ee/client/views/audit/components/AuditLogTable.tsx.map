)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/AuditLogTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\nimport { useTranslation, useMethod, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useState } from 'react';\n\nimport GenericNoResults from '../../../../../client/components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeaderCell,\n\tGenericTableBody,\n\tGenericTableLoadingRow,\n\tGenericTableHeader,\n} from '../../../../../client/components/GenericTable';\nimport { createEndOfToday, createStartOfToday } from '../utils/dateRange';\nimport type { DateRange } from '../utils/dateRange';\nimport AuditLogEntry from './AuditLogEntry';\nimport DateRangePicker from './forms/DateRangePicker';\n\nconst AuditLogTable = (): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst [dateRange, setDateRange] = useState<DateRange>(() => ({\n\t\tstart: createStartOfToday(),\n\t\tend: createEndOfToday(),\n\t}));\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst getAudits = useMethod('auditGetAuditions');\n\n\tconst { data, isLoading, isSuccess } = useQuery(\n\t\t['audits', dateRange],\n\t\tasync () => {\n\t\t\tconst { start, end } = dateRange;\n\t\t\treturn getAudits({ startDate: start ?? new Date(0), endDate: end ?? new Date() });\n\t\t},\n\t\t{\n\t\t\tonError: (error) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t},\n\t\t},\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell>{t('User')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Looked_for')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('When')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell width={80}>{t('Results')}</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell>{t('Filters_applied')}</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Field alignSelf='stretch'>\n\t\t\t\t<FieldLabel>{t('Date')}</FieldLabel>\n\t\t\t\t<FieldRow>\n\t\t\t\t\t<DateRangePicker display='flex' flexGrow={1} value={dateRange} onChange={setDateRange} />\n\t\t\t\t</FieldRow>\n\t\t\t</Field>\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={4} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data.length === 0 && <GenericNoResults />}\n\t\t\t{isSuccess && data.length > 0 && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t{data.map((auditLog) => (\n\t\t\t\t\t\t\t<AuditLogEntry key={auditLog._id} value={auditLog} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default AuditLogTable;\n",null],"names":["Field","FieldLabel","FieldRow","useTranslation","useMethod","useToastMessageDispatch","useQuery","React","useState","GenericNoResults","GenericTable","GenericTableHeaderCell","GenericTableBody","GenericTableLoadingRow","GenericTableHeader","createEndOfToday","createStartOfToday","AuditLogEntry","DateRangePicker","module","link","v","default","exportDefault","t","dateRange","setDateRange","start","end","dispatchToastMessage","getAudits","data","isLoading","isSuccess","startDate","Date","endDate","onError","error","type","message","headers","createElement","Fragment","width","alignSelf","display","flexGrow","value","onChange","cols","length","map","auditLog","key","_id"],"mappings":"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"}