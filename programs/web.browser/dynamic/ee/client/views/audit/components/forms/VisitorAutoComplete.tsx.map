)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/forms/VisitorAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\ntype VisitorAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst VisitorAutoComplete = ({ value, onChange, ...props }: VisitorAutoCompleteProps): ReactElement => {\n\tconst [filter, setFilter] = useState('');\n\n\tconst performVisitorSearch = useEndpoint('GET', '/v1/livechat/visitors.autocomplete');\n\n\tconst visitorAutocompleteQueryResult = useQuery(['audit', 'visitors', filter], () =>\n\t\tperformVisitorSearch({ selector: JSON.stringify({ term: filter ?? '' }) }),\n\t);\n\n\tconst options = useMemo(\n\t\t() => visitorAutocompleteQueryResult.data?.items.map((user) => ({ value: user._id, label: user.name ?? user.username })) ?? [],\n\t\t[visitorAutocompleteQueryResult.data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { label } }) => <>{label}</>}\n\t\t\trenderItem={({ value, ...props }) => <Option key={value} {...props} />}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(VisitorAutoComplete);\n",null],"names":["_extends","_objectWithoutProperties","AutoComplete","Option","useEndpoint","useQuery","React","memo","useMemo","useState","module","default","v","link","exportDefault","_ref","value","onChange","props","_excluded","filter","setFilter","performVisitorSearch","visitorAutocompleteQueryResult","selector","JSON","stringify","term","options","_visitorAutocompleteQ","_visitorAutocompleteQ2","data","items","map","user","_user$name","_id","label","name","username","createElement","renderSelected","_ref2","selected","Fragment","renderItem","_ref3","_excluded2","key"],"mappings":"2BAAAA,EAA6DC,EAA7DC,EAASC,EAAoDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,yCAApDC,EAAAA,IAAc,CAAA,iCAAc,CAAAC,QAAwBC,CAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAC,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,CAAA,EAAA,GAAtCS,EAAQG,IAAAA,CAAAA,wBAA6B,CAACX,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAL,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAA7DC,EAAOI,aAAE,CAoCMP,EA5BaQ,IAA0E,GAAzE,CAAEC,MAAAA,CAAK,CAAEC,SAAAA,CAAAA,CAA8C,CAAAF,EAAjCG,EAAKjB,EAAAc,EAAAI,GACjD,CAACC,EAAQC,EAAU,CAAGZ,EAAS,IAE/Ba,EAAuBlB,EAAY,MAAO,sCAE1CmB,EAAiClB,EAAS,CAAC,QAAS,WAAYe,EAAO,CAAE,IAC9EE,EAAqB,CAAEE,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMP,MAAAA,EAAAA,EAAU,EAAE,EAAG,IAGlEQ,EAAUpB,EACf,KAAA,IAAAqB,EAAAC,EAAA,OAAA,AAAwH,OAAxHD,CAAAA,EAAA,AAAyC,OAAzCC,CAAAA,EAAMP,EAA+BQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnCA,EAAqCE,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAAC,EAAA,MAAM,CAAEnB,MAAOkB,EAAKE,GAAG,CAAEC,MAAK,AAAW,OAAXF,CAAAA,EAAED,EAAKI,IAAI,AAAJA,GAAIH,AAAA,KAAA,IAAAA,EAAAA,EAAID,EAAKK,QAAAA,AAAQ,CAAE,EAAC,GAACV,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EAC9H,CAACN,EAA+BQ,IAAI,CAAC,EAGtC,OACCzB,EAAAkC,aAAA,CAACtC,EAAYF,EAAA,CAAA,EACRkB,EAAK,CACTF,MAAOA,EACPC,SAAUA,EACVG,OAAQA,EACRC,UAAWA,EACXoB,eAAgBC,IAAA,GAAC,CAAEC,SAAU,CAAEN,MAAAA,CAAAA,CAAK,CAAI,CAAAK,EAAA,OAAKpC,EAAAkC,aAAA,CAAAlC,EAAAsC,QAAA,CAAA,KAAGP,EAAS,EACzDQ,WAAYC,IAAA,GAAC,CAAE9B,MAAAA,CAAAA,CAAiB,CAAA8B,EAAP5B,EAAKjB,EAAA6C,EAAAC,GAAA,OAAOzC,EAAAkC,aAAA,CAACrC,EAAMH,EAAA,CAACgD,IAAKhC,CAAM,EAAKE,GAAS,EACtEU,QAASA,CAAQ,GAGpB"}