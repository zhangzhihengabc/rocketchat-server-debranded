)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/forms/RoomAutoComplete.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { AutoComplete, Option, Options } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport RoomAvatar from '../../../../../../client/components/avatar/RoomAvatar';\n\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\n\nconst RoomAutoComplete = ({ value, onChange, ...props }: RoomAutoCompleteProps) => {\n\tconst [filter, setFilter] = useState('');\n\n\tconst performRoomSearch = useEndpoint('GET', '/v1/rooms.autocomplete.adminRooms');\n\n\tconst roomAutocompleteQueryResult = useQuery(['audit', 'rooms', filter], () =>\n\t\tperformRoomSearch({ selector: JSON.stringify({ name: filter ?? '' }) }),\n\t);\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\troomAutocompleteQueryResult.data?.items.map(({ name, _id, fname, avatarETag, t }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: { name: fname || name, avatarETag, type: t },\n\t\t\t})) ?? [],\n\t\t[roomAutocompleteQueryResult.data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ selected: { value, label } }) => (\n\t\t\t\t<Option key={value} label={label.name} avatar={<RoomAvatar size={Options.AvatarSize} room={{ _id: value, ...label }} />} />\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option\n\t\t\t\t\tkey={value}\n\t\t\t\t\t{...props}\n\t\t\t\t\tlabel={label.name}\n\t\t\t\t\tavatar={<RoomAvatar size={Options.AvatarSize} room={{ _id: value, ...label }} />}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoComplete);\n",null],"names":["_extends","_objectSpread","_objectWithoutProperties","AutoComplete","Option","Options","useEndpoint","useQuery","React","memo","useMemo","useState","RoomAvatar","module","default","link","v","exportDefault","_ref","value","onChange","props","_excluded","filter","setFilter","performRoomSearch","roomAutocompleteQueryResult","selector","JSON","stringify","name","options","_roomAutocompleteQuer","_roomAutocompleteQuer2","data","items","map","_ref2","_id","fname","avatarETag","t","label","type","createElement","renderSelected","_ref3","selected","key","avatar","size","AvatarSize","room","renderItem","_ref4","_excluded2"],"mappings":"2BAAAA,EAAsEC,EAAAC,EAAtEC,EAASC,EAAcC,EAA+CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,iDAA7DC,EAAAA,IAAc,CAAA,iCAAuB,CAAAC,QAAAA,CAAAA,EAAwBd,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,uCAAAA,CAAAC,QAAAA,CAAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAC,QAAAA,CAAAA,EAAAZ,EAAAA,CAAA,CAAA,EAAA,GAAvCW,EAAOE,IAAE,CAAA,wBAAM,CAAuBZ,aAACa,CAAA,EAAAb,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAP,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAN,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,QAAAA,CAAAC,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wDAAAA,CAAAC,QAAAA,CAAAA,EAAAF,EAAAA,CAAA,CAAA,EAAA,GAAtEC,EAAOI,aAAE,CAmDMR,EAzCUS,IAAyD,GAAxD,CAAEC,MAAAA,CAAK,CAAEC,SAAAA,CAAAA,CAA2C,CAAAF,EAA9BG,EAAKnB,EAAAgB,EAAAI,GAC9C,CAACC,EAAQC,EAAU,CAAGb,EAAS,IAE/Bc,EAAoBnB,EAAY,MAAO,qCAEvCoB,EAA8BnB,EAAS,CAAC,QAAS,QAASgB,EAAO,CAAE,IACxEE,EAAkB,CAAEE,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMP,MAAAA,EAAAA,EAAU,EAAE,EAAG,IAG/DQ,EAAUrB,EACf,KAAA,IAAAsB,EAAAC,EAAA,OAAA,AAII,OAJJD,CAAAA,EAAA,AACiC,OADjCC,CAAAA,EACCP,EAA4BQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhCA,EAAkCE,KAAK,CAACC,GAAG,CAACC,IAAA,GAAC,CAAEP,KAAAA,CAAI,CAAEQ,IAAAA,CAAG,CAAEC,MAAAA,CAAK,CAAEC,WAAAA,CAAU,CAAEC,EAAAA,CAAAA,CAAG,CAAAJ,EAAA,MAAM,CACrFlB,MAAOmB,EACPI,MAAO,CAAEZ,KAAMS,GAAST,EAAMU,WAAAA,EAAYG,KAAMF,CAAC,EACjD,EAAC,GAACT,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EACV,CAACN,EAA4BQ,IAAI,CAAC,EAGnC,OACC1B,EAAAoC,aAAA,CAACzC,EAAYH,EAAA,CAAA,EACRqB,EAAK,CACTF,MAAOA,EACPC,SAAUA,EACVG,OAAQA,EACRC,UAAWA,EACXqB,eAAgBC,IAAA,GAAC,CAAEC,SAAU,CAAE5B,MAAAA,CAAK,CAAEuB,MAAAA,CAAAA,CAAK,CAAI,CAAAI,EAAA,OAC9CtC,EAAAoC,aAAA,CAACxC,EAAM,CAAC4C,IAAK7B,EAAOuB,MAAOA,EAAMZ,IAAK,CAACmB,OAAQzC,EAAAoC,aAAA,CAAChC,EAAU,CAACsC,KAAM7C,EAAQ8C,UAAW,CAACC,KAAInD,EAAA,CAAIqC,IAAKnB,CAAK,EAAKuB,EAAQ,EAAI,EAAG,EAE5HW,WAAYC,IAAA,GAAC,CAAEnC,MAAAA,CAAK,CAAEuB,MAAAA,CAAAA,CAAiB,CAAAY,EAAPjC,EAAKnB,EAAAoD,EAAAC,GAAA,OACpC/C,EAAAoC,aAAA,CAACxC,EAAMJ,EAAA,CACNgD,IAAK7B,CAAM,EACPE,EAAK,CACTqB,MAAOA,EAAMZ,IAAK,CAClBmB,OAAQzC,EAAAoC,aAAA,CAAChC,EAAU,CAACsC,KAAM7C,EAAQ8C,UAAW,CAACC,KAAInD,EAAA,CAAIqC,IAAKnB,CAAK,EAAKuB,EAAQ,EAAI,GAChF,EAEHX,QAASA,CAAQ,GAGpB"}