)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/audit/components/AuditForm.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IAuditLog } from '@rocket.chat/core-typings';\nimport { Box, Field, FieldLabel, FieldRow, FieldError, TextInput, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport React from 'react';\nimport { useController } from 'react-hook-form';\n\nimport type { AuditFields } from '../hooks/useAuditForm';\nimport { useAuditForm } from '../hooks/useAuditForm';\nimport { useSendTelemetryMutation } from '../hooks/useSendTelemetryMutation';\nimport DateRangePicker from './forms/DateRangePicker';\nimport DirectTab from './tabs/DirectTab';\nimport OmnichannelTab from './tabs/OmnichannelTab';\nimport RoomsTab from './tabs/RoomsTab';\nimport UsersTab from './tabs/UsersTab';\n\ntype AuditFormProps = {\n\ttype: IAuditLog['fields']['type'];\n\tonSubmit?: (payload: { type: IAuditLog['fields']['type'] } & AuditFields) => void;\n};\n\nconst AuditForm = ({ type, onSubmit }: AuditFormProps) => {\n\tconst t = useTranslation();\n\n\tconst form = useAuditForm();\n\tconst { control, handleSubmit, register } = form;\n\n\tconst { field: dateRangeField, fieldState: dateRangeFieldState } = useController({ name: 'dateRange', control });\n\n\tconst sendTelemetryMutation = useSendTelemetryMutation();\n\n\tconst submit = () => {\n\t\tsendTelemetryMutation.mutate({\n\t\t\tparams: [{ eventName: 'updateCounter', settingsId: 'Message_Auditing_Apply_Count', timestamp: Date.now() }],\n\t\t});\n\n\t\tonSubmit?.({ type, ...form.getValues() });\n\t};\n\n\treturn (\n\t\t<form onSubmit={handleSubmit(submit)}>\n\t\t\t<Box display='flex' flexDirection='row' justifyContent='stretch' marginInline={-4}>\n\t\t\t\t<Field flexShrink={1} marginInline={4}>\n\t\t\t\t\t<FieldLabel>{t('Message')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<TextInput placeholder={t('Search')} {...register('msg')} />\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field flexShrink={1} marginInline={4}>\n\t\t\t\t\t<FieldLabel>{t('Date')}</FieldLabel>\n\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t<DateRangePicker value={dateRangeField.value} onChange={dateRangeField.onChange} display='flex' flexGrow={1} />\n\t\t\t\t\t\t{dateRangeFieldState.error?.type === 'required' && <FieldError>{t('The_field_is_required', t('Date'))}</FieldError>}\n\t\t\t\t\t\t{dateRangeFieldState.error?.type === 'validate' && <FieldError>{dateRangeFieldState.error.message}</FieldError>}\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Box>\n\t\t\t<Box display='flex' flexDirection='row' alignItems='flex-start'>\n\t\t\t\t{type === '' && <RoomsTab form={form} />}\n\t\t\t\t{type === 'u' && <UsersTab form={form} />}\n\t\t\t\t{type === 'd' && <DirectTab form={form} />}\n\t\t\t\t{type === 'l' && <OmnichannelTab form={form} />}\n\t\t\t\t<ButtonGroup align='end' flexShrink={0} marginBlockStart={28} marginInlineStart={8}>\n\t\t\t\t\t<Button secondary onClick={() => window.print()}>\n\t\t\t\t\t\t{t('Export')} {t('PDF')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button primary type='submit'>\n\t\t\t\t\t\t{t('Apply')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Box>\n\t\t</form>\n\t);\n};\n\nexport default AuditForm;\n",null],"names":["_extends","_objectSpread","Box","Field","FieldLabel","FieldRow","FieldError","TextInput","Button","useTranslation","React","useController","useAuditForm","useSendTelemetryMutation","DateRangePicker","DirectTab","OmnichannelTab","RoomsTab","UsersTab","module","link","default","v","ButtonGroup","exportDefault","_ref","_dateRangeFieldState$","_dateRangeFieldState$2","type","onSubmit","t","form","control","handleSubmit","register","field","dateRangeField","fieldState","dateRangeFieldState","name","sendTelemetryMutation","createElement","mutate","params","eventName","settingsId","timestamp","Date","now","getValues","display","flexDirection","justifyContent","marginInline","flexShrink","placeholder","value","onChange","flexGrow","error","message","alignItems","align","marginBlockStart","marginInlineStart","secondary","onClick","window","print","primary"],"mappings":"2BACAA,EAAuFC,EAAvFC,EAAOC,EAAOC,EAAOC,EAAYC,EAAUC,EAAYC,EAAAA,EAA8DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzGC,EAAOC,IAAE,CAAA,iCAAkC,CAAAC,QAAWC,CAAA,EAAAtB,EAAQsB,CAAA,CAAA,EAAA,GAAmBH,EAAAA,IAAAA,CAAuB,uCAAC,CAAAE,QAAAA,CAAAA,EAAApB,EAAAA,CAAA,CAAA,EAAA,GAA3CkB,EAAAA,IAAW,CAAA,wBAAQ,CAAAjB,IAAAA,CAAuB,EAACA,EAAAA,CAAA,EAAAC,MAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,WAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAe,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAJ,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAV,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAX,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAR,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAP,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAN,yBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,mBAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAE,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,kBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,IAArHC,EAAOK,aAAY,CAmBDC,IAAuC,IAAAC,EAAAC,EAAA,GAAtC,CAAEC,KAAAA,CAAI,CAAEC,SAAAA,CAAAA,CAA0B,CAAAJ,EAC9CK,EAAIrB,IAEJsB,EAAOnB,IACP,CAAEoB,QAAAA,CAAO,CAAEC,aAAAA,CAAY,CAAEC,SAAAA,CAAAA,CAAU,CAAGH,EAEtC,CAAEI,MAAOC,CAAc,CAAEC,WAAYC,CAAAA,CAAqB,CAAG3B,EAAc,CAAE4B,KAAM,YAAaP,QAAAA,CAAO,GAEvGQ,EAAwB3B,IAU9B,OACCH,EAAA+B,aAAA,CAAA,OAAA,CAAMZ,SAAUI,EATF,KACdO,EAAsBE,MAAM,CAAC,CAC5BC,OAAQ,CAAC,CAAEC,UAAW,gBAAiBC,WAAY,+BAAgCC,UAAWC,KAAKC,GAAG,EAAE,EAAE,GAG3GnB,MAAAA,GAAAA,EAAQ5B,EAAA,CAAK2B,KAAAA,CAAI,EAAKG,EAAKkB,SAAS,IACrC,EAGsC,EACpCvC,EAAA+B,aAAA,CAACvC,EAAG,CAACgD,QAAQ,OAAOC,cAAc,MAAMC,eAAe,UAAUC,aAAc,EAAG,EACjF3C,EAAA+B,aAAA,CAACtC,EAAK,CAACmD,WAAY,EAAGD,aAAc,CAAE,EACrC3C,EAAA+B,aAAA,CAACrC,EAAU,KAAE0B,EAAE,YACfpB,EAAA+B,aAAA,CAACpC,EAAQ,KACRK,EAAA+B,aAAA,CAAClC,EAASP,EAAA,CAACuD,YAAazB,EAAE,SAAU,EAAKI,EAAS,WAGpDxB,EAAA+B,aAAA,CAACtC,EAAK,CAACmD,WAAY,EAAGD,aAAc,CAAE,EACrC3C,EAAA+B,aAAA,CAACrC,EAAU,KAAE0B,EAAE,SACfpB,EAAA+B,aAAA,CAACpC,EAAQ,KACRK,EAAA+B,aAAA,CAAC3B,EAAe,CAAC0C,MAAOpB,EAAeoB,KAAM,CAACC,SAAUrB,EAAeqB,QAAS,CAACP,QAAQ,OAAOQ,SAAU,CAAE,GAC3G,CAAA,AAAyB,OAAzBhC,CAAAA,EAAAY,EAAoBqB,KAAK,AAALA,GAAKjC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAzBA,EAA2BE,IAAI,AAAJA,IAAS,YAAclB,EAAA+B,aAAA,CAACnC,EAAU,KAAEwB,EAAE,wBAAyBA,EAAE,UAC5F,CAAA,AAAyB,OAAzBH,CAAAA,EAAAW,EAAoBqB,KAAK,AAALA,GAAKhC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAzBA,EAA2BC,IAAI,AAAJA,IAAS,YAAclB,EAAA+B,aAAA,CAACnC,EAAU,KAAEgC,EAAoBqB,KAAK,CAACC,OAAO,KAIpGlD,EAAA+B,aAAA,CAACvC,EAAG,CAACgD,QAAQ,OAAOC,cAAc,MAAMU,WAAW,YAAY,EAC7DjC,AAAS,KAATA,GAAelB,EAAA+B,aAAA,CAACxB,EAAQ,CAACc,KAAMA,CAAK,GACpCH,AAAS,MAATA,GAAgBlB,EAAA+B,aAAA,CAACvB,EAAQ,CAACa,KAAMA,CAAK,GACrCH,AAAS,MAATA,GAAgBlB,EAAA+B,aAAA,CAAC1B,EAAS,CAACgB,KAAMA,CAAK,GACtCH,AAAS,MAATA,GAAgBlB,EAAA+B,aAAA,CAACzB,EAAc,CAACe,KAAMA,CAAK,GAC5CrB,EAAA+B,aAAA,CAAClB,EAAW,CAACuC,MAAM,MAAMR,WAAY,EAAGS,iBAAkB,GAAIC,kBAAmB,CAAE,EAClFtD,EAAA+B,aAAA,CAACjC,EAAM,CAACyD,UAAS,CAAA,EAACC,QAAS,IAAMC,OAAOC,KAAK,EAAG,EAC9CtC,EAAE,UAAW,IAACA,EAAE,QAElBpB,EAAA+B,aAAA,CAACjC,EAAM,CAAC6D,QAAO,CAAA,EAACzC,KAAK,QAAQ,EAC3BE,EAAE,YAMT"}