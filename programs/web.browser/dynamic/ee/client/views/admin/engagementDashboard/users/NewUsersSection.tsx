function module(e,t,a){let n,l,r,o,i,s,d,c,u,m,f,h,g,k,p,y,E,x,b;a.link("@nivo/bar",{ResponsiveBar(e){n=e}},0),a.link("@rocket.chat/fuselage",{Box(e){l=e},Flex(e){r=e},Skeleton(e){o=e},Tooltip(e){i=e}},1),a.link("@rocket.chat/fuselage-hooks",{useResizeObserver(e){s=e}},2),a.link("@rocket.chat/fuselage-tokens/colors.json",{default(e){d=e}},3),a.link("@rocket.chat/ui-contexts",{useTranslation(e){c=e}},4),a.link("moment",{default(e){u=e}},5),a.link("react",{default(e){m=e},useMemo(e){f=e}},6),a.link("../../../../../../client/components/dataView/CounterSet",{default(e){h=e}},7),a.link("../../../../../../client/hooks/useFormatDate",{useFormatDate(e){g=e}},8),a.link("../../../../components/dashboards/DownloadDataButton",{default(e){k=e}},9),a.link("../../../../components/dashboards/PeriodSelector",{default(e){p=e}},10),a.link("../../../../components/dashboards/usePeriodLabel",{usePeriodLabel(e){y=e}},11),a.link("../../../../components/dashboards/usePeriodSelectorState",{usePeriodSelectorState(e){E=e}},12),a.link("../EngagementDashboardCardFilter",{default(e){x=e}},13),a.link("./useNewUsers",{useNewUsers(e){b=e}},14),a.exportDefault(e=>{let{timezone:t}=e,[a,S]=E("last 7 days","last 30 days","last 90 days"),v=y(a),w="utc"===t,{data:D}=b({period:a,utc:w}),U=c(),M=g(),{ref:Y,contentBoxSize:{inlineSize:P=600}={}}=s(),B=Math.ceil(P/45),C=f(()=>{if(!D)return;let e=u(D.end).diff(D.start,"days")+1;if(e<=B||!B)return;let t=Array.from({length:e},(e,t)=>u(D.start).add(t,"days").format("YYYY-MM-DD")),a=Math.ceil(t.length/B);return t.reduce((e,t,n)=>((n+1)%a==0&&(e=[...e,t]),e),[])},[D,B]),[F,I,N,R,z]=f(()=>{if(!D)return[];let e=Array.from({length:u(D.end).diff(D.start,"days")+1},(e,t)=>({date:u(D.start).add(t,"days").format("YYYY-MM-DD"),newUsers:0}));for(let{day:t,users:a}of D.days){let n=w?u(t).utc().diff(D.start,"days"):u(t).diff(D.start,"days");n>=0&&(e[n].newUsers+=a)}return[D.period.count,D.period.variation,D.yesterday.count,D.yesterday.variation,e]},[D,w]);return m.createElement(m.Fragment,null,m.createElement(x,null,m.createElement(p,S),m.createElement(k,{attachmentName:"NewUsersSection_start_".concat(null==D?void 0:D.start,"_end_").concat(null==D?void 0:D.end),headers:["Date","New Users"],dataAvailable:!!D,dataExtractor:()=>null==z?void 0:z.map(e=>{let{date:t,newUsers:a}=e;return[t,a]})})),m.createElement(h,{counters:[{count:null!=F?F:m.createElement(o,{variant:"rect",width:"3ex",height:"1em"}),variation:null!=I?I:0,description:v},{count:null!=N?N:m.createElement(o,{variant:"rect",width:"3ex",height:"1em"}),variation:null!=R?R:0,description:U("Yesterday")}]}),m.createElement(r.Container,null,z?m.createElement(l,{style:{height:240}},m.createElement(r.Item,{align:"stretch",grow:1,shrink:0},m.createElement(l,{style:{position:"relative"},ref:Y},m.createElement(l,{style:{position:"absolute",width:"100%",height:"100%"}},m.createElement(n,{data:z,indexBy:"date",keys:["newUsers"],groupMode:"grouped",padding:.25,margin:{bottom:20,left:20,top:20},colors:[d.p500],enableLabel:!1,enableGridY:!1,axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:C,format:e=>u(e).format((null==z?void 0:z.length)===7?"dddd":"DD/MM")},axisLeft:{tickSize:0,tickPadding:4,tickRotation:0},animate:!0,motionConfig:"stiff",theme:{axis:{ticks:{text:{fill:d.n600,fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:"10px",fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"12px"}}}},tooltip:e=>{let{value:t,indexValue:a}=e;return m.createElement(i,null,U("Value_users",{value:t}),", ",M(a))}}))))):m.createElement(l,{ref:Y},m.createElement(o,{variant:"rect",height:240}))))})}
//# sourceMappingURL=/dynamic/ee/client/views/admin/engagementDashboard/users/fae8bfaa65c091d7c61ba1580041c9b42198e64c.map
