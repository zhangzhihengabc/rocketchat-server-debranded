function module(e,t,a){let n,o,l,r,i,s,d,u,c,m,f,g,y,h,p;a.link("@nivo/heatmap",{ResponsiveHeatMap(e){n=e}},0),a.link("@rocket.chat/fuselage",{Box(e){o=e},Flex(e){l=e},Skeleton(e){r=e},Tooltip(e){i=e}},1),a.link("@rocket.chat/fuselage-tokens/colors.json",{default(e){s=e}},2),a.link("@rocket.chat/ui-contexts",{useTranslation(e){d=e}},3),a.link("moment",{default(e){u=e}},4),a.link("react",{default(e){c=e},useMemo(e){m=e}},5),a.link("../../../../components/dashboards/DownloadDataButton",{default(e){f=e}},6),a.link("../../../../components/dashboards/PeriodSelector",{default(e){g=e}},7),a.link("../../../../components/dashboards/usePeriodSelectorState",{usePeriodSelectorState(e){y=e}},8),a.link("../EngagementDashboardCardFilter",{default(e){h=e}},9),a.link("./useUsersByTimeOfTheDay",{useUsersByTimeOfTheDay(e){p=e}},10),a.exportDefault(e=>{let{timezone:t}=e,[a,S]=y("last 7 days","last 30 days","last 90 days"),k="utc"===t,{data:x}=p({period:a,utc:k}),b=d(),[v,E]=m(()=>{if(!x)return[];let e=Array.from({length:k?u(x.end).diff(x.start,"days")+1:u(x.end).diff(x.start,"days")-1},(e,t)=>k?u.utc(x.start).endOf("day").add(t,"days"):u(x.start).endOf("day").add(t+1,"days")),t=Array.from({length:24},(t,a)=>({id:String(a),data:e.map(e=>({x:e.toISOString(),y:0}))})),a=u().utcOffset()/60;for(let{users:e,hour:n,day:o,month:l,year:r}of x.week){let i=k?u.utc([r,l-1,o,n]):u([r,l-1,o,n]).add(a,"hours");if(k||!i.isSame(x.end)&&!i.clone().startOf("day").isSame(x.start)){let a=t[i.hour()].data.find(e=>e.x===i.endOf("day").toISOString());a&&(a.y+=e)}}return[e.map(e=>e.toISOString()),t]},[x,k]);return c.createElement(c.Fragment,null,c.createElement(h,null,c.createElement(g,S),c.createElement(f,{attachmentName:"UsersByTimeOfTheDaySection_start_".concat(null==x?void 0:x.start,"_end_").concat(null==x?void 0:x.end),headers:["Date","Users"],dataAvailable:!!x,dataExtractor:()=>{var e,t,a;return null==x?void 0:null===(e=x.week)||void 0===e?void 0:null===(t=e.map(e=>{let{users:t,hour:a,day:n,month:o,year:l}=e;return{date:u([l,o-1,n,a,0,0,0]),users:t}}))||void 0===t?void 0:null===(a=t.sort((e,t)=>e.date.diff(t.date)))||void 0===a?void 0:a.map(e=>{let{date:t,users:a}=e;return[t.toISOString(),a]})}})),E?c.createElement(o,{display:"flex",style:{height:696}},c.createElement(l.Item,{align:"stretch",grow:1,shrink:0},c.createElement(o,{style:{position:"relative"}},c.createElement(o,{style:{position:"absolute",width:"100%",height:"100%"}},c.createElement(n,{data:E,xInnerPadding:.1,yInnerPadding:.25,margin:{left:60,bottom:20},colors:{type:"quantize",colors:[s.b100,s.b200,s.b300,s.b400,s.b500,s.b600,s.b700]},emptyColor:"transparent",enableLabels:!1,axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,format:e=>(null==v?void 0:v.length)===7?u(e).format("dddd"):""},axisLeft:{tickSize:0,tickPadding:4,tickRotation:0,format:e=>u().set({hour:parseInt(e,10),minute:0,second:0}).format("LT")},hoverTarget:"cell",animate:v&&v.length<=7,motionConfig:"stiff",theme:{axis:{ticks:{text:{fill:s.n600,fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:10,fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:s.n900,boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},tooltip:e=>{let{cell:t}=e;return c.createElement(i,null,b("Value_users",{value:t.data.y}))}}))))):c.createElement(r,{variant:"rect",height:696}))})}
//# sourceMappingURL=/dynamic/ee/client/views/admin/engagementDashboard/users/f9276b4323fc4241b547d046641fa8e1acfc4b3e.map
