)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ContentForDays.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ResponsiveBar } from '@nivo/bar';\nimport { Box, Flex, IconButton, Margins, Skeleton } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useWeeklyChatActivity } from './useWeeklyChatActivity';\n\ntype ContentForDaysProps = {\n\tdisplacement: number;\n\tonPreviousDateClick: () => void;\n\tonNextDateClick: () => void;\n\ttimezone: 'utc' | 'local';\n};\n\nconst ContentForDays = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForDaysProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useWeeklyChatActivity({ displacement, utc });\n\n\tconst formattedCurrentDate = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst endOfWeek = moment(data.day);\n\t\tconst startOfWeek = moment(data.day).subtract(6, 'days');\n\t\treturn `${startOfWeek.format('L')} - ${endOfWeek.format('L')}`;\n\t}, [data]);\n\n\tconst values = useMemo(\n\t\t() =>\n\t\t\tdata?.month\n\t\t\t\t?.map(({ users, day, month, year }) => ({\n\t\t\t\t\tusers,\n\t\t\t\t\tday: moment({ year, month: month - 1, day }),\n\t\t\t\t}))\n\t\t\t\t?.sort(({ day: a }, { day: b }) => a.diff(b))\n\t\t\t\t?.map(({ users, day }) => ({ users, day: String(day.valueOf()) })) ?? [],\n\t\t[data],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Flex.Container alignItems='center' justifyContent='center'>\n\t\t\t\t<Box>\n\t\t\t\t\t<IconButton icon='chevron-down' verticalAlign='middle' small onClick={onPreviousDateClick} />\n\t\t\t\t\t<Flex.Item basis='50%'>\n\t\t\t\t\t\t<Margins inline={8}>\n\t\t\t\t\t\t\t<Box is='span' textAlign='center'>\n\t\t\t\t\t\t\t\t{formattedCurrentDate}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t<IconButton icon='chevron-down' small disabled={displacement === 0} onClick={onNextDateClick} />\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t\t<Flex.Container>\n\t\t\t\t{data ? (\n\t\t\t\t\t<Box height={196}>\n\t\t\t\t\t\t<Flex.Item align='stretch' grow={1} shrink={0}>\n\t\t\t\t\t\t\t<Box position='relative'>\n\t\t\t\t\t\t\t\t<Box position='absolute' width='full' height='full'>\n\t\t\t\t\t\t\t\t\t<ResponsiveBar\n\t\t\t\t\t\t\t\t\t\tdata={values}\n\t\t\t\t\t\t\t\t\t\tindexBy='day'\n\t\t\t\t\t\t\t\t\t\tkeys={['users']}\n\t\t\t\t\t\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\t\t\t\t\t\tpadding={0.25}\n\t\t\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\tbottom: 20,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcolors={[\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\tcolors.p500,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tenableLabel={false}\n\t\t\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\t\t\taxisTop={null}\n\t\t\t\t\t\t\t\t\t\taxisRight={null}\n\t\t\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 'every 3 days',\n\t\t\t\t\t\t\t\t\t\t\tformat: (timestamp): string => moment(parseInt(timestamp, 10)).format('L'),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taxisLeft={null}\n\t\t\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill: colors.n600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t) : (\n\t\t\t\t\t<Skeleton variant='rect' height={196} />\n\t\t\t\t)}\n\t\t\t</Flex.Container>\n\t\t</>\n\t);\n};\n\nexport default ContentForDays;\n",null],"names":["ResponsiveBar","Box","Flex","IconButton","Margins","Skeleton","colors","moment","React","useMemo","useWeeklyChatActivity","module","link","default","exportDefault","_ref","displacement","onPreviousDateClick","onNextDateClick","timezone","data","utc","formattedCurrentDate","endOfWeek","day","startOfWeek","subtract","concat","format","values","_data$month$map$sort$","_data$month","_data$month$map","_data$month$map$sort","month","map","_ref2","users","year","sort","_ref3","_ref4","a","b","diff","_ref5","String","valueOf","createElement","Fragment","Container","alignItems","justifyContent","icon","verticalAlign","small","onClick","Item","basis","inline","is","textAlign","disabled","height","align","grow","shrink","position","width","indexBy","keys","groupMode","padding","margin","bottom","p500","enableLabel","enableGridY","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","tickValues","timestamp","parseInt","axisLeft","animate","motionConfig","theme","axis","ticks","text","fill","n600","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","variant"],"mappings":"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"}