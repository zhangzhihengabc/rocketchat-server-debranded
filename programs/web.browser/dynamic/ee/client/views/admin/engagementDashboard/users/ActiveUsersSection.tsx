function module(e,t,a){let n,l,r,i,o,c,s,d,u,m,y,h,g,f,p,k;a.link("@nivo/line",{ResponsiveLine(e){n=e}},0),a.link("@rocket.chat/fuselage",{Box(e){l=e},Flex(e){r=e},Skeleton(e){i=e},Tile(e){o=e}},1),a.link("@rocket.chat/fuselage-tokens/colors.json",{default(e){c=e}},2),a.link("@rocket.chat/ui-contexts",{useTranslation(e){s=e}},3),a.link("moment",{default(e){d=e}},4),a.link("react",{default(e){u=e},useMemo(e){m=e}},5),a.link("../../../../../../client/components/dataView/CounterSet",{default(e){y=e}},6),a.link("../../../../../../client/hooks/useFormatDate",{useFormatDate(e){h=e}},7),a.link("../../../../components/dashboards/DownloadDataButton",{default(e){g=e}},8),a.link("../EngagementDashboardCardFilter",{default(e){f=e}},9),a.link("../dataView/LegendSymbol",{default(e){p=e}},10),a.link("./useActiveUsers",{useActiveUsers(e){k=e}},11),a.exportDefault(e=>{let{timezone:t}=e,a="utc"===t,{data:E}=k({utc:a}),[v,x,b,S,A,U,_=[],w=[],D=[]]=m(()=>{if(!E)return[];let e=e=>({x:d(E.start).add(e,"days").toDate(),y:0}),t=()=>Array.from({length:d(E.end).diff(E.start,"days")+1},(t,a)=>e(a)),n=t(),l=e(-1),r=t(),i=e(-1),o=t(),c=e(-1),s=E.month.reduce((e,t)=>{let l=a?d.utc({year:t.year,month:t.month-1,day:t.day}).endOf("day"):d({year:t.year,month:t.month-1,day:t.day}).endOf("day"),r=l.diff(E.start,"days");return r>=0&&(e[r]=t.usersList,n[r].y=t.users),e},{}),u=(e,t,a,n)=>{let l=new Set;for(let n=t;a>0;n--,a--)e[n]&&e[n].forEach(e=>l.add(e));n[t].y=l.size};for(let e=0;e<30;e++)u(s,e,7,r),u(s,e,30,o);return i.y=r[28].y,c.y=o[28].y,l.y=n[28].y,[n[n.length-1].y,n[n.length-1].y-l.y,r[r.length-1].y,r[r.length-1].y-i.y,o[o.length-1].y,o[o.length-1].y-c.y,n,r,o]},[E,a]),F=h(),C=s();return u.createElement(u.Fragment,null,u.createElement(f,null,u.createElement(g,{attachmentName:"ActiveUsersSection_start_".concat(null==E?void 0:E.start,"_end_").concat(null==E?void 0:E.end),headers:["Date","DAU","WAU","MAU"],dataAvailable:!!E,dataExtractor:()=>{let e=[];for(let t=0;t<30;t++)e.push([_[t].x.toISOString(),_[t].y,w[t].y,D[t].y]);return e}})),u.createElement(y,{counters:[{count:null!=v?v:u.createElement(i,{variant:"rect",width:"3ex",height:"1em"}),variation:null!=x?x:0,description:u.createElement(u.Fragment,null,u.createElement(p,{color:c.b200})," ",C("Daily_Active_Users"))},{count:null!=b?b:u.createElement(i,{variant:"rect",width:"3ex",height:"1em"}),variation:null!=S?S:0,description:u.createElement(u.Fragment,null,u.createElement(p,{color:c.b300})," ",C("Weekly_Active_Users"))},{count:null!=A?A:u.createElement(i,{variant:"rect",width:"3ex",height:"1em"}),variation:null!=U?U:0,description:u.createElement(u.Fragment,null,u.createElement(p,{color:c.p500})," ",C("Monthly_Active_Users"))}]}),u.createElement(r.Container,null,E?u.createElement(l,{style:{height:240}},u.createElement(r.Item,{align:"stretch",grow:1,shrink:0},u.createElement(l,{style:{position:"relative"}},u.createElement(l,{style:{position:"absolute",width:"100%",height:"100%"}},u.createElement(n,{data:[{id:"dau",data:_},{id:"wau",data:w},{id:"mau",data:D}],xScale:{type:"time",format:"native",precision:"day"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!0},enableGridX:!1,enableGridY:!1,enablePoints:!1,useMesh:!0,enableArea:!0,areaOpacity:1,enableCrosshair:!0,crosshairType:"bottom",margin:{top:0,bottom:20,right:0,left:40},colors:[c.b200,c.b300,c.b500],axisLeft:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:3},axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:"every 3 days",format:e=>d(e).format(7===_.length?"dddd":"L")},animate:!0,motionConfig:"stiff",theme:{axis:{ticks:{text:{fill:"#9EA2A8",fontFamily:'Inter, -apple-system, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Meiryo UI", Arial, sans-serif',fontSize:"10px",fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"12px"}}},tooltip:{container:{backgroundColor:"#1F2329",boxShadow:"0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)",borderRadius:2}}},enableSlices:"x",sliceTooltip:e=>{let{slice:{points:t}}=e;return u.createElement(o,{elevation:"2"},u.createElement(l,null,u.createElement(l,null,F(t[0].data.x)),t.map(e=>{let{serieId:t,data:{y:a}}=e;return u.createElement(l,{key:t,fontScale:"p1m"},u.createElement(l,null,"dau"===t&&C("DAU_value",{value:a})||"wau"===t&&C("WAU_value",{value:a})||"mau"===t&&C("MAU_value",{value:a})))})))}}))))):u.createElement(i,{variant:"rect",height:240})))})}
//# sourceMappingURL=/dynamic/ee/client/views/admin/engagementDashboard/users/576c5849c3a2c431de0cadcdee05f126672bc2ee.map
