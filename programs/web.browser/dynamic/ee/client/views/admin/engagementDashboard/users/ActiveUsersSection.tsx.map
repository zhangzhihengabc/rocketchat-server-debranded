)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ActiveUsersSection.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ResponsiveLine } from '@nivo/line';\nimport { Box, Flex, Skeleton, Tile } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport CounterSet from '../../../../../../client/components/dataView/CounterSet';\nimport { useFormatDate } from '../../../../../../client/hooks/useFormatDate';\nimport DownloadDataButton from '../../../../components/dashboards/DownloadDataButton';\nimport EngagementDashboardCardFilter from '../EngagementDashboardCardFilter';\nimport LegendSymbol from '../dataView/LegendSymbol';\nimport { useActiveUsers } from './useActiveUsers';\n\ntype ActiveUsersSectionProps = {\n\ttimezone: 'utc' | 'local';\n};\n\nconst ActiveUsersSection = ({ timezone }: ActiveUsersSectionProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useActiveUsers({ utc });\n\n\tconst [\n\t\tcountDailyActiveUsers,\n\t\tdiffDailyActiveUsers,\n\t\tcountWeeklyActiveUsers,\n\t\tdiffWeeklyActiveUsers,\n\t\tcountMonthlyActiveUsers,\n\t\tdiffMonthlyActiveUsers,\n\t\tdauValues = [],\n\t\twauValues = [],\n\t\tmauValues = [],\n\t] = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst createPoint = (i: number): { x: Date; y: number } => ({\n\t\t\tx: moment(data.start).add(i, 'days').toDate(),\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst createPoints = (): { x: Date; y: number }[] =>\n\t\t\tArray.from({ length: moment(data.end).diff(data.start, 'days') + 1 }, (_, i) => createPoint(i));\n\n\t\tconst dauValues = createPoints();\n\t\tconst prevDauValue = createPoint(-1);\n\t\tconst wauValues = createPoints();\n\t\tconst prevWauValue = createPoint(-1);\n\t\tconst mauValues = createPoints();\n\t\tconst prevMauValue = createPoint(-1);\n\n\t\tconst usersListsMap = data.month.reduce<{ [x: number]: string[] }>((map, dayData) => {\n\t\t\tconst date = utc\n\t\t\t\t? moment.utc({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day')\n\t\t\t\t: moment({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day');\n\t\t\tconst dateOffset = date.diff(data.start, 'days');\n\t\t\tif (dateOffset >= 0) {\n\t\t\t\tmap[dateOffset] = dayData.usersList;\n\t\t\t\tdauValues[dateOffset].y = dayData.users;\n\t\t\t}\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tconst distributeValueOverPoints = (\n\t\t\tusersListsMap: { [x: number]: string[] },\n\t\t\tdateOffset: number,\n\t\t\tcount: number,\n\t\t\tarray: { x: Date; y: number }[],\n\t\t): void => {\n\t\t\tconst usersSet = new Set();\n\t\t\tfor (let k = dateOffset; count > 0; k--, count--) {\n\t\t\t\tif (usersListsMap[k]) {\n\t\t\t\t\tusersListsMap[k].forEach((userId) => usersSet.add(userId));\n\t\t\t\t}\n\t\t\t}\n\t\t\tarray[dateOffset].y = usersSet.size;\n\t\t};\n\n\t\tfor (let i = 0; i < 30; i++) {\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 7, wauValues);\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 30, mauValues);\n\t\t}\n\t\tprevWauValue.y = wauValues[28].y;\n\t\tprevMauValue.y = mauValues[28].y;\n\t\tprevDauValue.y = dauValues[28].y;\n\n\t\treturn [\n\t\t\tdauValues[dauValues.length - 1].y,\n\t\t\tdauValues[dauValues.length - 1].y - prevDauValue.y,\n\t\t\twauValues[wauValues.length - 1].y,\n\t\t\twauValues[wauValues.length - 1].y - prevWauValue.y,\n\t\t\tmauValues[mauValues.length - 1].y,\n\t\t\tmauValues[mauValues.length - 1].y - prevMauValue.y,\n\t\t\tdauValues,\n\t\t\twauValues,\n\t\t\tmauValues,\n\t\t];\n\t}, [data, utc]);\n\n\tconst formatDate = useFormatDate();\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<>\n\t\t\t<EngagementDashboardCardFilter>\n\t\t\t\t<DownloadDataButton\n\t\t\t\t\tattachmentName={`ActiveUsersSection_start_${data?.start}_end_${data?.end}`}\n\t\t\t\t\theaders={['Date', 'DAU', 'WAU', 'MAU']}\n\t\t\t\t\tdataAvailable={!!data}\n\t\t\t\t\tdataExtractor={(): unknown[][] | undefined => {\n\t\t\t\t\t\tconst values = [];\n\n\t\t\t\t\t\tfor (let i = 0; i < 30; i++) {\n\t\t\t\t\t\t\tvalues.push([dauValues[i].x.toISOString(), dauValues[i].y, wauValues[i].y, mauValues[i].y]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</EngagementDashboardCardFilter>\n\t\t\t<CounterSet\n\t\t\t\tcounters={[\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countDailyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffDailyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b200} /> {t('Daily_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countWeeklyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffWeeklyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b300} /> {t('Weekly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countMonthlyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffMonthlyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.p500} /> {t('Monthly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t\t<Flex.Container>\n\t\t\t\t{data ? (\n\t\t\t\t\t<Box style={{ height: 240 }}>\n\t\t\t\t\t\t<Flex.Item align='stretch' grow={1} shrink={0}>\n\t\t\t\t\t\t\t<Box style={{ position: 'relative' }}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ResponsiveLine\n\t\t\t\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'dau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: dauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'wau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: wauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'mau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: mauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\txScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'time',\n\t\t\t\t\t\t\t\t\t\t\tformat: 'native',\n\t\t\t\t\t\t\t\t\t\t\tprecision: 'day',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\txFormat='time:%Y-%m-%d'\n\t\t\t\t\t\t\t\t\t\tyScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'linear',\n\t\t\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableGridX={false}\n\t\t\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\t\t\tenablePoints={false}\n\t\t\t\t\t\t\t\t\t\tuseMesh\n\t\t\t\t\t\t\t\t\t\tenableArea\n\t\t\t\t\t\t\t\t\t\tareaOpacity={1}\n\t\t\t\t\t\t\t\t\t\tenableCrosshair\n\t\t\t\t\t\t\t\t\t\tcrosshairType='bottom'\n\t\t\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\tbottom: 20,\n\t\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t\tleft: 40,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcolors={[colors.b200, colors.b300, colors.b500]}\n\t\t\t\t\t\t\t\t\t\taxisLeft={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 3,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 'every 3 days',\n\t\t\t\t\t\t\t\t\t\t\tformat: (date): string => moment(date).format(dauValues.length === 7 ? 'dddd' : 'L'),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill: '#9EA2A8',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#1F2329',\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: '0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)',\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableSlices='x'\n\t\t\t\t\t\t\t\t\t\tsliceTooltip={({ slice: { points } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t\t<Tile elevation='2'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>{formatDate(points[0].data.x)}</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{points.map(({ serieId, data: { y: activeUsers } }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box key={serieId} fontScale='p1m'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(serieId === 'dau' && t('DAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'wau' && t('WAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'mau' && t('MAU_value', { value: activeUsers }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Tile>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t) : (\n\t\t\t\t\t<Skeleton variant='rect' height={240} />\n\t\t\t\t)}\n\t\t\t</Flex.Container>\n\t\t</>\n\t);\n};\n\nexport default ActiveUsersSection;\n",null],"names":["ResponsiveLine","Box","Flex","Skeleton","Tile","colors","useTranslation","moment","React","useMemo","CounterSet","useFormatDate","DownloadDataButton","EngagementDashboardCardFilter","LegendSymbol","useActiveUsers","module","link","default","exportDefault","_ref","timezone","utc","data","countDailyActiveUsers","diffDailyActiveUsers","countWeeklyActiveUsers","diffWeeklyActiveUsers","countMonthlyActiveUsers","diffMonthlyActiveUsers","dauValues","wauValues","mauValues","createPoint","i","x","start","add","toDate","y","createPoints","Array","from","length","end","diff","_","prevDauValue","prevWauValue","prevMauValue","usersListsMap","month","reduce","map","dayData","date","year","day","endOf","dateOffset","usersList","users","distributeValueOverPoints","count","array","usersSet","Set","k","forEach","userId","size","formatDate","t","createElement","Fragment","attachmentName","concat","headers","dataAvailable","dataExtractor","values","push","toISOString","counters","variant","width","height","variation","description","color","b200","b300","p500","Container","style","Item","align","grow","shrink","position","id","xScale","type","format","precision","xFormat","yScale","stacked","enableGridX","enableGridY","enablePoints","useMesh","enableArea","areaOpacity","enableCrosshair","crosshairType","margin","top","bottom","right","left","b500","axisLeft","tickSize","tickPadding","tickRotation","tickValues","axisBottom","animate","motionConfig","theme","axis","ticks","text","fill","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","tooltip","container","backgroundColor","boxShadow","borderRadius","enableSlices","sliceTooltip","_ref2","slice","points","elevation","_ref3","serieId","activeUsers","key","fontScale","value"],"mappings":"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"}