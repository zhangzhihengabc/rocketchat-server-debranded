)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ContentForHours.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { ResponsiveBar } from '@nivo/bar';\nimport { Box, Button, Chevron, Skeleton, Tooltip } from '@rocket.chat/fuselage';\nimport { useBreakpoints } from '@rocket.chat/fuselage-hooks';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { useHourlyChatActivity } from './useHourlyChatActivity';\n\ntype ContentForHoursProps = {\n\tdisplacement: number;\n\tonPreviousDateClick: () => void;\n\tonNextDateClick: () => void;\n\ttimezone: 'utc' | 'local';\n};\n\nconst ContentForHours = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForHoursProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useHourlyChatActivity({ displacement, utc });\n\n\tconst t = useTranslation();\n\tconst isLgScreen = useBreakpoints().includes('lg');\n\n\tconst values = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst divider = 2;\n\t\tconst values = Array.from({ length: 24 / divider }, (_, i) => ({\n\t\t\thour: String(divider * i),\n\t\t\tusers: 0,\n\t\t}));\n\n\t\tfor (const { hour, users } of data?.hours ?? []) {\n\t\t\tconst i = Math.floor(hour / divider);\n\t\t\tvalues[i] = values[i] || { hour: String(divider * i), users: 0 };\n\t\t\tvalues[i].users += users;\n\t\t}\n\n\t\treturn values;\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<Box display='flex' alignItems='center' justifyContent='center'>\n\t\t\t\t<Button square small onClick={onPreviousDateClick}>\n\t\t\t\t\t<Chevron left size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t\t<Box mi={8} flexBasis='25%' is='span' style={{ textAlign: 'center' }}>\n\t\t\t\t\t{data ? moment(data.day).format(displacement < 7 ? 'dddd' : 'L') : null}\n\t\t\t\t</Box>\n\t\t\t\t<Button square small disabled={displacement === 0} onClick={onNextDateClick}>\n\t\t\t\t\t<Chevron right size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t\t{data ? (\n\t\t\t\t<Box display='flex' height='196px'>\n\t\t\t\t\t<Box alignSelf='stretch' flexGrow={1} flexShrink={0} position='relative'>\n\t\t\t\t\t\t<Box position='absolute' width='100%' height='100%'>\n\t\t\t\t\t\t\t<ResponsiveBar\n\t\t\t\t\t\t\t\tdata={values}\n\t\t\t\t\t\t\t\tindexBy='hour'\n\t\t\t\t\t\t\t\tkeys={['users']}\n\t\t\t\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\t\t\t\tpadding={0.25}\n\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tbottom: 30,\n\t\t\t\t\t\t\t\t\tright: 5,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolors={[\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tcolors.p500,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tenableLabel={false}\n\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\taxisTop={null}\n\t\t\t\t\t\t\t\taxisRight={null}\n\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\ttickRotation: isLgScreen ? 0 : 25,\n\t\t\t\t\t\t\t\t\ttickValues: 'every 2 hours',\n\t\t\t\t\t\t\t\t\tformat: (hour): string => moment().set({ hour, minute: 0, second: 0 }).format('LT'),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\taxisLeft={null}\n\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\tfill: colors.n600,\n\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttooltip={({ value }) => <Tooltip>{t('Value_users', { value })}</Tooltip>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Skeleton variant='rect' height={196} />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ContentForHours;\n",null],"names":["ResponsiveBar","Box","Button","Chevron","Skeleton","Tooltip","useBreakpoints","colors","useTranslation","moment","React","useMemo","useHourlyChatActivity","module","link","default","exportDefault","_ref","displacement","onPreviousDateClick","onNextDateClick","timezone","data","utc","t","isLgScreen","includes","values","Array","from","length","_","i","hour","String","divider","users","_data$hours","hours","Math","floor","createElement","Fragment","display","alignItems","justifyContent","square","small","onClick","left","size","style","verticalAlign","mi","flexBasis","is","textAlign","day","format","disabled","right","height","alignSelf","flexGrow","flexShrink","position","width","indexBy","keys","groupMode","padding","margin","bottom","p500","enableLabel","enableGridY","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","tickValues","set","minute","second","axisLeft","animate","motionConfig","theme","axis","ticks","text","fill","n600","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","tooltip","_ref2","value","variant"],"mappings":"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"}