)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/account/deviceManagement/DeviceManagementAccountTable/DeviceManagementAccountTable.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { GenericTableHeaderCell } from '../../../../../../client/components/GenericTable';\nimport { usePagination } from '../../../../../../client/components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../../../client/components/GenericTable/hooks/useSort';\nimport { useEndpointData } from '../../../../../../client/hooks/useEndpointData';\nimport DeviceManagementTable from '../../../../components/deviceManagement/DeviceManagementTable';\nimport DeviceManagementAccountRow from './DeviceManagementAccountRow';\n\nconst sortMapping = {\n\tclient: 'device.name',\n\tos: 'device.os.name',\n\tloginAt: 'loginAt',\n};\n\nconst DeviceManagementAccountTable = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst { current, itemsPerPage, setCurrent, setItemsPerPage, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'client' | 'os' | 'loginAt'>('loginAt');\n\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\tsort: JSON.stringify({ [sortMapping[sortBy]]: sortDirection === 'asc' ? 1 : -1 }),\n\t\t\tcount: itemsPerPage,\n\t\t\toffset: current,\n\t\t}),\n\t\t[itemsPerPage, current, sortBy, sortDirection],\n\t);\n\n\tconst { value: data, phase, error, reload } = useEndpointData('/v1/sessions/list', { params: query });\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\tconst headers = useMemo(\n\t\t() => [\n\t\t\t<GenericTableHeaderCell key='client' direction={sortDirection} active={sortBy === 'client'} onClick={setSort} sort='client'>\n\t\t\t\t{t('Client')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='os' direction={sortDirection} active={sortBy === 'os'} onClick={setSort} sort='os'>\n\t\t\t\t{t('OS')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='loginAt' direction={sortDirection} active={sortBy === 'loginAt'} onClick={setSort} sort='loginAt'>\n\t\t\t\t{t('Last_login')}\n\t\t\t</GenericTableHeaderCell>,\n\t\t\tmediaQuery && <GenericTableHeaderCell key='_id'>{t('Device_ID')}</GenericTableHeaderCell>,\n\t\t\t<GenericTableHeaderCell key='logout' />,\n\t\t],\n\t\t[t, mediaQuery, sortDirection, sortBy, setSort],\n\t);\n\n\treturn (\n\t\t<DeviceManagementTable\n\t\t\tdata={data}\n\t\t\tphase={phase}\n\t\t\terror={error}\n\t\t\treload={reload}\n\t\t\theaders={headers}\n\t\t\trenderRow={(session): ReactElement => (\n\t\t\t\t<DeviceManagementAccountRow\n\t\t\t\t\tkey={session._id}\n\t\t\t\t\t_id={session._id}\n\t\t\t\t\tdeviceName={session.device?.name}\n\t\t\t\t\tdeviceType={session.device?.type}\n\t\t\t\t\tdeviceOSName={session.device?.os.name}\n\t\t\t\t\tloginAt={session.loginAt}\n\t\t\t\t\tonReload={reload}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\tcurrent={current}\n\t\t\titemsPerPage={itemsPerPage}\n\t\t\tsetCurrent={setCurrent}\n\t\t\tsetItemsPerPage={setItemsPerPage}\n\t\t\tpaginationProps={paginationProps}\n\t\t/>\n\t);\n};\n\nexport default DeviceManagementAccountTable;\n",null],"names":["_objectWithoutProperties","useMediaQuery","useTranslation","React","useMemo","GenericTableHeaderCell","usePagination","useSort","useEndpointData","DeviceManagementTable","DeviceManagementAccountRow","module","link","default","sortMapping","client","os","loginAt","exportDefault","t","_usePagination","current","itemsPerPage","setCurrent","setItemsPerPage","paginationProps","_excluded","sortBy","sortDirection","setSort","query","sort","JSON","stringify","count","offset","value","data","phase","error","reload","params","mediaQuery","headers","createElement","key","direction","active","onClick","renderRow","session","_session$device","_session$device2","_session$device3","_id","deviceName","device","name","deviceType","type","deviceOSName","onReload"],"mappings":"2BAAAA,EAAAC,EAA4DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,kEAApCC,EAAMC,IAAA,CAAA,iDAA8B,CAAAC,QAAAA,CAAAA,EAAAb,EAAAA,CAAA,CAAA,EAAA,GAAnDW,EAAeC,IAAA,CAAM,8BAA8B,CAAAX,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAT,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAV,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,mDAAAA,CAAAN,uBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,uEAAAA,CAAAL,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,iEAAAA,CAAAJ,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAH,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gEAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,+BAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAY5D,IAAMI,EAAc,CACnBC,OAAQ,cACRC,GAAI,iBACJC,QAAS,WAfVN,EAAOO,aAAE,CAkB4B,KACpC,IAAMC,EAAIjB,IACVkB,EAAmFd,IAA7E,CAAEe,QAAAA,CAAO,CAAEC,aAAAA,CAAY,CAAEC,WAAAA,CAAU,CAAEC,gBAAAA,CAAAA,CAAqC,CAAAJ,EAAjBK,EAAezB,EAAAoB,EAAAM,GACxE,CAAEC,OAAAA,CAAM,CAAEC,cAAAA,CAAa,CAAEC,QAAAA,CAAAA,CAAS,CAAGtB,EAAqC,WAE1EuB,EAAQ1B,EACb,IAAO,CAAA,CACN2B,KAAMC,KAAKC,SAAS,CAAC,CAAE,CAACnB,CAAW,CAACa,EAAO,CAAA,CAAGC,AAAkB,QAAlBA,EAA0B,EAAI,EAAE,GAC9EM,MAAOZ,EACPa,OAAQd,IAET,CAACC,EAAcD,EAASM,EAAQC,EAAc,EAGzC,CAAEQ,MAAOC,CAAI,CAAEC,MAAAA,CAAK,CAAEC,MAAAA,CAAK,CAAEC,OAAAA,CAAAA,CAAQ,CAAGhC,EAAgB,oBAAqB,CAAEiC,OAAQX,CAAK,GAE5FY,EAAazC,EAAc,uBAE3B0C,EAAUvC,EACf,IAAM,CACLD,EAAAyC,aAAA,CAACvC,EAAsB,CAACwC,IAAI,SAASC,UAAWlB,EAAemB,OAAQpB,AAAW,WAAXA,EAAqBqB,QAASnB,EAASE,KAAK,QAAQ,EACzHZ,EAAE,WAEJhB,EAAAyC,aAAA,CAACvC,EAAsB,CAACwC,IAAI,KAAKC,UAAWlB,EAAemB,OAAQpB,AAAW,OAAXA,EAAiBqB,QAASnB,EAASE,KAAK,IAAI,EAC7GZ,EAAE,OAEJhB,EAAAyC,aAAA,CAACvC,EAAsB,CAACwC,IAAI,UAAUC,UAAWlB,EAAemB,OAAQpB,AAAW,YAAXA,EAAsBqB,QAASnB,EAASE,KAAK,SAAS,EAC5HZ,EAAE,eAEJuB,GAAcvC,EAAAyC,aAAA,CAACvC,EAAsB,CAACwC,IAAI,KAAK,EAAE1B,EAAE,cACnDhB,EAAAyC,aAAA,CAACvC,EAAsB,CAACwC,IAAI,QAAQ,GACpC,CACD,CAAC1B,EAAGuB,EAAYd,EAAeD,EAAQE,EAAQ,EAGhD,OACC1B,EAAAyC,aAAA,CAACnC,EAAqB,CACrB4B,KAAMA,EACNC,MAAOA,EACPC,MAAOA,EACPC,OAAQA,EACRG,QAASA,EACTM,UAAYC,IAAO,IAAAC,EAAAC,EAAAC,EAAA,OAClBlD,EAAAyC,aAAA,CAAClC,EAA0B,CAC1BmC,IAAKK,EAAQI,GAAI,CACjBA,IAAKJ,EAAQI,GAAI,CACjBC,WAAU,AAAgB,OAAhBJ,CAAAA,EAAED,EAAQM,MAAM,AAANA,GAAML,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBM,IAAK,CACjCC,WAAU,AAAgB,OAAhBN,CAAAA,EAAEF,EAAQM,MAAM,AAANA,GAAMJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBO,IAAK,CACjCC,aAAY,AAAgB,OAAhBP,CAAAA,EAAEH,EAAQM,MAAM,AAANA,GAAMH,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBrC,EAAE,CAACyC,IAAK,CACtCxC,QAASiC,EAAQjC,OAAQ,CACzB4C,SAAUrB,CAAO,EAChB,EAEHnB,QAASA,EACTC,aAAcA,EACdC,WAAYA,EACZC,gBAAiBA,EACjBC,gBAAiBA,CAAgB,EAGpC"}