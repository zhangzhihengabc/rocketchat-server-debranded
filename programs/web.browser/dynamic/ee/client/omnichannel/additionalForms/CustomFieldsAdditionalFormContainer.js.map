)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useMemo, useEffect } from 'react';\n\nimport { useForm } from '../../../../client/hooks/useForm';\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\nimport CustomFieldsAdditionalForm from './CustomFieldsAdditionalForm';\n\nconst getInitialValues = (data) => ({\n\ttype: data.type || 'input',\n\trequired: !!data.required,\n\tdefaultValue: data.defaultValue ?? '',\n\toptions: data.options || '',\n\tpublic: !!data.public,\n});\n\nconst checkInvalidOptions = (value) => {\n\tif (!value || value.trim() === '') {\n\t\treturn false;\n\t}\n\n\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\n};\n\nconst CustomFieldsAdditionalFormContainer = ({ data = {}, state, onChange, className }) => {\n\tconst t = useTranslation();\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst errors = useMemo(\n\t\t() => ({\n\t\t\toptionsError: checkInvalidOptions(values.options) ? t('error-invalid-value') : undefined,\n\t\t}),\n\t\t[t, values.options],\n\t);\n\n\tconst hasError = useMemo(() => !!Object.values(errors).filter(Boolean).length, [errors]);\n\n\tuseEffect(() => {\n\t\tonChange({ data: values, hasError, hasUnsavedChanges });\n\t}, [hasError, hasUnsavedChanges, onChange, values]);\n\n\tif (!hasLicense) {\n\t\treturn null;\n\t}\n\n\treturn <CustomFieldsAdditionalForm values={values} handlers={handlers} state={state} className={className} errors={errors} />;\n};\n\nexport default CustomFieldsAdditionalFormContainer;\n",null],"names":["useTranslation","React","useMemo","useEffect","useForm","useHasLicenseModule","CustomFieldsAdditionalForm","module","link","v","default","getInitialValues","data","_data$defaultValue","type","required","defaultValue","options","public","checkInvalidOptions","value","trim","split","every","test","exportDefault","_ref","state","onChange","className","t","hasLicense","values","handlers","hasUnsavedChanges","errors","optionsError","undefined","hasError","Object","filter","Boolean","length","createElement"],"mappings":"2BAAIA,EAAmGC,EAAMC,EAAQC,EAA2GC,EAAsFC,EAAyHC,EAA5ZC,EAAOC,IAAI,CAAC,2BAA2B,CAACR,eAAeS,CAAC,EAAET,EAAeS,CAAC,CAAC,EAAE,GAA+BF,EAAOC,IAAI,CAAC,QAAQ,CAACE,QAAQD,CAAC,EAAER,EAAMQ,CAAC,EAAEP,QAAQO,CAAC,EAAEP,EAAQO,CAAC,EAAEN,UAAUM,CAAC,EAAEN,EAAUM,CAAC,CAAC,EAAE,GAAeF,EAAOC,IAAI,CAAC,mCAAmC,CAACJ,QAAQK,CAAC,EAAEL,EAAQK,CAAC,CAAC,EAAE,GAA2BF,EAAOC,IAAI,CAAC,kCAAkC,CAACH,oBAAoBI,CAAC,EAAEJ,EAAoBI,CAAC,CAAC,EAAE,GAAkCF,EAAOC,IAAI,CAAC,+BAA+B,CAACE,QAAQD,CAAC,EAAEH,EAA2BG,CAAC,CAAC,EAAE,GAOhiB,IAAME,EAAoBC,IAAI,IAAAC,EAAA,MAAM,CACnCC,KAAMF,EAAKE,IAAI,EAAI,QACnBC,SAAU,CAAC,CAACH,EAAKG,QAAQ,CACzBC,aAAY,AAAmB,OAAnBH,CAAAA,EAAED,EAAKI,YAAY,AAAZA,GAAYH,AAAA,KAAA,IAAAA,EAAAA,EAAI,GACnCI,QAASL,EAAKK,OAAO,EAAI,GACzBC,OAAQ,CAAC,CAACN,EAAKM,MAAAA,AAChB,CAAC,EAEKC,EAAuBC,GAC5B,EAAKA,GAASA,AAAiB,KAAjBA,EAAMC,IAAI,IAIjBD,EAAME,KAAK,CAAC,KAAKC,KAAK,CAAEd,GAAM,oBAAoBe,IAAI,CAACf,IApB/DF,EAAOkB,aAAa,CAuBwBC,IAA+C,GAA9C,CAAEd,KAAAA,EAAO,CAAC,CAAC,CAAEe,MAAAA,CAAK,CAAEC,SAAAA,CAAQ,CAAEC,UAAAA,CAAAA,CAAW,CAAAH,EAC/EI,EAAI9B,IACJ+B,EAAa1B,EAAoB,uBAEjC,CAAE2B,OAAAA,CAAM,CAAEC,SAAAA,CAAQ,CAAEC,kBAAAA,CAAAA,CAAmB,CAAG9B,EAAQO,EAAiBC,IAEnEuB,EAASjC,EACd,IAAO,CAAA,CACNkC,aAAcjB,EAAoBa,EAAOf,OAAO,EAAIa,EAAE,uBAAyBO,KAAAA,CAChF,CAAA,EACA,CAACP,EAAGE,EAAOf,OAAO,CAAC,EAGdqB,EAAWpC,EAAQ,IAAM,CAAC,CAACqC,OAAOP,MAAM,CAACG,GAAQK,MAAM,CAACC,SAASC,MAAM,CAAE,CAACP,EAAO,QAMvF,CAJAhC,EAAU,KACTyB,EAAS,CAAEhB,KAAMoB,EAAQM,SAAAA,EAAUJ,kBAAAA,CAAkB,EACtD,EAAG,CAACI,EAAUJ,EAAmBN,EAAUI,EAAO,EAE7CD,GAIE9B,EAAA0C,aAAA,CAACrC,EAA0B,CAAC0B,OAAQA,EAAQC,SAAUA,EAAUN,MAAOA,EAAOE,UAAWA,EAAWM,OAAQA,CAAO,GAHlH,IAIT"}