)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/additionalForms/PrioritiesSelect.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatPriority, Serialized } from '@rocket.chat/core-typings';\nimport { LivechatPriorityWeight } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Options, Box, Option, Field, FieldLabel, FieldRow, SelectLegacy } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { useCallback, forwardRef, useMemo, useState } from 'react';\n\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\nimport { PriorityIcon } from '../priorities/PriorityIcon';\n\ntype PrioritiesSelectProps = {\n\tvalue: string;\n\tlabel: string;\n\toptions: Serialized<ILivechatPriority[]>;\n\tonChange: (value: string) => void;\n};\n\nexport const PrioritiesSelect = ({ value = '', label, options, onChange }: PrioritiesSelectProps) => {\n\tconst t = useTranslation();\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst [sorting] = useState<Record<string, LivechatPriorityWeight>>({});\n\n\tconst formattedOptions = useMemo<SelectOption[]>(() => {\n\t\tconst opts: SelectOption[] = options?.map(({ dirty, name, i18n, _id, sortItem }) => {\n\t\t\tconst label = dirty && name ? name : t(i18n as TranslationKey);\n\t\t\tsorting[_id] = sortItem;\n\t\t\treturn [_id, label];\n\t\t});\n\t\treturn [['', t('Unprioritized')], ...opts];\n\t}, [options, sorting, t]);\n\n\tconst renderOption = useCallback(\n\t\t(label: string, value: string) => {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<PriorityIcon level={sorting[value] || LivechatPriorityWeight.NOT_SPECIFIED} showUnprioritized /> {label}\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\t\t[sorting],\n\t);\n\n\t// eslint-disable-next-line react/no-multi-comp\n\tconst renderOptions = forwardRef<HTMLElement, ComponentProps<typeof Options>>(function OptionsWrapper(props, ref) {\n\t\treturn <Options ref={ref} {...props} maxHeight={200} />;\n\t});\n\n\tif (!hasLicense) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Field>\n\t\t\t<FieldLabel>{label}</FieldLabel>\n\t\t\t<FieldRow>\n\t\t\t\t<SelectLegacy\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\toptions={formattedOptions}\n\t\t\t\t\trenderOptions={renderOptions}\n\t\t\t\t\trenderSelected={({ label, value }) => <Box flexGrow='1'>{renderOption(label, value)}</Box>}\n\t\t\t\t\trenderItem={({ label, value, ...props }) => <Option {...props} label={renderOption(label, value)} />}\n\t\t\t\t/>\n\t\t\t</FieldRow>\n\t\t</Field>\n\t);\n};\n\nexport default PrioritiesSelect;\n",null],"names":["_objectWithoutProperties","_extends","LivechatPriorityWeight","Options","Box","Option","Field","FieldLabel","FieldRow","SelectLegacy","useTranslation","React","useCallback","forwardRef","useMemo","useState","useHasLicenseModule","PriorityIcon","module","link","default","export","PrioritiesSelect","_ref","value","label","options","onChange","t","hasLicense","sorting","formattedOptions","opts","map","_ref2","dirty","name","i18n","_id","sortItem","renderOption","createElement","Fragment","level","NOT_SPECIFIED","showUnprioritized","renderOptions","OptionsWrapper","props","ref","maxHeight","renderSelected","_ref3","flexGrow","renderItem","_ref4","_excluded","exportDefault"],"mappings":"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"}