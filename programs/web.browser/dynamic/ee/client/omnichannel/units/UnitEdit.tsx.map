)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/units/UnitEdit.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment, ILivechatUnitMonitor, Serialized, IOmnichannelBusinessUnit } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldError,\n\tField,\n\tTextInput,\n\tButton,\n\tPaginatedMultiSelectFiltered,\n\tSelect,\n\tButtonGroup,\n\tFieldGroup,\n\tBox,\n\tFieldLabel,\n\tFieldRow,\n} from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport {\n\tContextualbarScrollableContent,\n\tContextualbarFooter,\n\tContextualbarTitle,\n\tContextualbar,\n\tContextualbarHeader,\n\tContextualbarClose,\n} from '../../../../client/components/Contextualbar';\nimport { useRecordList } from '../../../../client/hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../client/hooks/useAsyncState';\nimport { useDepartmentsByUnitsList } from '../../../../client/views/hooks/useDepartmentsByUnitsList';\nimport { useMonitorsList } from '../../../../client/views/hooks/useMonitorsList';\nimport { useRemoveUnit } from './useRemoveUnit';\n\ntype UnitEditProps = {\n\tunitData?: Serialized<IOmnichannelBusinessUnit>;\n\tunitMonitors?: Serialized<ILivechatUnitMonitor>[];\n\tunitDepartments?: Serialized<ILivechatDepartment>[];\n};\n\nconst UnitEdit = ({ unitData, unitMonitors, unitDepartments }: UnitEditProps) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst saveUnit = useMethod('livechat:saveUnit');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst queryClient = useQueryClient();\n\n\tconst handleDeleteUnit = useRemoveUnit();\n\n\tconst [monitorsFilter, setMonitorsFilter] = useState('');\n\tconst debouncedMonitorsFilter = useDebouncedValue(monitorsFilter, 500);\n\n\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: monitorsList, loadMoreItems: loadMoreMonitors } = useMonitorsList(\n\t\tuseMemo(() => ({ filter: debouncedMonitorsFilter }), [debouncedMonitorsFilter]),\n\t);\n\n\tconst { phase: monitorsPhase, items: monitorsItems, itemCount: monitorsTotal } = useRecordList(monitorsList);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsByUnitsList(\n\t\tuseMemo(() => ({ filter: debouncedDepartmentsFilter, unitId: unitData?._id }), [debouncedDepartmentsFilter, unitData?._id]),\n\t);\n\n\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst visibilityOpts: SelectOption[] = [\n\t\t['public', t('Public')],\n\t\t['private', t('Private')],\n\t];\n\n\tconst { _id } = unitData || {};\n\n\tconst currUnitDepartments = useMemo(\n\t\t() =>\n\t\t\tunitDepartments?.map(({ _id, name }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: name,\n\t\t\t})) || [],\n\t\t[unitDepartments],\n\t);\n\n\tconst currUnitMonitors = useMemo(\n\t\t() =>\n\t\t\tunitMonitors?.map(({ _id, username }) => ({\n\t\t\t\tvalue: _id,\n\t\t\t\tlabel: username,\n\t\t\t})) || [],\n\t\t[unitMonitors],\n\t);\n\n\tconst {\n\t\tcontrol,\n\t\tformState: { errors, isDirty },\n\t\thandleSubmit,\n\t\twatch,\n\t} = useForm({\n\t\tmode: 'onBlur',\n\t\tvalues: {\n\t\t\tname: unitData?.name || '',\n\t\t\tvisibility: unitData?.visibility || '',\n\t\t\tdepartments: currUnitDepartments,\n\t\t\tmonitors: currUnitMonitors,\n\t\t},\n\t});\n\n\tconst { departments, monitors } = watch();\n\n\tconst departmentsOptions = useMemo(() => {\n\t\tconst pending = departments.filter(({ value }) => !departmentsItems.find((dep) => dep._id === value));\n\t\tconst mappedDepartmentsItems = departmentsItems?.map(({ _id, name }) => ({\n\t\t\tvalue: _id,\n\t\t\tlabel: name,\n\t\t}));\n\t\treturn [...mappedDepartmentsItems, ...pending];\n\t}, [departments, departmentsItems]);\n\n\tconst monitorsOptions = useMemo(() => {\n\t\tconst pending = monitors.filter(({ value }) => !monitorsItems.find((mon) => mon._id === value));\n\t\tconst mappedMonitorsItems = monitorsItems?.map(({ _id, name }) => ({\n\t\t\tvalue: _id,\n\t\t\tlabel: name,\n\t\t}));\n\t\treturn [...mappedMonitorsItems, ...pending];\n\t}, [monitors, monitorsItems]);\n\n\tconst handleSave = useMutableCallback(async ({ name, visibility }) => {\n\t\tconst departmentsData = departments.map((department) => ({ departmentId: department.value }));\n\n\t\tconst monitorsData = monitors.map((monitor) => ({\n\t\t\tmonitorId: monitor.value,\n\t\t\tusername: monitor.label,\n\t\t}));\n\n\t\ttry {\n\t\t\tawait saveUnit(_id as unknown as string, { name, visibility }, monitorsData, departmentsData);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tqueryClient.invalidateQueries(['livechat-units']);\n\t\t\trouter.navigate('/omnichannel/units');\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst formId = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst visibilityField = useUniqueId();\n\tconst departmentsField = useUniqueId();\n\tconst monitorsField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{_id ? t('Edit_Unit') : t('New_Unit')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/units')}></ContextualbarClose>\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<Box id={formId} is='form' autoComplete='off' onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField} required>\n\t\t\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Name')) }}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tid={nameField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.name?.message}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${nameField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.name)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.name && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${nameField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.name.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={visibilityField} required>\n\t\t\t\t\t\t\t\t{t('Visibility')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='visibility'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Visibility')) }}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tid={visibilityField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\toptions={visibilityOpts}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.visibility?.message}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${visibilityField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.visibility)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.visibility && <FieldError id={`${visibilityField}-error`}>{errors?.visibility.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={departmentsField} required>\n\t\t\t\t\t\t\t\t{t('Departments')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='departments'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Departments')) }}\n\t\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange, onBlur } }) => (\n\t\t\t\t\t\t\t\t\t\t<PaginatedMultiSelectFiltered\n\t\t\t\t\t\t\t\t\t\t\tid={departmentsField}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\t\t\t\tfilter={departmentsFilter}\n\t\t\t\t\t\t\t\t\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\t\t\t\t\t\t\t\t\toptions={departmentsOptions}\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(errors?.departments)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\t\t\t\t\tdepartmentsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (start) => start && loadMoreDepartments(start, Math.min(50, departmentsTotal))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${departmentsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.departments)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.departments && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${departmentsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.departments.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={monitorsField} required>\n\t\t\t\t\t\t\t\t{t('Monitors')}\n\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='monitors'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('The_field_is_required', t('Monitors')) }}\n\t\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange, onBlur } }) => (\n\t\t\t\t\t\t\t\t\t\t<PaginatedMultiSelectFiltered\n\t\t\t\t\t\t\t\t\t\t\tid={monitorsField}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\t\t\t\tfilter={monitorsFilter}\n\t\t\t\t\t\t\t\t\t\t\tsetFilter={setMonitorsFilter}\n\t\t\t\t\t\t\t\t\t\t\toptions={monitorsOptions}\n\t\t\t\t\t\t\t\t\t\t\terror={Boolean(errors?.monitors)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\tendReached={\n\t\t\t\t\t\t\t\t\t\t\t\tmonitorsPhase === AsyncStatePhase.LOADING\n\t\t\t\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (start) => start && loadMoreMonitors(start, Math.min(50, monitorsTotal))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${monitorsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-required={true}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.monitors)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.monitors && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${monitorsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors?.monitors.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Box>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={() => router.navigate('/omnichannel/units')}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button form={formId} disabled={!isDirty} type='submit' primary>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{_id && (\n\t\t\t\t\t<ButtonGroup stretch mbs={8}>\n\t\t\t\t\t\t<Button icon='trash' danger onClick={() => handleDeleteUnit(_id)}>\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default UnitEdit;\n",null],"names":["_extends","FieldError","Field","TextInput","Button","PaginatedMultiSelectFiltered","Select","ButtonGroup","FieldGroup","Box","FieldLabel","FieldRow","useMutableCallback","useDebouncedValue","useUniqueId","useToastMessageDispatch","useMethod","useTranslation","useRouter","useQueryClient","React","useMemo","useState","useForm","Controller","ContextualbarScrollableContent","ContextualbarFooter","ContextualbarTitle","Contextualbar","ContextualbarHeader","ContextualbarClose","useRecordList","AsyncStatePhase","useDepartmentsByUnitsList","useMonitorsList","useRemoveUnit","module","link","default","v","exportDefault","_ref","unitData","unitMonitors","unitDepartments","t","router","saveUnit","dispatchToastMessage","queryClient","handleDeleteUnit","monitorsFilter","setMonitorsFilter","debouncedMonitorsFilter","departmentsFilter","setDepartmentsFilter","debouncedDepartmentsFilter","itemsList","monitorsList","loadMoreItems","loadMoreMonitors","filter","phase","monitorsPhase","items","monitorsItems","itemCount","monitorsTotal","departmentsList","loadMoreDepartments","unitId","_id","departmentsPhase","departmentsItems","departmentsTotal","visibilityOpts","currUnitDepartments","map","_ref2","name","value","label","currUnitMonitors","_ref3","username","control","formState","errors","isDirty","handleSubmit","watch","mode","values","visibility","departments","monitors","departmentsOptions","pending","_ref4","find","dep","mappedDepartmentsItems","_ref5","monitorsOptions","_ref6","mon","mappedMonitorsItems","_ref7","handleSave","_ref8","departmentsData","department","departmentId","monitorsData","monitor","monitorId","type","message","invalidateQueries","navigate","error","formId","nameField","visibilityField","departmentsField","monitorsField","createElement","onClick","id","is","autoComplete","onSubmit","htmlFor","required","rules","render","_ref9","_errors$name","field","concat","Boolean","_ref10","_errors$visibility","options","placeholder","_ref11","onChange","onBlur","withTitle","setFilter","endReached","LOADING","undefined","start","Math","min","_ref12","stretch","form","disabled","primary","mbs","icon","danger"],"mappings":"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"}