function module(e,n,t){let a,s,o,r,l,d,c,i,p,u,m,h,_,f,k,R,v,S,g;t.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),t.link("@rocket.chat/fuselage",{Button(e){s=e},ButtonGroup(e){o=e},FieldGroup(e){r=e}},0),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){l=e}},1),t.link("@rocket.chat/ui-contexts",{useToastMessageDispatch(e){d=e},useRoute(e){c=e},usePermission(e){i=e},useEndpoint(e){p=e},useTranslation(e){u=e}},2),t.link("react",{default(e){m=e},memo(e){h=e},useState(e){_=e},useMemo(e){f=e},useEffect(e){k=e},useCallback(e){R=e}},3),t.link("../../../../client/components/Page",{default(e){v=e}},4),t.link("../../../../client/hooks/useForm",{useForm(e){S=e}},5),t.link("./components/cannedResponseForm",{default(e){g=e}},6),t.exportDefault(h(e=>{var n,t,h;let{data:C,reload:b,totalDataReload:x,isNew:D=!1}=e,E=u(),P=d(),w=c("omnichannel-canned-responses"),I=l(()=>w.push({context:""})),F=p("POST","/v1/canned-responses"),y=i("view-all-canned-responses"),M=i("save-department-canned-responses"),B=S({_id:null!=C&&C.cannedResponse?C.cannedResponse._id:"",shortcut:C?C.cannedResponse.shortcut:"",text:C?C.cannedResponse.text:"",tags:null!==(n=null==C?void 0:null===(t=C.cannedResponse)||void 0===t?void 0:t.tags)&&void 0!==n?n:[],scope:C?C.cannedResponse.scope:"user",departmentId:null!=C&&null!==(h=C.cannedResponse)&&void 0!==h&&h.departmentId?C.cannedResponse.departmentId:""}),{values:G,handlers:T,hasUnsavedChanges:j}=B,[q,H]=_({}),[O,W]=_(E("Canned_Response_Sharing_Private_Description")),[N,U]=_(!1),z=f(()=>{let e={};for(let[n,t]of Object.entries(G))["shortcut","text"].includes(n)&&!t&&(e[n]=E("Field_required"));return"department"!==G.scope||G.departmentId||(e.departmentId=E("Field_required")),e},[E,G]);k(()=>{H(z)},[G.shortcut,G.text,G.departmentId,z]);let A=R(async()=>{try{let{_id:e,shortcut:n,text:t,scope:s,tags:o,departmentId:r}=G;await F(a(a({},e&&{_id:e}),{},{shortcut:n,text:t,scope:s,tags:o},r&&{departmentId:r})),P({type:"success",message:E(e?"Canned_Response_Updated":"Canned_Response_Created")}),w.push({context:""}),b(),x()}catch(e){P({type:"error",message:e})}},[G,F,P,E,w,b,x]),{shortcut:J,text:K,scope:L,departmentId:Q}=G;return m.createElement(v,null,m.createElement(v.Header,{title:D?E("New_CannedResponse"):E("Edit_CannedResponse")},m.createElement(o,null,m.createElement(s,{icon:"back",onClick:I},E("Back")),m.createElement(s,{primary:!0,mie:"none",flexGrow:1,disabled:!j||!(J&&K&&("department"!==L||"department"===L&&Q)),onClick:A},E("Save")))),m.createElement(v.ScrollableContentWithShadow,{fontScale:"p2"},m.createElement(r,{w:"full",alignSelf:"center",maxWidth:"x600",is:"form",autoComplete:"off"},m.createElement(g,{isManager:y,isMonitor:M,values:G,handlers:T,errors:q,radioHandlers:{setPublic:()=>{T.handleScope("global"),T.handleDepartmentId(""),W(E("Canned_Response_Sharing_Public_Description"))},setDepartment:()=>{T.handleScope("department"),W(E("Canned_Response_Sharing_Department_Description"))},setPrivate:()=>{T.handleScope("user"),T.handleDepartmentId(""),W(E("Canned_Response_Sharing_Private_Description"))}},radioDescription:O,onPreview:()=>{U(!N)},previewState:N}))))}))}
//# sourceMappingURL=/dynamic/ee/client/omnichannel/cannedResponses/890d02c221c30a2f39a0dc88b2fbf2e1785bf4f7.map
