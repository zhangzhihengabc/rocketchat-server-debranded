)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/components/contextualBar/CannedResponse/CannedResponseList.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { ILivechatDepartment, IOmnichannelCannedResponse } from '@rocket.chat/core-typings';\nimport { Box, Button, ButtonGroup, ContextualbarEmptyContent, Icon, Margins, Select, TextInput } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useResizeObserver } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation } from '@rocket.chat/ui-contexts';\nimport type { Dispatch, FC, FormEventHandler, MouseEvent, ReactElement, SetStateAction } from 'react';\nimport React, { memo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport {\n\tContextualbarHeader,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarContent,\n\tContextualbarInnerContent,\n\tContextualbarFooter,\n} from '../../../../../../client/components/Contextualbar';\nimport ScrollableContentWrapper from '../../../../../../client/components/ScrollableContentWrapper';\nimport { useRoomToolbox } from '../../../../../../client/views/room/contexts/RoomToolboxContext';\nimport Item from './Item';\nimport WrapCannedResponse from './WrapCannedResponse';\n\nconst CannedResponseList: FC<{\n\tloadMoreItems: (start: number, end: number) => void;\n\tcannedItems: (IOmnichannelCannedResponse & { departmentName: ILivechatDepartment['name'] })[];\n\titemCount: number;\n\tonClose: any;\n\tloading: boolean;\n\toptions: [string, string][];\n\ttext: string;\n\tsetText: FormEventHandler<HTMLOrSVGElement>;\n\ttype: string;\n\tsetType: Dispatch<SetStateAction<string>>;\n\tisRoomOverMacLimit: boolean;\n\tonClickItem: (data: any) => void;\n\tonClickCreate: (e: MouseEvent<HTMLOrSVGElement>) => void;\n\tonClickUse: (e: MouseEvent<HTMLOrSVGElement>, text: string) => void;\n\treload: () => void;\n}> = ({\n\tloadMoreItems,\n\tcannedItems,\n\titemCount,\n\tonClose,\n\tloading,\n\toptions,\n\ttext,\n\tsetText,\n\ttype,\n\tsetType,\n\tisRoomOverMacLimit,\n\tonClickItem,\n\tonClickCreate,\n\tonClickUse,\n\treload,\n}) => {\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus<HTMLInputElement>(true);\n\n\tconst { context: cannedId } = useRoomToolbox();\n\n\tconst { ref, contentBoxSize: { inlineSize = 378 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Canned_Responses')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={onClose} />\n\t\t\t</ContextualbarHeader>\n\n\t\t\t<ContextualbarContent paddingInline={0} ref={ref}>\n\t\t\t\t<Box display='flex' flexDirection='row' p={24} flexShrink={0}>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline={4}>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box w='x144'>\n\t\t\t\t\t\t\t\t<Select onChange={(value) => setType(String(value))} value={type} options={options} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t{itemCount === 0 && <ContextualbarEmptyContent title={t('No_Canned_Responses')} />}\n\t\t\t\t{itemCount > 0 && cannedItems.length > 0 && (\n\t\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{ width: inlineSize }}\n\t\t\t\t\t\t\ttotalCount={itemCount}\n\t\t\t\t\t\t\tendReached={loading ? undefined : (start): void => loadMoreItems(start, Math.min(25, itemCount - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={cannedItems}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\tScroller: ScrollableContentWrapper,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\titemContent={(_index, data): ReactElement => (\n\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\t\tallowUse={!isRoomOverMacLimit}\n\t\t\t\t\t\t\t\t\tonClickItem={(): void => {\n\t\t\t\t\t\t\t\t\t\tonClickItem(data);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonClickUse={onClickUse}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t</ContextualbarContent>\n\n\t\t\t{cannedId && (\n\t\t\t\t<ContextualbarInnerContent>\n\t\t\t\t\t<WrapCannedResponse\n\t\t\t\t\t\tallowUse={!isRoomOverMacLimit}\n\t\t\t\t\t\tcannedItem={cannedItems.find((canned) => canned._id === (cannedId as unknown))}\n\t\t\t\t\t\tonClickBack={onClickItem}\n\t\t\t\t\t\tonClickUse={onClickUse}\n\t\t\t\t\t\treload={reload}\n\t\t\t\t\t/>\n\t\t\t\t</ContextualbarInnerContent>\n\t\t\t)}\n\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onClickCreate}>{t('Create')}</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default memo(CannedResponseList);\n",null],"names":["Box","Button","ButtonGroup","ContextualbarEmptyContent","Icon","Margins","Select","TextInput","useAutoFocus","useResizeObserver","useTranslation","React","memo","Virtuoso","ContextualbarHeader","ContextualbarTitle","ContextualbarClose","ContextualbarContent","ContextualbarInnerContent","ContextualbarFooter","ScrollableContentWrapper","useRoomToolbox","Item","WrapCannedResponse","module","link","default","exportDefault","_ref","loadMoreItems","cannedItems","itemCount","onClose","loading","options","text","setText","type","setType","isRoomOverMacLimit","onClickItem","onClickCreate","onClickUse","reload","t","inputRef","context","cannedId","ref","contentBoxSize","inlineSize","debounceDelay","createElement","Fragment","onClick","paddingInline","display","flexDirection","p","flexShrink","flexGrow","mi","inline","placeholder","value","onChange","addon","name","size","w","String","title","length","overflow","style","width","totalCount","endReached","undefined","start","Math","min","overscan","data","components","Scroller","itemContent","_index","allowUse","cannedItem","find","canned","_id","onClickBack","stretch"],"mappings":"2BACAA,EAAOC,EAAOC,EAAQC,EAAaC,EAAAC,EAA+BC,EAAEC,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3CC,EAAEC,IAAS,CAAA,wBAAQ,CAAAzB,IAAAA,CAAuB,EAACA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,0BAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAiB,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAhB,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAe,EAAAA,IAAAA,CAAAA,2BAAAA,CAAAd,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAc,EAAAA,IAAAA,CAAAA,QAAAA,CAAAE,QAAAA,CAAAA,EAAAf,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAX,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,oDAAAA,CAAAV,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,mBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,0BAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,oBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,+DAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,kEAAAA,CAAAH,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,SAAAA,CAAAE,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,uBAAAA,CAAAE,QAAAA,CAAAA,EAAAH,EAAAA,CAAA,CAAA,EAAA,GAA9HC,EAAOG,aAAa,CAsILf,EAlGVgB,IAgBA,GAhBC,CACLC,cAAAA,CAAa,CACbC,YAAAA,CAAW,CACXC,UAAAA,CAAS,CACTC,QAAAA,CAAO,CACPC,QAAAA,CAAO,CACPC,QAAAA,CAAO,CACPC,KAAAA,CAAI,CACJC,QAAAA,CAAO,CACPC,KAAAA,CAAI,CACJC,QAAAA,CAAO,CACPC,mBAAAA,CAAkB,CAClBC,YAAAA,CAAW,CACXC,cAAAA,CAAa,CACbC,WAAAA,CAAU,CACVC,OAAAA,CAAAA,CACA,CAAAf,EACMgB,EAAIlC,IACJmC,EAAWrC,EAA+B,CAAA,GAE1C,CAAEsC,QAASC,CAAAA,CAAU,CAAG1B,IAExB,CAAE2B,IAAAA,CAAG,CAAEC,eAAgB,CAAEC,WAAAA,EAAa,GAAA,CAAK,CAAG,CAAA,CAAA,CAAI,CAAGzC,EAA+B,CACzF0C,cAAe,MAGhB,OACCxC,EAAAyC,aAAA,CAAAzC,EAAA0C,QAAA,CAAA,KACC1C,EAAAyC,aAAA,CAACtC,EAAmB,KACnBH,EAAAyC,aAAA,CAACrC,EAAkB,KAAE6B,EAAE,qBACvBjC,EAAAyC,aAAA,CAACpC,EAAkB,CAACsC,QAAStB,CAAQ,IAGtCrB,EAAAyC,aAAA,CAACnC,EAAoB,CAACsC,cAAe,EAAGP,IAAKA,CAAI,EAChDrC,EAAAyC,aAAA,CAACpD,EAAG,CAACwD,QAAQ,OAAOC,cAAc,MAAMC,EAAG,GAAIC,WAAY,CAAE,EAC5DhD,EAAAyC,aAAA,CAACpD,EAAG,CAACwD,QAAQ,OAAOC,cAAc,MAAMG,SAAU,EAAGC,GAAG,QAAQ,EAC/DlD,EAAAyC,aAAA,CAAC/C,EAAO,CAACyD,OAAQ,CAAE,EAClBnD,EAAAyC,aAAA,CAAC7C,EAAS,CACTwD,YAAanB,EAAE,UACfoB,MAAO7B,EACP8B,SAAU7B,EACV8B,MAAOvD,EAAAyC,aAAA,CAAChD,EAAI,CAAC+D,KAAK,YAAYC,KAAK,KAAK,GACxCpB,IAAKH,CAAS,GAEflC,EAAAyC,aAAA,CAACpD,EAAG,CAACqE,EAAE,MAAM,EACZ1D,EAAAyC,aAAA,CAAC9C,EAAM,CAAC2D,SAAWD,GAAU1B,EAAQgC,OAAON,IAASA,MAAO3B,EAAMH,QAASA,CAAQ,OAKtFH,AAAc,IAAdA,GAAmBpB,EAAAyC,aAAA,CAACjD,EAAyB,CAACoE,MAAO3B,EAAE,sBAAuB,GAC9Eb,EAAY,GAAKD,EAAY0C,MAAM,CAAG,GACtC7D,EAAAyC,aAAA,CAACpD,EAAG,CAAC4D,SAAU,EAAGD,WAAY,EAAGc,SAAS,SAASjB,QAAQ,MAAM,EAChE7C,EAAAyC,aAAA,CAACvC,EAAQ,CACR6D,MAAO,CAAEC,MAAOzB,CAAU,EAC1B0B,WAAY7C,EACZ8C,WAAY5C,EAAU6C,KAAAA,EAAaC,GAAgBlD,EAAckD,EAAOC,KAAKC,GAAG,CAAC,GAAIlD,EAAYgD,IACjGG,SAAU,GACVC,KAAMrD,EACNsD,WAAY,CACXC,SAAUjE,GAEXkE,YAAa,CAACC,EAAQJ,IACrBxE,EAAAyC,aAAA,CAAC9B,EAAI,CACJ6D,KAAMA,EACNK,SAAU,CAACjD,EACXC,YAAa,KACZA,EAAY2C,EACb,EACAzC,WAAYA,CAAW,EAEvB,KAMLK,GACApC,EAAAyC,aAAA,CAAClC,EAAyB,KACzBP,EAAAyC,aAAA,CAAC7B,EAAkB,CAClBiE,SAAU,CAACjD,EACXkD,WAAY3D,EAAY4D,IAAI,CAAEC,GAAWA,EAAOC,GAAG,GAAM7C,GACzD8C,YAAarD,EACbE,WAAYA,EACZC,OAAQA,CAAO,IAKlBhC,EAAAyC,aAAA,CAACjC,EAAmB,KACnBR,EAAAyC,aAAA,CAAClD,EAAW,CAAC4F,QAAO,CAAA,CAAA,EACnBnF,EAAAyC,aAAA,CAACnD,EAAM,CAACqD,QAASb,CAAc,EAAEG,EAAE,aAKxC"}