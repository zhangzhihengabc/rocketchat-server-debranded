)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/components/contextualBar/CannedResponse/index.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { useDebouncedValue, useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useRouter } from '@rocket.chat/ui-contexts';\nimport type { MouseEvent } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../../../../../../client/hooks/lists/useRecordList';\nimport { useIsRoomOverMacLimit } from '../../../../../../client/hooks/omnichannel/useIsRoomOverMacLimit';\nimport { AsyncStatePhase } from '../../../../../../client/lib/asyncState';\nimport { useChat } from '../../../../../../client/views/room/contexts/ChatContext';\nimport { useRoom } from '../../../../../../client/views/room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../../../../client/views/room/contexts/RoomToolboxContext';\nimport { useCannedResponseFilterOptions } from '../../../hooks/useCannedResponseFilterOptions';\nimport { useCannedResponseList } from '../../../hooks/useCannedResponseList';\nimport CreateCannedResponse from '../../CannedResponse/modals';\nimport CannedResponseList from './CannedResponseList';\n\nexport const WrapCannedResponseList = () => {\n\tconst room = useRoom();\n\tconst { closeTab } = useRoomToolbox();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\n\tconst options = useCannedResponseFilterOptions() as [string, string][];\n\n\tconst [text, setText] = useState('');\n\tconst [type, setType] = useLocalStorage('canned-response-list-type', 'all');\n\n\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst debouncedText = useDebouncedValue(text, 400);\n\n\tconst { cannedList, loadMoreItems, reload } = useCannedResponseList(\n\t\tuseMemo(() => ({ filter: debouncedText, type }), [debouncedText, type]),\n\t);\n\tconst { phase, items, itemCount } = useRecordList(cannedList);\n\n\tconst onClickItem = useMutableCallback((data) => {\n\t\tconst { _id: context } = data;\n\n\t\trouter.navigate({\n\t\t\tname: router.getRouteName() ?? 'live',\n\t\t\tparams: {\n\t\t\t\tid: room._id,\n\t\t\t\ttab: 'canned-responses',\n\t\t\t\tcontext,\n\t\t\t},\n\t\t});\n\t});\n\n\tconst composer = useChat()?.composer;\n\n\tconst onClickUse = (e: MouseEvent<HTMLOrSVGElement>, text: string): void => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tcomposer?.setText(text);\n\t\tcomposer?.focus();\n\t};\n\n\tconst onClickCreate = (): void => {\n\t\tsetModal(<CreateCannedResponse reloadCannedList={reload} />);\n\t};\n\n\treturn (\n\t\t<CannedResponseList\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\tcannedItems={items}\n\t\t\titemCount={itemCount}\n\t\t\tonClose={closeTab}\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\toptions={options}\n\t\t\ttext={text}\n\t\t\tsetText={handleTextChange}\n\t\t\ttype={type}\n\t\t\tsetType={setType}\n\t\t\tisRoomOverMacLimit={isRoomOverMacLimit}\n\t\t\tonClickUse={onClickUse}\n\t\t\tonClickItem={onClickItem}\n\t\t\tonClickCreate={onClickCreate}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default memo(WrapCannedResponseList);\n",null],"names":["useDebouncedValue","useMutableCallback","useSetModal","useRouter","React","memo","useCallback","useMemo","useState","useRecordList","useIsRoomOverMacLimit","AsyncStatePhase","useChat","useRoom","useRoomToolbox","useCannedResponseFilterOptions","useCannedResponseList","CreateCannedResponse","CannedResponseList","module","export","WrapCannedResponseList","useLocalStorage","default","_useChat","room","closeTab","router","setModal","options","text","setText","type","setType","isRoomOverMacLimit","handleTextChange","event","currentTarget","value","debouncedText","cannedList","loadMoreItems","reload","filter","phase","items","itemCount","onClickItem","data","_router$getRouteName","_id","context","navigate","name","getRouteName","params","id","tab","composer","createElement","cannedItems","onClose","loading","LOADING","onClickUse","e","preventDefault","stopPropagation","focus","onClickCreate","reloadCannedList","exportDefault"],"mappings":"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"}