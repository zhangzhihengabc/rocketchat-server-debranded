function module(e,t,n){let a,o,l,i,r,s,c,u,d,h,p,b,m;n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.export({useChannelsSection:()=>v}),n.link("@rocket.chat/string-helpers",{capitalize(e){o=e}},0),n.link("@rocket.chat/ui-contexts",{useEndpoint(e){l=e},useTranslation(e){i=e}},1),n.link("@tanstack/react-query",{useQuery(e){r=e}},2),n.link("react",{useMemo(e){s=e}},3),n.link("../../../components/dashboards/periods",{getPeriodRange(e){c=e}},4),n.link("../../../components/dashboards/usePeriodSelectorStorage",{usePeriodSelectorStorage(e){u=e}},5),n.link("../components/constants",{PERIOD_OPTIONS(e){d=e}},6),n.link("../utils/formatPeriodDescription",{formatPeriodDescription(e){h=e}},7),n.link("../utils/getTop",{getTop(e){p=e}},8),n.link("../utils/round",{round(e){b=e}},9),n.link("./useDefaultDownload",{useDefaultDownload(e){m=e}},10);let _={widget:"Livechat","email-inbox":"Email",twilio:"SMS",api:"Custom_Integration"},g=(e,t,n)=>{let l=t>0?b(e.value/t*100):0,i="".concat(n(_[e.label])||o(e.label));return a(a({},e),{},{label:"".concat(i," ").concat(e.value," (").concat(l,"%)"),rawLabel:i,id:e.label})},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return e.map(e=>g(e,t,n))},v=()=>{let e=i(),[t,n]=u("reports-channels-period",d),o=l("GET","/v1/livechat/analytics/dashboards/conversations-by-source"),{data:{data:b,rawData:_,total:v}={data:[],rawData:[],total:0},refetch:S,isLoading:y,isError:D,isSuccess:f}=r(["omnichannel-reports","conversations-by-source",t],async()=>{let{start:n,end:l}=c(t),i=await o({start:n.toISOString(),end:l.toISOString()}),r=k(i.data,i.total,e),s=p(5,r,t=>g({label:e("Others"),value:t},i.total,e));return a(a({},i),{},{data:s,rawData:r})},{refetchInterval:3e5}),w=e("Conversations_by_channel"),O=e("__count__conversations__period__",{count:null!=v?v:0,period:h(t,e)}),P=e("Omnichannel_Reports_Channels_Empty_Subtitle"),I=m({columnName:e("Channel"),title:w,data:_,period:t});return s(()=>({id:"conversations-by-channel",title:w,subtitle:O,emptyStateSubtitle:P,data:b,total:v,isLoading:y,isError:D,isDataFound:f&&b.length>0,periodSelectorProps:n,period:t,downloadProps:I,onRetry:S}),[w,O,P,b,v,y,D,f,n,t,I,S])}}
//# sourceMappingURL=/dynamic/ee/client/omnichannel/reports/hooks/8ebc47261ddd5ea3a761a3cd1d69ff94659c2e4f.map
