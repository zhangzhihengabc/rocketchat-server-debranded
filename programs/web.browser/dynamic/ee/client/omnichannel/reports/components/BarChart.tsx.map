)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/reports/components/BarChart.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { BarCustomLayerProps, BarDatum } from '@nivo/bar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { Box, Palette, Tooltip } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { REPORTS_CHARTS_THEME } from './constants';\n\ntype axisItem = {\n\tticksPosition?: 'before' | 'after';\n\ttickValues?: number;\n\ttickSize?: number;\n\ttickPadding?: number;\n\ttickRotation?: number;\n\tformat?: string | ((v: string | number) => string | number);\n\trenderTick?: (props: any) => JSX.Element;\n\tlegend?: React.ReactNode;\n\tlegendPosition?: 'start' | 'middle' | 'end';\n\tlegendOffset?: number;\n\tariaHidden?: boolean;\n};\n\ntype BarChartProps = {\n\tdata: {\n\t\tlabel: string;\n\t\tvalue: number;\n\t\tcolor: string;\n\t}[];\n\tmaxWidth?: string | number;\n\theight: number;\n\tdirection?: 'vertical' | 'horizontal';\n\tindexBy?: string;\n\tkeys?: string[];\n\treverse?: boolean;\n\tmargins?: { top?: number; right?: number; bottom?: number; left?: number };\n\taxis: { axisTop?: axisItem; axisLeft?: axisItem; axisRight?: axisItem; axisBottom?: axisItem };\n\tenableGridX?: boolean;\n\tenableGridY?: boolean;\n\tcolors?: ComponentProps<typeof ResponsiveBar>['colors'];\n};\n\nconst sideLabelStyle = {\n\tfill: Palette.text['font-annotation'].toString(),\n\tfontFamily:\n\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\tfontSize: 12,\n};\n\nconst horizontalSideLabel = ({ bars, labelSkipWidth }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, y, data }) => {\n\t\t\tif (width >= labelSkipWidth) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${width + 8}, ${y + height / 2})`}\n\t\t\t\t\ttextAnchor='left'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nconst verticalSideLabel = ({ bars, labelSkipHeight, innerHeight }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, x, data }) => {\n\t\t\tif (height >= labelSkipHeight) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${x + width / 2}, ${innerHeight - height - 8})`}\n\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nexport const BarChart = ({\n\tdata,\n\tmaxWidth,\n\theight,\n\tdirection = 'vertical',\n\tindexBy = 'label',\n\tkeys,\n\tmargins,\n\treverse,\n\tenableGridX = false,\n\tenableGridY = false,\n\taxis: { axisTop, axisLeft, axisRight, axisBottom } = {},\n\tcolors,\n}: BarChartProps) => {\n\tconst { minHeight, padding } = useMemo(() => {\n\t\tconst minHeight = data.length * 22;\n\t\tconst padding = data.length <= 4 ? 0.5 : 0.05;\n\t\treturn { minHeight, padding };\n\t}, [data.length]);\n\n\tconst sideLabel: any = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n\n\treturn (\n\t\t<Box maxWidth={maxWidth} height={height} overflowY='auto'>\n\t\t\t<Box position='relative' height={Math.max(minHeight, height)} padding={8} overflow='hidden'>\n\t\t\t\t<ResponsiveBar\n\t\t\t\t\tanimate\n\t\t\t\t\tdata={data}\n\t\t\t\t\tindexBy={indexBy}\n\t\t\t\t\tlayout={direction}\n\t\t\t\t\tlayers={['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel]}\n\t\t\t\t\tindexScale={{ type: 'band', round: false }}\n\t\t\t\t\tkeys={keys}\n\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\tpadding={padding}\n\t\t\t\t\tcolors={colors ?? { datum: 'data.color' }}\n\t\t\t\t\tenableGridY={enableGridY}\n\t\t\t\t\tenableGridX={enableGridX}\n\t\t\t\t\taxisTop={axisTop || null}\n\t\t\t\t\taxisRight={axisRight || null}\n\t\t\t\t\taxisBottom={axisBottom || null}\n\t\t\t\t\taxisLeft={axisLeft || null}\n\t\t\t\t\treverse={reverse}\n\t\t\t\t\tborderRadius={4}\n\t\t\t\t\tlabelTextColor='white'\n\t\t\t\t\tmargin={margins}\n\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\ttheme={REPORTS_CHARTS_THEME}\n\t\t\t\t\tlabelSkipWidth={direction === 'horizontal' ? 24 : undefined}\n\t\t\t\t\tlabelSkipHeight={direction === 'vertical' ? 16 : undefined}\n\t\t\t\t\tvalueScale={{ type: 'linear' }}\n\t\t\t\t\ttooltip={({ data }) => <Tooltip>{`${data.label}: ${data.value}`}</Tooltip>}\n\t\t\t\t\tbarAriaLabel={({ data }) => data.label}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n",null],"names":["ResponsiveBar","Box","Palette","Tooltip","React","useMemo","REPORTS_CHARTS_THEME","module","export","BarChart","default","sideLabelStyle","fill","text","toString","fontFamily","fontSize","horizontalSideLabel","_ref","bars","labelSkipWidth","createElement","map","_ref2","width","height","y","data","key","indexValue","transform","concat","textAnchor","dominantBaseline","style","formattedValue","verticalSideLabel","_ref3","labelSkipHeight","innerHeight","_ref4","x","_ref5","maxWidth","direction","indexBy","keys","margins","reverse","enableGridX","enableGridY","axis","axisTop","axisLeft","axisRight","axisBottom","colors","minHeight","padding","length","overflowY","position","Math","max","overflow","animate","layout","layers","indexScale","type","round","groupMode","datum","borderRadius","labelTextColor","margin","motionConfig","theme","undefined","valueScale","tooltip","_ref6","label","value","barAriaLabel","_ref7"],"mappings":"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"}