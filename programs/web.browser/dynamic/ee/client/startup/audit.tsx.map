)]}'
{"version":3,"sources":["meteor://ðŸ’»app/ee/client/startup/audit.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import React, { lazy } from 'react';\n\nimport { hasAllPermission } from '../../../app/authorization/client';\nimport { appLayout } from '../../../client/lib/appLayout';\nimport { router } from '../../../client/providers/RouterProvider';\nimport NotAuthorizedPage from '../../../client/views/notAuthorized/NotAuthorizedPage';\nimport MainLayout from '../../../client/views/root/MainLayout';\nimport { onToggledFeature } from '../lib/onToggledFeature';\n\nconst AuditPage = lazy(() => import('../views/audit/AuditPage'));\nconst AuditLogPage = lazy(() => import('../views/audit/AuditLogPage'));\n\ndeclare module '@rocket.chat/ui-contexts' {\n\tinterface IRouterPaths {\n\t\t'audit-home': {\n\t\t\tpathname: '/audit';\n\t\t\tpattern: '/audit/:tab?';\n\t\t};\n\t\t'audit-log': {\n\t\t\tpathname: '/audit-log';\n\t\t\tpattern: '/audit-log';\n\t\t};\n\t}\n}\n\nconst PermissionGuard = ({ children, permission }: { children: React.ReactNode; permission: string }) => {\n\tconst canView = hasAllPermission(permission);\n\n\treturn <>{canView ? children : <NotAuthorizedPage />}</>;\n};\n\nlet unregisterAuditRoutes: () => void;\n\nonToggledFeature('auditing', {\n\tup: () => {\n\t\tunregisterAuditRoutes = router.defineRoutes([\n\t\t\t{\n\t\t\t\tpath: '/audit/:tab?',\n\t\t\t\tid: 'audit-home',\n\t\t\t\telement: appLayout.wrap(\n\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t<PermissionGuard permission='can-audit'>\n\t\t\t\t\t\t\t<AuditPage />\n\t\t\t\t\t\t</PermissionGuard>\n\t\t\t\t\t</MainLayout>,\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: '/audit-log',\n\t\t\t\tid: 'audit-log',\n\t\t\t\telement: appLayout.wrap(\n\t\t\t\t\t<MainLayout>\n\t\t\t\t\t\t<PermissionGuard permission='can-audit-log'>\n\t\t\t\t\t\t\t<AuditLogPage />\n\t\t\t\t\t\t</PermissionGuard>\n\t\t\t\t\t</MainLayout>,\n\t\t\t\t),\n\t\t\t},\n\t\t]);\n\t},\n\tdown: () => {\n\t\tunregisterAuditRoutes();\n\t},\n});\n",null],"names":["React","lazy","hasAllPermission","appLayout","router","NotAuthorizedPage","MainLayout","onToggledFeature","unregisterAuditRoutes","module","link","default","AuditPage","dynamicImport","AuditLogPage","PermissionGuard","_ref","children","permission","canView","createElement","Fragment","up","defineRoutes","path","id","element","wrap","down"],"mappings":"2BAAAA,EAAOC,EAA6BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA+BhCC,EA/BUC,EAAQC,IAAAA,CAAAA,QAAa,CAACC,QAAAA,CAAAA,EAAAX,EAAAA,CAAA,EAAAC,KAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAP,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,gCAAAA,CAAAN,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAL,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,wDAAAA,CAAAE,QAAAA,CAAAA,EAAAN,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAE,QAAAA,CAAAA,EAAAL,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,0BAAAA,CAAAF,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASpC,IAAMK,EAAYX,EAAK,IAAMQ,EAAAI,aAAA,CAAO,6BAC9BC,EAAeb,EAAK,IAAMQ,EAAAI,aAAA,CAAO,gCAejCE,EAAkBC,IAAgF,GAA/E,CAAEC,SAAAA,CAAQ,CAAEC,WAAAA,CAAAA,CAA+D,CAAAF,EAC7FG,EAAUjB,EAAiBgB,GAEjC,OAAOlB,EAAAoB,aAAA,CAAApB,EAAAqB,QAAA,CAAA,KAAGF,EAAUF,EAAWjB,EAAAoB,aAAA,CAACf,EAAiB,MAClD,EAIAE,EAAiB,WAAY,CAC5Be,GAAI,KACHd,EAAwBJ,EAAOmB,YAAY,CAAC,CAC3C,CACCC,KAAM,eACNC,GAAI,aACJC,QAASvB,EAAUwB,IAAI,CACtB3B,EAAAoB,aAAA,CAACd,EAAU,KACVN,EAAAoB,aAAA,CAACL,EAAe,CAACG,WAAW,WAAW,EACtClB,EAAAoB,aAAA,CAACR,EAAS,UAKd,CACCY,KAAM,aACNC,GAAI,YACJC,QAASvB,EAAUwB,IAAI,CACtB3B,EAAAoB,aAAA,CAACd,EAAU,KACVN,EAAAoB,aAAA,CAACL,EAAe,CAACG,WAAW,eAAe,EAC1ClB,EAAAoB,aAAA,CAACN,EAAY,UAKjB,CACF,EACAc,KAAM,KACLpB,GACD"}