function module(e,t,i){let r;i.export({VideoRecorder:()=>s}),i.link("meteor/reactive-var",{ReactiveVar(e){r=e}},0);let s=new class e{constructor(){this.cameraStarted=new r(!1),this.started=!1,this.recording=new r(!1),this.recordingAvailable=new r(!1),this.videoel=void 0,this.chunks=[],this.stream=void 0,this.mediaRecorder=void 0}getSupportedMimeTypes(){return window.MediaRecorder.isTypeSupported("video/webm")?"video/webm; codecs=vp8,opus":window.MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":""}start(e,t){var i,r,s;this.videoel=e;let a=e=>{this.startUserMedia(e),null==t||t.call(this,!0)},d=e=>{console.error(e),null==t||t.call(this,!1)};if(navigator.mediaDevices){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(a,d);return}let o=null!==(i=null!==(r=null!==(s=navigator.getUserMedia)&&void 0!==s?s:navigator.webkitGetUserMedia)&&void 0!==r?r:navigator.mozGetUserMedia)&&void 0!==i?i:navigator.msGetUserMedia;if(o){o.call(navigator,{audio:!0,video:!0},a,d);return}null==t||t.call(this,!1)}record(){if(this.chunks=[],this.stream)return this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:this.getSupportedMimeTypes()}),this.mediaRecorder.ondataavailable=e=>{if(this.chunks.push(e.data),!this.recordingAvailable.get())return this.recordingAvailable.set(!0)},this.mediaRecorder.start(),this.recording.set(!0)}startUserMedia(e){if(this.videoel){this.stream=e;try{this.videoel.srcObject=e}catch(i){let t=window.URL||window.webkitURL;this.videoel.src=t.createObjectURL(e)}return this.started=!0,this.cameraStarted.set(!0)}}stop(e){if(this.started){if(this.stopRecording(),this.stream){let e=this.stream.getVideoTracks();for(let t of Array.from(e))t.stop();let t=this.stream.getAudioTracks();for(let e of Array.from(t))e.stop()}if(this.videoel&&(this.videoel.pause,this.videoel.src=""),this.started=!1,this.cameraStarted.set(!1),this.recordingAvailable.set(!1),e&&this.chunks){let t=new Blob(this.chunks);e(t)}delete this.stream,delete this.videoel}}stopRecording(){this.started&&this.recording&&this.mediaRecorder&&(this.mediaRecorder.stop(),this.recording.set(!1),delete this.mediaRecorder)}}}
//# sourceMappingURL=/dynamic/app/ui/client/lib/recorderjs/7fbd980b7f65938c7328ad56bf2173e67a39cbeb.map
