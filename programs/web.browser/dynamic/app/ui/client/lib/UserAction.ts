function module(e,t,n){let i,l,o,s,a;n.export({USER_ACTIVITIES:()=>c,UserAction:()=>w}),n.link("lodash",{debounce(e){i=e}},0),n.link("meteor/meteor",{Meteor(e){l=e}},1),n.link("meteor/reactive-dict",{ReactiveDict(e){o=e}},2),n.link("../../../notifications/client",{Notifications(e){s=e}},3),n.link("../../../settings/client",{settings(e){a=e}},4);let r="user-activity",c={USER_RECORDING:"user-recording",USER_TYPING:"user-typing",USER_UPLOADING:"user-uploading",USER_PLAYING:"user-playing"},u=new Map,d=new Map,g=new Map,m=new Map,f=new Map,p=new o,v=function(e){return e?a.get("UI_Use_Real_Name")?e.name:e.username:void 0},R=i(async(e,t)=>{let n=m.get((null==t?void 0:t.tmid)||e)||new Set;s.notifyRoom(e,r,v(l.user()),[...n],t)},500),w=new class{addStream(e){if(f.get(e))return;let t=function(t,n,i){let o=l.users.findOne(l.userId()||void 0,{fields:{name:1,username:1}});t!==v(o)&&function e(t,n,i,l){t=(null==l?void 0:l.tmid)||t;let o=p.get(t)||{};for(let[,s]of Object.entries(c)){o[s]=o[s]||new Map;let a=o[s],r=a[n];r&&clearTimeout(r),i.includes(s)?(i.splice(i.indexOf(s),1),a[n]=setTimeout(()=>e(t,n,i,l),15e3)):delete a[n]}p.set(t,o)}(e,t,n,i)};f.set(e,t),s.onRoom(e,r,t)}performContinuously(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(null==n?void 0:n.tmid)||e,l="".concat(t,"-").concat(i);g.get(l)||(this.start(e,t,n),g.set(l,setInterval(()=>{this.start(e,t,n)},5e3)))}start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(null==n?void 0:n.tmid)||e,l="".concat(t,"-").concat(i);if(d.get(l))return;d.set(l,setTimeout(()=>{clearTimeout(d.get(l)),d.delete(l)},5e3));let o=m.get(i)||new Set;o.add(t),m.set(i,o),R(e,n),u.get(l)&&(clearTimeout(u.get(l)),u.delete(l)),u.set(l,setTimeout(()=>this.stop(i,t,n),15e3)),u.get(l)}stop(e,t,n){let i=(null==n?void 0:n.tmid)||e,l="".concat(t,"-").concat(i);u.get(l)&&(clearTimeout(u.get(l)),u.delete(l)),d.get(l)&&(clearTimeout(d.get(l)),d.delete(l)),g.get(l)&&(clearInterval(g.get(l)),g.delete(l));let o=m.get(i)||new Set;o.delete(t),m.set(i,o),R(e,n)}cancel(e){f.get(e)&&(s.unRoom(e,r),f.delete(e))}get(e){return p.get(e)}}}
//# sourceMappingURL=/dynamic/app/ui/client/lib/bed2879ee65b743120695003607e30a2be16dad1.map
