)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/ui/client/lib/KonchatNotification.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { INotificationDesktop, IRoom, IUser } from '@rocket.chat/core-typings';\nimport { Random } from '@rocket.chat/random';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { RoomManager } from '../../../../client/lib/RoomManager';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\nimport { getAvatarAsPng } from '../../../../client/lib/utils/getAvatarAsPng';\nimport { router } from '../../../../client/providers/RouterProvider';\nimport { stripTags } from '../../../../lib/utils/stringUtils';\nimport { CustomSounds } from '../../../custom-sounds/client/lib/CustomSounds';\nimport { e2e } from '../../../e2e/client';\nimport { ChatSubscription } from '../../../models/client';\nimport { getUserPreference } from '../../../utils/client';\nimport { getUserAvatarURL } from '../../../utils/client/getUserAvatarURL';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface NotificationEventMap {\n\t\treply: { response: string };\n\t}\n}\n\nclass KonchatNotification {\n\tpublic notificationStatus = new ReactiveVar<NotificationPermission | undefined>(undefined);\n\n\tpublic getDesktopPermission() {\n\t\tif (window.Notification && Notification.permission !== 'granted') {\n\t\t\treturn Notification.requestPermission((status) => {\n\t\t\t\tthis.notificationStatus.set(status);\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic async notify(notification: INotificationDesktop) {\n\t\tif (typeof window.Notification === 'undefined' || Notification.permission !== 'granted') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!notification.payload) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { rid } = notification.payload;\n\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\t\tconst message = await onClientMessageReceived({\n\t\t\trid,\n\t\t\tmsg: notification.text,\n\t\t\tnotification: true,\n\t\t} as any);\n\n\t\tconst requireInteraction = getUserPreference<boolean>(Meteor.userId(), 'desktopNotificationRequireInteraction');\n\t\tconst n = new Notification(notification.title, {\n\t\t\ticon: notification.icon || getUserAvatarURL(notification.payload.sender?.username as string),\n\t\t\tbody: stripTags(message.msg),\n\t\t\ttag: notification.payload._id,\n\t\t\tcanReply: true,\n\t\t\tsilent: true,\n\t\t\trequireInteraction,\n\t\t} as NotificationOptions & {\n\t\t\tcanReply?: boolean; // TODO is this still needed for the desktop app?\n\t\t});\n\n\t\tconst notificationDuration = !requireInteraction ? (notification.duration ?? 0) - 0 || 10 : -1;\n\t\tif (notificationDuration > 0) {\n\t\t\tsetTimeout(() => n.close(), notificationDuration * 1000);\n\t\t}\n\n\t\tif (n.addEventListener) {\n\t\t\tn.addEventListener(\n\t\t\t\t'reply',\n\t\t\t\t({ response }) =>\n\t\t\t\t\tvoid sdk.call('sendMessage', {\n\t\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\t\trid,\n\t\t\t\t\t\tmsg: response,\n\t\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tn.onclick = function () {\n\t\t\tthis.close();\n\t\t\twindow.focus();\n\n\t\t\tif (!notification.payload._id || !notification.payload.rid || !notification.payload.name) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (notification.payload?.type) {\n\t\t\t\tcase 'd':\n\t\t\t\t\treturn router.navigate({\n\t\t\t\t\t\tpattern: '/direct/:rid/:tab?/:context?',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\trid: notification.payload.rid,\n\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\n\t\t\t\t\t});\n\t\t\t\tcase 'c':\n\t\t\t\t\treturn router.navigate({\n\t\t\t\t\t\tpattern: '/channel/:name/:tab?/:context?',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\n\t\t\t\t\t});\n\t\t\t\tcase 'p':\n\t\t\t\t\treturn router.navigate({\n\t\t\t\t\t\tpattern: '/group/:name/:tab?/:context?',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\n\t\t\t\t\t});\n\t\t\t\tcase 'l':\n\t\t\t\t\treturn router.navigate({\n\t\t\t\t\t\tpattern: '/live/:id/:tab?/:context?',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tid: notification.payload.rid,\n\t\t\t\t\t\t\ttab: 'room-info',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\n\t\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic async showDesktop(notification: INotificationDesktop) {\n\t\tif (!notification.payload.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tnotification.payload?.rid === RoomManager.opened &&\n\t\t\t(typeof window.document.hasFocus === 'function' ? window.document.hasFocus() : undefined)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (notification.payload?.message?.t === 'e2e') {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(notification.payload.rid);\n\t\t\tif (e2eRoom) {\n\t\t\t\tnotification.text = (await e2eRoom.decrypt(notification.payload.message.msg)).text;\n\t\t\t}\n\t\t}\n\n\t\treturn getAvatarAsPng(notification.payload?.sender?.username, (avatarAsPng) => {\n\t\t\tnotification.icon = avatarAsPng;\n\t\t\treturn this.notify(notification);\n\t\t});\n\t}\n\n\tpublic async newMessage(rid: IRoom['_id'] | undefined) {\n\t\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst userId = Meteor.userId();\n\t\tconst newMessageNotification = getUserPreference<string>(userId, 'newMessageNotification');\n\t\tconst audioVolume = getUserPreference(userId, 'notificationsSoundVolume', 100);\n\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sub = ChatSubscription.findOne({ rid }, { fields: { audioNotificationValue: 1 } });\n\n\t\tif (!sub || sub.audioNotificationValue === 'none') {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (sub.audioNotificationValue && sub.audioNotificationValue !== '0') {\n\t\t\t\tvoid CustomSounds.play(sub.audioNotificationValue, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (newMessageNotification && newMessageNotification !== 'none') {\n\t\t\t\tvoid CustomSounds.play(newMessageNotification, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// do nothing\n\t\t}\n\t}\n\n\tpublic newRoom(rid: IRoom['_id']) {\n\t\tTracker.nonreactive(() => {\n\t\t\tlet newRoomSound = Session.get('newRoomSound') as IRoom['_id'][] | undefined;\n\t\t\tif (newRoomSound) {\n\t\t\t\tnewRoomSound = [...newRoomSound, rid];\n\t\t\t} else {\n\t\t\t\tnewRoomSound = [rid];\n\t\t\t}\n\n\t\t\treturn Session.set('newRoomSound', newRoomSound);\n\t\t});\n\t}\n\n\tpublic removeRoomNotification(rid: IRoom['_id']) {\n\t\tlet newRoomSound = (Session.get('newRoomSound') as IRoom['_id'][] | undefined) ?? [];\n\t\tnewRoomSound = newRoomSound.filter((_rid) => _rid !== rid);\n\t\tTracker.nonreactive(() => Session.set('newRoomSound', newRoomSound));\n\n\t\tconst link = document.querySelector(`.link-room-${rid}`);\n\n\t\tlink?.classList.remove('new-room-highlight');\n\t}\n}\n\nconst instance = new KonchatNotification();\n\nexport { instance as KonchatNotification };\n",null],"names":["_objectSpread","Random","Meteor","ReactiveVar","RoomManager","onClientMessageReceived","getAvatarAsPng","router","stripTags","CustomSounds","e2e","ChatSubscription","getUserPreference","getUserAvatarURL","sdk","module","link","default","export","KonchatNotification","instance","constructor","notificationStatus","undefined","getDesktopPermission","window","Notification","permission","requestPermission","status","set","notify","notification","_notification$payload","_notification$duratio","payload","rid","message","msg","text","requireInteraction","userId","n","title","icon","sender","username","body","tag","_id","canReply","silent","notificationDuration","duration","setTimeout","close","addEventListener","_ref","response","call","id","onclick","_notification$payload2","focus","name","type","navigate","pattern","params","tmid","tab","context","search","getSearchParameters","jump","showDesktop","_notification$payload3","_Meteor$user","_notification$payload4","_notification$payload5","_notification$payload6","_notification$payload7","opened","document","hasFocus","user","t","e2eRoom","getInstanceByRoomId","decrypt","avatarAsPng","newMessage","_Meteor$user2","newMessageNotification","audioVolume","sub","findOne","fields","audioNotificationValue","play","volume","Number","toPrecision","e","newRoom","Tracker","nonreactive","newRoomSound","Session","get","removeRoomNotification","_Session$get","filter","_rid","querySelector","concat","classList","remove"],"mappings":"2BACAA,EAA6CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5BC,EAAMC,IAAA,CAAA,uCAAsB,CAAAC,QAAAA,CAAAA,EAAAjB,EAAAA,CAAA,CAAA,EAAA,GAA7Ce,EAAOG,MAAE,CAAA,CAAMC,oBAAQ,IAAAC,CAAsB,GAAAL,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAd,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAc,EAAAA,IAAAA,CAAAA,gBAAAA,CAAAb,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAa,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAZ,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAY,EAAAA,IAAAA,CAAAA,qCAAAA,CAAAX,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAW,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAV,wBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAU,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAT,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,8CAAAA,CAAAR,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,oCAAAA,CAAAP,UAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,iDAAAA,CAAAN,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAL,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,yBAAAA,CAAAJ,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAG,EAAAA,IAAAA,CAAAA,yCAAAA,CAAAF,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAAAE,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAD,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,IAuO7C,IAAMM,EAAW,IAhNjB,MAAMD,EAAmBE,aAAA,CAAA,IAAA,CACjBC,kBAAkB,CAAG,IAAInB,EAAgDoB,KAAAA,EAAU,CAEnFC,sBAAoB,CAC1B,GAAIC,OAAOC,YAAY,EAAIA,AAA4B,YAA5BA,aAAaC,UAAU,CACjD,OAAOD,aAAaE,iBAAiB,CAAEC,IACtC,IAAI,CAACP,kBAAkB,CAACQ,GAAG,CAACD,EAC7B,EAEF,CAEO,MAAME,OAAOC,CAAkC,CAAA,CAAA,IAAAC,EAAAC,EACrD,GAAmC,KAAA,IAAxBT,OAAOC,YAAY,EAAoBA,AAA4B,YAA5BA,aAAaC,UAAU,EAIrE,CAACK,EAAaG,OAAO,CAHxB,OAOD,GAAM,CAAEC,IAAAA,CAAAA,CAAK,CAAGJ,EAAaG,OAAO,CAEpC,GAAI,CAACC,EACJ,OAED,IAAMC,EAAU,MAAMhC,EAAwB,CAC7C+B,IAAAA,EACAE,IAAKN,EAAaO,IAAI,CACtBP,aAAc,CAAA,IAGTQ,EAAqB5B,EAA2BV,EAAOuC,MAAM,GAAI,yCACjEC,EAAI,IAAIhB,aAAaM,EAAaW,KAAK,CAAE,CAC9CC,KAAMZ,EAAaY,IAAI,EAAI/B,EAAgB,AAA4B,OAA5BoB,CAAAA,EAACD,EAAaG,OAAO,CAACU,MAAM,AAANA,GAAMZ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA3BA,EAA6Ba,QAAkB,EAC3FC,KAAMvC,EAAU6B,EAAQC,GAAG,EAC3BU,IAAKhB,EAAaG,OAAO,CAACc,GAAG,CAC7BC,SAAU,CAAA,EACVC,OAAQ,CAAA,EACRX,mBAAAA,IAKKY,EAAuB,AAACZ,EAA8D,GAAzC,CAAA,AAAsB,OAAtBN,CAAAA,EAACF,EAAaqB,QAAQ,AAARA,GAAQnB,AAAA,KAAA,IAAAA,EAAAA,EAAI,CAAA,EAAK,GAAK,GACnFkB,EAAuB,GAC1BE,WAAW,IAAMZ,EAAEa,KAAK,GAAIH,AAAuB,IAAvBA,GAGzBV,EAAEc,gBAAgB,EACrBd,EAAEc,gBAAgB,CACjB,QACAC,IAAA,GAAC,CAAEC,SAAAA,CAAAA,CAAU,CAAAD,EACP3C,EAAI6C,IAAI,CAAC,cAAe,CAC5BV,IAAKhD,EAAO2D,EAAE,GACdxB,IAAAA,EACAE,IAAKoB,GACJ,GAILhB,EAAEmB,OAAO,CAAG,WAAA,IAAAC,EAIX,GAHA,IAAI,CAACP,KAAK,GACV9B,OAAOsC,KAAK,GAER,AAAC/B,EAAaG,OAAO,CAACc,GAAG,EAAKjB,EAAaG,OAAO,CAACC,GAAG,EAAKJ,EAAaG,OAAO,CAAC6B,IAAI,CAIxF,OAAA,AAA4B,OAA5BF,CAAAA,EAAQ9B,EAAaG,OAAO,AAAPA,GAAO2B,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApBA,EAAsBG,IAAI,EACjC,IAAK,IACJ,OAAO1D,EAAO2D,QAAQ,CAAC,CACtBC,QAAS,+BACTC,OAAMpE,EAAA,CACLoC,IAAKJ,EAAaG,OAAO,CAACC,GAAAA,AAAG,EACzBJ,EAAaG,OAAO,CAACkC,IAAI,EAAI,CAChCC,IAAK,SACLC,QAASvC,EAAaG,OAAO,CAACkC,IAAAA,GAGhCG,OAAMxE,EAAAA,EAAA,CAAA,EAAOO,EAAOkE,mBAAmB,IAAE,CAAA,EAAA,CAAEC,KAAM1C,EAAaG,OAAO,CAACc,GAAAA,AAAG,IAE3E,KAAK,IACJ,OAAO1C,EAAO2D,QAAQ,CAAC,CACtBC,QAAS,iCACTC,OAAMpE,EAAA,CACLgE,KAAMhC,EAAaG,OAAO,CAAC6B,IAAAA,AAAI,EAC3BhC,EAAaG,OAAO,CAACkC,IAAI,EAAI,CAChCC,IAAK,SACLC,QAASvC,EAAaG,OAAO,CAACkC,IAAAA,GAGhCG,OAAMxE,EAAAA,EAAA,CAAA,EAAOO,EAAOkE,mBAAmB,IAAE,CAAA,EAAA,CAAEC,KAAM1C,EAAaG,OAAO,CAACc,GAAAA,AAAG,IAE3E,KAAK,IACJ,OAAO1C,EAAO2D,QAAQ,CAAC,CACtBC,QAAS,+BACTC,OAAMpE,EAAA,CACLgE,KAAMhC,EAAaG,OAAO,CAAC6B,IAAAA,AAAI,EAC3BhC,EAAaG,OAAO,CAACkC,IAAI,EAAI,CAChCC,IAAK,SACLC,QAASvC,EAAaG,OAAO,CAACkC,IAAAA,GAGhCG,OAAMxE,EAAAA,EAAA,CAAA,EAAOO,EAAOkE,mBAAmB,IAAE,CAAA,EAAA,CAAEC,KAAM1C,EAAaG,OAAO,CAACc,GAAAA,AAAG,IAE3E,KAAK,IACJ,OAAO1C,EAAO2D,QAAQ,CAAC,CACtBC,QAAS,4BACTC,OAAQ,CACPR,GAAI5B,EAAaG,OAAO,CAACC,GAAG,CAC5BkC,IAAK,aAENE,OAAMxE,EAAAA,EAAA,CAAA,EAAOO,EAAOkE,mBAAmB,IAAE,CAAA,EAAA,CAAEC,KAAM1C,EAAaG,OAAO,CAACc,GAAAA,AAAG,IACvE,CAEN,CACD,CAEO,MAAM0B,YAAY3C,CAAkC,CAAA,CAAA,IAAA4C,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC1D,KAAI,CAACjD,EAAaG,OAAO,CAACC,GAAG,EAK5B,CAAA,AAAoB,OAApBwC,CAAAA,EAAA5C,EAAaG,OAAO,AAAPA,GAAOyC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApBA,EAAsBxC,GAAG,AAAHA,IAAQhC,EAAY8E,MAAM,EAC/C,CAAA,AAAoC,YAApC,OAAOzD,OAAO0D,QAAQ,CAACC,QAAQ,CAAkB3D,OAAO0D,QAAQ,CAACC,QAAQ,GAAK7D,KAAAA,CAAAA,IAK3E,CAAA,AAA8B,OAA9BsD,CAAAA,EAAA3E,EAAOmF,IAAI,EAAA,GAAmBR,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA9BA,EAAgChD,MAAM,AAANA,IAAW,QAIhD,GAAI,CAAA,AAAoB,OAApBiD,CAAAA,EAAA9C,EAAaG,OAAO,AAAPA,GAAO2C,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAS,OAATC,CAAAA,EAApBD,EAAsBzC,OAAO,AAAPA,GAAO0C,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA7BA,EAA+BO,CAAC,AAADA,IAAM,MAAO,CAC/C,IAAMC,EAAU,MAAM7E,EAAI8E,mBAAmB,CAACxD,EAAaG,OAAO,CAACC,GAAG,EAClEmD,GACHvD,CAAAA,EAAaO,IAAI,CAAG,AAAC,CAAA,MAAMgD,EAAQE,OAAO,CAACzD,EAAaG,OAAO,CAACE,OAAO,CAACC,GAAG,CAAA,EAAGC,IAAI,AAAJA,EAIhF,OAAOjC,EAAc,AAAqB,OAArB0E,CAAAA,EAAChD,EAAaG,OAAO,AAAPA,GAAO6C,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAQ,OAARC,CAAAA,EAApBD,EAAsBnC,MAAM,AAANA,GAAMoC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA5BA,EAA8BnC,QAAQ,CAAG4C,IAC9D1D,EAAaY,IAAI,CAAG8C,EACb,IAAI,CAAC3D,MAAM,CAACC,KAErB,CAEO,MAAM2D,WAAWvD,CAA6B,CAAA,CAAA,IAAAwD,EACpD,GAAK,CAAA,AAA8B,OAA9BA,CAAAA,EAAA1F,EAAOmF,IAAI,EAAA,GAAmBO,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA9BA,EAAgC/D,MAAM,AAANA,IAAW,OAC/C,OAGD,IAAMY,EAASvC,EAAOuC,MAAM,GACtBoD,EAAyBjF,EAA0B6B,EAAQ,0BAC3DqD,EAAclF,EAAkB6B,EAAQ,2BAA4B,KAE1E,GAAI,CAACL,EACJ,OAGD,IAAM2D,EAAMpF,EAAiBqF,OAAO,CAAC,CAAE5D,IAAAA,CAAG,EAAI,CAAE6D,OAAQ,CAAEC,uBAAwB,CAAC,CAAE,GAErF,GAAI,AAACH,GAAOA,AAA+B,SAA/BA,EAAIG,sBAAsB,CAItC,GAAI,CACH,GAAIH,EAAIG,sBAAsB,EAAIH,AAA+B,MAA/BA,EAAIG,sBAAsB,CAAU,CAChEzF,EAAa0F,IAAI,CAACJ,EAAIG,sBAAsB,CAAE,CAClDE,OAAQC,OAAO,AAACP,CAAAA,EAAc,GAAA,EAAKQ,WAAW,CAAC,MAEhD,OAGGT,GAA0BA,AAA2B,SAA3BA,GACxBpF,EAAa0F,IAAI,CAACN,EAAwB,CAC9CO,OAAQC,OAAO,AAACP,CAAAA,EAAc,GAAA,EAAKQ,WAAW,CAAC,MAGhD,MAAOC,EAAG,CACX,CAEF,CAEOC,QAAQpE,CAAiB,CAAA,CAC/BqE,QAAQC,WAAW,CAAC,KACnB,IAAIC,EAAeC,QAAQC,GAAG,CAAC,gBAO/B,OALCF,EADGA,EACY,IAAIA,EAAcvE,EAAI,CAEtB,CAACA,EAAI,CAGdwE,QAAQ9E,GAAG,CAAC,eAAgB6E,EACpC,EACD,CAEOG,uBAAuB1E,CAAiB,CAAA,CAAA,IAAA2E,EAC9C,IAAIJ,EAAY,AAA8D,OAA9DI,CAAAA,EAAIH,QAAQC,GAAG,CAAC,eAAc,GAAgCE,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,CACpFJ,EAAeA,EAAaK,MAAM,CAAEC,GAASA,IAAS7E,GACtDqE,QAAQC,WAAW,CAAC,IAAME,QAAQ9E,GAAG,CAAC,eAAgB6E,IAEtD,IAAM3F,EAAOmE,SAAS+B,aAAa,CAAA,cAAAC,MAAA,CAAe/E,GAElDpB,OAAAA,GAAAA,EAAMoG,SAAS,CAACC,MAAM,CAAC,qBACxB"}