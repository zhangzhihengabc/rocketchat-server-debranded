function module(e,t,n){let s,i,o;n.export({CustomSounds:()=>a}),n.link("meteor/reactive-var",{ReactiveVar(e){s=e}},0),n.link("../../../utils/client",{getURL(e){i=e}},1),n.link("../../../utils/client/lib/SDKClient",{sdk(e){o=e}},2);let l=e=>"custom-sound-".concat(e),d=(e,t)=>i(e,t,void 0,!0),c=[{_id:"chime",name:"Chime",extension:"mp3",src:d("sounds/chime.mp3")},{_id:"door",name:"Door",extension:"mp3",src:d("sounds/door.mp3")},{_id:"beep",name:"Beep",extension:"mp3",src:d("sounds/beep.mp3")},{_id:"chelle",name:"Chelle",extension:"mp3",src:d("sounds/chelle.mp3")},{_id:"ding",name:"Ding",extension:"mp3",src:d("sounds/ding.mp3")},{_id:"droplet",name:"Droplet",extension:"mp3",src:d("sounds/droplet.mp3")},{_id:"highbell",name:"Highbell",extension:"mp3",src:d("sounds/highbell.mp3")},{_id:"seasons",name:"Seasons",extension:"mp3",src:d("sounds/seasons.mp3")},{_id:"telephone",name:"Telephone",extension:"mp3",src:d("sounds/telephone.mp3")},{_id:"outbound-call-ringing",name:"Outbound Call Ringing",extension:"mp3",src:d("sounds/outbound-call-ringing.mp3")},{_id:"call-ended",name:"Call Ended",extension:"mp3",src:d("sounds/call-ended.mp3")},{_id:"dialtone",name:"Dialtone",extension:"mp3",src:d("sounds/dialtone.mp3")},{_id:"ringtone",name:"Ringtone",extension:"mp3",src:d("sounds/ringtone.mp3")}],a=new class e{constructor(){this.list=void 0,this.initialFetchDone=void 0,this.play=async function(e){let{volume:t=1,loop:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=document.querySelector("#".concat(l(e)));if(null!=s&&s.play)return s.volume=t,s.loop=n,await s.play(),s},this.pause=e=>{let t=document.querySelector("#".concat(l(e)));null!=t&&t.pause&&t.pause()},this.stop=e=>{let t=document.querySelector("#".concat(l(e)));null!=t&&t.load&&(null==t||t.load())},this.isPlaying=e=>{let t=document.querySelector("#".concat(l(e)));return t&&t.duration>0&&!t.paused},this.fetchCustomSoundList=async()=>{if(this.initialFetchDone)return;let e=await o.call("listCustomSounds");for(let t of e)this.add(t);this.initialFetchDone=!0},this.list=new s({}),this.initialFetchDone=!1,c.forEach(e=>this.add(e))}add(e){e.src||(e.src=this.getURL(e));let t=document.createElement("source");t.src=e.src;let n=document.createElement("audio");n.id=l(e._id),n.preload="none",n.appendChild(t),document.body.appendChild(n);let s=this.list.get();s[e._id]=e,this.list.set(s)}remove(e){let t=this.list.get();delete t[e._id],this.list.set(t);let n=document.querySelector("#".concat(l(e._id)));null==n||n.remove()}getSound(e){return this.list.get()[e]}update(e){let t=document.querySelector("#".concat(l(e._id)));if(t){let n=this.list.get();e.src||(e.src=this.getURL(e)),n[e._id]=e,this.list.set(n);let s=t.querySelector("source");s&&(s.src=e.src),t.load()}else this.add(e)}getURL(e){return d("/custom-sounds/".concat(e._id,".").concat(e.extension),{_dc:e.random||0})}getList(){let e=Object.values(this.list.get());return e.sort((e,t)=>{var n,s;return(null!==(n=e.name)&&void 0!==n?n:"").localeCompare(null!==(s=t.name)&&void 0!==s?s:"")})}}}
//# sourceMappingURL=/dynamic/app/custom-sounds/client/lib/d4d83e813076fad5174968a34d37323838ebefca.map
