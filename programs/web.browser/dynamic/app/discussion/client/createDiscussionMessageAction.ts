function module(i,e,s){let t,o,n,r,l,a,u,c,d;s.link("meteor/meteor",{Meteor(i){t=i}},0),s.link("meteor/tracker",{Tracker(i){o=i}},1),s.link("../../../client/components/CreateDiscussion/CreateDiscussion",{default(i){n=i}},2),s.link("../../../client/lib/imperativeModal",{imperativeModal(i){r=i}},3),s.link("../../../client/lib/rooms/roomCoordinator",{roomCoordinator(i){l=i}},4),s.link("../../../client/lib/utils/messageArgs",{messageArgs(i){a=i}},5),s.link("../../authorization/client",{hasPermission(i){u=i}},6),s.link("../../settings/client",{settings(i){c=i}},7),s.link("../../ui-utils/client",{MessageAction(i){d=i}},8),t.startup(()=>{o.autorun(()=>{if(!c.get("Discussion_enabled"))return d.removeButton("start-discussion");d.addButton({id:"start-discussion",icon:"discussion",label:"Discussion_start",type:"communication",context:["message","message-mobile","videoconf"],async action(i,e){var s;let{message:t=a(this).msg,room:o}=e;r.open({component:n,props:{defaultParentRoom:(null==o?void 0:o.prid)||(null==o?void 0:o._id),onClose:r.close,parentMessageId:t._id,nameSuggestion:null==t?void 0:null===(s=t.msg)||void 0===s?void 0:s.substr(0,140)}})},condition(i){let{message:{u:{_id:e},drid:s,dcount:t},room:o,subscription:n,user:r}=i;if(s||!Number.isNaN(t)||!n)return!1;let a=l.isLivechatRoom(o.t);return!a&&!!r&&(e!==r._id?u("start-discussion-other-user",o._id):u("start-discussion",o._id))},order:1,group:"menu"})})})}
//# sourceMappingURL=/dynamic/app/discussion/client/981fb910f4c2ac744cc178b7edf4a8ea7ac8d5bf.map
