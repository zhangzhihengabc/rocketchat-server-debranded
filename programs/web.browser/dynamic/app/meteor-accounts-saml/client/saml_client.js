function module(o,e,n){let t,i,l,a,c;n.link("@rocket.chat/random",{Random(o){t=o}},0),n.link("meteor/accounts-base",{Accounts(o){i=o}},1),n.link("meteor/meteor",{Meteor(o){l=o}},2),n.link("meteor/service-configuration",{ServiceConfiguration(o){a=o}},3),n.link("../../utils/client/lib/SDKClient",{sdk(o){c=o}},4),i.saml||(i.saml={});let r=l.logout,s={TERMINATE_SAML:"SAML",ONLY_RC:"Local"};l.logout=async function(){let o=await a.configurations.findOneAsync({service:"saml"});if(o){let e=o.clientConfig&&o.clientConfig.provider;if(e){if((null==o.logoutBehaviour||o.logoutBehaviour===s.TERMINATE_SAML)&&o.idpSLORedirectURL)return console.info("SAML session terminated via SLO"),l.logoutWithSaml({provider:e});o.logoutBehaviour===s.ONLY_RC&&console.info("SAML session not terminated, only the Rocket.Chat session is going to be killed")}}for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.apply(l,n)},l.loginWithSaml=function(o){o=o||{};let e="id-".concat(t.id());o.credentialToken=e,window.location.href="_saml/authorize/".concat(o.provider,"/").concat(o.credentialToken)},l.logoutWithSaml=function(o){c.call("samlLogout",o.provider).then(e=>{if(!e){r.apply(l);return}l._localStorage.removeItem(i.USER_ID_KEY),window.location.replace(l.absoluteUrl("_saml/sloRedirect/".concat(o.provider,"/?redirect=").concat(encodeURIComponent(e))))}).catch(()=>r.apply(l))},l.loginWithSamlToken=function(o,e){i.callLoginMethod({methodArguments:[{saml:!0,credentialToken:o}],userCallback:e})}}
//# sourceMappingURL=/dynamic/app/meteor-accounts-saml/client/a73514d5f3fcc6d4fa79c41448190af2a1d330b9.map
