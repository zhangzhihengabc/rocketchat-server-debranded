)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/webrtc/client/actionLink.tsx","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\n\nimport { actionLinks } from '../../../client/lib/actionLinks';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { ChatRoom } from '../../models/client';\nimport { Notifications } from '../../notifications/client';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { t } from '../../utils/lib/i18n';\n\nactionLinks.register('joinLivechatWebRTCCall', (message: IMessage) => {\n\tconst room = ChatRoom.findOne({ _id: message.rid });\n\tif (!room) {\n\t\tthrow new Error('Room not found');\n\t}\n\tconst { callStatus, _id } = room;\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\tdispatchToastMessage({ type: 'info', message: t('Call_Already_Ended') });\n\t\treturn;\n\t}\n\twindow.open(`/meet/${_id}`, _id);\n});\n\nactionLinks.register('endLivechatWebRTCCall', async (message: IMessage) => {\n\tconst room = ChatRoom.findOne({ _id: message.rid });\n\tif (!room) {\n\t\tthrow new Error('Room not found');\n\t}\n\tconst { callStatus, _id } = room;\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\tdispatchToastMessage({ type: 'info', message: t('Call_Already_Ended') });\n\t\treturn;\n\t}\n\tawait sdk.rest.put(`/v1/livechat/webrtc.call/${message._id}`, { rid: _id, status: 'ended' });\n\tNotifications.notifyRoom(_id, 'webrtc' as any, 'callStatus', { callStatus: 'ended' });\n});\n",null],"names":["actionLinks","dispatchToastMessage","ChatRoom","Notifications","sdk","t","module","link","register","message","room","findOne","_id","rid","Error","callStatus","type","window","open","concat","rest","put","status","notifyRoom"],"mappings":"2BAEAA,EAA8DC,EAAAC,EAAAC,EAAAC,EAAAC,EAArDC,EAAaC,IAAA,CAAM,kCAAkC,CAAAP,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAL,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,6BAAAA,CAAAH,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAF,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,uBAAAA,CAAAD,EAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAO9DL,EAAYQ,QAAQ,CAAC,yBAA2BC,IAC/C,IAAMC,EAAOR,EAASS,OAAO,CAAC,CAAEC,IAAKH,EAAQI,GAAAA,AAAG,GAChD,GAAI,CAACH,EACJ,MAAM,AAAII,MAAM,kBAEjB,GAAM,CAAEC,WAAAA,CAAU,CAAEH,IAAAA,CAAAA,CAAK,CAAGF,EAC5B,GAAIK,AAAe,aAAfA,GAA6BA,AAAe,UAAfA,EAAwB,CACxDd,EAAqB,CAAEe,KAAM,OAAQP,QAASJ,EAAE,qBAAqB,GACrE,OAEDY,OAAOC,IAAI,CAAA,SAAAC,MAAA,CAAUP,GAAOA,EAC7B,GAEAZ,EAAYQ,QAAQ,CAAC,wBAAyB,MAAOC,IACpD,IAAMC,EAAOR,EAASS,OAAO,CAAC,CAAEC,IAAKH,EAAQI,GAAAA,AAAG,GAChD,GAAI,CAACH,EACJ,MAAM,AAAII,MAAM,kBAEjB,GAAM,CAAEC,WAAAA,CAAU,CAAEH,IAAAA,CAAAA,CAAK,CAAGF,EAC5B,GAAIK,AAAe,aAAfA,GAA6BA,AAAe,UAAfA,EAAwB,CACxDd,EAAqB,CAAEe,KAAM,OAAQP,QAASJ,EAAE,qBAAqB,GACrE,OAED,MAAMD,EAAIgB,IAAI,CAACC,GAAG,CAAA,4BAAAF,MAAA,CAA6BV,EAAQG,GAAG,EAAI,CAAEC,IAAKD,EAAKU,OAAQ,OAAO,GACzFnB,EAAcoB,UAAU,CAACX,EAAK,SAAiB,aAAc,CAAEG,WAAY,OAAO,EACnF"}