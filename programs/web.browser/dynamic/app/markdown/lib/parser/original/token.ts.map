)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/markdown/lib/parser/original/token.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["/*\n * Markdown is a named function that will parse markdown syntax\n * @param {String} msg - The message html\n */\nimport type { IMessage, TokenType, TokenExtra } from '@rocket.chat/core-typings';\nimport { Random } from '@rocket.chat/random';\n\nexport const addAsToken = (message: IMessage, html: string, type: TokenType, extra?: TokenExtra): string => {\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\tconst token = `=!=${Random.id()}=!=`;\n\tmessage.tokens.push({\n\t\ttoken,\n\t\ttype,\n\t\ttext: html,\n\t\t...(extra && { ...extra }),\n\t});\n\n\treturn token;\n};\n\nexport const isToken = (msg: string): boolean => /=!=[.a-z0-9]{17}=!=/gim.test(msg.trim());\n\nexport const validateAllowedTokens = (message: IMessage, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens: string[] = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens?.filter(({ token }) => tokens.includes(token)) || [];\n\treturn tokensFound.length === 0 || tokensFound.every((token) => token.type && desiredTokens.includes(token.type));\n};\n",null],"names":["_objectSpread","Random","module","link","default","export","addAsToken","isToken","validateAllowedTokens","message","html","type","extra","tokens","token","concat","id","push","text","msg","test","trim","desiredTokens","_message$tokens","match","tokensFound","filter","_ref","includes","length","every"],"mappings":"2BAKAA,EAA6CC,EAA5BC,EAAMC,IAAA,CAAA,uCAAsB,CAAAC,QAAAA,CAAAA,EAAAJ,EAAAA,CAAA,CAAA,EAAA,GAA7CE,EAAOG,MAAE,CAAA,CAAMC,WAAQ,IAAAA,EAAAC,QAAsB,IAAAA,EAAAC,sBAAAA,IAAAA,CAAA,GAAAN,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAD,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAEtC,IAAMK,EAAa,CAACG,EAAmBC,EAAcC,EAAiBC,KACvEH,EAAQI,MAAM,EAClBJ,CAAAA,EAAQI,MAAM,CAAG,EAAE,AAAF,EAElB,IAAMC,EAAK,MAAAC,MAAA,CAASd,EAAOe,EAAE,GAAE,OAQ/B,OAPAP,EAAQI,MAAM,CAACI,IAAI,CAAAjB,EAAA,CAClBc,MAAAA,EACAH,KAAAA,EACAO,KAAMR,CAAI,EACNE,GAAKZ,EAAA,CAAA,EAASY,KAGZE,CACR,EAEaP,EAAWY,GAAyB,yBAAyBC,IAAI,CAACD,EAAIE,IAAI,IAE1Eb,EAAwB,CAACC,EAAmBO,EAAYM,KAAuC,IAAAC,EAC3G,IAAMV,EAAmBG,EAAGQ,KAAK,CAAC,2BAA6B,EAAE,CAC3DC,EAAc,CAAA,AAAc,OAAdF,CAAAA,EAAAd,EAAQI,MAAM,AAANA,GAAMU,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBG,MAAM,CAACC,IAAA,GAAC,CAAEb,MAAAA,CAAAA,CAAO,CAAAa,EAAA,OAAKd,EAAOe,QAAQ,CAACd,EAAM,EAAA,GAAK,EAAE,CACvF,OAAOW,AAAuB,IAAvBA,EAAYI,MAAM,EAAUJ,EAAYK,KAAK,CAAEhB,GAAUA,EAAMH,IAAI,EAAIW,EAAcM,QAAQ,CAACd,EAAMH,IAAI,EAChH"}