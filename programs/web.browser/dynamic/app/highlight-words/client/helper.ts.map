)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/highlight-words/client/helper.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { escapeRegExp } from '@rocket.chat/string-helpers';\n\nconst checkHighlightedWordsInUrls = (msg: string, urlRegex: RegExp) => msg.match(urlRegex);\n\nconst removeHighlightedUrls = (msg: string, highlight: string, urlMatches: string[]) => {\n\tconst highlightRegex = new RegExp(highlight, 'gmi');\n\n\treturn urlMatches.reduce((msg, match) => {\n\t\tconst withTemplate = match.replace(highlightRegex, `<mark class=\"highlight-text\">${highlight}</mark>`);\n\t\tconst regexWithTemplate = new RegExp(withTemplate, 'i');\n\t\treturn msg.replace(regexWithTemplate, match);\n\t}, msg);\n};\n\nconst highlightTemplate = '$1<mark class=\"highlight-text\">$2</mark>$3';\n\nexport const getRegexHighlight = (highlight: string) =>\n\tnew RegExp(\n\t\t`(^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(${escapeRegExp(highlight)})($|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,ØŒ'\\\\\\\"\\\\+!?:-])(?![^<]*>|[^<>]*<\\\\/)`,\n\t\t'gmi',\n\t);\n\nexport const getRegexHighlightUrl = (highlight: string) =>\n\tnew RegExp(\n\t\t`https?:\\/\\/(www\\\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{2,256}\\\\.[a-z]{2,6}\\\\b([-a-zA-Z0-9@:%_\\\\+.~#?&//=]*)(${escapeRegExp(\n\t\t\thighlight,\n\t\t)})\\\\b([-a-zA-Z0-9@:%_\\\\+.~#?&//=]*)`,\n\t\t'gmi',\n\t);\n\nexport const highlightWords = (msg: string, highlights: { highlight: string; regex: RegExp; urlRegex: RegExp }[]) =>\n\thighlights.reduce((msg: string, { highlight, regex, urlRegex }: { highlight: string; regex: RegExp; urlRegex: RegExp }) => {\n\t\tconst urlMatches = checkHighlightedWordsInUrls(msg, urlRegex);\n\t\tif (!urlMatches) {\n\t\t\treturn msg.replace(regex, highlightTemplate);\n\t\t}\n\t\treturn removeHighlightedUrls(msg.replace(regex, highlightTemplate), highlight, urlMatches);\n\t}, msg);\n",null],"names":["escapeRegExp","module","export","getRegexHighlight","getRegexHighlightUrl","highlightWords","checkHighlightedWordsInUrls","msg","urlRegex","match","removeHighlightedUrls","highlight","urlMatches","highlightRegex","RegExp","reduce","withTemplate","replace","concat","regexWithTemplate","highlightTemplate","highlights","_ref","regex"],"mappings":"2BAA2DA,EAA3DC,EAAOC,MAAE,CAAA,CAAAC,kBAAoB,IAAAA,EAAAC,qBAA8B,IAAAA,EAAAC,eAAAA,IAAAA,CAAA,GAAAJ,EAAAA,IAAAA,CAAAA,8BAAAA,CAAAD,aAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAE3D,IAAMM,EAA8B,CAACC,EAAaC,IAAqBD,EAAIE,KAAK,CAACD,GAE3EE,EAAwB,CAACH,EAAaI,EAAmBC,KAC9D,IAAMC,EAAiB,AAAIC,OAAOH,EAAW,OAE7C,OAAOC,EAAWG,MAAM,CAAC,CAACR,EAAKE,KAC9B,IAAMO,EAAeP,EAAMQ,OAAO,CAACJ,EAAc,gCAAAK,MAAA,CAAkCP,EAAS,YACtFQ,EAAoB,AAAIL,OAAOE,EAAc,KACnD,OAAOT,EAAIU,OAAO,CAACE,EAAmBV,EACvC,EAAGF,EACJ,EAEMa,EAAoB,6CAEbjB,EAAqBQ,GACjC,AAAIG,OAAM,yCAAAI,MAAA,CACgClB,EAAaW,GAAU,+DAChE,OAGWP,EAAwBO,GACpC,AAAIG,OAAM,kGAAAI,MAAA,CAC2FlB,EACnGW,GACA,sCACD,OAGWN,EAAiB,CAACE,EAAac,IAC3CA,EAAWN,MAAM,CAAC,CAACR,EAAWe,KAA4F,GAA1F,CAAEX,UAAAA,CAAS,CAAEY,MAAAA,CAAK,CAAEf,SAAAA,CAAAA,CAAkE,CAAAc,EAC/GV,EAAaN,EAA4BC,EAAKC,UACpD,AAAKI,EAGEF,EAAsBH,EAAIU,OAAO,CAACM,EAAOH,GAAoBT,EAAWC,GAFvEL,EAAIU,OAAO,CAACM,EAAOH,EAG5B,EAAGb"}