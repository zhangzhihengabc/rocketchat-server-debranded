)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/webdav/client/actionButton.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport { messageArgs } from '../../../client/lib/utils/messageArgs';\nimport SaveToWebdav from '../../../client/views/room/webdav/SaveToWebdavModal';\nimport { WebdavAccounts } from '../../models/client';\nimport { settings } from '../../settings/client';\nimport { MessageAction } from '../../ui-utils/client';\nimport { getURL } from '../../utils/client';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'webdav-upload',\n\t\ticon: 'upload',\n\t\tlabel: 'Save_To_Webdav',\n\t\tcondition: ({ message, subscription }) => {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (WebdavAccounts.findOne() == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!message.file) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn settings.get('Webdav_Integration_Enabled');\n\t\t},\n\t\taction(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst [attachment] = message.attachments || [];\n\t\t\tconst url = getURL(attachment.title_link as string, { full: true });\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: SaveToWebdav,\n\t\t\t\tprops: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattachment,\n\t\t\t\t\t\turl,\n\t\t\t\t\t},\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n",null],"names":["Meteor","imperativeModal","messageArgs","SaveToWebdav","WebdavAccounts","settings","MessageAction","getURL","module","link","default","startup","addButton","id","icon","label","condition","_ref","message","subscription","findOne","file","get","action","_","props","msg","attachment","attachments","url","title_link","full","open","component","data","onClose","close","order","group"],"mappings":"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAT,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,sCAAAA,CAAAP,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,sDAAAA,CAAAE,QAAAA,CAAAA,EAAAP,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,eAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAF,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,qBAAAA,CAAAD,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAUvCP,EAAOW,OAAO,CAAC,KACdL,EAAcM,SAAS,CAAC,CACvBC,GAAI,gBACJC,KAAM,SACNC,MAAO,iBACPC,UAAWC,IAA8B,GAA7B,CAAEC,QAAAA,CAAO,CAAEC,aAAAA,CAAAA,CAAc,CAAAF,SACpC,AAAoB,MAAhBE,GAGAf,AAA4B,MAA5BA,EAAegB,OAAO,MAGrBF,EAAQG,IAAI,EAIVhB,EAASiB,GAAG,CAAC,6BACrB,EACAC,OAAOC,CAAC,CAAEC,CAAK,EACd,GAAM,CAAEP,QAAAA,EAAUhB,EAAY,IAAI,EAAEwB,GAAAA,CAAK,CAAGD,EACtC,CAACE,EAAW,CAAGT,EAAQU,WAAW,EAAI,EAAE,CACxCC,EAAMtB,EAAOoB,EAAWG,UAAoB,CAAE,CAAEC,KAAM,CAAA,CAAI,GAChE9B,EAAgB+B,IAAI,CAAC,CACpBC,UAAW9B,EACXsB,MAAO,CACNS,KAAM,CACLP,WAAAA,EACAE,IAAAA,GAEDM,QAASlC,EAAgBmC,KAAAA,GAG5B,EACAC,MAAO,IACPC,MAAO,QAET"}