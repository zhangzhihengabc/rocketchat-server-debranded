)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/livechat/client/startup/notifyUnreadRooms.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomSounds } from '../../../custom-sounds/client';\nimport { Subscriptions, Users } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { getUserPreference } from '../../../utils/client';\n\nlet audio = null;\n\nMeteor.startup(() => {\n\tTracker.autorun(async () => {\n\t\tif (!settings.get('Livechat_continuous_sound_notification_new_livechat_room')) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst subs = await Subscriptions.find({ t: 'l', ls: { $exists: false }, open: true }).count();\n\t\tif (subs === 0) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = await Users.findOne(\n\t\t\t{ _id: Meteor.userId() },\n\t\t\t{\n\t\t\t\tprojection: {\n\t\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\n\t\taudio = CustomSounds.play(newRoomNotification, { loop: true });\n\t});\n});\n",null],"names":["Meteor","Tracker","CustomSounds","Subscriptions","Users","settings","getUserPreference","module","link","v","audio","startup","autorun","get","pause","subs","find","t","ls","$exists","open","count","user","findOne","_id","userId","projection","newRoomNotification","play","loop"],"mappings":"2BAAIA,EAAgEC,EAAoEC,EAAkGC,EAAcC,EAAwGC,EAAiFC,EAAtaC,EAAOC,IAAI,CAAC,gBAAgB,CAACR,OAAOS,CAAC,EAAET,EAAOS,CAAC,CAAC,EAAE,GAAeF,EAAOC,IAAI,CAAC,iBAAiB,CAACP,QAAQQ,CAAC,EAAER,EAAQQ,CAAC,CAAC,EAAE,GAAoBF,EAAOC,IAAI,CAAC,gCAAgC,CAACN,aAAaO,CAAC,EAAEP,EAAaO,CAAC,CAAC,EAAE,GAA2BF,EAAOC,IAAI,CAAC,yBAAyB,CAACL,cAAcM,CAAC,EAAEN,EAAcM,CAAC,EAAEL,MAAMK,CAAC,EAAEL,EAAMK,CAAC,CAAC,EAAE,GAAgBF,EAAOC,IAAI,CAAC,2BAA2B,CAACH,SAASI,CAAC,EAAEJ,EAASI,CAAC,CAAC,EAAE,GAAyBF,EAAOC,IAAI,CAAC,wBAAwB,CAACF,kBAAkBG,CAAC,EAAEH,EAAkBG,CAAC,CAAC,EAAE,GAQnhB,IAAIC,EAAQ,KAEZV,EAAOW,OAAO,CAAC,KACdV,EAAQW,OAAO,CAAC,UACf,GAAI,CAACP,EAASQ,GAAG,CAAC,4DAA6D,CAC9EH,GAASA,EAAMI,KAAK,GACpB,MACD,CAEA,IAAMC,EAAO,MAAMZ,EAAca,IAAI,CAAC,CAAEC,EAAG,IAAKC,GAAI,CAAEC,QAAS,CAAA,CAAM,EAAGC,KAAM,CAAA,CAAK,GAAGC,KAAK,GAC3F,GAAIN,AAAS,IAATA,EAAY,CACfL,GAASA,EAAMI,KAAK,GACpB,MACD,CAEA,IAAMQ,EAAO,MAAMlB,EAAMmB,OAAO,CAC/B,CAAEC,IAAKxB,EAAOyB,MAAM,EAAG,EACvB,CACCC,WAAY,CACX,2CAA4C,CAC7C,CACD,GAGKC,EAAsBrB,EAAkBgB,EAAM,uBAEpDZ,EAAQR,EAAa0B,IAAI,CAACD,EAAqB,CAAEE,KAAM,CAAA,CAAK,EAC7D,EACD"}