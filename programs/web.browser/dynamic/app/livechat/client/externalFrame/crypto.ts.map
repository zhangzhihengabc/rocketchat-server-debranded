)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/livechat/client/externalFrame/crypto.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["function ab2str(buf: ArrayBuffer): string {\n\treturn String.fromCharCode(...new Uint16Array(buf));\n}\n\nexport async function generateKey(): Promise<string> {\n\tconst key = await crypto.subtle.generateKey({ name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n\tconst exportedKey = await crypto.subtle.exportKey('jwk', key);\n\treturn JSON.stringify(exportedKey);\n}\n\nexport async function getKeyFromString(keyStr: string): Promise<CryptoKey> {\n\tconst key = JSON.parse(keyStr);\n\treturn crypto.subtle.importKey('jwk', key, { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n}\n\nexport async function encrypt(text: string, key: CryptoKey): Promise<string> {\n\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\tconst data = new TextEncoder().encode(text);\n\tconst enc = await crypto.subtle.encrypt({ name: 'AES-GCM', iv: vector }, key, data);\n\tconst cipherText = new Uint8Array(enc);\n\treturn encodeURIComponent(btoa(ab2str(vector) + ab2str(cipherText)));\n}\n",null],"names":["ab2str","buf","String","fromCharCode","Uint16Array","generateKey","key","crypto","subtle","name","length","exportedKey","exportKey","JSON","stringify","getKeyFromString","keyStr","parse","importKey","encrypt","text","vector","getRandomValues","Uint8Array","data","TextEncoder","encode","enc","iv","cipherText","encodeURIComponent","btoa","module"],"mappings":"uBAAA,SAASA,EAAOC,CAAgB,EAC/B,OAAOC,OAAOC,YAAY,IAAI,IAAIC,YAAYH,GAC/C,CAEO,eAAeI,IACrB,IAAMC,EAAM,MAAMC,OAAOC,MAAM,CAACH,WAAW,CAAC,CAAEI,KAAM,UAAWC,OAAQ,GAAG,EAAI,CAAA,EAAM,CAAC,UAAW,UAAU,EACpGC,EAAc,MAAMJ,OAAOC,MAAM,CAACI,SAAS,CAAC,MAAON,GACzD,OAAOO,KAAKC,SAAS,CAACH,EACvB,CAEO,eAAeI,EAAiBC,CAAc,EACpD,IAAMV,EAAMO,KAAKI,KAAK,CAACD,GACvB,OAAOT,OAAOC,MAAM,CAACU,SAAS,CAAC,MAAOZ,EAAK,CAAEG,KAAM,UAAWC,OAAQ,GAAG,EAAI,CAAA,EAAM,CAAC,UAAW,UAAU,CAC1G,CAEO,eAAeS,EAAQC,CAAY,CAAEd,CAAc,EACzD,IAAMe,EAASd,OAAOe,eAAe,CAAC,IAAIC,WAAW,KAC/CC,EAAO,IAAIC,cAAcC,MAAM,CAACN,GAChCO,EAAM,MAAMpB,OAAOC,MAAM,CAACW,OAAO,CAAC,CAAEV,KAAM,UAAWmB,GAAIP,CAAM,EAAIf,EAAKkB,GACxEK,EAAa,IAAIN,WAAWI,GAClC,OAAOG,mBAAmBC,KAAK/B,EAAOqB,GAAUrB,EAAO6B,IACxD,CArBAG,EAAAA,MAAS,CAAA,CAAM3B,YAAiB,IAAAA,EAAAU,iBAAAA,IAAAA,EAAAI,QAAAA,IAAAA,CAAA"}