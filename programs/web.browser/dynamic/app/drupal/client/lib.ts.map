)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/drupal/client/lib.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import type { OauthConfig } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomOAuth } from '../../custom-oauth/client/custom_oauth_client';\nimport { settings } from '../../settings/client';\n\n// Drupal Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/drupal\n// In RocketChat -> Administration the URL needs to be http(s)://{drupal.server}/\n\nconst config: OauthConfig = {\n\tserverURL: '',\n\tidentityPath: '/oauth2/UserInfo',\n\tauthorizePath: '/oauth2/authorize',\n\ttokenPath: '/oauth2/token',\n\tscope: 'openid email profile offline_access',\n\ttokenSentVia: 'payload',\n\tusernameField: 'preferred_username',\n\tmergeUsers: true,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.drupal'],\n\t\tforOtherUsers: ['services.drupal.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Drupal = new CustomOAuth('drupal', config);\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (settings.get('API_Drupal_URL')) {\n\t\t\tconfig.serverURL = settings.get('API_Drupal_URL');\n\t\t\tDrupal.configure(config);\n\t\t}\n\t});\n});\n",null],"names":["Meteor","Tracker","CustomOAuth","settings","module","link","config","serverURL","identityPath","authorizePath","tokenPath","scope","tokenSentVia","usernameField","mergeUsers","addAutopublishFields","forLoggedInUser","forOtherUsers","accessTokenParam","Drupal","startup","autorun","get","configure"],"mappings":"2BACAA,EAAuCC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAL,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,iBAAAA,CAAAH,QAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAG,EAAAA,IAAAA,CAAAA,gDAAAA,CAAAF,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAD,SAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GASvC,IAAMG,EAAsB,CAC3BC,UAAW,GACXC,aAAc,mBACdC,cAAe,oBACfC,UAAW,gBACXC,MAAO,sCACPC,aAAc,UACdC,cAAe,qBACfC,WAAY,CAAA,EACZC,qBAAsB,CACrBC,gBAAiB,CAAC,kBAAkB,CACpCC,cAAe,CAAC,uBAAsB,EAEvCC,iBAAkB,gBAGbC,EAAS,IAAIjB,EAAY,SAAUI,GAEzCN,EAAOoB,OAAO,CAAC,KACdnB,EAAQoB,OAAO,CAAC,KACXlB,EAASmB,GAAG,CAAC,oBAChBhB,EAAOC,SAAS,CAAGJ,EAASmB,GAAG,CAAC,kBAChCH,EAAOI,SAAS,CAACjB,GAEnB,EACD"}