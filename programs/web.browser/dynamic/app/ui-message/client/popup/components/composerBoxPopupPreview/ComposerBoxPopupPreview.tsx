function module(e,t,o){let l,r,a,i,s,n,c,u,d,m,p;o.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),o.link("@rocket.chat/fuselage",{Box(e){r=e},Skeleton(e){a=e},Tile(e){i=e}},0),o.link("@rocket.chat/fuselage-hooks",{useUniqueId(e){s=e}},1),o.link("@rocket.chat/ui-contexts",{useMethod(e){n=e}},2),o.link("react",{default(e){c=e},forwardRef(e){u=e},useEffect(e){d=e},useImperativeHandle(e){m=e}},3),o.link("../../../../../../client/views/room/contexts/ChatContext",{useChat(e){p=e}},4);let v=u(function e(e,t){let{focused:o,items:u,rid:v,tmid:h,select:f,suspended:b}=e,w=s(),E=p(),g=n("executeSlashCommandPreview");m(t,()=>l({getFilter:()=>{var e,t;let o=null==E?void 0:null===(e=E.composer)||void 0===e?void 0:e.substring(0,null==E?void 0:null===(t=E.composer)||void 0===t?void 0:t.selection.start);if(!o)throw Error("No value");let l=o.match(/(\/[\w\d\S]+ )([^]*)$/);if(!l)throw Error("No matches");let r=l[1].replace("/","").trim().toLowerCase(),a=l[2];return{cmd:r,params:a,msg:{rid:v,tmid:h}}}},!b&&{select:e=>{var t,o,l;let r=null==E?void 0:null===(t=E.composer)||void 0===t?void 0:t.substring(0,null==E?void 0:null===(o=E.composer)||void 0===o?void 0:o.selection.start);if(!r)throw Error("No value");let a=r.match(/(\/[\w\d\S]+ )([^]*)$/);if(!a)throw Error("No matches");let i=a[1].replace("/","").trim().toLowerCase(),s=a[2];g({cmd:i,params:s,msg:{rid:v,tmid:h}},{id:e._id,type:e.type,value:e.value}),null==E||null===(l=E.composer)||void 0===l||l.setText("")}}),[null==E?void 0:E.composer,g,v,h,b]);let x=u.flatMap(e=>e.isSuccess?e.data:[]).sort((e,t)=>("sort"in e&&e.sort||0)-("sort"in t&&t.sort||0)),k=u.some(e=>e.isLoading&&"idle"!==e.fetchStatus);return(d(()=>{if(o){let e=document.getElementById("popup-item-".concat(o._id));e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}},[o]),b)?null:c.createElement(r,{className:"message-popup-position",position:"relative"},c.createElement(i,{className:"message-popup",display:"flex",padding:8,role:"menu",mbe:8,"aria-labelledby":w},c.createElement(r,{role:"listbox",display:"flex",overflow:"auto",fontSize:0,width:0,flexGrow:1,"aria-busy":k},k&&[,,,,,].fill(5).map((e,t)=>c.createElement(a,{variant:"rect",h:"100px",w:"120px",m:2,key:t})),!k&&x.map(e=>c.createElement(r,{onClick:()=>f(e),role:"option",className:["popup-item",e===o&&"selected"].filter(Boolean).join(" "),id:"popup-item-".concat(e._id),key:e._id,bg:e===o?"selected":void 0,borderColor:e===o?"highlight":"transparent",tabIndex:e===o?0:-1,"aria-selected":e===o,m:2,borderWidth:"default",borderRadius:"x4"},"image"===e.type&&c.createElement("img",{src:e.value,alt:e._id}),"audio"===e.type&&c.createElement("audio",{controls:!0},c.createElement("source",{src:e.value}),"Your browser does not support the audio element."),"video"===e.type&&c.createElement("video",{controls:!0,className:"inline-video"},c.createElement("source",{src:e.value}),"Your browser does not support the video element."),"text"===e.type&&c.createElement("h4",null,e.value),"other"===e.type&&c.createElement("code",null,e.value))))))});o.exportDefault(v)}
//# sourceMappingURL=/dynamic/app/ui-message/client/popup/components/composerBoxPopupPreview/1672ac79450a81dc14b3c65b4ca02eaf704dd31c.map
