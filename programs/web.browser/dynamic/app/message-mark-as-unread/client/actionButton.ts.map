)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/message-mark-as-unread/client/actionButton.ts","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { roomCoordinator } from '../../../client/lib/rooms/roomCoordinator';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { messageArgs } from '../../../client/lib/utils/messageArgs';\nimport { router } from '../../../client/providers/RouterProvider';\nimport { ChatSubscription } from '../../models/client';\nimport { LegacyRoomManager, MessageAction } from '../../ui-utils/client';\nimport { sdk } from '../../utils/client/lib/SDKClient';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'mark-message-as-unread',\n\t\ticon: 'flag',\n\t\tlabel: 'Mark_unread',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\ttype: 'interaction',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\n\t\t\ttry {\n\t\t\t\tawait sdk.call('unreadMessages', message);\n\t\t\t\tconst subscription = ChatSubscription.findOne({\n\t\t\t\t\trid: message.rid,\n\t\t\t\t});\n\n\t\t\t\tif (subscription == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait LegacyRoomManager.close(subscription.t + subscription.name);\n\t\t\t\treturn router.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\tcondition({ message, user, room }) {\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!user) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn message.u._id !== user._id;\n\t\t},\n\t\torder: 4,\n\t\tgroup: 'menu',\n\t});\n});\n",null],"names":["Meteor","roomCoordinator","dispatchToastMessage","messageArgs","router","ChatSubscription","LegacyRoomManager","MessageAction","sdk","module","link","startup","addButton","id","icon","label","context","type","action","_","props","message","msg","call","subscription","findOne","rid","close","t","name","navigate","error","condition","_ref","user","room","isLivechatRoom","u","_id","order","group"],"mappings":"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAV,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAS,EAAAA,IAAAA,CAAAA,4CAAAA,CAAAR,gBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAQ,EAAAA,IAAAA,CAAAA,4BAAAA,CAAAP,qBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAO,EAAAA,IAAAA,CAAAA,wCAAAA,CAAAN,YAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAM,EAAAA,IAAAA,CAAAA,2CAAAA,CAAAL,OAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAK,EAAAA,IAAAA,CAAAA,sBAAAA,CAAAJ,iBAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAI,EAAAA,IAAAA,CAAAA,wBAAAA,CAAAH,kBAAAA,CAAAA,EAAAA,EAAAA,CAAA,EAAAC,cAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAAAE,EAAAA,IAAAA,CAAAA,mCAAAA,CAAAD,IAAAA,CAAAA,EAAAA,EAAAA,CAAA,CAAA,EAAA,GAUvCR,EAAOW,OAAO,CAAC,KACdJ,EAAcK,SAAS,CAAC,CACvBC,GAAI,yBACJC,KAAM,OACNC,MAAO,cACPC,QAAS,CAAC,UAAW,iBAAkB,UAAU,CACjDC,KAAM,cACN,MAAMC,OAAOC,CAAC,CAAEC,CAAK,EACpB,GAAM,CAAEC,QAAAA,EAAUlB,EAAY,IAAI,EAAEmB,GAAAA,CAAK,CAAGF,EAE5C,GAAI,CACH,MAAMZ,EAAIe,IAAI,CAAC,iBAAkBF,GACjC,IAAMG,EAAenB,EAAiBoB,OAAO,CAAC,CAC7CC,IAAKL,EAAQK,GAAAA,GAGd,GAAIF,AAAgB,MAAhBA,EACH,OAGD,OADA,MAAMlB,EAAkBqB,KAAK,CAACH,EAAaI,CAAC,CAAGJ,EAAaK,IAAI,EACzDzB,EAAO0B,QAAQ,CAAC,SACtB,MAAOC,EAAO,CACf7B,EAAqB,CAAEe,KAAM,QAASI,QAASU,CAAK,GAEtD,EACAC,UAASC,CAAA,EAAwB,GAAvB,CAAEZ,QAAAA,CAAO,CAAEa,KAAAA,CAAI,CAAEC,KAAAA,CAAAA,CAAM,CAAAF,EAC1BG,EAAiBnC,EAAgBmC,cAAc,CAACD,EAAKP,CAAC,QAC5D,CAAIQ,IAIA,CAACF,GAIEb,EAAQgB,CAAC,CAACC,GAAG,GAAKJ,EAAKI,GAAG,AAClC,EACAC,MAAO,EACPC,MAAO,QAET"}