)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/emoji-custom/client/lib/emojiCustom.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { escapeRegExp } from '@rocket.chat/string-helpers';\nimport $ from 'jquery';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { emoji, updateRecent } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { LegacyRoomManager } from '../../../ui-utils/client';\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\nimport { isSetNotNull } from './function-isSet';\n\nexport const getEmojiUrlFromName = function (name, extension) {\n\tif (name == null) {\n\t\treturn;\n\t}\n\n\tconst key = `emoji_random_${name}`;\n\n\tconst random = isSetNotNull(() => Session.keys[key]) ? Session.keys[key] : 0;\n\n\treturn getURL(`/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`);\n};\n\nexport const deleteEmojiCustom = function (emojiData) {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.name}:`);\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t}\n\tif (isSetNotNull(() => emojiData.aliases)) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tupdateRecent('rocket');\n};\n\nexport const updateEmojiCustom = function (emojiData) {\n\tlet key = `emoji_random_${emojiData.name}`;\n\tSession.set(key, Math.round(Math.random() * 1000));\n\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.previousName}:`);\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {};\n\t\t\temoji.list[`:${alias}:`].emojiPackage = 'emojiCustom';\n\t\t\temoji.list[`:${alias}:`].aliasOf = emojiData.name;\n\t\t}\n\t}\n\n\tconst url = getEmojiUrlFromName(emojiData.name, emojiData.extension);\n\n\t// update in admin interface\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`.emojiAdminPreview-image[data-emoji='${emojiData.previousName}']`)\n\t\t\t.css('background-image', `url('${url})'`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}'] span`)\n\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}']`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`)\n\t\t\t.attr('class', `emoji-${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`li[data-emoji='${emojiData.name}'] span`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker and opened rooms\n\tfor (key in LegacyRoomManager.openedRooms) {\n\t\tif (LegacyRoomManager.openedRooms.hasOwnProperty(key)) {\n\t\t\tconst room = LegacyRoomManager.openedRooms[key];\n\t\t\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t\t\t$(room.dom)\n\t\t\t\t\t.find(`span[data-emoji='${emojiData.previousName}']`)\n\t\t\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t\t} else {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateRecent('rocket');\n};\n\nconst customRender = (html) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || emoji.packages.emojiCustom.list.indexOf(shortname) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.hasOwnProperty('aliasOf')) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await sdk.rest.get('/v1/emoji-custom.list');\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = currentEmoji;\n\t\t\t\temoji.list[`:${currentEmoji.name}:`].emojiPackage = 'emojiCustom';\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n",null],"names":["escapeRegExp","$","Meteor","Session","emoji","updateRecent","CachedCollectionManager","LegacyRoomManager","getURL","sdk","isSetNotNull","module","export","getEmojiUrlFromName","deleteEmojiCustom","updateEmojiCustom","link","v","default","name","extension","key","concat","random","keys","encodeURIComponent","emojiData","list","arrayIndex","packages","emojiCustom","emojisByCategory","rocket","indexOf","splice","arrayIndexList","aliases","alias","aliasIndex","set","Math","round","previousExists","previousName","currentAliases","categoryIndex","push","Object","assign","emojiPackage","aliasOf","url","document","find","css","attr","openedRooms","hasOwnProperty","room","dom","customRender","html","emojisMatchGroup","map","join","_regexpSignature","_regexp","RegExp","replace","shortname","emojiAlias","dataCheck","emojiCategories","i18n","toneList","render","renderPicker","startup","onLogin","emojis","update","rest","get","currentEmoji","e","console","error"],"mappings":"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"}