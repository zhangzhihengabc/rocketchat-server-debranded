function module(e,t,a){let n,i,s,l,o,r,u,g,d,c,m,h;a.link("meteor/meteor",{Meteor(e){n=e}},0),a.link("meteor/tracker",{Tracker(e){i=e}},1),a.link("../../../../client/lib/rooms/roomCoordinator",{roomCoordinator(e){s=e}},2),a.link("../../../../client/lib/utils/messageArgs",{messageArgs(e){l=e}},3),a.link("../../../../client/views/room/MessageList/lib/autoTranslate",{hasTranslationLanguageInAttachments(e){o=e},hasTranslationLanguageInMessage(e){r=e}},4),a.link("../../../authorization/client",{hasAtLeastOnePermission(e){u=e}},5),a.link("../../../models/client",{Messages(e){g=e}},6),a.link("../../../settings/client",{settings(e){d=e}},7),a.link("../../../ui-utils/client/lib/MessageAction",{MessageAction(e){c=e}},8),a.link("../../../utils/client/lib/SDKClient",{sdk(e){m=e}},9),a.link("./autotranslate",{AutoTranslate(e){h=e}},10),n.startup(()=>{h.init(),i.autorun(()=>{d.get("AutoTranslate_Enabled")&&u(["auto-translate"])?(c.addButton({id:"translate",icon:"language",label:"Translate",context:["message","message-mobile","threads"],type:"interaction",action(e,t){let{message:a=l(this).msg}=t,n=h.getLanguage(a.rid);r(a,n)||o(a.attachments,n)||(h.messageIdsToWait[a._id]=!0,g.update({_id:a._id},{$set:{autoTranslateFetching:!0}}),m.call("autoTranslate.translateMessage",a,n));let i="autoTranslateShowInverse"in a?"$unset":"$set";g.update({_id:a._id},{[i]:{autoTranslateShowInverse:!0}})},condition(e){let{message:t,subscription:a,user:n,room:i}=e;if(!n)return!1;let l=(null==a?void 0:a.autoTranslateLanguage)||h.getLanguage(t.rid)||"",u=s.isLivechatRoom(null==i?void 0:i.t),g=(null==t?void 0:t.u)&&t.u._id!==n._id,d=(null==a?void 0:a.autoTranslate)||u,c=r(t,l)||o(t.attachments,l);return!!(t.autoTranslateShowInverse||g&&d&&!c)},order:90}),c.addButton({id:"view-original",icon:"language",label:"View_original",context:["message","message-mobile","threads"],type:"interaction",action(e,t){let{message:a=l(this).msg}=t,n=h.getLanguage(a.rid);r(a,n)||o(a.attachments,n)||(h.messageIdsToWait[a._id]=!0,g.update({_id:a._id},{$set:{autoTranslateFetching:!0}}),m.call("autoTranslate.translateMessage",a,n));let i="autoTranslateShowInverse"in a?"$unset":"$set";g.update({_id:a._id},{[i]:{autoTranslateShowInverse:!0}})},condition(e){let{message:t,subscription:a,user:n,room:i}=e,l=(null==a?void 0:a.autoTranslateLanguage)||h.getLanguage(t.rid)||"",u=s.isLivechatRoom(null==i?void 0:i.t);if(!n)return!1;let g=(null==t?void 0:t.u)&&t.u._id!==n._id,d=(null==a?void 0:a.autoTranslate)||u,c=r(t,l)||o(t.attachments,l);return!!(!t.autoTranslateShowInverse&&g&&d&&c)},order:90})):c.removeButton("toggle-language")})})}
//# sourceMappingURL=/dynamic/app/autotranslate/client/lib/dc363b9bf86f84f67286d830015f5841a61bf704.map
