)]}'
{"version":3,"sources":["meteor://ðŸ’»app/app/2fa/client/TOTPLDAP.js","meteor://ðŸ’»app/<anon>"],"sourcesContent":["import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\nimport '../../../client/startup/ldap';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\nimport { reportError } from '../../../client/lib/2fa/utils';\n\nMeteor.loginWithLDAPAndTOTP = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst ldapPass = args.shift();\n\n\t// Check if last argument is a function. if it is, pop it off and set callback to it\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\t// The last argument before the callback is the totp code\n\tconst code = args.pop();\n\n\t// if args still holds options item, grab it\n\tconst ldapOptions = args.length > 0 ? args.shift() : {};\n\n\t// Set up loginRequest object\n\tconst loginRequest = {\n\t\tldap: true,\n\t\tusername,\n\t\tldapPass,\n\t\tldapOptions,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithLDAP } = Meteor;\n\nMeteor.loginWithLDAP = function (...args) {\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\n\toverrideLoginMethod(loginWithLDAP, args, callback, Meteor.loginWithLDAPAndTOTP, args[0]);\n};\n",null],"names":["Accounts","Meteor","overrideLoginMethod","reportError","module","link","v","loginWithLDAPAndTOTP","_len","arguments","length","args","Array","_key","username","shift","ldapPass","callback","pop","code","ldapOptions","callLoginMethod","methodArguments","totp","login","ldap","userCallback","error","loginWithLDAP","_len2","_key2"],"mappings":"2BAAIA,EAA6EC,EAA4GC,EAAqIC,EAArTC,EAAOC,IAAI,CAAC,uBAAuB,CAACL,SAASM,CAAC,EAAEN,EAASM,CAAC,CAAC,EAAE,GAAcF,EAAOC,IAAI,CAAC,gBAAgB,CAACJ,OAAOK,CAAC,EAAEL,EAAOK,CAAC,CAAC,EAAE,GAAGF,EAAOC,IAAI,CAAC,gCAAwDD,EAAOC,IAAI,CAAC,8CAA8C,CAACH,oBAAoBI,CAAC,EAAEJ,EAAoBI,CAAC,CAAC,EAAE,GAAmBF,EAAOC,IAAI,CAAC,gCAAgC,CAACF,YAAYG,CAAC,EAAEH,EAAYG,CAAC,CAAC,EAAE,GAO1ZL,EAAOM,oBAAoB,CAAG,WAAmB,IAAA,IAAAC,EAAAC,UAAAC,MAAA,CAANC,EAAI,AAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,CAAI,CAAAE,EAAA,CAAAJ,SAAA,CAAAI,EAAA,CAE9C,IAAMC,EAAWH,EAAKI,KAAK,GACrBC,EAAWL,EAAKI,KAAK,GAGrBE,EAAW,AAAiC,YAAjC,OAAON,CAAI,CAACA,EAAKD,MAAM,CAAG,EAAE,CAAkBC,EAAKO,GAAG,GAAK,KAEtEC,EAAOR,EAAKO,GAAG,GAGfE,EAAcT,EAAKD,MAAM,CAAG,EAAIC,EAAKI,KAAK,GAAK,CAAC,EAUtDf,EAASqB,eAAe,CAAC,CACxBC,gBAAiB,CAChB,CACCC,KAAM,CACLC,MAXiB,CACpBC,KAAM,CAAA,EACNX,SAAAA,EACAE,SAAAA,EACAI,YAAAA,CACD,EAOID,KAAAA,CACD,CACD,EACA,CACDO,aAAaC,CAAK,EACbA,EACHxB,EAAYwB,EAAOV,GAEnBA,GAAYA,GAEd,CACD,EACD,EAEA,GAAM,CAAEW,cAAAA,CAAAA,CAAe,CAAG3B,CAE1BA,CAAAA,EAAO2B,aAAa,CAAG,WAAmB,IAAA,IAAAC,EAAApB,UAAAC,MAAA,CAANC,EAAI,AAAAC,MAAAiB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJnB,CAAI,CAAAmB,EAAA,CAAArB,SAAA,CAAAqB,EAAA,CACvC,IAAMb,EAAW,AAAiC,YAAjC,OAAON,CAAI,CAACA,EAAKD,MAAM,CAAG,EAAE,CAAkBC,EAAKO,GAAG,GAAK,KAE5EhB,EAAoB0B,EAAejB,EAAMM,EAAUhB,EAAOM,oBAAoB,CAAEI,CAAI,CAAC,EAAE,CACxF"}